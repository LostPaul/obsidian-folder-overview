/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __create = Object.create;
var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __getProtoOf = Object.getPrototypeOf;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __commonJS = (cb, mod) => function __require() {
  return mod || (0, cb[__getOwnPropNames(cb)[0]])((mod = { exports: {} }).exports, mod), mod.exports;
};
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toESM = (mod, isNodeMode, target) => (target = mod != null ? __create(__getProtoOf(mod)) : {}, __copyProps(isNodeMode || !mod || !mod.__esModule ? __defProp(target, "default", { value: mod, enumerable: true }) : target, mod));
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// node_modules/front-matter-plugin-api-provider/lib/contracts/Api.js
var require_Api = __commonJS({
  "node_modules/front-matter-plugin-api-provider/lib/contracts/Api.js"(exports) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
  }
});

// node_modules/front-matter-plugin-api-provider/lib/contracts/EventDispatcher.js
var require_EventDispatcher = __commonJS({
  "node_modules/front-matter-plugin-api-provider/lib/contracts/EventDispatcher.js"(exports) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
  }
});

// node_modules/front-matter-plugin-api-provider/lib/contracts/Resolver.js
var require_Resolver = __commonJS({
  "node_modules/front-matter-plugin-api-provider/lib/contracts/Resolver.js"(exports) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
  }
});

// node_modules/front-matter-plugin-api-provider/lib/index.js
var require_lib = __commonJS({
  "node_modules/front-matter-plugin-api-provider/lib/index.js"(exports) {
    "use strict";
    var __createBinding = exports && exports.__createBinding || (Object.create ? function(o, m, k, k2) {
      if (k2 === void 0)
        k2 = k;
      var desc = Object.getOwnPropertyDescriptor(m, k);
      if (!desc || ("get" in desc ? !m.__esModule : desc.writable || desc.configurable)) {
        desc = { enumerable: true, get: function() {
          return m[k];
        } };
      }
      Object.defineProperty(o, k2, desc);
    } : function(o, m, k, k2) {
      if (k2 === void 0)
        k2 = k;
      o[k2] = m[k];
    });
    var __exportStar = exports && exports.__exportStar || function(m, exports2) {
      for (var p in m)
        if (p !== "default" && !Object.prototype.hasOwnProperty.call(exports2, p))
          __createBinding(exports2, m, p);
    };
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.getApiSafe = exports.getDefer = exports.isPluginEnabled = exports.PluginNotEnabledError = exports.pluginId = void 0;
    __exportStar(require_Api(), exports);
    __exportStar(require_EventDispatcher(), exports);
    __exportStar(require_Resolver(), exports);
    exports.pluginId = "obsidian-front-matter-title-plugin";
    var PluginNotEnabledError = class extends Error {
    };
    exports.PluginNotEnabledError = PluginNotEnabledError;
    function isPluginEnabled(app2) {
      var _a, _b, _c;
      return (_c = (_b = (_a = app2 === null || app2 === void 0 ? void 0 : app2.plugins) === null || _a === void 0 ? void 0 : _a.enabledPlugins) === null || _b === void 0 ? void 0 : _b.has(exports.pluginId)) !== null && _c !== void 0 ? _c : false;
    }
    exports.isPluginEnabled = isPluginEnabled;
    function getDefer2(app2) {
      var _a, _b, _c, _d;
      const plugin = (_b = (_a = app2 === null || app2 === void 0 ? void 0 : app2.plugins) === null || _a === void 0 ? void 0 : _a.getPlugin(exports.pluginId)) !== null && _b !== void 0 ? _b : null;
      const defer = (_d = (_c = plugin === null || plugin === void 0 ? void 0 : plugin.getDefer) === null || _c === void 0 ? void 0 : _c.call(plugin)) !== null && _d !== void 0 ? _d : null;
      if (defer === null) {
        throw new PluginNotEnabledError(`Plugin ${exports.pluginId} is not enabled or old version`);
      }
      return defer;
    }
    exports.getDefer = getDefer2;
    function getApiSafe(app2) {
      return new ApiWrapper(null, app2);
    }
    exports.getApiSafe = getApiSafe;
    var ApiWrapper = class {
      constructor(api, app2) {
        this.api = api;
        this.app = app2;
      }
      before() {
        if (this.api !== null) {
          return;
        }
        const defer = this.getDeffer();
        if (defer === null) {
          return;
        }
        const api = defer.getApi();
        if (api === null) {
          return defer.awaitPlugin().then(() => {
            this.api = defer.getApi();
          });
        } else {
          this.api = api;
        }
      }
      getDeffer() {
        try {
          return getDefer2(this.app);
        } catch (e) {
          if (e instanceof PluginNotEnabledError) {
            return null;
          }
          throw e;
        }
      }
      getResolverFactory() {
        var _a, _b;
        this.before();
        return (_b = (_a = this.api) === null || _a === void 0 ? void 0 : _a.getResolverFactory()) !== null && _b !== void 0 ? _b : null;
      }
      getEventDispatcher() {
        var _a, _b;
        this.before();
        return (_b = (_a = this.api) === null || _a === void 0 ? void 0 : _a.getEventDispatcher()) !== null && _b !== void 0 ? _b : null;
      }
      getEnabledFeatures() {
        var _a, _b;
        this.before();
        return (_b = (_a = this.api) === null || _a === void 0 ? void 0 : _a.getEnabledFeatures()) !== null && _b !== void 0 ? _b : [];
      }
    };
  }
});

// src/folderOverview/src/main.ts
var main_exports = {};
__export(main_exports, {
  default: () => FolderOverviewPlugin
});
module.exports = __toCommonJS(main_exports);
var import_obsidian45 = require("obsidian");

// src/folderOverview/src/view.ts
var import_obsidian43 = require("obsidian");

// src/folderOverview/src/FolderOverview.ts
var import_obsidian42 = require("obsidian");

// src/folderOverview/src/modals/Settings.ts
var import_obsidian38 = require("obsidian");

// src/folderOverview/src/utils/functions.ts
function getFolderPathFromString(path) {
  const subString = path.lastIndexOf("/") >= 0 ? path.lastIndexOf("/") : 0;
  const folderPath = path.substring(0, subString);
  if (folderPath === "") {
    return "/";
  } else {
    return folderPath;
  }
}

// src/folderOverview/src/settings.ts
var import_obsidian37 = require("obsidian");

// src/folderOverview/src/suggesters/FolderSuggester.ts
var import_obsidian36 = require("obsidian");

// src/folderOverview/src/suggesters/Suggest.ts
var import_obsidian = require("obsidian");

// node_modules/@popperjs/core/lib/enums.js
var top = "top";
var bottom = "bottom";
var right = "right";
var left = "left";
var auto = "auto";
var basePlacements = [top, bottom, right, left];
var start = "start";
var end = "end";
var clippingParents = "clippingParents";
var viewport = "viewport";
var popper = "popper";
var reference = "reference";
var variationPlacements = /* @__PURE__ */ basePlacements.reduce(function(acc, placement) {
  return acc.concat([placement + "-" + start, placement + "-" + end]);
}, []);
var placements = /* @__PURE__ */ [].concat(basePlacements, [auto]).reduce(function(acc, placement) {
  return acc.concat([placement, placement + "-" + start, placement + "-" + end]);
}, []);
var beforeRead = "beforeRead";
var read = "read";
var afterRead = "afterRead";
var beforeMain = "beforeMain";
var main = "main";
var afterMain = "afterMain";
var beforeWrite = "beforeWrite";
var write = "write";
var afterWrite = "afterWrite";
var modifierPhases = [beforeRead, read, afterRead, beforeMain, main, afterMain, beforeWrite, write, afterWrite];

// node_modules/@popperjs/core/lib/dom-utils/getNodeName.js
function getNodeName(element) {
  return element ? (element.nodeName || "").toLowerCase() : null;
}

// node_modules/@popperjs/core/lib/dom-utils/getWindow.js
function getWindow(node) {
  if (node == null) {
    return window;
  }
  if (node.toString() !== "[object Window]") {
    var ownerDocument = node.ownerDocument;
    return ownerDocument ? ownerDocument.defaultView || window : window;
  }
  return node;
}

// node_modules/@popperjs/core/lib/dom-utils/instanceOf.js
function isElement(node) {
  var OwnElement = getWindow(node).Element;
  return node instanceof OwnElement || node instanceof Element;
}
function isHTMLElement(node) {
  var OwnElement = getWindow(node).HTMLElement;
  return node instanceof OwnElement || node instanceof HTMLElement;
}
function isShadowRoot(node) {
  if (typeof ShadowRoot === "undefined") {
    return false;
  }
  var OwnElement = getWindow(node).ShadowRoot;
  return node instanceof OwnElement || node instanceof ShadowRoot;
}

// node_modules/@popperjs/core/lib/modifiers/applyStyles.js
function applyStyles(_ref) {
  var state = _ref.state;
  Object.keys(state.elements).forEach(function(name) {
    var style = state.styles[name] || {};
    var attributes = state.attributes[name] || {};
    var element = state.elements[name];
    if (!isHTMLElement(element) || !getNodeName(element)) {
      return;
    }
    Object.assign(element.style, style);
    Object.keys(attributes).forEach(function(name2) {
      var value = attributes[name2];
      if (value === false) {
        element.removeAttribute(name2);
      } else {
        element.setAttribute(name2, value === true ? "" : value);
      }
    });
  });
}
function effect(_ref2) {
  var state = _ref2.state;
  var initialStyles = {
    popper: {
      position: state.options.strategy,
      left: "0",
      top: "0",
      margin: "0"
    },
    arrow: {
      position: "absolute"
    },
    reference: {}
  };
  Object.assign(state.elements.popper.style, initialStyles.popper);
  state.styles = initialStyles;
  if (state.elements.arrow) {
    Object.assign(state.elements.arrow.style, initialStyles.arrow);
  }
  return function() {
    Object.keys(state.elements).forEach(function(name) {
      var element = state.elements[name];
      var attributes = state.attributes[name] || {};
      var styleProperties = Object.keys(state.styles.hasOwnProperty(name) ? state.styles[name] : initialStyles[name]);
      var style = styleProperties.reduce(function(style2, property) {
        style2[property] = "";
        return style2;
      }, {});
      if (!isHTMLElement(element) || !getNodeName(element)) {
        return;
      }
      Object.assign(element.style, style);
      Object.keys(attributes).forEach(function(attribute) {
        element.removeAttribute(attribute);
      });
    });
  };
}
var applyStyles_default = {
  name: "applyStyles",
  enabled: true,
  phase: "write",
  fn: applyStyles,
  effect,
  requires: ["computeStyles"]
};

// node_modules/@popperjs/core/lib/utils/getBasePlacement.js
function getBasePlacement(placement) {
  return placement.split("-")[0];
}

// node_modules/@popperjs/core/lib/utils/math.js
var max = Math.max;
var min = Math.min;
var round = Math.round;

// node_modules/@popperjs/core/lib/utils/userAgent.js
function getUAString() {
  var uaData = navigator.userAgentData;
  if (uaData != null && uaData.brands && Array.isArray(uaData.brands)) {
    return uaData.brands.map(function(item) {
      return item.brand + "/" + item.version;
    }).join(" ");
  }
  return navigator.userAgent;
}

// node_modules/@popperjs/core/lib/dom-utils/isLayoutViewport.js
function isLayoutViewport() {
  return !/^((?!chrome|android).)*safari/i.test(getUAString());
}

// node_modules/@popperjs/core/lib/dom-utils/getBoundingClientRect.js
function getBoundingClientRect(element, includeScale, isFixedStrategy) {
  if (includeScale === void 0) {
    includeScale = false;
  }
  if (isFixedStrategy === void 0) {
    isFixedStrategy = false;
  }
  var clientRect = element.getBoundingClientRect();
  var scaleX = 1;
  var scaleY = 1;
  if (includeScale && isHTMLElement(element)) {
    scaleX = element.offsetWidth > 0 ? round(clientRect.width) / element.offsetWidth || 1 : 1;
    scaleY = element.offsetHeight > 0 ? round(clientRect.height) / element.offsetHeight || 1 : 1;
  }
  var _ref = isElement(element) ? getWindow(element) : window, visualViewport = _ref.visualViewport;
  var addVisualOffsets = !isLayoutViewport() && isFixedStrategy;
  var x = (clientRect.left + (addVisualOffsets && visualViewport ? visualViewport.offsetLeft : 0)) / scaleX;
  var y = (clientRect.top + (addVisualOffsets && visualViewport ? visualViewport.offsetTop : 0)) / scaleY;
  var width = clientRect.width / scaleX;
  var height = clientRect.height / scaleY;
  return {
    width,
    height,
    top: y,
    right: x + width,
    bottom: y + height,
    left: x,
    x,
    y
  };
}

// node_modules/@popperjs/core/lib/dom-utils/getLayoutRect.js
function getLayoutRect(element) {
  var clientRect = getBoundingClientRect(element);
  var width = element.offsetWidth;
  var height = element.offsetHeight;
  if (Math.abs(clientRect.width - width) <= 1) {
    width = clientRect.width;
  }
  if (Math.abs(clientRect.height - height) <= 1) {
    height = clientRect.height;
  }
  return {
    x: element.offsetLeft,
    y: element.offsetTop,
    width,
    height
  };
}

// node_modules/@popperjs/core/lib/dom-utils/contains.js
function contains(parent, child) {
  var rootNode = child.getRootNode && child.getRootNode();
  if (parent.contains(child)) {
    return true;
  } else if (rootNode && isShadowRoot(rootNode)) {
    var next = child;
    do {
      if (next && parent.isSameNode(next)) {
        return true;
      }
      next = next.parentNode || next.host;
    } while (next);
  }
  return false;
}

// node_modules/@popperjs/core/lib/dom-utils/getComputedStyle.js
function getComputedStyle(element) {
  return getWindow(element).getComputedStyle(element);
}

// node_modules/@popperjs/core/lib/dom-utils/isTableElement.js
function isTableElement(element) {
  return ["table", "td", "th"].indexOf(getNodeName(element)) >= 0;
}

// node_modules/@popperjs/core/lib/dom-utils/getDocumentElement.js
function getDocumentElement(element) {
  return ((isElement(element) ? element.ownerDocument : element.document) || window.document).documentElement;
}

// node_modules/@popperjs/core/lib/dom-utils/getParentNode.js
function getParentNode(element) {
  if (getNodeName(element) === "html") {
    return element;
  }
  return element.assignedSlot || element.parentNode || (isShadowRoot(element) ? element.host : null) || getDocumentElement(element);
}

// node_modules/@popperjs/core/lib/dom-utils/getOffsetParent.js
function getTrueOffsetParent(element) {
  if (!isHTMLElement(element) || getComputedStyle(element).position === "fixed") {
    return null;
  }
  return element.offsetParent;
}
function getContainingBlock(element) {
  var isFirefox = /firefox/i.test(getUAString());
  var isIE = /Trident/i.test(getUAString());
  if (isIE && isHTMLElement(element)) {
    var elementCss = getComputedStyle(element);
    if (elementCss.position === "fixed") {
      return null;
    }
  }
  var currentNode = getParentNode(element);
  if (isShadowRoot(currentNode)) {
    currentNode = currentNode.host;
  }
  while (isHTMLElement(currentNode) && ["html", "body"].indexOf(getNodeName(currentNode)) < 0) {
    var css = getComputedStyle(currentNode);
    if (css.transform !== "none" || css.perspective !== "none" || css.contain === "paint" || ["transform", "perspective"].indexOf(css.willChange) !== -1 || isFirefox && css.willChange === "filter" || isFirefox && css.filter && css.filter !== "none") {
      return currentNode;
    } else {
      currentNode = currentNode.parentNode;
    }
  }
  return null;
}
function getOffsetParent(element) {
  var window2 = getWindow(element);
  var offsetParent = getTrueOffsetParent(element);
  while (offsetParent && isTableElement(offsetParent) && getComputedStyle(offsetParent).position === "static") {
    offsetParent = getTrueOffsetParent(offsetParent);
  }
  if (offsetParent && (getNodeName(offsetParent) === "html" || getNodeName(offsetParent) === "body" && getComputedStyle(offsetParent).position === "static")) {
    return window2;
  }
  return offsetParent || getContainingBlock(element) || window2;
}

// node_modules/@popperjs/core/lib/utils/getMainAxisFromPlacement.js
function getMainAxisFromPlacement(placement) {
  return ["top", "bottom"].indexOf(placement) >= 0 ? "x" : "y";
}

// node_modules/@popperjs/core/lib/utils/within.js
function within(min2, value, max2) {
  return max(min2, min(value, max2));
}
function withinMaxClamp(min2, value, max2) {
  var v = within(min2, value, max2);
  return v > max2 ? max2 : v;
}

// node_modules/@popperjs/core/lib/utils/getFreshSideObject.js
function getFreshSideObject() {
  return {
    top: 0,
    right: 0,
    bottom: 0,
    left: 0
  };
}

// node_modules/@popperjs/core/lib/utils/mergePaddingObject.js
function mergePaddingObject(paddingObject) {
  return Object.assign({}, getFreshSideObject(), paddingObject);
}

// node_modules/@popperjs/core/lib/utils/expandToHashMap.js
function expandToHashMap(value, keys) {
  return keys.reduce(function(hashMap, key) {
    hashMap[key] = value;
    return hashMap;
  }, {});
}

// node_modules/@popperjs/core/lib/modifiers/arrow.js
var toPaddingObject = function toPaddingObject2(padding, state) {
  padding = typeof padding === "function" ? padding(Object.assign({}, state.rects, {
    placement: state.placement
  })) : padding;
  return mergePaddingObject(typeof padding !== "number" ? padding : expandToHashMap(padding, basePlacements));
};
function arrow(_ref) {
  var _state$modifiersData$;
  var state = _ref.state, name = _ref.name, options = _ref.options;
  var arrowElement = state.elements.arrow;
  var popperOffsets2 = state.modifiersData.popperOffsets;
  var basePlacement = getBasePlacement(state.placement);
  var axis = getMainAxisFromPlacement(basePlacement);
  var isVertical = [left, right].indexOf(basePlacement) >= 0;
  var len = isVertical ? "height" : "width";
  if (!arrowElement || !popperOffsets2) {
    return;
  }
  var paddingObject = toPaddingObject(options.padding, state);
  var arrowRect = getLayoutRect(arrowElement);
  var minProp = axis === "y" ? top : left;
  var maxProp = axis === "y" ? bottom : right;
  var endDiff = state.rects.reference[len] + state.rects.reference[axis] - popperOffsets2[axis] - state.rects.popper[len];
  var startDiff = popperOffsets2[axis] - state.rects.reference[axis];
  var arrowOffsetParent = getOffsetParent(arrowElement);
  var clientSize = arrowOffsetParent ? axis === "y" ? arrowOffsetParent.clientHeight || 0 : arrowOffsetParent.clientWidth || 0 : 0;
  var centerToReference = endDiff / 2 - startDiff / 2;
  var min2 = paddingObject[minProp];
  var max2 = clientSize - arrowRect[len] - paddingObject[maxProp];
  var center = clientSize / 2 - arrowRect[len] / 2 + centerToReference;
  var offset2 = within(min2, center, max2);
  var axisProp = axis;
  state.modifiersData[name] = (_state$modifiersData$ = {}, _state$modifiersData$[axisProp] = offset2, _state$modifiersData$.centerOffset = offset2 - center, _state$modifiersData$);
}
function effect2(_ref2) {
  var state = _ref2.state, options = _ref2.options;
  var _options$element = options.element, arrowElement = _options$element === void 0 ? "[data-popper-arrow]" : _options$element;
  if (arrowElement == null) {
    return;
  }
  if (typeof arrowElement === "string") {
    arrowElement = state.elements.popper.querySelector(arrowElement);
    if (!arrowElement) {
      return;
    }
  }
  if (!contains(state.elements.popper, arrowElement)) {
    return;
  }
  state.elements.arrow = arrowElement;
}
var arrow_default = {
  name: "arrow",
  enabled: true,
  phase: "main",
  fn: arrow,
  effect: effect2,
  requires: ["popperOffsets"],
  requiresIfExists: ["preventOverflow"]
};

// node_modules/@popperjs/core/lib/utils/getVariation.js
function getVariation(placement) {
  return placement.split("-")[1];
}

// node_modules/@popperjs/core/lib/modifiers/computeStyles.js
var unsetSides = {
  top: "auto",
  right: "auto",
  bottom: "auto",
  left: "auto"
};
function roundOffsetsByDPR(_ref, win) {
  var x = _ref.x, y = _ref.y;
  var dpr = win.devicePixelRatio || 1;
  return {
    x: round(x * dpr) / dpr || 0,
    y: round(y * dpr) / dpr || 0
  };
}
function mapToStyles(_ref2) {
  var _Object$assign2;
  var popper2 = _ref2.popper, popperRect = _ref2.popperRect, placement = _ref2.placement, variation = _ref2.variation, offsets = _ref2.offsets, position = _ref2.position, gpuAcceleration = _ref2.gpuAcceleration, adaptive = _ref2.adaptive, roundOffsets = _ref2.roundOffsets, isFixed = _ref2.isFixed;
  var _offsets$x = offsets.x, x = _offsets$x === void 0 ? 0 : _offsets$x, _offsets$y = offsets.y, y = _offsets$y === void 0 ? 0 : _offsets$y;
  var _ref3 = typeof roundOffsets === "function" ? roundOffsets({
    x,
    y
  }) : {
    x,
    y
  };
  x = _ref3.x;
  y = _ref3.y;
  var hasX = offsets.hasOwnProperty("x");
  var hasY = offsets.hasOwnProperty("y");
  var sideX = left;
  var sideY = top;
  var win = window;
  if (adaptive) {
    var offsetParent = getOffsetParent(popper2);
    var heightProp = "clientHeight";
    var widthProp = "clientWidth";
    if (offsetParent === getWindow(popper2)) {
      offsetParent = getDocumentElement(popper2);
      if (getComputedStyle(offsetParent).position !== "static" && position === "absolute") {
        heightProp = "scrollHeight";
        widthProp = "scrollWidth";
      }
    }
    offsetParent = offsetParent;
    if (placement === top || (placement === left || placement === right) && variation === end) {
      sideY = bottom;
      var offsetY = isFixed && offsetParent === win && win.visualViewport ? win.visualViewport.height : offsetParent[heightProp];
      y -= offsetY - popperRect.height;
      y *= gpuAcceleration ? 1 : -1;
    }
    if (placement === left || (placement === top || placement === bottom) && variation === end) {
      sideX = right;
      var offsetX = isFixed && offsetParent === win && win.visualViewport ? win.visualViewport.width : offsetParent[widthProp];
      x -= offsetX - popperRect.width;
      x *= gpuAcceleration ? 1 : -1;
    }
  }
  var commonStyles = Object.assign({
    position
  }, adaptive && unsetSides);
  var _ref4 = roundOffsets === true ? roundOffsetsByDPR({
    x,
    y
  }, getWindow(popper2)) : {
    x,
    y
  };
  x = _ref4.x;
  y = _ref4.y;
  if (gpuAcceleration) {
    var _Object$assign;
    return Object.assign({}, commonStyles, (_Object$assign = {}, _Object$assign[sideY] = hasY ? "0" : "", _Object$assign[sideX] = hasX ? "0" : "", _Object$assign.transform = (win.devicePixelRatio || 1) <= 1 ? "translate(" + x + "px, " + y + "px)" : "translate3d(" + x + "px, " + y + "px, 0)", _Object$assign));
  }
  return Object.assign({}, commonStyles, (_Object$assign2 = {}, _Object$assign2[sideY] = hasY ? y + "px" : "", _Object$assign2[sideX] = hasX ? x + "px" : "", _Object$assign2.transform = "", _Object$assign2));
}
function computeStyles(_ref5) {
  var state = _ref5.state, options = _ref5.options;
  var _options$gpuAccelerat = options.gpuAcceleration, gpuAcceleration = _options$gpuAccelerat === void 0 ? true : _options$gpuAccelerat, _options$adaptive = options.adaptive, adaptive = _options$adaptive === void 0 ? true : _options$adaptive, _options$roundOffsets = options.roundOffsets, roundOffsets = _options$roundOffsets === void 0 ? true : _options$roundOffsets;
  var commonStyles = {
    placement: getBasePlacement(state.placement),
    variation: getVariation(state.placement),
    popper: state.elements.popper,
    popperRect: state.rects.popper,
    gpuAcceleration,
    isFixed: state.options.strategy === "fixed"
  };
  if (state.modifiersData.popperOffsets != null) {
    state.styles.popper = Object.assign({}, state.styles.popper, mapToStyles(Object.assign({}, commonStyles, {
      offsets: state.modifiersData.popperOffsets,
      position: state.options.strategy,
      adaptive,
      roundOffsets
    })));
  }
  if (state.modifiersData.arrow != null) {
    state.styles.arrow = Object.assign({}, state.styles.arrow, mapToStyles(Object.assign({}, commonStyles, {
      offsets: state.modifiersData.arrow,
      position: "absolute",
      adaptive: false,
      roundOffsets
    })));
  }
  state.attributes.popper = Object.assign({}, state.attributes.popper, {
    "data-popper-placement": state.placement
  });
}
var computeStyles_default = {
  name: "computeStyles",
  enabled: true,
  phase: "beforeWrite",
  fn: computeStyles,
  data: {}
};

// node_modules/@popperjs/core/lib/modifiers/eventListeners.js
var passive = {
  passive: true
};
function effect3(_ref) {
  var state = _ref.state, instance = _ref.instance, options = _ref.options;
  var _options$scroll = options.scroll, scroll = _options$scroll === void 0 ? true : _options$scroll, _options$resize = options.resize, resize = _options$resize === void 0 ? true : _options$resize;
  var window2 = getWindow(state.elements.popper);
  var scrollParents = [].concat(state.scrollParents.reference, state.scrollParents.popper);
  if (scroll) {
    scrollParents.forEach(function(scrollParent) {
      scrollParent.addEventListener("scroll", instance.update, passive);
    });
  }
  if (resize) {
    window2.addEventListener("resize", instance.update, passive);
  }
  return function() {
    if (scroll) {
      scrollParents.forEach(function(scrollParent) {
        scrollParent.removeEventListener("scroll", instance.update, passive);
      });
    }
    if (resize) {
      window2.removeEventListener("resize", instance.update, passive);
    }
  };
}
var eventListeners_default = {
  name: "eventListeners",
  enabled: true,
  phase: "write",
  fn: function fn() {
  },
  effect: effect3,
  data: {}
};

// node_modules/@popperjs/core/lib/utils/getOppositePlacement.js
var hash = {
  left: "right",
  right: "left",
  bottom: "top",
  top: "bottom"
};
function getOppositePlacement(placement) {
  return placement.replace(/left|right|bottom|top/g, function(matched) {
    return hash[matched];
  });
}

// node_modules/@popperjs/core/lib/utils/getOppositeVariationPlacement.js
var hash2 = {
  start: "end",
  end: "start"
};
function getOppositeVariationPlacement(placement) {
  return placement.replace(/start|end/g, function(matched) {
    return hash2[matched];
  });
}

// node_modules/@popperjs/core/lib/dom-utils/getWindowScroll.js
function getWindowScroll(node) {
  var win = getWindow(node);
  var scrollLeft = win.pageXOffset;
  var scrollTop = win.pageYOffset;
  return {
    scrollLeft,
    scrollTop
  };
}

// node_modules/@popperjs/core/lib/dom-utils/getWindowScrollBarX.js
function getWindowScrollBarX(element) {
  return getBoundingClientRect(getDocumentElement(element)).left + getWindowScroll(element).scrollLeft;
}

// node_modules/@popperjs/core/lib/dom-utils/getViewportRect.js
function getViewportRect(element, strategy) {
  var win = getWindow(element);
  var html = getDocumentElement(element);
  var visualViewport = win.visualViewport;
  var width = html.clientWidth;
  var height = html.clientHeight;
  var x = 0;
  var y = 0;
  if (visualViewport) {
    width = visualViewport.width;
    height = visualViewport.height;
    var layoutViewport = isLayoutViewport();
    if (layoutViewport || !layoutViewport && strategy === "fixed") {
      x = visualViewport.offsetLeft;
      y = visualViewport.offsetTop;
    }
  }
  return {
    width,
    height,
    x: x + getWindowScrollBarX(element),
    y
  };
}

// node_modules/@popperjs/core/lib/dom-utils/getDocumentRect.js
function getDocumentRect(element) {
  var _element$ownerDocumen;
  var html = getDocumentElement(element);
  var winScroll = getWindowScroll(element);
  var body = (_element$ownerDocumen = element.ownerDocument) == null ? void 0 : _element$ownerDocumen.body;
  var width = max(html.scrollWidth, html.clientWidth, body ? body.scrollWidth : 0, body ? body.clientWidth : 0);
  var height = max(html.scrollHeight, html.clientHeight, body ? body.scrollHeight : 0, body ? body.clientHeight : 0);
  var x = -winScroll.scrollLeft + getWindowScrollBarX(element);
  var y = -winScroll.scrollTop;
  if (getComputedStyle(body || html).direction === "rtl") {
    x += max(html.clientWidth, body ? body.clientWidth : 0) - width;
  }
  return {
    width,
    height,
    x,
    y
  };
}

// node_modules/@popperjs/core/lib/dom-utils/isScrollParent.js
function isScrollParent(element) {
  var _getComputedStyle = getComputedStyle(element), overflow = _getComputedStyle.overflow, overflowX = _getComputedStyle.overflowX, overflowY = _getComputedStyle.overflowY;
  return /auto|scroll|overlay|hidden/.test(overflow + overflowY + overflowX);
}

// node_modules/@popperjs/core/lib/dom-utils/getScrollParent.js
function getScrollParent(node) {
  if (["html", "body", "#document"].indexOf(getNodeName(node)) >= 0) {
    return node.ownerDocument.body;
  }
  if (isHTMLElement(node) && isScrollParent(node)) {
    return node;
  }
  return getScrollParent(getParentNode(node));
}

// node_modules/@popperjs/core/lib/dom-utils/listScrollParents.js
function listScrollParents(element, list) {
  var _element$ownerDocumen;
  if (list === void 0) {
    list = [];
  }
  var scrollParent = getScrollParent(element);
  var isBody = scrollParent === ((_element$ownerDocumen = element.ownerDocument) == null ? void 0 : _element$ownerDocumen.body);
  var win = getWindow(scrollParent);
  var target = isBody ? [win].concat(win.visualViewport || [], isScrollParent(scrollParent) ? scrollParent : []) : scrollParent;
  var updatedList = list.concat(target);
  return isBody ? updatedList : updatedList.concat(listScrollParents(getParentNode(target)));
}

// node_modules/@popperjs/core/lib/utils/rectToClientRect.js
function rectToClientRect(rect) {
  return Object.assign({}, rect, {
    left: rect.x,
    top: rect.y,
    right: rect.x + rect.width,
    bottom: rect.y + rect.height
  });
}

// node_modules/@popperjs/core/lib/dom-utils/getClippingRect.js
function getInnerBoundingClientRect(element, strategy) {
  var rect = getBoundingClientRect(element, false, strategy === "fixed");
  rect.top = rect.top + element.clientTop;
  rect.left = rect.left + element.clientLeft;
  rect.bottom = rect.top + element.clientHeight;
  rect.right = rect.left + element.clientWidth;
  rect.width = element.clientWidth;
  rect.height = element.clientHeight;
  rect.x = rect.left;
  rect.y = rect.top;
  return rect;
}
function getClientRectFromMixedType(element, clippingParent, strategy) {
  return clippingParent === viewport ? rectToClientRect(getViewportRect(element, strategy)) : isElement(clippingParent) ? getInnerBoundingClientRect(clippingParent, strategy) : rectToClientRect(getDocumentRect(getDocumentElement(element)));
}
function getClippingParents(element) {
  var clippingParents2 = listScrollParents(getParentNode(element));
  var canEscapeClipping = ["absolute", "fixed"].indexOf(getComputedStyle(element).position) >= 0;
  var clipperElement = canEscapeClipping && isHTMLElement(element) ? getOffsetParent(element) : element;
  if (!isElement(clipperElement)) {
    return [];
  }
  return clippingParents2.filter(function(clippingParent) {
    return isElement(clippingParent) && contains(clippingParent, clipperElement) && getNodeName(clippingParent) !== "body";
  });
}
function getClippingRect(element, boundary, rootBoundary, strategy) {
  var mainClippingParents = boundary === "clippingParents" ? getClippingParents(element) : [].concat(boundary);
  var clippingParents2 = [].concat(mainClippingParents, [rootBoundary]);
  var firstClippingParent = clippingParents2[0];
  var clippingRect = clippingParents2.reduce(function(accRect, clippingParent) {
    var rect = getClientRectFromMixedType(element, clippingParent, strategy);
    accRect.top = max(rect.top, accRect.top);
    accRect.right = min(rect.right, accRect.right);
    accRect.bottom = min(rect.bottom, accRect.bottom);
    accRect.left = max(rect.left, accRect.left);
    return accRect;
  }, getClientRectFromMixedType(element, firstClippingParent, strategy));
  clippingRect.width = clippingRect.right - clippingRect.left;
  clippingRect.height = clippingRect.bottom - clippingRect.top;
  clippingRect.x = clippingRect.left;
  clippingRect.y = clippingRect.top;
  return clippingRect;
}

// node_modules/@popperjs/core/lib/utils/computeOffsets.js
function computeOffsets(_ref) {
  var reference2 = _ref.reference, element = _ref.element, placement = _ref.placement;
  var basePlacement = placement ? getBasePlacement(placement) : null;
  var variation = placement ? getVariation(placement) : null;
  var commonX = reference2.x + reference2.width / 2 - element.width / 2;
  var commonY = reference2.y + reference2.height / 2 - element.height / 2;
  var offsets;
  switch (basePlacement) {
    case top:
      offsets = {
        x: commonX,
        y: reference2.y - element.height
      };
      break;
    case bottom:
      offsets = {
        x: commonX,
        y: reference2.y + reference2.height
      };
      break;
    case right:
      offsets = {
        x: reference2.x + reference2.width,
        y: commonY
      };
      break;
    case left:
      offsets = {
        x: reference2.x - element.width,
        y: commonY
      };
      break;
    default:
      offsets = {
        x: reference2.x,
        y: reference2.y
      };
  }
  var mainAxis = basePlacement ? getMainAxisFromPlacement(basePlacement) : null;
  if (mainAxis != null) {
    var len = mainAxis === "y" ? "height" : "width";
    switch (variation) {
      case start:
        offsets[mainAxis] = offsets[mainAxis] - (reference2[len] / 2 - element[len] / 2);
        break;
      case end:
        offsets[mainAxis] = offsets[mainAxis] + (reference2[len] / 2 - element[len] / 2);
        break;
      default:
    }
  }
  return offsets;
}

// node_modules/@popperjs/core/lib/utils/detectOverflow.js
function detectOverflow(state, options) {
  if (options === void 0) {
    options = {};
  }
  var _options = options, _options$placement = _options.placement, placement = _options$placement === void 0 ? state.placement : _options$placement, _options$strategy = _options.strategy, strategy = _options$strategy === void 0 ? state.strategy : _options$strategy, _options$boundary = _options.boundary, boundary = _options$boundary === void 0 ? clippingParents : _options$boundary, _options$rootBoundary = _options.rootBoundary, rootBoundary = _options$rootBoundary === void 0 ? viewport : _options$rootBoundary, _options$elementConte = _options.elementContext, elementContext = _options$elementConte === void 0 ? popper : _options$elementConte, _options$altBoundary = _options.altBoundary, altBoundary = _options$altBoundary === void 0 ? false : _options$altBoundary, _options$padding = _options.padding, padding = _options$padding === void 0 ? 0 : _options$padding;
  var paddingObject = mergePaddingObject(typeof padding !== "number" ? padding : expandToHashMap(padding, basePlacements));
  var altContext = elementContext === popper ? reference : popper;
  var popperRect = state.rects.popper;
  var element = state.elements[altBoundary ? altContext : elementContext];
  var clippingClientRect = getClippingRect(isElement(element) ? element : element.contextElement || getDocumentElement(state.elements.popper), boundary, rootBoundary, strategy);
  var referenceClientRect = getBoundingClientRect(state.elements.reference);
  var popperOffsets2 = computeOffsets({
    reference: referenceClientRect,
    element: popperRect,
    strategy: "absolute",
    placement
  });
  var popperClientRect = rectToClientRect(Object.assign({}, popperRect, popperOffsets2));
  var elementClientRect = elementContext === popper ? popperClientRect : referenceClientRect;
  var overflowOffsets = {
    top: clippingClientRect.top - elementClientRect.top + paddingObject.top,
    bottom: elementClientRect.bottom - clippingClientRect.bottom + paddingObject.bottom,
    left: clippingClientRect.left - elementClientRect.left + paddingObject.left,
    right: elementClientRect.right - clippingClientRect.right + paddingObject.right
  };
  var offsetData = state.modifiersData.offset;
  if (elementContext === popper && offsetData) {
    var offset2 = offsetData[placement];
    Object.keys(overflowOffsets).forEach(function(key) {
      var multiply = [right, bottom].indexOf(key) >= 0 ? 1 : -1;
      var axis = [top, bottom].indexOf(key) >= 0 ? "y" : "x";
      overflowOffsets[key] += offset2[axis] * multiply;
    });
  }
  return overflowOffsets;
}

// node_modules/@popperjs/core/lib/utils/computeAutoPlacement.js
function computeAutoPlacement(state, options) {
  if (options === void 0) {
    options = {};
  }
  var _options = options, placement = _options.placement, boundary = _options.boundary, rootBoundary = _options.rootBoundary, padding = _options.padding, flipVariations = _options.flipVariations, _options$allowedAutoP = _options.allowedAutoPlacements, allowedAutoPlacements = _options$allowedAutoP === void 0 ? placements : _options$allowedAutoP;
  var variation = getVariation(placement);
  var placements2 = variation ? flipVariations ? variationPlacements : variationPlacements.filter(function(placement2) {
    return getVariation(placement2) === variation;
  }) : basePlacements;
  var allowedPlacements = placements2.filter(function(placement2) {
    return allowedAutoPlacements.indexOf(placement2) >= 0;
  });
  if (allowedPlacements.length === 0) {
    allowedPlacements = placements2;
  }
  var overflows = allowedPlacements.reduce(function(acc, placement2) {
    acc[placement2] = detectOverflow(state, {
      placement: placement2,
      boundary,
      rootBoundary,
      padding
    })[getBasePlacement(placement2)];
    return acc;
  }, {});
  return Object.keys(overflows).sort(function(a, b) {
    return overflows[a] - overflows[b];
  });
}

// node_modules/@popperjs/core/lib/modifiers/flip.js
function getExpandedFallbackPlacements(placement) {
  if (getBasePlacement(placement) === auto) {
    return [];
  }
  var oppositePlacement = getOppositePlacement(placement);
  return [getOppositeVariationPlacement(placement), oppositePlacement, getOppositeVariationPlacement(oppositePlacement)];
}
function flip(_ref) {
  var state = _ref.state, options = _ref.options, name = _ref.name;
  if (state.modifiersData[name]._skip) {
    return;
  }
  var _options$mainAxis = options.mainAxis, checkMainAxis = _options$mainAxis === void 0 ? true : _options$mainAxis, _options$altAxis = options.altAxis, checkAltAxis = _options$altAxis === void 0 ? true : _options$altAxis, specifiedFallbackPlacements = options.fallbackPlacements, padding = options.padding, boundary = options.boundary, rootBoundary = options.rootBoundary, altBoundary = options.altBoundary, _options$flipVariatio = options.flipVariations, flipVariations = _options$flipVariatio === void 0 ? true : _options$flipVariatio, allowedAutoPlacements = options.allowedAutoPlacements;
  var preferredPlacement = state.options.placement;
  var basePlacement = getBasePlacement(preferredPlacement);
  var isBasePlacement = basePlacement === preferredPlacement;
  var fallbackPlacements = specifiedFallbackPlacements || (isBasePlacement || !flipVariations ? [getOppositePlacement(preferredPlacement)] : getExpandedFallbackPlacements(preferredPlacement));
  var placements2 = [preferredPlacement].concat(fallbackPlacements).reduce(function(acc, placement2) {
    return acc.concat(getBasePlacement(placement2) === auto ? computeAutoPlacement(state, {
      placement: placement2,
      boundary,
      rootBoundary,
      padding,
      flipVariations,
      allowedAutoPlacements
    }) : placement2);
  }, []);
  var referenceRect = state.rects.reference;
  var popperRect = state.rects.popper;
  var checksMap = /* @__PURE__ */ new Map();
  var makeFallbackChecks = true;
  var firstFittingPlacement = placements2[0];
  for (var i = 0; i < placements2.length; i++) {
    var placement = placements2[i];
    var _basePlacement = getBasePlacement(placement);
    var isStartVariation = getVariation(placement) === start;
    var isVertical = [top, bottom].indexOf(_basePlacement) >= 0;
    var len = isVertical ? "width" : "height";
    var overflow = detectOverflow(state, {
      placement,
      boundary,
      rootBoundary,
      altBoundary,
      padding
    });
    var mainVariationSide = isVertical ? isStartVariation ? right : left : isStartVariation ? bottom : top;
    if (referenceRect[len] > popperRect[len]) {
      mainVariationSide = getOppositePlacement(mainVariationSide);
    }
    var altVariationSide = getOppositePlacement(mainVariationSide);
    var checks = [];
    if (checkMainAxis) {
      checks.push(overflow[_basePlacement] <= 0);
    }
    if (checkAltAxis) {
      checks.push(overflow[mainVariationSide] <= 0, overflow[altVariationSide] <= 0);
    }
    if (checks.every(function(check) {
      return check;
    })) {
      firstFittingPlacement = placement;
      makeFallbackChecks = false;
      break;
    }
    checksMap.set(placement, checks);
  }
  if (makeFallbackChecks) {
    var numberOfChecks = flipVariations ? 3 : 1;
    var _loop = function _loop2(_i2) {
      var fittingPlacement = placements2.find(function(placement2) {
        var checks2 = checksMap.get(placement2);
        if (checks2) {
          return checks2.slice(0, _i2).every(function(check) {
            return check;
          });
        }
      });
      if (fittingPlacement) {
        firstFittingPlacement = fittingPlacement;
        return "break";
      }
    };
    for (var _i = numberOfChecks; _i > 0; _i--) {
      var _ret = _loop(_i);
      if (_ret === "break")
        break;
    }
  }
  if (state.placement !== firstFittingPlacement) {
    state.modifiersData[name]._skip = true;
    state.placement = firstFittingPlacement;
    state.reset = true;
  }
}
var flip_default = {
  name: "flip",
  enabled: true,
  phase: "main",
  fn: flip,
  requiresIfExists: ["offset"],
  data: {
    _skip: false
  }
};

// node_modules/@popperjs/core/lib/modifiers/hide.js
function getSideOffsets(overflow, rect, preventedOffsets) {
  if (preventedOffsets === void 0) {
    preventedOffsets = {
      x: 0,
      y: 0
    };
  }
  return {
    top: overflow.top - rect.height - preventedOffsets.y,
    right: overflow.right - rect.width + preventedOffsets.x,
    bottom: overflow.bottom - rect.height + preventedOffsets.y,
    left: overflow.left - rect.width - preventedOffsets.x
  };
}
function isAnySideFullyClipped(overflow) {
  return [top, right, bottom, left].some(function(side) {
    return overflow[side] >= 0;
  });
}
function hide(_ref) {
  var state = _ref.state, name = _ref.name;
  var referenceRect = state.rects.reference;
  var popperRect = state.rects.popper;
  var preventedOffsets = state.modifiersData.preventOverflow;
  var referenceOverflow = detectOverflow(state, {
    elementContext: "reference"
  });
  var popperAltOverflow = detectOverflow(state, {
    altBoundary: true
  });
  var referenceClippingOffsets = getSideOffsets(referenceOverflow, referenceRect);
  var popperEscapeOffsets = getSideOffsets(popperAltOverflow, popperRect, preventedOffsets);
  var isReferenceHidden = isAnySideFullyClipped(referenceClippingOffsets);
  var hasPopperEscaped = isAnySideFullyClipped(popperEscapeOffsets);
  state.modifiersData[name] = {
    referenceClippingOffsets,
    popperEscapeOffsets,
    isReferenceHidden,
    hasPopperEscaped
  };
  state.attributes.popper = Object.assign({}, state.attributes.popper, {
    "data-popper-reference-hidden": isReferenceHidden,
    "data-popper-escaped": hasPopperEscaped
  });
}
var hide_default = {
  name: "hide",
  enabled: true,
  phase: "main",
  requiresIfExists: ["preventOverflow"],
  fn: hide
};

// node_modules/@popperjs/core/lib/modifiers/offset.js
function distanceAndSkiddingToXY(placement, rects, offset2) {
  var basePlacement = getBasePlacement(placement);
  var invertDistance = [left, top].indexOf(basePlacement) >= 0 ? -1 : 1;
  var _ref = typeof offset2 === "function" ? offset2(Object.assign({}, rects, {
    placement
  })) : offset2, skidding = _ref[0], distance = _ref[1];
  skidding = skidding || 0;
  distance = (distance || 0) * invertDistance;
  return [left, right].indexOf(basePlacement) >= 0 ? {
    x: distance,
    y: skidding
  } : {
    x: skidding,
    y: distance
  };
}
function offset(_ref2) {
  var state = _ref2.state, options = _ref2.options, name = _ref2.name;
  var _options$offset = options.offset, offset2 = _options$offset === void 0 ? [0, 0] : _options$offset;
  var data = placements.reduce(function(acc, placement) {
    acc[placement] = distanceAndSkiddingToXY(placement, state.rects, offset2);
    return acc;
  }, {});
  var _data$state$placement = data[state.placement], x = _data$state$placement.x, y = _data$state$placement.y;
  if (state.modifiersData.popperOffsets != null) {
    state.modifiersData.popperOffsets.x += x;
    state.modifiersData.popperOffsets.y += y;
  }
  state.modifiersData[name] = data;
}
var offset_default = {
  name: "offset",
  enabled: true,
  phase: "main",
  requires: ["popperOffsets"],
  fn: offset
};

// node_modules/@popperjs/core/lib/modifiers/popperOffsets.js
function popperOffsets(_ref) {
  var state = _ref.state, name = _ref.name;
  state.modifiersData[name] = computeOffsets({
    reference: state.rects.reference,
    element: state.rects.popper,
    strategy: "absolute",
    placement: state.placement
  });
}
var popperOffsets_default = {
  name: "popperOffsets",
  enabled: true,
  phase: "read",
  fn: popperOffsets,
  data: {}
};

// node_modules/@popperjs/core/lib/utils/getAltAxis.js
function getAltAxis(axis) {
  return axis === "x" ? "y" : "x";
}

// node_modules/@popperjs/core/lib/modifiers/preventOverflow.js
function preventOverflow(_ref) {
  var state = _ref.state, options = _ref.options, name = _ref.name;
  var _options$mainAxis = options.mainAxis, checkMainAxis = _options$mainAxis === void 0 ? true : _options$mainAxis, _options$altAxis = options.altAxis, checkAltAxis = _options$altAxis === void 0 ? false : _options$altAxis, boundary = options.boundary, rootBoundary = options.rootBoundary, altBoundary = options.altBoundary, padding = options.padding, _options$tether = options.tether, tether = _options$tether === void 0 ? true : _options$tether, _options$tetherOffset = options.tetherOffset, tetherOffset = _options$tetherOffset === void 0 ? 0 : _options$tetherOffset;
  var overflow = detectOverflow(state, {
    boundary,
    rootBoundary,
    padding,
    altBoundary
  });
  var basePlacement = getBasePlacement(state.placement);
  var variation = getVariation(state.placement);
  var isBasePlacement = !variation;
  var mainAxis = getMainAxisFromPlacement(basePlacement);
  var altAxis = getAltAxis(mainAxis);
  var popperOffsets2 = state.modifiersData.popperOffsets;
  var referenceRect = state.rects.reference;
  var popperRect = state.rects.popper;
  var tetherOffsetValue = typeof tetherOffset === "function" ? tetherOffset(Object.assign({}, state.rects, {
    placement: state.placement
  })) : tetherOffset;
  var normalizedTetherOffsetValue = typeof tetherOffsetValue === "number" ? {
    mainAxis: tetherOffsetValue,
    altAxis: tetherOffsetValue
  } : Object.assign({
    mainAxis: 0,
    altAxis: 0
  }, tetherOffsetValue);
  var offsetModifierState = state.modifiersData.offset ? state.modifiersData.offset[state.placement] : null;
  var data = {
    x: 0,
    y: 0
  };
  if (!popperOffsets2) {
    return;
  }
  if (checkMainAxis) {
    var _offsetModifierState$;
    var mainSide = mainAxis === "y" ? top : left;
    var altSide = mainAxis === "y" ? bottom : right;
    var len = mainAxis === "y" ? "height" : "width";
    var offset2 = popperOffsets2[mainAxis];
    var min2 = offset2 + overflow[mainSide];
    var max2 = offset2 - overflow[altSide];
    var additive = tether ? -popperRect[len] / 2 : 0;
    var minLen = variation === start ? referenceRect[len] : popperRect[len];
    var maxLen = variation === start ? -popperRect[len] : -referenceRect[len];
    var arrowElement = state.elements.arrow;
    var arrowRect = tether && arrowElement ? getLayoutRect(arrowElement) : {
      width: 0,
      height: 0
    };
    var arrowPaddingObject = state.modifiersData["arrow#persistent"] ? state.modifiersData["arrow#persistent"].padding : getFreshSideObject();
    var arrowPaddingMin = arrowPaddingObject[mainSide];
    var arrowPaddingMax = arrowPaddingObject[altSide];
    var arrowLen = within(0, referenceRect[len], arrowRect[len]);
    var minOffset = isBasePlacement ? referenceRect[len] / 2 - additive - arrowLen - arrowPaddingMin - normalizedTetherOffsetValue.mainAxis : minLen - arrowLen - arrowPaddingMin - normalizedTetherOffsetValue.mainAxis;
    var maxOffset = isBasePlacement ? -referenceRect[len] / 2 + additive + arrowLen + arrowPaddingMax + normalizedTetherOffsetValue.mainAxis : maxLen + arrowLen + arrowPaddingMax + normalizedTetherOffsetValue.mainAxis;
    var arrowOffsetParent = state.elements.arrow && getOffsetParent(state.elements.arrow);
    var clientOffset = arrowOffsetParent ? mainAxis === "y" ? arrowOffsetParent.clientTop || 0 : arrowOffsetParent.clientLeft || 0 : 0;
    var offsetModifierValue = (_offsetModifierState$ = offsetModifierState == null ? void 0 : offsetModifierState[mainAxis]) != null ? _offsetModifierState$ : 0;
    var tetherMin = offset2 + minOffset - offsetModifierValue - clientOffset;
    var tetherMax = offset2 + maxOffset - offsetModifierValue;
    var preventedOffset = within(tether ? min(min2, tetherMin) : min2, offset2, tether ? max(max2, tetherMax) : max2);
    popperOffsets2[mainAxis] = preventedOffset;
    data[mainAxis] = preventedOffset - offset2;
  }
  if (checkAltAxis) {
    var _offsetModifierState$2;
    var _mainSide = mainAxis === "x" ? top : left;
    var _altSide = mainAxis === "x" ? bottom : right;
    var _offset = popperOffsets2[altAxis];
    var _len = altAxis === "y" ? "height" : "width";
    var _min = _offset + overflow[_mainSide];
    var _max = _offset - overflow[_altSide];
    var isOriginSide = [top, left].indexOf(basePlacement) !== -1;
    var _offsetModifierValue = (_offsetModifierState$2 = offsetModifierState == null ? void 0 : offsetModifierState[altAxis]) != null ? _offsetModifierState$2 : 0;
    var _tetherMin = isOriginSide ? _min : _offset - referenceRect[_len] - popperRect[_len] - _offsetModifierValue + normalizedTetherOffsetValue.altAxis;
    var _tetherMax = isOriginSide ? _offset + referenceRect[_len] + popperRect[_len] - _offsetModifierValue - normalizedTetherOffsetValue.altAxis : _max;
    var _preventedOffset = tether && isOriginSide ? withinMaxClamp(_tetherMin, _offset, _tetherMax) : within(tether ? _tetherMin : _min, _offset, tether ? _tetherMax : _max);
    popperOffsets2[altAxis] = _preventedOffset;
    data[altAxis] = _preventedOffset - _offset;
  }
  state.modifiersData[name] = data;
}
var preventOverflow_default = {
  name: "preventOverflow",
  enabled: true,
  phase: "main",
  fn: preventOverflow,
  requiresIfExists: ["offset"]
};

// node_modules/@popperjs/core/lib/dom-utils/getHTMLElementScroll.js
function getHTMLElementScroll(element) {
  return {
    scrollLeft: element.scrollLeft,
    scrollTop: element.scrollTop
  };
}

// node_modules/@popperjs/core/lib/dom-utils/getNodeScroll.js
function getNodeScroll(node) {
  if (node === getWindow(node) || !isHTMLElement(node)) {
    return getWindowScroll(node);
  } else {
    return getHTMLElementScroll(node);
  }
}

// node_modules/@popperjs/core/lib/dom-utils/getCompositeRect.js
function isElementScaled(element) {
  var rect = element.getBoundingClientRect();
  var scaleX = round(rect.width) / element.offsetWidth || 1;
  var scaleY = round(rect.height) / element.offsetHeight || 1;
  return scaleX !== 1 || scaleY !== 1;
}
function getCompositeRect(elementOrVirtualElement, offsetParent, isFixed) {
  if (isFixed === void 0) {
    isFixed = false;
  }
  var isOffsetParentAnElement = isHTMLElement(offsetParent);
  var offsetParentIsScaled = isHTMLElement(offsetParent) && isElementScaled(offsetParent);
  var documentElement = getDocumentElement(offsetParent);
  var rect = getBoundingClientRect(elementOrVirtualElement, offsetParentIsScaled, isFixed);
  var scroll = {
    scrollLeft: 0,
    scrollTop: 0
  };
  var offsets = {
    x: 0,
    y: 0
  };
  if (isOffsetParentAnElement || !isOffsetParentAnElement && !isFixed) {
    if (getNodeName(offsetParent) !== "body" || isScrollParent(documentElement)) {
      scroll = getNodeScroll(offsetParent);
    }
    if (isHTMLElement(offsetParent)) {
      offsets = getBoundingClientRect(offsetParent, true);
      offsets.x += offsetParent.clientLeft;
      offsets.y += offsetParent.clientTop;
    } else if (documentElement) {
      offsets.x = getWindowScrollBarX(documentElement);
    }
  }
  return {
    x: rect.left + scroll.scrollLeft - offsets.x,
    y: rect.top + scroll.scrollTop - offsets.y,
    width: rect.width,
    height: rect.height
  };
}

// node_modules/@popperjs/core/lib/utils/orderModifiers.js
function order(modifiers) {
  var map = /* @__PURE__ */ new Map();
  var visited = /* @__PURE__ */ new Set();
  var result = [];
  modifiers.forEach(function(modifier) {
    map.set(modifier.name, modifier);
  });
  function sort(modifier) {
    visited.add(modifier.name);
    var requires = [].concat(modifier.requires || [], modifier.requiresIfExists || []);
    requires.forEach(function(dep) {
      if (!visited.has(dep)) {
        var depModifier = map.get(dep);
        if (depModifier) {
          sort(depModifier);
        }
      }
    });
    result.push(modifier);
  }
  modifiers.forEach(function(modifier) {
    if (!visited.has(modifier.name)) {
      sort(modifier);
    }
  });
  return result;
}
function orderModifiers(modifiers) {
  var orderedModifiers = order(modifiers);
  return modifierPhases.reduce(function(acc, phase) {
    return acc.concat(orderedModifiers.filter(function(modifier) {
      return modifier.phase === phase;
    }));
  }, []);
}

// node_modules/@popperjs/core/lib/utils/debounce.js
function debounce(fn2) {
  var pending;
  return function() {
    if (!pending) {
      pending = new Promise(function(resolve) {
        Promise.resolve().then(function() {
          pending = void 0;
          resolve(fn2());
        });
      });
    }
    return pending;
  };
}

// node_modules/@popperjs/core/lib/utils/mergeByName.js
function mergeByName(modifiers) {
  var merged = modifiers.reduce(function(merged2, current) {
    var existing = merged2[current.name];
    merged2[current.name] = existing ? Object.assign({}, existing, current, {
      options: Object.assign({}, existing.options, current.options),
      data: Object.assign({}, existing.data, current.data)
    }) : current;
    return merged2;
  }, {});
  return Object.keys(merged).map(function(key) {
    return merged[key];
  });
}

// node_modules/@popperjs/core/lib/createPopper.js
var DEFAULT_OPTIONS = {
  placement: "bottom",
  modifiers: [],
  strategy: "absolute"
};
function areValidElements() {
  for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
    args[_key] = arguments[_key];
  }
  return !args.some(function(element) {
    return !(element && typeof element.getBoundingClientRect === "function");
  });
}
function popperGenerator(generatorOptions) {
  if (generatorOptions === void 0) {
    generatorOptions = {};
  }
  var _generatorOptions = generatorOptions, _generatorOptions$def = _generatorOptions.defaultModifiers, defaultModifiers2 = _generatorOptions$def === void 0 ? [] : _generatorOptions$def, _generatorOptions$def2 = _generatorOptions.defaultOptions, defaultOptions = _generatorOptions$def2 === void 0 ? DEFAULT_OPTIONS : _generatorOptions$def2;
  return function createPopper2(reference2, popper2, options) {
    if (options === void 0) {
      options = defaultOptions;
    }
    var state = {
      placement: "bottom",
      orderedModifiers: [],
      options: Object.assign({}, DEFAULT_OPTIONS, defaultOptions),
      modifiersData: {},
      elements: {
        reference: reference2,
        popper: popper2
      },
      attributes: {},
      styles: {}
    };
    var effectCleanupFns = [];
    var isDestroyed = false;
    var instance = {
      state,
      setOptions: function setOptions(setOptionsAction) {
        var options2 = typeof setOptionsAction === "function" ? setOptionsAction(state.options) : setOptionsAction;
        cleanupModifierEffects();
        state.options = Object.assign({}, defaultOptions, state.options, options2);
        state.scrollParents = {
          reference: isElement(reference2) ? listScrollParents(reference2) : reference2.contextElement ? listScrollParents(reference2.contextElement) : [],
          popper: listScrollParents(popper2)
        };
        var orderedModifiers = orderModifiers(mergeByName([].concat(defaultModifiers2, state.options.modifiers)));
        state.orderedModifiers = orderedModifiers.filter(function(m) {
          return m.enabled;
        });
        runModifierEffects();
        return instance.update();
      },
      forceUpdate: function forceUpdate() {
        if (isDestroyed) {
          return;
        }
        var _state$elements = state.elements, reference3 = _state$elements.reference, popper3 = _state$elements.popper;
        if (!areValidElements(reference3, popper3)) {
          return;
        }
        state.rects = {
          reference: getCompositeRect(reference3, getOffsetParent(popper3), state.options.strategy === "fixed"),
          popper: getLayoutRect(popper3)
        };
        state.reset = false;
        state.placement = state.options.placement;
        state.orderedModifiers.forEach(function(modifier) {
          return state.modifiersData[modifier.name] = Object.assign({}, modifier.data);
        });
        for (var index = 0; index < state.orderedModifiers.length; index++) {
          if (state.reset === true) {
            state.reset = false;
            index = -1;
            continue;
          }
          var _state$orderedModifie = state.orderedModifiers[index], fn2 = _state$orderedModifie.fn, _state$orderedModifie2 = _state$orderedModifie.options, _options = _state$orderedModifie2 === void 0 ? {} : _state$orderedModifie2, name = _state$orderedModifie.name;
          if (typeof fn2 === "function") {
            state = fn2({
              state,
              options: _options,
              name,
              instance
            }) || state;
          }
        }
      },
      update: debounce(function() {
        return new Promise(function(resolve) {
          instance.forceUpdate();
          resolve(state);
        });
      }),
      destroy: function destroy() {
        cleanupModifierEffects();
        isDestroyed = true;
      }
    };
    if (!areValidElements(reference2, popper2)) {
      return instance;
    }
    instance.setOptions(options).then(function(state2) {
      if (!isDestroyed && options.onFirstUpdate) {
        options.onFirstUpdate(state2);
      }
    });
    function runModifierEffects() {
      state.orderedModifiers.forEach(function(_ref) {
        var name = _ref.name, _ref$options = _ref.options, options2 = _ref$options === void 0 ? {} : _ref$options, effect4 = _ref.effect;
        if (typeof effect4 === "function") {
          var cleanupFn = effect4({
            state,
            name,
            instance,
            options: options2
          });
          var noopFn = function noopFn2() {
          };
          effectCleanupFns.push(cleanupFn || noopFn);
        }
      });
    }
    function cleanupModifierEffects() {
      effectCleanupFns.forEach(function(fn2) {
        return fn2();
      });
      effectCleanupFns = [];
    }
    return instance;
  };
}

// node_modules/@popperjs/core/lib/popper.js
var defaultModifiers = [eventListeners_default, popperOffsets_default, computeStyles_default, applyStyles_default, offset_default, flip_default, preventOverflow_default, arrow_default, hide_default];
var createPopper = /* @__PURE__ */ popperGenerator({
  defaultModifiers
});

// src/folderOverview/src/suggesters/Suggest.ts
var wrapAround = (value, size) => {
  return (value % size + size) % size;
};
var Suggest = class {
  constructor(owner, containerEl, scope) {
    this.owner = owner;
    this.containerEl = containerEl;
    containerEl.on("click", ".suggestion-item", this.onSuggestionClick.bind(this));
    containerEl.on("mousemove", ".suggestion-item", this.onSuggestionMouseover.bind(this));
    scope.register([], "ArrowUp", (event) => {
      if (!event.isComposing) {
        this.setSelectedItem(this.selectedItem - 1, true);
        return false;
      }
    });
    scope.register([], "ArrowDown", (event) => {
      if (!event.isComposing) {
        this.setSelectedItem(this.selectedItem + 1, true);
        return false;
      }
    });
    scope.register([], "Enter", (event) => {
      if (!event.isComposing) {
        this.useSelectedItem(event);
        return false;
      }
    });
  }
  onSuggestionClick(event, el) {
    event.preventDefault();
    const item = this.suggestions.indexOf(el);
    this.setSelectedItem(item, false);
    this.useSelectedItem(event);
  }
  onSuggestionMouseover(_event, el) {
    const item = this.suggestions.indexOf(el);
    this.setSelectedItem(item, false);
  }
  setSuggestions(values) {
    this.containerEl.empty();
    const suggestionEls = [];
    values.forEach((value) => {
      const suggestionEl = this.containerEl.createDiv("suggestion-item");
      this.owner.renderSuggestion(value, suggestionEl);
      suggestionEls.push(suggestionEl);
    });
    this.values = values;
    this.suggestions = suggestionEls;
    this.setSelectedItem(0, false);
  }
  useSelectedItem(event) {
    const currentValue = this.values[this.selectedItem];
    if (currentValue) {
      this.owner.selectSuggestion(currentValue, event);
    }
  }
  setSelectedItem(selectedIndex, scrollIntoView) {
    const normalizedIndex = wrapAround(selectedIndex, this.suggestions.length);
    const prevSelectedSuggestion = this.suggestions[this.selectedItem];
    const selectedSuggestion = this.suggestions[normalizedIndex];
    prevSelectedSuggestion == null ? void 0 : prevSelectedSuggestion.removeClass("is-selected");
    selectedSuggestion == null ? void 0 : selectedSuggestion.addClass("is-selected");
    this.selectedItem = normalizedIndex;
    if (scrollIntoView) {
      selectedSuggestion.scrollIntoView(false);
    }
  }
};
var TextInputSuggest = class {
  constructor(inputEl, plugin) {
    this.inputEl = inputEl;
    this.plugin = plugin;
    this.scope = new import_obsidian.Scope();
    this.suggestEl = createDiv("suggestion-container");
    const suggestion = this.suggestEl.createDiv("suggestion");
    this.suggest = new Suggest(this, suggestion, this.scope);
    this.scope.register([], "Escape", this.close.bind(this));
    this.inputEl.addEventListener("input", this.onInputChanged.bind(this));
    this.inputEl.addEventListener("focus", this.onInputChanged.bind(this));
    this.inputEl.addEventListener("blur", this.close.bind(this));
    this.suggestEl.on("mousedown", ".suggestion-container", (event) => {
      event.preventDefault();
    });
  }
  onInputChanged() {
    const inputStr = this.inputEl.value;
    const suggestions = this.getSuggestions(inputStr);
    if (!suggestions) {
      this.close();
      return;
    }
    if (suggestions.length > 0) {
      this.suggest.setSuggestions(suggestions);
      this.open(app.dom.appContainerEl, this.inputEl);
    } else {
      this.close();
    }
  }
  open(container, inputEl) {
    this.plugin.app.keymap.pushScope(this.scope);
    container.appendChild(this.suggestEl);
    this.popper = createPopper(inputEl, this.suggestEl, {
      placement: "bottom-start",
      modifiers: [
        {
          name: "sameWidth",
          enabled: true,
          fn: ({ state, instance }) => {
            const targetWidth = `${state.rects.reference.width}px`;
            if (state.styles.popper.width === targetWidth) {
              return;
            }
            state.styles.popper.width = targetWidth;
            instance.update();
          },
          phase: "beforeWrite",
          requires: ["computeStyles"]
        }
      ]
    });
  }
  close() {
    this.plugin.app.keymap.popScope(this.scope);
    this.suggest.setSuggestions([]);
    if (this.popper)
      this.popper.destroy();
    this.suggestEl.detach();
  }
};

// src/main.ts
var import_obsidian35 = require("obsidian");

// src/settings/SettingsTab.ts
var import_obsidian27 = require("obsidian");

// src/modals/ExistingNote.ts
var import_obsidian2 = require("obsidian");
var ExistingFolderNoteModal = class extends import_obsidian2.Modal {
  constructor(app2, plugin, file, folder, folderNote) {
    super(app2);
    this.plugin = plugin;
    this.app = app2;
    this.file = file;
    this.folder = folder;
    this.folderNote = folderNote;
  }
  onOpen() {
    var _a;
    const { contentEl } = this;
    contentEl.createEl("h2", { text: "A folder note for this folder already exists" });
    const setting = new import_obsidian2.Setting(contentEl);
    setting.infoEl.createEl("p", { text: "Are you sure you want to turn the note into a folder note and rename the existing folder note?" });
    (_a = setting.infoEl.parentElement) == null ? void 0 : _a.classList.add("fn-delete-confirmation-modal");
    const buttonContainer = setting.infoEl.createEl("div", { cls: "fn-delete-confirmation-modal-buttons" });
    if (import_obsidian2.Platform.isMobileApp) {
      const confirmButton = buttonContainer.createEl("button", { text: "Rename and don't ask again" });
      confirmButton.classList.add("mod-warning", "fn-confirmation-modal-button");
      confirmButton.addEventListener("click", async () => {
        this.plugin.settings.showRenameConfirmation = false;
        this.plugin.saveSettings();
        this.close();
        turnIntoFolderNote(this.plugin, this.file, this.folder, this.folderNote, true);
      });
    } else {
      const checkbox = buttonContainer.createEl("input", { type: "checkbox" });
      checkbox.addEventListener("change", (e) => {
        const target = e.target;
        if (target.checked) {
          this.plugin.settings.showRenameConfirmation = false;
        } else {
          this.plugin.settings.showRenameConfirmation = true;
        }
      });
      const checkBoxText = buttonContainer.createEl("span", { text: "Don't ask again" });
      checkBoxText.addEventListener("click", () => {
        checkbox.click();
      });
    }
    const button = buttonContainer.createEl("button", { text: "Rename" });
    button.classList.add("mod-warning", "fn-confirmation-modal-button");
    button.addEventListener("click", async () => {
      this.plugin.saveSettings();
      this.close();
      turnIntoFolderNote(this.plugin, this.file, this.folder, this.folderNote, true);
    });
    button.focus();
    const cancelButton = buttonContainer.createEl("button", { text: "Cancel" });
    cancelButton.addEventListener("click", async () => {
      this.close();
    });
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
  }
};

// src/template.ts
var import_obsidian3 = require("obsidian");
async function applyTemplate(plugin, file, leaf, templatePath) {
  const templateFile = templatePath ? plugin.app.vault.getAbstractFileByPath(templatePath) : null;
  if (templateFile && templateFile instanceof import_obsidian3.TFile) {
    try {
      const {
        templatesEnabled,
        templaterEnabled,
        templatesPlugin,
        templaterPlugin
      } = getTemplatePlugins(plugin.app);
      const templateContent = await plugin.app.vault.read(templateFile);
      if (templateContent.includes("==\u26A0  Switch to EXCALIDRAW VIEW in the MORE OPTIONS menu of this document. \u26A0==")) {
        return;
      }
      if (templatesEnabled && templaterEnabled) {
        if (/<%/.test(templateContent)) {
          return await templaterPlugin.write_template_to_file(templateFile, file);
        } else {
          if (leaf instanceof import_obsidian3.WorkspaceLeaf) {
            leaf.openFile(file).then(async () => {
              return await templatesPlugin.instance.insertTemplate(templateFile, file);
            });
          }
        }
      }
      if (templatesEnabled) {
        if (leaf instanceof import_obsidian3.WorkspaceLeaf) {
          leaf.openFile(file);
        }
        return await templatesPlugin.instance.insertTemplate(templateFile);
      }
      if (templaterEnabled) {
        return await templaterPlugin.write_template_to_file(templateFile, file);
      }
    } catch (e) {
      console.error(e);
    }
  }
}
function getTemplatePlugins(app2) {
  var _a;
  const templatesPlugin = app2.internalPlugins.plugins.templates;
  const templatesEnabled = templatesPlugin.enabled;
  const templaterPlugin = app2.plugins.plugins["templater-obsidian"];
  const templaterEnabled = app2.plugins.enabledPlugins.has("templater-obsidian");
  const templaterEmptyFileTemplate = templaterPlugin && ((_a = this.app.plugins.plugins["templater-obsidian"].settings) == null ? void 0 : _a.empty_file_template);
  const templateFolder = templatesEnabled ? templatesPlugin.instance.options.folder : templaterPlugin ? templaterPlugin.settings.template_folder : void 0;
  return {
    templatesPlugin,
    templatesEnabled,
    templaterPlugin: templaterPlugin == null ? void 0 : templaterPlugin.templater,
    templaterEnabled,
    templaterEmptyFileTemplate,
    templateFolder
  };
}

// src/functions/folderNoteFunctions.ts
var import_obsidian17 = require("obsidian");

// src/modals/DeleteConfirmation.ts
var import_obsidian4 = require("obsidian");
var DeleteConfirmationModal = class extends import_obsidian4.Modal {
  constructor(app2, plugin, file) {
    super(app2);
    this.plugin = plugin;
    this.app = app2;
    this.file = file;
  }
  onOpen() {
    const { contentEl, plugin } = this;
    const modalTitle = contentEl.createDiv({ cls: "fn-modal-title" });
    const modalContent = contentEl.createDiv({ cls: "fn-modal-content" });
    modalTitle.createEl("h2", { text: "Delete folder note" });
    modalContent.createEl("p", { text: `Are you sure you want to delete the folder note '${this.file.name}' ?` });
    switch (plugin.settings.deleteFilesAction) {
      case "trash":
        modalContent.createEl("p", { text: "It will be moved to your system trash." });
        break;
      case "obsidianTrash":
        modalContent.createEl("p", { text: 'It will be moved to your Obsidian trash, which is located in the ".trash" hidden folder in your vault.' });
        break;
      case "delete":
        modalContent.createEl("p", { text: "It will be permanently deleted." }).setCssStyles({ color: "red" });
        break;
    }
    const buttonContainer = contentEl.createEl("div", { cls: "modal-button-container" });
    if (!import_obsidian4.Platform.isMobile) {
      const checkbox = buttonContainer.createEl("label", { cls: "mod-checkbox" });
      checkbox.tabIndex = -1;
      const input = checkbox.createEl("input", { type: "checkbox" });
      checkbox.appendText("Don't ask again");
      input.addEventListener("change", (e) => {
        const target = e.target;
        if (target.checked) {
          plugin.settings.showDeleteConfirmation = false;
        } else {
          plugin.settings.showDeleteConfirmation = true;
        }
        plugin.saveSettings();
      });
    } else {
      const confirmButton = buttonContainer.createEl("button", { text: "Delete and don't ask again", cls: "mod-destructive" });
      confirmButton.addEventListener("click", async () => {
        plugin.settings.showDeleteConfirmation = false;
        plugin.saveSettings();
        this.close();
        deleteFolderNote(plugin, this.file, false);
      });
    }
    const deleteButton = buttonContainer.createEl("button", { text: "Delete", cls: "mod-warning" });
    deleteButton.addEventListener("click", async () => {
      this.close();
      deleteFolderNote(plugin, this.file, false);
    });
    deleteButton.focus();
    const cancelButton = buttonContainer.createEl("button", { text: "Cancel", cls: "mod-cancel" });
    cancelButton.addEventListener("click", async () => {
      this.close();
    });
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
  }
};

// src/functions/utils.ts
function getFileNameFromPathString(path) {
  return path.substring(path.lastIndexOf("/") >= 0 ? path.lastIndexOf("/") + 1 : 0);
}
function getFolderNameFromPathString(path) {
  if (path.endsWith(".md") || path.endsWith(".canvas")) {
    return path.split("/").slice(-2)[0];
  } else {
    return path.split("/").slice(-1)[0];
  }
}
function removeExtension(name) {
  return name.replace(/\.[^/.]+$/, "");
}
function getFolderPathFromString2(path) {
  const subString = path.lastIndexOf("/") >= 0 ? path.lastIndexOf("/") : 0;
  const folderPath = path.substring(0, subString);
  if (folderPath === "") {
    return "/";
  } else {
    return folderPath;
  }
}
function getFileExplorer(plugin) {
  return plugin.app.workspace.getLeavesOfType("file-explorer")[0];
}
function getFocusedItem(plugin) {
  const fileExplorer = getFileExplorer(plugin);
  const focusedItem = fileExplorer.view.tree.focusedItem;
  return focusedItem;
}

// src/ExcludeFolders/ExcludePattern.ts
var ExcludePattern = class {
  constructor(pattern, position, id, plugin) {
    this.type = "pattern";
    this.id = id || crypto.randomUUID();
    this.string = pattern;
    this.position = position;
    this.subFolders = plugin.settings.excludePatternDefaultSettings.subFolders;
    this.disableSync = plugin.settings.excludePatternDefaultSettings.disableSync;
    this.disableAutoCreate = plugin.settings.excludePatternDefaultSettings.disableAutoCreate;
    this.disableFolderNote = plugin.settings.excludePatternDefaultSettings.disableFolderNote;
    this.enableCollapsing = plugin.settings.excludePatternDefaultSettings.enableCollapsing;
    this.excludeFromFolderOverview = plugin.settings.excludePatternDefaultSettings.excludeFromFolderOverview;
    this.path = "";
    this.hideInSettings = false;
  }
};

// src/ExcludeFolders/functions/folderFunctions.ts
var import_obsidian14 = require("obsidian");

// src/suggesters/FolderSuggester.ts
var import_obsidian6 = require("obsidian");

// src/suggesters/Suggest.ts
var import_obsidian5 = require("obsidian");
var wrapAround2 = (value, size) => {
  return (value % size + size) % size;
};
var Suggest2 = class {
  constructor(owner, containerEl, scope) {
    this.owner = owner;
    this.containerEl = containerEl;
    containerEl.on("click", ".suggestion-item", this.onSuggestionClick.bind(this));
    containerEl.on("mousemove", ".suggestion-item", this.onSuggestionMouseover.bind(this));
    scope.register([], "ArrowUp", (event) => {
      if (!event.isComposing) {
        this.setSelectedItem(this.selectedItem - 1, true);
        return false;
      }
    });
    scope.register([], "ArrowDown", (event) => {
      if (!event.isComposing) {
        this.setSelectedItem(this.selectedItem + 1, true);
        return false;
      }
    });
    scope.register([], "Enter", (event) => {
      if (!event.isComposing) {
        this.useSelectedItem(event);
        return false;
      }
    });
  }
  onSuggestionClick(event, el) {
    event.preventDefault();
    const item = this.suggestions.indexOf(el);
    this.setSelectedItem(item, false);
    this.useSelectedItem(event);
  }
  onSuggestionMouseover(_event, el) {
    const item = this.suggestions.indexOf(el);
    this.setSelectedItem(item, false);
  }
  setSuggestions(values) {
    this.containerEl.empty();
    const suggestionEls = [];
    values.forEach((value) => {
      const suggestionEl = this.containerEl.createDiv("suggestion-item");
      this.owner.renderSuggestion(value, suggestionEl);
      suggestionEls.push(suggestionEl);
    });
    this.values = values;
    this.suggestions = suggestionEls;
    this.setSelectedItem(0, false);
  }
  useSelectedItem(event) {
    const currentValue = this.values[this.selectedItem];
    if (currentValue) {
      this.owner.selectSuggestion(currentValue, event);
    }
  }
  setSelectedItem(selectedIndex, scrollIntoView) {
    const normalizedIndex = wrapAround2(selectedIndex, this.suggestions.length);
    const prevSelectedSuggestion = this.suggestions[this.selectedItem];
    const selectedSuggestion = this.suggestions[normalizedIndex];
    prevSelectedSuggestion == null ? void 0 : prevSelectedSuggestion.removeClass("is-selected");
    selectedSuggestion == null ? void 0 : selectedSuggestion.addClass("is-selected");
    this.selectedItem = normalizedIndex;
    if (scrollIntoView) {
      selectedSuggestion.scrollIntoView(false);
    }
  }
};
var TextInputSuggest2 = class {
  constructor(inputEl, plugin) {
    this.inputEl = inputEl;
    this.plugin = plugin;
    this.scope = new import_obsidian5.Scope();
    this.suggestEl = createDiv("suggestion-container");
    const suggestion = this.suggestEl.createDiv("suggestion");
    this.suggest = new Suggest2(this, suggestion, this.scope);
    this.scope.register([], "Escape", this.close.bind(this));
    this.inputEl.addEventListener("input", this.onInputChanged.bind(this));
    this.inputEl.addEventListener("focus", this.onInputChanged.bind(this));
    this.inputEl.addEventListener("blur", this.close.bind(this));
    this.suggestEl.on("mousedown", ".suggestion-container", (event) => {
      event.preventDefault();
    });
  }
  onInputChanged() {
    const inputStr = this.inputEl.value;
    const suggestions = this.getSuggestions(inputStr);
    if (!suggestions) {
      this.close();
      return;
    }
    if (suggestions.length > 0) {
      this.suggest.setSuggestions(suggestions);
      this.open(app.dom.appContainerEl, this.inputEl);
    } else {
      this.close();
    }
  }
  open(container, inputEl) {
    this.plugin.app.keymap.pushScope(this.scope);
    container.appendChild(this.suggestEl);
    this.popper = createPopper(inputEl, this.suggestEl, {
      placement: "bottom-start",
      modifiers: [
        {
          name: "sameWidth",
          enabled: true,
          fn: ({ state, instance }) => {
            const targetWidth = `${state.rects.reference.width}px`;
            if (state.styles.popper.width === targetWidth) {
              return;
            }
            state.styles.popper.width = targetWidth;
            instance.update();
          },
          phase: "beforeWrite",
          requires: ["computeStyles"]
        }
      ]
    });
  }
  close() {
    this.plugin.app.keymap.popScope(this.scope);
    this.suggest.setSuggestions([]);
    if (this.popper)
      this.popper.destroy();
    this.suggestEl.detach();
  }
};

// src/suggesters/FolderSuggester.ts
var FolderSuggest = class extends TextInputSuggest2 {
  constructor(inputEl, plugin, whitelistSuggester, folder) {
    super(inputEl, plugin);
    this.inputEl = inputEl;
    this.whitelistSuggester = whitelistSuggester;
    this.folder = folder;
  }
  get_error_msg(mode) {
    switch (mode) {
      case 0 /* TemplateFiles */:
        return "Templates folder doesn't exist";
      case 1 /* ScriptFiles */:
        return "User Scripts folder doesn't exist";
    }
  }
  getSuggestions(input_str) {
    const folders = [];
    const lower_input_str = input_str.toLowerCase();
    let files = [];
    if (this.folder) {
      files = this.folder.children;
    } else {
      files = this.plugin.app.vault.getAllLoadedFiles().slice(0, 100);
    }
    files.forEach((folder) => {
      if (folder instanceof import_obsidian6.TFolder && folder.path.toLowerCase().contains(lower_input_str) && (!this.plugin.settings.excludeFolders.find((f) => f.path === folder.path) || this.whitelistSuggester)) {
        folders.push(folder);
      }
    });
    return folders;
  }
  renderSuggestion(folder, el) {
    el.setText(folder.path);
  }
  selectSuggestion(folder) {
    this.inputEl.value = folder.path;
    this.inputEl.trigger("input");
    this.close();
  }
};

// src/ExcludeFolders/modals/ExcludeFolderSettings.ts
var import_obsidian7 = require("obsidian");
var ExcludedFolderSettings = class extends import_obsidian7.Modal {
  constructor(app2, plugin, excludedFolder) {
    super(app2);
    this.plugin = plugin;
    this.app = app2;
    this.excludedFolder = excludedFolder;
  }
  onOpen() {
    this.display();
  }
  display() {
    const { contentEl } = this;
    contentEl.empty();
    contentEl.createEl("h2", { text: "Excluded folder settings" });
    new import_obsidian7.Setting(contentEl).setName("Include subfolders").setDesc("Choose if the subfolders of the folder should also be excluded").addToggle((toggle) => toggle.setValue(this.excludedFolder.subFolders).onChange(async (value) => {
      this.excludedFolder.subFolders = value;
      await this.plugin.saveSettings(true);
    }));
    new import_obsidian7.Setting(contentEl).setName("Disable folder name sync").setDesc("Choose if the folder note should be renamed when the folder name is changed").addToggle((toggle) => toggle.setValue(this.excludedFolder.disableSync).onChange(async (value) => {
      this.excludedFolder.disableSync = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian7.Setting(contentEl).setName("Don't show folder in folder overview").setDesc("Choose if the folder should be shown in the folder overview").addToggle((toggle) => toggle.setValue(this.excludedFolder.excludeFromFolderOverview).onChange(async (value) => {
      this.excludedFolder.excludeFromFolderOverview = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian7.Setting(contentEl).setName("Disable auto creation of folder notes in this folder").setDesc("Choose if a folder note should be created when a new folder is created").addToggle((toggle) => toggle.setValue(this.excludedFolder.disableAutoCreate).onChange(async (value) => {
      this.excludedFolder.disableAutoCreate = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian7.Setting(contentEl).setName("Disable open folder note").setDesc("Choose if the folder note should be opened when the folder is opened").addToggle((toggle) => toggle.setValue(this.excludedFolder.disableFolderNote).onChange(async (value) => {
      this.excludedFolder.disableFolderNote = value;
      await this.plugin.saveSettings(true);
      this.display();
    }));
    if (!this.excludedFolder.disableFolderNote) {
      new import_obsidian7.Setting(contentEl).setName("Collapse folder when opening folder note").setDesc("Choose if the folder should be collapsed when the folder note is opened").addToggle((toggle) => toggle.setValue(this.excludedFolder.enableCollapsing).onChange(async (value) => {
        this.excludedFolder.enableCollapsing = value;
        await this.plugin.saveSettings();
      }));
    }
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
  }
};

// src/ExcludeFolders/functions/patternFunctions.ts
var import_obsidian9 = require("obsidian");

// src/ExcludeFolders/modals/PatternSettings.ts
var import_obsidian8 = require("obsidian");
var PatternSettings = class extends import_obsidian8.Modal {
  constructor(app2, plugin, pattern) {
    super(app2);
    this.plugin = plugin;
    this.app = app2;
    this.pattern = pattern;
  }
  onOpen() {
    this.display();
  }
  display() {
    const { contentEl } = this;
    contentEl.empty();
    contentEl.createEl("h2", { text: "Pattern settings" });
    new import_obsidian8.Setting(contentEl).setName("Disable folder name sync").setDesc("Choose if the folder name should be renamed when the file name has been changed").addToggle((toggle) => toggle.setValue(this.pattern.disableSync).onChange(async (value) => {
      this.pattern.disableSync = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian8.Setting(contentEl).setName("Disable auto creation of folder notes in this folder").setDesc("Choose if a folder note should be created when a new folder is created that matches this pattern").addToggle((toggle) => toggle.setValue(this.pattern.disableAutoCreate).onChange(async (value) => {
      this.pattern.disableAutoCreate = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian8.Setting(contentEl).setName("Don't show folder in folder overview").setDesc("Choose if the folder should be shown in the folder overview").addToggle((toggle) => toggle.setValue(this.pattern.excludeFromFolderOverview).onChange(async (value) => {
      this.pattern.excludeFromFolderOverview = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian8.Setting(contentEl).setName("Disable open folder note").setDesc("Choose if the folder note should be opened when the folder is opened").addToggle((toggle) => toggle.setValue(this.pattern.disableFolderNote).onChange(async (value) => {
      this.pattern.disableFolderNote = value;
      await this.plugin.saveSettings(true);
      this.display();
    }));
    if (!this.pattern.disableFolderNote) {
      new import_obsidian8.Setting(contentEl).setName("Collapse folder when opening folder note").setDesc("Choose if the folder should be collapsed when the folder note is opened").addToggle((toggle) => toggle.setValue(this.pattern.enableCollapsing).onChange(async (value) => {
        this.pattern.enableCollapsing = value;
        await this.plugin.saveSettings();
      }));
    }
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
  }
};

// src/ExcludeFolders/functions/patternFunctions.ts
function updatePattern(plugin, pattern, newPattern) {
  plugin.settings.excludeFolders = plugin.settings.excludeFolders.filter((folder) => folder.id !== pattern.id);
  addExcludedFolder(plugin, newPattern);
}
function deletePattern(plugin, pattern) {
  plugin.settings.excludeFolders = plugin.settings.excludeFolders.filter((folder) => folder.id !== pattern.id || folder.type === "folder");
  plugin.saveSettings(true);
  resyncArray(plugin);
}
function getExcludedFoldersByPattern(plugin, folderName) {
  return plugin.settings.excludeFolders.filter((s) => s.type == "pattern").filter((pattern) => {
    if (!pattern.string) {
      return false;
    }
    const string = pattern.string.trim();
    if (!string.startsWith("{regex}") && !(string.startsWith("*") || string.endsWith("*"))) {
      return false;
    }
    const regex = string.replace("{regex}", "").trim();
    if (string.startsWith("{regex}") && regex === "") {
      return false;
    }
    if (regex !== void 0 && string.startsWith("{regex}")) {
      const match = new RegExp(regex).exec(folderName);
      if (match) {
        return true;
      }
    } else if (string.startsWith("*") && string.endsWith("*")) {
      if (folderName.includes(string.slice(1, -1))) {
        return true;
      }
    } else if (string.startsWith("*")) {
      if (folderName.endsWith(string.slice(1))) {
        return true;
      }
    } else if (string.endsWith("*")) {
      if (folderName.startsWith(string.slice(0, -1))) {
        return true;
      }
    }
  });
}
function addExcludePatternListItem(settings, containerEl, pattern) {
  const plugin = settings.plugin;
  const setting = new import_obsidian9.Setting(containerEl);
  setting.setClass("fn-exclude-folder-list");
  setting.addSearch((cb) => {
    cb.containerEl.addClass("fn-exclude-folder-path");
    cb.setPlaceholder("Pattern");
    cb.setValue(pattern.string);
    cb.onChange((value) => {
      pattern.string = value;
      updatePattern(plugin, pattern, pattern);
    });
  });
  setting.addButton((cb) => {
    cb.setIcon("edit");
    cb.setTooltip("Edit pattern");
    cb.onClick(() => {
      new PatternSettings(plugin.app, plugin, pattern).open();
    });
  });
  if (import_obsidian9.Platform.isDesktop || import_obsidian9.Platform.isTablet) {
    setting.addButton((cb) => {
      cb.setIcon("up-chevron-glyph");
      cb.setTooltip("Move up");
      cb.onClick(() => {
        if (pattern.position === 0) {
          return;
        }
        pattern.position -= 1;
        updatePattern(plugin, pattern, pattern);
        const oldPattern = plugin.settings.excludeFolders.find((folder) => folder.position === pattern.position);
        if (oldPattern) {
          oldPattern.position += 1;
          if (oldPattern.type === "pattern") {
            updatePattern(plugin, oldPattern, oldPattern);
          } else {
            updateExcludedFolder(plugin, oldPattern, oldPattern);
          }
        }
        settings.display();
      });
    });
    setting.addButton((cb) => {
      cb.setIcon("down-chevron-glyph");
      cb.setTooltip("Move down");
      cb.onClick(() => {
        if (pattern.position === plugin.settings.excludeFolders.length - 1) {
          return;
        }
        pattern.position += 1;
        updatePattern(plugin, pattern, pattern);
        const oldPattern = plugin.settings.excludeFolders.find((folder) => folder.position === pattern.position);
        if (oldPattern) {
          oldPattern.position -= 1;
          if (oldPattern.type === "pattern") {
            updatePattern(plugin, oldPattern, oldPattern);
          } else {
            updateExcludedFolder(plugin, oldPattern, oldPattern);
          }
        }
        settings.display();
      });
    });
  }
  setting.addButton((cb) => {
    cb.setIcon("trash-2");
    cb.setTooltip("Delete pattern");
    cb.onClick(() => {
      deletePattern(plugin, pattern);
      setting.clear();
      setting.settingEl.remove();
    });
  });
}

// src/ExcludeFolders/WhitelistPattern.ts
var WhitelistedPattern = class {
  constructor(pattern, position, id, plugin) {
    this.type = "pattern";
    this.id = id || crypto.randomUUID();
    this.subFolders = plugin.settings.excludePatternDefaultSettings.subFolders;
    this.position = position;
    this.string = pattern;
    this.path = "";
  }
};

// src/ExcludeFolders/functions/whitelistFolderFunctions.ts
var import_obsidian13 = require("obsidian");

// src/ExcludeFolders/modals/WhitelistFolderSettings.ts
var import_obsidian10 = require("obsidian");
var WhitelistFolderSettings = class extends import_obsidian10.Modal {
  constructor(app2, plugin, whitelistedFolder) {
    super(app2);
    this.plugin = plugin;
    this.app = app2;
    this.whitelistedFolder = whitelistedFolder;
  }
  onOpen() {
    this.display();
  }
  display() {
    const { contentEl } = this;
    contentEl.empty();
    contentEl.createEl("h2", { text: "Whitelisted folder settings" });
    new import_obsidian10.Setting(contentEl).setName("Include subfolders").setDesc("Choose if the subfolders of the folder should also be whitelisted").addToggle((toggle) => toggle.setValue(this.whitelistedFolder.subFolders).onChange(async (value) => {
      this.whitelistedFolder.subFolders = value;
      await this.plugin.saveSettings(true);
    }));
    new import_obsidian10.Setting(contentEl).setName("Enable folder name sync").setDesc("Choose if the name of a folder note should be renamed when the folder name is changed").addToggle((toggle) => toggle.setValue(this.whitelistedFolder.enableSync).onChange(async (value) => {
      this.whitelistedFolder.enableSync = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian10.Setting(contentEl).setName("Show folder in folder overview").setDesc("Choose if the folder should be shown in the folder overview").addToggle((toggle) => toggle.setValue(this.whitelistedFolder.showInFolderOverview).onChange(async (value) => {
      this.whitelistedFolder.showInFolderOverview = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian10.Setting(contentEl).setName("Allow auto creation of folder notes in this folder").addToggle((toggle) => toggle.setValue(this.whitelistedFolder.enableAutoCreate).onChange(async (value) => {
      this.whitelistedFolder.enableAutoCreate = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian10.Setting(contentEl).setName("Open folder note when clicking on the folder").setDesc("Choose if the folder note should be opened when the folder is opened").addToggle((toggle) => toggle.setValue(this.whitelistedFolder.enableFolderNote).onChange(async (value) => {
      this.whitelistedFolder.enableFolderNote = value;
      await this.plugin.saveSettings(true);
      this.display();
    }));
    if (this.whitelistedFolder.enableFolderNote) {
      new import_obsidian10.Setting(contentEl).setName("Collapse folder when opening folder note").setDesc("Choose if the folder should be collapsed when the folder note is opened").addToggle((toggle) => toggle.setValue(this.whitelistedFolder.enableCollapsing).onChange(async (value) => {
        this.whitelistedFolder.enableCollapsing = value;
        await this.plugin.saveSettings();
      }));
    }
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
  }
};

// src/ExcludeFolders/functions/whitelistPatternFunctions.ts
var import_obsidian12 = require("obsidian");

// src/ExcludeFolders/modals/WhitelistPatternSettings.ts
var import_obsidian11 = require("obsidian");
var WhitelistPatternSettings = class extends import_obsidian11.Modal {
  constructor(app2, plugin, pattern) {
    super(app2);
    this.plugin = plugin;
    this.app = app2;
    this.pattern = pattern;
  }
  onOpen() {
    this.display();
  }
  display() {
    const { contentEl } = this;
    contentEl.empty();
    contentEl.createEl("h2", { text: "Whitelisted pattern settings" });
    new import_obsidian11.Setting(contentEl).setName("Enable folder name sync").setDesc("Choose if the name of a folder note should be renamed when the folder name is changed").addToggle((toggle) => toggle.setValue(this.pattern.enableSync).onChange(async (value) => {
      this.pattern.enableSync = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian11.Setting(contentEl).setName("Allow auto creation of folder notes in this folder").addToggle((toggle) => toggle.setValue(this.pattern.enableAutoCreate).onChange(async (value) => {
      this.pattern.enableAutoCreate = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian11.Setting(contentEl).setName("Show folder in folder overview").setDesc("Choose if the folder should be shown in the folder overview").addToggle((toggle) => toggle.setValue(this.pattern.showInFolderOverview).onChange(async (value) => {
      this.pattern.showInFolderOverview = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian11.Setting(contentEl).setName("Open folder note when clicking on the folder").setDesc("Choose if the folder note should be opened when you click on the folder").addToggle((toggle) => toggle.setValue(this.pattern.enableFolderNote).onChange(async (value) => {
      this.pattern.enableFolderNote = value;
      await this.plugin.saveSettings(true);
      this.display();
    }));
    if (this.pattern.enableFolderNote) {
      new import_obsidian11.Setting(contentEl).setName("Collapse folder when opening folder note").setDesc("Choose if the folder should be collapsed when the folder note is opened").addToggle((toggle) => toggle.setValue(this.pattern.enableCollapsing).onChange(async (value) => {
        this.pattern.enableCollapsing = value;
        await this.plugin.saveSettings();
      }));
    }
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
  }
};

// src/ExcludeFolders/functions/whitelistPatternFunctions.ts
function updateWhitelistedPattern(plugin, pattern, newPattern) {
  plugin.settings.whitelistFolders = plugin.settings.whitelistFolders.filter((folder) => folder.id !== pattern.id);
  addWhitelistedFolder(plugin, newPattern);
}
function deletePattern2(plugin, pattern) {
  plugin.settings.whitelistFolders = plugin.settings.whitelistFolders.filter((folder) => folder.id !== pattern.id || folder.type === "folder");
  plugin.saveSettings(true);
  resyncArray(plugin);
}
function getWhitelistedFoldersByPattern(plugin, folderName) {
  return plugin.settings.whitelistFolders.filter((s) => s.type == "pattern").filter((pattern) => {
    if (!pattern.string) {
      return false;
    }
    const string = pattern.string.trim();
    if (!string.startsWith("{regex}") && !(string.startsWith("*") || string.endsWith("*"))) {
      return false;
    }
    const regex = string.replace("{regex}", "").trim();
    if (string.startsWith("{regex}") && regex === "") {
      return false;
    }
    if (regex !== void 0 && string.startsWith("{regex}")) {
      const match = new RegExp(regex).exec(folderName);
      if (match) {
        return true;
      }
    } else if (string.startsWith("*") && string.endsWith("*")) {
      if (folderName.includes(string.slice(1, -1))) {
        return true;
      }
    } else if (string.startsWith("*")) {
      if (folderName.endsWith(string.slice(1))) {
        return true;
      }
    } else if (string.endsWith("*")) {
      if (folderName.startsWith(string.slice(0, -1))) {
        return true;
      }
    }
  });
}
function addWhitelistedPatternListItem(settings, containerEl, pattern) {
  const plugin = settings.plugin;
  const setting = new import_obsidian12.Setting(containerEl);
  setting.setClass("fn-exclude-folder-list");
  setting.addSearch((cb) => {
    cb.containerEl.addClass("fn-exclude-folder-path");
    cb.setPlaceholder("Pattern");
    cb.setValue(pattern.string);
    cb.onChange((value) => {
      if (plugin.settings.whitelistFolders.find((folder) => folder.string === value)) {
        return;
      }
      pattern.string = value;
      updateWhitelistedPattern(plugin, pattern, pattern);
    });
  });
  setting.addButton((cb) => {
    cb.setIcon("edit");
    cb.setTooltip("Edit pattern");
    cb.onClick(() => {
      new WhitelistPatternSettings(plugin.app, plugin, pattern).open();
    });
  });
  setting.addButton((cb) => {
    cb.setIcon("up-chevron-glyph");
    cb.setTooltip("Move up");
    cb.onClick(() => {
      if (pattern.position === 0) {
        return;
      }
      pattern.position -= 1;
      updateWhitelistedPattern(plugin, pattern, pattern);
      const oldPattern = plugin.settings.whitelistFolders.find((folder) => folder.position === pattern.position);
      if (oldPattern) {
        oldPattern.position += 1;
        if (oldPattern.type === "pattern") {
          updateWhitelistedPattern(plugin, oldPattern, oldPattern);
        } else {
          updateWhitelistedFolder(plugin, oldPattern, oldPattern);
        }
      }
      settings.display();
    });
  });
  setting.addButton((cb) => {
    cb.setIcon("down-chevron-glyph");
    cb.setTooltip("Move down");
    cb.onClick(() => {
      if (pattern.position === plugin.settings.whitelistFolders.length - 1) {
        return;
      }
      pattern.position += 1;
      updateWhitelistedPattern(plugin, pattern, pattern);
      const oldPattern = plugin.settings.whitelistFolders.find((folder) => folder.position === pattern.position);
      if (oldPattern) {
        oldPattern.position -= 1;
        if (oldPattern.type === "pattern") {
          updateWhitelistedPattern(plugin, oldPattern, oldPattern);
        } else {
          updateWhitelistedFolder(plugin, oldPattern, oldPattern);
        }
      }
      settings.display();
    });
  });
  setting.addButton((cb) => {
    cb.setIcon("trash-2");
    cb.setTooltip("Delete pattern");
    cb.onClick(() => {
      deletePattern2(plugin, pattern);
      setting.clear();
      setting.settingEl.remove();
    });
  });
}

// src/ExcludeFolders/functions/whitelistFolderFunctions.ts
import_obsidian13.Platform.isMobileApp;
function getWhitelistedFolder(plugin, path) {
  let whitelistedFolder = {};
  const folderName = getFolderNameFromPathString(path);
  const matchedPatterns = getWhitelistedFoldersByPattern(plugin, folderName);
  const whitelistedFolders = getWhitelistedFoldersByPath(plugin, path);
  const combinedWhitelistedFolders = [...matchedPatterns, ...whitelistedFolders];
  const propertiesToCopy = [
    "enableAutoCreate",
    "enableFolderNote",
    "enableSync",
    "showInFolderOverview"
  ];
  if (combinedWhitelistedFolders.length > 0) {
    for (const matchedFolder of combinedWhitelistedFolders) {
      propertiesToCopy.forEach((property) => {
        if (matchedFolder[property] === true) {
          whitelistedFolder[property] = true;
        } else if (!matchedFolder[property]) {
          whitelistedFolder[property] = false;
        }
      });
    }
  }
  if (whitelistedFolder instanceof Object && Object.keys(whitelistedFolder).length === 0) {
    whitelistedFolder = void 0;
  }
  return whitelistedFolder;
}
function getWhitelistedFoldersByPath(plugin, path) {
  return plugin.settings.whitelistFolders.filter((whitelistedFolder) => {
    if (whitelistedFolder.path === path) {
      return true;
    }
    if (!whitelistedFolder.subFolders) {
      return false;
    }
    return getFolderPathFromString2(path).startsWith(whitelistedFolder.path);
  });
}
function addWhitelistedFolder(plugin, whitelistedFolder) {
  plugin.settings.whitelistFolders.push(whitelistedFolder);
  plugin.saveSettings(true);
}
function deleteWhitelistedFolder(plugin, whitelistedFolder) {
  plugin.settings.whitelistFolders = plugin.settings.whitelistFolders.filter((folder) => folder.id !== whitelistedFolder.id || folder.type === "pattern");
  plugin.saveSettings(true);
  resyncArray2(plugin);
}
function updateWhitelistedFolder(plugin, whitelistedFolder, newWhitelistFolder) {
  plugin.settings.whitelistFolders = plugin.settings.whitelistFolders.filter((folder) => folder.id !== whitelistedFolder.id);
  addWhitelistedFolder(plugin, newWhitelistFolder);
}
function resyncArray2(plugin) {
  plugin.settings.whitelistFolders = plugin.settings.whitelistFolders.sort((a, b) => a.position - b.position);
  plugin.settings.whitelistFolders.forEach((folder, index) => {
    folder.position = index;
  });
  plugin.saveSettings();
}
function addWhitelistFolderListItem(settings, containerEl, whitelistedFolder) {
  const plugin = settings.plugin;
  const setting = new import_obsidian13.Setting(containerEl);
  setting.setClass("fn-exclude-folder-list");
  const inputContainer = setting.settingEl.createDiv({ cls: "fn-whitelist-folder-input-container" });
  const SearchComponent = new import_obsidian13.Setting(inputContainer);
  SearchComponent.addSearch((cb) => {
    new FolderSuggest(cb.inputEl, plugin, true);
    cb.containerEl.addClass("fn-exclude-folder-path");
    cb.setPlaceholder("Folder path");
    cb.setValue(whitelistedFolder.path);
    cb.onChange((value) => {
      if (value.startsWith("{regex}") || value.includes("*")) {
        deleteWhitelistedFolder(plugin, whitelistedFolder);
        const pattern = new WhitelistedPattern(value, plugin.settings.whitelistFolders.length, void 0, plugin);
        addWhitelistedFolder(plugin, pattern);
        addWhitelistedPatternListItem(settings, containerEl, pattern);
        setting.clear();
        setting.settingEl.remove();
      }
      if (!plugin.app.vault.getAbstractFileByPath(value))
        return;
      whitelistedFolder.path = value;
      updateWhitelistedFolder(plugin, whitelistedFolder, whitelistedFolder);
    });
  });
  const buttonContainer = setting.settingEl.createDiv({ cls: "fn-whitelist-folder-buttons" });
  new import_obsidian13.ButtonComponent(buttonContainer).setIcon("edit").setTooltip("Edit folder note").onClick(() => {
    new WhitelistFolderSettings(plugin.app, plugin, whitelistedFolder).open();
  });
  new import_obsidian13.ButtonComponent(buttonContainer).setIcon("up-chevron-glyph").setTooltip("Move up").onClick(() => {
    if (whitelistedFolder.position === 0) {
      return;
    }
    whitelistedFolder.position -= 1;
    updateWhitelistedFolder(plugin, whitelistedFolder, whitelistedFolder);
    const oldWhitelistedFolder = plugin.settings.whitelistFolders.find((folder) => folder.position === whitelistedFolder.position);
    if (oldWhitelistedFolder) {
      oldWhitelistedFolder.position += 1;
      if (oldWhitelistedFolder.type === "pattern") {
        updateWhitelistedPattern(plugin, oldWhitelistedFolder, oldWhitelistedFolder);
      } else {
        updateWhitelistedFolder(plugin, oldWhitelistedFolder, oldWhitelistedFolder);
      }
    }
    settings.display();
  });
  new import_obsidian13.ButtonComponent(buttonContainer).setIcon("down-chevron-glyph").setTooltip("Move down").onClick(() => {
    if (whitelistedFolder.position === plugin.settings.whitelistFolders.length - 1) {
      return;
    }
    whitelistedFolder.position += 1;
    updateWhitelistedFolder(plugin, whitelistedFolder, whitelistedFolder);
    const oldWhitelistedFolder = plugin.settings.whitelistFolders.find((folder) => folder.position === whitelistedFolder.position);
    if (oldWhitelistedFolder) {
      oldWhitelistedFolder.position -= 1;
      if (oldWhitelistedFolder.type === "pattern") {
        updateWhitelistedPattern(plugin, oldWhitelistedFolder, oldWhitelistedFolder);
      } else {
        updateWhitelistedFolder(plugin, oldWhitelistedFolder, oldWhitelistedFolder);
      }
    }
    settings.display();
  });
  new import_obsidian13.ButtonComponent(buttonContainer).setIcon("trash-2").setTooltip("Delete excluded folder").onClick(() => {
    deleteWhitelistedFolder(plugin, whitelistedFolder);
    setting.clear();
    setting.settingEl.remove();
  });
}

// src/ExcludeFolders/functions/folderFunctions.ts
async function getExcludedFolder(plugin, path, includeDetached, pathOnly, ignoreWhitelist) {
  let excludedFolder = {};
  const whitelistedFolder = getWhitelistedFolder(plugin, path);
  const folderName = getFolderNameFromPathString(path);
  let matchedPatterns = getExcludedFoldersByPattern(plugin, folderName);
  const excludedFolders = getExcludedFoldersByPath(plugin, path);
  if (pathOnly) {
    matchedPatterns = [];
  }
  let combinedExcludedFolders = [...matchedPatterns, ...excludedFolders];
  if (!includeDetached) {
    combinedExcludedFolders = combinedExcludedFolders.filter((f) => !f.detached);
  }
  const propertiesToCopy = [
    "disableAutoCreate",
    "disableFolderNote",
    "disableSync",
    "enableCollapsing",
    "excludeFromFolderOverview",
    "detached",
    "hideInSettings",
    "hideNote",
    "id"
  ];
  if (combinedExcludedFolders.length > 0) {
    for (const matchedFolder of combinedExcludedFolders) {
      propertiesToCopy.forEach((property) => {
        if (matchedFolder[property] === true) {
          excludedFolder[property] = true;
        } else if (!matchedFolder[property]) {
          excludedFolder[property] = false;
        }
      });
    }
  } else {
    excludedFolder = void 0;
  }
  if (excludedFolder == null ? void 0 : excludedFolder.detached) {
    ignoreWhitelist = true;
  }
  if (whitelistedFolder && excludedFolder && !ignoreWhitelist) {
    excludedFolder.disableAutoCreate ? excludedFolder.disableAutoCreate = !whitelistedFolder.enableAutoCreate : "";
    excludedFolder.disableFolderNote ? excludedFolder.disableFolderNote = !whitelistedFolder.enableFolderNote : "";
    excludedFolder.disableSync ? excludedFolder.disableSync = !whitelistedFolder.enableSync : "";
    excludedFolder.enableCollapsing = whitelistedFolder.enableCollapsing;
    excludedFolder.excludeFromFolderOverview ? excludedFolder.excludeFromFolderOverview = !whitelistedFolder.showInFolderOverview : "";
  } else if (excludedFolder && Object.keys(excludedFolder).length === 0) {
    excludedFolder = {
      type: "folder",
      id: "",
      path: "",
      string: "",
      subFolders: false,
      disableSync: false,
      disableAutoCreate: false,
      disableFolderNote: false,
      enableCollapsing: false,
      position: 0,
      excludeFromFolderOverview: false,
      hideInSettings: false,
      detached: false,
      hideNote: false
    };
  }
  return excludedFolder;
}
function getDetachedFolder(plugin, path) {
  return plugin.settings.excludeFolders.find((f) => f.path == path && f.detached);
}
function getExcludedFoldersByPath(plugin, path) {
  return plugin.settings.excludeFolders.filter((excludedFolder) => {
    if (path.trim() === "" || !excludedFolder.path) {
      return false;
    }
    if (excludedFolder.path === path) {
      return true;
    }
    if (!excludedFolder.subFolders) {
      return false;
    }
    const excludedFolderPath = excludedFolder.path.includes("/") ? excludedFolder.path : excludedFolder.path + "/";
    let folderPath = getFolderPathFromString2(path);
    folderPath = folderPath.includes("/") ? folderPath : folderPath + "/";
    if (folderPath.includes("/") || folderPath.includes("\\")) {
      return folderPath.startsWith(excludedFolderPath) || folderPath === excludedFolderPath;
    } else {
      return folderPath === excludedFolderPath;
    }
  });
}
function addExcludedFolder(plugin, excludedFolder, reloadStyles = true) {
  plugin.settings.excludeFolders.push(excludedFolder);
  plugin.saveSettings(reloadStyles);
}
async function deleteExcludedFolder(plugin, excludedFolder) {
  plugin.settings.excludeFolders = plugin.settings.excludeFolders.filter((folder) => folder.id !== excludedFolder.id || folder.type === "pattern");
  plugin.saveSettings(true);
  resyncArray(plugin);
}
function updateExcludedFolder(plugin, excludedFolder, newExcludeFolder) {
  plugin.settings.excludeFolders = plugin.settings.excludeFolders.filter((folder) => folder.id !== excludedFolder.id);
  addExcludedFolder(plugin, newExcludeFolder);
}
function resyncArray(plugin) {
  plugin.settings.excludeFolders = plugin.settings.excludeFolders.sort((a, b) => a.position - b.position);
  plugin.settings.excludeFolders.forEach((folder, index) => {
    folder.position = index;
  });
  plugin.saveSettings();
}
function addExcludeFolderListItem(settings, containerEl, excludedFolder) {
  const plugin = settings.plugin;
  const setting = new import_obsidian14.Setting(containerEl);
  setting.setClass("fn-exclude-folder-list");
  setting.addSearch((cb) => {
    new FolderSuggest(cb.inputEl, plugin, false);
    cb.containerEl.addClass("fn-exclude-folder-path");
    cb.setPlaceholder("Folder path");
    cb.setValue(excludedFolder.path || "");
    cb.onChange((value) => {
      if (value.startsWith("{regex}") || value.includes("*")) {
        deleteExcludedFolder(plugin, excludedFolder);
        const pattern = new ExcludePattern(value, plugin.settings.excludeFolders.length, void 0, plugin);
        addExcludedFolder(plugin, pattern);
        addExcludePatternListItem(settings, containerEl, pattern);
        setting.clear();
        setting.settingEl.remove();
      }
      if (!plugin.app.vault.getAbstractFileByPath(value))
        return;
      excludedFolder.path = value;
      updateExcludedFolder(plugin, excludedFolder, excludedFolder);
    });
  });
  setting.addButton((cb) => {
    cb.setIcon("edit");
    cb.setTooltip("Edit folder note");
    cb.onClick(() => {
      new ExcludedFolderSettings(plugin.app, plugin, excludedFolder).open();
    });
  });
  if (import_obsidian14.Platform.isDesktop || import_obsidian14.Platform.isTablet) {
    setting.addButton((cb) => {
      cb.setIcon("up-chevron-glyph");
      cb.setTooltip("Move up");
      cb.onClick(() => {
        if (excludedFolder.position === 0) {
          return;
        }
        excludedFolder.position -= 1;
        updateExcludedFolder(plugin, excludedFolder, excludedFolder);
        const oldExcludedFolder = plugin.settings.excludeFolders.find((folder) => folder.position === excludedFolder.position);
        if (oldExcludedFolder) {
          oldExcludedFolder.position += 1;
          if (oldExcludedFolder.type === "pattern") {
            updatePattern(plugin, oldExcludedFolder, oldExcludedFolder);
          } else {
            updateExcludedFolder(plugin, oldExcludedFolder, oldExcludedFolder);
          }
        }
        settings.display();
      });
    });
    setting.addButton((cb) => {
      cb.setIcon("down-chevron-glyph");
      cb.setTooltip("Move down");
      cb.onClick(() => {
        if (excludedFolder.position === plugin.settings.excludeFolders.length - 1) {
          return;
        }
        excludedFolder.position += 1;
        updateExcludedFolder(plugin, excludedFolder, excludedFolder);
        const oldExcludedFolder = plugin.settings.excludeFolders.find((folder) => folder.position === excludedFolder.position);
        if (oldExcludedFolder) {
          oldExcludedFolder.position -= 1;
          if (oldExcludedFolder.type === "pattern") {
            updatePattern(plugin, oldExcludedFolder, oldExcludedFolder);
          } else {
            updateExcludedFolder(plugin, oldExcludedFolder, oldExcludedFolder);
          }
        }
        settings.display();
      });
    });
  }
  setting.addButton((cb) => {
    cb.setIcon("trash-2");
    cb.setTooltip("Delete excluded folder");
    cb.onClick(() => {
      deleteExcludedFolder(plugin, excludedFolder);
      setting.clear();
      setting.settingEl.remove();
    });
  });
}

// src/ExcludeFolders/ExcludeFolder.ts
var ExcludedFolder = class {
  constructor(path, position, id, plugin) {
    this.type = "folder";
    this.id = id || crypto.randomUUID();
    this.path = path;
    this.subFolders = plugin.settings.excludeFolderDefaultSettings.subFolders;
    this.disableSync = plugin.settings.excludeFolderDefaultSettings.disableSync;
    this.disableAutoCreate = plugin.settings.excludeFolderDefaultSettings.disableAutoCreate;
    this.disableFolderNote = plugin.settings.excludeFolderDefaultSettings.disableFolderNote;
    this.enableCollapsing = plugin.settings.excludeFolderDefaultSettings.enableCollapsing;
    this.position = position;
    this.excludeFromFolderOverview = plugin.settings.excludeFolderDefaultSettings.excludeFromFolderOverview;
    this.string = "";
    this.hideInSettings = false;
    this.hideNote = false;
  }
};

// src/functions/excalidraw.ts
async function openExcalidrawView(leaf) {
  const { excalidraw, excalidrawEnabled } = await getExcalidrawPlugin(this.app);
  if (excalidrawEnabled) {
    excalidraw.setExcalidrawView(leaf);
  }
}
async function getExcalidrawPlugin(app2) {
  const excalidraw = app2.plugins.plugins["obsidian-excalidraw-plugin"];
  const excalidrawEnabled = app2.plugins.enabledPlugins.has("obsidian-excalidraw-plugin");
  return {
    excalidraw,
    excalidrawEnabled
  };
}

// src/modals/AskForExtension.ts
var import_obsidian15 = require("obsidian");
var AskForExtensionModal = class extends import_obsidian15.FuzzySuggestModal {
  constructor(plugin, folderPath, openFile, extension, useModal, existingNote) {
    super(plugin.app);
    this.plugin = plugin;
    this.folderPath = folderPath;
    this.extension = extension;
    this.openFile = openFile;
    this.useModal = useModal;
    this.existingNote = existingNote;
  }
  getItems() {
    return this.plugin.settings.supportedFileTypes.filter((item) => item.toLowerCase() !== ".ask");
  }
  getItemText(item) {
    return item;
  }
  onChooseItem(item, evt) {
    this.extension = "." + item;
    createFolderNote(this.plugin, this.folderPath, this.openFile, this.extension, this.useModal, this.existingNote);
    this.close();
  }
};

// src/functions/styleFunctions.ts
var import_obsidian16 = require("obsidian");
function loadFileClasses(forceReload = false, plugin) {
  if (plugin.activeFileExplorer === getFileExplorer(plugin) && !forceReload) {
    return;
  }
  plugin.activeFileExplorer = getFileExplorer(plugin);
  plugin.app.vault.getAllLoadedFiles().forEach(async (file) => {
    if (!(file instanceof import_obsidian16.TFolder)) {
      return;
    }
    const folderNote = getFolderNote(plugin, file.path);
    if (!folderNote) {
      removeCSSClassFromEL(file == null ? void 0 : file.path, "has-folder-note", plugin);
      removeCSSClassFromEL(file == null ? void 0 : file.path, "only-has-folder-note", plugin);
      plugin.isEmptyFolderNoteFolder(file);
      return;
    }
    const excludedFolder = await getExcludedFolder(plugin, file.path, true);
    if (excludedFolder == null ? void 0 : excludedFolder.disableFolderNote) {
      removeCSSClassFromEL(folderNote.path, "is-folder-note", plugin);
      removeCSSClassFromEL(file.path, "has-folder-note", plugin);
      removeCSSClassFromEL(file == null ? void 0 : file.path, "only-has-folder-note", plugin);
    } else {
      if (!(excludedFolder == null ? void 0 : excludedFolder.hideNote)) {
        addCSSClassToTitleEL(folderNote.path, "is-folder-note", plugin);
      }
      addCSSClassesToFolder(file, plugin);
    }
  });
}
async function applyCSSClassesToFolder(folderPath, plugin) {
  const folder = plugin.app.vault.getAbstractFileByPath(folderPath);
  if (!folder || !(folder instanceof import_obsidian16.TFolder)) {
    return;
  }
  const folderNote = getFolderNote(plugin, folder.path);
  if (!folderNote) {
    removeCSSClassFromEL(folder == null ? void 0 : folder.path, "has-folder-note", plugin);
    removeCSSClassFromEL(folder == null ? void 0 : folder.path, "only-has-folder-note", plugin);
    return;
  }
  const excludedFolder = await getExcludedFolder(plugin, folder.path, true);
  if (excludedFolder == null ? void 0 : excludedFolder.disableFolderNote) {
    removeCSSClassFromEL(folderNote.path, "is-folder-note", plugin);
    removeCSSClassFromEL(folder.path, "has-folder-note", plugin);
    removeCSSClassFromEL(folder == null ? void 0 : folder.path, "only-has-folder-note", plugin);
  } else {
    if (!(excludedFolder == null ? void 0 : excludedFolder.hideNote)) {
      addCSSClassToFolderNote(folderNote, plugin);
    }
    addCSSClassesToFolder(folder, plugin);
    if (plugin.isEmptyFolderNoteFolder(folder)) {
      addCSSClassToTitleEL(folder.path, "only-has-folder-note", plugin);
    } else {
      removeCSSClassFromEL(folder.path, "only-has-folder-note", plugin);
    }
  }
  addCSSClassesToBothFolderAndNote(folderNote, folder, plugin);
}
function addCSSClassesToBothFolderAndNote(file, folder, plugin) {
  addCSSClassToFolderNote(file, plugin);
  addCSSClassesToFolder(folder, plugin);
}
function addCSSClassesToFolder(folder, plugin) {
  addCSSClassToTitleEL(folder.path, "has-folder-note", plugin);
  if (plugin.isEmptyFolderNoteFolder(folder)) {
    addCSSClassToTitleEL(folder.path, "only-has-folder-note", plugin);
  } else {
    removeCSSClassFromEL(folder.path, "only-has-folder-note", plugin);
  }
}
function addCSSClassToFolderNote(file, plugin) {
  addCSSClassToTitleEL(file.path, "is-folder-note", plugin);
}
async function addCSSClassToTitleEL(path, cssClass, plugin, waitForCreate = false, count = 0) {
  const fileExplorerItem = getEl(path, plugin);
  if (!fileExplorerItem) {
    if (waitForCreate && count < 5) {
      await new Promise((r) => setTimeout(r, 500));
      addCSSClassToTitleEL(path, cssClass, plugin, waitForCreate, count + 1);
      return;
    }
    return;
  }
  fileExplorerItem.addClass(cssClass);
  const viewHeaderItems = document.querySelectorAll(`[data-path='${CSS.escape(path)}']`);
  viewHeaderItems.forEach((item) => {
    item.addClass(cssClass);
  });
}
function removeCSSClassFromEL(path, cssClass, plugin) {
  if (!path)
    return;
  const fileExplorerItem = getEl(path, plugin);
  const viewHeaderItems = document.querySelectorAll(`[data-path='${CSS.escape(path)}']`);
  viewHeaderItems.forEach((item) => {
    item.removeClass(cssClass);
  });
  if (!fileExplorerItem) {
    return;
  }
  fileExplorerItem.removeClass(cssClass);
}
function getEl(path, plugin) {
  const fileExplorer = getFileExplorer(plugin);
  if (!fileExplorer) {
    return null;
  }
  if (!fileExplorer.view) {
    return null;
  }
  if (!fileExplorer.view.fileItems) {
    return null;
  }
  const fileExplorerItem = fileExplorer.view.fileItems[path];
  if (!fileExplorerItem) {
    return null;
  }
  if (fileExplorerItem.selfEl)
    return fileExplorerItem.selfEl;
  return fileExplorerItem.titleEl;
}

// src/functions/folderNoteFunctions.ts
var defaultExcalidrawTemplate = `---

excalidraw-plugin: parsed
tags: [excalidraw]

---
==\u26A0  Switch to EXCALIDRAW VIEW in the MORE OPTIONS menu of this document. \u26A0==


%%
# Drawing
\`\`\`json
{'type":"excalidraw","version":2,"source":"https://github.com/zsviczian/obsidian-excalidraw-plugin/releases/tag/1.9.20","elements":[],"appState":{"gridSize":null,"viewBackgroundColor":"#ffffff'}}
\`\`\`
%%`;
async function createFolderNote(plugin, folderPath, openFile, extension, displayModal, preexistingNote) {
  var _a;
  const leaf = plugin.app.workspace.getLeaf(false);
  const folderName = getFolderNameFromPathString(folderPath);
  const fileName = plugin.settings.folderNoteName.replace("{{folder_name}}", folderName);
  let folderNote = getFolderNote(plugin, folderPath);
  if (preexistingNote) {
    folderNote = preexistingNote;
  }
  let folderNoteType = extension != null ? extension : plugin.settings.folderNoteType;
  const detachedFolder = getDetachedFolder(plugin, folderPath);
  let path = "";
  if (folderNoteType === ".excalidraw") {
    folderNoteType = ".md";
    extension = ".excalidraw";
  } else if (folderNoteType === ".ask") {
    return new AskForExtensionModal(plugin, folderPath, openFile, folderNoteType, displayModal, preexistingNote).open();
  }
  if (plugin.settings.storageLocation === "parentFolder") {
    const parentFolderPath = getFolderPathFromString2(folderPath);
    if (parentFolderPath.trim() === "") {
      path = `${fileName}${folderNoteType}`;
    } else {
      path = `${parentFolderPath}/${fileName}${folderNoteType}`;
    }
  } else if (plugin.settings.storageLocation === "vaultFolder") {
    path = `${fileName}${folderNoteType}`;
  } else {
    path = `${folderPath}/${fileName}${folderNoteType}`;
  }
  if (detachedFolder && (folderNote == null ? void 0 : folderNote.extension) !== extension && folderNote) {
    deleteExcludedFolder(plugin, detachedFolder);
    removeCSSClassFromEL(folderNote == null ? void 0 : folderNote.path, "is-folder-note", plugin);
    const folder2 = plugin.app.vault.getAbstractFileByPath(folderPath);
    if (!folderNote || folderNote.basename !== fileName)
      return;
    let count = 1;
    let newName = removeExtension(folderNote.path) + ` (${count}).${folderNote.path.split(".").pop()}`;
    while (count < 100 && plugin.app.vault.getAbstractFileByPath(newName)) {
      count++;
      newName = removeExtension(folderNote.path) + ` (${count}).${folderNote.path.split(".").pop()}`;
    }
    const [excludedFolder, excludedFolderExisted, disabledSync] = await tempDisableSync(plugin, folder2);
    await plugin.app.fileManager.renameFile(folderNote, newName).then(() => {
      if (!excludedFolder)
        return;
      if (!excludedFolderExisted) {
        deleteExcludedFolder(plugin, excludedFolder);
      } else if (!disabledSync) {
        excludedFolder.disableSync = false;
        updateExcludedFolder(plugin, excludedFolder, excludedFolder);
      }
    });
  }
  if (!folderNote) {
    let content = "";
    if (extension !== ".md") {
      if (plugin.settings.templatePath && folderNoteType.split(".").pop() == plugin.settings.templatePath.split(".").pop()) {
        const templateFile = plugin.app.vault.getAbstractFileByPath(plugin.settings.templatePath);
        if (templateFile instanceof import_obsidian17.TFile) {
          if (["md", "canvas", "txt"].includes(templateFile.extension)) {
            content = await plugin.app.vault.read(templateFile);
            if (extension === ".excalidraw" && !content.includes("==\u26A0  Switch to EXCALIDRAW VIEW in the MORE OPTIONS menu of this document. \u26A0==")) {
              content = defaultExcalidrawTemplate;
            }
          } else {
            return plugin.app.vault.readBinary(templateFile).then(async (data) => {
              folderNote = await plugin.app.vault.createBinary(path, data);
              if (openFile) {
                await leaf.openFile(folderNote);
              }
            });
          }
        }
      } else if (plugin.settings.folderNoteType === ".excalidraw" || extension === ".excalidraw") {
        content = defaultExcalidrawTemplate;
      } else if (plugin.settings.folderNoteType === ".canvas") {
        content = "{}";
      }
    }
    folderNote = await plugin.app.vault.create(path, content);
  } else {
    await plugin.app.fileManager.renameFile(folderNote, path);
  }
  if (openFile) {
    if (((_a = plugin.app.workspace.getActiveFile()) == null ? void 0 : _a.path) === path) {
      if (plugin.activeFolderDom) {
        plugin.activeFolderDom.removeClass("fn-is-active");
        plugin.activeFolderDom = null;
      }
      const folder2 = getFolder2(plugin, folderNote);
      if (!folder2) {
        return;
      }
      plugin.activeFolderDom = getEl(folder2.path, plugin);
      if (plugin.activeFolderDom)
        plugin.activeFolderDom.addClass("fn-is-active");
    }
    await leaf.openFile(folderNote);
    if (plugin.settings.folderNoteType === ".excalidraw" || extension === ".excalidraw") {
      openExcalidrawView(leaf);
    }
  }
  const matchingExtension = (extension == null ? void 0 : extension.split(".").pop()) == plugin.settings.templatePath.split(".").pop();
  if (folderNote && matchingExtension && plugin.settings.folderNoteType !== ".excalidraw") {
    applyTemplate(plugin, folderNote, leaf, plugin.settings.templatePath);
  }
  const folder = plugin.app.vault.getAbstractFileByPath(folderPath);
  if (!(folder instanceof import_obsidian17.TFolder))
    return;
  addCSSClassToTitleEL(path, "is-folder-note", plugin, true);
  addCSSClassToTitleEL(folder.path, "has-folder-note", plugin);
}
async function turnIntoFolderNote(plugin, file, folder, folderNote, skipConfirmation) {
  var _a;
  const extension = file.extension;
  const detachedExcludedFolder = getDetachedFolder(plugin, folder.path);
  if (folderNote) {
    if (plugin.settings.showRenameConfirmation && !skipConfirmation && !detachedExcludedFolder) {
      return new ExistingFolderNoteModal(plugin.app, plugin, file, folder, folderNote).open();
    }
    removeCSSClassFromEL(folderNote.path, "is-folder-note", plugin);
    const [excludedFolder, excludedFolderExisted, disabledSync] = await tempDisableSync(plugin, folder);
    const newPath = `${folder.path}/${folder.name} (${file.stat.ctime.toString().slice(10) + Math.floor(Math.random() * 1e3)}).${extension}`;
    plugin.app.fileManager.renameFile(folderNote, newPath).then(() => {
      if (!excludedFolder)
        return;
      if (!excludedFolderExisted) {
        deleteExcludedFolder(plugin, excludedFolder);
      } else if (!disabledSync) {
        excludedFolder.disableSync = false;
        updateExcludedFolder(plugin, excludedFolder, excludedFolder);
      }
    });
  }
  const folderName = folder.name;
  const fileName = plugin.settings.folderNoteName.replace("{{folder_name}}", folderName);
  let path = `${folder.path}/${fileName}.${extension}`;
  if (plugin.settings.storageLocation === "parentFolder") {
    const parentFolderPath = (_a = folder.parent) == null ? void 0 : _a.path;
    if (!parentFolderPath)
      return;
    if (parentFolderPath.trim() === "") {
      path = `${fileName}.${extension}`;
    } else {
      path = `${parentFolderPath}/${fileName}.${extension}`;
    }
  }
  if (detachedExcludedFolder) {
    deleteExcludedFolder(plugin, detachedExcludedFolder);
  }
  await plugin.app.fileManager.renameFile(file, path);
  addCSSClassToTitleEL(path, "is-folder-note", plugin, true);
  addCSSClassToTitleEL(folder.path, "has-folder-note", plugin);
  if (plugin.activeFolderDom) {
    plugin.activeFolderDom.removeClass("fn-is-active");
    plugin.activeFolderDom = null;
  }
  plugin.activeFolderDom = getEl(folder.path, plugin);
  if (plugin.activeFolderDom)
    plugin.activeFolderDom.addClass("fn-is-active");
}
async function tempDisableSync(plugin, folder) {
  let excludedFolder = await getExcludedFolder(plugin, folder.path, false);
  let excludedFolderExisted = true;
  let disabledSync = false;
  if (!excludedFolder) {
    excludedFolderExisted = false;
    excludedFolder = new ExcludedFolder(folder.path, plugin.settings.excludeFolders.length, void 0, plugin);
    excludedFolder.disableSync = true;
    addExcludedFolder(plugin, excludedFolder);
  } else if (!excludedFolder.disableSync) {
    disabledSync = false;
    excludedFolder.disableSync = true;
    updateExcludedFolder(plugin, excludedFolder, excludedFolder);
  }
  return [excludedFolder, excludedFolderExisted, disabledSync];
}
async function openFolderNote(plugin, file, evt) {
  var _a;
  const path = file.path;
  if (((_a = plugin.app.workspace.getActiveFile()) == null ? void 0 : _a.path) === path && !(import_obsidian17.Keymap.isModEvent(evt) == "tab")) {
    return;
  }
  const leaf = plugin.app.workspace.getLeaf(import_obsidian17.Keymap.isModEvent(evt) || plugin.settings.openInNewTab);
  if (file instanceof import_obsidian17.TFile) {
    await leaf.openFile(file);
  }
}
async function deleteFolderNote(plugin, file, displayModal) {
  if (plugin.settings.showDeleteConfirmation && displayModal) {
    return new DeleteConfirmationModal(plugin.app, plugin, file).open();
  }
  const folder = getFolder2(plugin, file);
  if (!folder)
    return;
  removeCSSClassFromEL(folder.path, "has-folder-note", plugin);
  switch (plugin.settings.deleteFilesAction) {
    case "trash":
      await plugin.app.vault.trash(file, true);
      break;
    case "obsidianTrash":
      await plugin.app.vault.trash(file, false);
      break;
    case "delete":
      await plugin.app.vault.delete(file);
      break;
  }
}
function extractFolderName(template, changedFileName) {
  const [prefix, suffix] = template.split("{{folder_name}}");
  if (prefix.trim() === "" && suffix.trim() === "") {
    return changedFileName;
  }
  if (!changedFileName.startsWith(prefix) || !changedFileName.endsWith(suffix)) {
    return null;
  }
  if (changedFileName.startsWith(prefix) && prefix.trim() !== "") {
    return changedFileName.slice(prefix.length).replace(suffix, "");
  } else if (changedFileName.endsWith(suffix) && suffix.trim() !== "") {
    return changedFileName.slice(0, -suffix.length);
  }
  return null;
}
function getFolderNote(plugin, folderPath, storageLocation, file) {
  if (!folderPath)
    return null;
  const folder = {
    path: folderPath,
    name: getFolderNameFromPathString(folderPath)
  };
  let fileName = plugin.settings.folderNoteName.replace("{{folder_name}}", folder.name);
  if (file) {
    fileName = plugin.settings.folderNoteName.replace("{{folder_name}}", file.basename);
  }
  if (!fileName)
    return null;
  if ((plugin.settings.storageLocation === "parentFolder" || storageLocation === "parentFolder") && storageLocation !== "insideFolder") {
    folder.path = getFolderPathFromString2(folderPath);
  }
  let path = `${folder.path}/${fileName}`;
  if (folder.path.trim() === "") {
    folder.path = fileName;
    path = `${fileName}`;
  }
  let folderNoteType = plugin.settings.folderNoteType;
  if (folderNoteType === ".excalidraw") {
    folderNoteType = ".md";
  }
  let folderNote = plugin.app.vault.getAbstractFileByPath(path + folderNoteType);
  if (folderNote instanceof import_obsidian17.TFile) {
    return folderNote;
  } else {
    const supportedFileTypes = plugin.settings.supportedFileTypes.filter((type) => type !== plugin.settings.folderNoteType.replace(".", ""));
    for (let type of supportedFileTypes) {
      if (type === "excalidraw" || type === ".excalidraw") {
        type = ".md";
      }
      if (!type.startsWith(".")) {
        type = "." + type;
      }
      folderNote = plugin.app.vault.getAbstractFileByPath(path + type);
      if (folderNote instanceof import_obsidian17.TFile) {
        return folderNote;
      }
    }
  }
}
function detachFolderNote(plugin, file) {
  const folder = getFolder2(plugin, file);
  if (!folder)
    return;
  const excludedFolder = new ExcludedFolder(folder.path, plugin.settings.excludeFolders.length, void 0, plugin);
  excludedFolder.hideInSettings = true;
  excludedFolder.disableFolderNote = true;
  excludedFolder.disableSync = true;
  excludedFolder.subFolders = false;
  excludedFolder.excludeFromFolderOverview = false;
  excludedFolder.detached = true;
  excludedFolder.detachedFilePath = file.path;
  addExcludedFolder(plugin, excludedFolder);
}
function getFolder2(plugin, file, storageLocation) {
  var _a, _b;
  if (!file)
    return null;
  let folderName = extractFolderName(plugin.settings.folderNoteName, file.basename);
  if (plugin.settings.folderNoteName === file.basename && plugin.settings.storageLocation === "insideFolder") {
    folderName = (_b = (_a = file.parent) == null ? void 0 : _a.name) != null ? _b : "";
  }
  if (!folderName)
    return null;
  let folderPath = getFolderPathFromString2(file.path);
  let folder = null;
  if ((plugin.settings.storageLocation === "parentFolder" || storageLocation === "parentFolder") && storageLocation !== "insideFolder") {
    if (folderPath.trim() === "") {
      folderPath = folderName;
    } else {
      folderPath = `${folderPath}/${folderName}`;
    }
    folder = plugin.app.vault.getAbstractFileByPath(folderPath);
  } else {
    folder = plugin.app.vault.getAbstractFileByPath(folderPath);
  }
  if (!folder) {
    return null;
  }
  return folder;
}
function getFolderNoteFolder(plugin, folderNote, fileName) {
  if (!folderNote)
    return null;
  let filePath = "";
  if (typeof folderNote === "string") {
    filePath = folderNote;
  } else {
    fileName = folderNote.basename;
    filePath = folderNote.path;
  }
  const folderName = extractFolderName(plugin.settings.folderNoteName, fileName);
  if (!folderName)
    return null;
  let folderPath = getFolderPathFromString2(filePath);
  if (plugin.settings.storageLocation === "parentFolder") {
    if (folderPath.trim() === "") {
      folderPath = folderName;
    } else {
      folderPath = `${folderPath}/${folderName}`;
    }
  } else {
    folderPath = getFolderPathFromString2(filePath);
  }
  const folder = plugin.app.vault.getAbstractFileByPath(folderPath);
  if (!folder) {
    return null;
  }
  return folder;
}

// src/settings/GeneralSettings.ts
var import_obsidian22 = require("obsidian");

// src/events/EventEmitter.ts
var CustomEventEmitter = class {
  constructor() {
    this.events = {};
  }
  on(event, listener) {
    if (!this.events[event]) {
      this.events[event] = [];
    }
    this.events[event].push(listener);
  }
  off(event, listener) {
    if (!this.events[event])
      return;
    this.events[event] = this.events[event].filter((l) => l !== listener);
  }
  emit(event, data) {
    if (!this.events[event])
      return;
    this.events[event].forEach((listener) => listener(data));
  }
};

// src/functions/ListComponent.ts
var ListComponent = class {
  constructor(containerEl, values = [], defaultValues = []) {
    this.emitter = new CustomEventEmitter();
    this.containerEl = containerEl;
    this.controlEl = containerEl.querySelector(".setting-item-control") || containerEl;
    this.listEl = this.controlEl.createDiv("setting-command-hotkeys");
    this.addResetButton();
    this.setValues(values);
    this.defaultValues = defaultValues;
  }
  on(event, listener) {
    this.emitter.on(event, listener);
  }
  off(event, listener) {
    this.emitter.off(event, listener);
  }
  emit(event, data) {
    this.emitter.emit(event, data);
  }
  setValues(values) {
    this.removeElements();
    this.values = values;
    if (values.length !== 0) {
      values.forEach((value) => {
        this.addElement(value);
      });
    }
    this.emit("update", this.values);
  }
  removeElements() {
    this.listEl.empty();
  }
  addElement(value) {
    this.listEl.createSpan("setting-hotkey", (span) => {
      if (value.toLocaleLowerCase() === "md") {
        span.innerText = "markdown";
      } else {
        span.innerText = value;
      }
      span.setAttribute("extension", value);
      const removeSpan = span.createEl("span", { cls: "ofn-list-item-remove setting-hotkey-icon" });
      const svg = '<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-x"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>';
      const svgElement = removeSpan.createEl("span", { cls: "ofn-list-item-remove-icon" });
      svgElement.innerHTML = svg;
      removeSpan.onClickEvent((e) => {
        this.removeValue(value);
        span.remove();
      });
    });
  }
  async addValue(value) {
    this.values.push(value);
    this.addElement(value);
    this.emit("add", value);
    this.emit("update", this.values);
  }
  addResetButton() {
    const resetButton = this.controlEl.createEl("span", { cls: "clickable-icon setting-restore-hotkey-button" });
    const svg = '<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-rotate-ccw"><path d="M3 2v6h6"></path><path d="M3 13a9 9 0 1 0 3-7.7L3 8"></path></svg>';
    resetButton.innerHTML = svg;
    resetButton.onClickEvent((e) => {
      this.setValues(this.defaultValues);
    });
    return this;
  }
  removeValue(value) {
    this.values = this.values.filter((v) => v !== value);
    this.listEl.find(`[extension='${value}']`).remove();
    this.emit("remove", value);
    this.emit("update", this.values);
  }
};

// src/modals/AddSupportedFileType.ts
var import_obsidian18 = require("obsidian");
var AddSupportedFileModal = class extends import_obsidian18.Modal {
  constructor(app2, plugin, settingsTab, list) {
    super(app2);
    this.plugin = plugin;
    this.app = app2;
    this.name = "";
    this.list = list;
    this.settingsTab = settingsTab;
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.addEventListener("keydown", (e) => {
      if (e.key === "Enter") {
        this.close();
      }
    });
    contentEl.createEl("h2", { text: "Extension name" });
    new import_obsidian18.Setting(contentEl).setName('Enter the name of the extension (only the short form, e.g. "md")').addText((text) => text.setValue("").onChange(async (value) => {
      if (value.trim() !== "") {
        this.name = value.trim();
      }
    }));
  }
  async onClose() {
    if (this.name.toLocaleLowerCase() === "markdown") {
      this.name = "md";
    }
    const { contentEl } = this;
    if (this.name === "") {
      contentEl.empty();
      this.settingsTab.display();
    } else if (this.plugin.settings.supportedFileTypes.includes(this.name.toLowerCase())) {
      return new import_obsidian18.Notice("This extension is already supported");
    } else {
      await this.list.addValue(this.name.toLowerCase());
      this.settingsTab.display();
      this.plugin.saveSettings();
      contentEl.empty();
    }
  }
};

// src/events/FrontMatterTitle.ts
var import_front_matter_plugin_api_provider = __toESM(require_lib());
var import_obsidian19 = require("obsidian");
var FrontMatterTitlePluginHandler = class {
  constructor(plugin) {
    this.api = null;
    this.deffer = null;
    this.modifiedFolders = /* @__PURE__ */ new Map();
    this.plugin = plugin;
    this.app = plugin.app;
    (async () => {
      var _a;
      this.deffer = (0, import_front_matter_plugin_api_provider.getDefer)(this.app);
      if (this.deffer.isPluginReady()) {
        this.api = this.deffer.getApi();
      } else {
        await this.deffer.awaitPlugin();
        this.api = this.deffer.getApi();
        if (!this.deffer.isFeaturesReady()) {
          await this.deffer.awaitFeatures();
        }
      }
      const dispatcher = (_a = this.api) == null ? void 0 : _a.getEventDispatcher();
      if (dispatcher) {
        this.dispatcher = dispatcher;
      }
      const event = {
        name: "manager:update",
        cb: (data) => {
          this.handleRename(data, true);
        }
      };
      const ref = dispatcher == null ? void 0 : dispatcher.addListener(event);
      if (ref) {
        this.eventRef = ref;
      }
      this.plugin.app.vault.getFiles().forEach((file) => {
        this.handleRename({ id: "", result: false, path: file.path }, false);
      });
      this.plugin.updateBreadcrumbs();
    })();
  }
  deleteEvent() {
    if (this.eventRef) {
      this.dispatcher.removeListener(this.eventRef);
    }
  }
  async handleRename(data, isEvent) {
    var _a, _b, _c;
    if (data.data)
      data = data.data;
    const file = this.app.vault.getAbstractFileByPath(data.path);
    if (!(file instanceof import_obsidian19.TFile)) {
      return;
    }
    const resolver = (_b = (_a = this.api) == null ? void 0 : _a.getResolverFactory()) == null ? void 0 : _b.createResolver("#feature-id#");
    const newName = resolver == null ? void 0 : resolver.resolve((_c = file == null ? void 0 : file.path) != null ? _c : "");
    const folder = getFolder2(this.plugin, file);
    if (!(folder instanceof import_obsidian19.TFolder)) {
      return;
    }
    const folderNote = getFolderNote(this.plugin, folder.path);
    if (!folderNote) {
      return;
    }
    if (folderNote !== file) {
      return;
    }
    if (isEvent) {
      this.plugin.changeName(folder, newName, true);
    } else {
      this.plugin.changeName(folder, newName, false);
    }
    if (newName) {
      folder.newName = newName;
      this.modifiedFolders.set(folder.path, folder);
    } else {
      folder.newName = null;
      this.modifiedFolders.delete(folder.path);
    }
  }
};

// src/modals/ConfirmCreation.ts
var import_obsidian20 = require("obsidian");
var ConfirmationModal = class extends import_obsidian20.Modal {
  constructor(app2, plugin) {
    super(app2);
    this.plugin = plugin;
    this.app = app2;
    this.extension = plugin.settings.folderNoteType;
  }
  onOpen() {
    var _a, _b, _c;
    this.modalEl.addClass("fn-confirmation-modal");
    let templateFolderPath;
    const { templateFolder, templaterPlugin } = getTemplatePlugins(this.plugin.app);
    if ((!templateFolder || (templateFolder == null ? void 0 : templateFolder.trim()) === "") && !templaterPlugin) {
      templateFolderPath = "";
    }
    if (templaterPlugin) {
      templateFolderPath = (_b = (_a = templaterPlugin.plugin) == null ? void 0 : _a.settings) == null ? void 0 : _b.templates_folder;
    } else {
      templateFolderPath = templateFolder;
    }
    const { contentEl } = this;
    contentEl.createEl("h2", { text: "Create folder note for every folder" });
    const setting = new import_obsidian20.Setting(contentEl);
    setting.infoEl.createEl("p", { text: "Make sure to backup your vault before using this feature." }).style.color = "#fb464c";
    setting.infoEl.createEl("p", { text: "This feature will create a folder note for every folder in your vault." });
    setting.infoEl.createEl("p", { text: "Every folder that already has a folder note will be ignored." });
    setting.infoEl.createEl("p", { text: "Every excluded folder will be ignored." });
    if (!this.plugin.settings.templatePath || ((_c = this.plugin.settings.templatePath) == null ? void 0 : _c.trim()) === "") {
      new import_obsidian20.Setting(contentEl).setName("Folder note file extension").setDesc("Choose the file extension for the folder notes.").addDropdown((cb) => {
        this.plugin.settings.supportedFileTypes.forEach((extension) => {
          cb.addOption("." + extension, extension);
        });
        cb.setValue(this.extension);
        cb.onChange(async (value) => {
          this.extension = value;
        });
      });
    }
    new import_obsidian20.Setting(contentEl).addButton((cb) => {
      cb.setButtonText("Create");
      cb.setCta();
      cb.buttonEl.focus();
      cb.onClick(async () => {
        if (this.plugin.settings.templatePath && this.plugin.settings.templatePath.trim() !== "") {
          this.extension = "." + this.plugin.settings.templatePath.split(".").pop();
        }
        if (this.extension === ".ask") {
          return new import_obsidian20.Notice("Please choose a file extension");
        }
        this.close();
        const folders = this.app.vault.getAllLoadedFiles().filter((file) => file.parent instanceof import_obsidian20.TFolder);
        for (const folder of folders) {
          if (folder instanceof import_obsidian20.TFolder) {
            const excludedFolder = await getExcludedFolder(this.plugin, folder.path, true);
            if (excludedFolder)
              continue;
            if (folder.path === templateFolderPath)
              continue;
            const folderNote = getFolderNote(this.plugin, folder.path);
            if (folderNote)
              continue;
            await createFolderNote(this.plugin, folder.path, false, this.extension);
          }
        }
      });
    }).addButton((cb) => {
      cb.setButtonText("Cancel");
      cb.onClick(async () => {
        this.close();
      });
    });
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
  }
};

// src/suggesters/TemplateSuggester.ts
var import_obsidian21 = require("obsidian");
var TemplateSuggest = class extends TextInputSuggest2 {
  constructor(inputEl, plugin) {
    super(inputEl, plugin);
    this.inputEl = inputEl;
  }
  get_error_msg(mode) {
    switch (mode) {
      case 0 /* TemplateFiles */:
        return "Templates folder doesn't exist";
      case 1 /* ScriptFiles */:
        return "User Scripts folder doesn't exist";
    }
  }
  getSuggestions(input_str) {
    var _a, _b;
    const { templateFolder, templaterPlugin } = getTemplatePlugins(this.plugin.app);
    if ((!templateFolder || (templateFolder == null ? void 0 : templateFolder.trim()) === "") && !templaterPlugin) {
      this.plugin.settings.templatePath = "";
      this.plugin.saveSettings();
      return [];
    }
    let folder;
    if (templaterPlugin) {
      folder = this.plugin.app.vault.getAbstractFileByPath((_b = (_a = templaterPlugin.plugin) == null ? void 0 : _a.settings) == null ? void 0 : _b.templates_folder);
    } else {
      folder = this.plugin.app.vault.getAbstractFileByPath(templateFolder);
    }
    const files = [];
    const lower_input_str = input_str.toLowerCase();
    import_obsidian21.Vault.recurseChildren(folder, (file) => {
      if (file instanceof import_obsidian21.TFile && file.path.toLowerCase().contains(lower_input_str)) {
        files.push(file);
      }
    });
    return files;
  }
  renderSuggestion(file, el) {
    el.setText(file.name.replace(".md", ""));
  }
  selectSuggestion(file) {
    this.inputEl.value = file.name.replace(".md", "");
    this.inputEl.trigger("input");
    this.plugin.settings.templatePath = file.path;
    this.plugin.saveSettings();
    this.close();
  }
};

// src/settings/GeneralSettings.ts
async function renderGeneral(settingsTab) {
  const containerEl = settingsTab.settingsPage;
  const nameSetting = new import_obsidian22.Setting(containerEl).setName("Folder note name").setDesc("{{folder_name}} will be replaced with the name of the folder").addText((text) => text.setValue(settingsTab.plugin.settings.newFolderNoteName).onChange(async (value) => {
    if (value.trim() === "") {
      return;
    }
    settingsTab.plugin.settings.newFolderNoteName = value;
    await settingsTab.plugin.saveSettings();
  })).addButton((button) => button.setButtonText("Rename existing folder notes").setCta().onClick(async () => {
    settingsTab.updateFolderNotes(settingsTab.plugin.settings.newFolderNoteName);
    settingsTab.display();
  }));
  nameSetting.infoEl.appendText("Requires a restart to take effect");
  nameSetting.infoEl.style.color = settingsTab.app.vault.getConfig("accentColor") || "#7d5bed";
  if (settingsTab.plugin.settings.newFolderNoteName !== "{{folder_name}}") {
    new import_obsidian22.Setting(containerEl).setName("Use folder name instead of folder note name in the tab title").setDesc(`When you're using a folder note name like "folder note" and have multiple folder notes open you can't separate them anymore by their name. This setting uses the folder name instead and allows you to indentify the different files.`).addToggle((toggle) => toggle.setValue(settingsTab.plugin.settings.tabManagerEnabled).onChange(async (value) => {
      if (!value) {
        settingsTab.plugin.tabManager.resetTabs();
      } else {
        settingsTab.plugin.settings.tabManagerEnabled = value;
        settingsTab.plugin.tabManager.updateTabs();
      }
      settingsTab.plugin.settings.tabManagerEnabled = value;
      await settingsTab.plugin.saveSettings();
      settingsTab.display();
    }));
  }
  new import_obsidian22.Setting(containerEl).setName("Default folder note type for new folder notes").setDesc("Choose the default file type for new folder notes. (canvas, markdown, ...)").addDropdown((dropdown) => {
    dropdown.addOption(".ask", "ask for file type");
    settingsTab.plugin.settings.supportedFileTypes.forEach((type) => {
      if (type === ".md" || type === "md") {
        dropdown.addOption(".md", "markdown");
      } else {
        dropdown.addOption("." + type, type);
      }
    });
    if (!settingsTab.plugin.settings.supportedFileTypes.includes(settingsTab.plugin.settings.folderNoteType.replace(".", "")) && settingsTab.plugin.settings.folderNoteType !== ".ask") {
      settingsTab.plugin.settings.folderNoteType = ".md";
      settingsTab.plugin.saveSettings();
    }
    const defaultType = settingsTab.plugin.settings.folderNoteType.startsWith(".") ? settingsTab.plugin.settings.folderNoteType : "." + settingsTab.plugin.settings.folderNoteType;
    dropdown.setValue(defaultType).onChange(async (value) => {
      settingsTab.plugin.settings.folderNoteType = value;
      settingsTab.plugin.saveSettings();
      settingsTab.display();
    });
  });
  const setting0 = new import_obsidian22.Setting(containerEl);
  setting0.setName("Supported file types for folder notes");
  const desc0 = document.createDocumentFragment();
  desc0.append("Choose the file types that should be supported for folder notes. (e.g. if you click on a folder name it searches for all file extensions that are supported)", desc0.createEl("br"), "Adding more file types may cause performance issues becareful when adding more file types and don't add too many.");
  setting0.setDesc(desc0);
  const list = new ListComponent(setting0.settingEl, settingsTab.plugin.settings.supportedFileTypes || [], ["md", "canvas"]);
  list.on("update", async (values) => {
    settingsTab.plugin.settings.supportedFileTypes = values;
    await settingsTab.plugin.saveSettings();
  });
  if (!settingsTab.plugin.settings.supportedFileTypes.includes("md") || !settingsTab.plugin.settings.supportedFileTypes.includes("canvas") || !settingsTab.plugin.settings.supportedFileTypes.includes("excalidraw")) {
    setting0.addDropdown((dropdown) => {
      const options = [
        { value: "md", label: "Markdown" },
        { value: "canvas", label: "Canvas" },
        { value: "excalidraw", label: "excalidraw" },
        { value: "custom", label: "Custom extension" }
      ];
      options.forEach((option) => {
        var _a;
        if (!((_a = settingsTab.plugin.settings.supportedFileTypes) == null ? void 0 : _a.includes(option.value))) {
          dropdown.addOption(option.value, option.label);
        }
      });
      dropdown.addOption("+", "+");
      dropdown.setValue("+");
      dropdown.onChange(async (value) => {
        if (value === "custom") {
          return new AddSupportedFileModal(settingsTab.app, settingsTab.plugin, settingsTab, list).open();
        }
        await list.addValue(value.toLowerCase());
        settingsTab.display();
        settingsTab.plugin.saveSettings();
      });
    });
  } else {
    setting0.addButton((button) => button.setButtonText("Add custom file type").setCta().onClick(async () => {
      new AddSupportedFileModal(settingsTab.app, settingsTab.plugin, settingsTab, list).open();
    }));
  }
  const setting = new import_obsidian22.Setting(containerEl);
  const desc = document.createDocumentFragment();
  desc.append("Restart after changing the template path");
  setting.setName("Template path");
  setting.setDesc(desc).descEl.style.color = settingsTab.app.vault.getConfig("accentColor") || "#7d5bed";
  setting.addSearch((cb) => {
    var _a;
    new TemplateSuggest(cb.inputEl, settingsTab.plugin);
    cb.setPlaceholder("Template path");
    cb.setValue(((_a = settingsTab.plugin.app.vault.getAbstractFileByPath(settingsTab.plugin.settings.templatePath)) == null ? void 0 : _a.name.replace(".md", "")) || "");
    cb.onChange(async (value) => {
      if (value.trim() === "") {
        settingsTab.plugin.settings.templatePath = "";
        await settingsTab.plugin.saveSettings();
        settingsTab.display();
        return;
      }
    });
  });
  const storageLocation = new import_obsidian22.Setting(containerEl).setName("Storage location").setDesc("Choose where to store the folder notes").addDropdown((dropdown) => dropdown.addOption("insideFolder", "Inside the folder").addOption("parentFolder", "In the parent folder").setValue(settingsTab.plugin.settings.storageLocation).onChange(async (value) => {
    settingsTab.plugin.settings.storageLocation = value;
    await settingsTab.plugin.saveSettings();
    settingsTab.display();
    loadFileClasses(void 0, settingsTab.plugin);
  }));
  storageLocation.infoEl.appendText("Requires a restart to take effect");
  storageLocation.infoEl.style.color = settingsTab.app.vault.getConfig("accentColor") || "#7d5bed";
  const switchLocation = new import_obsidian22.Setting(containerEl).setName("Switch to new storage location").setDesc("Move all folder notes to the new storage location").addButton((button) => button.setButtonText("Switch").setCta().onClick(async () => {
    let oldStorageLocation = settingsTab.plugin.settings.storageLocation;
    if (settingsTab.plugin.settings.storageLocation === "parentFolder") {
      oldStorageLocation = "insideFolder";
    } else if (settingsTab.plugin.settings.storageLocation === "insideFolder") {
      oldStorageLocation = "parentFolder";
    }
    settingsTab.switchStorageLocation(oldStorageLocation);
  }));
  switchLocation.infoEl.appendText("Requires a restart to take effect");
  switchLocation.infoEl.style.color = settingsTab.app.vault.getConfig("accentColor") || "#7d5bed";
  if (settingsTab.plugin.settings.storageLocation === "parentFolder") {
    new import_obsidian22.Setting(containerEl).setName("Delete folder notes when deleting the folder").setDesc("Delete the folder note when deleting the folder").addToggle((toggle) => toggle.setValue(settingsTab.plugin.settings.syncDelete).onChange(async (value) => {
      settingsTab.plugin.settings.syncDelete = value;
      await settingsTab.plugin.saveSettings();
    }));
    new import_obsidian22.Setting(containerEl).setName("Move folder notes when moving the folder").setDesc("Move the folder note when moving the folder").addToggle((toggle) => toggle.setValue(settingsTab.plugin.settings.syncMove).onChange(async (value) => {
      settingsTab.plugin.settings.syncMove = value;
      await settingsTab.plugin.saveSettings();
    }));
  }
  if (import_obsidian22.Platform.isDesktopApp) {
    new import_obsidian22.Setting(containerEl).setName("Key for creating folder note").setDesc("The key combination to create a folder note").addDropdown((dropdown) => {
      if (!import_obsidian22.Platform.isMacOS) {
        dropdown.addOption("ctrl", "Ctrl + Click");
      } else {
        dropdown.addOption("ctrl", "Cmd + Click");
      }
      dropdown.addOption("alt", "Alt + Click");
      dropdown.setValue(settingsTab.plugin.settings.ctrlKey ? "ctrl" : "alt");
      dropdown.onChange(async (value) => {
        settingsTab.plugin.settings.ctrlKey = value === "ctrl";
        settingsTab.plugin.settings.altKey = value === "alt";
        await settingsTab.plugin.saveSettings();
        settingsTab.display();
      });
    });
    new import_obsidian22.Setting(containerEl).setName("Key for opening folder note").setDesc("Select the combination to open a folder note").addDropdown((dropdown) => {
      dropdown.addOption("click", "Mouse Click");
      if (!import_obsidian22.Platform.isMacOS) {
        dropdown.addOption("ctrl", "Ctrl + Click");
      } else {
        dropdown.addOption("ctrl", "Cmd + Click");
      }
      dropdown.addOption("alt", "Alt + Click");
      if (settingsTab.plugin.settings.openByClick) {
        dropdown.setValue("click");
      } else if (settingsTab.plugin.settings.openWithCtrl) {
        dropdown.setValue("ctrl");
      } else {
        dropdown.setValue("alt");
      }
      dropdown.onChange(async (value) => {
        settingsTab.plugin.settings.openByClick = value === "click";
        settingsTab.plugin.settings.openWithCtrl = value === "ctrl";
        settingsTab.plugin.settings.openWithAlt = value === "alt";
        await settingsTab.plugin.saveSettings();
        settingsTab.display();
      });
    });
  }
  new import_obsidian22.Setting(containerEl).setName("Sync folder name").setDesc("Automatically rename the folder note when the folder name is changed").addToggle((toggle) => toggle.setValue(settingsTab.plugin.settings.syncFolderName).onChange(async (value) => {
    settingsTab.plugin.settings.syncFolderName = value;
    await settingsTab.plugin.saveSettings();
    settingsTab.display();
  }));
  new import_obsidian22.Setting(containerEl).setName("Confirm folder note deletion").setDesc("Ask for confirmation before deleting a folder note").addToggle((toggle) => toggle.setValue(settingsTab.plugin.settings.showDeleteConfirmation).onChange(async (value) => {
    settingsTab.plugin.settings.showDeleteConfirmation = value;
    await settingsTab.plugin.saveSettings();
    settingsTab.display();
  }));
  new import_obsidian22.Setting(containerEl).setName("Deleted folder notes").setDesc("What happens to the folder note after you delete it").addDropdown((dropdown) => {
    dropdown.addOption("trash", "Move to system trash");
    dropdown.addOption("obsidianTrash", "Move to Obsidian trash (.trash folder)");
    dropdown.addOption("delete", "Delete permanently");
    dropdown.setValue(settingsTab.plugin.settings.deleteFilesAction);
    dropdown.onChange(async (value) => {
      settingsTab.plugin.settings.deleteFilesAction = value;
      await settingsTab.plugin.saveSettings();
      settingsTab.display();
    });
  });
  if (import_obsidian22.Platform.isDesktop) {
    const setting3 = new import_obsidian22.Setting(containerEl);
    setting3.setName("Open folder note in a new tab by default");
    setting3.setDesc("Always open folder notes in a new tab (except when you try to open the same note) instead of having to use ctrl/cmd + click to open in a new tab");
    setting3.addToggle((toggle) => toggle.setValue(settingsTab.plugin.settings.openInNewTab).onChange(async (value) => {
      settingsTab.plugin.settings.openInNewTab = value;
      await settingsTab.plugin.saveSettings();
      settingsTab.display();
    }));
    setting3.infoEl.appendText("Requires a restart to take effect");
    setting3.infoEl.style.color = settingsTab.app.vault.getConfig("accentColor") || "#7d5bed";
  }
  new import_obsidian22.Setting(containerEl).setName("Enable front matter title plugin integration").setDesc("Automatically rename a folder name when the folder note is renamed").addToggle((toggle) => toggle.setValue(settingsTab.plugin.settings.frontMatterTitle.enabled).onChange(async (value) => {
    var _a;
    settingsTab.plugin.settings.frontMatterTitle.enabled = value;
    await settingsTab.plugin.saveSettings();
    if (value) {
      settingsTab.plugin.fmtpHandler = new FrontMatterTitlePluginHandler(settingsTab.plugin);
    } else {
      if (settingsTab.plugin.fmtpHandler) {
        settingsTab.plugin.updateBreadcrumbs(true);
      }
      settingsTab.plugin.app.vault.getFiles().forEach((file) => {
        var _a2;
        (_a2 = settingsTab.plugin.fmtpHandler) == null ? void 0 : _a2.handleRename({ id: "", result: false, path: file.path }, false);
      });
      (_a = settingsTab.plugin.fmtpHandler) == null ? void 0 : _a.deleteEvent();
      settingsTab.plugin.fmtpHandler = null;
    }
    settingsTab.display();
  }));
  new import_obsidian22.Setting(containerEl).setName("Create folder note for every folder").setDesc("Create a folder note for every folder in the vault").addButton((cb) => {
    cb.setIcon("plus");
    cb.setTooltip("Create folder notes");
    cb.onClick(async () => {
      new ConfirmationModal(settingsTab.app, settingsTab.plugin).open();
    });
  });
  new import_obsidian22.Setting(containerEl).setName("Automatically create folder notes").setDesc("Automatically create a folder note when a new folder is created").addToggle((toggle) => toggle.setValue(settingsTab.plugin.settings.autoCreate).onChange(async (value) => {
    settingsTab.plugin.settings.autoCreate = value;
    await settingsTab.plugin.saveSettings();
    settingsTab.display();
  }));
  if (settingsTab.plugin.settings.autoCreate) {
    new import_obsidian22.Setting(containerEl).setName("Open folder note after creating").setDesc("Automatically open the folder note after automatically creating it").addToggle((toggle) => toggle.setValue(settingsTab.plugin.settings.autoCreateFocusFiles).onChange(async (value) => {
      settingsTab.plugin.settings.autoCreateFocusFiles = value;
      await settingsTab.plugin.saveSettings();
      settingsTab.display();
    }));
    new import_obsidian22.Setting(containerEl).setName("Auto create folder note for attachment folder").setDesc("Automatically create a folder note for the attachment folder when you attach a file to a note and the attachment folder gets created").addToggle((toggle) => toggle.setValue(settingsTab.plugin.settings.autoCreateForAttachmentFolder).onChange(async (value) => {
      settingsTab.plugin.settings.autoCreateForAttachmentFolder = value;
      await settingsTab.plugin.saveSettings();
      settingsTab.display();
    }));
  }
}

// src/settings/FileExplorerSettings.ts
var import_obsidian23 = require("obsidian");
async function renderFileExplorer(settingsTab) {
  const containerEl = settingsTab.settingsPage;
  new import_obsidian23.Setting(containerEl).setName("Hide folder note").setDesc("Hide the folder note in the file explorer").addToggle((toggle) => toggle.setValue(settingsTab.plugin.settings.hideFolderNote).onChange(async (value) => {
    settingsTab.plugin.settings.hideFolderNote = value;
    await settingsTab.plugin.saveSettings();
    if (value) {
      document.body.classList.add("hide-folder-note");
    } else {
      document.body.classList.remove("hide-folder-note");
    }
    settingsTab.display();
  }));
  const setting2 = new import_obsidian23.Setting(containerEl).setName("Don't open folder notes by clicking on the name (on mobile)").setDesc("Folder notes don't open when clicking on the name of the folder (on mobile)").addToggle((toggle) => toggle.setValue(settingsTab.plugin.settings.disableOpenFolderNoteOnClick).onChange(async (value) => {
    settingsTab.plugin.settings.disableOpenFolderNoteOnClick = value;
    await settingsTab.plugin.saveSettings();
  }));
  setting2.infoEl.appendText("Requires a restart to take effect");
  setting2.infoEl.style.color = settingsTab.app.vault.getConfig("accentColor") || "#7d5bed";
  new import_obsidian23.Setting(containerEl).setName("Only open folder notes through the name").setDesc("Only open folder notes in the file explorer by clicking on the folder name").addToggle((toggle) => toggle.setValue(!settingsTab.plugin.settings.stopWhitespaceCollapsing).onChange(async (value) => {
    if (!value) {
      document.body.classList.add("fn-whitespace-stop-collapsing");
    } else {
      document.body.classList.remove("fn-whitespace-stop-collapsing");
    }
    settingsTab.plugin.settings.stopWhitespaceCollapsing = !value;
    await settingsTab.plugin.saveSettings();
  }));
  const disableSetting = new import_obsidian23.Setting(containerEl);
  disableSetting.setName("Disable folder collapsing");
  disableSetting.setDesc("Disable the ability to collapse folders by clicking exactly on the folder name");
  disableSetting.addToggle((toggle) => toggle.setValue(!settingsTab.plugin.settings.enableCollapsing).onChange(async (value) => {
    settingsTab.plugin.settings.enableCollapsing = !value;
    await settingsTab.plugin.saveSettings();
  }));
  disableSetting.infoEl.appendText("Requires a restart to take effect");
  disableSetting.infoEl.style.color = settingsTab.app.vault.getConfig("accentColor") || "#7d5bed";
  new import_obsidian23.Setting(containerEl).setName("Use submenus").setDesc("Use submenus for file/folder commands").addToggle((toggle) => toggle.setValue(settingsTab.plugin.settings.useSubmenus).onChange(async (value) => {
    settingsTab.plugin.settings.useSubmenus = value;
    await settingsTab.plugin.saveSettings();
    settingsTab.display();
  }));
  if (settingsTab.plugin.settings.frontMatterTitle.enabled) {
    new import_obsidian23.Setting(containerEl).setName("Change folder name in the file explorer").setDesc("Automatically rename a folder name in the file explorer when the folder note is renamed").addToggle((toggle) => toggle.setValue(settingsTab.plugin.settings.frontMatterTitle.explorer).onChange(async (value) => {
      settingsTab.plugin.settings.frontMatterTitle.explorer = value;
      await settingsTab.plugin.saveSettings();
      settingsTab.plugin.app.vault.getFiles().forEach((file) => {
        var _a;
        (_a = settingsTab.plugin.fmtpHandler) == null ? void 0 : _a.handleRename({ id: "", result: false, path: file.path }, false);
      });
    }));
  }
  settingsTab.settingsPage.createEl("h3", { text: "Style settings" });
  new import_obsidian23.Setting(containerEl).setName("Highlight folder in the file explorer").setDesc("Highlight the folder name in the file explorer when you click on a folder that has a folder note").addToggle((toggle) => toggle.setValue(settingsTab.plugin.settings.highlightFolder).onChange(async (value) => {
    settingsTab.plugin.settings.highlightFolder = value;
    if (!value) {
      document.body.classList.add("disable-folder-highlight");
    } else {
      document.body.classList.remove("disable-folder-highlight");
    }
    await settingsTab.plugin.saveSettings();
  }));
  new import_obsidian23.Setting(containerEl).setName("Hide collapse icon").setDesc("Hide the collapse icon in the file explorer next to the name of a folder when a folder only contains a folder note").addToggle((toggle) => toggle.setValue(settingsTab.plugin.settings.hideCollapsingIcon).onChange(async (value) => {
    settingsTab.plugin.settings.hideCollapsingIcon = value;
    await settingsTab.plugin.saveSettings();
    if (value) {
      document.body.classList.add("fn-hide-collapse-icon");
    } else {
      document.body.classList.remove("fn-hide-collapse-icon");
    }
    settingsTab.display();
  }));
  new import_obsidian23.Setting(containerEl).setName("Hide collapse icon for every empty folder").setDesc("Hide the collapse icon in the file explorer next to the name of a folder when a folder is empty").addToggle((toggle) => toggle.setValue(settingsTab.plugin.settings.hideCollapsingIconForEmptyFolders).onChange(async (value) => {
    settingsTab.plugin.settings.hideCollapsingIconForEmptyFolders = value;
    await settingsTab.plugin.saveSettings();
    if (value) {
      document.body.classList.add("fn-hide-empty-collapse-icon");
    } else {
      document.body.classList.remove("fn-hide-empty-collapse-icon");
    }
    settingsTab.display();
  }));
  if (settingsTab.plugin.settings.hideCollapsingIcon) {
    new import_obsidian23.Setting(containerEl).setName("Hide collapse icon also when the attachment folder is in the same folder").addToggle((toggle) => toggle.setValue(settingsTab.plugin.settings.ignoreAttachmentFolder).onChange(async (value) => {
      settingsTab.plugin.settings.ignoreAttachmentFolder = value;
      await settingsTab.plugin.saveSettings();
    }));
  }
  new import_obsidian23.Setting(containerEl).setName("Underline the name of folder notes").setDesc("Add an underline to folders that have a folder note in the file explorer").addToggle((toggle) => toggle.setValue(settingsTab.plugin.settings.underlineFolder).onChange(async (value) => {
    settingsTab.plugin.settings.underlineFolder = value;
    if (value) {
      document.body.classList.add("folder-note-underline");
    } else {
      document.body.classList.remove("folder-note-underline");
    }
    await settingsTab.plugin.saveSettings();
  }));
  new import_obsidian23.Setting(containerEl).setName("Bold the name of folder notes").setDesc("Make the folder name bold in the file explorer").addToggle((toggle) => toggle.setValue(settingsTab.plugin.settings.boldName).onChange(async (value) => {
    settingsTab.plugin.settings.boldName = value;
    if (value) {
      document.body.classList.add("folder-note-bold");
    } else {
      document.body.classList.remove("folder-note-bold");
    }
    await settingsTab.plugin.saveSettings();
  }));
  new import_obsidian23.Setting(containerEl).setName("Cursive the name of folder notes").setDesc("Make the folder name cursive in the file explorer").addToggle((toggle) => toggle.setValue(settingsTab.plugin.settings.cursiveName).onChange(async (value) => {
    settingsTab.plugin.settings.cursiveName = value;
    if (value) {
      document.body.classList.add("folder-note-cursive");
    } else {
      document.body.classList.remove("folder-note-cursive");
    }
    await settingsTab.plugin.saveSettings();
  }));
}

// src/settings/PathSettings.ts
var import_obsidian24 = require("obsidian");
async function renderPath(settingsTab) {
  const containerEl = settingsTab.settingsPage;
  new import_obsidian24.Setting(containerEl).setName("Open folder note through path").setDesc("Open a folder note when clicking on a folder name in the path if it is a folder note").addToggle((toggle) => toggle.setValue(settingsTab.plugin.settings.openFolderNoteOnClickInPath).onChange(async (value) => {
    settingsTab.plugin.settings.openFolderNoteOnClickInPath = value;
    await settingsTab.plugin.saveSettings();
    settingsTab.display();
  }));
  new import_obsidian24.Setting(containerEl).setName("Open sidebar when opening a folder note through path (Mobile only)").setDesc("Open the sidebar when opening a folder note through the path on mobile").addToggle((toggle) => toggle.setValue(settingsTab.plugin.settings.openSidebar.mobile).onChange(async (value) => {
    settingsTab.plugin.settings.openSidebar.mobile = value;
    await settingsTab.plugin.saveSettings();
  }));
  new import_obsidian24.Setting(containerEl).setName("Open sidebar when opening a folder note through path (Desktop only)").setDesc("Open the sidebar when opening a folder note through the path on desktop").addToggle((toggle) => toggle.setValue(settingsTab.plugin.settings.openSidebar.desktop).onChange(async (value) => {
    settingsTab.plugin.settings.openSidebar.desktop = value;
    await settingsTab.plugin.saveSettings();
  }));
  new import_obsidian24.Setting(containerEl).setName("Change folder name in the path").setDesc("Automatically rename a folder name in the path above a note when the folder note is renamed").addToggle((toggle) => toggle.setValue(settingsTab.plugin.settings.frontMatterTitle.path).onChange(async (value) => {
    settingsTab.plugin.settings.frontMatterTitle.path = value;
    await settingsTab.plugin.saveSettings();
    if (value) {
      settingsTab.plugin.updateBreadcrumbs();
    } else {
      settingsTab.plugin.updateBreadcrumbs(true);
    }
  }));
  settingsTab.settingsPage.createEl("h3", { text: "Style settings" });
  new import_obsidian24.Setting(containerEl).setName("Underline folders in the path").setDesc("Add an underline to folders that have a folder note in the path above a note").addToggle((toggle) => toggle.setValue(settingsTab.plugin.settings.underlineFolderInPath).onChange(async (value) => {
    settingsTab.plugin.settings.underlineFolderInPath = value;
    if (value) {
      document.body.classList.add("folder-note-underline-path");
    } else {
      document.body.classList.remove("folder-note-underline-path");
    }
    await settingsTab.plugin.saveSettings();
  }));
  new import_obsidian24.Setting(containerEl).setName("Bold folders in the path").setDesc("Make the folder name bold in the path above a note").addToggle((toggle) => toggle.setValue(settingsTab.plugin.settings.boldNameInPath).onChange(async (value) => {
    settingsTab.plugin.settings.boldNameInPath = value;
    if (value) {
      document.body.classList.add("folder-note-bold-path");
    } else {
      document.body.classList.remove("folder-note-bold-path");
    }
    await settingsTab.plugin.saveSettings();
  }));
  new import_obsidian24.Setting(containerEl).setName("Cursive the name of folder notes in the path").setDesc("Make the folder name cursive in the path above a note").addToggle((toggle) => toggle.setValue(settingsTab.plugin.settings.cursiveNameInPath).onChange(async (value) => {
    settingsTab.plugin.settings.cursiveNameInPath = value;
    if (value) {
      document.body.classList.add("folder-note-cursive-path");
    } else {
      document.body.classList.remove("folder-note-cursive-path");
    }
    await settingsTab.plugin.saveSettings();
  }));
}

// src/settings/FolderOverviewSettings.ts
async function renderFolderOverview(settingsTab) {
  const { plugin } = settingsTab;
  let overviewSettings4 = plugin.settings.defaultOverview;
  const containerEl = settingsTab.settingsPage;
  containerEl.createEl("p", { text: "Change the default settings for folder overviews", cls: "setting-item-description" });
  createOverviewSettings(containerEl, overviewSettings4, plugin, plugin.settings.defaultOverview, settingsTab.display, void 0, void 0, void 0, settingsTab);
}

// src/settings/ExcludedFoldersSettings.ts
var import_obsidian26 = require("obsidian");

// src/ExcludeFolders/modals/WhitelistedFoldersSettings.ts
var import_obsidian25 = require("obsidian");

// src/ExcludeFolders/WhitelistFolder.ts
var WhitelistedFolder = class {
  constructor(path, position, id, plugin) {
    this.type = "folder";
    this.id = id || crypto.randomUUID();
    this.path = path;
    this.subFolders = plugin.settings.excludeFolderDefaultSettings.subFolders;
    this.position = position;
    this.string = "";
  }
};

// src/ExcludeFolders/modals/WhitelistedFoldersSettings.ts
var WhitelistedFoldersSettings = class extends import_obsidian25.Modal {
  constructor(settingsTab) {
    super(settingsTab.app);
    this.plugin = settingsTab.plugin;
    this.settingsTab = settingsTab;
    this.app = settingsTab.app;
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.createEl("h2", { text: "Manage whitelisted folders" });
    new import_obsidian25.Setting(contentEl).setName("Add whitelisted folder").setClass("add-exclude-folder-item").addButton((cb) => {
      cb.setIcon("plus");
      cb.setClass("add-exclude-folder");
      cb.setTooltip("Add whitelisted folder");
      cb.onClick(() => {
        const whitelistedFolder = new WhitelistedFolder("", this.plugin.settings.whitelistFolders.length, void 0, this.plugin);
        addWhitelistFolderListItem(this.plugin.settingsTab, contentEl, whitelistedFolder);
        addWhitelistedFolder(this.plugin, whitelistedFolder);
        this.settingsTab.display();
      });
    });
    this.plugin.settings.whitelistFolders.sort((a, b) => a.position - b.position).forEach((whitelistedFolder) => {
      var _a, _b;
      if (((_a = whitelistedFolder.string) == null ? void 0 : _a.trim()) !== "" && ((_b = whitelistedFolder.path) == null ? void 0 : _b.trim()) === "") {
        addWhitelistedPatternListItem(this.settingsTab, contentEl, whitelistedFolder);
      } else {
        addWhitelistFolderListItem(this.settingsTab, contentEl, whitelistedFolder);
      }
    });
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
  }
};

// src/settings/ExcludedFoldersSettings.ts
async function renderExcludeFolders(settingsTab) {
  const containerEl = settingsTab.settingsPage;
  const manageExcluded = new import_obsidian26.Setting(containerEl).setHeading().setClass("fn-excluded-folder-heading").setName("Manage excluded folders");
  const desc3 = document.createDocumentFragment();
  desc3.append("Add {regex} at the beginning of the folder name to use a regex pattern.", desc3.createEl("br"), "Use * before and after to exclude folders that include the name between the *s.", desc3.createEl("br"), "Use * before the folder name to exclude folders that end with the folder name.", desc3.createEl("br"), "Use * after the folder name to exclude folders that start with the folder name.");
  manageExcluded.setDesc(desc3);
  manageExcluded.infoEl.appendText("The regexes and wildcards are only for the folder name, not the path.");
  manageExcluded.infoEl.createEl("br");
  manageExcluded.infoEl.appendText("If you want to switch to a folder path delete the pattern first.");
  manageExcluded.infoEl.style.color = settingsTab.app.vault.getConfig("accentColor") || "#7d5bed";
  new import_obsidian26.Setting(containerEl).setName("Whitelisted folders").setDesc("Folders that override the excluded folders/patterns").addButton((cb) => {
    cb.setButtonText("Manage");
    cb.setCta();
    cb.onClick(async () => {
      new WhitelistedFoldersSettings(settingsTab).open();
    });
  });
  new import_obsidian26.Setting(containerEl).setName("Exclude folder default settings").addButton((cb) => {
    cb.setButtonText("Manage");
    cb.setCta();
    cb.onClick(async () => {
      new ExcludedFolderSettings(settingsTab.app, settingsTab.plugin, settingsTab.plugin.settings.excludeFolderDefaultSettings).open();
    });
  });
  new import_obsidian26.Setting(containerEl).setName("Exclude pattern default settings").addButton((cb) => {
    cb.setButtonText("Manage");
    cb.setCta();
    cb.onClick(async () => {
      new PatternSettings(settingsTab.app, settingsTab.plugin, settingsTab.plugin.settings.excludePatternDefaultSettings).open();
    });
  });
  new import_obsidian26.Setting(containerEl).setName("Add excluded folder").setClass("add-exclude-folder-item").addButton((cb) => {
    cb.setIcon("plus");
    cb.setClass("add-exclude-folder");
    cb.setTooltip("Add excluded folder");
    cb.onClick(() => {
      const excludedFolder = new ExcludedFolder("", settingsTab.plugin.settings.excludeFolders.length, void 0, settingsTab.plugin);
      addExcludeFolderListItem(settingsTab, containerEl, excludedFolder);
      addExcludedFolder(settingsTab.plugin, excludedFolder);
      settingsTab.display();
    });
  });
  settingsTab.plugin.settings.excludeFolders.filter((folder) => !folder.hideInSettings).sort((a, b) => a.position - b.position).forEach((excludedFolder) => {
    var _a, _b;
    if (((_a = excludedFolder.string) == null ? void 0 : _a.trim()) !== "" && ((_b = excludedFolder.path) == null ? void 0 : _b.trim()) === "") {
      addExcludePatternListItem(settingsTab, containerEl, excludedFolder);
    } else {
      addExcludeFolderListItem(settingsTab, containerEl, excludedFolder);
    }
  });
}

// src/settings/SettingsTab.ts
var DEFAULT_SETTINGS = {
  syncFolderName: true,
  ctrlKey: true,
  altKey: false,
  hideFolderNote: true,
  templatePath: "",
  autoCreate: false,
  autoCreateFocusFiles: true,
  autoCreateForAttachmentFolder: false,
  enableCollapsing: false,
  excludeFolders: [],
  whitelistFolders: [],
  showDeleteConfirmation: true,
  underlineFolder: true,
  stopWhitespaceCollapsing: true,
  underlineFolderInPath: true,
  openFolderNoteOnClickInPath: true,
  openInNewTab: false,
  folderNoteName: "{{folder_name}}",
  folderNoteType: ".md",
  disableFolderHighlighting: false,
  newFolderNoteName: "{{folder_name}}",
  storageLocation: "insideFolder",
  syncDelete: false,
  showRenameConfirmation: true,
  defaultOverview: {
    id: "",
    folderPath: "",
    title: "{{folderName}} overview",
    showTitle: false,
    depth: 3,
    includeTypes: ["folder", "markdown"],
    style: "list",
    disableFileTag: false,
    sortBy: "name",
    sortByAsc: true,
    showEmptyFolders: false,
    onlyIncludeSubfolders: false,
    storeFolderCondition: true,
    showFolderNotes: false,
    disableCollapseIcon: true,
    alwaysCollapse: false
  },
  useSubmenus: true,
  syncMove: true,
  frontMatterTitle: {
    enabled: false,
    explorer: true,
    path: true
  },
  settingsTab: "general",
  supportedFileTypes: ["md", "canvas"],
  boldName: false,
  boldNameInPath: false,
  cursiveName: false,
  cursiveNameInPath: false,
  disableOpenFolderNoteOnClick: false,
  openByClick: true,
  openWithCtrl: false,
  openWithAlt: false,
  excludeFolderDefaultSettings: {
    type: "folder",
    path: "",
    id: crypto.randomUUID(),
    subFolders: true,
    disableSync: true,
    disableAutoCreate: true,
    disableFolderNote: false,
    enableCollapsing: false,
    position: 0,
    excludeFromFolderOverview: false,
    string: "",
    hideInSettings: false,
    detached: false,
    hideNote: false
  },
  excludePatternDefaultSettings: {
    type: "pattern",
    path: "",
    id: crypto.randomUUID(),
    subFolders: true,
    disableSync: true,
    disableAutoCreate: true,
    disableFolderNote: false,
    enableCollapsing: false,
    position: 0,
    excludeFromFolderOverview: false,
    string: "",
    hideInSettings: false,
    detached: false,
    hideNote: false
  },
  hideCollapsingIcon: false,
  hideCollapsingIconForEmptyFolders: false,
  tabManagerEnabled: true,
  ignoreAttachmentFolder: true,
  deleteFilesAction: "trash",
  openSidebar: {
    mobile: false,
    desktop: true
  },
  highlightFolder: true
};
var SettingsTab = class extends import_obsidian27.PluginSettingTab {
  constructor(app2, plugin) {
    super(app2, plugin);
    this.TABS = {
      GENERAL: {
        name: "General",
        id: "general"
      },
      FOLDER_OVERVIEW: {
        name: "Folder overview",
        id: "folder_overview"
      },
      EXCLUDE_FOLDERS: {
        name: "Exclude folders",
        id: "exclude_folders"
      },
      FILE_EXPLORER: {
        name: "File explorer",
        id: "file_explorer"
      },
      PATH: {
        name: "Path",
        id: "path"
      }
    };
  }
  renderSettingsPage(tabId) {
    this.settingsPage.empty();
    switch (tabId.toLocaleLowerCase()) {
      case this.TABS.GENERAL.id:
        renderGeneral(this);
        break;
      case this.TABS.FOLDER_OVERVIEW.id:
        renderFolderOverview(this);
        break;
      case this.TABS.EXCLUDE_FOLDERS.id:
        renderExcludeFolders(this);
        break;
      case this.TABS.FILE_EXPLORER.id:
        renderFileExplorer(this);
        break;
      case this.TABS.PATH.id:
        renderPath(this);
        break;
    }
  }
  display(contentEl, yaml, plugin, defaultSettings, display, el, ctx, file, settingsTab) {
    var _a;
    plugin = (_a = this == null ? void 0 : this.plugin) != null ? _a : plugin;
    plugin.settingsOpened = true;
    settingsTab = this != null ? this : settingsTab;
    const { containerEl } = settingsTab;
    containerEl.empty();
    const tabBar = containerEl.createEl("nav", { cls: "fn-settings-tab-bar" });
    for (const [tabId, tabInfo] of Object.entries(settingsTab.TABS)) {
      const tabEl = tabBar.createEl("div", { cls: "fn-settings-tab" });
      const tabName = tabEl.createEl("div", { cls: "fn-settings-tab-name", text: tabInfo.name });
      if (plugin.settings.settingsTab.toLocaleLowerCase() === tabId.toLocaleLowerCase()) {
        tabEl.addClass("fn-settings-tab-active");
      }
      tabEl.addEventListener("click", () => {
        for (const tabEl2 of tabBar.children) {
          tabEl2.removeClass("fn-settings-tab-active");
          plugin.settings.settingsTab = tabId.toLocaleLowerCase();
          plugin.saveSettings();
        }
        tabEl.addClass("fn-settings-tab-active");
        settingsTab.renderSettingsPage(tabId);
      });
    }
    settingsTab.settingsPage = containerEl.createDiv({ cls: "fn-settings-page" });
    settingsTab.renderSettingsPage(plugin.settings.settingsTab);
  }
  updateFolderNotes(newTemplate) {
    new import_obsidian27.Notice("Starting to update folder notes...");
    for (const folder of this.app.vault.getAllLoadedFiles()) {
      if (folder instanceof import_obsidian27.TFolder) {
        const folderNote = getFolderNote(this.plugin, folder.path);
        if (!(folderNote instanceof import_obsidian27.TFile)) {
          continue;
        }
        const folderNoteName = newTemplate.replace("{{folder_name}}", folder.name);
        const newPath = `${folder.path}/${folderNoteName}.${folderNote.extension}`;
        if (this.plugin.app.vault.getAbstractFileByPath(newPath)) {
          continue;
        }
        this.plugin.app.fileManager.renameFile(folderNote, newPath);
      }
    }
    this.plugin.settings.folderNoteName = newTemplate;
    this.plugin.saveSettings();
    new import_obsidian27.Notice("Finished updating folder notes");
  }
  switchStorageLocation(oldMethod) {
    new import_obsidian27.Notice("Starting to switch storage location...");
    this.app.vault.getAllLoadedFiles().forEach((file) => {
      if (file instanceof import_obsidian27.TFolder) {
        const folderNote = getFolderNote(this.plugin, file.path, oldMethod);
        if (folderNote instanceof import_obsidian27.TFile) {
          if (this.plugin.settings.storageLocation === "parentFolder") {
            let newPath = "";
            if (getFolderPathFromString2(file.path).trim() === "") {
              newPath = `${folderNote.name}`;
            } else {
              newPath = `${getFolderPathFromString2(file.path)}/${folderNote.name}`;
            }
            this.plugin.app.fileManager.renameFile(folderNote, newPath);
          } else if (this.plugin.settings.storageLocation === "insideFolder") {
            if (getFolderPathFromString2(folderNote.path) === file.path) {
              return;
            } else {
              const newPath = `${file.path}/${folderNote.name}`;
              this.plugin.app.fileManager.renameFile(folderNote, newPath);
            }
          }
        }
      }
    });
    new import_obsidian27.Notice("Finished switching storage location");
  }
  onClose() {
    this.plugin.settingsOpened = false;
  }
};

// src/Commands.ts
var import_obsidian28 = require("obsidian");
var Commands = class {
  constructor(app2, plugin) {
    this.plugin = plugin;
    this.app = app2;
  }
  registerCommands() {
    this.editorCommands();
    this.fileCommands();
    this.regularCommands();
  }
  regularCommands() {
    this.plugin.addCommand({
      id: "turn-into-folder-note",
      name: "Make current active note a folder note for the folder of the active note",
      callback: () => {
        const file = this.app.workspace.getActiveFile();
        if (!(file instanceof import_obsidian28.TFile))
          return;
        const folder = file.parent;
        if (!(folder instanceof import_obsidian28.TFolder))
          return;
        const folderNote = getFolderNote(this.plugin, folder.path);
        turnIntoFolderNote(this.plugin, file, folder, folderNote);
      }
    });
    console.log("registering commands");
    this.plugin.addCommand({
      id: "open-folder-overview-view",
      name: "Change folder overview settings",
      callback: () => {
        this.plugin.activateOverviewView();
      }
    });
    this.plugin.addCommand({
      id: "open-folder-overview-view",
      name: "Change folder overview settings",
      callback: () => {
        this.plugin.activateOverviewView();
      }
    });
    this.plugin.addCommand({
      id: "create-folder-note",
      name: "Create folder note with a new folder for the active note in the current folder",
      callback: async () => {
        var _a, _b, _c;
        const file = this.app.workspace.getActiveFile();
        if (!(file instanceof import_obsidian28.TFile))
          return;
        let newPath = ((_a = file.parent) == null ? void 0 : _a.path) + "/" + file.basename;
        if (((_b = file.parent) == null ? void 0 : _b.path) === "" || ((_c = file.parent) == null ? void 0 : _c.path) === "/") {
          newPath = file.basename;
        }
        if (this.plugin.app.vault.getAbstractFileByPath(newPath)) {
          return new import_obsidian28.Notice("Folder already exists");
        }
        const automaticallyCreateFolderNote = this.plugin.settings.autoCreate;
        this.plugin.settings.autoCreate = false;
        this.plugin.saveSettings();
        await this.plugin.app.vault.createFolder(newPath);
        const folder = this.plugin.app.vault.getAbstractFileByPath(newPath);
        if (!(folder instanceof import_obsidian28.TFolder))
          return;
        createFolderNote(this.plugin, folder.path, true, "." + file.extension, false, file);
        this.plugin.settings.autoCreate = automaticallyCreateFolderNote;
        this.plugin.saveSettings();
      }
    });
    this.plugin.addCommand({
      id: "create-folder-note-for-current-folder",
      name: "Create markdown folder note for current folder of active note",
      callback: () => {
        const file = this.app.workspace.getActiveFile();
        if (!(file instanceof import_obsidian28.TFile))
          return;
        const folder = file.parent;
        if (!(folder instanceof import_obsidian28.TFolder))
          return;
        createFolderNote(this.plugin, folder.path, true, ".md", false);
      }
    });
    this.plugin.settings.supportedFileTypes.forEach((fileType) => {
      if (fileType === "md")
        return;
      this.plugin.addCommand({
        id: `create-${fileType}-folder-note-for-current-folder`,
        name: `Create ${fileType} folder note for current folder of active note`,
        callback: () => {
          const file = this.app.workspace.getActiveFile();
          if (!(file instanceof import_obsidian28.TFile))
            return;
          const folder = file.parent;
          if (!(folder instanceof import_obsidian28.TFolder))
            return;
          createFolderNote(this.plugin, folder.path, true, "." + fileType, false);
        }
      });
    });
    this.plugin.addCommand({
      id: "delete-folder-note-for-current-folder",
      name: "Delete folder note of current folder of active note",
      callback: () => {
        const file = this.app.workspace.getActiveFile();
        if (!(file instanceof import_obsidian28.TFile))
          return;
        const folder = file.parent;
        if (!(folder instanceof import_obsidian28.TFolder))
          return;
        const folderNote = getFolderNote(this.plugin, folder.path);
        if (!(folderNote instanceof import_obsidian28.TFile))
          return;
        deleteFolderNote(this.plugin, folderNote, true);
      }
    });
    this.plugin.addCommand({
      id: "open-folder-note-for-current-folder",
      name: "Open folder note of current folder of active note",
      callback: () => {
        const file = this.app.workspace.getActiveFile();
        if (!(file instanceof import_obsidian28.TFile))
          return;
        const folder = file.parent;
        if (!(folder instanceof import_obsidian28.TFolder))
          return;
        const folderNote = getFolderNote(this.plugin, folder.path);
        if (!(folderNote instanceof import_obsidian28.TFile))
          return;
        openFolderNote(this.plugin, folderNote);
      }
    });
    this.plugin.addCommand({
      id: "insert-folder-overview-fn",
      name: "Insert folder overview",
      editorCheckCallback: (checking, editor) => {
        const line = editor.getCursor().line;
        const lineText = editor.getLine(line);
        if (lineText.trim() === "" || lineText.trim() === ">") {
          if (!checking) {
            let json = Object.assign({}, this.plugin.settings.defaultOverview);
            json.id = crypto.randomUUID();
            const yaml = (0, import_obsidian28.stringifyYaml)(json);
            if (lineText.trim() === "") {
              editor.replaceSelection(`\`\`\`folder-overview
${yaml}\`\`\`
`);
            } else if (lineText.trim() === ">") {
              const lines = yaml.split("\n");
              const newLines = lines.map((line2) => {
                return `> ${line2}`;
              });
              editor.replaceSelection(`\`\`\`folder-overview
${newLines.join("\n")}\`\`\`
`);
            }
          }
          return true;
        }
        return false;
      }
    });
    this.plugin.addCommand({
      id: "create-folder-note-from-selected-text",
      name: "Create folder note from selected text",
      editorCheckCallback: (checking, editor, view) => {
        const text = editor.getSelection().trim();
        const line = editor.getCursor().line;
        const file = view.file;
        if (!(file instanceof import_obsidian28.TFile))
          return false;
        if (text && text.trim() !== "") {
          if (checking) {
            return true;
          }
          const blacklist = ["*", "\\", '"', "/", "<", ">", "?", "|", ":"];
          for (const char of blacklist) {
            if (text.includes(char)) {
              new import_obsidian28.Notice('File name cannot contain any of the following characters: * " \\ / < > : | ?');
              return false;
            }
          }
          if (text.endsWith(".")) {
            new import_obsidian28.Notice("File name cannot end with a dot");
            return;
          }
          let folder;
          const folderPath = getFolderPathFromString2(file.path);
          if (folderPath === "") {
            folder = this.plugin.app.vault.getAbstractFileByPath(text);
            if (folder instanceof import_obsidian28.TFolder) {
              new import_obsidian28.Notice("Folder note already exists");
              return false;
            } else {
              this.plugin.app.vault.createFolder(text);
              createFolderNote(this.plugin, text, false);
            }
          } else {
            folder = this.plugin.app.vault.getAbstractFileByPath(folderPath + "/" + text);
            if (folder instanceof import_obsidian28.TFolder) {
              new import_obsidian28.Notice("Folder note already exists");
              return false;
            }
            if (this.plugin.settings.storageLocation === "parentFolder") {
              if (this.app.vault.getAbstractFileByPath(folderPath + "/" + text + this.plugin.settings.folderNoteType)) {
                new import_obsidian28.Notice("File already exists");
                return false;
              }
            }
            this.plugin.app.vault.createFolder(folderPath + "/" + text);
            createFolderNote(this.plugin, folderPath + "/" + text, false);
          }
          const fileName = this.plugin.settings.folderNoteName.replace("{{folder_name}}", text);
          if (fileName !== text) {
            editor.replaceSelection(`[[${fileName}]]`);
          } else {
            editor.replaceSelection(`[[${fileName}|${text}]]`);
          }
          return true;
        }
        return false;
      }
    });
  }
  fileCommands() {
    this.plugin.registerEvent(this.app.workspace.on("file-menu", async (menu, file) => {
      var _a, _b, _c;
      let folder = file.parent;
      if (file instanceof import_obsidian28.TFile) {
        if (this.plugin.settings.storageLocation === "insideFolder") {
          folder = file.parent;
        } else {
          const fileName = extractFolderName(this.plugin.settings.folderNoteName, file.basename);
          if (fileName) {
            if (((_a = file.parent) == null ? void 0 : _a.path) === "" || ((_b = file.parent) == null ? void 0 : _b.path) === "/") {
              folder = this.plugin.app.vault.getAbstractFileByPath(fileName);
            } else {
              folder = this.plugin.app.vault.getAbstractFileByPath(((_c = file.parent) == null ? void 0 : _c.path) + "/" + fileName);
            }
          }
        }
        if (folder instanceof import_obsidian28.TFolder) {
          const folderNote = getFolderNote(this.plugin, folder.path);
          const excludedFolder = await getExcludedFolder(this.plugin, folder.path, true);
          if ((folderNote == null ? void 0 : folderNote.path) === file.path && !(excludedFolder == null ? void 0 : excludedFolder.detached)) {
            return;
          }
        } else if (file.parent instanceof import_obsidian28.TFolder) {
          folder = file.parent;
        }
      }
      menu.addItem(async (item) => {
        if (import_obsidian28.Platform.isDesktop && !import_obsidian28.Platform.isTablet && this.plugin.settings.useSubmenus) {
          item.setTitle("Folder Note Commands").setIcon("folder-edit");
        }
        let subMenu;
        if (!import_obsidian28.Platform.isDesktopApp || !import_obsidian28.Platform.isDesktop || import_obsidian28.Platform.isTablet || !this.plugin.settings.useSubmenus) {
          subMenu = menu;
          item.setDisabled(true);
        } else {
          subMenu = item.setSubmenu();
        }
        if (file instanceof import_obsidian28.TFile) {
          subMenu.addItem((item2) => {
            item2.setTitle("Create folder note").setIcon("edit").onClick(async () => {
              if (!folder)
                return;
              let newPath = folder.path + "/" + file.basename;
              if (folder.path === "" || folder.path === "/") {
                newPath = file.basename;
              }
              if (this.plugin.app.vault.getAbstractFileByPath(newPath)) {
                return new import_obsidian28.Notice("Folder already exists");
              }
              const automaticallyCreateFolderNote = this.plugin.settings.autoCreate;
              this.plugin.settings.autoCreate = false;
              this.plugin.saveSettings();
              await this.plugin.app.vault.createFolder(newPath);
              const newFolder = this.plugin.app.vault.getAbstractFileByPath(newPath);
              if (!(newFolder instanceof import_obsidian28.TFolder))
                return;
              await createFolderNote(this.plugin, newFolder.path, true, "." + file.extension, false, file);
              this.plugin.settings.autoCreate = automaticallyCreateFolderNote;
              this.plugin.saveSettings();
            });
          });
          if (getFolderPathFromString2(file.path) === "")
            return;
          if (!(folder instanceof import_obsidian28.TFolder))
            return;
          subMenu.addItem((item2) => {
            item2.setTitle(`Turn into folder note for ${folder == null ? void 0 : folder.name}`).setIcon("edit").onClick(() => {
              if (!folder || !(folder instanceof import_obsidian28.TFolder))
                return;
              const folderNote2 = getFolderNote(this.plugin, folder.path);
              turnIntoFolderNote(this.plugin, file, folder, folderNote2);
            });
          });
        }
        if (!(file instanceof import_obsidian28.TFolder))
          return;
        const excludedFolder = await getExcludedFolder(this.plugin, file.path, false);
        const detachedExcludedFolder = getDetachedFolder(this.plugin, file.path);
        if (excludedFolder && !excludedFolder.hideNote) {
          subMenu.addItem((item2) => {
            item2.setTitle("Remove folder from excluded folders").setIcon("trash").onClick(() => {
              this.plugin.settings.excludeFolders = this.plugin.settings.excludeFolders.filter((folder2) => folder2.path !== file.path || folder2.detached);
              this.plugin.saveSettings(true);
              new import_obsidian28.Notice("Successfully removed folder from excluded folders");
            });
          });
          return;
        }
        if (detachedExcludedFolder) {
          subMenu.addItem((item2) => {
            item2.setTitle("Remove folder from detached folders").setIcon("trash").onClick(() => {
              deleteExcludedFolder(this.plugin, detachedExcludedFolder);
            });
          });
        }
        subMenu.addItem((item2) => {
          item2.setTitle("Exclude folder from folder notes").setIcon("x-circle").onClick(() => {
            const excludedFolder2 = new ExcludedFolder(file.path, this.plugin.settings.excludeFolders.length, void 0, this.plugin);
            this.plugin.settings.excludeFolders.push(excludedFolder2);
            this.plugin.saveSettings(true);
            new import_obsidian28.Notice("Successfully excluded folder from folder notes");
          });
        });
        if (!(file instanceof import_obsidian28.TFolder))
          return;
        const folderNote = getFolderNote(this.plugin, file.path);
        if (folderNote instanceof import_obsidian28.TFile && !detachedExcludedFolder) {
          subMenu.addItem((item2) => {
            item2.setTitle("Delete folder note").setIcon("trash").onClick(() => {
              deleteFolderNote(this.plugin, folderNote, true);
            });
          });
          subMenu.addItem((item2) => {
            item2.setTitle("Open folder note").setIcon("chevron-right-square").onClick(() => {
              openFolderNote(this.plugin, folderNote);
            });
          });
          subMenu.addItem((item2) => {
            item2.setTitle("Detach folder note").setIcon("unlink").onClick(() => {
              detachFolderNote(this.plugin, folderNote);
            });
          });
          subMenu.addItem((item2) => {
            item2.setTitle("Copy Obsidian URL").setIcon("link").onClick(() => {
              this.app.copyObsidianUrl(folderNote);
            });
          });
          if (this.plugin.settings.hideFolderNote) {
            if (excludedFolder == null ? void 0 : excludedFolder.hideNote) {
              subMenu.addItem((item2) => {
                item2.setTitle("Hide folder note in explorer").setIcon("eye-off").onClick(() => {
                  this.plugin.settings.excludeFolders = this.plugin.settings.excludeFolders.filter((folder2) => folder2.path !== file.path && folder2.hideNote);
                  this.plugin.saveSettings(false);
                  applyCSSClassesToFolder(file.path, this.plugin);
                });
              });
            } else {
              subMenu.addItem((item2) => {
                item2.setTitle("Show folder note in explorer").setIcon("eye").onClick(() => {
                  const excludedFolder2 = new ExcludedFolder(file.path, this.plugin.settings.excludeFolders.length, void 0, this.plugin);
                  excludedFolder2.hideNote = true;
                  excludedFolder2.subFolders = false;
                  excludedFolder2.disableSync = false;
                  excludedFolder2.disableAutoCreate = false;
                  excludedFolder2.disableFolderNote = false;
                  excludedFolder2.enableCollapsing = false;
                  excludedFolder2.excludeFromFolderOverview = false;
                  excludedFolder2.hideInSettings = true;
                  addExcludedFolder(this.plugin, excludedFolder2, false);
                  applyCSSClassesToFolder(file.path, this.plugin);
                });
              });
            }
          }
        } else {
          subMenu.addItem((item2) => {
            item2.setTitle("Create markdown folder note").setIcon("edit").onClick(() => {
              createFolderNote(this.plugin, file.path, true, ".md");
            });
          });
          this.plugin.settings.supportedFileTypes.forEach((fileType) => {
            if (fileType === "md")
              return;
            subMenu.addItem((item2) => {
              item2.setTitle(`Create ${fileType} folder note`).setIcon("edit").onClick(() => {
                createFolderNote(this.plugin, file.path, true, "." + fileType);
              });
            });
          });
        }
      });
    }));
  }
  editorCommands() {
    this.plugin.registerEvent(this.plugin.app.workspace.on("editor-menu", (menu, editor, view) => {
      const text = editor.getSelection().trim();
      const line = editor.getCursor().line;
      const lineText = editor.getLine(line);
      if (lineText.trim() === "" || lineText.trim() === ">") {
        menu.addItem((item) => {
          item.setTitle("Create folder overview").setIcon("edit").onClick(() => {
            let json = Object.assign({}, this.plugin.settings.defaultOverview);
            json.id = crypto.randomUUID();
            const yaml = (0, import_obsidian28.stringifyYaml)(json);
            if (lineText.trim() === "") {
              editor.replaceSelection(`\`\`\`folder-overview
${yaml}\`\`\`
`);
            } else if (lineText.trim() === ">") {
              const lines = yaml.split("\n");
              const newLines = lines.map((line2) => {
                return `> ${line2}`;
              });
              editor.replaceSelection(`\`\`\`folder-overview
${newLines.join("\n")}\`\`\`
`);
            }
          });
        });
      }
      if (!text || text.trim() === "")
        return;
      menu.addItem((item) => {
        item.setTitle("Create folder note").setIcon("edit").onClick(() => {
          const file = view.file;
          if (!(file instanceof import_obsidian28.TFile))
            return;
          const blacklist = ["*", "\\", '"', "/", "<", ">", "?", "|", ":"];
          for (const char of blacklist) {
            if (text.includes(char)) {
              new import_obsidian28.Notice('File name cannot contain any of the following characters: * " \\ / < > : | ?');
              return;
            }
          }
          if (text.endsWith(".")) {
            new import_obsidian28.Notice("File name cannot end with a dot");
            return;
          }
          let folder;
          const folderPath = getFolderPathFromString2(file.path);
          const fileName = this.plugin.settings.folderNoteName.replace("{{folder_name}}", text);
          if (folderPath === "") {
            folder = this.plugin.app.vault.getAbstractFileByPath(text);
            if (folder instanceof import_obsidian28.TFolder) {
              return new import_obsidian28.Notice("Folder note already exists");
            } else {
              this.plugin.app.vault.createFolder(text);
              createFolderNote(this.plugin, text, false);
            }
          } else {
            folder = this.plugin.app.vault.getAbstractFileByPath(folderPath + "/" + text);
            if (folder instanceof import_obsidian28.TFolder) {
              return new import_obsidian28.Notice("Folder note already exists");
            }
            if (this.plugin.settings.storageLocation === "parentFolder") {
              if (this.app.vault.getAbstractFileByPath(folderPath + "/" + fileName + this.plugin.settings.folderNoteType)) {
                return new import_obsidian28.Notice("File already exists");
              }
            }
            this.plugin.app.vault.createFolder(folderPath + "/" + text);
            createFolderNote(this.plugin, folderPath + "/" + text, false);
          }
          if (fileName !== text) {
            editor.replaceSelection(`[[${fileName}]]`);
          } else {
            editor.replaceSelection(`[[${fileName}|${text}]]`);
          }
        });
      });
    }));
  }
};

// src/events/handleClick.ts
var import_obsidian29 = require("obsidian");
async function handleViewHeaderClick(event, plugin) {
  event.stopImmediatePropagation();
  event.preventDefault();
  event.stopPropagation();
  if (!(event.target instanceof HTMLElement))
    return;
  if (!plugin.settings.openFolderNoteOnClickInPath)
    return;
  const folderPath = event.target.getAttribute("data-path");
  if (!folderPath) {
    return;
  }
  const excludedFolder = await getExcludedFolder(plugin, folderPath, true);
  if (excludedFolder == null ? void 0 : excludedFolder.disableFolderNote) {
    event.target.onclick = null;
    event.target.click();
    return;
  } else if ((excludedFolder == null ? void 0 : excludedFolder.enableCollapsing) || plugin.settings.enableCollapsing) {
    event.target.onclick = null;
    event.target.click();
  }
  const folderNote = getFolderNote(plugin, folderPath);
  if (folderNote) {
    await openFolderNote(plugin, folderNote, event).then(async () => {
      const fileExplorerPlugin = plugin.app.internalPlugins.getEnabledPluginById("file-explorer");
      if (fileExplorerPlugin && import_obsidian29.Platform.isMobile && plugin.settings.openSidebar.mobile) {
        setTimeout(() => {
          fileExplorerPlugin.revealInFolder(folderNote);
        }, 200);
      } else if (fileExplorerPlugin && import_obsidian29.Platform.isDesktop && plugin.settings.openSidebar.desktop) {
        fileExplorerPlugin.revealInFolder(folderNote);
      }
    });
    return;
  } else if (event.altKey || import_obsidian29.Keymap.isModEvent(event) === "tab") {
    if (plugin.settings.altKey && event.altKey || plugin.settings.ctrlKey && import_obsidian29.Keymap.isModEvent(event) === "tab") {
      await createFolderNote(plugin, folderPath, true, void 0, true);
      addCSSClassToTitleEL(folderPath, "has-folder-note", plugin);
      removeCSSClassFromEL(folderPath, "has-not-folder-note", plugin);
      return;
    }
  }
  event.target.onclick = null;
  event.target.click();
}
async function handleFolderClick(event, plugin) {
  var _a, _b, _c;
  if (!(event.target instanceof HTMLElement))
    return;
  if (!event || !event.target)
    return;
  event.stopImmediatePropagation();
  if (!event.shiftKey) {
    event.stopImmediatePropagation();
  } else {
    return;
  }
  const folderPath = (_a = event.target.parentElement) == null ? void 0 : _a.getAttribute("data-path");
  if (!folderPath) {
    return;
  }
  const excludedFolder = await getExcludedFolder(plugin, folderPath, true);
  if (excludedFolder == null ? void 0 : excludedFolder.disableFolderNote) {
    event.target.onclick = null;
    event.target.click();
    return;
  } else if ((excludedFolder == null ? void 0 : excludedFolder.enableCollapsing) || plugin.settings.enableCollapsing) {
    event.target.onclick = null;
    event.target.click();
  }
  const folderNote = getFolderNote(plugin, folderPath);
  if (folderNote) {
    if (plugin.settings.openByClick) {
      return openFolderNote(plugin, folderNote, event);
    } else if (plugin.settings.openWithCtrl && import_obsidian29.Keymap.isModEvent(event) === "tab") {
      return openFolderNote(plugin, folderNote, event);
    } else if (plugin.settings.openWithAlt && event.altKey) {
      return openFolderNote(plugin, folderNote, event);
    } else {
      if (plugin.settings.enableCollapsing)
        return;
      (_b = event.target.parentElement) == null ? void 0 : _b.click();
      return;
    }
  } else if (event.altKey || import_obsidian29.Keymap.isModEvent(event) === "tab") {
    if (plugin.settings.altKey && event.altKey || plugin.settings.ctrlKey && import_obsidian29.Keymap.isModEvent(event) === "tab") {
      await createFolderNote(plugin, folderPath, true, void 0, true);
      addCSSClassToTitleEL(folderPath, "has-folder-note", plugin);
      removeCSSClassFromEL(folderPath, "has-not-folder-note", plugin);
      return;
    }
  } else if (!folderNote) {
    if (plugin.settings.enableCollapsing)
      return;
    return (_c = event.target.parentElement) == null ? void 0 : _c.click();
  }
  event.target.onclick = null;
  event.target.click();
}

// src/events/MutationObserver.ts
var import_obsidian30 = require("obsidian");
async function addObserver(plugin) {
  plugin.observer = new MutationObserver((mutations) => {
    mutations.forEach((rec) => {
      if (rec.type === "childList") {
        rec.target.querySelectorAll("div.nav-folder").forEach(async (element) => {
          var _a;
          let folderTitle = element.querySelector("div.nav-folder-title-content");
          const filePath = ((_a = folderTitle.parentElement) == null ? void 0 : _a.getAttribute("data-path")) || "";
          applyCSSClassesToFolder(filePath, plugin);
          if (folderTitle) {
            await initializeFolderTitle(folderTitle, plugin);
          } else {
            const observer = new MutationObserver(async (mutations2, obs) => {
              folderTitle = element.querySelector("div.nav-folder-title-content");
              if (folderTitle) {
                await initializeFolderTitle(folderTitle, plugin);
                obs.disconnect();
              }
            });
            observer.observe(element, { childList: true, subtree: true });
          }
        });
        if (!plugin.settings.openFolderNoteOnClickInPath) {
          return;
        }
        rec.target.querySelectorAll("span.view-header-breadcrumb").forEach((element) => {
          var _a, _b;
          const breadcrumbs = (_a = element.parentElement) == null ? void 0 : _a.querySelectorAll("span.view-header-breadcrumb");
          if (!breadcrumbs)
            return;
          let path = "";
          breadcrumbs.forEach(async (breadcrumb) => {
            var _a2;
            if (breadcrumb.hasAttribute("old-name")) {
              path += breadcrumb.getAttribute("old-name") + "/";
            } else {
              path += breadcrumb.innerText.trim() + "/";
            }
            const folderPath = path.slice(0, -1);
            breadcrumb.setAttribute("data-path", folderPath);
            const folder = (_a2 = plugin.fmtpHandler) == null ? void 0 : _a2.modifiedFolders.get(folderPath);
            if (folder && plugin.settings.frontMatterTitle.path && plugin.settings.frontMatterTitle.enabled) {
              breadcrumb.setAttribute("old-name", folder.name || "");
              breadcrumb.innerText = folder.newName || "";
            }
            const excludedFolder = await getExcludedFolder(plugin, folderPath, true);
            if (excludedFolder == null ? void 0 : excludedFolder.disableFolderNote)
              return;
            const folderNote = getFolderNote(plugin, folderPath);
            if (folderNote) {
              breadcrumb.classList.add("has-folder-note");
            }
          });
          (_b = element.parentElement) == null ? void 0 : _b.setAttribute("data-path", path.slice(0, -1));
          if (breadcrumbs.length > 0) {
            breadcrumbs.forEach((breadcrumb) => {
              if (breadcrumb.onclick)
                return;
              breadcrumb.addEventListener("click", (e) => {
                handleViewHeaderClick(e, plugin);
              }, { capture: true });
            });
          }
        });
      }
    });
  });
}
async function initializeFolderTitle(folderTitle, plugin) {
  var _a;
  if (folderTitle.onclick)
    return;
  if (import_obsidian30.Platform.isMobile && plugin.settings.disableOpenFolderNoteOnClick)
    return;
  let folderPath = ((_a = folderTitle.parentElement) == null ? void 0 : _a.getAttribute("data-path")) || "";
  await applyCSSClassesToFolder(folderPath, plugin);
  folderTitle.addEventListener("auxclick", (event) => {
    if (event.button == 1) {
      handleFolderClick(event, plugin);
    }
  }, { capture: true });
  folderTitle.onclick = (event) => handleFolderClick(event, plugin);
  plugin.registerDomEvent(folderTitle, "pointerover", (event) => {
    var _a2;
    plugin.hoveredElement = folderTitle;
    plugin.mouseEvent = event;
    if (!import_obsidian30.Keymap.isModEvent(event))
      return;
    if (!(event.target instanceof HTMLElement))
      return;
    const folderPath2 = ((_a2 = event == null ? void 0 : event.target.parentElement) == null ? void 0 : _a2.getAttribute("data-path")) || "";
    const folderNote = getFolderNote(plugin, folderPath2);
    if (!folderNote)
      return;
    plugin.app.workspace.trigger("hover-link", {
      event,
      source: "preview",
      hoverParent: { file: folderNote },
      targetEl: event.target,
      linktext: folderNote == null ? void 0 : folderNote.basename,
      sourcePath: folderNote == null ? void 0 : folderNote.path
    });
    plugin.hoverLinkTriggered = true;
  });
  plugin.registerDomEvent(folderTitle, "pointerout", () => {
    plugin.hoveredElement = null;
    plugin.mouseEvent = null;
    plugin.hoverLinkTriggered = false;
  });
}

// src/events/handleRename.ts
var import_obsidian31 = require("obsidian");
function handleRename(file, oldPath, plugin) {
  var _a;
  const folder = file.parent;
  const oldFolder = plugin.app.vault.getAbstractFileByPath(getFolderPathFromString2(oldPath));
  const isRename = ((_a = file.parent) == null ? void 0 : _a.path) === getFolderPathFromString2(oldPath);
  if (folder instanceof import_obsidian31.TFolder) {
    if (plugin.isEmptyFolderNoteFolder(folder)) {
      addCSSClassToTitleEL(folder.path, "only-has-folder-note", plugin);
    } else {
      removeCSSClassFromEL(folder.path, "only-has-folder-note", plugin);
    }
  }
  if (oldFolder instanceof import_obsidian31.TFolder) {
    if (plugin.isEmptyFolderNoteFolder(oldFolder)) {
      addCSSClassToTitleEL(oldFolder.path, "only-has-folder-note", plugin);
    } else {
      removeCSSClassFromEL(oldFolder.path, "only-has-folder-note", plugin);
    }
  }
  if (file instanceof import_obsidian31.TFolder) {
    plugin.tabManager.updateTab(file.path);
    updateExcludedFolderPath(file, oldPath, plugin);
    if (isRename) {
      return handleFolderRename(file, oldPath, plugin);
    } else {
      return handleFolderMove(file, oldPath, plugin);
    }
  } else if (file instanceof import_obsidian31.TFile) {
    if (isRename) {
      return handleFileRename(file, oldPath, plugin);
    } else {
      return handleFileMove(file, oldPath, plugin);
    }
  }
}
function handleFolderMove(file, oldPath, plugin) {
}
async function handleFileMove(file, oldPath, plugin) {
  const folderName = extractFolderName(plugin.settings.folderNoteName, file.basename) || file.basename;
  const oldFileName = removeExtension(getFileNameFromPathString(oldPath));
  const newFolder = getFolderNoteFolder(plugin, file, file.basename);
  const folderNote = getFolderNote(plugin, oldPath, plugin.settings.storageLocation, file);
  let excludedFolder = await getExcludedFolder(plugin, (newFolder == null ? void 0 : newFolder.path) || "", true);
  const oldFolder = getFolderNoteFolder(plugin, oldPath, oldFileName);
  if (folderName === (newFolder == null ? void 0 : newFolder.name) && folderNote) {
    let excludedFolderExisted = true;
    let disabledSync = false;
    if (!excludedFolder) {
      excludedFolderExisted = false;
      excludedFolder = new ExcludedFolder((oldFolder == null ? void 0 : oldFolder.path) || "", plugin.settings.excludeFolders.length, void 0, plugin);
      addExcludedFolder(plugin, excludedFolder);
    } else if (!excludedFolder.disableSync) {
      disabledSync = false;
      excludedFolder.disableSync = true;
      updateExcludedFolder(plugin, excludedFolder, excludedFolder);
    }
    return plugin.app.fileManager.renameFile(file, oldPath).then(() => {
      if (!excludedFolder) {
        return;
      }
      if (!excludedFolderExisted) {
        deleteExcludedFolder(plugin, excludedFolder);
      } else if (!disabledSync) {
        excludedFolder.disableSync = false;
        updateExcludedFolder(plugin, excludedFolder, excludedFolder);
      }
    });
  } else if (oldFolder && oldFolder.name === oldFileName && (newFolder == null ? void 0 : newFolder.path) !== oldFolder.path) {
    removeCSSClassFromEL(oldFolder.path, "has-folder-note", plugin);
    removeCSSClassFromEL(file.path, "is-folder-note", plugin);
    removeCSSClassFromEL(oldPath, "is-folder-note", plugin);
  }
}
async function handleFolderRename(file, oldPath, plugin) {
  const fileName = plugin.settings.folderNoteName.replace("{{folder_name}}", file.name);
  const oldFileName = plugin.settings.folderNoteName.replace("{{folder_name}}", getFileNameFromPathString(oldPath));
  if (fileName === oldFileName) {
    return;
  }
  const folderNote = getFolderNote(plugin, oldPath);
  if (!(folderNote instanceof import_obsidian31.TFile))
    return;
  const excludedFolder = await getExcludedFolder(plugin, file.path, true);
  if ((excludedFolder == null ? void 0 : excludedFolder.disableSync) && !folderNote) {
    return removeCSSClassFromEL(file.path, "has-folder-note", plugin);
  }
  if (!plugin.settings.syncFolderName) {
    return;
  }
  let newPath = "";
  if (plugin.settings.storageLocation === "parentFolder") {
    const parentFolderPath = getFolderPathFromString2(file.path);
    const oldParentFolderPath = getFolderPathFromString2(oldPath);
    if (parentFolderPath !== oldParentFolderPath) {
      if (!plugin.settings.syncMove) {
        return;
      }
      newPath = `${parentFolderPath}/${fileName}.${folderNote.extension}`;
    } else if (parentFolderPath.trim() === "") {
      folderNote.path = `${folderNote.name}`;
      newPath = `${fileName}.${folderNote.extension}`;
    } else {
      folderNote.path = `${parentFolderPath}/${folderNote.name}`;
      newPath = `${parentFolderPath}/${fileName}.${folderNote.extension}`;
    }
  } else {
    folderNote.path = `${file.path}/${folderNote.name}`;
    newPath = `${file.path}/${fileName}.${folderNote.extension}`;
  }
  plugin.app.fileManager.renameFile(folderNote, newPath);
}
async function handleFileRename(file, oldPath, plugin) {
  const oldFileName = removeExtension(getFileNameFromPathString(oldPath));
  const newFileName = file.basename;
  if (oldFileName === newFileName) {
    return;
  }
  const oldFolder = getFolderNoteFolder(plugin, oldPath, oldFileName);
  const folderName = extractFolderName(plugin.settings.folderNoteName, file.basename) || file.basename;
  const oldFolderName = extractFolderName(plugin.settings.folderNoteName, oldFileName) || oldFileName;
  const newFolder = getFolderNoteFolder(plugin, file, file.basename);
  let excludedFolder = await getExcludedFolder(plugin, (newFolder == null ? void 0 : newFolder.path) || "", true);
  const detachedExcludedFolder = getDetachedFolder(plugin, (newFolder == null ? void 0 : newFolder.path) || "");
  const folderNote = getFolderNote(plugin, oldPath, plugin.settings.storageLocation, file);
  if (!(excludedFolder == null ? void 0 : excludedFolder.disableFolderNote) && folderName === (newFolder == null ? void 0 : newFolder.name) && !detachedExcludedFolder) {
    addCSSClassToTitleEL(file.path, "is-folder-note", plugin);
    addCSSClassToTitleEL(newFolder.path, "has-folder-note", plugin);
    return;
  } else if ((excludedFolder == null ? void 0 : excludedFolder.disableFolderNote) || folderName !== (newFolder == null ? void 0 : newFolder.name)) {
    removeCSSClassFromEL(file.path, "is-folder-note", plugin);
    removeCSSClassFromEL((newFolder == null ? void 0 : newFolder.path) || "", "has-folder-note", plugin);
  }
  if ((excludedFolder == null ? void 0 : excludedFolder.disableSync) || !plugin.settings.syncFolderName) {
    return;
  }
  if (folderName === (newFolder == null ? void 0 : newFolder.name)) {
    addCSSClassToTitleEL(file.path, "is-folder-note", plugin);
    removeCSSClassFromEL(oldFolder == null ? void 0 : oldFolder.path, "has-folder-note", plugin);
    addCSSClassToTitleEL(newFolder.path, "has-folder-note", plugin);
    return;
  }
  if (!oldFolder)
    return;
  if (oldFolderName === oldFolder.name && (newFolder == null ? void 0 : newFolder.path) === oldFolder.path) {
    return renameFolderOnFileRename(file, oldPath, oldFolder, plugin);
  } else if (folderNote && oldFolderName === oldFolder.name) {
    return renameFolderOnFileRename(file, oldPath, oldFolder, plugin);
  }
}
async function renameFolderOnFileRename(file, oldPath, oldFolder, plugin) {
  var _a, _b;
  const newFolderName = extractFolderName(plugin.settings.folderNoteName, file.basename);
  if (!newFolderName) {
    removeCSSClassFromEL(oldFolder.path, "has-folder-note", plugin);
    removeCSSClassFromEL(file.path, "is-folder-note", plugin);
    return;
  } else if (newFolderName === oldFolder.name) {
    addCSSClassToTitleEL(oldFolder.path, "has-folder-note", plugin);
    addCSSClassToTitleEL(file.path, "is-folder-note", plugin);
    return;
  }
  let newFolderPath = "";
  if (plugin.settings.storageLocation === "insideFolder") {
    if (((_a = oldFolder.parent) == null ? void 0 : _a.path) === "/") {
      newFolderPath = `${newFolderName}`;
    } else {
      newFolderPath = ((_b = oldFolder.parent) == null ? void 0 : _b.path) + "/" + newFolderName;
    }
  } else {
    const parentFolderPath = getFolderPathFromString2(file.path);
    if (parentFolderPath.trim() === "" || parentFolderPath.trim() === "/") {
      newFolderPath = `${newFolderName}`;
    } else {
      newFolderPath = `${parentFolderPath}/${newFolderName}`;
    }
  }
  if (plugin.app.vault.getAbstractFileByPath(newFolderPath)) {
    await plugin.app.fileManager.renameFile(file, oldPath);
    return new import_obsidian31.Notice("A folder with the same name already exists");
  }
  plugin.app.fileManager.renameFile(oldFolder, newFolderPath);
}
function updateExcludedFolderPath(folder, oldPath, plugin) {
  const excludedFolders = plugin.settings.excludeFolders.filter((excludedFolder) => {
    var _a;
    return (_a = excludedFolder.path) == null ? void 0 : _a.includes(oldPath);
  });
  excludedFolders.forEach((excludedFolder) => {
    if (excludedFolder.path === oldPath) {
      excludedFolder.path = folder.path;
      return;
    }
    if (!excludedFolder.path)
      return;
    const folders = excludedFolder.path.split("/");
    if (folders.length < 1) {
      folders.push(excludedFolder.path);
    }
    folders[folders.indexOf(folder.name)] = folder.name;
    excludedFolder.path = folders.join("/");
  });
  plugin.saveSettings();
}

// src/events/handleCreate.ts
var import_obsidian32 = require("obsidian");
async function handleCreate(file, plugin) {
  if (!plugin.app.workspace.layoutReady)
    return;
  const folder = file.parent;
  if (folder instanceof import_obsidian32.TFolder) {
    if (plugin.isEmptyFolderNoteFolder(folder)) {
      addCSSClassToTitleEL(folder.path, "only-has-folder-note", plugin);
    } else {
      removeCSSClassFromEL(folder.path, "only-has-folder-note", plugin);
    }
  }
  if (file instanceof import_obsidian32.TFile) {
    handleFileCreation(file, plugin);
  } else if (file instanceof import_obsidian32.TFolder && plugin.settings.autoCreate) {
    handleFolderCreation(file, plugin);
  }
}
async function handleFileCreation(file, plugin) {
  const folder = getFolder2(plugin, file);
  if (!(folder instanceof import_obsidian32.TFolder)) {
    return;
  }
  const detachedFolder = await getExcludedFolder(plugin, folder.path, true);
  if (detachedFolder) {
    return;
  }
  const folderNote = getFolderNote(plugin, folder.path);
  if (folderNote && folderNote.path === file.path) {
    addCSSClassToTitleEL(folder.path, "has-folder-note", plugin);
    addCSSClassToTitleEL(file.path, "is-folder-note", plugin);
    return;
  }
}
async function handleFolderCreation(folder, plugin) {
  let openFile = plugin.settings.autoCreateFocusFiles;
  const attachmentFolderPath = plugin.app.vault.getConfig("attachmentFolderPath");
  const cleanAttachmentFolderPath = (attachmentFolderPath == null ? void 0 : attachmentFolderPath.replace("./", "")) || "";
  const attachmentsAreInRootFolder = attachmentFolderPath === "./" || attachmentFolderPath === "";
  if (!plugin.settings.autoCreateForAttachmentFolder) {
    if (!attachmentsAreInRootFolder && cleanAttachmentFolderPath === folder.name)
      return;
  } else if (!attachmentsAreInRootFolder && cleanAttachmentFolderPath === folder.name) {
    openFile = false;
  }
  const excludedFolder = await getExcludedFolder(plugin, folder.path, true);
  if (excludedFolder == null ? void 0 : excludedFolder.disableAutoCreate)
    return;
  const folderNote = getFolderNote(plugin, folder.path);
  if (folderNote)
    return;
  createFolderNote(plugin, folder.path, openFile, void 0, true);
  addCSSClassToTitleEL(folder.path, "has-folder-note", plugin);
}

// src/events/TabManager.ts
var import_obsidian33 = require("obsidian");
var TabManager = class {
  constructor(plugin) {
    this.plugin = plugin;
    this.app = plugin.app;
  }
  resetTabs() {
    if (!this.isEnabled())
      return;
    this.app.workspace.iterateAllLeaves((leaf) => {
      var _a;
      if (!(leaf.view instanceof import_obsidian33.EditableFileView))
        return;
      const file = (_a = leaf.view) == null ? void 0 : _a.file;
      if (!file)
        return;
      leaf.tabHeaderInnerTitleEl.setText(file.basename);
    });
  }
  updateTabs() {
    if (!this.isEnabled())
      return;
    this.app.workspace.iterateAllLeaves((leaf) => {
      var _a;
      if (!(leaf.view instanceof import_obsidian33.EditableFileView))
        return;
      const file = (_a = leaf.view) == null ? void 0 : _a.file;
      if (!file)
        return;
      const folder = getFolder2(this.plugin, file);
      if (!folder)
        return;
      leaf.tabHeaderInnerTitleEl.setText(folder.name);
    });
  }
  updateTab(folderPath) {
    if (!this.isEnabled())
      return;
    const folder = this.app.vault.getAbstractFileByPath(folderPath);
    if (!(folder instanceof import_obsidian33.TFolder))
      return;
    const folderNote = getFolderNote(this.plugin, folder.path);
    if (!folderNote)
      return;
    this.app.workspace.iterateAllLeaves((leaf) => {
      var _a;
      if (!(leaf.view instanceof import_obsidian33.EditableFileView))
        return;
      const file = (_a = leaf.view) == null ? void 0 : _a.file;
      if (!file)
        return;
      if (file.path === folderNote.path) {
        leaf.tabHeaderInnerTitleEl.setText(folder.name);
      }
    });
  }
  isEnabled() {
    if (this.plugin.settings.folderNoteName == "{{folder_name}}")
      return false;
    return this.plugin.settings.tabManagerEnabled;
  }
};

// src/events/handleDelete.ts
var import_obsidian34 = require("obsidian");
function handleDelete(file, plugin) {
  const folder = plugin.app.vault.getAbstractFileByPath(getFolderPathFromString2(file.path));
  if (folder instanceof import_obsidian34.TFolder) {
    if (plugin.isEmptyFolderNoteFolder(folder)) {
      addCSSClassToTitleEL(folder.path, "only-has-folder-note", plugin);
    } else {
      removeCSSClassFromEL(folder.path, "only-has-folder-note", plugin);
    }
  }
  if (file instanceof import_obsidian34.TFile) {
    const folder2 = getFolder2(plugin, file);
    if (!folder2) {
      return;
    }
    const folderNote2 = getFolderNote(plugin, folder2.path);
    if (folderNote2) {
      return;
    }
    removeCSSClassFromEL(folder2.path, "has-folder-note", plugin);
    removeCSSClassFromEL(folder2.path, "only-has-folder-note", plugin);
  }
  if (!(file instanceof import_obsidian34.TFolder)) {
    return;
  }
  const folderNote = getFolderNote(plugin, file.path);
  if (!folderNote) {
    return;
  }
  removeCSSClassFromEL(folderNote.path, "is-folder-note", plugin);
  if (!plugin.settings.syncDelete) {
    return;
  }
  deleteFolderNote(plugin, folderNote, false);
}

// src/main.ts
var FolderNotesPlugin = class extends import_obsidian35.Plugin {
  constructor() {
    super(...arguments);
    this.fmtpHandler = null;
    this.hoveredElement = null;
    this.mouseEvent = null;
    this.hoverLinkTriggered = false;
    this.settingsOpened = false;
  }
  async onload() {
    console.log("loading folder notes plugin");
    console.log("loading folder notes plugin 2");
    await this.loadSettings();
    this.settingsTab = new SettingsTab(this.app, this);
    this.addSettingTab(this.settingsTab);
    this.saveSettings();
    document.body.classList.add("folder-notes-plugin");
    if (this.settings.hideFolderNote) {
      document.body.classList.add("hide-folder-note");
    }
    if (this.settings.hideCollapsingIconForEmptyFolders) {
      document.body.classList.add("fn-hide-empty-collapse-icon");
    }
    if (this.settings.underlineFolder) {
      document.body.classList.add("folder-note-underline");
    }
    if (this.settings.boldName) {
      document.body.classList.add("folder-note-bold");
    }
    if (this.settings.cursiveName) {
      document.body.classList.add("folder-note-cursive");
    }
    if (this.settings.boldNameInPath) {
      document.body.classList.add("folder-note-bold-path");
    }
    if (this.settings.cursiveNameInPath) {
      document.body.classList.add("folder-note-cursive-path");
    }
    if (this.settings.underlineFolderInPath) {
      document.body.classList.add("folder-note-underline-path");
    }
    if (this.settings.stopWhitespaceCollapsing) {
      document.body.classList.add("fn-whitespace-stop-collapsing");
    }
    if (this.settings.hideCollapsingIcon) {
      document.body.classList.add("fn-hide-collapse-icon");
    }
    if (!this.settings.highlightFolder) {
      document.body.classList.add("disable-folder-highlight");
    }
    if ((0, import_obsidian35.requireApiVersion)("1.7.2")) {
      document.body.classList.add("version-1-7-2");
    }
    new Commands(this.app, this).registerCommands();
    this.app.workspace.onLayoutReady(this.onLayoutReady.bind(this));
    await addObserver(this);
    this.observer.observe(document.body, {
      childList: true,
      subtree: true
    });
    this.registerDomEvent(window, "keydown", (event) => {
      var _a, _b, _c;
      if (event.key == "Enter") {
        const folderNote2 = getFolderNote(this, ((_b = (_a = getFocusedItem(this)) == null ? void 0 : _a.file) == null ? void 0 : _b.path) || "");
        if (!folderNote2)
          return;
        openFolderNote(this, folderNote2);
      }
      const hoveredElement = this.hoveredElement;
      if (this.hoverLinkTriggered)
        return;
      if (!hoveredElement)
        return;
      if (!import_obsidian35.Keymap.isModEvent(event))
        return;
      const folderPath = ((_c = hoveredElement == null ? void 0 : hoveredElement.parentElement) == null ? void 0 : _c.getAttribute("data-path")) || "";
      const folderNote = getFolderNote(this, folderPath);
      if (!folderNote)
        return;
      this.app.workspace.trigger("hover-link", {
        event: this.mouseEvent,
        source: "preview",
        hoverParent: {
          file: folderNote
        },
        targetEl: hoveredElement,
        linktext: folderNote == null ? void 0 : folderNote.basename,
        sourcePath: folderNote == null ? void 0 : folderNote.path
      });
      this.hoverLinkTriggered = true;
    });
    this.registerEvent(this.app.vault.on("create", (file) => {
      handleCreate(file, this);
    }));
    this.registerEvent(this.app.workspace.on("file-open", async (openFile) => {
      if (this.activeFolderDom) {
        this.activeFolderDom.removeClass("fn-is-active");
        this.activeFolderDom = null;
      }
      if (!openFile || !openFile.basename) {
        return;
      }
      const folder = getFolder2(this, openFile);
      if (!folder) {
        return;
      }
      const excludedFolder = await getExcludedFolder(this, folder.path, true);
      if (excludedFolder == null ? void 0 : excludedFolder.disableFolderNote)
        return;
      const folderNote = getFolderNote(this, folder.path);
      if (!folderNote) {
        return;
      }
      if (folderNote.path !== openFile.path) {
        return;
      }
      this.activeFolderDom = getEl(folder.path, this);
      if (this.activeFolderDom)
        this.activeFolderDom.addClass("fn-is-active");
    }));
    this.registerEvent(this.app.vault.on("rename", (file, oldPath) => {
      handleRename(file, oldPath, this);
    }));
    this.registerEvent(this.app.vault.on("delete", (file) => {
      handleDelete(file, this);
    }));
    this.registerMarkdownCodeBlockProcessor("folder-overview", (source, el, ctx) => {
      this.handleOverviewBlock(source, el, ctx);
    });
    if (this.app.workspace.layoutReady) {
      this.registerView(FOLDER_OVERVIEW_VIEW, (leaf) => {
        return new FolderOverviewView(leaf, this);
      });
    } else {
      this.app.workspace.onLayoutReady(async () => {
        this.registerView(FOLDER_OVERVIEW_VIEW, (leaf) => {
          return new FolderOverviewView(leaf, this);
        });
      });
    }
  }
  onLayoutReady() {
    var _a, _b, _c;
    if (this.settings.frontMatterTitle.enabled) {
      this.fmtpHandler = new FrontMatterTitlePluginHandler(this);
    }
    this.tabManager = new TabManager(this);
    this.tabManager.updateTabs();
    const leaf = this.app.workspace.getLeavesOfType("markdown").first();
    const view = leaf == null ? void 0 : leaf.view;
    if (!view) {
      return;
    }
    const editMode = (_c = (_a = view.editMode) != null ? _a : view.sourceMode) != null ? _c : (_b = this.app.workspace.activeEditor) == null ? void 0 : _b.editMode;
    if (!editMode) {
      return;
    }
    const plugin = this;
    const originalHandleDragOver = editMode.clipboardManager.constructor.prototype.handleDragOver;
    editMode.clipboardManager.constructor.prototype.handleDragOver = function(evt, ...args) {
      const { draggable } = plugin.app.dragManager;
      if (draggable && draggable.file instanceof import_obsidian35.TFolder && getFolderNote(plugin, draggable.file.path)) {
        plugin.app.dragManager.setAction(window.i18next.t("interface.drag-and-drop.insert-link-here"));
      } else {
        originalHandleDragOver.call(this, evt, ...args);
      }
    };
    const originalHandleDrop = editMode.clipboardManager.constructor.prototype.handleDrop;
    editMode.clipboardManager.constructor.prototype.handleDrop = function(evt, ...args) {
      const { draggable } = plugin.app.dragManager;
      if (draggable && draggable.file instanceof import_obsidian35.TFolder && getFolderNote(plugin, draggable.file.path)) {
        const folderNote = getFolderNote(plugin, draggable.file.path);
        if ((draggable == null ? void 0 : draggable.type) === "folder" && draggable.file instanceof import_obsidian35.TFolder && folderNote) {
          draggable.file = folderNote;
          draggable.type = "file";
        }
      }
      return originalHandleDrop.call(this, evt, ...args);
    };
  }
  handleOverviewBlock(source, el, ctx) {
    const observer = new MutationObserver(() => {
      var _a;
      const editButton = (_a = el.parentElement) == null ? void 0 : _a.childNodes.item(1);
      if (editButton) {
        editButton.addEventListener("click", (e) => {
          e.stopImmediatePropagation();
          e.preventDefault();
          e.stopPropagation();
          new FolderOverviewSettings(this.app, this, (0, import_obsidian35.parseYaml)(source), ctx, el, this.settings.defaultOverview).open();
        }, { capture: true });
      }
    });
    observer.observe(el, {
      childList: true,
      subtree: true
    });
    try {
      if (this.app.workspace.layoutReady) {
        const folderOverview = new FolderOverview(this, ctx, source, el, this.settings.defaultOverview);
        folderOverview.create(this, (0, import_obsidian35.parseYaml)(source), el, ctx);
      } else {
        this.app.workspace.onLayoutReady(() => {
          const folderOverview = new FolderOverview(this, ctx, source, el, this.settings.defaultOverview);
          folderOverview.create(this, (0, import_obsidian35.parseYaml)(source), el, ctx);
        });
      }
    } catch (e) {
      new import_obsidian35.Notice("Error creating folder overview (folder notes plugin) - check console for more details");
      console.error(e);
    }
  }
  async activateOverviewView() {
    const { workspace } = this.app;
    let leaf = null;
    const leaves = workspace.getLeavesOfType(FOLDER_OVERVIEW_VIEW);
    if (leaves.length > 0) {
      leaf = leaves[0];
    } else {
      leaf = workspace.getRightLeaf(false);
      await (leaf == null ? void 0 : leaf.setViewState({ type: FOLDER_OVERVIEW_VIEW, active: true }));
    }
    if (!leaf)
      return;
    workspace.revealLeaf(leaf);
  }
  async updateOverviewView() {
    const { workspace } = this.app;
    const leaf = workspace.getLeavesOfType(FOLDER_OVERVIEW_VIEW)[0];
    if (!leaf)
      return;
    const view = leaf.view;
    view.display(view.contentEl, view.yaml, this, view.defaultSettings, view.display, void 0, void 0, view.activeFile);
  }
  isEmptyFolderNoteFolder(folder) {
    var _a;
    let attachmentFolderPath = this.app.vault.getConfig("attachmentFolderPath");
    const cleanAttachmentFolderPath = (attachmentFolderPath == null ? void 0 : attachmentFolderPath.replace("./", "")) || "";
    const attachmentsAreInRootFolder = attachmentFolderPath === "./" || attachmentFolderPath === "";
    const threshold = this.settings.storageLocation === "insideFolder" ? 1 : 0;
    if (folder.children.length == 0) {
      addCSSClassToTitleEL(folder.path, "fn-empty-folder", this);
    }
    if (folder.children.length == threshold) {
      return true;
    } else if (folder.children.length > threshold) {
      if (attachmentsAreInRootFolder) {
        return false;
      } else if (this.settings.ignoreAttachmentFolder && this.app.vault.getAbstractFileByPath(`${folder.path}/${cleanAttachmentFolderPath}`)) {
        const folderPath = `${folder.path}/${cleanAttachmentFolderPath}`;
        const attachmentFolder = this.app.vault.getAbstractFileByPath(folderPath);
        if (attachmentFolder instanceof import_obsidian35.TFolder && folder.children.length <= threshold + 1) {
          if (!folder.collapsed) {
            (_a = getEl(folder.path, this)) == null ? void 0 : _a.click();
          }
        }
        return folder.children.length <= threshold + 1;
      } else {
        return false;
      }
    }
    return true;
  }
  async changeName(folder, name, replacePath, waitForCreate = false, count = 0) {
    if (!name)
      name = folder.name;
    let fileExplorerItem = getEl(folder.path, this);
    if (!fileExplorerItem) {
      if (waitForCreate && count < 5) {
        await new Promise((r) => setTimeout(r, 500));
        this.changeName(folder, name, replacePath, waitForCreate, count + 1);
        return;
      }
      return;
    }
    fileExplorerItem = fileExplorerItem == null ? void 0 : fileExplorerItem.querySelector("div.nav-folder-title-content");
    if (!fileExplorerItem) {
      return;
    }
    if (this.settings.frontMatterTitle.explorer && this.settings.frontMatterTitle.enabled) {
      fileExplorerItem.innerText = name;
      fileExplorerItem.setAttribute("old-name", folder.name);
    } else {
      fileExplorerItem.innerText = folder.name;
      fileExplorerItem.removeAttribute("old-name");
    }
    if (replacePath) {
      this.updateBreadcrumbs();
    }
  }
  updateBreadcrumbs(remove) {
    if (!this.settings.frontMatterTitle.path && !remove) {
      return;
    }
    const viewHeaderItems = document.querySelectorAll("span.view-header-breadcrumb");
    const files = this.app.vault.getAllLoadedFiles().filter((file) => file instanceof import_obsidian35.TFolder);
    viewHeaderItems.forEach((item) => {
      if (!item.hasAttribute("data-path")) {
        return;
      }
      const path = item.getAttribute("data-path");
      const folder = files.find((file) => file.path === path);
      if (!(folder instanceof import_obsidian35.TFolder)) {
        return;
      }
      if (remove) {
        item.textContent = folder.name;
        item.removeAttribute("old-name");
      } else {
        item.textContent = folder.newName || folder.name;
        item.setAttribute("old-name", folder.name);
        item.setAttribute("data-path", folder.path);
      }
    });
  }
  reloadHandlers() {
    document.querySelectorAll("div.nav-folder-title-content").forEach((element) => {
      if (element.onclick)
        return;
      element.onclick = (event) => handleFolderClick(event, this);
    });
  }
  onunload() {
    console.log("unloading folder notes plugin");
    this.observer.disconnect();
    document.body.classList.remove("folder-notes-plugin");
    document.body.classList.remove("folder-note-underline");
    document.body.classList.remove("hide-folder-note");
    document.body.classList.remove("fn-whitespace-stop-collapsing");
    if (this.activeFolderDom) {
      this.activeFolderDom.removeClass("is-active");
    }
    if (this.fmtpHandler) {
      this.fmtpHandler.deleteEvent();
    }
  }
  async loadSettings() {
    const data = await this.loadData();
    if (data) {
      if (data.allowWhitespaceCollapsing === true) {
        data.stopWhitespaceCollapsing = false;
        delete data.allowWhitespaceCollapsing;
      } else if (data.allowWhitespaceCollapsing === false) {
        data.stopWhitespaceCollapsing = true;
        delete data.allowWhitespaceCollapsing;
      }
    }
    this.settings = Object.assign({}, DEFAULT_SETTINGS, data);
    if (!data) {
      return;
    }
    const overview = data.defaultOverview;
    if (!overview) {
      return;
    }
    this.settings.defaultOverview = Object.assign({}, DEFAULT_SETTINGS.defaultOverview, overview);
  }
  async saveSettings(reloadStyles) {
    await this.saveData(this.settings);
    if ((!this.settingsOpened || reloadStyles === true) && reloadStyles !== false) {
      loadFileClasses(true, this);
    }
  }
};

// src/folderOverview/src/suggesters/FolderSuggester.ts
var FolderSuggest2 = class extends TextInputSuggest {
  constructor(inputEl, plugin, whitelistSuggester, folder) {
    super(inputEl, plugin);
    this.inputEl = inputEl;
    this.whitelistSuggester = whitelistSuggester;
    this.folder = folder;
  }
  get_error_msg(mode) {
    switch (mode) {
      case 0 /* TemplateFiles */:
        return "Templates folder doesn't exist";
      case 1 /* ScriptFiles */:
        return "User Scripts folder doesn't exist";
    }
  }
  getSuggestions(input_str) {
    const folders = [];
    const lower_input_str = input_str.toLowerCase();
    let files = [];
    if (this.folder) {
      files = this.folder.children;
    } else {
      files = this.plugin.app.vault.getAllLoadedFiles().slice(0, 100);
    }
    files.forEach((folder) => {
      if (folder instanceof import_obsidian36.TFolder && folder.path.toLowerCase().contains(lower_input_str) && (this.plugin instanceof FolderNotesPlugin ? !this.plugin.settings.excludeFolders.find((f) => f.path === folder.path) || this.whitelistSuggester : true)) {
        folders.push(folder);
      }
    });
    return folders;
  }
  renderSuggestion(folder, el) {
    el.setText(folder.path);
  }
  selectSuggestion(folder) {
    this.inputEl.value = folder.path;
    this.inputEl.trigger("input");
    this.close();
  }
};

// src/folderOverview/src/utils/EventEmitter.ts
var CustomEventEmitter2 = class {
  constructor() {
    this.events = {};
  }
  on(event, listener) {
    if (!this.events[event]) {
      this.events[event] = [];
    }
    this.events[event].push(listener);
  }
  off(event, listener) {
    if (!this.events[event])
      return;
    this.events[event] = this.events[event].filter((l) => l !== listener);
  }
  emit(event, data) {
    if (!this.events[event])
      return;
    this.events[event].forEach((listener) => listener(data));
  }
};

// src/folderOverview/src/utils/ListComponent.ts
var ListComponent2 = class {
  constructor(containerEl, values = [], defaultValues = []) {
    this.emitter = new CustomEventEmitter2();
    this.containerEl = containerEl;
    this.controlEl = containerEl.querySelector(".setting-item-control") || containerEl;
    this.listEl = this.controlEl.createDiv("setting-command-hotkeys");
    this.addResetButton();
    this.setValues(values);
    this.defaultValues = defaultValues;
  }
  on(event, listener) {
    this.emitter.on(event, listener);
  }
  off(event, listener) {
    this.emitter.off(event, listener);
  }
  emit(event, data) {
    this.emitter.emit(event, data);
  }
  setValues(values) {
    this.removeElements();
    this.values = values;
    if (values.length !== 0) {
      values.forEach((value) => {
        this.addElement(value);
      });
    }
    this.emit("update", this.values);
  }
  removeElements() {
    this.listEl.empty();
  }
  addElement(value) {
    this.listEl.createSpan("setting-hotkey", (span) => {
      if (value.toLocaleLowerCase() === "md") {
        span.innerText = "markdown";
      } else {
        span.innerText = value;
      }
      span.setAttribute("extension", value);
      const removeSpan = span.createEl("span", { cls: "ofn-list-item-remove setting-hotkey-icon" });
      const svg = '<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-x"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>';
      const svgElement = removeSpan.createEl("span", { cls: "ofn-list-item-remove-icon" });
      svgElement.innerHTML = svg;
      removeSpan.onClickEvent((e) => {
        this.removeValue(value);
        span.remove();
      });
    });
  }
  async addValue(value) {
    this.values.push(value);
    this.addElement(value);
    this.emit("add", value);
    this.emit("update", this.values);
  }
  addResetButton() {
    const resetButton = this.controlEl.createEl("span", { cls: "clickable-icon setting-restore-hotkey-button" });
    const svg = '<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-rotate-ccw"><path d="M3 2v6h6"></path><path d="M3 13a9 9 0 1 0 3-7.7L3 8"></path></svg>';
    resetButton.innerHTML = svg;
    resetButton.onClickEvent((e) => {
      this.setValues(this.defaultValues);
    });
    return this;
  }
  removeValue(value) {
    this.values = this.values.filter((v) => v !== value);
    this.listEl.find(`[extension='${value}']`).remove();
    this.emit("remove", value);
    this.emit("update", this.values);
  }
};

// src/folderOverview/src/settings.ts
var DEFAULT_SETTINGS2 = {
  id: "",
  folderPath: "",
  title: "{{folderName}} overview",
  showTitle: false,
  depth: 3,
  includeTypes: ["folder", "markdown"],
  style: "list",
  disableFileTag: false,
  sortBy: "name",
  sortByAsc: true,
  showEmptyFolders: false,
  onlyIncludeSubfolders: false,
  storeFolderCondition: true,
  showFolderNotes: false,
  disableCollapseIcon: true,
  alwaysCollapse: false
};
var SettingsTab2 = class extends import_obsidian37.PluginSettingTab {
  constructor(plugin) {
    super(plugin.app, plugin);
  }
  display() {
    const { containerEl } = this;
    this.display = this.display.bind(this);
    containerEl.empty();
    createOverviewSettings(containerEl, this.plugin.settings, this.plugin, this.plugin.settings, this.display, void 0, void 0, void 0, this);
  }
};
async function createOverviewSettings(contentEl, yaml, plugin, defaultSettings, display, el, ctx, file, settingsTab, modal) {
  var _a, _b, _c;
  new import_obsidian37.Setting(contentEl).setName("Show the title").setDesc("Choose if the title should be shown").addToggle((toggle) => toggle.setValue(yaml.showTitle).onChange(async (value) => {
    yaml.showTitle = value;
    updateSettings(contentEl, yaml, plugin, defaultSettings, el, ctx, file);
    ;
    refresh(contentEl, yaml, plugin, defaultSettings, display, el, ctx, file, settingsTab, modal);
  }));
  if (yaml.showTitle) {
    new import_obsidian37.Setting(contentEl).setName("Title").setDesc("Choose the title of the folder overview").addText((text) => text.setValue((yaml == null ? void 0 : yaml.title) || "{{folderName}} overview").onChange(async (value) => {
      yaml.title = value;
      updateSettings(contentEl, yaml, plugin, defaultSettings, el, ctx, file);
      ;
    }));
  }
  const folderPathSetting = new import_obsidian37.Setting(contentEl).setName("Folder path for the overview").setDesc("Choose the folder path for the overview").addSearch((search) => {
    new FolderSuggest2(search.inputEl, plugin, false);
    search.setPlaceholder("Folder path").setValue((yaml == null ? void 0 : yaml.folderPath) || "").onChange(async (value) => {
      if (!(plugin.app.vault.getAbstractFileByPath(value) instanceof import_obsidian37.TFolder) && value !== "")
        return;
      yaml.folderPath = value;
      updateSettings(contentEl, yaml, plugin, defaultSettings, el, ctx, file);
      ;
    });
  });
  folderPathSetting.settingEl.classList.add("fn-overview-folder-path");
  new import_obsidian37.Setting(contentEl).setName("Overview style").setDesc("Choose the style of the overview (grid style soon)").addDropdown((dropdown) => dropdown.addOption("list", "List").addOption("explorer", "Explorer").setValue((yaml == null ? void 0 : yaml.style) || "list").onChange(async (value) => {
    yaml.style = value;
    updateSettings(contentEl, yaml, plugin, defaultSettings, el, ctx, file);
    refresh(contentEl, yaml, plugin, defaultSettings, display, el, ctx, file, settingsTab, modal);
  }));
  if (yaml.style === "explorer") {
    new import_obsidian37.Setting(contentEl).setName("Store collapsed condition").setDesc("Choose if the collapsed condition should be stored stored until you restart Obsidian").addToggle((toggle) => toggle.setValue(yaml.storeFolderCondition).onChange(async (value) => {
      yaml.storeFolderCondition = value;
      updateSettings(contentEl, yaml, plugin, defaultSettings, el, ctx, file);
      ;
    }));
  }
  const setting = new import_obsidian37.Setting(contentEl);
  setting.setName("Include types");
  const list = new ListComponent2(setting.settingEl, yaml.includeTypes || [], ["markdown", "folder"]);
  list.on("update", (values) => {
    yaml.includeTypes = values;
    updateSettings(contentEl, yaml, plugin, defaultSettings, el, ctx, file);
    refresh(contentEl, yaml, plugin, defaultSettings, display, el, ctx, file, settingsTab, modal);
  });
  if ((((_a = yaml == null ? void 0 : yaml.includeTypes) == null ? void 0 : _a.length) || 0) < 8 && !((_b = yaml.includeTypes) == null ? void 0 : _b.includes("all"))) {
    setting.addDropdown((dropdown) => {
      if (!yaml.includeTypes)
        yaml.includeTypes = plugin instanceof FolderNotesPlugin ? plugin.settings.defaultOverview.includeTypes : plugin.settings.includeTypes || [];
      yaml.includeTypes = yaml.includeTypes.map((type) => type.toLowerCase());
      const options = [
        { value: "markdown", label: "Markdown" },
        { value: "folder", label: "Folder" },
        { value: "canvas", label: "Canvas" },
        { value: "pdf", label: "PDF" },
        { value: "image", label: "Image" },
        { value: "audio", label: "Audio" },
        { value: "video", label: "Video" },
        { value: "other", label: "All other file types" },
        { value: "all", label: "All file types" }
      ];
      options.forEach((option) => {
        var _a2;
        if (!((_a2 = yaml.includeTypes) == null ? void 0 : _a2.includes(option.value))) {
          dropdown.addOption(option.value, option.label);
        }
      });
      dropdown.addOption("+", "+");
      dropdown.setValue("+");
      dropdown.onChange(async (value) => {
        var _a2;
        if (value === "all") {
          yaml.includeTypes = (_a2 = yaml.includeTypes) == null ? void 0 : _a2.filter((type) => type === "folder");
          list.setValues(yaml.includeTypes);
        }
        await list.addValue(value.toLowerCase());
        updateSettings(contentEl, yaml, plugin, defaultSettings, el, ctx, file);
        refresh(contentEl, yaml, plugin, defaultSettings, display, el, ctx, file, settingsTab, modal);
      });
    });
  }
  let disableFileTag;
  (_c = yaml.includeTypes) == null ? void 0 : _c.forEach((type) => {
    type === "folder" || type === "markdown" ? disableFileTag = true : null;
  });
  if (disableFileTag) {
    new import_obsidian37.Setting(contentEl).setName("Disable file tag").setDesc("Choose if the file tag should be shown after the file name").addToggle((toggle) => {
      toggle.setValue(yaml.disableFileTag).onChange(async (value) => {
        yaml.disableFileTag = value;
        updateSettings(contentEl, yaml, plugin, defaultSettings, el, ctx, file);
      });
    });
  }
  new import_obsidian37.Setting(contentEl).setName("Show folder notes").setDesc("Choose if folder notes (the note itself and not the folder name) should be shown in the overview").addToggle((toggle) => toggle.setValue(yaml.showFolderNotes).onChange(async (value) => {
    yaml.showFolderNotes = value;
    updateSettings(contentEl, yaml, plugin, defaultSettings, el, ctx, file);
  }));
  new import_obsidian37.Setting(contentEl).setName("File depth").setDesc("File & folder = +1 depth").addSlider((slider) => slider.setValue((yaml == null ? void 0 : yaml.depth) || 2).setLimits(1, 10, 1).setDynamicTooltip().onChange(async (value) => {
    yaml.depth = value;
    updateSettings(contentEl, yaml, plugin, defaultSettings, el, ctx, file);
  }));
  new import_obsidian37.Setting(contentEl).setName("Sort files by").setDesc("Choose how the files should be sorted").addDropdown((dropdown) => dropdown.addOption("name", "Name").addOption("created", "Created").addOption("modified", "Modified").setValue((yaml == null ? void 0 : yaml.sortBy) || "name").onChange(async (value) => {
    yaml.sortBy = value;
    updateSettings(contentEl, yaml, plugin, defaultSettings, el, ctx, file);
  })).addDropdown((dropdown) => {
    dropdown.addOption("desc", "Descending").addOption("asc", "Ascending");
    if (yaml.sortByAsc) {
      dropdown.setValue("asc");
    } else {
      dropdown.setValue("desc");
    }
    dropdown.onChange(async (value) => {
      if (value === "desc") {
        yaml.sortByAsc = false;
      } else {
        yaml.sortByAsc = true;
      }
      updateSettings(contentEl, yaml, plugin, defaultSettings, el, ctx, file);
    });
  });
  if (yaml.style === "list") {
    new import_obsidian37.Setting(contentEl).setName("Show folder names of folders that appear empty in the folder overview").setDesc("Show the names of folders that appear to have no files/folders in the folder overview. That's mostly the case when you set the file depth to 1.").addToggle((toggle) => {
      toggle.setValue(yaml.showEmptyFolders).onChange(async (value) => {
        yaml.showEmptyFolders = value;
        yaml.onlyIncludeSubfolders = false;
        updateSettings(contentEl, yaml, plugin, defaultSettings, el, ctx, file);
        refresh(contentEl, yaml, plugin, defaultSettings, display, el, ctx, file, settingsTab, modal);
      });
    });
    if (yaml.showEmptyFolders) {
      new import_obsidian37.Setting(contentEl).setName("Only show empty folders which are on the first level of the folder overview").addToggle((toggle) => {
        toggle.setValue(yaml.onlyIncludeSubfolders).onChange(async (value) => {
          yaml.onlyIncludeSubfolders = value;
          updateSettings(contentEl, yaml, plugin, defaultSettings, el, ctx, file);
        });
      });
    }
  }
  if (yaml.style === "explorer") {
    new import_obsidian37.Setting(contentEl).setName("Disable collapse icon for folder notes").setDesc("Remove the collapse icon next to the folder name for folder notes when they only contain the folder note itself").addToggle((toggle) => {
      toggle.setValue(yaml.disableCollapseIcon).onChange(async (value) => {
        yaml.disableCollapseIcon = value;
        updateSettings(contentEl, yaml, plugin, defaultSettings, el, ctx, file);
      });
    });
    new import_obsidian37.Setting(contentEl).setName("Collapse all in the tree by default").setDesc("Collapse every folder in the file explorer in the overview by default").addToggle((toggle) => {
      toggle.setValue(yaml.alwaysCollapse).onChange(async (value) => {
        yaml.alwaysCollapse = value;
        updateSettings(contentEl, yaml, plugin, defaultSettings, el, ctx, file);
      });
    });
  }
}
async function updateSettings(contentEl, yaml, plugin, defaultSettings, el, ctx, file) {
  if (!yaml.id) {
    return plugin.saveSettings();
  }
  if (el && ctx) {
    await updateYaml(plugin, ctx, el, yaml);
  }
  if (file) {
    await updateYamlById(plugin, yaml.id, file, yaml);
  }
  plugin.updateOverviewView();
}
function refresh(contentEl, yaml, plugin, defaultSettings, display, el, ctx, file, settingsTab, modal) {
  if (file) {
    contentEl = contentEl.parentElement;
  }
  display(contentEl, yaml, plugin, defaultSettings, display, el, ctx, file, settingsTab, modal);
}

// src/folderOverview/src/modals/Settings.ts
var FolderOverviewSettings = class extends import_obsidian38.Modal {
  constructor(app2, plugin, yaml, ctx, el, defaultSettings) {
    var _a, _b, _c, _d, _e, _f, _g, _h, _i, _j, _k, _l, _m, _n, _o;
    super(app2);
    this.plugin = plugin;
    this.app = app2;
    if (!yaml) {
      this.yaml = this.defaultSettings;
    } else if (ctx) {
      const includeTypes2 = (yaml == null ? void 0 : yaml.includeTypes) || defaultSettings.includeTypes || ["folder", "markdown"];
      this.yaml = {
        id: (_a = yaml == null ? void 0 : yaml.id) != null ? _a : crypto.randomUUID(),
        folderPath: (_b = yaml == null ? void 0 : yaml.folderPath) != null ? _b : getFolderPathFromString(ctx.sourcePath),
        title: (_c = yaml == null ? void 0 : yaml.title) != null ? _c : defaultSettings.title,
        showTitle: (_d = yaml == null ? void 0 : yaml.showTitle) != null ? _d : defaultSettings.showTitle,
        depth: (_e = yaml == null ? void 0 : yaml.depth) != null ? _e : defaultSettings.depth,
        style: (_f = yaml == null ? void 0 : yaml.style) != null ? _f : "list",
        includeTypes: includeTypes2.map((type) => type.toLowerCase()),
        disableFileTag: (_g = yaml == null ? void 0 : yaml.disableFileTag) != null ? _g : defaultSettings.disableFileTag,
        sortBy: (_h = yaml == null ? void 0 : yaml.sortBy) != null ? _h : defaultSettings.sortBy,
        sortByAsc: (_i = yaml == null ? void 0 : yaml.sortByAsc) != null ? _i : defaultSettings.sortByAsc,
        showEmptyFolders: (_j = yaml == null ? void 0 : yaml.showEmptyFolders) != null ? _j : defaultSettings.showEmptyFolders,
        onlyIncludeSubfolders: (_k = yaml == null ? void 0 : yaml.onlyIncludeSubfolders) != null ? _k : defaultSettings.onlyIncludeSubfolders,
        storeFolderCondition: (_l = yaml == null ? void 0 : yaml.storeFolderCondition) != null ? _l : defaultSettings.storeFolderCondition,
        showFolderNotes: (_m = yaml == null ? void 0 : yaml.showFolderNotes) != null ? _m : defaultSettings.showFolderNotes,
        disableCollapseIcon: (_n = yaml == null ? void 0 : yaml.disableCollapseIcon) != null ? _n : defaultSettings.disableCollapseIcon,
        alwaysCollapse: (_o = yaml == null ? void 0 : yaml.alwaysCollapse) != null ? _o : defaultSettings.alwaysCollapse
      };
    }
    if (ctx) {
      this.ctx = ctx;
    }
    if (el) {
      this.el = el;
    }
    updateYaml(this.plugin, this.ctx, this.el, this.yaml);
  }
  onOpen() {
    const { contentEl } = this;
    this.display(contentEl, this.yaml, this.plugin, this.defaultSettings, this.display, this.el, this.ctx);
  }
  display(contentEl, yaml, plugin, defaultSettings, display, el, ctx, file, settingsTab, modal) {
    modal = this != null ? this : modal;
    contentEl.empty();
    contentEl.addEventListener("keydown", (e) => {
      if (e.key === "Enter") {
        modal.close();
      }
    });
    if (!modal.defaultSettings) {
      contentEl.createEl("h2", { text: "Folder overview settings" });
    } else {
      contentEl.createEl("h2", { text: "Default folder overview settings" });
    }
    createOverviewSettings(contentEl, yaml, plugin, defaultSettings, display, el, ctx, void 0, void 0, modal);
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
  }
};

// src/folderOverview/src/FileExplorer.ts
var import_obsidian39 = require("obsidian");
var FileExplorerOverview = class {
  constructor(plugin, ctx, root, yaml, pathBlacklist, folderOverview) {
    this.eventListeners = [];
    this.plugin = plugin;
    this.folderOverview = folderOverview;
    this.pathBlacklist = pathBlacklist;
    this.source = ctx.sourcePath;
    this.yaml = yaml;
    this.root = root;
  }
  disconnectListeners() {
    this.eventListeners.forEach((unregister) => {
      unregister();
    });
    this.eventListeners = [];
  }
  async renderFileExplorer() {
    this.disconnectListeners();
    const plugin = this.plugin;
    const ctx = this.folderOverview.ctx;
    const root = this.folderOverview.root;
    const yaml = this.folderOverview.yaml;
    const folderOverview = this.folderOverview;
    let folder = null;
    if (plugin instanceof FolderOverviewPlugin) {
      folder = getEl(yaml.folderPath, plugin);
    }
    let folderElement = folder == null ? void 0 : folder.parentElement;
    const source = ctx.sourcePath;
    const overviewList = folderOverview.listEl;
    overviewList == null ? void 0 : overviewList.empty();
    if (!overviewList)
      return;
    let tFolder = plugin.app.vault.getAbstractFileByPath(yaml.folderPath);
    if (!tFolder && yaml.folderPath.trim() == "") {
      if (ctx.sourcePath.includes("/")) {
        tFolder = plugin.app.vault.getAbstractFileByPath(getFolderPathFromString2(ctx.sourcePath));
      } else {
        yaml.folderPath = "/";
        tFolder = plugin.app.vault.getAbstractFileByPath("/");
      }
    }
    if (!folderElement && !tFolder)
      return;
    const sourceFolderPath = (tFolder == null ? void 0 : tFolder.path) || "";
    folderElement = document.querySelectorAll(".nav-files-container")[0];
    if (!folderElement) {
      folderElement = root.createDiv({
        cls: "nav-files-container"
      });
    }
    const newFolderElement = folderElement.cloneNode(true);
    newFolderElement.querySelectorAll("div.nav-folder-title").forEach((el) => {
      var _a;
      const folder2 = plugin.app.vault.getAbstractFileByPath(el.getAttribute("data-path") || "");
      if (!(folder2 instanceof import_obsidian39.TFolder))
        return;
      if (yaml.alwaysCollapse) {
        folder2.collapsed = true;
        el.classList.add("is-collapsed");
      } else {
        if (yaml.storeFolderCondition) {
          if (folder2.collapsed) {
            el.classList.add("is-collapsed");
          } else {
            el.classList.remove("is-collapsed");
          }
        } else {
          if ((_a = el.parentElement) == null ? void 0 : _a.classList.contains("is-collapsed")) {
            folder2.collapsed = true;
          } else {
            folder2.collapsed = false;
          }
        }
      }
      if (el.classList.contains("has-folder-note")) {
        if (plugin instanceof FolderNotesPlugin) {
          const folderNote = getFolderNote(plugin, folder2.path);
          if (folderNote) {
            folderOverview.pathBlacklist.push(folderNote.path);
          }
        }
      }
    });
    const debouncedRenderFileExplorer = this.debounce(() => this.renderFileExplorer(), 300);
    const handleVaultChange = () => {
      debouncedRenderFileExplorer();
    };
    this.eventListeners.push(() => {
      folderOverview.off("vault-change", handleVaultChange);
    });
    folderOverview.on("vault-change", handleVaultChange);
    if (tFolder instanceof import_obsidian39.TFolder) {
      await this.addFiles(tFolder.children, overviewList, folderOverview, sourceFolderPath);
    }
    newFolderElement.querySelectorAll("div.tree-item-icon").forEach((el) => {
      if (el instanceof HTMLElement) {
        el.onclick = () => {
          var _a;
          const path = (_a = el.parentElement) == null ? void 0 : _a.getAttribute("data-path");
          if (!path)
            return;
          const folder2 = plugin.app.vault.getAbstractFileByPath(path);
          this.handleCollapseClick(el, plugin, yaml, this.pathBlacklist, sourceFolderPath, folderOverview, folder2);
        };
      }
    });
  }
  debounce(func, wait) {
    let timeout;
    return (...args) => {
      clearTimeout(timeout);
      timeout = window.setTimeout(() => func.apply(this, args), wait);
    };
  }
  async addFiles(files, childrenElement, folderOverview, sourceFolderPath) {
    const plugin = folderOverview.plugin;
    const allFiles = await folderOverview.filterFiles(files, plugin, sourceFolderPath, folderOverview.yaml.depth, folderOverview.pathBlacklist);
    const sortedFiles = folderOverview.sortFiles(allFiles);
    const folders = sortedFiles.filter((child) => child instanceof import_obsidian39.TFolder);
    const otherFiles = sortedFiles.filter((child) => child instanceof import_obsidian39.TFile);
    for (const child of folders) {
      await this.createFolderEL(plugin, child, folderOverview, childrenElement, sourceFolderPath);
    }
    for (const child of otherFiles) {
      await this.createFileEL(plugin, child, folderOverview, childrenElement);
    }
  }
  async handleCollapseClick(el, plugin, yaml, pathBlacklist, sourceFolderPath, folderOverview, folder) {
    var _a, _b, _c, _d;
    el.classList.toggle("is-collapsed");
    if (el.classList.contains("is-collapsed")) {
      if (!(folder instanceof import_obsidian39.TFolder))
        return;
      folder.collapsed = true;
      (_c = (_b = (_a = el.parentElement) == null ? void 0 : _a.parentElement) == null ? void 0 : _b.childNodes[1]) == null ? void 0 : _c.remove();
    } else {
      if (!(folder instanceof import_obsidian39.TFolder))
        return;
      folder.collapsed = false;
      const folderElement = (_d = el.parentElement) == null ? void 0 : _d.parentElement;
      if (!folderElement)
        return;
      const childrenElement = folderElement.createDiv({ cls: "tree-item-children nav-folder-children" });
      let files = folderOverview.sortFiles(folder.children);
      files = await folderOverview.filterFiles(files, plugin, folder.path, yaml.depth || 1, pathBlacklist);
      await this.addFiles(files, childrenElement, folderOverview, sourceFolderPath);
    }
  }
  async createFolderEL(plugin, child, folderOverview, childrenElement, sourceFolderPath) {
    const pathBlacklist = folderOverview.pathBlacklist;
    const source = folderOverview.source;
    let folderNote = void 0;
    if (plugin instanceof FolderNotesPlugin) {
      folderNote = getFolderNote(plugin, child.path);
    }
    const yaml = folderOverview.yaml;
    let folderTitle = null;
    let folderElement = null;
    if (folderNote) {
      pathBlacklist.push(folderNote.path);
    }
    let excludedFolder = void 0;
    if (plugin instanceof FolderNotesPlugin) {
      excludedFolder = await getExcludedFolder(plugin, child.path, true);
    }
    if (excludedFolder == null ? void 0 : excludedFolder.excludeFromFolderOverview) {
      return;
    }
    const svg = '<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg>';
    if (yaml.includeTypes.includes("folder")) {
      folderElement = childrenElement.createDiv({
        cls: "tree-item nav-folder"
      });
      folderTitle = folderElement.createDiv({
        cls: "tree-item-self is-clickable nav-folder-title",
        attr: {
          "data-path": child.path,
          "draggable": "true"
        }
      });
      const folderTitleText = folderTitle == null ? void 0 : folderTitle.createDiv({
        cls: "tree-item-inner nav-folder-title-content",
        text: child.name
      });
      if (folderTitleText && !folderNote) {
        folderTitleText.onclick = () => {
          const collapseIcon2 = folderTitle == null ? void 0 : folderTitle.querySelectorAll(".tree-item-icon")[0];
          if (collapseIcon2) {
            this.handleCollapseClick(collapseIcon2, plugin, yaml, pathBlacklist, sourceFolderPath, folderOverview, child);
          }
        };
      }
      folderTitle.draggable = true;
      folderTitle.addEventListener("dragstart", (e) => {
        const dragManager = plugin.app.dragManager;
        const dragData = dragManager.dragFolder(e, child);
        dragManager.onDragStart(e, dragData);
        folderTitle == null ? void 0 : folderTitle.classList.add("is-being-dragged");
      });
      folderTitle.addEventListener("dragend", (e) => {
        folderTitle == null ? void 0 : folderTitle.classList.remove("is-being-dragged");
      });
      folderTitle.addEventListener("dragover", (e) => {
        e.preventDefault();
        const { draggable } = plugin.app.dragManager;
        if (draggable && draggable.file instanceof import_obsidian39.TFolder) {
          folderElement == null ? void 0 : folderElement.classList.add("is-being-dragged-over");
          plugin.app.dragManager.setAction(window.i18next.t("interface.drag-and-drop.move-into-folder", { folder: child.name }));
        }
      });
      folderTitle.addEventListener("dragleave", (e) => {
        folderElement == null ? void 0 : folderElement.classList.remove("is-being-dragged-over");
      });
      folderTitle.addEventListener("drop", (e) => {
        const { draggable } = plugin.app.dragManager;
        if (draggable && draggable.file instanceof import_obsidian39.TFolder) {
          plugin.app.fileManager.renameFile(draggable.file, child.path + "/" + draggable.file.name);
        }
      });
      folderTitle.oncontextmenu = (e) => {
        folderOverview.folderMenu(child, e);
      };
    }
    if (!child.collapsed) {
      if (yaml.alwaysCollapse) {
        child.collapsed = true;
      }
      if (yaml.includeTypes.includes("folder")) {
        folderTitle == null ? void 0 : folderTitle.classList.remove("is-collapsed");
        const childrenElement2 = folderElement == null ? void 0 : folderElement.createDiv({ cls: "tree-item-children nav-folder-children" });
        if (childrenElement2) {
          await this.addFiles(child.children, childrenElement2, folderOverview, sourceFolderPath);
        }
      } else {
        await this.addFiles(child.children, childrenElement, folderOverview, sourceFolderPath);
      }
    } else {
      folderTitle == null ? void 0 : folderTitle.classList.add("is-collapsed");
    }
    if (folderNote) {
      folderTitle == null ? void 0 : folderTitle.classList.add("has-folder-note");
    }
    if (folderNote && child.children.length === 1 && yaml.disableCollapseIcon) {
      folderTitle == null ? void 0 : folderTitle.classList.add("fn-has-no-files");
    }
    const collapseIcon = folderTitle == null ? void 0 : folderTitle.createDiv({
      cls: "tree-item-icon collapse-icon nav-folder-collapse-indicator fn-folder-overview-collapse-icon"
    });
    if (child.collapsed) {
      collapseIcon == null ? void 0 : collapseIcon.classList.add("is-collapsed");
    }
    if (collapseIcon) {
      collapseIcon.innerHTML = svg;
      collapseIcon.onclick = () => {
        this.handleCollapseClick(collapseIcon, plugin, yaml, pathBlacklist, sourceFolderPath, folderOverview, child);
      };
    }
  }
  async createFileEL(plugin, child, folderOverview, childrenElement) {
    const yaml = folderOverview.yaml;
    const pathBlacklist = folderOverview.pathBlacklist;
    if (pathBlacklist.includes(child.path) && !yaml.showFolderNotes) {
      return;
    }
    const extension = child.extension.toLowerCase() == "md" ? "markdown" : child.extension.toLowerCase();
    const includeTypes2 = yaml.includeTypes;
    if (includeTypes2.length > 0 && !includeTypes2.includes("all")) {
      if ((extension === "md" || extension === "markdown") && !includeTypes2.includes("markdown"))
        return;
      if (extension === "canvas" && !includeTypes2.includes("canvas"))
        return;
      if (extension === "pdf" && !includeTypes2.includes("pdf"))
        return;
      const imageTypes = ["jpg", "jpeg", "png", "gif", "svg", "webp"];
      if (imageTypes.includes(extension) && !includeTypes2.includes("image"))
        return;
      const videoTypes = ["mp4", "webm", "ogv", "mov", "mkv"];
      if (videoTypes.includes(extension) && !includeTypes2.includes("video"))
        return;
      const audioTypes = ["mp3", "wav", "m4a", "3gp", "flac", "ogg", "oga", "opus"];
      if (audioTypes.includes(extension) && includeTypes2.includes("audio"))
        return;
      const allTypes = ["markdown", "md", "canvas", "pdf", ...imageTypes, ...videoTypes, ...audioTypes];
      if (!allTypes.includes(extension) && !includeTypes2.includes("other"))
        return;
    }
    const fileElement = childrenElement.createDiv({
      cls: "tree-item nav-file"
    });
    const fileTitle = fileElement.createDiv({
      cls: "tree-item-self is-clickable nav-file-title pointer-cursor",
      attr: {
        "data-path": child.path,
        "draggable": "true"
      }
    });
    fileTitle.addEventListener("dragover", (e) => {
      var _a, _b, _c;
      e.preventDefault();
      const { draggable } = plugin.app.dragManager;
      if (draggable && draggable.file instanceof import_obsidian39.TFolder) {
        plugin.app.dragManager.setAction(window.i18next.t("interface.drag-and-drop.move-into-folder", { folder: ((_a = child.parent) == null ? void 0 : _a.name) || "" }));
        const folderEL = folderOverview.getElFromOverview(((_b = child.parent) == null ? void 0 : _b.path) || "");
        if (folderEL) {
          (_c = folderEL.parentElement) == null ? void 0 : _c.classList.add("is-being-dragged-over");
        }
      }
    });
    fileTitle.addEventListener("dragleave", (e) => {
      var _a, _b;
      const folderEL = folderOverview.getElFromOverview(((_a = child.parent) == null ? void 0 : _a.path) || "");
      if (folderEL) {
        (_b = folderEL.parentElement) == null ? void 0 : _b.classList.remove("is-being-dragged-over");
      }
    });
    fileTitle.addEventListener("drop", (e) => {
      var _a;
      const { draggable } = plugin.app.dragManager;
      if (draggable && draggable.file instanceof import_obsidian39.TFolder) {
        plugin.app.fileManager.renameFile(draggable.file, ((_a = child.parent) == null ? void 0 : _a.path) + "/" + draggable.file.name);
      }
    });
    fileTitle.onclick = () => {
      plugin.app.workspace.openLinkText(child.path, child.path, true);
    };
    fileTitle.oncontextmenu = (e) => {
      folderOverview.fileMenu(child, e);
    };
    fileTitle.createDiv({
      cls: "tree-item-inner nav-file-title-content",
      text: child.basename
    });
    if (child.extension !== "md" && !yaml.disableFileTag) {
      fileTitle.createDiv({
        cls: "nav-file-tag",
        text: child.extension
      });
    }
  }
};

// src/folderOverview/src/ListStyle.ts
var import_obsidian40 = require("obsidian");
function renderListOverview(plugin, ctx, root, yaml, pathBlacklist, folderOverview) {
  const overviewList = folderOverview.listEl;
  overviewList == null ? void 0 : overviewList.empty();
  let tFolder = plugin.app.vault.getAbstractFileByPath(yaml.folderPath);
  if (!tFolder && yaml.folderPath.trim() == "") {
    if (ctx.sourcePath.includes("/")) {
      tFolder = plugin.app.vault.getAbstractFileByPath(getFolderPathFromString2(ctx.sourcePath));
    } else {
      yaml.folderPath = "/";
      tFolder = plugin.app.vault.getAbstractFileByPath("/");
    }
  }
  if (!(tFolder instanceof import_obsidian40.TFolder)) {
    return;
  }
  let files = tFolder.children;
  if (!files) {
    return;
  }
  const ul = folderOverview.listEl;
  const sourceFolderPath = tFolder.path;
  const folders = folderOverview.sortFiles(files.filter((f) => f instanceof import_obsidian40.TFolder));
  files = folderOverview.sortFiles(files.filter((f) => f instanceof import_obsidian40.TFile));
  folders.forEach((file) => {
    if (file instanceof import_obsidian40.TFolder) {
      const folderItem = addFolderList(plugin, ul, folderOverview.pathBlacklist, file, folderOverview);
      if (!folderItem) {
        return;
      }
      goThroughFolders(plugin, folderItem, file, folderOverview.yaml.depth, sourceFolderPath, ctx, folderOverview.yaml, folderOverview.pathBlacklist, folderOverview.yaml.includeTypes, folderOverview.yaml.disableFileTag, folderOverview);
    }
  });
  files.forEach((file) => {
    if (file instanceof import_obsidian40.TFile) {
      addFileList(plugin, ul, folderOverview.pathBlacklist, file, folderOverview.yaml.includeTypes, folderOverview.yaml.disableFileTag, folderOverview);
    }
  });
  const debouncedRenderListOverview = debounce2(() => renderListOverview(plugin, ctx, root, yaml, pathBlacklist, folderOverview), 300);
  const handleVaultChange = () => {
    debouncedRenderListOverview();
  };
  folderOverview.on("vault-change", handleVaultChange);
}
function debounce2(func, wait) {
  let timeout;
  return (...args) => {
    clearTimeout(timeout);
    timeout = window.setTimeout(() => func.apply(this, args), wait);
  };
}
function addFolderList(plugin, list, pathBlacklist, folder, folderOverview) {
  const isFirstLevelSub = folder.path.split("/").length === folderOverview.yaml.folderPath.split("/").length + 1;
  if (!folderOverview.yaml.showEmptyFolders && folder.children.length === 0 && !folderOverview.yaml.onlyIncludeSubfolders) {
    return;
  } else if (folderOverview.yaml.onlyIncludeSubfolders && !isFirstLevelSub && folder.children.length === 0) {
    return;
  }
  const folderItem = list.createEl("li", { cls: "folder-overview-list folder-list" });
  if (plugin instanceof FolderNotesPlugin) {
    const folderNote = getFolderNote(plugin, folder.path);
    if (folderNote instanceof import_obsidian40.TFile) {
      const folderNoteLink = folderItem.createEl("a", { cls: "folder-overview-list-item folder-name-item internal-link", href: folderNote.path });
      folderNoteLink.innerText = folder.name;
      pathBlacklist.push(folderNote.path);
      folderNoteLink.oncontextmenu = (e) => {
        e.stopImmediatePropagation();
        folderOverview.fileMenu(folderNote, e);
      };
    } else {
      const folderName = folderItem.createEl("span", { cls: "folder-overview-list-item folder-name-item" });
      folderName.innerText = folder.name;
      folderName.oncontextmenu = (e) => {
        folderOverview.folderMenu(folder, e);
      };
    }
  } else {
    const folderName = folderItem.createEl("span", { cls: "folder-overview-list-item folder-name-item" });
    folderName.innerText = folder.name;
    folderName.oncontextmenu = (e) => {
      folderOverview.folderMenu(folder, e);
    };
  }
  return folderItem;
}
async function goThroughFolders(plugin, list, folder, depth, sourceFolderPath, ctx, yaml, pathBlacklist, includeTypes2, disableFileTag, folderOverview) {
  if (sourceFolderPath === "") {
    depth--;
  }
  const allFiles = await folderOverview.filterFiles(folder.children, plugin, sourceFolderPath, depth, pathBlacklist);
  const files = folderOverview.sortFiles(allFiles.filter((file) => !(file instanceof import_obsidian40.TFolder)));
  const folders = folderOverview.sortFiles(allFiles.filter((file) => file instanceof import_obsidian40.TFolder));
  const ul = list.createEl("ul", { cls: "folder-overview-list" });
  folders.forEach((file) => {
    if (file instanceof import_obsidian40.TFolder) {
      const folderItem = addFolderList(plugin, ul, pathBlacklist, file, folderOverview);
      if (!folderItem)
        return;
      goThroughFolders(plugin, folderItem, file, depth, sourceFolderPath, ctx, yaml, pathBlacklist, includeTypes2, disableFileTag, folderOverview);
    }
  });
  files.forEach((file) => {
    if (file instanceof import_obsidian40.TFile) {
      addFileList(plugin, ul, pathBlacklist, file, includeTypes2, disableFileTag, folderOverview);
    }
  });
}
function addFileList(plugin, list, pathBlacklist, file, includeTypes2, disableFileTag, folderOverview) {
  var _a;
  if (includeTypes2.length > 0 && !includeTypes2.includes("all")) {
    if (file.extension === "md" && !includeTypes2.includes("markdown"))
      return;
    if (file.extension === "canvas" && !includeTypes2.includes("canvas"))
      return;
    if (file.extension === "pdf" && !includeTypes2.includes("pdf"))
      return;
    const imageTypes = ["jpg", "jpeg", "png", "gif", "svg", "webp"];
    if (imageTypes.includes(file.extension) && !includeTypes2.includes("image"))
      return;
    const videoTypes = ["mp4", "webm", "ogv", "mov", "mkv"];
    if (videoTypes.includes(file.extension) && !includeTypes2.includes("video"))
      return;
    const audioTypes = ["mp3", "wav", "m4a", "3gp", "flac", "ogg", "oga", "opus"];
    if (audioTypes.includes(file.extension) && includeTypes2.includes("audio"))
      return;
    const allTypes = ["md", "canvas", "pdf", ...imageTypes, ...videoTypes, ...audioTypes];
    if (!allTypes.includes(file.extension) && !includeTypes2.includes("other"))
      return;
  }
  if (!folderOverview.yaml.showFolderNotes) {
    if (pathBlacklist.includes(file.path))
      return;
    if (plugin instanceof FolderNotesPlugin && extractFolderName(plugin.settings.folderNoteName, file.basename) === ((_a = file.parent) == null ? void 0 : _a.name)) {
      return;
    }
  }
  const listItem = list.createEl("li", { cls: "folder-overview-list file-link" });
  listItem.oncontextmenu = (e) => {
    e.stopImmediatePropagation();
    folderOverview.fileMenu(file, e);
  };
  const nameItem = listItem.createEl("div", { cls: "folder-overview-list-item" });
  const link = nameItem.createEl("a", { cls: "internal-link", href: file.path });
  link.innerText = file.basename;
  if (file.extension !== "md" && !disableFileTag) {
    nameItem.createDiv({ cls: "nav-file-tag" }).innerText = file.extension;
  }
}

// src/modals/NewFolderName.ts
var import_obsidian41 = require("obsidian");
var NewFolderNameModal = class extends import_obsidian41.Modal {
  constructor(app2, plugin, folder) {
    super(app2);
    this.plugin = plugin;
    this.app = app2;
    this.folder = folder;
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.addEventListener("keydown", (e) => {
      if (e.key === "Enter") {
        this.saveFolderName();
        this.close();
      }
    });
    this.modalEl.classList.add("mod-file-rename");
    const modalTitle = this.modalEl.querySelector("div.modal-title");
    if (modalTitle) {
      modalTitle.textContent = "Folder title";
    }
    const textarea = contentEl.createEl("textarea", {
      text: this.folder.name.replace(this.plugin.settings.folderNoteType, ""),
      attr: {
        placeholder: "Enter the name of the folder",
        rows: "1",
        spellcheck: "false",
        class: "rename-textarea"
      }
    });
    textarea.addEventListener("focus", function() {
      this.select();
    });
    textarea.focus();
    const buttonContainer = this.modalEl.createDiv({ cls: "modal-button-container" });
    const saveButton = buttonContainer.createEl("button", { text: "Save", cls: "mod-cta" });
    saveButton.addEventListener("click", async () => {
      this.saveFolderName();
      this.close();
    });
    const cancelButton = buttonContainer.createEl("button", { text: "Cancel", cls: "mod-cancel" });
    cancelButton.addEventListener("click", () => {
      this.close();
    });
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
  }
  saveFolderName() {
    const textarea = this.contentEl.querySelector("textarea");
    if (textarea) {
      const newName = textarea.value.trim();
      if (newName.trim() !== "") {
        if (!this.app.vault.getAbstractFileByPath(this.folder.path.slice(0, this.folder.path.lastIndexOf("/") + 1) + newName.trim())) {
          this.plugin.app.fileManager.renameFile(this.folder, this.folder.path.slice(0, this.folder.path.lastIndexOf("/") + 1) + newName.trim());
        }
      }
    }
  }
};

// src/folderOverview/src/FolderOverview.ts
var FolderOverview = class {
  constructor(plugin, ctx, source, el, defaultSettings) {
    this.pathBlacklist = [];
    this.folders = [];
    this.eventListeners = [];
    var _a, _b, _c, _d, _e, _f, _g, _h, _i, _j, _k, _l, _m, _n, _o;
    this.plugin = plugin;
    this.emitter = new CustomEventEmitter2();
    let yaml = (0, import_obsidian42.parseYaml)(source);
    if (!yaml) {
      yaml = {};
    }
    const includeTypes2 = (yaml == null ? void 0 : yaml.includeTypes) || defaultSettings.includeTypes || ["folder", "markdown"];
    this.ctx = ctx;
    this.source = source;
    this.el = el;
    this.sourceFilePath = this.ctx.sourcePath;
    this.sourceFolder = this.plugin.app.vault.getAbstractFileByPath(getFolderPathFromString2(ctx.sourcePath));
    this.defaultSettings = defaultSettings;
    this.yaml = {
      id: (_a = yaml == null ? void 0 : yaml.id) != null ? _a : crypto.randomUUID(),
      folderPath: (_b = yaml == null ? void 0 : yaml.folderPath) != null ? _b : getFolderPathFromString2(ctx.sourcePath),
      title: (_c = yaml == null ? void 0 : yaml.title) != null ? _c : defaultSettings.title,
      showTitle: (_d = yaml == null ? void 0 : yaml.showTitle) != null ? _d : defaultSettings.showTitle,
      depth: (_e = yaml == null ? void 0 : yaml.depth) != null ? _e : defaultSettings.depth,
      style: (_f = yaml == null ? void 0 : yaml.style) != null ? _f : "list",
      includeTypes: includeTypes2.map((type) => type.toLowerCase()),
      disableFileTag: (_g = yaml == null ? void 0 : yaml.disableFileTag) != null ? _g : defaultSettings.disableFileTag,
      sortBy: (_h = yaml == null ? void 0 : yaml.sortBy) != null ? _h : defaultSettings.sortBy,
      sortByAsc: (_i = yaml == null ? void 0 : yaml.sortByAsc) != null ? _i : defaultSettings.sortByAsc,
      showEmptyFolders: (_j = yaml == null ? void 0 : yaml.showEmptyFolders) != null ? _j : defaultSettings.showEmptyFolders,
      onlyIncludeSubfolders: (_k = yaml == null ? void 0 : yaml.onlyIncludeSubfolders) != null ? _k : defaultSettings.onlyIncludeSubfolders,
      storeFolderCondition: (_l = yaml == null ? void 0 : yaml.storeFolderCondition) != null ? _l : defaultSettings.storeFolderCondition,
      showFolderNotes: (_m = yaml == null ? void 0 : yaml.showFolderNotes) != null ? _m : defaultSettings.showFolderNotes,
      disableCollapseIcon: (_n = yaml == null ? void 0 : yaml.disableCollapseIcon) != null ? _n : defaultSettings.disableCollapseIcon,
      alwaysCollapse: (_o = yaml == null ? void 0 : yaml.alwaysCollapse) != null ? _o : defaultSettings.alwaysCollapse
    };
    const customChild = new CustomMarkdownRenderChild(el, this);
    ctx.addChild(customChild);
  }
  on(event, listener) {
    this.emitter.on(event, listener);
  }
  off(event, listener) {
    this.emitter.off(event, listener);
  }
  emit(event, data) {
    this.emitter.emit(event, data);
  }
  handleVaultChange(eventType) {
    this.emit("vault-change", eventType);
  }
  disconnectListeners() {
    this.eventListeners.forEach((unregister) => unregister());
    this.eventListeners = [];
  }
  registerListeners() {
    const plugin = this.plugin;
    const handleRename2 = () => this.handleVaultChange("renamed");
    const handleCreate2 = () => this.handleVaultChange("created");
    const handleDelete2 = () => this.handleVaultChange("deleted");
    plugin.app.vault.on("rename", handleRename2);
    plugin.app.vault.on("create", handleCreate2);
    plugin.app.vault.on("delete", handleDelete2);
    this.eventListeners.push(() => plugin.app.vault.off("rename", handleRename2));
    this.eventListeners.push(() => plugin.app.vault.off("create", handleCreate2));
    this.eventListeners.push(() => plugin.app.vault.off("delete", handleDelete2));
  }
  async create(plugin, source, el, ctx) {
    var _a;
    el.empty();
    (_a = el.parentElement) == null ? void 0 : _a.classList.add("folder-overview-container");
    const root = el.createEl("div", { cls: "folder-overview" });
    this.root = root;
    const titleEl = root.createEl("h1", { cls: "folder-overview-title" });
    const ul = root.createEl("ul", { cls: "folder-overview-list" });
    this.listEl = ul;
    if (this.yaml.includeTypes.length === 0) {
      return this.addEditButton(root);
    }
    let files = [];
    const sourceFile = plugin.app.vault.getAbstractFileByPath(ctx.sourcePath);
    if (!sourceFile)
      return;
    let sourceFolderPath = this.yaml.folderPath || getFolderPathFromString2(ctx.sourcePath);
    if (!ctx.sourcePath.includes("/")) {
      sourceFolderPath = "/";
    }
    this.registerListeners();
    let sourceFolder;
    if (sourceFolderPath !== "/") {
      if (this.yaml.folderPath === "") {
        sourceFolder = plugin.app.vault.getAbstractFileByPath(getFolderPathFromString2(ctx.sourcePath));
      } else {
        sourceFolder = plugin.app.vault.getAbstractFileByPath(this.yaml.folderPath);
      }
    }
    if (this.yaml.showTitle) {
      if (sourceFolder && sourceFolderPath !== "/") {
        titleEl.innerText = this.yaml.title.replace("{{folderName}}", sourceFolder.name);
      } else if (sourceFolderPath == "/") {
        titleEl.innerText = this.yaml.title.replace("{{folderName}}", "Vault");
      } else {
        titleEl.innerText = this.yaml.title.replace("{{folderName}}", "");
      }
    }
    if (!sourceFolder && (sourceFolderPath !== "/" && sourceFolderPath !== "")) {
      return new import_obsidian42.Notice("Folder overview: Couldn't find the folder");
    }
    if (!sourceFolder && sourceFolderPath == "") {
      sourceFolderPath = "/";
    }
    if (!(sourceFolder instanceof import_obsidian42.TFolder) && sourceFolderPath !== "/") {
      return;
    }
    if (sourceFolderPath === "/") {
      const rootFiles = [];
      plugin.app.vault.getAllLoadedFiles().filter((f) => {
        var _a2;
        return ((_a2 = f.parent) == null ? void 0 : _a2.path) === "/";
      }).forEach((file) => {
        if (!file.path.includes("/")) {
          rootFiles.push(file);
        }
      });
      files = rootFiles;
    } else if (sourceFolder instanceof import_obsidian42.TFolder) {
      files = sourceFolder.children;
    }
    files = await this.filterFiles(files, plugin, sourceFolderPath, this.yaml.depth, this.pathBlacklist);
    if (!this.yaml.includeTypes.includes("folder")) {
      files = this.getAllFiles(files, sourceFolderPath, this.yaml.depth);
    }
    if (files.length === 0) {
      return this.addEditButton(root);
    }
    files = this.sortFiles(files);
    if (this.yaml.style === "grid") {
      const grid = root.createEl("div", { cls: "folder-overview-grid" });
      files.forEach(async (file) => {
        const gridItem = grid.createEl("div", { cls: "folder-overview-grid-item" });
        const gridArticle = gridItem.createEl("article", { cls: "folder-overview-grid-item-article" });
        if (file instanceof import_obsidian42.TFile) {
          const fileContent = await plugin.app.vault.read(file);
          const descriptionEl = gridArticle.createEl("p", { cls: "folder-overview-grid-item-description" });
          let description = fileContent.split("\n")[0];
          if (description.length > 64) {
            description = description.slice(0, 64) + "...";
          }
          descriptionEl.innerText = description;
          const link = gridArticle.createEl("a", { cls: "folder-overview-grid-item-link internal-link" });
          const title = link.createEl("h1", { cls: "folder-overview-grid-item-link-title" });
          title.innerText = file.name.replace(".md", "").replace(".canvas", "");
          link.href = file.path;
        } else if (file instanceof import_obsidian42.TFolder) {
          const folderItem = gridArticle.createEl("div", { cls: "folder-overview-grid-item-folder" });
          const folderName = folderItem.createEl("h1", { cls: "folder-overview-grid-item-folder-name" });
          folderName.innerText = file.name;
        }
      });
    } else if (this.yaml.style === "list") {
      renderListOverview(plugin, ctx, root, this.yaml, this.pathBlacklist, this);
    } else if (this.yaml.style === "explorer") {
      const fileExplorerOverview = new FileExplorerOverview(plugin, ctx, root, this.yaml, this.pathBlacklist, this);
      if (this.plugin.app.workspace.layoutReady) {
        await fileExplorerOverview.renderFileExplorer();
      } else {
        this.plugin.app.workspace.onLayoutReady(() => {
          fileExplorerOverview.renderFileExplorer();
        });
      }
    }
    const overviewListEl = el.childNodes[0].childNodes[1];
    if (overviewListEl && overviewListEl.childNodes.length === 0) {
      if (this.yaml.style === "explorer") {
        const overview = el.childNodes[0];
        if (!overview.childNodes[2]) {
          if (this.plugin.app.workspace.layoutReady) {
            return this.addEditButton(root);
          }
        }
      } else {
        if (this.plugin.app.workspace.layoutReady) {
          return this.addEditButton(root);
        }
      }
    }
  }
  addEditButton(root) {
    const editButton = root.createEl("button", { cls: "folder-overview-edit-button" });
    editButton.innerText = "Edit overview";
    editButton.addEventListener("click", (e) => {
      e.stopImmediatePropagation();
      e.preventDefault();
      e.stopPropagation();
      new FolderOverviewSettings(this.plugin.app, this.plugin, this.yaml, this.ctx, this.el, this.plugin.settings).open();
    }, { capture: true });
  }
  async filterFiles(files, plugin, sourceFolderPath, depth, pathBlacklist) {
    const filteredFiles = await Promise.all(files.map(async (file) => {
      var _a, _b;
      const folderPath = getFolderPathFromString2(file.path);
      const isBlacklisted = pathBlacklist.includes(file.path);
      const isSubfolder = sourceFolderPath === "/" || folderPath.startsWith(sourceFolderPath);
      const isSourceFile = file.path === this.sourceFilePath;
      let isExcludedFromOverview = false;
      if (plugin instanceof FolderNotesPlugin) {
        isExcludedFromOverview = (_b = (_a = await getExcludedFolder(plugin, file.path, true)) == null ? void 0 : _a.excludeFromFolderOverview) != null ? _b : false;
      }
      if (isBlacklisted && !this.yaml.showFolderNotes || !isSubfolder || isSourceFile || isExcludedFromOverview) {
        return null;
      }
      const fileDepth = file.path.split("/").length - (sourceFolderPath === "/" ? 0 : sourceFolderPath.split("/").length);
      return fileDepth <= depth ? file : null;
    }));
    return filteredFiles.filter((file) => file !== null);
  }
  sortFiles(files) {
    var _a, _b;
    const yaml = this.yaml;
    if (!(yaml == null ? void 0 : yaml.sortBy)) {
      yaml.sortBy = (_a = this.defaultSettings.sortBy) != null ? _a : "name";
      yaml.sortByAsc = (_b = this.defaultSettings.sortByAsc) != null ? _b : false;
    }
    files.sort((a, b) => {
      if (a instanceof import_obsidian42.TFolder && !(b instanceof import_obsidian42.TFolder)) {
        return -1;
      }
      if (!(a instanceof import_obsidian42.TFolder) && b instanceof import_obsidian42.TFolder) {
        return 1;
      }
      if (a instanceof import_obsidian42.TFolder && b instanceof import_obsidian42.TFolder) {
        return yaml.sortByAsc ? a.name.localeCompare(b.name) : b.name.localeCompare(a.name);
      }
      if (a instanceof import_obsidian42.TFile && b instanceof import_obsidian42.TFile) {
        if (yaml.sortBy === "created") {
          return yaml.sortByAsc ? a.stat.ctime - b.stat.ctime : b.stat.ctime - a.stat.ctime;
        } else if (yaml.sortBy === "modified") {
          return yaml.sortByAsc ? a.stat.mtime - b.stat.mtime : b.stat.mtime - a.stat.mtime;
        } else if (yaml.sortBy === "name") {
          return yaml.sortByAsc ? a.basename.localeCompare(b.basename) : b.basename.localeCompare(a.basename);
        }
      }
      return 0;
    });
    return files;
  }
  getAllFiles(files, sourceFolderPath, depth) {
    const allFiles = [];
    const getDepth = (filePath) => {
      return filePath.split("/").length - sourceFolderPath.split("/").length;
    };
    files.forEach((file) => {
      const fileDepth = getDepth(file.path);
      if (file instanceof import_obsidian42.TFolder) {
        if (fileDepth < depth) {
          allFiles.push(...this.getAllFiles(file.children, sourceFolderPath, depth));
        }
      } else {
        allFiles.push(file);
      }
    });
    return allFiles;
  }
  fileMenu(file, e) {
    const plugin = this.plugin;
    const fileMenu = new import_obsidian42.Menu();
    fileMenu.addSeparator();
    fileMenu.addItem((item) => {
      item.setTitle(window.i18next.t("plugins.file-explorer.menu-opt-rename"));
      item.setIcon("pencil");
      item.onClick(async () => {
        plugin.app.fileManager.promptForFileRename(file);
      });
    });
    fileMenu.addItem((item) => {
      item.setTitle(window.i18next.t("plugins.file-explorer.menu-opt-delete"));
      item.setIcon("trash");
      item.dom.addClass("is-warning");
      item.dom.setAttribute("data-section", "danger");
      item.onClick(() => {
        plugin.app.fileManager.promptForDeletion(file);
      });
    });
    fileMenu.addSeparator();
    plugin.app.workspace.trigger("file-menu", fileMenu, file, "folder-overview-file-context-menu", null);
    fileMenu.showAtPosition({ x: e.pageX, y: e.pageY });
  }
  folderMenu(folder, e) {
    const plugin = this.plugin;
    const folderMenu = new import_obsidian42.Menu();
    folderMenu.addSeparator();
    folderMenu.addItem((item) => {
      item.setTitle("Rename");
      item.setIcon("pencil");
      item.onClick(async () => {
        if (plugin instanceof FolderNotesPlugin) {
          new NewFolderNameModal(plugin.app, plugin, folder).open();
        }
      });
    });
    folderMenu.addItem((item) => {
      item.setTitle("Delete");
      item.setIcon("trash");
      item.dom.addClass("is-warning");
      item.dom.setAttribute("data-section", "danger");
      item.onClick(() => {
        plugin.app.fileManager.promptForFolderDeletion(folder);
      });
    });
    folderMenu.addSeparator();
    plugin.app.workspace.trigger("file-menu", folderMenu, folder, "folder-overview-folder-context-menu", null);
    folderMenu.showAtPosition({ x: e.pageX, y: e.pageY });
  }
  getElFromOverview(path) {
    const el = this.listEl.querySelector(`[data-path='${CSS.escape(path)}']`);
    return el;
  }
};
async function updateYaml(plugin, ctx, el, yaml) {
  const file = plugin.app.vault.getAbstractFileByPath(ctx.sourcePath);
  if (!(file instanceof import_obsidian42.TFile))
    return;
  let stringYaml = (0, import_obsidian42.stringifyYaml)(yaml);
  await plugin.app.vault.process(file, (text) => {
    const info = ctx.getSectionInfo(el);
    if (stringYaml[stringYaml.length - 1] !== "\n") {
      stringYaml += "\n";
    }
    if (info) {
      const { lineStart } = info;
      const lineEnd = getCodeBlockEndLine(text, lineStart);
      if (lineEnd === -1 || !lineEnd)
        return text;
      const lineLength = lineEnd - lineStart;
      const lines = text.split("\n");
      lines.splice(lineStart, lineLength + 1, `\`\`\`folder-overview
${stringYaml}\`\`\``);
      return lines.join("\n");
    }
    return `\`\`\`folder-overview
${stringYaml}\`\`\``;
  });
}
function getCodeBlockEndLine(text, startLine, count = 1) {
  let line = startLine + 1;
  const lines = text.split("\n");
  while (line < lines.length) {
    if (count > 50) {
      return -1;
    }
    if (lines[line].startsWith("```")) {
      return line;
    }
    line++;
    count++;
  }
  return line;
}
async function getOverviews(plugin, file) {
  if (!file)
    return [];
  const overviews = [];
  const content = await plugin.app.vault.read(file);
  if (!content)
    return overviews;
  const yamlBlocks = content.match(/```folder-overview\n([\s\S]*?)```/g);
  if (!yamlBlocks)
    return overviews;
  for (const block of yamlBlocks) {
    const yaml = (0, import_obsidian42.parseYaml)(block.replace("```folder-overview\n", "").replace("```", ""));
    if (!yaml)
      continue;
    overviews.push(yaml);
  }
  return overviews;
}
async function updateYamlById(plugin, overviewId, file, newYaml) {
  plugin.app.vault.process(file, (text) => {
    const yamlBlocks = text.match(/```folder-overview\n([\s\S]*?)```/g);
    if (!yamlBlocks)
      return text;
    for (const block of yamlBlocks) {
      const yaml = (0, import_obsidian42.parseYaml)(block.replace("```folder-overview\n", "").replace("```", ""));
      if (!yaml)
        continue;
      if (yaml.id === overviewId) {
        const stringYaml = (0, import_obsidian42.stringifyYaml)(newYaml);
        const newBlock = `\`\`\`folder-overview
${stringYaml}\`\`\``;
        text = text.replace(block, newBlock);
      }
    }
    return text;
  });
}
function parseOverviewTitle(overview, plugin, folder) {
  const sourceFolderPath = overview.folderPath;
  let sourceFolder;
  let title = overview.title;
  if (sourceFolderPath !== "/") {
    if (sourceFolderPath === "") {
      sourceFolder = folder;
    } else {
      sourceFolder = plugin.app.vault.getAbstractFileByPath(sourceFolderPath);
    }
  }
  if (sourceFolder && sourceFolderPath !== "/") {
    title = title.replace("{{folderName}}", sourceFolder.name);
  } else if (sourceFolderPath == "/") {
    title = title.replace("{{folderName}}", "Vault");
  } else {
    title = title.replace("{{folderName}}", "");
  }
  return title;
}
var CustomMarkdownRenderChild = class extends import_obsidian42.MarkdownRenderChild {
  constructor(el, folderOverview) {
    super(el);
    this.folderOverview = folderOverview;
  }
  onunload() {
    this.folderOverview.disconnectListeners();
  }
};

// src/folderOverview/src/view.ts
var FOLDER_OVERVIEW_VIEW = "folder-overview-view";
var FolderOverviewView = class extends import_obsidian43.ItemView {
  constructor(leaf, plugin) {
    super(leaf);
    this.contentEl = this.containerEl.children[1];
    this.plugin = plugin;
    this.display = this.display.bind(this);
    if (plugin instanceof FolderOverviewPlugin) {
      this.defaultSettings = this.plugin.settings;
    } else if (plugin instanceof FolderNotesPlugin) {
      this.defaultSettings = plugin.settings.defaultOverview;
    }
    this.registerEvent(this.plugin.app.workspace.on("file-open", (file) => {
      this.activeFile = file;
      this.display(this.contentEl, this.yaml, this.plugin, this.defaultSettings, this.display, void 0, void 0, file);
    }));
  }
  getViewType() {
    return FOLDER_OVERVIEW_VIEW;
  }
  getDisplayText() {
    return "Folder Overview settings";
  }
  getIcon() {
    return "settings";
  }
  async onOpen() {
    this.display(this.contentEl, this.yaml, this.plugin, this.defaultSettings, this.display, void 0, void 0, this.activeFile);
  }
  async display(contentEl, yaml, plugin, defaultSettings, display, el, ctx, file) {
    this.contentEl = contentEl;
    this.yaml = yaml;
    this.defaultSettings = defaultSettings;
    if (file) {
      this.activeFile = file;
    }
    let header = contentEl.querySelector(".fn-folder-overview-header");
    if (!header) {
      header = contentEl.createEl("h4", {
        cls: "fn-folder-overview-header",
        text: "Folder Overview settings"
      });
    }
    const activeFile = plugin.app.workspace.getActiveFile();
    const overviews = await getOverviews(plugin, activeFile);
    let settingsContainer = contentEl.querySelector(".fn-settings-container");
    if (!settingsContainer) {
      settingsContainer = contentEl.createDiv({ cls: "fn-settings-container" });
    } else {
      settingsContainer.empty();
    }
    const overviewSetting = new import_obsidian43.Setting(settingsContainer);
    overviewSetting.setName("Select overview").setClass("fn-select-overview-setting").addDropdown((cb) => {
      var _a;
      if (activeFile) {
        const options = overviews.reduce((acc, overview) => {
          acc[overview.id] = parseOverviewTitle(overview, plugin, activeFile.parent);
          return acc;
        }, {});
        cb.addOptions(options);
      }
      console.log("yaml", yaml);
      cb.addOption("default", "Default");
      cb.setValue((_a = yaml == null ? void 0 : yaml.id) != null ? _a : "default");
      if (cb.getValue() === "default" || !(yaml == null ? void 0 : yaml.id.trim())) {
        yaml = defaultSettings;
        cb.setValue("default");
      } else {
        yaml = overviews.find((overview) => overview.id === yaml.id);
      }
      cb.onChange(async (value) => {
        if (value === "default") {
          yaml = defaultSettings;
        } else {
          yaml = overviews.find((overview) => overview.id === value);
        }
        await display(contentEl, yaml, plugin, defaultSettings, display, void 0, void 0, activeFile);
      });
    });
    await createOverviewSettings(settingsContainer, yaml, plugin, defaultSettings, display, void 0, void 0, activeFile);
  }
};

// src/folderOverview/src/Commands.ts
var import_obsidian44 = require("obsidian");
function registerCommands(plugin) {
  plugin.addCommand({
    id: "open-folder-overview-settings",
    name: "Open Folder Overview settings",
    callback: () => {
      plugin.activateOverviewView();
    }
  });
  plugin.registerEvent(plugin.app.workspace.on("editor-menu", (menu, editor, view) => {
    const text = editor.getSelection().trim();
    const line = editor.getCursor().line;
    const lineText = editor.getLine(line);
    if (lineText.trim() === "" || lineText.trim() === ">") {
      menu.addItem((item) => {
        item.setTitle("Create folder overview").setIcon("edit").onClick(() => {
          let json = Object.assign({}, plugin.settings);
          json.id = crypto.randomUUID();
          const yaml = (0, import_obsidian44.stringifyYaml)(json);
          if (lineText.trim() === "") {
            editor.replaceSelection(`\`\`\`folder-overview
${yaml}\`\`\`
`);
          } else if (lineText.trim() === ">") {
            const lines = yaml.split("\n");
            const newLines = lines.map((line2) => {
              return `> ${line2}`;
            });
            editor.replaceSelection(`\`\`\`folder-overview
${newLines.join("\n")}\`\`\`
`);
          }
        });
      });
    }
  }));
}

// src/folderOverview/src/main.ts
var FolderOverviewPlugin = class extends import_obsidian45.Plugin {
  async onload() {
    await this.loadSettings();
    this.settingsTab = new SettingsTab2(this);
    this.addSettingTab(this.settingsTab);
    this.settingsTab.display();
    registerCommands(this);
    if (this.app.workspace.layoutReady) {
      this.registerView(FOLDER_OVERVIEW_VIEW, (leaf) => {
        return new FolderOverviewView(leaf, this);
      });
    } else {
      this.app.workspace.onLayoutReady(async () => {
        this.registerView(FOLDER_OVERVIEW_VIEW, (leaf) => {
          return new FolderOverviewView(leaf, this);
        });
      });
    }
    this.registerMarkdownCodeBlockProcessor("folder-overview", (source, el, ctx) => {
      this.handleOverviewBlock(source, el, ctx);
    });
    console.log("loading Folder Overview plugin");
  }
  handleOverviewBlock(source, el, ctx) {
    const observer = new MutationObserver(() => {
      var _a;
      const editButton = (_a = el.parentElement) == null ? void 0 : _a.childNodes.item(1);
      if (editButton) {
        editButton.addEventListener("click", (e) => {
          e.stopImmediatePropagation();
          e.preventDefault();
          e.stopPropagation();
          new FolderOverviewSettings(this.app, this, (0, import_obsidian45.parseYaml)(source), ctx, el, this.settings).open();
        }, { capture: true });
      }
    });
    observer.observe(el, {
      childList: true,
      subtree: true
    });
    try {
      if (this.app.workspace.layoutReady) {
        const folderOverview = new FolderOverview(this, ctx, source, el, this.settings);
        folderOverview.create(this, (0, import_obsidian45.parseYaml)(source), el, ctx);
      } else {
        this.app.workspace.onLayoutReady(() => {
          const folderOverview = new FolderOverview(this, ctx, source, el, this.settings);
          folderOverview.create(this, (0, import_obsidian45.parseYaml)(source), el, ctx);
        });
      }
    } catch (e) {
      new import_obsidian45.Notice("Error creating folder overview (folder notes plugin) - check console for more details");
      console.error(e);
    }
  }
  async onunload() {
    console.log("unloading Folder Overview plugin");
  }
  async loadSettings() {
    const data = await this.loadData();
    this.settings = Object.assign({}, DEFAULT_SETTINGS2, data);
  }
  async saveSettings() {
    await this.saveData(this.settings);
  }
  async activateOverviewView() {
    const { workspace } = this.app;
    let leaf = null;
    const leaves = workspace.getLeavesOfType(FOLDER_OVERVIEW_VIEW);
    if (leaves.length > 0) {
      leaf = leaves[0];
    } else {
      leaf = workspace.getRightLeaf(false);
      await (leaf == null ? void 0 : leaf.setViewState({ type: FOLDER_OVERVIEW_VIEW, active: true }));
    }
    if (!leaf)
      return;
    workspace.revealLeaf(leaf);
  }
  async updateOverviewView() {
    const { workspace } = this.app;
    const leaf = workspace.getLeavesOfType(FOLDER_OVERVIEW_VIEW)[0];
    if (!leaf)
      return;
    const view = leaf.view;
    view.display(view.contentEl, view.yaml, this, view.defaultSettings, view.display, void 0, void 0, view.activeFile);
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiLi4vLi4vbm9kZV9tb2R1bGVzL2Zyb250LW1hdHRlci1wbHVnaW4tYXBpLXByb3ZpZGVyL2xpYi9jb250cmFjdHMvQXBpLmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9mcm9udC1tYXR0ZXItcGx1Z2luLWFwaS1wcm92aWRlci9saWIvY29udHJhY3RzL0V2ZW50RGlzcGF0Y2hlci5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvZnJvbnQtbWF0dGVyLXBsdWdpbi1hcGktcHJvdmlkZXIvbGliL2NvbnRyYWN0cy9SZXNvbHZlci5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvZnJvbnQtbWF0dGVyLXBsdWdpbi1hcGktcHJvdmlkZXIvbGliL2luZGV4LmpzIiwgInNyYy9tYWluLnRzIiwgInNyYy92aWV3LnRzIiwgInNyYy9Gb2xkZXJPdmVydmlldy50cyIsICJzcmMvbW9kYWxzL1NldHRpbmdzLnRzIiwgInNyYy91dGlscy9mdW5jdGlvbnMudHMiLCAic3JjL3NldHRpbmdzLnRzIiwgInNyYy9zdWdnZXN0ZXJzL0ZvbGRlclN1Z2dlc3Rlci50cyIsICJzcmMvc3VnZ2VzdGVycy9TdWdnZXN0LnRzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9AcG9wcGVyanMvY29yZS9saWIvZW51bXMuanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL0Bwb3BwZXJqcy9jb3JlL2xpYi9kb20tdXRpbHMvZ2V0Tm9kZU5hbWUuanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL0Bwb3BwZXJqcy9jb3JlL2xpYi9kb20tdXRpbHMvZ2V0V2luZG93LmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9AcG9wcGVyanMvY29yZS9saWIvZG9tLXV0aWxzL2luc3RhbmNlT2YuanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL0Bwb3BwZXJqcy9jb3JlL2xpYi9tb2RpZmllcnMvYXBwbHlTdHlsZXMuanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL0Bwb3BwZXJqcy9jb3JlL2xpYi91dGlscy9nZXRCYXNlUGxhY2VtZW50LmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9AcG9wcGVyanMvY29yZS9saWIvdXRpbHMvbWF0aC5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvQHBvcHBlcmpzL2NvcmUvbGliL3V0aWxzL3VzZXJBZ2VudC5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvQHBvcHBlcmpzL2NvcmUvbGliL2RvbS11dGlscy9pc0xheW91dFZpZXdwb3J0LmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9AcG9wcGVyanMvY29yZS9saWIvZG9tLXV0aWxzL2dldEJvdW5kaW5nQ2xpZW50UmVjdC5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvQHBvcHBlcmpzL2NvcmUvbGliL2RvbS11dGlscy9nZXRMYXlvdXRSZWN0LmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9AcG9wcGVyanMvY29yZS9saWIvZG9tLXV0aWxzL2NvbnRhaW5zLmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9AcG9wcGVyanMvY29yZS9saWIvZG9tLXV0aWxzL2dldENvbXB1dGVkU3R5bGUuanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL0Bwb3BwZXJqcy9jb3JlL2xpYi9kb20tdXRpbHMvaXNUYWJsZUVsZW1lbnQuanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL0Bwb3BwZXJqcy9jb3JlL2xpYi9kb20tdXRpbHMvZ2V0RG9jdW1lbnRFbGVtZW50LmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9AcG9wcGVyanMvY29yZS9saWIvZG9tLXV0aWxzL2dldFBhcmVudE5vZGUuanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL0Bwb3BwZXJqcy9jb3JlL2xpYi9kb20tdXRpbHMvZ2V0T2Zmc2V0UGFyZW50LmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9AcG9wcGVyanMvY29yZS9saWIvdXRpbHMvZ2V0TWFpbkF4aXNGcm9tUGxhY2VtZW50LmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9AcG9wcGVyanMvY29yZS9saWIvdXRpbHMvd2l0aGluLmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9AcG9wcGVyanMvY29yZS9saWIvdXRpbHMvZ2V0RnJlc2hTaWRlT2JqZWN0LmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9AcG9wcGVyanMvY29yZS9saWIvdXRpbHMvbWVyZ2VQYWRkaW5nT2JqZWN0LmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9AcG9wcGVyanMvY29yZS9saWIvdXRpbHMvZXhwYW5kVG9IYXNoTWFwLmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9AcG9wcGVyanMvY29yZS9saWIvbW9kaWZpZXJzL2Fycm93LmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9AcG9wcGVyanMvY29yZS9saWIvdXRpbHMvZ2V0VmFyaWF0aW9uLmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9AcG9wcGVyanMvY29yZS9saWIvbW9kaWZpZXJzL2NvbXB1dGVTdHlsZXMuanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL0Bwb3BwZXJqcy9jb3JlL2xpYi9tb2RpZmllcnMvZXZlbnRMaXN0ZW5lcnMuanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL0Bwb3BwZXJqcy9jb3JlL2xpYi91dGlscy9nZXRPcHBvc2l0ZVBsYWNlbWVudC5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvQHBvcHBlcmpzL2NvcmUvbGliL3V0aWxzL2dldE9wcG9zaXRlVmFyaWF0aW9uUGxhY2VtZW50LmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9AcG9wcGVyanMvY29yZS9saWIvZG9tLXV0aWxzL2dldFdpbmRvd1Njcm9sbC5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvQHBvcHBlcmpzL2NvcmUvbGliL2RvbS11dGlscy9nZXRXaW5kb3dTY3JvbGxCYXJYLmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9AcG9wcGVyanMvY29yZS9saWIvZG9tLXV0aWxzL2dldFZpZXdwb3J0UmVjdC5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvQHBvcHBlcmpzL2NvcmUvbGliL2RvbS11dGlscy9nZXREb2N1bWVudFJlY3QuanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL0Bwb3BwZXJqcy9jb3JlL2xpYi9kb20tdXRpbHMvaXNTY3JvbGxQYXJlbnQuanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL0Bwb3BwZXJqcy9jb3JlL2xpYi9kb20tdXRpbHMvZ2V0U2Nyb2xsUGFyZW50LmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9AcG9wcGVyanMvY29yZS9saWIvZG9tLXV0aWxzL2xpc3RTY3JvbGxQYXJlbnRzLmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9AcG9wcGVyanMvY29yZS9saWIvdXRpbHMvcmVjdFRvQ2xpZW50UmVjdC5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvQHBvcHBlcmpzL2NvcmUvbGliL2RvbS11dGlscy9nZXRDbGlwcGluZ1JlY3QuanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL0Bwb3BwZXJqcy9jb3JlL2xpYi91dGlscy9jb21wdXRlT2Zmc2V0cy5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvQHBvcHBlcmpzL2NvcmUvbGliL3V0aWxzL2RldGVjdE92ZXJmbG93LmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9AcG9wcGVyanMvY29yZS9saWIvdXRpbHMvY29tcHV0ZUF1dG9QbGFjZW1lbnQuanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL0Bwb3BwZXJqcy9jb3JlL2xpYi9tb2RpZmllcnMvZmxpcC5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvQHBvcHBlcmpzL2NvcmUvbGliL21vZGlmaWVycy9oaWRlLmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9AcG9wcGVyanMvY29yZS9saWIvbW9kaWZpZXJzL29mZnNldC5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvQHBvcHBlcmpzL2NvcmUvbGliL21vZGlmaWVycy9wb3BwZXJPZmZzZXRzLmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9AcG9wcGVyanMvY29yZS9saWIvdXRpbHMvZ2V0QWx0QXhpcy5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvQHBvcHBlcmpzL2NvcmUvbGliL21vZGlmaWVycy9wcmV2ZW50T3ZlcmZsb3cuanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL0Bwb3BwZXJqcy9jb3JlL2xpYi9kb20tdXRpbHMvZ2V0SFRNTEVsZW1lbnRTY3JvbGwuanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL0Bwb3BwZXJqcy9jb3JlL2xpYi9kb20tdXRpbHMvZ2V0Tm9kZVNjcm9sbC5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvQHBvcHBlcmpzL2NvcmUvbGliL2RvbS11dGlscy9nZXRDb21wb3NpdGVSZWN0LmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9AcG9wcGVyanMvY29yZS9saWIvdXRpbHMvb3JkZXJNb2RpZmllcnMuanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL0Bwb3BwZXJqcy9jb3JlL2xpYi91dGlscy9kZWJvdW5jZS5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvQHBvcHBlcmpzL2NvcmUvbGliL3V0aWxzL21lcmdlQnlOYW1lLmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9AcG9wcGVyanMvY29yZS9saWIvY3JlYXRlUG9wcGVyLmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9AcG9wcGVyanMvY29yZS9saWIvcG9wcGVyLmpzIiwgIi4uL21haW4udHMiLCAiLi4vc2V0dGluZ3MvU2V0dGluZ3NUYWIudHMiLCAiLi4vbW9kYWxzL0V4aXN0aW5nTm90ZS50cyIsICIuLi90ZW1wbGF0ZS50cyIsICIuLi9mdW5jdGlvbnMvZm9sZGVyTm90ZUZ1bmN0aW9ucy50cyIsICIuLi9tb2RhbHMvRGVsZXRlQ29uZmlybWF0aW9uLnRzIiwgIi4uL2Z1bmN0aW9ucy91dGlscy50cyIsICIuLi9FeGNsdWRlRm9sZGVycy9FeGNsdWRlUGF0dGVybi50cyIsICIuLi9FeGNsdWRlRm9sZGVycy9mdW5jdGlvbnMvZm9sZGVyRnVuY3Rpb25zLnRzIiwgIi4uL3N1Z2dlc3RlcnMvRm9sZGVyU3VnZ2VzdGVyLnRzIiwgIi4uL3N1Z2dlc3RlcnMvU3VnZ2VzdC50cyIsICIuLi9FeGNsdWRlRm9sZGVycy9tb2RhbHMvRXhjbHVkZUZvbGRlclNldHRpbmdzLnRzIiwgIi4uL0V4Y2x1ZGVGb2xkZXJzL2Z1bmN0aW9ucy9wYXR0ZXJuRnVuY3Rpb25zLnRzIiwgIi4uL0V4Y2x1ZGVGb2xkZXJzL21vZGFscy9QYXR0ZXJuU2V0dGluZ3MudHMiLCAiLi4vRXhjbHVkZUZvbGRlcnMvV2hpdGVsaXN0UGF0dGVybi50cyIsICIuLi9FeGNsdWRlRm9sZGVycy9mdW5jdGlvbnMvd2hpdGVsaXN0Rm9sZGVyRnVuY3Rpb25zLnRzIiwgIi4uL0V4Y2x1ZGVGb2xkZXJzL21vZGFscy9XaGl0ZWxpc3RGb2xkZXJTZXR0aW5ncy50cyIsICIuLi9FeGNsdWRlRm9sZGVycy9mdW5jdGlvbnMvd2hpdGVsaXN0UGF0dGVybkZ1bmN0aW9ucy50cyIsICIuLi9FeGNsdWRlRm9sZGVycy9tb2RhbHMvV2hpdGVsaXN0UGF0dGVyblNldHRpbmdzLnRzIiwgIi4uL0V4Y2x1ZGVGb2xkZXJzL0V4Y2x1ZGVGb2xkZXIudHMiLCAiLi4vZnVuY3Rpb25zL2V4Y2FsaWRyYXcudHMiLCAiLi4vbW9kYWxzL0Fza0ZvckV4dGVuc2lvbi50cyIsICIuLi9mdW5jdGlvbnMvc3R5bGVGdW5jdGlvbnMudHMiLCAiLi4vc2V0dGluZ3MvR2VuZXJhbFNldHRpbmdzLnRzIiwgIi4uL2V2ZW50cy9FdmVudEVtaXR0ZXIudHMiLCAiLi4vZnVuY3Rpb25zL0xpc3RDb21wb25lbnQudHMiLCAiLi4vbW9kYWxzL0FkZFN1cHBvcnRlZEZpbGVUeXBlLnRzIiwgIi4uL2V2ZW50cy9Gcm9udE1hdHRlclRpdGxlLnRzIiwgIi4uL21vZGFscy9Db25maXJtQ3JlYXRpb24udHMiLCAiLi4vc3VnZ2VzdGVycy9UZW1wbGF0ZVN1Z2dlc3Rlci50cyIsICIuLi9zZXR0aW5ncy9GaWxlRXhwbG9yZXJTZXR0aW5ncy50cyIsICIuLi9zZXR0aW5ncy9QYXRoU2V0dGluZ3MudHMiLCAiLi4vc2V0dGluZ3MvRm9sZGVyT3ZlcnZpZXdTZXR0aW5ncy50cyIsICIuLi9zZXR0aW5ncy9FeGNsdWRlZEZvbGRlcnNTZXR0aW5ncy50cyIsICIuLi9FeGNsdWRlRm9sZGVycy9tb2RhbHMvV2hpdGVsaXN0ZWRGb2xkZXJzU2V0dGluZ3MudHMiLCAiLi4vRXhjbHVkZUZvbGRlcnMvV2hpdGVsaXN0Rm9sZGVyLnRzIiwgIi4uL0NvbW1hbmRzLnRzIiwgIi4uL2V2ZW50cy9oYW5kbGVDbGljay50cyIsICIuLi9ldmVudHMvTXV0YXRpb25PYnNlcnZlci50cyIsICIuLi9ldmVudHMvaGFuZGxlUmVuYW1lLnRzIiwgIi4uL2V2ZW50cy9oYW5kbGVDcmVhdGUudHMiLCAiLi4vZXZlbnRzL1RhYk1hbmFnZXIudHMiLCAiLi4vZXZlbnRzL2hhbmRsZURlbGV0ZS50cyIsICJzcmMvdXRpbHMvRXZlbnRFbWl0dGVyLnRzIiwgInNyYy91dGlscy9MaXN0Q29tcG9uZW50LnRzIiwgInNyYy9GaWxlRXhwbG9yZXIudHMiLCAic3JjL0xpc3RTdHlsZS50cyIsICIuLi9tb2RhbHMvTmV3Rm9sZGVyTmFtZS50cyIsICJzcmMvQ29tbWFuZHMudHMiXSwKICAic291cmNlc0NvbnRlbnQiOiBbIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuIiwgIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuIiwgIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuIiwgIlwidXNlIHN0cmljdFwiO1xudmFyIF9fY3JlYXRlQmluZGluZyA9ICh0aGlzICYmIHRoaXMuX19jcmVhdGVCaW5kaW5nKSB8fCAoT2JqZWN0LmNyZWF0ZSA/IChmdW5jdGlvbihvLCBtLCBrLCBrMikge1xuICAgIGlmIChrMiA9PT0gdW5kZWZpbmVkKSBrMiA9IGs7XG4gICAgdmFyIGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG0sIGspO1xuICAgIGlmICghZGVzYyB8fCAoXCJnZXRcIiBpbiBkZXNjID8gIW0uX19lc01vZHVsZSA6IGRlc2Mud3JpdGFibGUgfHwgZGVzYy5jb25maWd1cmFibGUpKSB7XG4gICAgICBkZXNjID0geyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uKCkgeyByZXR1cm4gbVtrXTsgfSB9O1xuICAgIH1cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkobywgazIsIGRlc2MpO1xufSkgOiAoZnVuY3Rpb24obywgbSwgaywgazIpIHtcbiAgICBpZiAoazIgPT09IHVuZGVmaW5lZCkgazIgPSBrO1xuICAgIG9bazJdID0gbVtrXTtcbn0pKTtcbnZhciBfX2V4cG9ydFN0YXIgPSAodGhpcyAmJiB0aGlzLl9fZXhwb3J0U3RhcikgfHwgZnVuY3Rpb24obSwgZXhwb3J0cykge1xuICAgIGZvciAodmFyIHAgaW4gbSkgaWYgKHAgIT09IFwiZGVmYXVsdFwiICYmICFPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZXhwb3J0cywgcCkpIF9fY3JlYXRlQmluZGluZyhleHBvcnRzLCBtLCBwKTtcbn07XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLmdldEFwaVNhZmUgPSBleHBvcnRzLmdldERlZmVyID0gZXhwb3J0cy5pc1BsdWdpbkVuYWJsZWQgPSBleHBvcnRzLlBsdWdpbk5vdEVuYWJsZWRFcnJvciA9IGV4cG9ydHMucGx1Z2luSWQgPSB2b2lkIDA7XG5fX2V4cG9ydFN0YXIocmVxdWlyZShcIi4vY29udHJhY3RzL0FwaVwiKSwgZXhwb3J0cyk7XG5fX2V4cG9ydFN0YXIocmVxdWlyZShcIi4vY29udHJhY3RzL0V2ZW50RGlzcGF0Y2hlclwiKSwgZXhwb3J0cyk7XG5fX2V4cG9ydFN0YXIocmVxdWlyZShcIi4vY29udHJhY3RzL1Jlc29sdmVyXCIpLCBleHBvcnRzKTtcbmV4cG9ydHMucGx1Z2luSWQgPSAnb2JzaWRpYW4tZnJvbnQtbWF0dGVyLXRpdGxlLXBsdWdpbic7XG5jbGFzcyBQbHVnaW5Ob3RFbmFibGVkRXJyb3IgZXh0ZW5kcyBFcnJvciB7XG59XG5leHBvcnRzLlBsdWdpbk5vdEVuYWJsZWRFcnJvciA9IFBsdWdpbk5vdEVuYWJsZWRFcnJvcjtcbi8qKlxuICogcmV0dXJucyB0cnVlIGlmIHRoZSBvYnNpZGlhbi1mcm9udC1tYXR0ZXItdGl0bGUtcGx1Z2luIGlzIGVuYWJsZWRcbiAqIEBwYXJhbSBhcHBcbiAqL1xuZnVuY3Rpb24gaXNQbHVnaW5FbmFibGVkKGFwcCkge1xuICAgIHZhciBfYSwgX2IsIF9jO1xuICAgIC8vQHRzLWlnbm9yZVxuICAgIHJldHVybiAoX2MgPSAoX2IgPSAoX2EgPSBhcHAgPT09IG51bGwgfHwgYXBwID09PSB2b2lkIDAgPyB2b2lkIDAgOiBhcHAucGx1Z2lucykgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmVuYWJsZWRQbHVnaW5zKSA9PT0gbnVsbCB8fCBfYiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2IuaGFzKGV4cG9ydHMucGx1Z2luSWQpKSAhPT0gbnVsbCAmJiBfYyAhPT0gdm9pZCAwID8gX2MgOiBmYWxzZTtcbn1cbmV4cG9ydHMuaXNQbHVnaW5FbmFibGVkID0gaXNQbHVnaW5FbmFibGVkO1xuLyoqXG4gKlxuICogQHRocm93cyBQbHVnaW5Ob3RFbmFibGVkRXJyb3JcbiAqL1xuZnVuY3Rpb24gZ2V0RGVmZXIoYXBwKSB7XG4gICAgdmFyIF9hLCBfYiwgX2MsIF9kO1xuICAgIC8vQHRzLWlnbm9yZVxuICAgIGNvbnN0IHBsdWdpbiA9IChfYiA9IChfYSA9IGFwcCA9PT0gbnVsbCB8fCBhcHAgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGFwcC5wbHVnaW5zKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuZ2V0UGx1Z2luKGV4cG9ydHMucGx1Z2luSWQpKSAhPT0gbnVsbCAmJiBfYiAhPT0gdm9pZCAwID8gX2IgOiBudWxsO1xuICAgIGNvbnN0IGRlZmVyID0gKF9kID0gKF9jID0gcGx1Z2luID09PSBudWxsIHx8IHBsdWdpbiA9PT0gdm9pZCAwID8gdm9pZCAwIDogcGx1Z2luLmdldERlZmVyKSA9PT0gbnVsbCB8fCBfYyA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2MuY2FsbChwbHVnaW4pKSAhPT0gbnVsbCAmJiBfZCAhPT0gdm9pZCAwID8gX2QgOiBudWxsO1xuICAgIGlmIChkZWZlciA9PT0gbnVsbCkge1xuICAgICAgICB0aHJvdyBuZXcgUGx1Z2luTm90RW5hYmxlZEVycm9yKGBQbHVnaW4gJHtleHBvcnRzLnBsdWdpbklkfSBpcyBub3QgZW5hYmxlZCBvciBvbGQgdmVyc2lvbmApO1xuICAgIH1cbiAgICByZXR1cm4gZGVmZXI7XG59XG5leHBvcnRzLmdldERlZmVyID0gZ2V0RGVmZXI7XG4vKipcbiAqIFdyYXBwZXIgZm9yIG9iamVjdC4gSXQgd2lsbCBjaGVjayBpdHNlbGYgaWYgcGx1Z2luIGlzIGVuYWJsZWQgYW5kIHJlYWR5XG4gKiBAcGFyYW0gYXBwXG4gKi9cbmZ1bmN0aW9uIGdldEFwaVNhZmUoYXBwKSB7XG4gICAgcmV0dXJuIG5ldyBBcGlXcmFwcGVyKG51bGwsIGFwcCk7XG59XG5leHBvcnRzLmdldEFwaVNhZmUgPSBnZXRBcGlTYWZlO1xuY2xhc3MgQXBpV3JhcHBlciB7XG4gICAgY29uc3RydWN0b3IoYXBpLCBhcHApIHtcbiAgICAgICAgdGhpcy5hcGkgPSBhcGk7XG4gICAgICAgIHRoaXMuYXBwID0gYXBwO1xuICAgIH1cbiAgICBiZWZvcmUoKSB7XG4gICAgICAgIGlmICh0aGlzLmFwaSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGRlZmVyID0gdGhpcy5nZXREZWZmZXIoKTtcbiAgICAgICAgaWYgKGRlZmVyID09PSBudWxsKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgYXBpID0gZGVmZXIuZ2V0QXBpKCk7XG4gICAgICAgIGlmIChhcGkgPT09IG51bGwpIHtcbiAgICAgICAgICAgIHJldHVybiBkZWZlci5hd2FpdFBsdWdpbigpLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuYXBpID0gZGVmZXIuZ2V0QXBpKCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuYXBpID0gYXBpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGdldERlZmZlcigpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHJldHVybiBnZXREZWZlcih0aGlzLmFwcCk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIGlmIChlIGluc3RhbmNlb2YgUGx1Z2luTm90RW5hYmxlZEVycm9yKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aHJvdyBlO1xuICAgICAgICB9XG4gICAgfVxuICAgIGdldFJlc29sdmVyRmFjdG9yeSgpIHtcbiAgICAgICAgdmFyIF9hLCBfYjtcbiAgICAgICAgdGhpcy5iZWZvcmUoKTtcbiAgICAgICAgcmV0dXJuIChfYiA9IChfYSA9IHRoaXMuYXBpKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuZ2V0UmVzb2x2ZXJGYWN0b3J5KCkpICE9PSBudWxsICYmIF9iICE9PSB2b2lkIDAgPyBfYiA6IG51bGw7XG4gICAgfVxuICAgIGdldEV2ZW50RGlzcGF0Y2hlcigpIHtcbiAgICAgICAgdmFyIF9hLCBfYjtcbiAgICAgICAgdGhpcy5iZWZvcmUoKTtcbiAgICAgICAgcmV0dXJuIChfYiA9IChfYSA9IHRoaXMuYXBpKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuZ2V0RXZlbnREaXNwYXRjaGVyKCkpICE9PSBudWxsICYmIF9iICE9PSB2b2lkIDAgPyBfYiA6IG51bGw7XG4gICAgfVxuICAgIGdldEVuYWJsZWRGZWF0dXJlcygpIHtcbiAgICAgICAgdmFyIF9hLCBfYjtcbiAgICAgICAgdGhpcy5iZWZvcmUoKTtcbiAgICAgICAgcmV0dXJuIChfYiA9IChfYSA9IHRoaXMuYXBpKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuZ2V0RW5hYmxlZEZlYXR1cmVzKCkpICE9PSBudWxsICYmIF9iICE9PSB2b2lkIDAgPyBfYiA6IFtdO1xuICAgIH1cbn1cbiIsICJpbXBvcnQgeyBQbHVnaW4sIFdvcmtzcGFjZUxlYWYsIE5vdGljZSwgTWFya2Rvd25Qb3N0UHJvY2Vzc29yQ29udGV4dCwgcGFyc2VZYW1sIH0gZnJvbSAnb2JzaWRpYW4nO1xyXG5pbXBvcnQgeyBGb2xkZXJPdmVydmlld1ZpZXcsIEZPTERFUl9PVkVSVklFV19WSUVXIH0gZnJvbSAnLi92aWV3JztcclxuaW1wb3J0IHsgb3ZlcnZpZXdTZXR0aW5ncywgRm9sZGVyT3ZlcnZpZXcgfSBmcm9tICcuL0ZvbGRlck92ZXJ2aWV3JztcclxuaW1wb3J0IHsgREVGQVVMVF9TRVRUSU5HUywgU2V0dGluZ3NUYWIgfSBmcm9tICcuL3NldHRpbmdzJztcclxuaW1wb3J0IHsgcmVnaXN0ZXJDb21tYW5kcyB9IGZyb20gJy4vQ29tbWFuZHMnO1xyXG5pbXBvcnQgeyBGb2xkZXJPdmVydmlld1NldHRpbmdzIH0gZnJvbSAnLi9tb2RhbHMvU2V0dGluZ3MnO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRm9sZGVyT3ZlcnZpZXdQbHVnaW4gZXh0ZW5kcyBQbHVnaW4ge1xyXG5cdHNldHRpbmdzOiBvdmVydmlld1NldHRpbmdzO1xyXG5cdHNldHRpbmdzVGFiOiBTZXR0aW5nc1RhYjtcclxuXHRhc3luYyBvbmxvYWQoKSB7XHJcblx0XHRhd2FpdCB0aGlzLmxvYWRTZXR0aW5ncygpO1xyXG5cdFx0dGhpcy5zZXR0aW5nc1RhYiA9IG5ldyBTZXR0aW5nc1RhYih0aGlzKTtcclxuXHRcdHRoaXMuYWRkU2V0dGluZ1RhYih0aGlzLnNldHRpbmdzVGFiKTtcclxuXHRcdHRoaXMuc2V0dGluZ3NUYWIuZGlzcGxheSgpO1xyXG5cdFx0cmVnaXN0ZXJDb21tYW5kcyh0aGlzKTtcclxuXHJcblx0XHRpZiAodGhpcy5hcHAud29ya3NwYWNlLmxheW91dFJlYWR5KSB7XHJcblx0XHRcdHRoaXMucmVnaXN0ZXJWaWV3KEZPTERFUl9PVkVSVklFV19WSUVXLCAobGVhZjogV29ya3NwYWNlTGVhZikgPT4ge1xyXG5cdFx0XHRcdHJldHVybiBuZXcgRm9sZGVyT3ZlcnZpZXdWaWV3KGxlYWYsIHRoaXMpO1xyXG5cdFx0XHR9KTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdHRoaXMuYXBwLndvcmtzcGFjZS5vbkxheW91dFJlYWR5KGFzeW5jICgpID0+IHtcclxuXHRcdFx0XHR0aGlzLnJlZ2lzdGVyVmlldyhGT0xERVJfT1ZFUlZJRVdfVklFVywgKGxlYWY6IFdvcmtzcGFjZUxlYWYpID0+IHtcclxuXHRcdFx0XHRcdHJldHVybiBuZXcgRm9sZGVyT3ZlcnZpZXdWaWV3KGxlYWYsIHRoaXMpO1xyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHR9KTtcclxuXHRcdH1cclxuXHJcblx0XHR0aGlzLnJlZ2lzdGVyTWFya2Rvd25Db2RlQmxvY2tQcm9jZXNzb3IoJ2ZvbGRlci1vdmVydmlldycsIChzb3VyY2U6IHN0cmluZywgZWw6IEhUTUxFbGVtZW50LCBjdHg6IE1hcmtkb3duUG9zdFByb2Nlc3NvckNvbnRleHQpID0+IHtcclxuXHRcdFx0dGhpcy5oYW5kbGVPdmVydmlld0Jsb2NrKHNvdXJjZSwgZWwsIGN0eCk7XHJcblx0XHR9KTtcclxuXHRcdGNvbnNvbGUubG9nKCdsb2FkaW5nIEZvbGRlciBPdmVydmlldyBwbHVnaW4nKTtcclxuXHR9XHJcblxyXG5cdGhhbmRsZU92ZXJ2aWV3QmxvY2soc291cmNlOiBzdHJpbmcsIGVsOiBIVE1MRWxlbWVudCwgY3R4OiBNYXJrZG93blBvc3RQcm9jZXNzb3JDb250ZXh0KSB7XHJcblx0XHRjb25zdCBvYnNlcnZlciA9IG5ldyBNdXRhdGlvbk9ic2VydmVyKCgpID0+IHtcclxuXHRcdFx0Y29uc3QgZWRpdEJ1dHRvbiA9IGVsLnBhcmVudEVsZW1lbnQ/LmNoaWxkTm9kZXMuaXRlbSgxKTtcclxuXHRcdFx0aWYgKGVkaXRCdXR0b24pIHtcclxuXHRcdFx0XHRlZGl0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcclxuXHRcdFx0XHRcdGUuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCk7XHJcblx0XHRcdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XHJcblx0XHRcdFx0XHRlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG5cdFx0XHRcdFx0bmV3IEZvbGRlck92ZXJ2aWV3U2V0dGluZ3ModGhpcy5hcHAsIHRoaXMsIHBhcnNlWWFtbChzb3VyY2UpLCBjdHgsIGVsLCB0aGlzLnNldHRpbmdzKS5vcGVuKCk7XHJcblx0XHRcdFx0fSwgeyBjYXB0dXJlOiB0cnVlIH0pO1xyXG5cdFx0XHR9XHJcblx0XHR9KTtcclxuXHJcblx0XHRvYnNlcnZlci5vYnNlcnZlKGVsLCB7XHJcblx0XHRcdGNoaWxkTGlzdDogdHJ1ZSxcclxuXHRcdFx0c3VidHJlZTogdHJ1ZSxcclxuXHRcdH0pO1xyXG5cclxuXHRcdHRyeSB7XHJcblx0XHRcdGlmICh0aGlzLmFwcC53b3Jrc3BhY2UubGF5b3V0UmVhZHkpIHtcclxuXHRcdFx0XHRjb25zdCBmb2xkZXJPdmVydmlldyA9IG5ldyBGb2xkZXJPdmVydmlldyh0aGlzLCBjdHgsIHNvdXJjZSwgZWwsIHRoaXMuc2V0dGluZ3MpO1xyXG5cdFx0XHRcdGZvbGRlck92ZXJ2aWV3LmNyZWF0ZSh0aGlzLCBwYXJzZVlhbWwoc291cmNlKSwgZWwsIGN0eCk7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0dGhpcy5hcHAud29ya3NwYWNlLm9uTGF5b3V0UmVhZHkoKCkgPT4ge1xyXG5cdFx0XHRcdFx0Y29uc3QgZm9sZGVyT3ZlcnZpZXcgPSBuZXcgRm9sZGVyT3ZlcnZpZXcodGhpcywgY3R4LCBzb3VyY2UsIGVsLCB0aGlzLnNldHRpbmdzKTtcclxuXHRcdFx0XHRcdGZvbGRlck92ZXJ2aWV3LmNyZWF0ZSh0aGlzLCBwYXJzZVlhbWwoc291cmNlKSwgZWwsIGN0eCk7XHJcblx0XHRcdFx0fSk7XHJcblx0XHRcdH1cclxuXHRcdH0gY2F0Y2ggKGUpIHtcclxuXHRcdFx0bmV3IE5vdGljZSgnRXJyb3IgY3JlYXRpbmcgZm9sZGVyIG92ZXJ2aWV3IChmb2xkZXIgbm90ZXMgcGx1Z2luKSAtIGNoZWNrIGNvbnNvbGUgZm9yIG1vcmUgZGV0YWlscycpO1xyXG5cdFx0XHRjb25zb2xlLmVycm9yKGUpO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0YXN5bmMgb251bmxvYWQoKSB7XHJcblx0XHRjb25zb2xlLmxvZygndW5sb2FkaW5nIEZvbGRlciBPdmVydmlldyBwbHVnaW4nKTtcclxuXHR9XHJcblxyXG5cdGFzeW5jIGxvYWRTZXR0aW5ncygpIHtcclxuXHRcdGNvbnN0IGRhdGEgPSBhd2FpdCB0aGlzLmxvYWREYXRhKCk7XHJcblx0XHR0aGlzLnNldHRpbmdzID0gT2JqZWN0LmFzc2lnbih7fSwgREVGQVVMVF9TRVRUSU5HUywgZGF0YSk7XHJcblx0fVxyXG5cclxuXHRhc3luYyBzYXZlU2V0dGluZ3MoKSB7XHJcblx0XHRhd2FpdCB0aGlzLnNhdmVEYXRhKHRoaXMuc2V0dGluZ3MpO1xyXG5cdH1cclxuXHJcblx0YXN5bmMgYWN0aXZhdGVPdmVydmlld1ZpZXcoKSB7XHJcblx0XHRjb25zdCB7IHdvcmtzcGFjZSB9ID0gdGhpcy5hcHA7XHJcblxyXG5cdFx0bGV0IGxlYWY6IFdvcmtzcGFjZUxlYWYgfCBudWxsID0gbnVsbDtcclxuXHRcdGNvbnN0IGxlYXZlcyA9IHdvcmtzcGFjZS5nZXRMZWF2ZXNPZlR5cGUoRk9MREVSX09WRVJWSUVXX1ZJRVcpO1xyXG5cclxuXHRcdGlmIChsZWF2ZXMubGVuZ3RoID4gMCkge1xyXG5cdFx0XHRsZWFmID0gbGVhdmVzWzBdO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0bGVhZiA9IHdvcmtzcGFjZS5nZXRSaWdodExlYWYoZmFsc2UpO1xyXG5cdFx0XHRhd2FpdCBsZWFmPy5zZXRWaWV3U3RhdGUoeyB0eXBlOiBGT0xERVJfT1ZFUlZJRVdfVklFVywgYWN0aXZlOiB0cnVlIH0pO1xyXG5cdFx0fVxyXG5cclxuXHRcdGlmICghbGVhZikgcmV0dXJuO1xyXG5cdFx0d29ya3NwYWNlLnJldmVhbExlYWYobGVhZik7XHJcblx0fVxyXG5cclxuXHRhc3luYyB1cGRhdGVPdmVydmlld1ZpZXcoKSB7XHJcblx0XHRjb25zdCB7IHdvcmtzcGFjZSB9ID0gdGhpcy5hcHA7XHJcblx0XHRjb25zdCBsZWFmID0gd29ya3NwYWNlLmdldExlYXZlc09mVHlwZShGT0xERVJfT1ZFUlZJRVdfVklFVylbMF07XHJcblx0XHRpZiAoIWxlYWYpIHJldHVybjtcclxuXHRcdGNvbnN0IHZpZXcgPSBsZWFmLnZpZXcgYXMgYW55IGFzIEZvbGRlck92ZXJ2aWV3VmlldztcclxuXHRcdHZpZXcuZGlzcGxheSh2aWV3LmNvbnRlbnRFbCwgdmlldy55YW1sLCB0aGlzLCB2aWV3LmRlZmF1bHRTZXR0aW5ncywgdmlldy5kaXNwbGF5LCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgdmlldy5hY3RpdmVGaWxlKTtcclxuXHR9XHJcbn0iLCAiaW1wb3J0IHsgSXRlbVZpZXcsIFNldHRpbmcsIFRGaWxlLCBXb3Jrc3BhY2VMZWFmLCBNYXJrZG93blBvc3RQcm9jZXNzb3JDb250ZXh0LCBOb3RpY2UsIFBsdWdpbiB9IGZyb20gJ29ic2lkaWFuJztcclxuaW1wb3J0IHsgRm9sZGVyT3ZlcnZpZXcsIGdldE92ZXJ2aWV3cywgb3ZlcnZpZXdTZXR0aW5ncywgcGFyc2VPdmVydmlld1RpdGxlIH0gZnJvbSAnLi9Gb2xkZXJPdmVydmlldyc7XHJcbmltcG9ydCB7IEZpbGVTdWdnZXN0IH0gZnJvbSAnLi9zdWdnZXN0ZXJzL0ZpbGVTdWdnZXN0ZXInO1xyXG5pbXBvcnQgeyBjcmVhdGVPdmVydmlld1NldHRpbmdzIH0gZnJvbSAnLi9zZXR0aW5ncyc7XHJcbmltcG9ydCBGb2xkZXJPdmVydmlld1BsdWdpbiBmcm9tICcuL21haW4nO1xyXG5leHBvcnQgY29uc3QgRk9MREVSX09WRVJWSUVXX1ZJRVcgPSAnZm9sZGVyLW92ZXJ2aWV3LXZpZXcnO1xyXG5pbXBvcnQgRm9sZGVyTm90ZXNQbHVnaW4gZnJvbSAnLi4vLi4vbWFpbic7XHJcblxyXG5leHBvcnQgY2xhc3MgRm9sZGVyT3ZlcnZpZXdWaWV3IGV4dGVuZHMgSXRlbVZpZXcge1xyXG4gICAgcGx1Z2luOiBGb2xkZXJPdmVydmlld1BsdWdpbiB8IEZvbGRlck5vdGVzUGx1Z2luO1xyXG4gICAgYWN0aXZlRmlsZTogVEZpbGUgfCBudWxsO1xyXG4gICAgb3ZlcnZpZXdJZDogc3RyaW5nIHwgbnVsbDtcclxuICAgIHlhbWw6IG92ZXJ2aWV3U2V0dGluZ3M7XHJcbiAgICBkZWZhdWx0U2V0dGluZ3M6IG92ZXJ2aWV3U2V0dGluZ3M7XHJcbiAgICBjb250ZW50RWw6IEhUTUxFbGVtZW50ID0gdGhpcy5jb250YWluZXJFbC5jaGlsZHJlblsxXSBhcyBIVE1MRWxlbWVudDtcclxuICAgIGNvbnN0cnVjdG9yKGxlYWY6IFdvcmtzcGFjZUxlYWYsIHBsdWdpbjogRm9sZGVyT3ZlcnZpZXdQbHVnaW4gfCBGb2xkZXJOb3Rlc1BsdWdpbikge1xyXG4gICAgICAgIHN1cGVyKGxlYWYpO1xyXG4gICAgICAgIHRoaXMucGx1Z2luID0gcGx1Z2luO1xyXG5cclxuICAgICAgICB0aGlzLmRpc3BsYXkgPSB0aGlzLmRpc3BsYXkuYmluZCh0aGlzKTtcclxuICAgICAgICBpZiAocGx1Z2luIGluc3RhbmNlb2YgRm9sZGVyT3ZlcnZpZXdQbHVnaW4pIHtcclxuICAgICAgICAgICAgdGhpcy5kZWZhdWx0U2V0dGluZ3MgPSB0aGlzLnBsdWdpbi5zZXR0aW5ncyBhcyBhbnkgYXMgb3ZlcnZpZXdTZXR0aW5ncztcclxuICAgICAgICB9IGVsc2UgaWYgKHBsdWdpbiBpbnN0YW5jZW9mIEZvbGRlck5vdGVzUGx1Z2luKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZGVmYXVsdFNldHRpbmdzID0gcGx1Z2luLnNldHRpbmdzLmRlZmF1bHRPdmVydmlldztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMucmVnaXN0ZXJFdmVudChcclxuICAgICAgICAgICAgdGhpcy5wbHVnaW4uYXBwLndvcmtzcGFjZS5vbignZmlsZS1vcGVuJywgKGZpbGUpID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuYWN0aXZlRmlsZSA9IGZpbGU7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRpc3BsYXkodGhpcy5jb250ZW50RWwsIHRoaXMueWFtbCwgdGhpcy5wbHVnaW4sIHRoaXMuZGVmYXVsdFNldHRpbmdzLCB0aGlzLmRpc3BsYXksIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCBmaWxlKTtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIGdldFZpZXdUeXBlKCkge1xyXG4gICAgICAgIHJldHVybiBGT0xERVJfT1ZFUlZJRVdfVklFVztcclxuICAgIH1cclxuXHJcbiAgICBnZXREaXNwbGF5VGV4dCgpIHtcclxuICAgICAgICByZXR1cm4gJ0ZvbGRlciBPdmVydmlldyBzZXR0aW5ncyc7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0SWNvbigpIHtcclxuICAgICAgICByZXR1cm4gJ3NldHRpbmdzJztcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBvbk9wZW4oKSB7XHJcbiAgICAgICAgdGhpcy5kaXNwbGF5KHRoaXMuY29udGVudEVsLCB0aGlzLnlhbWwsIHRoaXMucGx1Z2luLCB0aGlzLmRlZmF1bHRTZXR0aW5ncywgdGhpcy5kaXNwbGF5LCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgdGhpcy5hY3RpdmVGaWxlKTtcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBkaXNwbGF5KFxyXG4gICAgICAgIGNvbnRlbnRFbDogSFRNTEVsZW1lbnQsXHJcbiAgICAgICAgeWFtbDogb3ZlcnZpZXdTZXR0aW5ncyxcclxuICAgICAgICBwbHVnaW46IEZvbGRlck92ZXJ2aWV3UGx1Z2luIHwgRm9sZGVyTm90ZXNQbHVnaW4sXHJcbiAgICAgICAgZGVmYXVsdFNldHRpbmdzOiBvdmVydmlld1NldHRpbmdzLFxyXG4gICAgICAgIGRpc3BsYXk6IENhbGxhYmxlRnVuY3Rpb24sXHJcbiAgICAgICAgZWw/OiBIVE1MRWxlbWVudCxcclxuICAgICAgICBjdHg/OiBNYXJrZG93blBvc3RQcm9jZXNzb3JDb250ZXh0LFxyXG4gICAgICAgIGZpbGU/OiBURmlsZSB8IG51bGxcclxuICAgICkge1xyXG4gICAgICAgIHRoaXMuY29udGVudEVsID0gY29udGVudEVsO1xyXG4gICAgICAgIHRoaXMueWFtbCA9IHlhbWw7XHJcbiAgICAgICAgdGhpcy5kZWZhdWx0U2V0dGluZ3MgPSBkZWZhdWx0U2V0dGluZ3M7XHJcbiAgICAgICAgaWYgKGZpbGUpIHsgdGhpcy5hY3RpdmVGaWxlID0gZmlsZTsgfVxyXG4gICAgICAgIGxldCBoZWFkZXIgPSBjb250ZW50RWwucXVlcnlTZWxlY3RvcignLmZuLWZvbGRlci1vdmVydmlldy1oZWFkZXInKTtcclxuICAgICAgICBpZiAoIWhlYWRlcikge1xyXG4gICAgICAgICAgICBoZWFkZXIgPSBjb250ZW50RWwuY3JlYXRlRWwoJ2g0Jywge1xyXG4gICAgICAgICAgICAgICAgY2xzOiAnZm4tZm9sZGVyLW92ZXJ2aWV3LWhlYWRlcicsXHJcbiAgICAgICAgICAgICAgICB0ZXh0OiAnRm9sZGVyIE92ZXJ2aWV3IHNldHRpbmdzJ1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IGFjdGl2ZUZpbGUgPSBwbHVnaW4uYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVGaWxlKCk7XHJcblxyXG4gICAgICAgIGNvbnN0IG92ZXJ2aWV3cyA9IGF3YWl0IGdldE92ZXJ2aWV3cyhwbHVnaW4sIGFjdGl2ZUZpbGUpO1xyXG5cclxuICAgICAgICBsZXQgc2V0dGluZ3NDb250YWluZXIgPSBjb250ZW50RWwucXVlcnlTZWxlY3RvcignLmZuLXNldHRpbmdzLWNvbnRhaW5lcicpIGFzIEhUTUxFbGVtZW50O1xyXG4gICAgICAgIGlmICghc2V0dGluZ3NDb250YWluZXIpIHtcclxuICAgICAgICAgICAgc2V0dGluZ3NDb250YWluZXIgPSBjb250ZW50RWwuY3JlYXRlRGl2KHsgY2xzOiAnZm4tc2V0dGluZ3MtY29udGFpbmVyJyB9KTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBzZXR0aW5nc0NvbnRhaW5lci5lbXB0eSgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3Qgb3ZlcnZpZXdTZXR0aW5nID0gbmV3IFNldHRpbmcoc2V0dGluZ3NDb250YWluZXIpO1xyXG4gICAgICAgIG92ZXJ2aWV3U2V0dGluZ1xyXG4gICAgICAgICAgICAuc2V0TmFtZSgnU2VsZWN0IG92ZXJ2aWV3JylcclxuICAgICAgICAgICAgLnNldENsYXNzKCdmbi1zZWxlY3Qtb3ZlcnZpZXctc2V0dGluZycpXHJcbiAgICAgICAgICAgIC5hZGREcm9wZG93bigoY2IpID0+IHtcclxuICAgICAgICAgICAgICAgIGlmIChhY3RpdmVGaWxlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgb3B0aW9ucyA9IG92ZXJ2aWV3cy5yZWR1Y2UoKGFjYywgb3ZlcnZpZXcpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYWNjW292ZXJ2aWV3LmlkXSA9IHBhcnNlT3ZlcnZpZXdUaXRsZShcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG92ZXJ2aWV3IGFzIGFueSBhcyBvdmVydmlld1NldHRpbmdzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGx1Z2luLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWN0aXZlRmlsZS5wYXJlbnRcclxuICAgICAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGFjYztcclxuICAgICAgICAgICAgICAgICAgICB9LCB7fSBhcyBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+KTtcclxuICAgICAgICAgICAgICAgICAgICBjYi5hZGRPcHRpb25zKG9wdGlvbnMpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCd5YW1sJywgeWFtbCk7XHJcbiAgICAgICAgICAgICAgICBjYi5hZGRPcHRpb24oJ2RlZmF1bHQnLCAnRGVmYXVsdCcpO1xyXG4gICAgICAgICAgICAgICAgY2Iuc2V0VmFsdWUoeWFtbD8uaWQgPz8gJ2RlZmF1bHQnKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoY2IuZ2V0VmFsdWUoKSA9PT0gJ2RlZmF1bHQnIHx8ICF5YW1sPy5pZC50cmltKCkpIHtcclxuICAgICAgICAgICAgICAgICAgICB5YW1sID0gZGVmYXVsdFNldHRpbmdzO1xyXG4gICAgICAgICAgICAgICAgICAgIGNiLnNldFZhbHVlKCdkZWZhdWx0Jyk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHlhbWwgPSBvdmVydmlld3MuZmluZCgob3ZlcnZpZXcpID0+IG92ZXJ2aWV3LmlkID09PSB5YW1sLmlkKSBhcyBhbnkgYXMgb3ZlcnZpZXdTZXR0aW5ncztcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBjYi5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodmFsdWUgPT09ICdkZWZhdWx0Jykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB5YW1sID0gZGVmYXVsdFNldHRpbmdzO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHlhbWwgPSBvdmVydmlld3MuZmluZCgob3ZlcnZpZXcpID0+IG92ZXJ2aWV3LmlkID09PSB2YWx1ZSkgYXMgYW55IGFzIG92ZXJ2aWV3U2V0dGluZ3M7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IGRpc3BsYXkoY29udGVudEVsLCB5YW1sLCBwbHVnaW4sIGRlZmF1bHRTZXR0aW5ncywgZGlzcGxheSwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIGFjdGl2ZUZpbGUpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICBhd2FpdCBjcmVhdGVPdmVydmlld1NldHRpbmdzKHNldHRpbmdzQ29udGFpbmVyLCB5YW1sLCBwbHVnaW4sIGRlZmF1bHRTZXR0aW5ncywgZGlzcGxheSwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIGFjdGl2ZUZpbGUpO1xyXG4gICAgfVxyXG59XHJcbiIsICJpbXBvcnQgeyBNYXJrZG93blBvc3RQcm9jZXNzb3JDb250ZXh0LCBwYXJzZVlhbWwsIFRBYnN0cmFjdEZpbGUsIFRGb2xkZXIsIFRGaWxlLCBzdHJpbmdpZnlZYW1sLCBOb3RpY2UsIE1lbnUsIE1hcmtkb3duUmVuZGVyQ2hpbGQsIEFwcCB9IGZyb20gJ29ic2lkaWFuJztcclxuaW1wb3J0IHsgRm9sZGVyT3ZlcnZpZXdTZXR0aW5ncyB9IGZyb20gJy4vbW9kYWxzL1NldHRpbmdzJztcclxuaW1wb3J0IHsgZ2V0RXhjbHVkZWRGb2xkZXIgfSBmcm9tICcuLi8uLi9FeGNsdWRlRm9sZGVycy9mdW5jdGlvbnMvZm9sZGVyRnVuY3Rpb25zJztcclxuaW1wb3J0IHsgZ2V0Rm9sZGVyUGF0aEZyb21TdHJpbmcgfSBmcm9tICcuLi8uLi9mdW5jdGlvbnMvdXRpbHMnO1xyXG5pbXBvcnQgeyBGaWxlRXhwbG9yZXJPdmVydmlldyB9IGZyb20gJy4vRmlsZUV4cGxvcmVyJztcclxuaW1wb3J0IHsgcmVuZGVyTGlzdE92ZXJ2aWV3IH0gZnJvbSAnLi9MaXN0U3R5bGUnO1xyXG5pbXBvcnQgTmV3Rm9sZGVyTmFtZU1vZGFsIGZyb20gJy4uLy4uL21vZGFscy9OZXdGb2xkZXJOYW1lJztcclxuaW1wb3J0IHsgQ3VzdG9tRXZlbnRFbWl0dGVyIH0gZnJvbSAnLi91dGlscy9FdmVudEVtaXR0ZXInO1xyXG5pbXBvcnQgRm9sZGVyT3ZlcnZpZXdQbHVnaW4gZnJvbSAnLi9tYWluJztcclxuaW1wb3J0IEZvbGRlck5vdGVzUGx1Z2luIGZyb20gJy4uLy4uL21haW4nO1xyXG5cclxuZXhwb3J0IHR5cGUgaW5jbHVkZVR5cGVzID0gJ2ZvbGRlcicgfCAnbWFya2Rvd24nIHwgJ2NhbnZhcycgfCAnb3RoZXInIHwgJ3BkZicgfCAnaW1hZ2UnIHwgJ2F1ZGlvJyB8ICd2aWRlbycgfCAnYWxsJztcclxuXHJcbmV4cG9ydCB0eXBlIG92ZXJ2aWV3U2V0dGluZ3MgPSB7XHJcbiAgICBpZDogc3RyaW5nO1xyXG4gICAgZm9sZGVyUGF0aDogc3RyaW5nO1xyXG4gICAgdGl0bGU6IHN0cmluZztcclxuICAgIHNob3dUaXRsZTogYm9vbGVhbjtcclxuICAgIGRlcHRoOiBudW1iZXI7XHJcbiAgICBpbmNsdWRlVHlwZXM6IGluY2x1ZGVUeXBlc1tdO1xyXG4gICAgc3R5bGU6ICdsaXN0JyB8ICdncmlkJyB8ICdleHBsb3Jlcic7XHJcbiAgICBkaXNhYmxlRmlsZVRhZzogYm9vbGVhbjtcclxuICAgIHNvcnRCeTogJ25hbWUnIHwgJ2NyZWF0ZWQnIHwgJ21vZGlmaWVkJztcclxuICAgIHNvcnRCeUFzYzogYm9vbGVhbjtcclxuICAgIHNob3dFbXB0eUZvbGRlcnM6IGJvb2xlYW47XHJcbiAgICBvbmx5SW5jbHVkZVN1YmZvbGRlcnM6IGJvb2xlYW47XHJcbiAgICBzdG9yZUZvbGRlckNvbmRpdGlvbjogYm9vbGVhbjtcclxuICAgIHNob3dGb2xkZXJOb3RlczogYm9vbGVhbjtcclxuICAgIGRpc2FibGVDb2xsYXBzZUljb246IGJvb2xlYW47XHJcbiAgICBhbHdheXNDb2xsYXBzZTogYm9vbGVhbjtcclxufTtcclxuXHJcbmV4cG9ydCBjbGFzcyBGb2xkZXJPdmVydmlldyB7XHJcblx0ZW1pdHRlcjogQ3VzdG9tRXZlbnRFbWl0dGVyO1xyXG5cdHlhbWw6IG92ZXJ2aWV3U2V0dGluZ3M7XHJcblx0cGx1Z2luOiBGb2xkZXJPdmVydmlld1BsdWdpbiB8IEZvbGRlck5vdGVzUGx1Z2luO1xyXG5cdGN0eDogTWFya2Rvd25Qb3N0UHJvY2Vzc29yQ29udGV4dDtcclxuXHRzb3VyY2U6IHN0cmluZztcclxuXHRmb2xkZXJOYW1lOiBzdHJpbmcgfCBudWxsO1xyXG5cdGVsOiBIVE1MRWxlbWVudDtcclxuXHRwYXRoQmxhY2tsaXN0OiBzdHJpbmdbXSA9IFtdO1xyXG5cdGZvbGRlcnM6IFRGb2xkZXJbXSA9IFtdO1xyXG5cdHNvdXJjZUZpbGVQYXRoOiBzdHJpbmc7XHJcblx0c291cmNlRm9sZGVyOiBURm9sZGVyIHwgdW5kZWZpbmVkO1xyXG5cdHJvb3Q6IEhUTUxFbGVtZW50O1xyXG5cdGxpc3RFbDogSFRNTFVMaXN0RWxlbWVudDtcclxuXHRkZWZhdWx0U2V0dGluZ3M6IG92ZXJ2aWV3U2V0dGluZ3M7XHJcblxyXG5cdGV2ZW50TGlzdGVuZXJzOiAoKCkgPT4gdm9pZClbXSA9IFtdO1xyXG5cdGNvbnN0cnVjdG9yKHBsdWdpbjogRm9sZGVyTm90ZXNQbHVnaW4gfCBGb2xkZXJPdmVydmlld1BsdWdpbiwgY3R4OiBNYXJrZG93blBvc3RQcm9jZXNzb3JDb250ZXh0LCBzb3VyY2U6IHN0cmluZywgZWw6IEhUTUxFbGVtZW50LCBkZWZhdWx0U2V0dGluZ3M6IG92ZXJ2aWV3U2V0dGluZ3MpIHtcclxuXHRcdHRoaXMucGx1Z2luID0gcGx1Z2luO1xyXG5cdFx0dGhpcy5lbWl0dGVyID0gbmV3IEN1c3RvbUV2ZW50RW1pdHRlcigpO1xyXG5cdFx0bGV0IHlhbWw6IG92ZXJ2aWV3U2V0dGluZ3MgPSBwYXJzZVlhbWwoc291cmNlKTtcclxuXHRcdGlmICgheWFtbCkgeyB5YW1sID0ge30gYXMgb3ZlcnZpZXdTZXR0aW5nczsgfVxyXG5cdFx0Y29uc3QgaW5jbHVkZVR5cGVzID0geWFtbD8uaW5jbHVkZVR5cGVzIHx8IGRlZmF1bHRTZXR0aW5ncy5pbmNsdWRlVHlwZXMgfHwgWydmb2xkZXInLCAnbWFya2Rvd24nXTtcclxuXHRcdHRoaXMuY3R4ID0gY3R4O1xyXG5cdFx0dGhpcy5zb3VyY2UgPSBzb3VyY2U7XHJcblx0XHR0aGlzLmVsID0gZWw7XHJcblx0XHR0aGlzLnNvdXJjZUZpbGVQYXRoID0gdGhpcy5jdHguc291cmNlUGF0aDtcclxuXHRcdHRoaXMuc291cmNlRm9sZGVyID0gdGhpcy5wbHVnaW4uYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChnZXRGb2xkZXJQYXRoRnJvbVN0cmluZyhjdHguc291cmNlUGF0aCkpIGFzIFRGb2xkZXI7XHJcblx0XHR0aGlzLmRlZmF1bHRTZXR0aW5ncyA9IGRlZmF1bHRTZXR0aW5ncztcclxuXHRcdHRoaXMueWFtbCA9IHtcclxuXHRcdFx0aWQ6IHlhbWw/LmlkID8/IGNyeXB0by5yYW5kb21VVUlEKCksXHJcblx0XHRcdGZvbGRlclBhdGg6IHlhbWw/LmZvbGRlclBhdGggPz8gZ2V0Rm9sZGVyUGF0aEZyb21TdHJpbmcoY3R4LnNvdXJjZVBhdGgpLFxyXG5cdFx0XHR0aXRsZTogeWFtbD8udGl0bGUgPz8gZGVmYXVsdFNldHRpbmdzLnRpdGxlLFxyXG5cdFx0XHRzaG93VGl0bGU6IHlhbWw/LnNob3dUaXRsZSA/PyBkZWZhdWx0U2V0dGluZ3Muc2hvd1RpdGxlLFxyXG5cdFx0XHRkZXB0aDogeWFtbD8uZGVwdGggPz8gZGVmYXVsdFNldHRpbmdzLmRlcHRoLFxyXG5cdFx0XHRzdHlsZTogeWFtbD8uc3R5bGUgPz8gJ2xpc3QnLFxyXG5cdFx0XHRpbmNsdWRlVHlwZXM6IGluY2x1ZGVUeXBlcy5tYXAoKHR5cGUpID0+IHR5cGUudG9Mb3dlckNhc2UoKSkgYXMgaW5jbHVkZVR5cGVzW10sXHJcblx0XHRcdGRpc2FibGVGaWxlVGFnOiB5YW1sPy5kaXNhYmxlRmlsZVRhZyA/PyBkZWZhdWx0U2V0dGluZ3MuZGlzYWJsZUZpbGVUYWcsXHJcblx0XHRcdHNvcnRCeTogeWFtbD8uc29ydEJ5ID8/IGRlZmF1bHRTZXR0aW5ncy5zb3J0QnksXHJcblx0XHRcdHNvcnRCeUFzYzogeWFtbD8uc29ydEJ5QXNjID8/IGRlZmF1bHRTZXR0aW5ncy5zb3J0QnlBc2MsXHJcblx0XHRcdHNob3dFbXB0eUZvbGRlcnM6IHlhbWw/LnNob3dFbXB0eUZvbGRlcnMgPz8gZGVmYXVsdFNldHRpbmdzLnNob3dFbXB0eUZvbGRlcnMsXHJcblx0XHRcdG9ubHlJbmNsdWRlU3ViZm9sZGVyczogeWFtbD8ub25seUluY2x1ZGVTdWJmb2xkZXJzID8/IGRlZmF1bHRTZXR0aW5ncy5vbmx5SW5jbHVkZVN1YmZvbGRlcnMsXHJcblx0XHRcdHN0b3JlRm9sZGVyQ29uZGl0aW9uOiB5YW1sPy5zdG9yZUZvbGRlckNvbmRpdGlvbiA/PyBkZWZhdWx0U2V0dGluZ3Muc3RvcmVGb2xkZXJDb25kaXRpb24sXHJcblx0XHRcdHNob3dGb2xkZXJOb3RlczogeWFtbD8uc2hvd0ZvbGRlck5vdGVzID8/IGRlZmF1bHRTZXR0aW5ncy5zaG93Rm9sZGVyTm90ZXMsXHJcblx0XHRcdGRpc2FibGVDb2xsYXBzZUljb246IHlhbWw/LmRpc2FibGVDb2xsYXBzZUljb24gPz8gZGVmYXVsdFNldHRpbmdzLmRpc2FibGVDb2xsYXBzZUljb24sXHJcblx0XHRcdGFsd2F5c0NvbGxhcHNlOiB5YW1sPy5hbHdheXNDb2xsYXBzZSA/PyBkZWZhdWx0U2V0dGluZ3MuYWx3YXlzQ29sbGFwc2UsXHJcblx0XHR9O1xyXG5cclxuXHJcblx0XHRjb25zdCBjdXN0b21DaGlsZCA9IG5ldyBDdXN0b21NYXJrZG93blJlbmRlckNoaWxkKGVsLCB0aGlzKTtcclxuXHRcdGN0eC5hZGRDaGlsZChjdXN0b21DaGlsZCk7XHJcblx0fVxyXG5cclxuXHRvbihldmVudDogc3RyaW5nLCBsaXN0ZW5lcjogKGRhdGE/OiBhbnkpID0+IHZvaWQpIHtcclxuXHRcdHRoaXMuZW1pdHRlci5vbihldmVudCwgbGlzdGVuZXIpO1xyXG5cdH1cclxuXHJcblx0b2ZmKGV2ZW50OiBzdHJpbmcsIGxpc3RlbmVyOiAoZGF0YT86IGFueSkgPT4gdm9pZCkge1xyXG5cdFx0dGhpcy5lbWl0dGVyLm9mZihldmVudCwgbGlzdGVuZXIpO1xyXG5cdH1cclxuXHJcblx0cHJpdmF0ZSBlbWl0KGV2ZW50OiBzdHJpbmcsIGRhdGE/OiBhbnkpIHtcclxuXHRcdHRoaXMuZW1pdHRlci5lbWl0KGV2ZW50LCBkYXRhKTtcclxuXHR9XHJcblxyXG5cdGhhbmRsZVZhdWx0Q2hhbmdlKGV2ZW50VHlwZTogc3RyaW5nKSB7XHJcblx0XHR0aGlzLmVtaXQoJ3ZhdWx0LWNoYW5nZScsIGV2ZW50VHlwZSk7XHJcblx0fVxyXG5cclxuXHRkaXNjb25uZWN0TGlzdGVuZXJzKCkge1xyXG5cdFx0dGhpcy5ldmVudExpc3RlbmVycy5mb3JFYWNoKCh1bnJlZ2lzdGVyKSA9PiB1bnJlZ2lzdGVyKCkpO1xyXG5cdFx0dGhpcy5ldmVudExpc3RlbmVycyA9IFtdO1xyXG5cdH1cclxuXHJcblx0cmVnaXN0ZXJMaXN0ZW5lcnMoKSB7XHJcblx0XHRjb25zdCBwbHVnaW4gPSB0aGlzLnBsdWdpbjtcclxuXHRcdGNvbnN0IGhhbmRsZVJlbmFtZSA9ICgpID0+IHRoaXMuaGFuZGxlVmF1bHRDaGFuZ2UoJ3JlbmFtZWQnKTtcclxuXHRcdGNvbnN0IGhhbmRsZUNyZWF0ZSA9ICgpID0+IHRoaXMuaGFuZGxlVmF1bHRDaGFuZ2UoJ2NyZWF0ZWQnKTtcclxuXHRcdGNvbnN0IGhhbmRsZURlbGV0ZSA9ICgpID0+IHRoaXMuaGFuZGxlVmF1bHRDaGFuZ2UoJ2RlbGV0ZWQnKTtcclxuXHJcblx0XHRwbHVnaW4uYXBwLnZhdWx0Lm9uKCdyZW5hbWUnLCBoYW5kbGVSZW5hbWUpO1xyXG5cdFx0cGx1Z2luLmFwcC52YXVsdC5vbignY3JlYXRlJywgaGFuZGxlQ3JlYXRlKTtcclxuXHRcdHBsdWdpbi5hcHAudmF1bHQub24oJ2RlbGV0ZScsIGhhbmRsZURlbGV0ZSk7XHJcblxyXG5cdFx0dGhpcy5ldmVudExpc3RlbmVycy5wdXNoKCgpID0+IHBsdWdpbi5hcHAudmF1bHQub2ZmKCdyZW5hbWUnLCBoYW5kbGVSZW5hbWUpKTtcclxuXHRcdHRoaXMuZXZlbnRMaXN0ZW5lcnMucHVzaCgoKSA9PiBwbHVnaW4uYXBwLnZhdWx0Lm9mZignY3JlYXRlJywgaGFuZGxlQ3JlYXRlKSk7XHJcblx0XHR0aGlzLmV2ZW50TGlzdGVuZXJzLnB1c2goKCkgPT4gcGx1Z2luLmFwcC52YXVsdC5vZmYoJ2RlbGV0ZScsIGhhbmRsZURlbGV0ZSkpO1xyXG5cdH1cclxuXHJcblx0YXN5bmMgY3JlYXRlKHBsdWdpbjogRm9sZGVyT3ZlcnZpZXdQbHVnaW4gfCBGb2xkZXJOb3Rlc1BsdWdpbiwgc291cmNlOiBzdHJpbmcsIGVsOiBIVE1MRWxlbWVudCwgY3R4OiBNYXJrZG93blBvc3RQcm9jZXNzb3JDb250ZXh0KSB7XHJcblx0XHRlbC5lbXB0eSgpO1xyXG5cdFx0ZWwucGFyZW50RWxlbWVudD8uY2xhc3NMaXN0LmFkZCgnZm9sZGVyLW92ZXJ2aWV3LWNvbnRhaW5lcicpO1xyXG5cclxuXHRcdGNvbnN0IHJvb3QgPSBlbC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdmb2xkZXItb3ZlcnZpZXcnIH0pO1xyXG5cdFx0dGhpcy5yb290ID0gcm9vdDtcclxuXHJcblx0XHRjb25zdCB0aXRsZUVsID0gcm9vdC5jcmVhdGVFbCgnaDEnLCB7IGNsczogJ2ZvbGRlci1vdmVydmlldy10aXRsZScgfSk7XHJcblxyXG5cdFx0Y29uc3QgdWwgPSByb290LmNyZWF0ZUVsKCd1bCcsIHsgY2xzOiAnZm9sZGVyLW92ZXJ2aWV3LWxpc3QnIH0pO1xyXG5cdFx0dGhpcy5saXN0RWwgPSB1bDtcclxuXHJcblx0XHRpZiAodGhpcy55YW1sLmluY2x1ZGVUeXBlcy5sZW5ndGggPT09IDApIHsgcmV0dXJuIHRoaXMuYWRkRWRpdEJ1dHRvbihyb290KTsgfVxyXG5cdFx0bGV0IGZpbGVzOiBUQWJzdHJhY3RGaWxlW10gPSBbXTtcclxuXHJcblx0XHRjb25zdCBzb3VyY2VGaWxlID0gcGx1Z2luLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoY3R4LnNvdXJjZVBhdGgpO1xyXG5cdFx0aWYgKCFzb3VyY2VGaWxlKSByZXR1cm47XHJcblxyXG5cdFx0bGV0IHNvdXJjZUZvbGRlclBhdGggPSB0aGlzLnlhbWwuZm9sZGVyUGF0aCB8fCBnZXRGb2xkZXJQYXRoRnJvbVN0cmluZyhjdHguc291cmNlUGF0aCk7XHJcblx0XHRpZiAoIWN0eC5zb3VyY2VQYXRoLmluY2x1ZGVzKCcvJykpIHtcclxuXHRcdFx0c291cmNlRm9sZGVyUGF0aCA9ICcvJztcclxuXHRcdH1cclxuXHJcblx0XHR0aGlzLnJlZ2lzdGVyTGlzdGVuZXJzKCk7XHJcblxyXG5cdFx0bGV0IHNvdXJjZUZvbGRlcjtcclxuXHJcblx0XHRpZiAoc291cmNlRm9sZGVyUGF0aCAhPT0gJy8nKSB7XHJcblx0XHRcdGlmICh0aGlzLnlhbWwuZm9sZGVyUGF0aCA9PT0gJycpIHtcclxuXHRcdFx0XHRzb3VyY2VGb2xkZXIgPSBwbHVnaW4uYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChnZXRGb2xkZXJQYXRoRnJvbVN0cmluZyhjdHguc291cmNlUGF0aCkpO1xyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdHNvdXJjZUZvbGRlciA9IHBsdWdpbi5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKHRoaXMueWFtbC5mb2xkZXJQYXRoKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdGlmICh0aGlzLnlhbWwuc2hvd1RpdGxlKSB7XHJcblx0XHRcdGlmIChzb3VyY2VGb2xkZXIgJiYgc291cmNlRm9sZGVyUGF0aCAhPT0gJy8nKSB7XHJcblx0XHRcdFx0dGl0bGVFbC5pbm5lclRleHQgPSB0aGlzLnlhbWwudGl0bGUucmVwbGFjZSgne3tmb2xkZXJOYW1lfX0nLCBzb3VyY2VGb2xkZXIubmFtZSk7XHJcblx0XHRcdH0gZWxzZSBpZiAoc291cmNlRm9sZGVyUGF0aCA9PSAnLycpIHtcclxuXHRcdFx0XHR0aXRsZUVsLmlubmVyVGV4dCA9IHRoaXMueWFtbC50aXRsZS5yZXBsYWNlKCd7e2ZvbGRlck5hbWV9fScsICdWYXVsdCcpO1xyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdHRpdGxlRWwuaW5uZXJUZXh0ID0gdGhpcy55YW1sLnRpdGxlLnJlcGxhY2UoJ3t7Zm9sZGVyTmFtZX19JywgJycpO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKCFzb3VyY2VGb2xkZXIgJiYgKHNvdXJjZUZvbGRlclBhdGggIT09ICcvJyAmJiBzb3VyY2VGb2xkZXJQYXRoICE9PSAnJykpIHsgcmV0dXJuIG5ldyBOb3RpY2UoJ0ZvbGRlciBvdmVydmlldzogQ291bGRuXFwndCBmaW5kIHRoZSBmb2xkZXInKTsgfVxyXG5cdFx0aWYgKCFzb3VyY2VGb2xkZXIgJiYgc291cmNlRm9sZGVyUGF0aCA9PSAnJykge1xyXG5cdFx0XHRzb3VyY2VGb2xkZXJQYXRoID0gJy8nO1xyXG5cdFx0fVxyXG5cdFx0aWYgKCEoc291cmNlRm9sZGVyIGluc3RhbmNlb2YgVEZvbGRlcikgJiYgc291cmNlRm9sZGVyUGF0aCAhPT0gJy8nKSB7IHJldHVybjsgfVxyXG5cclxuXHRcdGlmIChzb3VyY2VGb2xkZXJQYXRoID09PSAnLycpIHtcclxuXHRcdFx0Y29uc3Qgcm9vdEZpbGVzOiBUQWJzdHJhY3RGaWxlW10gPSBbXTtcclxuXHRcdFx0cGx1Z2luLmFwcC52YXVsdC5nZXRBbGxMb2FkZWRGaWxlcygpLmZpbHRlcigoZikgPT4gZi5wYXJlbnQ/LnBhdGggPT09ICcvJykuZm9yRWFjaCgoZmlsZSkgPT4ge1xyXG5cdFx0XHRcdGlmICghZmlsZS5wYXRoLmluY2x1ZGVzKCcvJykpIHtcclxuXHRcdFx0XHRcdHJvb3RGaWxlcy5wdXNoKGZpbGUpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSk7XHJcblx0XHRcdGZpbGVzID0gcm9vdEZpbGVzO1xyXG5cdFx0fSBlbHNlIGlmIChzb3VyY2VGb2xkZXIgaW5zdGFuY2VvZiBURm9sZGVyKSB7XHJcblx0XHRcdGZpbGVzID0gc291cmNlRm9sZGVyLmNoaWxkcmVuO1xyXG5cdFx0fVxyXG5cclxuXHRcdGZpbGVzID0gYXdhaXQgdGhpcy5maWx0ZXJGaWxlcyhmaWxlcywgcGx1Z2luLCBzb3VyY2VGb2xkZXJQYXRoLCB0aGlzLnlhbWwuZGVwdGgsIHRoaXMucGF0aEJsYWNrbGlzdCk7XHJcblxyXG5cdFx0aWYgKCF0aGlzLnlhbWwuaW5jbHVkZVR5cGVzLmluY2x1ZGVzKCdmb2xkZXInKSkge1xyXG5cdFx0XHRmaWxlcyA9IHRoaXMuZ2V0QWxsRmlsZXMoZmlsZXMsIHNvdXJjZUZvbGRlclBhdGgsIHRoaXMueWFtbC5kZXB0aCk7XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKGZpbGVzLmxlbmd0aCA9PT0gMCkge1xyXG5cdFx0XHRyZXR1cm4gdGhpcy5hZGRFZGl0QnV0dG9uKHJvb3QpO1xyXG5cdFx0fVxyXG5cclxuXHRcdGZpbGVzID0gdGhpcy5zb3J0RmlsZXMoZmlsZXMpO1xyXG5cclxuXHRcdGlmICh0aGlzLnlhbWwuc3R5bGUgPT09ICdncmlkJykge1xyXG5cdFx0XHRjb25zdCBncmlkID0gcm9vdC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdmb2xkZXItb3ZlcnZpZXctZ3JpZCcgfSk7XHJcblx0XHRcdGZpbGVzLmZvckVhY2goYXN5bmMgKGZpbGUpID0+IHtcclxuXHRcdFx0XHRjb25zdCBncmlkSXRlbSA9IGdyaWQuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnZm9sZGVyLW92ZXJ2aWV3LWdyaWQtaXRlbScgfSk7XHJcblx0XHRcdFx0Y29uc3QgZ3JpZEFydGljbGUgPSBncmlkSXRlbS5jcmVhdGVFbCgnYXJ0aWNsZScsIHsgY2xzOiAnZm9sZGVyLW92ZXJ2aWV3LWdyaWQtaXRlbS1hcnRpY2xlJyB9KTtcclxuXHRcdFx0XHRpZiAoZmlsZSBpbnN0YW5jZW9mIFRGaWxlKSB7XHJcblx0XHRcdFx0XHRjb25zdCBmaWxlQ29udGVudCA9IGF3YWl0IHBsdWdpbi5hcHAudmF1bHQucmVhZChmaWxlKTtcclxuXHRcdFx0XHRcdGNvbnN0IGRlc2NyaXB0aW9uRWwgPSBncmlkQXJ0aWNsZS5jcmVhdGVFbCgncCcsIHsgY2xzOiAnZm9sZGVyLW92ZXJ2aWV3LWdyaWQtaXRlbS1kZXNjcmlwdGlvbicgfSk7XHJcblx0XHRcdFx0XHRsZXQgZGVzY3JpcHRpb24gPSBmaWxlQ29udGVudC5zcGxpdCgnXFxuJylbMF07XHJcblx0XHRcdFx0XHRpZiAoZGVzY3JpcHRpb24ubGVuZ3RoID4gNjQpIHtcclxuXHRcdFx0XHRcdFx0ZGVzY3JpcHRpb24gPSBkZXNjcmlwdGlvbi5zbGljZSgwLCA2NCkgKyAnLi4uJztcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdGRlc2NyaXB0aW9uRWwuaW5uZXJUZXh0ID0gZGVzY3JpcHRpb247XHJcblx0XHRcdFx0XHRjb25zdCBsaW5rID0gZ3JpZEFydGljbGUuY3JlYXRlRWwoJ2EnLCB7IGNsczogJ2ZvbGRlci1vdmVydmlldy1ncmlkLWl0ZW0tbGluayBpbnRlcm5hbC1saW5rJyB9KTtcclxuXHRcdFx0XHRcdGNvbnN0IHRpdGxlID0gbGluay5jcmVhdGVFbCgnaDEnLCB7IGNsczogJ2ZvbGRlci1vdmVydmlldy1ncmlkLWl0ZW0tbGluay10aXRsZScgfSk7XHJcblx0XHRcdFx0XHR0aXRsZS5pbm5lclRleHQgPSBmaWxlLm5hbWUucmVwbGFjZSgnLm1kJywgJycpLnJlcGxhY2UoJy5jYW52YXMnLCAnJyk7XHJcblx0XHRcdFx0XHRsaW5rLmhyZWYgPSBmaWxlLnBhdGg7XHJcblx0XHRcdFx0fSBlbHNlIGlmIChmaWxlIGluc3RhbmNlb2YgVEZvbGRlcikge1xyXG5cdFx0XHRcdFx0Y29uc3QgZm9sZGVySXRlbSA9IGdyaWRBcnRpY2xlLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ2ZvbGRlci1vdmVydmlldy1ncmlkLWl0ZW0tZm9sZGVyJyB9KTtcclxuXHRcdFx0XHRcdGNvbnN0IGZvbGRlck5hbWUgPSBmb2xkZXJJdGVtLmNyZWF0ZUVsKCdoMScsIHsgY2xzOiAnZm9sZGVyLW92ZXJ2aWV3LWdyaWQtaXRlbS1mb2xkZXItbmFtZScgfSk7XHJcblx0XHRcdFx0XHRmb2xkZXJOYW1lLmlubmVyVGV4dCA9IGZpbGUubmFtZTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0pO1xyXG5cdFx0fSBlbHNlIGlmICh0aGlzLnlhbWwuc3R5bGUgPT09ICdsaXN0Jykge1xyXG5cdFx0XHRyZW5kZXJMaXN0T3ZlcnZpZXcocGx1Z2luLCBjdHgsIHJvb3QsIHRoaXMueWFtbCwgdGhpcy5wYXRoQmxhY2tsaXN0LCB0aGlzKTtcclxuXHRcdH0gZWxzZSBpZiAodGhpcy55YW1sLnN0eWxlID09PSAnZXhwbG9yZXInKSB7XHJcblx0XHRcdGNvbnN0IGZpbGVFeHBsb3Jlck92ZXJ2aWV3ID0gbmV3IEZpbGVFeHBsb3Jlck92ZXJ2aWV3KHBsdWdpbiwgY3R4LCByb290LCB0aGlzLnlhbWwsIHRoaXMucGF0aEJsYWNrbGlzdCwgdGhpcyk7XHJcblx0XHRcdGlmICh0aGlzLnBsdWdpbi5hcHAud29ya3NwYWNlLmxheW91dFJlYWR5KSB7XHJcblx0XHRcdFx0YXdhaXQgZmlsZUV4cGxvcmVyT3ZlcnZpZXcucmVuZGVyRmlsZUV4cGxvcmVyKCk7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0dGhpcy5wbHVnaW4uYXBwLndvcmtzcGFjZS5vbkxheW91dFJlYWR5KCgpID0+IHtcclxuXHRcdFx0XHRcdGZpbGVFeHBsb3Jlck92ZXJ2aWV3LnJlbmRlckZpbGVFeHBsb3JlcigpO1xyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0Y29uc3Qgb3ZlcnZpZXdMaXN0RWwgPSBlbC5jaGlsZE5vZGVzWzBdLmNoaWxkTm9kZXNbMV07XHJcblx0XHRpZiAob3ZlcnZpZXdMaXN0RWwgJiYgb3ZlcnZpZXdMaXN0RWwuY2hpbGROb2Rlcy5sZW5ndGggPT09IDApIHtcclxuXHRcdFx0aWYgKHRoaXMueWFtbC5zdHlsZSA9PT0gJ2V4cGxvcmVyJykge1xyXG5cdFx0XHRcdGNvbnN0IG92ZXJ2aWV3ID0gZWwuY2hpbGROb2Rlc1swXTtcclxuXHRcdFx0XHRpZiAoIW92ZXJ2aWV3LmNoaWxkTm9kZXNbMl0pIHtcclxuXHRcdFx0XHRcdGlmICh0aGlzLnBsdWdpbi5hcHAud29ya3NwYWNlLmxheW91dFJlYWR5KSB7XHJcblx0XHRcdFx0XHRcdHJldHVybiB0aGlzLmFkZEVkaXRCdXR0b24ocm9vdCk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdGlmICh0aGlzLnBsdWdpbi5hcHAud29ya3NwYWNlLmxheW91dFJlYWR5KSB7XHJcblx0XHRcdFx0XHRyZXR1cm4gdGhpcy5hZGRFZGl0QnV0dG9uKHJvb3QpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdC8vIGlmICh0aGlzLnlhbWwuaW5jbHVkZVR5cGVzLmxlbmd0aCA+IDEgJiYgKCF0aGlzLnlhbWwuc2hvd0VtcHR5Rm9sZGVycyB8fCB0aGlzLnlhbWwub25seUluY2x1ZGVTdWJmb2xkZXJzKSAmJiB0aGlzLnlhbWwuc3R5bGUgPT09ICdsaXN0Jykge1xyXG5cdFx0Ly8gICAgIHRoaXMucmVtb3ZlRW1wdHlGb2xkZXJzKHVsLCAxLCB0aGlzLnlhbWwpO1xyXG5cdFx0Ly8gfVxyXG5cdH1cclxuXHJcblx0YWRkRWRpdEJ1dHRvbihyb290OiBIVE1MRWxlbWVudCkge1xyXG5cdFx0Y29uc3QgZWRpdEJ1dHRvbiA9IHJvb3QuY3JlYXRlRWwoJ2J1dHRvbicsIHsgY2xzOiAnZm9sZGVyLW92ZXJ2aWV3LWVkaXQtYnV0dG9uJyB9KTtcclxuXHRcdGVkaXRCdXR0b24uaW5uZXJUZXh0ID0gJ0VkaXQgb3ZlcnZpZXcnO1xyXG5cdFx0ZWRpdEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XHJcblx0XHRcdGUuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCk7XHJcblx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcclxuXHRcdFx0ZS5zdG9wUHJvcGFnYXRpb24oKTtcclxuXHRcdFx0bmV3IEZvbGRlck92ZXJ2aWV3U2V0dGluZ3ModGhpcy5wbHVnaW4uYXBwIGFzIEFwcCwgdGhpcy5wbHVnaW4sIHRoaXMueWFtbCwgdGhpcy5jdHgsIHRoaXMuZWwsIHRoaXMucGx1Z2luLnNldHRpbmdzIGFzIGFueSBhcyBvdmVydmlld1NldHRpbmdzKS5vcGVuKCk7XHJcblx0XHR9LCB7IGNhcHR1cmU6IHRydWUgfSk7XHJcblx0fVxyXG5cclxuXHRhc3luYyBmaWx0ZXJGaWxlcyhmaWxlczogVEFic3RyYWN0RmlsZVtdLCBwbHVnaW46IEZvbGRlck92ZXJ2aWV3UGx1Z2luIHwgRm9sZGVyTm90ZXNQbHVnaW4sIHNvdXJjZUZvbGRlclBhdGg6IHN0cmluZywgZGVwdGg6IG51bWJlciwgcGF0aEJsYWNrbGlzdDogc3RyaW5nW10pIHtcclxuXHRcdGNvbnN0IGZpbHRlcmVkRmlsZXMgPSBhd2FpdCBQcm9taXNlLmFsbChmaWxlcy5tYXAoYXN5bmMgKGZpbGUpID0+IHtcclxuXHRcdFx0Y29uc3QgZm9sZGVyUGF0aCA9IGdldEZvbGRlclBhdGhGcm9tU3RyaW5nKGZpbGUucGF0aCk7XHJcblx0XHRcdGNvbnN0IGlzQmxhY2tsaXN0ZWQgPSBwYXRoQmxhY2tsaXN0LmluY2x1ZGVzKGZpbGUucGF0aCk7XHJcblx0XHRcdGNvbnN0IGlzU3ViZm9sZGVyID0gc291cmNlRm9sZGVyUGF0aCA9PT0gJy8nIHx8IGZvbGRlclBhdGguc3RhcnRzV2l0aChzb3VyY2VGb2xkZXJQYXRoKTtcclxuXHRcdFx0Y29uc3QgaXNTb3VyY2VGaWxlID0gZmlsZS5wYXRoID09PSB0aGlzLnNvdXJjZUZpbGVQYXRoO1xyXG5cdFx0XHRsZXQgaXNFeGNsdWRlZEZyb21PdmVydmlldyA9IGZhbHNlO1xyXG5cclxuXHRcdFx0aWYgKHBsdWdpbiBpbnN0YW5jZW9mIEZvbGRlck5vdGVzUGx1Z2luKSB7XHJcblx0XHRcdFx0aXNFeGNsdWRlZEZyb21PdmVydmlldyA9IChhd2FpdCBnZXRFeGNsdWRlZEZvbGRlcihwbHVnaW4sIGZpbGUucGF0aCwgdHJ1ZSkpPy5leGNsdWRlRnJvbUZvbGRlck92ZXJ2aWV3ID8/IGZhbHNlO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRpZiAoKGlzQmxhY2tsaXN0ZWQgJiYgIXRoaXMueWFtbC5zaG93Rm9sZGVyTm90ZXMpIHx8ICFpc1N1YmZvbGRlciB8fCBpc1NvdXJjZUZpbGUgfHwgaXNFeGNsdWRlZEZyb21PdmVydmlldykge1xyXG5cdFx0XHRcdHJldHVybiBudWxsO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRjb25zdCBmaWxlRGVwdGggPSBmaWxlLnBhdGguc3BsaXQoJy8nKS5sZW5ndGggLSAoc291cmNlRm9sZGVyUGF0aCA9PT0gJy8nID8gMCA6IHNvdXJjZUZvbGRlclBhdGguc3BsaXQoJy8nKS5sZW5ndGgpO1xyXG5cdFx0XHRyZXR1cm4gZmlsZURlcHRoIDw9IGRlcHRoID8gZmlsZSA6IG51bGw7XHJcblx0XHR9KSk7XHJcblxyXG5cdFx0cmV0dXJuIGZpbHRlcmVkRmlsZXMuZmlsdGVyKChmaWxlKSA9PiBmaWxlICE9PSBudWxsKTtcclxuXHR9XHJcblxyXG5cclxuXHJcblx0c29ydEZpbGVzKGZpbGVzOiBUQWJzdHJhY3RGaWxlW10pOiBUQWJzdHJhY3RGaWxlW10ge1xyXG5cdFx0Y29uc3QgeWFtbCA9IHRoaXMueWFtbDtcclxuXHJcblx0XHRpZiAoIXlhbWw/LnNvcnRCeSkge1xyXG5cdFx0XHR5YW1sLnNvcnRCeSA9IHRoaXMuZGVmYXVsdFNldHRpbmdzLnNvcnRCeSA/PyAnbmFtZSc7XHJcblx0XHRcdHlhbWwuc29ydEJ5QXNjID0gdGhpcy5kZWZhdWx0U2V0dGluZ3Muc29ydEJ5QXNjID8/IGZhbHNlO1xyXG5cdFx0fVxyXG5cclxuXHRcdGZpbGVzLnNvcnQoKGEsIGIpID0+IHtcclxuXHRcdFx0aWYgKGEgaW5zdGFuY2VvZiBURm9sZGVyICYmICEoYiBpbnN0YW5jZW9mIFRGb2xkZXIpKSB7XHJcblx0XHRcdFx0cmV0dXJuIC0xO1xyXG5cdFx0XHR9XHJcblx0XHRcdGlmICghKGEgaW5zdGFuY2VvZiBURm9sZGVyKSAmJiBiIGluc3RhbmNlb2YgVEZvbGRlcikge1xyXG5cdFx0XHRcdHJldHVybiAxO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRpZiAoYSBpbnN0YW5jZW9mIFRGb2xkZXIgJiYgYiBpbnN0YW5jZW9mIFRGb2xkZXIpIHtcclxuXHRcdFx0XHRyZXR1cm4geWFtbC5zb3J0QnlBc2NcclxuXHRcdFx0XHRcdD8gYS5uYW1lLmxvY2FsZUNvbXBhcmUoYi5uYW1lKVxyXG5cdFx0XHRcdFx0OiBiLm5hbWUubG9jYWxlQ29tcGFyZShhLm5hbWUpO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRpZiAoYSBpbnN0YW5jZW9mIFRGaWxlICYmIGIgaW5zdGFuY2VvZiBURmlsZSkge1xyXG5cdFx0XHRcdGlmICh5YW1sLnNvcnRCeSA9PT0gJ2NyZWF0ZWQnKSB7XHJcblx0XHRcdFx0XHRyZXR1cm4geWFtbC5zb3J0QnlBc2MgPyBhLnN0YXQuY3RpbWUgLSBiLnN0YXQuY3RpbWUgOiBiLnN0YXQuY3RpbWUgLSBhLnN0YXQuY3RpbWU7XHJcblx0XHRcdFx0fSBlbHNlIGlmICh5YW1sLnNvcnRCeSA9PT0gJ21vZGlmaWVkJykge1xyXG5cdFx0XHRcdFx0cmV0dXJuIHlhbWwuc29ydEJ5QXNjID8gYS5zdGF0Lm10aW1lIC0gYi5zdGF0Lm10aW1lIDogYi5zdGF0Lm10aW1lIC0gYS5zdGF0Lm10aW1lO1xyXG5cdFx0XHRcdH0gZWxzZSBpZiAoeWFtbC5zb3J0QnkgPT09ICduYW1lJykge1xyXG5cdFx0XHRcdFx0cmV0dXJuIHlhbWwuc29ydEJ5QXNjXHJcblx0XHRcdFx0XHRcdD8gYS5iYXNlbmFtZS5sb2NhbGVDb21wYXJlKGIuYmFzZW5hbWUpXHJcblx0XHRcdFx0XHRcdDogYi5iYXNlbmFtZS5sb2NhbGVDb21wYXJlKGEuYmFzZW5hbWUpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0cmV0dXJuIDA7XHJcblx0XHR9KTtcclxuXHJcblx0XHRyZXR1cm4gZmlsZXM7XHJcblx0fVxyXG5cclxuXHRnZXRBbGxGaWxlcyhmaWxlczogVEFic3RyYWN0RmlsZVtdLCBzb3VyY2VGb2xkZXJQYXRoOiBzdHJpbmcsIGRlcHRoOiBudW1iZXIpIHtcclxuXHRcdGNvbnN0IGFsbEZpbGVzOiBUQWJzdHJhY3RGaWxlW10gPSBbXTtcclxuXHJcblx0XHRjb25zdCBnZXREZXB0aCA9IChmaWxlUGF0aDogc3RyaW5nKSA9PiB7XHJcblx0XHRcdHJldHVybiBmaWxlUGF0aC5zcGxpdCgnLycpLmxlbmd0aCAtIHNvdXJjZUZvbGRlclBhdGguc3BsaXQoJy8nKS5sZW5ndGg7XHJcblx0XHR9O1xyXG5cclxuXHRcdGZpbGVzLmZvckVhY2goKGZpbGUpID0+IHtcclxuXHRcdFx0Y29uc3QgZmlsZURlcHRoID0gZ2V0RGVwdGgoZmlsZS5wYXRoKTtcclxuXHJcblx0XHRcdGlmIChmaWxlIGluc3RhbmNlb2YgVEZvbGRlcikge1xyXG5cdFx0XHRcdGlmIChmaWxlRGVwdGggPCBkZXB0aCkge1xyXG5cdFx0XHRcdFx0YWxsRmlsZXMucHVzaCguLi50aGlzLmdldEFsbEZpbGVzKGZpbGUuY2hpbGRyZW4sIHNvdXJjZUZvbGRlclBhdGgsIGRlcHRoKSk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdGFsbEZpbGVzLnB1c2goZmlsZSk7XHJcblx0XHRcdH1cclxuXHRcdH0pO1xyXG5cclxuXHRcdHJldHVybiBhbGxGaWxlcztcclxuXHR9XHJcblxyXG5cdGZpbGVNZW51KGZpbGU6IFRGaWxlLCBlOiBNb3VzZUV2ZW50KSB7XHJcblx0XHRjb25zdCBwbHVnaW4gPSB0aGlzLnBsdWdpbjtcclxuXHRcdGNvbnN0IGZpbGVNZW51ID0gbmV3IE1lbnUoKTtcclxuXHRcdGZpbGVNZW51LmFkZFNlcGFyYXRvcigpO1xyXG5cclxuXHRcdGZpbGVNZW51LmFkZEl0ZW0oKGl0ZW0pID0+IHtcclxuXHRcdFx0aXRlbS5zZXRUaXRsZSh3aW5kb3cuaTE4bmV4dC50KCdwbHVnaW5zLmZpbGUtZXhwbG9yZXIubWVudS1vcHQtcmVuYW1lJykpO1xyXG5cdFx0XHRpdGVtLnNldEljb24oJ3BlbmNpbCcpO1xyXG5cdFx0XHRpdGVtLm9uQ2xpY2soYXN5bmMgKCkgPT4ge1xyXG5cdFx0XHRcdHBsdWdpbi5hcHAuZmlsZU1hbmFnZXIucHJvbXB0Rm9yRmlsZVJlbmFtZShmaWxlKTtcclxuXHRcdFx0fSk7XHJcblx0XHR9KTtcclxuXHJcblx0XHRmaWxlTWVudS5hZGRJdGVtKChpdGVtKSA9PiB7XHJcblx0XHRcdGl0ZW0uc2V0VGl0bGUod2luZG93LmkxOG5leHQudCgncGx1Z2lucy5maWxlLWV4cGxvcmVyLm1lbnUtb3B0LWRlbGV0ZScpKTtcclxuXHRcdFx0aXRlbS5zZXRJY29uKCd0cmFzaCcpO1xyXG5cdFx0XHRpdGVtLmRvbS5hZGRDbGFzcygnaXMtd2FybmluZycpO1xyXG5cdFx0XHRpdGVtLmRvbS5zZXRBdHRyaWJ1dGUoJ2RhdGEtc2VjdGlvbicsICdkYW5nZXInKTtcclxuXHRcdFx0aXRlbS5vbkNsaWNrKCgpID0+IHtcclxuXHRcdFx0XHRwbHVnaW4uYXBwLmZpbGVNYW5hZ2VyLnByb21wdEZvckRlbGV0aW9uKGZpbGUpO1xyXG5cdFx0XHR9KTtcclxuXHRcdH0pO1xyXG5cclxuXHRcdGZpbGVNZW51LmFkZFNlcGFyYXRvcigpO1xyXG5cclxuXHRcdHBsdWdpbi5hcHAud29ya3NwYWNlLnRyaWdnZXIoJ2ZpbGUtbWVudScsIGZpbGVNZW51LCBmaWxlLCAnZm9sZGVyLW92ZXJ2aWV3LWZpbGUtY29udGV4dC1tZW51JywgbnVsbCk7XHJcblx0XHRmaWxlTWVudS5zaG93QXRQb3NpdGlvbih7IHg6IGUucGFnZVgsIHk6IGUucGFnZVkgfSk7XHJcblx0fVxyXG5cclxuXHRmb2xkZXJNZW51KGZvbGRlcjogVEZvbGRlciwgZTogTW91c2VFdmVudCkge1xyXG5cdFx0Y29uc3QgcGx1Z2luID0gdGhpcy5wbHVnaW47XHJcblx0XHRjb25zdCBmb2xkZXJNZW51ID0gbmV3IE1lbnUoKTtcclxuXHRcdGZvbGRlck1lbnUuYWRkU2VwYXJhdG9yKCk7XHJcblxyXG5cdFx0Zm9sZGVyTWVudS5hZGRJdGVtKChpdGVtKSA9PiB7XHJcblx0XHRcdGl0ZW0uc2V0VGl0bGUoJ1JlbmFtZScpO1xyXG5cdFx0XHRpdGVtLnNldEljb24oJ3BlbmNpbCcpO1xyXG5cdFx0XHRpdGVtLm9uQ2xpY2soYXN5bmMgKCkgPT4ge1xyXG5cdFx0XHRcdGlmIChwbHVnaW4gaW5zdGFuY2VvZiBGb2xkZXJOb3Rlc1BsdWdpbikge1xyXG5cdFx0XHRcdFx0bmV3IE5ld0ZvbGRlck5hbWVNb2RhbChwbHVnaW4uYXBwLCBwbHVnaW4sIGZvbGRlcikub3BlbigpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSk7XHJcblx0XHR9KTtcclxuXHJcblx0XHRmb2xkZXJNZW51LmFkZEl0ZW0oKGl0ZW0pID0+IHtcclxuXHRcdFx0aXRlbS5zZXRUaXRsZSgnRGVsZXRlJyk7XHJcblx0XHRcdGl0ZW0uc2V0SWNvbigndHJhc2gnKTtcclxuXHRcdFx0aXRlbS5kb20uYWRkQ2xhc3MoJ2lzLXdhcm5pbmcnKTtcclxuXHRcdFx0aXRlbS5kb20uc2V0QXR0cmlidXRlKCdkYXRhLXNlY3Rpb24nLCAnZGFuZ2VyJyk7XHJcblx0XHRcdGl0ZW0ub25DbGljaygoKSA9PiB7XHJcblx0XHRcdFx0cGx1Z2luLmFwcC5maWxlTWFuYWdlci5wcm9tcHRGb3JGb2xkZXJEZWxldGlvbihmb2xkZXIpO1xyXG5cdFx0XHR9KTtcclxuXHRcdH0pO1xyXG5cclxuXHRcdGZvbGRlck1lbnUuYWRkU2VwYXJhdG9yKCk7XHJcblxyXG5cdFx0cGx1Z2luLmFwcC53b3Jrc3BhY2UudHJpZ2dlcignZmlsZS1tZW51JywgZm9sZGVyTWVudSwgZm9sZGVyLCAnZm9sZGVyLW92ZXJ2aWV3LWZvbGRlci1jb250ZXh0LW1lbnUnLCBudWxsKTtcclxuXHRcdGZvbGRlck1lbnUuc2hvd0F0UG9zaXRpb24oeyB4OiBlLnBhZ2VYLCB5OiBlLnBhZ2VZIH0pO1xyXG5cdH1cclxuXHJcblx0Z2V0RWxGcm9tT3ZlcnZpZXcocGF0aDogc3RyaW5nKTogSFRNTEVsZW1lbnQgfCBudWxsIHtcclxuXHRcdGNvbnN0IGVsID0gdGhpcy5saXN0RWwucXVlcnlTZWxlY3RvcihgW2RhdGEtcGF0aD0nJHtDU1MuZXNjYXBlKHBhdGgpfSddYCkgYXMgSFRNTEVsZW1lbnQgfCBudWxsO1xyXG5cdFx0cmV0dXJuIGVsO1xyXG5cdH1cclxuXHJcblxyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdXBkYXRlWWFtbChwbHVnaW46IEZvbGRlck92ZXJ2aWV3UGx1Z2luIHwgRm9sZGVyTm90ZXNQbHVnaW4sIGN0eDogTWFya2Rvd25Qb3N0UHJvY2Vzc29yQ29udGV4dCwgZWw6IEhUTUxFbGVtZW50LCB5YW1sOiBvdmVydmlld1NldHRpbmdzKSB7XHJcblx0Y29uc3QgZmlsZSA9IHBsdWdpbi5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKGN0eC5zb3VyY2VQYXRoKTtcclxuXHRpZiAoIShmaWxlIGluc3RhbmNlb2YgVEZpbGUpKSByZXR1cm47XHJcblx0bGV0IHN0cmluZ1lhbWwgPSBzdHJpbmdpZnlZYW1sKHlhbWwpO1xyXG5cdGF3YWl0IHBsdWdpbi5hcHAudmF1bHQucHJvY2VzcyhmaWxlLCAodGV4dCkgPT4ge1xyXG5cdFx0Y29uc3QgaW5mbyA9IGN0eC5nZXRTZWN0aW9uSW5mbyhlbCk7XHJcblx0XHQvLyBjaGVjayBpZiBzdHJpbmdZYW1sIGVuZHMgd2l0aCBhIG5ld2xpbmVcclxuXHRcdGlmIChzdHJpbmdZYW1sW3N0cmluZ1lhbWwubGVuZ3RoIC0gMV0gIT09ICdcXG4nKSB7XHJcblx0XHRcdHN0cmluZ1lhbWwgKz0gJ1xcbic7XHJcblx0XHR9XHJcblx0XHRpZiAoaW5mbykge1xyXG5cdFx0XHRjb25zdCB7IGxpbmVTdGFydCB9ID0gaW5mbztcclxuXHRcdFx0Y29uc3QgbGluZUVuZCA9IGdldENvZGVCbG9ja0VuZExpbmUodGV4dCwgbGluZVN0YXJ0KTtcclxuXHRcdFx0aWYgKGxpbmVFbmQgPT09IC0xIHx8ICFsaW5lRW5kKSByZXR1cm4gdGV4dDtcclxuXHRcdFx0Y29uc3QgbGluZUxlbmd0aCA9IGxpbmVFbmQgLSBsaW5lU3RhcnQ7XHJcblx0XHRcdGNvbnN0IGxpbmVzID0gdGV4dC5zcGxpdCgnXFxuJyk7XHJcblx0XHRcdGxpbmVzLnNwbGljZShsaW5lU3RhcnQsIGxpbmVMZW5ndGggKyAxLCBgXFxgXFxgXFxgZm9sZGVyLW92ZXJ2aWV3XFxuJHtzdHJpbmdZYW1sfVxcYFxcYFxcYGApO1xyXG5cdFx0XHRyZXR1cm4gbGluZXMuam9pbignXFxuJyk7XHJcblx0XHR9XHJcblx0XHRyZXR1cm4gYFxcYFxcYFxcYGZvbGRlci1vdmVydmlld1xcbiR7c3RyaW5nWWFtbH1cXGBcXGBcXGBgO1xyXG5cdH0pO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZ2V0Q29kZUJsb2NrRW5kTGluZSh0ZXh0OiBzdHJpbmcsIHN0YXJ0TGluZTogbnVtYmVyLCBjb3VudCA9IDEpIHtcclxuXHRsZXQgbGluZSA9IHN0YXJ0TGluZSArIDE7XHJcblx0Y29uc3QgbGluZXMgPSB0ZXh0LnNwbGl0KCdcXG4nKTtcclxuXHR3aGlsZSAobGluZSA8IGxpbmVzLmxlbmd0aCkge1xyXG5cdFx0aWYgKGNvdW50ID4gNTApIHsgcmV0dXJuIC0xOyB9XHJcblx0XHRpZiAobGluZXNbbGluZV0uc3RhcnRzV2l0aCgnYGBgJykpIHtcclxuXHRcdFx0cmV0dXJuIGxpbmU7XHJcblx0XHR9XHJcblx0XHRsaW5lKys7XHJcblx0XHRjb3VudCsrO1xyXG5cdH1cclxuXHRyZXR1cm4gbGluZTtcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldE92ZXJ2aWV3cyhwbHVnaW46IEZvbGRlck92ZXJ2aWV3UGx1Z2luIHwgRm9sZGVyTm90ZXNQbHVnaW4sIGZpbGU6IFRGaWxlIHwgbnVsbCkge1xyXG5cdC8vIGlzIGFuIG9iamVjdCB3aXRoIHVua293biBrZXlzXHJcblx0aWYgKCFmaWxlKSByZXR1cm4gW107XHJcblx0Y29uc3Qgb3ZlcnZpZXdzOiB7IFtrZXk6IHN0cmluZ106IHN0cmluZyB9W10gPSBbXTtcclxuXHRjb25zdCBjb250ZW50ID0gYXdhaXQgcGx1Z2luLmFwcC52YXVsdC5yZWFkKGZpbGUpO1xyXG5cdGlmICghY29udGVudCkgcmV0dXJuIG92ZXJ2aWV3cztcclxuXHJcblx0Y29uc3QgeWFtbEJsb2NrcyA9IGNvbnRlbnQubWF0Y2goL2BgYGZvbGRlci1vdmVydmlld1xcbihbXFxzXFxTXSo/KWBgYC9nKTtcclxuXHRpZiAoIXlhbWxCbG9ja3MpIHJldHVybiBvdmVydmlld3M7XHJcblx0Zm9yIChjb25zdCBibG9jayBvZiB5YW1sQmxvY2tzKSB7XHJcblx0XHRjb25zdCB5YW1sID0gcGFyc2VZYW1sKGJsb2NrLnJlcGxhY2UoJ2BgYGZvbGRlci1vdmVydmlld1xcbicsICcnKS5yZXBsYWNlKCdgYGAnLCAnJykpO1xyXG5cdFx0aWYgKCF5YW1sKSBjb250aW51ZTtcclxuXHRcdG92ZXJ2aWV3cy5wdXNoKHlhbWwpO1xyXG5cdH1cclxuXHJcblx0cmV0dXJuIG92ZXJ2aWV3cztcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHVwZGF0ZVlhbWxCeUlkKHBsdWdpbjogRm9sZGVyT3ZlcnZpZXdQbHVnaW4gfCBGb2xkZXJOb3Rlc1BsdWdpbiwgb3ZlcnZpZXdJZDogc3RyaW5nLCBmaWxlOiBURmlsZSwgbmV3WWFtbDogb3ZlcnZpZXdTZXR0aW5ncykge1xyXG5cdHBsdWdpbi5hcHAudmF1bHQucHJvY2VzcyhmaWxlLCAodGV4dCkgPT4ge1xyXG5cdFx0Y29uc3QgeWFtbEJsb2NrcyA9IHRleHQubWF0Y2goL2BgYGZvbGRlci1vdmVydmlld1xcbihbXFxzXFxTXSo/KWBgYC9nKTtcclxuXHRcdGlmICgheWFtbEJsb2NrcykgcmV0dXJuIHRleHQ7XHJcblx0XHRmb3IgKGNvbnN0IGJsb2NrIG9mIHlhbWxCbG9ja3MpIHtcclxuXHRcdFx0Y29uc3QgeWFtbCA9IHBhcnNlWWFtbChibG9jay5yZXBsYWNlKCdgYGBmb2xkZXItb3ZlcnZpZXdcXG4nLCAnJykucmVwbGFjZSgnYGBgJywgJycpKTtcclxuXHRcdFx0aWYgKCF5YW1sKSBjb250aW51ZTtcclxuXHRcdFx0aWYgKHlhbWwuaWQgPT09IG92ZXJ2aWV3SWQpIHtcclxuXHRcdFx0XHRjb25zdCBzdHJpbmdZYW1sID0gc3RyaW5naWZ5WWFtbChuZXdZYW1sKTtcclxuXHRcdFx0XHRjb25zdCBuZXdCbG9jayA9IGBcXGBcXGBcXGBmb2xkZXItb3ZlcnZpZXdcXG4ke3N0cmluZ1lhbWx9XFxgXFxgXFxgYDtcclxuXHRcdFx0XHR0ZXh0ID0gdGV4dC5yZXBsYWNlKGJsb2NrLCBuZXdCbG9jayk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHRcdHJldHVybiB0ZXh0O1xyXG5cdH0pO1xyXG5cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlT3ZlcnZpZXdUaXRsZShvdmVydmlldzogb3ZlcnZpZXdTZXR0aW5ncywgcGx1Z2luOiBGb2xkZXJPdmVydmlld1BsdWdpbiB8IEZvbGRlck5vdGVzUGx1Z2luLCBmb2xkZXI6IFRGb2xkZXIgfCBudWxsKSB7XHJcblx0Y29uc3Qgc291cmNlRm9sZGVyUGF0aCA9IG92ZXJ2aWV3LmZvbGRlclBhdGg7XHJcblx0bGV0IHNvdXJjZUZvbGRlcjogVEZvbGRlciB8IHVuZGVmaW5lZCB8IG51bGw7XHJcblx0bGV0IHRpdGxlID0gb3ZlcnZpZXcudGl0bGU7XHJcblxyXG5cdGlmIChzb3VyY2VGb2xkZXJQYXRoICE9PSAnLycpIHtcclxuXHRcdGlmIChzb3VyY2VGb2xkZXJQYXRoID09PSAnJykge1xyXG5cdFx0XHRzb3VyY2VGb2xkZXIgPSBmb2xkZXI7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHRzb3VyY2VGb2xkZXIgPSBwbHVnaW4uYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChzb3VyY2VGb2xkZXJQYXRoKSBhcyBURm9sZGVyO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0aWYgKHNvdXJjZUZvbGRlciAmJiBzb3VyY2VGb2xkZXJQYXRoICE9PSAnLycpIHtcclxuXHRcdHRpdGxlID0gdGl0bGUucmVwbGFjZSgne3tmb2xkZXJOYW1lfX0nLCBzb3VyY2VGb2xkZXIubmFtZSk7XHJcblx0fSBlbHNlIGlmIChzb3VyY2VGb2xkZXJQYXRoID09ICcvJykge1xyXG5cdFx0dGl0bGUgPSB0aXRsZS5yZXBsYWNlKCd7e2ZvbGRlck5hbWV9fScsICdWYXVsdCcpO1xyXG5cdH0gZWxzZSB7XHJcblx0XHR0aXRsZSA9IHRpdGxlLnJlcGxhY2UoJ3t7Zm9sZGVyTmFtZX19JywgJycpO1xyXG5cdH1cclxuXHJcblx0cmV0dXJuIHRpdGxlO1xyXG59XHJcblxyXG5cclxuY2xhc3MgQ3VzdG9tTWFya2Rvd25SZW5kZXJDaGlsZCBleHRlbmRzIE1hcmtkb3duUmVuZGVyQ2hpbGQge1xyXG5cdGZvbGRlck92ZXJ2aWV3OiBGb2xkZXJPdmVydmlldztcclxuXHRjb25zdHJ1Y3RvcihlbDogSFRNTEVsZW1lbnQsIGZvbGRlck92ZXJ2aWV3OiBGb2xkZXJPdmVydmlldykge1xyXG5cdFx0c3VwZXIoZWwpO1xyXG5cdFx0dGhpcy5mb2xkZXJPdmVydmlldyA9IGZvbGRlck92ZXJ2aWV3O1xyXG5cdH1cclxuXHJcblx0b251bmxvYWQoKSB7XHJcblx0XHR0aGlzLmZvbGRlck92ZXJ2aWV3LmRpc2Nvbm5lY3RMaXN0ZW5lcnMoKTtcclxuXHR9XHJcbn1cclxuIiwgImltcG9ydCB7IEFwcCwgTW9kYWwsIFNldHRpbmcsIE1hcmtkb3duUG9zdFByb2Nlc3NvckNvbnRleHQsIHN0cmluZ2lmeVlhbWwsIFRGaWxlLCBURm9sZGVyLCBTZXR0aW5nVGFiLCBQbHVnaW4gfSBmcm9tICdvYnNpZGlhbic7XHJcbmltcG9ydCB7IG92ZXJ2aWV3U2V0dGluZ3MsIGluY2x1ZGVUeXBlcywgRm9sZGVyT3ZlcnZpZXcgfSBmcm9tICcuLi9Gb2xkZXJPdmVydmlldyc7XHJcbmltcG9ydCB7IExpc3RDb21wb25lbnQgfSBmcm9tICcuLi91dGlscy9MaXN0Q29tcG9uZW50JztcclxuaW1wb3J0IHsgdXBkYXRlWWFtbCB9IGZyb20gJy4uL0ZvbGRlck92ZXJ2aWV3JztcclxuaW1wb3J0IHsgRm9sZGVyU3VnZ2VzdCB9IGZyb20gJy4uL3N1Z2dlc3RlcnMvRm9sZGVyU3VnZ2VzdGVyJztcclxuaW1wb3J0IHsgZ2V0Rm9sZGVyUGF0aEZyb21TdHJpbmcgfSBmcm9tICcuLi91dGlscy9mdW5jdGlvbnMnO1xyXG5pbXBvcnQgeyBjcmVhdGVPdmVydmlld1NldHRpbmdzIH0gZnJvbSAnLi4vc2V0dGluZ3MnO1xyXG5pbXBvcnQgRm9sZGVyT3ZlcnZpZXdQbHVnaW4gZnJvbSAnLi9tYWluJztcclxuaW1wb3J0IEZvbGRlck5vdGVzUGx1Z2luIGZyb20gJy4uLy4uLy4uL21haW4nO1xyXG5leHBvcnQgY2xhc3MgRm9sZGVyT3ZlcnZpZXdTZXR0aW5ncyBleHRlbmRzIE1vZGFsIHtcclxuXHRwbHVnaW46IEZvbGRlck92ZXJ2aWV3UGx1Z2luIHwgRm9sZGVyTm90ZXNQbHVnaW47XHJcblx0YXBwOiBBcHA7XHJcblx0eWFtbDogb3ZlcnZpZXdTZXR0aW5ncztcclxuXHRjdHg6IE1hcmtkb3duUG9zdFByb2Nlc3NvckNvbnRleHQ7XHJcblx0ZWw6IEhUTUxFbGVtZW50O1xyXG5cdGRlZmF1bHRTZXR0aW5nczogb3ZlcnZpZXdTZXR0aW5ncztcclxuXHRjb25zdHJ1Y3RvcihhcHA6IEFwcCwgcGx1Z2luOiBGb2xkZXJPdmVydmlld1BsdWdpbiB8IEZvbGRlck5vdGVzUGx1Z2luLCB5YW1sOiBvdmVydmlld1NldHRpbmdzLCBjdHg6IE1hcmtkb3duUG9zdFByb2Nlc3NvckNvbnRleHQgfCBudWxsLCBlbDogSFRNTEVsZW1lbnQgfCBudWxsLCBkZWZhdWx0U2V0dGluZ3M6IG92ZXJ2aWV3U2V0dGluZ3MpIHtcclxuXHRcdHN1cGVyKGFwcCk7XHJcblx0XHR0aGlzLnBsdWdpbiA9IHBsdWdpbjtcclxuXHRcdHRoaXMuYXBwID0gYXBwO1xyXG5cdFx0aWYgKCF5YW1sKSB7XHJcblx0XHRcdHRoaXMueWFtbCA9IHRoaXMuZGVmYXVsdFNldHRpbmdzO1xyXG5cdFx0fSBlbHNlIGlmIChjdHgpIHtcclxuXHRcdFx0Y29uc3QgaW5jbHVkZVR5cGVzID0geWFtbD8uaW5jbHVkZVR5cGVzIHx8IGRlZmF1bHRTZXR0aW5ncy5pbmNsdWRlVHlwZXMgfHwgWydmb2xkZXInLCAnbWFya2Rvd24nXTtcclxuXHRcdFx0dGhpcy55YW1sID0ge1xyXG5cdFx0XHRcdGlkOiB5YW1sPy5pZCA/PyBjcnlwdG8ucmFuZG9tVVVJRCgpLFxyXG5cdFx0XHRcdGZvbGRlclBhdGg6IHlhbWw/LmZvbGRlclBhdGggPz8gZ2V0Rm9sZGVyUGF0aEZyb21TdHJpbmcoY3R4LnNvdXJjZVBhdGgpLFxyXG5cdFx0XHRcdHRpdGxlOiB5YW1sPy50aXRsZSA/PyBkZWZhdWx0U2V0dGluZ3MudGl0bGUsXHJcblx0XHRcdFx0c2hvd1RpdGxlOiB5YW1sPy5zaG93VGl0bGUgPz8gZGVmYXVsdFNldHRpbmdzLnNob3dUaXRsZSxcclxuXHRcdFx0XHRkZXB0aDogeWFtbD8uZGVwdGggPz8gZGVmYXVsdFNldHRpbmdzLmRlcHRoLFxyXG5cdFx0XHRcdHN0eWxlOiB5YW1sPy5zdHlsZSA/PyAnbGlzdCcsXHJcblx0XHRcdFx0aW5jbHVkZVR5cGVzOiBpbmNsdWRlVHlwZXMubWFwKCh0eXBlKSA9PiB0eXBlLnRvTG93ZXJDYXNlKCkpIGFzIGluY2x1ZGVUeXBlc1tdLFxyXG5cdFx0XHRcdGRpc2FibGVGaWxlVGFnOiB5YW1sPy5kaXNhYmxlRmlsZVRhZyA/PyBkZWZhdWx0U2V0dGluZ3MuZGlzYWJsZUZpbGVUYWcsXHJcblx0XHRcdFx0c29ydEJ5OiB5YW1sPy5zb3J0QnkgPz8gZGVmYXVsdFNldHRpbmdzLnNvcnRCeSxcclxuXHRcdFx0XHRzb3J0QnlBc2M6IHlhbWw/LnNvcnRCeUFzYyA/PyBkZWZhdWx0U2V0dGluZ3Muc29ydEJ5QXNjLFxyXG5cdFx0XHRcdHNob3dFbXB0eUZvbGRlcnM6IHlhbWw/LnNob3dFbXB0eUZvbGRlcnMgPz8gZGVmYXVsdFNldHRpbmdzLnNob3dFbXB0eUZvbGRlcnMsXHJcblx0XHRcdFx0b25seUluY2x1ZGVTdWJmb2xkZXJzOiB5YW1sPy5vbmx5SW5jbHVkZVN1YmZvbGRlcnMgPz8gZGVmYXVsdFNldHRpbmdzLm9ubHlJbmNsdWRlU3ViZm9sZGVycyxcclxuXHRcdFx0XHRzdG9yZUZvbGRlckNvbmRpdGlvbjogeWFtbD8uc3RvcmVGb2xkZXJDb25kaXRpb24gPz8gZGVmYXVsdFNldHRpbmdzLnN0b3JlRm9sZGVyQ29uZGl0aW9uLFxyXG5cdFx0XHRcdHNob3dGb2xkZXJOb3RlczogeWFtbD8uc2hvd0ZvbGRlck5vdGVzID8/IGRlZmF1bHRTZXR0aW5ncy5zaG93Rm9sZGVyTm90ZXMsXHJcblx0XHRcdFx0ZGlzYWJsZUNvbGxhcHNlSWNvbjogeWFtbD8uZGlzYWJsZUNvbGxhcHNlSWNvbiA/PyBkZWZhdWx0U2V0dGluZ3MuZGlzYWJsZUNvbGxhcHNlSWNvbixcclxuXHRcdFx0XHRhbHdheXNDb2xsYXBzZTogeWFtbD8uYWx3YXlzQ29sbGFwc2UgPz8gZGVmYXVsdFNldHRpbmdzLmFsd2F5c0NvbGxhcHNlLFxyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0XHRpZiAoY3R4KSB7XHJcblx0XHRcdHRoaXMuY3R4ID0gY3R4O1xyXG5cdFx0fVxyXG5cdFx0aWYgKGVsKSB7XHJcblx0XHRcdHRoaXMuZWwgPSBlbDtcclxuXHRcdH1cclxuXHJcblx0XHR1cGRhdGVZYW1sKHRoaXMucGx1Z2luLCB0aGlzLmN0eCwgdGhpcy5lbCwgdGhpcy55YW1sKTtcclxuXHR9XHJcblxyXG5cdG9uT3BlbigpIHtcclxuXHRcdGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xyXG5cdFx0dGhpcy5kaXNwbGF5KGNvbnRlbnRFbCwgdGhpcy55YW1sLCB0aGlzLnBsdWdpbiwgdGhpcy5kZWZhdWx0U2V0dGluZ3MsIHRoaXMuZGlzcGxheSwgdGhpcy5lbCwgdGhpcy5jdHgpO1xyXG5cdH1cclxuXHJcblx0ZGlzcGxheShjb250ZW50RWw6IEhUTUxFbGVtZW50LCB5YW1sOiBvdmVydmlld1NldHRpbmdzLCBwbHVnaW46IEZvbGRlck92ZXJ2aWV3UGx1Z2luIHwgRm9sZGVyTm90ZXNQbHVnaW4sIGRlZmF1bHRTZXR0aW5nczogb3ZlcnZpZXdTZXR0aW5ncywgZGlzcGxheTogQ2FsbGFibGVGdW5jdGlvbiwgZWw/OiBIVE1MRWxlbWVudCwgY3R4PzogTWFya2Rvd25Qb3N0UHJvY2Vzc29yQ29udGV4dCwgZmlsZT86IFRGaWxlIHwgbnVsbCwgc2V0dGluZ3NUYWI/OiBTZXR0aW5nVGFiLCBtb2RhbD86IEZvbGRlck92ZXJ2aWV3U2V0dGluZ3MpIHtcclxuXHRcdG1vZGFsID0gdGhpcyA/PyBtb2RhbDtcclxuXHRcdGNvbnRlbnRFbC5lbXB0eSgpO1xyXG5cdFx0Ly8gY2xvc2Ugd2hlbiB1c2VyIHByZXNzZXMgZW50ZXJcclxuXHRcdGNvbnRlbnRFbC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgKGUpID0+IHtcclxuXHRcdFx0aWYgKGUua2V5ID09PSAnRW50ZXInKSB7XHJcblx0XHRcdFx0bW9kYWwuY2xvc2UoKTtcclxuXHRcdFx0fVxyXG5cdFx0fSk7XHJcblx0XHRpZiAoIW1vZGFsLmRlZmF1bHRTZXR0aW5ncykge1xyXG5cdFx0XHRjb250ZW50RWwuY3JlYXRlRWwoJ2gyJywgeyB0ZXh0OiAnRm9sZGVyIG92ZXJ2aWV3IHNldHRpbmdzJyB9KTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdGNvbnRlbnRFbC5jcmVhdGVFbCgnaDInLCB7IHRleHQ6ICdEZWZhdWx0IGZvbGRlciBvdmVydmlldyBzZXR0aW5ncycgfSk7XHJcblx0XHR9XHJcblxyXG5cdFx0Y3JlYXRlT3ZlcnZpZXdTZXR0aW5ncyhjb250ZW50RWwsIHlhbWwsIHBsdWdpbiwgZGVmYXVsdFNldHRpbmdzLCBkaXNwbGF5LCBlbCwgY3R4LCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgbW9kYWwpO1xyXG5cdH1cclxuXHJcblx0b25DbG9zZSgpIHtcclxuXHRcdGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xyXG5cdFx0Y29udGVudEVsLmVtcHR5KCk7XHJcblx0fVxyXG59XHJcblxyXG4iLCAiZXhwb3J0IGZ1bmN0aW9uIGdldEZvbGRlclBhdGhGcm9tU3RyaW5nKHBhdGg6IHN0cmluZyk6IHN0cmluZyB7XHJcbiAgICBjb25zdCBzdWJTdHJpbmcgPSBwYXRoLmxhc3RJbmRleE9mKCcvJykgPj0gMCA/IHBhdGgubGFzdEluZGV4T2YoJy8nKSA6IDA7XHJcbiAgICBjb25zdCBmb2xkZXJQYXRoID0gcGF0aC5zdWJzdHJpbmcoMCwgc3ViU3RyaW5nKTtcclxuICAgIGlmIChmb2xkZXJQYXRoID09PSAnJykge1xyXG4gICAgICAgIHJldHVybiAnLyc7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIHJldHVybiBmb2xkZXJQYXRoO1xyXG4gICAgfVxyXG59IiwgImltcG9ydCB7IE1hcmtkb3duUG9zdFByb2Nlc3NvckNvbnRleHQsIFBsdWdpbiwgUGx1Z2luJDEsIFBsdWdpblNldHRpbmdUYWIsIFNldHRpbmcsIFRGaWxlLCBURm9sZGVyIH0gZnJvbSAnb2JzaWRpYW4nO1xyXG5pbXBvcnQgeyB1cGRhdGVZYW1sLCB1cGRhdGVZYW1sQnlJZCwgb3ZlcnZpZXdTZXR0aW5ncywgaW5jbHVkZVR5cGVzIH0gZnJvbSAnLi9Gb2xkZXJPdmVydmlldyc7XHJcbmltcG9ydCB7IEZvbGRlclN1Z2dlc3QgfSBmcm9tICcuL3N1Z2dlc3RlcnMvRm9sZGVyU3VnZ2VzdGVyJztcclxuaW1wb3J0IHsgTGlzdENvbXBvbmVudCB9IGZyb20gJy4vdXRpbHMvTGlzdENvbXBvbmVudCc7XHJcbmltcG9ydCB7IENhbGxiYWNrIH0gZnJvbSAnZnJvbnQtbWF0dGVyLXBsdWdpbi1hcGktcHJvdmlkZXInO1xyXG5pbXBvcnQgeyBGb2xkZXJPdmVydmlld1NldHRpbmdzIH0gZnJvbSAnLi9tb2RhbHMvU2V0dGluZ3MnO1xyXG5pbXBvcnQgRm9sZGVyT3ZlcnZpZXdQbHVnaW4gZnJvbSAnLi9tYWluJztcclxuaW1wb3J0IEZvbGRlck5vdGVzUGx1Z2luIGZyb20gJy4uLy4uL21haW4nO1xyXG5cclxuXHJcblxyXG5cclxuZXhwb3J0IGNvbnN0IERFRkFVTFRfU0VUVElOR1M6IG92ZXJ2aWV3U2V0dGluZ3MgPSB7XHJcbiAgICBpZDogJycsXHJcbiAgICBmb2xkZXJQYXRoOiAnJyxcclxuICAgIHRpdGxlOiAne3tmb2xkZXJOYW1lfX0gb3ZlcnZpZXcnLFxyXG4gICAgc2hvd1RpdGxlOiBmYWxzZSxcclxuICAgIGRlcHRoOiAzLFxyXG4gICAgaW5jbHVkZVR5cGVzOiBbJ2ZvbGRlcicsICdtYXJrZG93biddLFxyXG4gICAgc3R5bGU6ICdsaXN0JyxcclxuICAgIGRpc2FibGVGaWxlVGFnOiBmYWxzZSxcclxuICAgIHNvcnRCeTogJ25hbWUnLFxyXG4gICAgc29ydEJ5QXNjOiB0cnVlLFxyXG4gICAgc2hvd0VtcHR5Rm9sZGVyczogZmFsc2UsXHJcbiAgICBvbmx5SW5jbHVkZVN1YmZvbGRlcnM6IGZhbHNlLFxyXG4gICAgc3RvcmVGb2xkZXJDb25kaXRpb246IHRydWUsXHJcbiAgICBzaG93Rm9sZGVyTm90ZXM6IGZhbHNlLFxyXG4gICAgZGlzYWJsZUNvbGxhcHNlSWNvbjogdHJ1ZSxcclxuICAgIGFsd2F5c0NvbGxhcHNlOiBmYWxzZSxcclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIFNldHRpbmdzVGFiIGV4dGVuZHMgUGx1Z2luU2V0dGluZ1RhYiB7XHJcbiAgICBwbHVnaW46IEZvbGRlck92ZXJ2aWV3UGx1Z2luO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKHBsdWdpbjogRm9sZGVyT3ZlcnZpZXdQbHVnaW4pIHtcclxuICAgICAgICBzdXBlcihwbHVnaW4uYXBwLCBwbHVnaW4pO1xyXG4gICAgfVxyXG5cclxuICAgIGRpc3BsYXkoKSB7XHJcbiAgICAgICAgY29uc3QgeyBjb250YWluZXJFbCB9ID0gdGhpcztcclxuXHJcbiAgICAgICAgdGhpcy5kaXNwbGF5ID0gdGhpcy5kaXNwbGF5LmJpbmQodGhpcyk7XHJcblxyXG5cdFx0Y29udGFpbmVyRWwuZW1wdHkoKTtcclxuICAgICAgICBjcmVhdGVPdmVydmlld1NldHRpbmdzKGNvbnRhaW5lckVsLCB0aGlzLnBsdWdpbi5zZXR0aW5ncywgdGhpcy5wbHVnaW4sIHRoaXMucGx1Z2luLnNldHRpbmdzLCB0aGlzLmRpc3BsYXksIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIHRoaXMpO1xyXG5cclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNyZWF0ZU92ZXJ2aWV3U2V0dGluZ3MoY29udGVudEVsOiBIVE1MRWxlbWVudCwgeWFtbDogb3ZlcnZpZXdTZXR0aW5ncywgcGx1Z2luOiBGb2xkZXJPdmVydmlld1BsdWdpbiB8IEZvbGRlck5vdGVzUGx1Z2luLCBkZWZhdWx0U2V0dGluZ3M6IG92ZXJ2aWV3U2V0dGluZ3MsIGRpc3BsYXk6IENhbGxhYmxlRnVuY3Rpb24sIGVsPzogSFRNTEVsZW1lbnQsIGN0eD86IE1hcmtkb3duUG9zdFByb2Nlc3NvckNvbnRleHQsIGZpbGU/OiBURmlsZSB8IG51bGwsIHNldHRpbmdzVGFiPzogUGx1Z2luU2V0dGluZ1RhYiwgbW9kYWw/OiBGb2xkZXJPdmVydmlld1NldHRpbmdzKSB7XHJcbiAgICBuZXcgU2V0dGluZyhjb250ZW50RWwpXHJcbiAgICAgICAgLnNldE5hbWUoJ1Nob3cgdGhlIHRpdGxlJylcclxuICAgICAgICAuc2V0RGVzYygnQ2hvb3NlIGlmIHRoZSB0aXRsZSBzaG91bGQgYmUgc2hvd24nKVxyXG4gICAgICAgIC5hZGRUb2dnbGUoKHRvZ2dsZSkgPT5cclxuICAgICAgICAgICAgdG9nZ2xlXHJcbiAgICAgICAgICAgICAgICAuc2V0VmFsdWUoeWFtbC5zaG93VGl0bGUpXHJcbiAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgeWFtbC5zaG93VGl0bGUgPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICB1cGRhdGVTZXR0aW5ncyhjb250ZW50RWwsIHlhbWwsIHBsdWdpbiwgZGVmYXVsdFNldHRpbmdzLCBlbCwgY3R4LCBmaWxlKTs7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVmcmVzaChjb250ZW50RWwsIHlhbWwsIHBsdWdpbiwgZGVmYXVsdFNldHRpbmdzLCBkaXNwbGF5LCBlbCwgY3R4LCBmaWxlLCBzZXR0aW5nc1RhYiwgbW9kYWwpO1xyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICApO1xyXG4gICAgaWYgKHlhbWwuc2hvd1RpdGxlKSB7XHJcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGVudEVsKVxyXG4gICAgICAgICAgICAuc2V0TmFtZSgnVGl0bGUnKVxyXG4gICAgICAgICAgICAuc2V0RGVzYygnQ2hvb3NlIHRoZSB0aXRsZSBvZiB0aGUgZm9sZGVyIG92ZXJ2aWV3JylcclxuICAgICAgICAgICAgLmFkZFRleHQoKHRleHQpID0+XHJcbiAgICAgICAgICAgICAgICB0ZXh0XHJcbiAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKHlhbWw/LnRpdGxlIHx8ICd7e2ZvbGRlck5hbWV9fSBvdmVydmlldycpXHJcbiAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB5YW1sLnRpdGxlID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZVNldHRpbmdzKGNvbnRlbnRFbCwgeWFtbCwgcGx1Z2luLCBkZWZhdWx0U2V0dGluZ3MsIGVsLCBjdHgsIGZpbGUpOztcclxuICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IGZvbGRlclBhdGhTZXR0aW5nID0gbmV3IFNldHRpbmcoY29udGVudEVsKVxyXG4gICAgICAgIC5zZXROYW1lKCdGb2xkZXIgcGF0aCBmb3IgdGhlIG92ZXJ2aWV3JylcclxuICAgICAgICAuc2V0RGVzYygnQ2hvb3NlIHRoZSBmb2xkZXIgcGF0aCBmb3IgdGhlIG92ZXJ2aWV3JylcclxuICAgICAgICAuYWRkU2VhcmNoKChzZWFyY2gpID0+IHtcclxuICAgICAgICAgICAgbmV3IEZvbGRlclN1Z2dlc3Qoc2VhcmNoLmlucHV0RWwsIHBsdWdpbiwgZmFsc2UpXHJcbiAgICAgICAgICAgIHNlYXJjaFxyXG4gICAgICAgICAgICAgICAgLnNldFBsYWNlaG9sZGVyKCdGb2xkZXIgcGF0aCcpXHJcbiAgICAgICAgICAgICAgICAuc2V0VmFsdWUoeWFtbD8uZm9sZGVyUGF0aCB8fCAnJylcclxuICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIShwbHVnaW4uYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aCh2YWx1ZSkgaW5zdGFuY2VvZiBURm9sZGVyKSAmJiB2YWx1ZSAhPT0gJycpIHJldHVybjtcclxuICAgICAgICAgICAgICAgICAgICB5YW1sLmZvbGRlclBhdGggPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICB1cGRhdGVTZXR0aW5ncyhjb250ZW50RWwsIHlhbWwsIHBsdWdpbiwgZGVmYXVsdFNldHRpbmdzLCBlbCwgY3R4LCBmaWxlKTs7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIC8vIGFkZCBjc3MgY2xhc3MgdG8gdGhlIHNldHRpbmdcclxuICAgIGZvbGRlclBhdGhTZXR0aW5nLnNldHRpbmdFbC5jbGFzc0xpc3QuYWRkKCdmbi1vdmVydmlldy1mb2xkZXItcGF0aCcpO1xyXG5cclxuICAgIG5ldyBTZXR0aW5nKGNvbnRlbnRFbClcclxuICAgICAgICAuc2V0TmFtZSgnT3ZlcnZpZXcgc3R5bGUnKVxyXG4gICAgICAgIC5zZXREZXNjKCdDaG9vc2UgdGhlIHN0eWxlIG9mIHRoZSBvdmVydmlldyAoZ3JpZCBzdHlsZSBzb29uKScpXHJcbiAgICAgICAgLmFkZERyb3Bkb3duKChkcm9wZG93bikgPT5cclxuICAgICAgICAgICAgZHJvcGRvd25cclxuICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oJ2xpc3QnLCAnTGlzdCcpXHJcbiAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKCdleHBsb3JlcicsICdFeHBsb3JlcicpXHJcbiAgICAgICAgICAgICAgICAuc2V0VmFsdWUoeWFtbD8uc3R5bGUgfHwgJ2xpc3QnKVxyXG4gICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZTogJ2xpc3QnKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgeWFtbC5zdHlsZSA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgIHVwZGF0ZVNldHRpbmdzKGNvbnRlbnRFbCwgeWFtbCwgcGx1Z2luLCBkZWZhdWx0U2V0dGluZ3MsIGVsLCBjdHgsIGZpbGUpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJlZnJlc2goY29udGVudEVsLCB5YW1sLCBwbHVnaW4sIGRlZmF1bHRTZXR0aW5ncywgZGlzcGxheSwgZWwsIGN0eCwgZmlsZSwgc2V0dGluZ3NUYWIsIG1vZGFsKTtcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgKTtcclxuXHJcbiAgICBpZiAoeWFtbC5zdHlsZSA9PT0gJ2V4cGxvcmVyJykge1xyXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRlbnRFbClcclxuICAgICAgICAgICAgLnNldE5hbWUoJ1N0b3JlIGNvbGxhcHNlZCBjb25kaXRpb24nKVxyXG4gICAgICAgICAgICAuc2V0RGVzYygnQ2hvb3NlIGlmIHRoZSBjb2xsYXBzZWQgY29uZGl0aW9uIHNob3VsZCBiZSBzdG9yZWQgc3RvcmVkIHVudGlsIHlvdSByZXN0YXJ0IE9ic2lkaWFuJylcclxuICAgICAgICAgICAgLmFkZFRvZ2dsZSgodG9nZ2xlKSA9PlxyXG4gICAgICAgICAgICAgICAgdG9nZ2xlXHJcbiAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKHlhbWwuc3RvcmVGb2xkZXJDb25kaXRpb24pXHJcbiAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB5YW1sLnN0b3JlRm9sZGVyQ29uZGl0aW9uID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZVNldHRpbmdzKGNvbnRlbnRFbCwgeWFtbCwgcGx1Z2luLCBkZWZhdWx0U2V0dGluZ3MsIGVsLCBjdHgsIGZpbGUpOztcclxuICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IHNldHRpbmcgPSBuZXcgU2V0dGluZyhjb250ZW50RWwpO1xyXG4gICAgc2V0dGluZy5zZXROYW1lKCdJbmNsdWRlIHR5cGVzJyk7XHJcbiAgICBjb25zdCBsaXN0ID0gbmV3IExpc3RDb21wb25lbnQoc2V0dGluZy5zZXR0aW5nRWwsIHlhbWwuaW5jbHVkZVR5cGVzIHx8IFtdLCBbJ21hcmtkb3duJywgJ2ZvbGRlciddKTtcclxuICAgIGxpc3Qub24oJ3VwZGF0ZScsICh2YWx1ZXMpID0+IHtcclxuICAgICAgICB5YW1sLmluY2x1ZGVUeXBlcyA9IHZhbHVlcztcclxuICAgICAgICB1cGRhdGVTZXR0aW5ncyhjb250ZW50RWwsIHlhbWwsIHBsdWdpbiwgZGVmYXVsdFNldHRpbmdzLCBlbCwgY3R4LCBmaWxlKTtcclxuICAgICAgICByZWZyZXNoKGNvbnRlbnRFbCwgeWFtbCwgcGx1Z2luLCBkZWZhdWx0U2V0dGluZ3MsIGRpc3BsYXksIGVsLCBjdHgsIGZpbGUsIHNldHRpbmdzVGFiLCBtb2RhbCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpZiAoKHlhbWw/LmluY2x1ZGVUeXBlcz8ubGVuZ3RoIHx8IDApIDwgOCAmJiAheWFtbC5pbmNsdWRlVHlwZXM/LmluY2x1ZGVzKCdhbGwnKSkge1xyXG4gICAgICAgIHNldHRpbmcuYWRkRHJvcGRvd24oKGRyb3Bkb3duKSA9PiB7XHJcbiAgICAgICAgICAgIGlmICgheWFtbC5pbmNsdWRlVHlwZXMpIHlhbWwuaW5jbHVkZVR5cGVzID0gKHBsdWdpbiBpbnN0YW5jZW9mIEZvbGRlck5vdGVzUGx1Z2luKSA/IHBsdWdpbi5zZXR0aW5ncy5kZWZhdWx0T3ZlcnZpZXcuaW5jbHVkZVR5cGVzIDogcGx1Z2luLnNldHRpbmdzLmluY2x1ZGVUeXBlcyB8fCBbXTtcclxuICAgICAgICAgICAgeWFtbC5pbmNsdWRlVHlwZXMgPSB5YW1sLmluY2x1ZGVUeXBlcy5tYXAoKHR5cGU6IHN0cmluZykgPT4gdHlwZS50b0xvd2VyQ2FzZSgpKSBhcyBpbmNsdWRlVHlwZXNbXTtcclxuICAgICAgICAgICAgY29uc3Qgb3B0aW9ucyA9IFtcclxuICAgICAgICAgICAgICAgIHsgdmFsdWU6ICdtYXJrZG93bicsIGxhYmVsOiAnTWFya2Rvd24nIH0sXHJcbiAgICAgICAgICAgICAgICB7IHZhbHVlOiAnZm9sZGVyJywgbGFiZWw6ICdGb2xkZXInIH0sXHJcbiAgICAgICAgICAgICAgICB7IHZhbHVlOiAnY2FudmFzJywgbGFiZWw6ICdDYW52YXMnIH0sXHJcbiAgICAgICAgICAgICAgICB7IHZhbHVlOiAncGRmJywgbGFiZWw6ICdQREYnIH0sXHJcbiAgICAgICAgICAgICAgICB7IHZhbHVlOiAnaW1hZ2UnLCBsYWJlbDogJ0ltYWdlJyB9LFxyXG4gICAgICAgICAgICAgICAgeyB2YWx1ZTogJ2F1ZGlvJywgbGFiZWw6ICdBdWRpbycgfSxcclxuICAgICAgICAgICAgICAgIHsgdmFsdWU6ICd2aWRlbycsIGxhYmVsOiAnVmlkZW8nIH0sXHJcbiAgICAgICAgICAgICAgICB7IHZhbHVlOiAnb3RoZXInLCBsYWJlbDogJ0FsbCBvdGhlciBmaWxlIHR5cGVzJyB9LFxyXG4gICAgICAgICAgICAgICAgeyB2YWx1ZTogJ2FsbCcsIGxhYmVsOiAnQWxsIGZpbGUgdHlwZXMnIH0sXHJcbiAgICAgICAgICAgIF07XHJcblxyXG4gICAgICAgICAgICBvcHRpb25zLmZvckVhY2goKG9wdGlvbikgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKCF5YW1sLmluY2x1ZGVUeXBlcz8uaW5jbHVkZXMob3B0aW9uLnZhbHVlIGFzIGluY2x1ZGVUeXBlcykpIHtcclxuICAgICAgICAgICAgICAgICAgICBkcm9wZG93bi5hZGRPcHRpb24ob3B0aW9uLnZhbHVlLCBvcHRpb24ubGFiZWwpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgZHJvcGRvd24uYWRkT3B0aW9uKCcrJywgJysnKTtcclxuICAgICAgICAgICAgZHJvcGRvd24uc2V0VmFsdWUoJysnKTtcclxuICAgICAgICAgICAgZHJvcGRvd24ub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAodmFsdWUgPT09ICdhbGwnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgeWFtbC5pbmNsdWRlVHlwZXMgPSB5YW1sLmluY2x1ZGVUeXBlcz8uZmlsdGVyKCh0eXBlOiBzdHJpbmcpID0+IHR5cGUgPT09ICdmb2xkZXInKTtcclxuICAgICAgICAgICAgICAgICAgICBsaXN0LnNldFZhbHVlcyh5YW1sLmluY2x1ZGVUeXBlcyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBhd2FpdCBsaXN0LmFkZFZhbHVlKHZhbHVlLnRvTG93ZXJDYXNlKCkpO1xyXG4gICAgICAgICAgICAgICAgdXBkYXRlU2V0dGluZ3MoY29udGVudEVsLCB5YW1sLCBwbHVnaW4sIGRlZmF1bHRTZXR0aW5ncywgZWwsIGN0eCwgZmlsZSk7XHJcbiAgICAgICAgICAgICAgICByZWZyZXNoKGNvbnRlbnRFbCwgeWFtbCwgcGx1Z2luLCBkZWZhdWx0U2V0dGluZ3MsIGRpc3BsYXksIGVsLCBjdHgsIGZpbGUsIHNldHRpbmdzVGFiLCBtb2RhbCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGxldCBkaXNhYmxlRmlsZVRhZztcclxuICAgIHlhbWwuaW5jbHVkZVR5cGVzPy5mb3JFYWNoKCh0eXBlOiBzdHJpbmcpID0+IHtcclxuICAgICAgICB0eXBlID09PSAnZm9sZGVyJyB8fCB0eXBlID09PSAnbWFya2Rvd24nID8gKGRpc2FibGVGaWxlVGFnID0gdHJ1ZSkgOiBudWxsO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaWYgKGRpc2FibGVGaWxlVGFnKSB7XHJcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGVudEVsKVxyXG4gICAgICAgICAgICAuc2V0TmFtZSgnRGlzYWJsZSBmaWxlIHRhZycpXHJcbiAgICAgICAgICAgIC5zZXREZXNjKCdDaG9vc2UgaWYgdGhlIGZpbGUgdGFnIHNob3VsZCBiZSBzaG93biBhZnRlciB0aGUgZmlsZSBuYW1lJylcclxuICAgICAgICAgICAgLmFkZFRvZ2dsZSgodG9nZ2xlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0b2dnbGVcclxuICAgICAgICAgICAgICAgICAgICAuc2V0VmFsdWUoeWFtbC5kaXNhYmxlRmlsZVRhZylcclxuICAgICAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHlhbWwuZGlzYWJsZUZpbGVUYWcgPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdXBkYXRlU2V0dGluZ3MoY29udGVudEVsLCB5YW1sLCBwbHVnaW4sIGRlZmF1bHRTZXR0aW5ncywgZWwsIGN0eCwgZmlsZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIG5ldyBTZXR0aW5nKGNvbnRlbnRFbClcclxuICAgICAgICAuc2V0TmFtZSgnU2hvdyBmb2xkZXIgbm90ZXMnKVxyXG4gICAgICAgIC5zZXREZXNjKCdDaG9vc2UgaWYgZm9sZGVyIG5vdGVzICh0aGUgbm90ZSBpdHNlbGYgYW5kIG5vdCB0aGUgZm9sZGVyIG5hbWUpIHNob3VsZCBiZSBzaG93biBpbiB0aGUgb3ZlcnZpZXcnKVxyXG4gICAgICAgIC5hZGRUb2dnbGUoKHRvZ2dsZSkgPT5cclxuICAgICAgICAgICAgdG9nZ2xlXHJcbiAgICAgICAgICAgICAgICAuc2V0VmFsdWUoeWFtbC5zaG93Rm9sZGVyTm90ZXMpXHJcbiAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgeWFtbC5zaG93Rm9sZGVyTm90ZXMgPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICB1cGRhdGVTZXR0aW5ncyhjb250ZW50RWwsIHlhbWwsIHBsdWdpbiwgZGVmYXVsdFNldHRpbmdzLCBlbCwgY3R4LCBmaWxlKTtcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgKTtcclxuXHJcbiAgICBuZXcgU2V0dGluZyhjb250ZW50RWwpXHJcbiAgICAgICAgLnNldE5hbWUoJ0ZpbGUgZGVwdGgnKVxyXG4gICAgICAgIC5zZXREZXNjKCdGaWxlICYgZm9sZGVyID0gKzEgZGVwdGgnKVxyXG4gICAgICAgIC5hZGRTbGlkZXIoKHNsaWRlcikgPT5cclxuICAgICAgICAgICAgc2xpZGVyXHJcbiAgICAgICAgICAgICAgICAuc2V0VmFsdWUoeWFtbD8uZGVwdGggfHwgMilcclxuICAgICAgICAgICAgICAgIC5zZXRMaW1pdHMoMSwgMTAsIDEpXHJcbiAgICAgICAgICAgICAgICAuc2V0RHluYW1pY1Rvb2x0aXAoKVxyXG4gICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHlhbWwuZGVwdGggPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICB1cGRhdGVTZXR0aW5ncyhjb250ZW50RWwsIHlhbWwsIHBsdWdpbiwgZGVmYXVsdFNldHRpbmdzLCBlbCwgY3R4LCBmaWxlKTtcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgKTtcclxuXHJcbiAgICBuZXcgU2V0dGluZyhjb250ZW50RWwpXHJcbiAgICAgICAgLnNldE5hbWUoJ1NvcnQgZmlsZXMgYnknKVxyXG4gICAgICAgIC5zZXREZXNjKCdDaG9vc2UgaG93IHRoZSBmaWxlcyBzaG91bGQgYmUgc29ydGVkJylcclxuICAgICAgICAuYWRkRHJvcGRvd24oKGRyb3Bkb3duKSA9PlxyXG4gICAgICAgICAgICBkcm9wZG93blxyXG4gICAgICAgICAgICAgICAgLmFkZE9wdGlvbignbmFtZScsICdOYW1lJylcclxuICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oJ2NyZWF0ZWQnLCAnQ3JlYXRlZCcpXHJcbiAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKCdtb2RpZmllZCcsICdNb2RpZmllZCcpXHJcbiAgICAgICAgICAgICAgICAuc2V0VmFsdWUoeWFtbD8uc29ydEJ5IHx8ICduYW1lJylcclxuICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWU6ICduYW1lJyB8ICdjcmVhdGVkJyB8ICdtb2RpZmllZCcpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB5YW1sLnNvcnRCeSA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgIHVwZGF0ZVNldHRpbmdzKGNvbnRlbnRFbCwgeWFtbCwgcGx1Z2luLCBkZWZhdWx0U2V0dGluZ3MsIGVsLCBjdHgsIGZpbGUpO1xyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICApXHJcbiAgICAgICAgLmFkZERyb3Bkb3duKChkcm9wZG93bikgPT4ge1xyXG4gICAgICAgICAgICBkcm9wZG93blxyXG4gICAgICAgICAgICAgICAgLmFkZE9wdGlvbignZGVzYycsICdEZXNjZW5kaW5nJylcclxuICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oJ2FzYycsICdBc2NlbmRpbmcnKVxyXG4gICAgICAgICAgICBpZiAoeWFtbC5zb3J0QnlBc2MpIHtcclxuICAgICAgICAgICAgICAgIGRyb3Bkb3duLnNldFZhbHVlKCdhc2MnKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGRyb3Bkb3duLnNldFZhbHVlKCdkZXNjJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZHJvcGRvd24ub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAodmFsdWUgPT09ICdkZXNjJykge1xyXG4gICAgICAgICAgICAgICAgICAgIHlhbWwuc29ydEJ5QXNjID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHlhbWwuc29ydEJ5QXNjID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHVwZGF0ZVNldHRpbmdzKGNvbnRlbnRFbCwgeWFtbCwgcGx1Z2luLCBkZWZhdWx0U2V0dGluZ3MsIGVsLCBjdHgsIGZpbGUpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICBpZiAoeWFtbC5zdHlsZSA9PT0gJ2xpc3QnKSB7XHJcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGVudEVsKVxyXG4gICAgICAgICAgICAuc2V0TmFtZSgnU2hvdyBmb2xkZXIgbmFtZXMgb2YgZm9sZGVycyB0aGF0IGFwcGVhciBlbXB0eSBpbiB0aGUgZm9sZGVyIG92ZXJ2aWV3JylcclxuICAgICAgICAgICAgLnNldERlc2MoJ1Nob3cgdGhlIG5hbWVzIG9mIGZvbGRlcnMgdGhhdCBhcHBlYXIgdG8gaGF2ZSBubyBmaWxlcy9mb2xkZXJzIGluIHRoZSBmb2xkZXIgb3ZlcnZpZXcuIFRoYXRcXCdzIG1vc3RseSB0aGUgY2FzZSB3aGVuIHlvdSBzZXQgdGhlIGZpbGUgZGVwdGggdG8gMS4nKVxyXG4gICAgICAgICAgICAuYWRkVG9nZ2xlKCh0b2dnbGUpID0+IHtcclxuICAgICAgICAgICAgICAgIHRvZ2dsZVxyXG4gICAgICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh5YW1sLnNob3dFbXB0eUZvbGRlcnMpXHJcbiAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB5YW1sLnNob3dFbXB0eUZvbGRlcnMgPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgeWFtbC5vbmx5SW5jbHVkZVN1YmZvbGRlcnMgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdXBkYXRlU2V0dGluZ3MoY29udGVudEVsLCB5YW1sLCBwbHVnaW4sIGRlZmF1bHRTZXR0aW5ncywgZWwsIGN0eCwgZmlsZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlZnJlc2goY29udGVudEVsLCB5YW1sLCBwbHVnaW4sIGRlZmF1bHRTZXR0aW5ncywgZGlzcGxheSwgZWwsIGN0eCwgZmlsZSwgc2V0dGluZ3NUYWIsIG1vZGFsKTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGlmICh5YW1sLnNob3dFbXB0eUZvbGRlcnMpIHtcclxuICAgICAgICAgICAgbmV3IFNldHRpbmcoY29udGVudEVsKVxyXG4gICAgICAgICAgICAgICAgLnNldE5hbWUoJ09ubHkgc2hvdyBlbXB0eSBmb2xkZXJzIHdoaWNoIGFyZSBvbiB0aGUgZmlyc3QgbGV2ZWwgb2YgdGhlIGZvbGRlciBvdmVydmlldycpXHJcbiAgICAgICAgICAgICAgICAuYWRkVG9nZ2xlKCh0b2dnbGUpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0b2dnbGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKHlhbWwub25seUluY2x1ZGVTdWJmb2xkZXJzKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB5YW1sLm9ubHlJbmNsdWRlU3ViZm9sZGVycyA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdXBkYXRlU2V0dGluZ3MoY29udGVudEVsLCB5YW1sLCBwbHVnaW4sIGRlZmF1bHRTZXR0aW5ncywgZWwsIGN0eCwgZmlsZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGlmICh5YW1sLnN0eWxlID09PSAnZXhwbG9yZXInKSB7XHJcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGVudEVsKVxyXG4gICAgICAgICAgICAuc2V0TmFtZSgnRGlzYWJsZSBjb2xsYXBzZSBpY29uIGZvciBmb2xkZXIgbm90ZXMnKVxyXG4gICAgICAgICAgICAuc2V0RGVzYygnUmVtb3ZlIHRoZSBjb2xsYXBzZSBpY29uIG5leHQgdG8gdGhlIGZvbGRlciBuYW1lIGZvciBmb2xkZXIgbm90ZXMgd2hlbiB0aGV5IG9ubHkgY29udGFpbiB0aGUgZm9sZGVyIG5vdGUgaXRzZWxmJylcclxuICAgICAgICAgICAgLmFkZFRvZ2dsZSgodG9nZ2xlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0b2dnbGVcclxuICAgICAgICAgICAgICAgICAgICAuc2V0VmFsdWUoeWFtbC5kaXNhYmxlQ29sbGFwc2VJY29uKVxyXG4gICAgICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgeWFtbC5kaXNhYmxlQ29sbGFwc2VJY29uID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZVNldHRpbmdzKGNvbnRlbnRFbCwgeWFtbCwgcGx1Z2luLCBkZWZhdWx0U2V0dGluZ3MsIGVsLCBjdHgsIGZpbGUpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGVudEVsKVxyXG4gICAgICAgICAgICAuc2V0TmFtZSgnQ29sbGFwc2UgYWxsIGluIHRoZSB0cmVlIGJ5IGRlZmF1bHQnKVxyXG4gICAgICAgICAgICAuc2V0RGVzYygnQ29sbGFwc2UgZXZlcnkgZm9sZGVyIGluIHRoZSBmaWxlIGV4cGxvcmVyIGluIHRoZSBvdmVydmlldyBieSBkZWZhdWx0JylcclxuICAgICAgICAgICAgLmFkZFRvZ2dsZSgodG9nZ2xlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0b2dnbGVcclxuICAgICAgICAgICAgICAgICAgICAuc2V0VmFsdWUoeWFtbC5hbHdheXNDb2xsYXBzZSlcclxuICAgICAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHlhbWwuYWx3YXlzQ29sbGFwc2UgPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdXBkYXRlU2V0dGluZ3MoY29udGVudEVsLCB5YW1sLCBwbHVnaW4sIGRlZmF1bHRTZXR0aW5ncywgZWwsIGN0eCwgZmlsZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgfVxyXG59XHJcblxyXG5hc3luYyBmdW5jdGlvbiB1cGRhdGVTZXR0aW5ncyhjb250ZW50RWw6IEhUTUxFbGVtZW50LCB5YW1sOiBvdmVydmlld1NldHRpbmdzLCBwbHVnaW46IEZvbGRlck92ZXJ2aWV3UGx1Z2luIHwgRm9sZGVyTm90ZXNQbHVnaW4sIGRlZmF1bHRTZXR0aW5nczogb3ZlcnZpZXdTZXR0aW5ncywgZWw/OiBIVE1MRWxlbWVudCwgY3R4PzogTWFya2Rvd25Qb3N0UHJvY2Vzc29yQ29udGV4dCwgZmlsZT86IFRGaWxlIHwgbnVsbCkge1xyXG4gICAgaWYgKCF5YW1sLmlkKSB7XHJcbiAgICAgICAgcmV0dXJuIHBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoZWwgJiYgY3R4KSB7XHJcbiAgICAgICAgYXdhaXQgdXBkYXRlWWFtbChwbHVnaW4sIGN0eCwgZWwsIHlhbWwpO1xyXG4gICAgfVxyXG5cclxuICAgIGlmIChmaWxlKSB7XHJcbiAgICAgICAgYXdhaXQgdXBkYXRlWWFtbEJ5SWQocGx1Z2luLCB5YW1sLmlkLCBmaWxlLCB5YW1sKTtcclxuICAgIH1cclxuICAgIHBsdWdpbi51cGRhdGVPdmVydmlld1ZpZXcoKTtcclxufVxyXG5cclxuZnVuY3Rpb24gcmVmcmVzaChjb250ZW50RWw6IEhUTUxFbGVtZW50LCB5YW1sOiBvdmVydmlld1NldHRpbmdzLCBwbHVnaW46IEZvbGRlck92ZXJ2aWV3UGx1Z2luIHwgRm9sZGVyTm90ZXNQbHVnaW4sIGRlZmF1bHRTZXR0aW5nczogb3ZlcnZpZXdTZXR0aW5ncywgZGlzcGxheTogQ2FsbGFibGVGdW5jdGlvbiwgZWw/OiBIVE1MRWxlbWVudCwgY3R4PzogTWFya2Rvd25Qb3N0UHJvY2Vzc29yQ29udGV4dCwgZmlsZT86IFRGaWxlIHwgbnVsbCwgc2V0dGluZ3NUYWI/OiBQbHVnaW5TZXR0aW5nVGFiLCBtb2RhbD86IEZvbGRlck92ZXJ2aWV3U2V0dGluZ3MpIHtcclxuICAgIGlmIChmaWxlKSB7XHJcbiAgICAgICAgY29udGVudEVsID0gY29udGVudEVsLnBhcmVudEVsZW1lbnQgYXMgSFRNTEVsZW1lbnQ7XHJcbiAgICB9XHJcbiAgICBkaXNwbGF5KGNvbnRlbnRFbCwgeWFtbCwgcGx1Z2luLCBkZWZhdWx0U2V0dGluZ3MsIGRpc3BsYXksIGVsLCBjdHgsIGZpbGUsIHNldHRpbmdzVGFiLCBtb2RhbCk7XHJcbn0iLCAiLy8gQ3JlZGl0cyBnbyB0byBMaWFtJ3MgUGVyaW9kaWMgTm90ZXMgUGx1Z2luOiBodHRwczovL2dpdGh1Yi5jb20vbGlhbWNhaW4vb2JzaWRpYW4tcGVyaW9kaWMtbm90ZXMgYW5kIGh0dHBzOi8vZ2l0aHViLmNvbS9TaWxlbnRWb2lkMTMvVGVtcGxhdGVyXHJcblxyXG5pbXBvcnQgeyBUQWJzdHJhY3RGaWxlLCBURm9sZGVyIH0gZnJvbSAnb2JzaWRpYW4nO1xyXG5pbXBvcnQgeyBUZXh0SW5wdXRTdWdnZXN0IH0gZnJvbSAnLi9TdWdnZXN0JztcclxuaW1wb3J0IEZvbGRlck92ZXJ2aWV3UGx1Z2luIGZyb20gJy4vbWFpbic7XHJcbmltcG9ydCBGb2xkZXJOb3Rlc1BsdWdpbiBmcm9tICcuLi8uLi8uLi9tYWluJztcclxuZXhwb3J0IGVudW0gRmlsZVN1Z2dlc3RNb2RlIHtcclxuICAgIFRlbXBsYXRlRmlsZXMsXHJcbiAgICBTY3JpcHRGaWxlcyxcclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIEZvbGRlclN1Z2dlc3QgZXh0ZW5kcyBUZXh0SW5wdXRTdWdnZXN0PFRGb2xkZXI+IHtcclxuXHRjb25zdHJ1Y3RvcihcclxuICAgICAgICBwdWJsaWMgaW5wdXRFbDogSFRNTElucHV0RWxlbWVudCxcclxuICAgICAgICBwbHVnaW46IEZvbGRlck92ZXJ2aWV3UGx1Z2luIHwgRm9sZGVyTm90ZXNQbHVnaW4sXHJcblx0XHRwcml2YXRlIHdoaXRlbGlzdFN1Z2dlc3RlcjogYm9vbGVhbixcclxuXHRcdHB1YmxpYyBmb2xkZXI/OiBURm9sZGVyLFxyXG5cdCkge1xyXG5cdFx0c3VwZXIoaW5wdXRFbCwgcGx1Z2luKTtcclxuXHR9XHJcblxyXG5cclxuXHRnZXRfZXJyb3JfbXNnKG1vZGU6IEZpbGVTdWdnZXN0TW9kZSk6IHN0cmluZyB7XHJcblx0XHRzd2l0Y2ggKG1vZGUpIHtcclxuXHRcdFx0Y2FzZSBGaWxlU3VnZ2VzdE1vZGUuVGVtcGxhdGVGaWxlczpcclxuXHRcdFx0XHRyZXR1cm4gJ1RlbXBsYXRlcyBmb2xkZXIgZG9lc25cXCd0IGV4aXN0JztcclxuXHRcdFx0Y2FzZSBGaWxlU3VnZ2VzdE1vZGUuU2NyaXB0RmlsZXM6XHJcblx0XHRcdFx0cmV0dXJuICdVc2VyIFNjcmlwdHMgZm9sZGVyIGRvZXNuXFwndCBleGlzdCc7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHRnZXRTdWdnZXN0aW9ucyhpbnB1dF9zdHI6IHN0cmluZyk6IFRGb2xkZXJbXSB7XHJcblx0XHRjb25zdCBmb2xkZXJzOiBURm9sZGVyW10gPSBbXTtcclxuXHRcdGNvbnN0IGxvd2VyX2lucHV0X3N0ciA9IGlucHV0X3N0ci50b0xvd2VyQ2FzZSgpO1xyXG5cdFx0bGV0IGZpbGVzOiBUQWJzdHJhY3RGaWxlW10gPSBbXTtcclxuXHRcdGlmICh0aGlzLmZvbGRlcikge1xyXG5cdFx0XHRmaWxlcyA9IHRoaXMuZm9sZGVyLmNoaWxkcmVuO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0ZmlsZXMgPSB0aGlzLnBsdWdpbi5hcHAudmF1bHQuZ2V0QWxsTG9hZGVkRmlsZXMoKS5zbGljZSgwLDEwMCk7XHJcblx0XHR9XHJcblx0XHRmaWxlcy5mb3JFYWNoKChmb2xkZXI6IFRBYnN0cmFjdEZpbGUpID0+IHtcclxuXHRcdFx0aWYgKFxyXG5cdFx0XHRcdGZvbGRlciBpbnN0YW5jZW9mIFRGb2xkZXIgJiZcclxuICAgICAgICAgICAgICAgIGZvbGRlci5wYXRoLnRvTG93ZXJDYXNlKCkuY29udGFpbnMobG93ZXJfaW5wdXRfc3RyKSAmJlxyXG4gICAgICAgICAgICAgICAgKHRoaXMucGx1Z2luIGluc3RhbmNlb2YgRm9sZGVyTm90ZXNQbHVnaW4gPyAoIXRoaXMucGx1Z2luLnNldHRpbmdzLmV4Y2x1ZGVGb2xkZXJzLmZpbmQoKGY6IGFueSkgPT4gZi5wYXRoID09PSBmb2xkZXIucGF0aCkgfHwgdGhpcy53aGl0ZWxpc3RTdWdnZXN0ZXIpIDogdHJ1ZSlcclxuXHRcdFx0KSB7XHJcblx0XHRcdFx0Zm9sZGVycy5wdXNoKGZvbGRlcik7XHJcblx0XHRcdH1cclxuXHRcdH0pO1xyXG5cclxuXHRcdHJldHVybiBmb2xkZXJzO1xyXG5cdH1cclxuXHJcblx0cmVuZGVyU3VnZ2VzdGlvbihmb2xkZXI6IFRGb2xkZXIsIGVsOiBIVE1MRWxlbWVudCk6IHZvaWQge1xyXG5cdFx0ZWwuc2V0VGV4dChmb2xkZXIucGF0aCk7XHJcblx0fVxyXG5cclxuXHRzZWxlY3RTdWdnZXN0aW9uKGZvbGRlcjogVEZvbGRlcik6IHZvaWQge1xyXG5cdFx0dGhpcy5pbnB1dEVsLnZhbHVlID0gZm9sZGVyLnBhdGg7XHJcblx0XHR0aGlzLmlucHV0RWwudHJpZ2dlcignaW5wdXQnKTtcclxuXHRcdHRoaXMuY2xvc2UoKTtcclxuXHR9XHJcbn1cclxuIiwgIi8vIENyZWRpdHMgZ28gdG8gTGlhbSdzIFBlcmlvZGljIE5vdGVzIFBsdWdpbjogaHR0cHM6Ly9naXRodWIuY29tL2xpYW1jYWluL29ic2lkaWFuLXBlcmlvZGljLW5vdGVzIGFuZCBodHRwczovL2dpdGh1Yi5jb20vU2lsZW50Vm9pZDEzL1RlbXBsYXRlclxyXG5cclxuXHJcbmltcG9ydCB7IElTdWdnZXN0T3duZXIsIFNjb3BlIH0gZnJvbSAnb2JzaWRpYW4nO1xyXG5pbXBvcnQgeyBjcmVhdGVQb3BwZXIsIEluc3RhbmNlIGFzIFBvcHBlckluc3RhbmNlIH0gZnJvbSAnQHBvcHBlcmpzL2NvcmUnO1xyXG5pbXBvcnQgRm9sZGVyT3ZlcnZpZXdQbHVnaW4gZnJvbSAnLi9tYWluJztcclxuaW1wb3J0IEZvbGRlck5vdGVzUGx1Z2luIGZyb20gJy4uLy4uLy4uL21haW4nO1xyXG5cclxuXHJcbmNvbnN0IHdyYXBBcm91bmQgPSAodmFsdWU6IG51bWJlciwgc2l6ZTogbnVtYmVyKTogbnVtYmVyID0+IHtcclxuXHRyZXR1cm4gKCh2YWx1ZSAlIHNpemUpICsgc2l6ZSkgJSBzaXplO1xyXG59O1xyXG5cclxuY2xhc3MgU3VnZ2VzdDxUPiB7XHJcblx0cHJpdmF0ZSBvd25lcjogSVN1Z2dlc3RPd25lcjxUPjtcclxuXHRwcml2YXRlIHZhbHVlczogVFtdO1xyXG5cdHByaXZhdGUgc3VnZ2VzdGlvbnM6IEhUTUxEaXZFbGVtZW50W107XHJcblx0cHJpdmF0ZSBzZWxlY3RlZEl0ZW06IG51bWJlcjtcclxuXHRwcml2YXRlIGNvbnRhaW5lckVsOiBIVE1MRWxlbWVudDtcclxuXHRwbHVnaW46ICBGb2xkZXJPdmVydmlld1BsdWdpbiB8IEZvbGRlck5vdGVzUGx1Z2luO1xyXG5cclxuXHRjb25zdHJ1Y3RvcihcclxuXHRcdG93bmVyOiBJU3VnZ2VzdE93bmVyPFQ+LFxyXG5cdFx0Y29udGFpbmVyRWw6IEhUTUxFbGVtZW50LFxyXG5cdFx0c2NvcGU6IFNjb3BlXHJcblx0KSB7XHJcblx0XHR0aGlzLm93bmVyID0gb3duZXI7XHJcblx0XHR0aGlzLmNvbnRhaW5lckVsID0gY29udGFpbmVyRWw7XHJcblxyXG5cdFx0Y29udGFpbmVyRWwub24oXHJcblx0XHRcdCdjbGljaycsXHJcblx0XHRcdCcuc3VnZ2VzdGlvbi1pdGVtJyxcclxuXHRcdFx0dGhpcy5vblN1Z2dlc3Rpb25DbGljay5iaW5kKHRoaXMpXHJcblx0XHQpO1xyXG5cdFx0Y29udGFpbmVyRWwub24oXHJcblx0XHRcdCdtb3VzZW1vdmUnLFxyXG5cdFx0XHQnLnN1Z2dlc3Rpb24taXRlbScsXHJcblx0XHRcdHRoaXMub25TdWdnZXN0aW9uTW91c2VvdmVyLmJpbmQodGhpcylcclxuXHRcdCk7XHJcblxyXG5cdFx0c2NvcGUucmVnaXN0ZXIoW10sICdBcnJvd1VwJywgKGV2ZW50KSA9PiB7XHJcblx0XHRcdGlmICghZXZlbnQuaXNDb21wb3NpbmcpIHtcclxuXHRcdFx0XHR0aGlzLnNldFNlbGVjdGVkSXRlbSh0aGlzLnNlbGVjdGVkSXRlbSAtIDEsIHRydWUpO1xyXG5cdFx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdFx0fVxyXG5cdFx0fSk7XHJcblxyXG5cdFx0c2NvcGUucmVnaXN0ZXIoW10sICdBcnJvd0Rvd24nLCAoZXZlbnQpID0+IHtcclxuXHRcdFx0aWYgKCFldmVudC5pc0NvbXBvc2luZykge1xyXG5cdFx0XHRcdHRoaXMuc2V0U2VsZWN0ZWRJdGVtKHRoaXMuc2VsZWN0ZWRJdGVtICsgMSwgdHJ1ZSk7XHJcblx0XHRcdFx0cmV0dXJuIGZhbHNlO1xyXG5cdFx0XHR9XHJcblx0XHR9KTtcclxuXHJcblx0XHRzY29wZS5yZWdpc3RlcihbXSwgJ0VudGVyJywgKGV2ZW50KSA9PiB7XHJcblx0XHRcdGlmICghZXZlbnQuaXNDb21wb3NpbmcpIHtcclxuXHRcdFx0XHR0aGlzLnVzZVNlbGVjdGVkSXRlbShldmVudCk7XHJcblx0XHRcdFx0cmV0dXJuIGZhbHNlO1xyXG5cdFx0XHR9XHJcblx0XHR9KTtcclxuXHR9XHJcblxyXG5cdG9uU3VnZ2VzdGlvbkNsaWNrKGV2ZW50OiBNb3VzZUV2ZW50LCBlbDogSFRNTERpdkVsZW1lbnQpOiB2b2lkIHtcclxuXHRcdGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcblxyXG5cdFx0Y29uc3QgaXRlbSA9IHRoaXMuc3VnZ2VzdGlvbnMuaW5kZXhPZihlbCk7XHJcblx0XHR0aGlzLnNldFNlbGVjdGVkSXRlbShpdGVtLCBmYWxzZSk7XHJcblx0XHR0aGlzLnVzZVNlbGVjdGVkSXRlbShldmVudCk7XHJcblx0fVxyXG5cclxuXHRvblN1Z2dlc3Rpb25Nb3VzZW92ZXIoX2V2ZW50OiBNb3VzZUV2ZW50LCBlbDogSFRNTERpdkVsZW1lbnQpOiB2b2lkIHtcclxuXHRcdGNvbnN0IGl0ZW0gPSB0aGlzLnN1Z2dlc3Rpb25zLmluZGV4T2YoZWwpO1xyXG5cdFx0dGhpcy5zZXRTZWxlY3RlZEl0ZW0oaXRlbSwgZmFsc2UpO1xyXG5cdH1cclxuXHJcblx0c2V0U3VnZ2VzdGlvbnModmFsdWVzOiBUW10pIHtcclxuXHRcdHRoaXMuY29udGFpbmVyRWwuZW1wdHkoKTtcclxuXHRcdGNvbnN0IHN1Z2dlc3Rpb25FbHM6IEhUTUxEaXZFbGVtZW50W10gPSBbXTtcclxuXHJcblx0XHR2YWx1ZXMuZm9yRWFjaCgodmFsdWUpID0+IHtcclxuXHRcdFx0Y29uc3Qgc3VnZ2VzdGlvbkVsID0gdGhpcy5jb250YWluZXJFbC5jcmVhdGVEaXYoJ3N1Z2dlc3Rpb24taXRlbScpO1xyXG5cdFx0XHR0aGlzLm93bmVyLnJlbmRlclN1Z2dlc3Rpb24odmFsdWUsIHN1Z2dlc3Rpb25FbCk7XHJcblx0XHRcdHN1Z2dlc3Rpb25FbHMucHVzaChzdWdnZXN0aW9uRWwpO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0dGhpcy52YWx1ZXMgPSB2YWx1ZXM7XHJcblx0XHR0aGlzLnN1Z2dlc3Rpb25zID0gc3VnZ2VzdGlvbkVscztcclxuXHRcdHRoaXMuc2V0U2VsZWN0ZWRJdGVtKDAsIGZhbHNlKTtcclxuXHR9XHJcblxyXG5cdHVzZVNlbGVjdGVkSXRlbShldmVudDogTW91c2VFdmVudCB8IEtleWJvYXJkRXZlbnQpIHtcclxuXHRcdGNvbnN0IGN1cnJlbnRWYWx1ZSA9IHRoaXMudmFsdWVzW3RoaXMuc2VsZWN0ZWRJdGVtXTtcclxuXHRcdGlmIChjdXJyZW50VmFsdWUpIHtcclxuXHRcdFx0dGhpcy5vd25lci5zZWxlY3RTdWdnZXN0aW9uKGN1cnJlbnRWYWx1ZSwgZXZlbnQpO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0c2V0U2VsZWN0ZWRJdGVtKHNlbGVjdGVkSW5kZXg6IG51bWJlciwgc2Nyb2xsSW50b1ZpZXc6IGJvb2xlYW4pIHtcclxuXHRcdGNvbnN0IG5vcm1hbGl6ZWRJbmRleCA9IHdyYXBBcm91bmQoXHJcblx0XHRcdHNlbGVjdGVkSW5kZXgsXHJcblx0XHRcdHRoaXMuc3VnZ2VzdGlvbnMubGVuZ3RoXHJcblx0XHQpO1xyXG5cdFx0Y29uc3QgcHJldlNlbGVjdGVkU3VnZ2VzdGlvbiA9IHRoaXMuc3VnZ2VzdGlvbnNbdGhpcy5zZWxlY3RlZEl0ZW1dO1xyXG5cdFx0Y29uc3Qgc2VsZWN0ZWRTdWdnZXN0aW9uID0gdGhpcy5zdWdnZXN0aW9uc1tub3JtYWxpemVkSW5kZXhdO1xyXG5cclxuXHRcdHByZXZTZWxlY3RlZFN1Z2dlc3Rpb24/LnJlbW92ZUNsYXNzKCdpcy1zZWxlY3RlZCcpO1xyXG5cdFx0c2VsZWN0ZWRTdWdnZXN0aW9uPy5hZGRDbGFzcygnaXMtc2VsZWN0ZWQnKTtcclxuXHJcblx0XHR0aGlzLnNlbGVjdGVkSXRlbSA9IG5vcm1hbGl6ZWRJbmRleDtcclxuXHJcblx0XHRpZiAoc2Nyb2xsSW50b1ZpZXcpIHtcclxuXHRcdFx0c2VsZWN0ZWRTdWdnZXN0aW9uLnNjcm9sbEludG9WaWV3KGZhbHNlKTtcclxuXHRcdH1cclxuXHR9XHJcbn1cclxuXHJcbmV4cG9ydCBhYnN0cmFjdCBjbGFzcyBUZXh0SW5wdXRTdWdnZXN0PFQ+IGltcGxlbWVudHMgSVN1Z2dlc3RPd25lcjxUPiB7XHJcblx0cHJvdGVjdGVkIGlucHV0RWw6IEhUTUxJbnB1dEVsZW1lbnQgfCBIVE1MVGV4dEFyZWFFbGVtZW50O1xyXG5cclxuXHRwcml2YXRlIHBvcHBlcjogUG9wcGVySW5zdGFuY2U7XHJcblx0cHJpdmF0ZSBzY29wZTogU2NvcGU7XHJcblx0cHJpdmF0ZSBzdWdnZXN0RWw6IEhUTUxFbGVtZW50O1xyXG5cdHByaXZhdGUgc3VnZ2VzdDogU3VnZ2VzdDxUPjtcclxuXHRwbHVnaW46IEZvbGRlck5vdGVzUGx1Z2luIHwgRm9sZGVyT3ZlcnZpZXdQbHVnaW47XHJcblxyXG5cdGNvbnN0cnVjdG9yKGlucHV0RWw6IEhUTUxJbnB1dEVsZW1lbnQgfCBIVE1MVGV4dEFyZWFFbGVtZW50LCBwbHVnaW46IEZvbGRlck5vdGVzUGx1Z2luIHwgRm9sZGVyT3ZlcnZpZXdQbHVnaW4pIHtcclxuXHRcdHRoaXMuaW5wdXRFbCA9IGlucHV0RWw7XHJcblx0XHR0aGlzLnBsdWdpbiA9IHBsdWdpbjtcclxuXHRcdHRoaXMuc2NvcGUgPSBuZXcgU2NvcGUoKTtcclxuXHJcblx0XHR0aGlzLnN1Z2dlc3RFbCA9IGNyZWF0ZURpdignc3VnZ2VzdGlvbi1jb250YWluZXInKTtcclxuXHRcdGNvbnN0IHN1Z2dlc3Rpb24gPSB0aGlzLnN1Z2dlc3RFbC5jcmVhdGVEaXYoJ3N1Z2dlc3Rpb24nKTtcclxuXHRcdHRoaXMuc3VnZ2VzdCA9IG5ldyBTdWdnZXN0KHRoaXMsIHN1Z2dlc3Rpb24sIHRoaXMuc2NvcGUpO1xyXG5cclxuXHRcdHRoaXMuc2NvcGUucmVnaXN0ZXIoW10sICdFc2NhcGUnLCB0aGlzLmNsb3NlLmJpbmQodGhpcykpO1xyXG5cclxuXHRcdHRoaXMuaW5wdXRFbC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsIHRoaXMub25JbnB1dENoYW5nZWQuYmluZCh0aGlzKSk7XHJcblx0XHR0aGlzLmlucHV0RWwuYWRkRXZlbnRMaXN0ZW5lcignZm9jdXMnLCB0aGlzLm9uSW5wdXRDaGFuZ2VkLmJpbmQodGhpcykpO1xyXG5cdFx0dGhpcy5pbnB1dEVsLmFkZEV2ZW50TGlzdGVuZXIoJ2JsdXInLCB0aGlzLmNsb3NlLmJpbmQodGhpcykpO1xyXG5cdFx0dGhpcy5zdWdnZXN0RWwub24oXHJcblx0XHRcdCdtb3VzZWRvd24nLFxyXG5cdFx0XHQnLnN1Z2dlc3Rpb24tY29udGFpbmVyJyxcclxuXHRcdFx0KGV2ZW50OiBNb3VzZUV2ZW50KSA9PiB7XHJcblx0XHRcdFx0ZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuXHRcdFx0fVxyXG5cdFx0KTtcclxuXHR9XHJcblxyXG5cdG9uSW5wdXRDaGFuZ2VkKCk6IHZvaWQge1xyXG5cdFx0Y29uc3QgaW5wdXRTdHIgPSB0aGlzLmlucHV0RWwudmFsdWU7XHJcblx0XHRjb25zdCBzdWdnZXN0aW9ucyA9IHRoaXMuZ2V0U3VnZ2VzdGlvbnMoaW5wdXRTdHIpO1xyXG5cclxuXHRcdGlmICghc3VnZ2VzdGlvbnMpIHtcclxuXHRcdFx0dGhpcy5jbG9zZSgpO1xyXG5cdFx0XHRyZXR1cm47XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKHN1Z2dlc3Rpb25zLmxlbmd0aCA+IDApIHtcclxuXHRcdFx0dGhpcy5zdWdnZXN0LnNldFN1Z2dlc3Rpb25zKHN1Z2dlc3Rpb25zKTtcclxuXHRcdFx0Ly8gQHRzLWlnbm9yZVxyXG5cdFx0XHR0aGlzLm9wZW4oYXBwLmRvbS5hcHBDb250YWluZXJFbCwgdGhpcy5pbnB1dEVsKTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdHRoaXMuY2xvc2UoKTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdG9wZW4oY29udGFpbmVyOiBIVE1MRWxlbWVudCwgaW5wdXRFbDogSFRNTEVsZW1lbnQpOiB2b2lkIHtcclxuXHRcdC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XHJcblx0XHR0aGlzLnBsdWdpbi5hcHAua2V5bWFwLnB1c2hTY29wZSh0aGlzLnNjb3BlKTtcclxuXHJcblx0XHRjb250YWluZXIuYXBwZW5kQ2hpbGQodGhpcy5zdWdnZXN0RWwpO1xyXG5cdFx0dGhpcy5wb3BwZXIgPSBjcmVhdGVQb3BwZXIoaW5wdXRFbCwgdGhpcy5zdWdnZXN0RWwsIHtcclxuXHRcdFx0cGxhY2VtZW50OiAnYm90dG9tLXN0YXJ0JyxcclxuXHRcdFx0bW9kaWZpZXJzOiBbXHJcblx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0bmFtZTogJ3NhbWVXaWR0aCcsXHJcblx0XHRcdFx0XHRlbmFibGVkOiB0cnVlLFxyXG5cdFx0XHRcdFx0Zm46ICh7IHN0YXRlLCBpbnN0YW5jZSB9KSA9PiB7XHJcblx0XHRcdFx0XHRcdC8vIE5vdGU6IHBvc2l0aW9uaW5nIG5lZWRzIHRvIGJlIGNhbGN1bGF0ZWQgdHdpY2UgLVxyXG5cdFx0XHRcdFx0XHQvLyBmaXJzdCBwYXNzIC0gcG9zaXRpb25pbmcgaXQgYWNjb3JkaW5nIHRvIHRoZSB3aWR0aCBvZiB0aGUgcG9wcGVyXHJcblx0XHRcdFx0XHRcdC8vIHNlY29uZCBwYXNzIC0gcG9zaXRpb24gaXQgd2l0aCB0aGUgd2lkdGggYm91bmQgdG8gdGhlIHJlZmVyZW5jZSBlbGVtZW50XHJcblx0XHRcdFx0XHRcdC8vIHdlIG5lZWQgdG8gZWFybHkgZXhpdCB0byBhdm9pZCBhbiBpbmZpbml0ZSBsb29wXHJcblx0XHRcdFx0XHRcdGNvbnN0IHRhcmdldFdpZHRoID0gYCR7c3RhdGUucmVjdHMucmVmZXJlbmNlLndpZHRofXB4YDtcclxuXHRcdFx0XHRcdFx0aWYgKHN0YXRlLnN0eWxlcy5wb3BwZXIud2lkdGggPT09IHRhcmdldFdpZHRoKSB7XHJcblx0XHRcdFx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdHN0YXRlLnN0eWxlcy5wb3BwZXIud2lkdGggPSB0YXJnZXRXaWR0aDtcclxuXHRcdFx0XHRcdFx0aW5zdGFuY2UudXBkYXRlKCk7XHJcblx0XHRcdFx0XHR9LFxyXG5cdFx0XHRcdFx0cGhhc2U6ICdiZWZvcmVXcml0ZScsXHJcblx0XHRcdFx0XHRyZXF1aXJlczogWydjb21wdXRlU3R5bGVzJ10sXHJcblx0XHRcdFx0fSxcclxuXHRcdFx0XSxcclxuXHRcdH0pO1xyXG5cdH1cclxuXHJcblx0Y2xvc2UoKTogdm9pZCB7XHJcblx0XHR0aGlzLnBsdWdpbi5hcHAua2V5bWFwLnBvcFNjb3BlKHRoaXMuc2NvcGUpO1xyXG5cclxuXHRcdHRoaXMuc3VnZ2VzdC5zZXRTdWdnZXN0aW9ucyhbXSk7XHJcblx0XHRpZiAodGhpcy5wb3BwZXIpIHRoaXMucG9wcGVyLmRlc3Ryb3koKTtcclxuXHRcdHRoaXMuc3VnZ2VzdEVsLmRldGFjaCgpO1xyXG5cdH1cclxuXHJcbiAgICBhYnN0cmFjdCBnZXRTdWdnZXN0aW9ucyhpbnB1dFN0cjogc3RyaW5nKTogVFtdO1xyXG4gICAgYWJzdHJhY3QgcmVuZGVyU3VnZ2VzdGlvbihpdGVtOiBULCBlbDogSFRNTEVsZW1lbnQpOiB2b2lkO1xyXG4gICAgYWJzdHJhY3Qgc2VsZWN0U3VnZ2VzdGlvbihpdGVtOiBUKTogdm9pZDtcclxufVxyXG4iLCAiZXhwb3J0IHZhciB0b3AgPSAndG9wJztcbmV4cG9ydCB2YXIgYm90dG9tID0gJ2JvdHRvbSc7XG5leHBvcnQgdmFyIHJpZ2h0ID0gJ3JpZ2h0JztcbmV4cG9ydCB2YXIgbGVmdCA9ICdsZWZ0JztcbmV4cG9ydCB2YXIgYXV0byA9ICdhdXRvJztcbmV4cG9ydCB2YXIgYmFzZVBsYWNlbWVudHMgPSBbdG9wLCBib3R0b20sIHJpZ2h0LCBsZWZ0XTtcbmV4cG9ydCB2YXIgc3RhcnQgPSAnc3RhcnQnO1xuZXhwb3J0IHZhciBlbmQgPSAnZW5kJztcbmV4cG9ydCB2YXIgY2xpcHBpbmdQYXJlbnRzID0gJ2NsaXBwaW5nUGFyZW50cyc7XG5leHBvcnQgdmFyIHZpZXdwb3J0ID0gJ3ZpZXdwb3J0JztcbmV4cG9ydCB2YXIgcG9wcGVyID0gJ3BvcHBlcic7XG5leHBvcnQgdmFyIHJlZmVyZW5jZSA9ICdyZWZlcmVuY2UnO1xuZXhwb3J0IHZhciB2YXJpYXRpb25QbGFjZW1lbnRzID0gLyojX19QVVJFX18qL2Jhc2VQbGFjZW1lbnRzLnJlZHVjZShmdW5jdGlvbiAoYWNjLCBwbGFjZW1lbnQpIHtcbiAgcmV0dXJuIGFjYy5jb25jYXQoW3BsYWNlbWVudCArIFwiLVwiICsgc3RhcnQsIHBsYWNlbWVudCArIFwiLVwiICsgZW5kXSk7XG59LCBbXSk7XG5leHBvcnQgdmFyIHBsYWNlbWVudHMgPSAvKiNfX1BVUkVfXyovW10uY29uY2F0KGJhc2VQbGFjZW1lbnRzLCBbYXV0b10pLnJlZHVjZShmdW5jdGlvbiAoYWNjLCBwbGFjZW1lbnQpIHtcbiAgcmV0dXJuIGFjYy5jb25jYXQoW3BsYWNlbWVudCwgcGxhY2VtZW50ICsgXCItXCIgKyBzdGFydCwgcGxhY2VtZW50ICsgXCItXCIgKyBlbmRdKTtcbn0sIFtdKTsgLy8gbW9kaWZpZXJzIHRoYXQgbmVlZCB0byByZWFkIHRoZSBET01cblxuZXhwb3J0IHZhciBiZWZvcmVSZWFkID0gJ2JlZm9yZVJlYWQnO1xuZXhwb3J0IHZhciByZWFkID0gJ3JlYWQnO1xuZXhwb3J0IHZhciBhZnRlclJlYWQgPSAnYWZ0ZXJSZWFkJzsgLy8gcHVyZS1sb2dpYyBtb2RpZmllcnNcblxuZXhwb3J0IHZhciBiZWZvcmVNYWluID0gJ2JlZm9yZU1haW4nO1xuZXhwb3J0IHZhciBtYWluID0gJ21haW4nO1xuZXhwb3J0IHZhciBhZnRlck1haW4gPSAnYWZ0ZXJNYWluJzsgLy8gbW9kaWZpZXIgd2l0aCB0aGUgcHVycG9zZSB0byB3cml0ZSB0byB0aGUgRE9NIChvciB3cml0ZSBpbnRvIGEgZnJhbWV3b3JrIHN0YXRlKVxuXG5leHBvcnQgdmFyIGJlZm9yZVdyaXRlID0gJ2JlZm9yZVdyaXRlJztcbmV4cG9ydCB2YXIgd3JpdGUgPSAnd3JpdGUnO1xuZXhwb3J0IHZhciBhZnRlcldyaXRlID0gJ2FmdGVyV3JpdGUnO1xuZXhwb3J0IHZhciBtb2RpZmllclBoYXNlcyA9IFtiZWZvcmVSZWFkLCByZWFkLCBhZnRlclJlYWQsIGJlZm9yZU1haW4sIG1haW4sIGFmdGVyTWFpbiwgYmVmb3JlV3JpdGUsIHdyaXRlLCBhZnRlcldyaXRlXTsiLCAiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gZ2V0Tm9kZU5hbWUoZWxlbWVudCkge1xuICByZXR1cm4gZWxlbWVudCA/IChlbGVtZW50Lm5vZGVOYW1lIHx8ICcnKS50b0xvd2VyQ2FzZSgpIDogbnVsbDtcbn0iLCAiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gZ2V0V2luZG93KG5vZGUpIHtcbiAgaWYgKG5vZGUgPT0gbnVsbCkge1xuICAgIHJldHVybiB3aW5kb3c7XG4gIH1cblxuICBpZiAobm9kZS50b1N0cmluZygpICE9PSAnW29iamVjdCBXaW5kb3ddJykge1xuICAgIHZhciBvd25lckRvY3VtZW50ID0gbm9kZS5vd25lckRvY3VtZW50O1xuICAgIHJldHVybiBvd25lckRvY3VtZW50ID8gb3duZXJEb2N1bWVudC5kZWZhdWx0VmlldyB8fCB3aW5kb3cgOiB3aW5kb3c7XG4gIH1cblxuICByZXR1cm4gbm9kZTtcbn0iLCAiaW1wb3J0IGdldFdpbmRvdyBmcm9tIFwiLi9nZXRXaW5kb3cuanNcIjtcblxuZnVuY3Rpb24gaXNFbGVtZW50KG5vZGUpIHtcbiAgdmFyIE93bkVsZW1lbnQgPSBnZXRXaW5kb3cobm9kZSkuRWxlbWVudDtcbiAgcmV0dXJuIG5vZGUgaW5zdGFuY2VvZiBPd25FbGVtZW50IHx8IG5vZGUgaW5zdGFuY2VvZiBFbGVtZW50O1xufVxuXG5mdW5jdGlvbiBpc0hUTUxFbGVtZW50KG5vZGUpIHtcbiAgdmFyIE93bkVsZW1lbnQgPSBnZXRXaW5kb3cobm9kZSkuSFRNTEVsZW1lbnQ7XG4gIHJldHVybiBub2RlIGluc3RhbmNlb2YgT3duRWxlbWVudCB8fCBub2RlIGluc3RhbmNlb2YgSFRNTEVsZW1lbnQ7XG59XG5cbmZ1bmN0aW9uIGlzU2hhZG93Um9vdChub2RlKSB7XG4gIC8vIElFIDExIGhhcyBubyBTaGFkb3dSb290XG4gIGlmICh0eXBlb2YgU2hhZG93Um9vdCA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICB2YXIgT3duRWxlbWVudCA9IGdldFdpbmRvdyhub2RlKS5TaGFkb3dSb290O1xuICByZXR1cm4gbm9kZSBpbnN0YW5jZW9mIE93bkVsZW1lbnQgfHwgbm9kZSBpbnN0YW5jZW9mIFNoYWRvd1Jvb3Q7XG59XG5cbmV4cG9ydCB7IGlzRWxlbWVudCwgaXNIVE1MRWxlbWVudCwgaXNTaGFkb3dSb290IH07IiwgImltcG9ydCBnZXROb2RlTmFtZSBmcm9tIFwiLi4vZG9tLXV0aWxzL2dldE5vZGVOYW1lLmpzXCI7XG5pbXBvcnQgeyBpc0hUTUxFbGVtZW50IH0gZnJvbSBcIi4uL2RvbS11dGlscy9pbnN0YW5jZU9mLmpzXCI7IC8vIFRoaXMgbW9kaWZpZXIgdGFrZXMgdGhlIHN0eWxlcyBwcmVwYXJlZCBieSB0aGUgYGNvbXB1dGVTdHlsZXNgIG1vZGlmaWVyXG4vLyBhbmQgYXBwbGllcyB0aGVtIHRvIHRoZSBIVE1MRWxlbWVudHMgc3VjaCBhcyBwb3BwZXIgYW5kIGFycm93XG5cbmZ1bmN0aW9uIGFwcGx5U3R5bGVzKF9yZWYpIHtcbiAgdmFyIHN0YXRlID0gX3JlZi5zdGF0ZTtcbiAgT2JqZWN0LmtleXMoc3RhdGUuZWxlbWVudHMpLmZvckVhY2goZnVuY3Rpb24gKG5hbWUpIHtcbiAgICB2YXIgc3R5bGUgPSBzdGF0ZS5zdHlsZXNbbmFtZV0gfHwge307XG4gICAgdmFyIGF0dHJpYnV0ZXMgPSBzdGF0ZS5hdHRyaWJ1dGVzW25hbWVdIHx8IHt9O1xuICAgIHZhciBlbGVtZW50ID0gc3RhdGUuZWxlbWVudHNbbmFtZV07IC8vIGFycm93IGlzIG9wdGlvbmFsICsgdmlydHVhbCBlbGVtZW50c1xuXG4gICAgaWYgKCFpc0hUTUxFbGVtZW50KGVsZW1lbnQpIHx8ICFnZXROb2RlTmFtZShlbGVtZW50KSkge1xuICAgICAgcmV0dXJuO1xuICAgIH0gLy8gRmxvdyBkb2Vzbid0IHN1cHBvcnQgdG8gZXh0ZW5kIHRoaXMgcHJvcGVydHksIGJ1dCBpdCdzIHRoZSBtb3N0XG4gICAgLy8gZWZmZWN0aXZlIHdheSB0byBhcHBseSBzdHlsZXMgdG8gYW4gSFRNTEVsZW1lbnRcbiAgICAvLyAkRmxvd0ZpeE1lW2Nhbm5vdC13cml0ZV1cblxuXG4gICAgT2JqZWN0LmFzc2lnbihlbGVtZW50LnN0eWxlLCBzdHlsZSk7XG4gICAgT2JqZWN0LmtleXMoYXR0cmlidXRlcykuZm9yRWFjaChmdW5jdGlvbiAobmFtZSkge1xuICAgICAgdmFyIHZhbHVlID0gYXR0cmlidXRlc1tuYW1lXTtcblxuICAgICAgaWYgKHZhbHVlID09PSBmYWxzZSkge1xuICAgICAgICBlbGVtZW50LnJlbW92ZUF0dHJpYnV0ZShuYW1lKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGVsZW1lbnQuc2V0QXR0cmlidXRlKG5hbWUsIHZhbHVlID09PSB0cnVlID8gJycgOiB2YWx1ZSk7XG4gICAgICB9XG4gICAgfSk7XG4gIH0pO1xufVxuXG5mdW5jdGlvbiBlZmZlY3QoX3JlZjIpIHtcbiAgdmFyIHN0YXRlID0gX3JlZjIuc3RhdGU7XG4gIHZhciBpbml0aWFsU3R5bGVzID0ge1xuICAgIHBvcHBlcjoge1xuICAgICAgcG9zaXRpb246IHN0YXRlLm9wdGlvbnMuc3RyYXRlZ3ksXG4gICAgICBsZWZ0OiAnMCcsXG4gICAgICB0b3A6ICcwJyxcbiAgICAgIG1hcmdpbjogJzAnXG4gICAgfSxcbiAgICBhcnJvdzoge1xuICAgICAgcG9zaXRpb246ICdhYnNvbHV0ZSdcbiAgICB9LFxuICAgIHJlZmVyZW5jZToge31cbiAgfTtcbiAgT2JqZWN0LmFzc2lnbihzdGF0ZS5lbGVtZW50cy5wb3BwZXIuc3R5bGUsIGluaXRpYWxTdHlsZXMucG9wcGVyKTtcbiAgc3RhdGUuc3R5bGVzID0gaW5pdGlhbFN0eWxlcztcblxuICBpZiAoc3RhdGUuZWxlbWVudHMuYXJyb3cpIHtcbiAgICBPYmplY3QuYXNzaWduKHN0YXRlLmVsZW1lbnRzLmFycm93LnN0eWxlLCBpbml0aWFsU3R5bGVzLmFycm93KTtcbiAgfVxuXG4gIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgT2JqZWN0LmtleXMoc3RhdGUuZWxlbWVudHMpLmZvckVhY2goZnVuY3Rpb24gKG5hbWUpIHtcbiAgICAgIHZhciBlbGVtZW50ID0gc3RhdGUuZWxlbWVudHNbbmFtZV07XG4gICAgICB2YXIgYXR0cmlidXRlcyA9IHN0YXRlLmF0dHJpYnV0ZXNbbmFtZV0gfHwge307XG4gICAgICB2YXIgc3R5bGVQcm9wZXJ0aWVzID0gT2JqZWN0LmtleXMoc3RhdGUuc3R5bGVzLmhhc093blByb3BlcnR5KG5hbWUpID8gc3RhdGUuc3R5bGVzW25hbWVdIDogaW5pdGlhbFN0eWxlc1tuYW1lXSk7IC8vIFNldCBhbGwgdmFsdWVzIHRvIGFuIGVtcHR5IHN0cmluZyB0byB1bnNldCB0aGVtXG5cbiAgICAgIHZhciBzdHlsZSA9IHN0eWxlUHJvcGVydGllcy5yZWR1Y2UoZnVuY3Rpb24gKHN0eWxlLCBwcm9wZXJ0eSkge1xuICAgICAgICBzdHlsZVtwcm9wZXJ0eV0gPSAnJztcbiAgICAgICAgcmV0dXJuIHN0eWxlO1xuICAgICAgfSwge30pOyAvLyBhcnJvdyBpcyBvcHRpb25hbCArIHZpcnR1YWwgZWxlbWVudHNcblxuICAgICAgaWYgKCFpc0hUTUxFbGVtZW50KGVsZW1lbnQpIHx8ICFnZXROb2RlTmFtZShlbGVtZW50KSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIE9iamVjdC5hc3NpZ24oZWxlbWVudC5zdHlsZSwgc3R5bGUpO1xuICAgICAgT2JqZWN0LmtleXMoYXR0cmlidXRlcykuZm9yRWFjaChmdW5jdGlvbiAoYXR0cmlidXRlKSB7XG4gICAgICAgIGVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKGF0dHJpYnV0ZSk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfTtcbn0gLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGltcG9ydC9uby11bnVzZWQtbW9kdWxlc1xuXG5cbmV4cG9ydCBkZWZhdWx0IHtcbiAgbmFtZTogJ2FwcGx5U3R5bGVzJyxcbiAgZW5hYmxlZDogdHJ1ZSxcbiAgcGhhc2U6ICd3cml0ZScsXG4gIGZuOiBhcHBseVN0eWxlcyxcbiAgZWZmZWN0OiBlZmZlY3QsXG4gIHJlcXVpcmVzOiBbJ2NvbXB1dGVTdHlsZXMnXVxufTsiLCAiaW1wb3J0IHsgYXV0byB9IGZyb20gXCIuLi9lbnVtcy5qc1wiO1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gZ2V0QmFzZVBsYWNlbWVudChwbGFjZW1lbnQpIHtcbiAgcmV0dXJuIHBsYWNlbWVudC5zcGxpdCgnLScpWzBdO1xufSIsICJleHBvcnQgdmFyIG1heCA9IE1hdGgubWF4O1xuZXhwb3J0IHZhciBtaW4gPSBNYXRoLm1pbjtcbmV4cG9ydCB2YXIgcm91bmQgPSBNYXRoLnJvdW5kOyIsICJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBnZXRVQVN0cmluZygpIHtcbiAgdmFyIHVhRGF0YSA9IG5hdmlnYXRvci51c2VyQWdlbnREYXRhO1xuXG4gIGlmICh1YURhdGEgIT0gbnVsbCAmJiB1YURhdGEuYnJhbmRzICYmIEFycmF5LmlzQXJyYXkodWFEYXRhLmJyYW5kcykpIHtcbiAgICByZXR1cm4gdWFEYXRhLmJyYW5kcy5tYXAoZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICAgIHJldHVybiBpdGVtLmJyYW5kICsgXCIvXCIgKyBpdGVtLnZlcnNpb247XG4gICAgfSkuam9pbignICcpO1xuICB9XG5cbiAgcmV0dXJuIG5hdmlnYXRvci51c2VyQWdlbnQ7XG59IiwgImltcG9ydCBnZXRVQVN0cmluZyBmcm9tIFwiLi4vdXRpbHMvdXNlckFnZW50LmpzXCI7XG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBpc0xheW91dFZpZXdwb3J0KCkge1xuICByZXR1cm4gIS9eKCg/IWNocm9tZXxhbmRyb2lkKS4pKnNhZmFyaS9pLnRlc3QoZ2V0VUFTdHJpbmcoKSk7XG59IiwgImltcG9ydCB7IGlzRWxlbWVudCwgaXNIVE1MRWxlbWVudCB9IGZyb20gXCIuL2luc3RhbmNlT2YuanNcIjtcbmltcG9ydCB7IHJvdW5kIH0gZnJvbSBcIi4uL3V0aWxzL21hdGguanNcIjtcbmltcG9ydCBnZXRXaW5kb3cgZnJvbSBcIi4vZ2V0V2luZG93LmpzXCI7XG5pbXBvcnQgaXNMYXlvdXRWaWV3cG9ydCBmcm9tIFwiLi9pc0xheW91dFZpZXdwb3J0LmpzXCI7XG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBnZXRCb3VuZGluZ0NsaWVudFJlY3QoZWxlbWVudCwgaW5jbHVkZVNjYWxlLCBpc0ZpeGVkU3RyYXRlZ3kpIHtcbiAgaWYgKGluY2x1ZGVTY2FsZSA9PT0gdm9pZCAwKSB7XG4gICAgaW5jbHVkZVNjYWxlID0gZmFsc2U7XG4gIH1cblxuICBpZiAoaXNGaXhlZFN0cmF0ZWd5ID09PSB2b2lkIDApIHtcbiAgICBpc0ZpeGVkU3RyYXRlZ3kgPSBmYWxzZTtcbiAgfVxuXG4gIHZhciBjbGllbnRSZWN0ID0gZWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgdmFyIHNjYWxlWCA9IDE7XG4gIHZhciBzY2FsZVkgPSAxO1xuXG4gIGlmIChpbmNsdWRlU2NhbGUgJiYgaXNIVE1MRWxlbWVudChlbGVtZW50KSkge1xuICAgIHNjYWxlWCA9IGVsZW1lbnQub2Zmc2V0V2lkdGggPiAwID8gcm91bmQoY2xpZW50UmVjdC53aWR0aCkgLyBlbGVtZW50Lm9mZnNldFdpZHRoIHx8IDEgOiAxO1xuICAgIHNjYWxlWSA9IGVsZW1lbnQub2Zmc2V0SGVpZ2h0ID4gMCA/IHJvdW5kKGNsaWVudFJlY3QuaGVpZ2h0KSAvIGVsZW1lbnQub2Zmc2V0SGVpZ2h0IHx8IDEgOiAxO1xuICB9XG5cbiAgdmFyIF9yZWYgPSBpc0VsZW1lbnQoZWxlbWVudCkgPyBnZXRXaW5kb3coZWxlbWVudCkgOiB3aW5kb3csXG4gICAgICB2aXN1YWxWaWV3cG9ydCA9IF9yZWYudmlzdWFsVmlld3BvcnQ7XG5cbiAgdmFyIGFkZFZpc3VhbE9mZnNldHMgPSAhaXNMYXlvdXRWaWV3cG9ydCgpICYmIGlzRml4ZWRTdHJhdGVneTtcbiAgdmFyIHggPSAoY2xpZW50UmVjdC5sZWZ0ICsgKGFkZFZpc3VhbE9mZnNldHMgJiYgdmlzdWFsVmlld3BvcnQgPyB2aXN1YWxWaWV3cG9ydC5vZmZzZXRMZWZ0IDogMCkpIC8gc2NhbGVYO1xuICB2YXIgeSA9IChjbGllbnRSZWN0LnRvcCArIChhZGRWaXN1YWxPZmZzZXRzICYmIHZpc3VhbFZpZXdwb3J0ID8gdmlzdWFsVmlld3BvcnQub2Zmc2V0VG9wIDogMCkpIC8gc2NhbGVZO1xuICB2YXIgd2lkdGggPSBjbGllbnRSZWN0LndpZHRoIC8gc2NhbGVYO1xuICB2YXIgaGVpZ2h0ID0gY2xpZW50UmVjdC5oZWlnaHQgLyBzY2FsZVk7XG4gIHJldHVybiB7XG4gICAgd2lkdGg6IHdpZHRoLFxuICAgIGhlaWdodDogaGVpZ2h0LFxuICAgIHRvcDogeSxcbiAgICByaWdodDogeCArIHdpZHRoLFxuICAgIGJvdHRvbTogeSArIGhlaWdodCxcbiAgICBsZWZ0OiB4LFxuICAgIHg6IHgsXG4gICAgeTogeVxuICB9O1xufSIsICJpbXBvcnQgZ2V0Qm91bmRpbmdDbGllbnRSZWN0IGZyb20gXCIuL2dldEJvdW5kaW5nQ2xpZW50UmVjdC5qc1wiOyAvLyBSZXR1cm5zIHRoZSBsYXlvdXQgcmVjdCBvZiBhbiBlbGVtZW50IHJlbGF0aXZlIHRvIGl0cyBvZmZzZXRQYXJlbnQuIExheW91dFxuLy8gbWVhbnMgaXQgZG9lc24ndCB0YWtlIGludG8gYWNjb3VudCB0cmFuc2Zvcm1zLlxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBnZXRMYXlvdXRSZWN0KGVsZW1lbnQpIHtcbiAgdmFyIGNsaWVudFJlY3QgPSBnZXRCb3VuZGluZ0NsaWVudFJlY3QoZWxlbWVudCk7IC8vIFVzZSB0aGUgY2xpZW50UmVjdCBzaXplcyBpZiBpdCdzIG5vdCBiZWVuIHRyYW5zZm9ybWVkLlxuICAvLyBGaXhlcyBodHRwczovL2dpdGh1Yi5jb20vcG9wcGVyanMvcG9wcGVyLWNvcmUvaXNzdWVzLzEyMjNcblxuICB2YXIgd2lkdGggPSBlbGVtZW50Lm9mZnNldFdpZHRoO1xuICB2YXIgaGVpZ2h0ID0gZWxlbWVudC5vZmZzZXRIZWlnaHQ7XG5cbiAgaWYgKE1hdGguYWJzKGNsaWVudFJlY3Qud2lkdGggLSB3aWR0aCkgPD0gMSkge1xuICAgIHdpZHRoID0gY2xpZW50UmVjdC53aWR0aDtcbiAgfVxuXG4gIGlmIChNYXRoLmFicyhjbGllbnRSZWN0LmhlaWdodCAtIGhlaWdodCkgPD0gMSkge1xuICAgIGhlaWdodCA9IGNsaWVudFJlY3QuaGVpZ2h0O1xuICB9XG5cbiAgcmV0dXJuIHtcbiAgICB4OiBlbGVtZW50Lm9mZnNldExlZnQsXG4gICAgeTogZWxlbWVudC5vZmZzZXRUb3AsXG4gICAgd2lkdGg6IHdpZHRoLFxuICAgIGhlaWdodDogaGVpZ2h0XG4gIH07XG59IiwgImltcG9ydCB7IGlzU2hhZG93Um9vdCB9IGZyb20gXCIuL2luc3RhbmNlT2YuanNcIjtcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGNvbnRhaW5zKHBhcmVudCwgY2hpbGQpIHtcbiAgdmFyIHJvb3ROb2RlID0gY2hpbGQuZ2V0Um9vdE5vZGUgJiYgY2hpbGQuZ2V0Um9vdE5vZGUoKTsgLy8gRmlyc3QsIGF0dGVtcHQgd2l0aCBmYXN0ZXIgbmF0aXZlIG1ldGhvZFxuXG4gIGlmIChwYXJlbnQuY29udGFpbnMoY2hpbGQpKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH0gLy8gdGhlbiBmYWxsYmFjayB0byBjdXN0b20gaW1wbGVtZW50YXRpb24gd2l0aCBTaGFkb3cgRE9NIHN1cHBvcnRcbiAgZWxzZSBpZiAocm9vdE5vZGUgJiYgaXNTaGFkb3dSb290KHJvb3ROb2RlKSkge1xuICAgICAgdmFyIG5leHQgPSBjaGlsZDtcblxuICAgICAgZG8ge1xuICAgICAgICBpZiAobmV4dCAmJiBwYXJlbnQuaXNTYW1lTm9kZShuZXh0KSkge1xuICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9IC8vICRGbG93Rml4TWVbcHJvcC1taXNzaW5nXTogbmVlZCBhIGJldHRlciB3YXkgdG8gaGFuZGxlIHRoaXMuLi5cblxuXG4gICAgICAgIG5leHQgPSBuZXh0LnBhcmVudE5vZGUgfHwgbmV4dC5ob3N0O1xuICAgICAgfSB3aGlsZSAobmV4dCk7XG4gICAgfSAvLyBHaXZlIHVwLCB0aGUgcmVzdWx0IGlzIGZhbHNlXG5cblxuICByZXR1cm4gZmFsc2U7XG59IiwgImltcG9ydCBnZXRXaW5kb3cgZnJvbSBcIi4vZ2V0V2luZG93LmpzXCI7XG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBnZXRDb21wdXRlZFN0eWxlKGVsZW1lbnQpIHtcbiAgcmV0dXJuIGdldFdpbmRvdyhlbGVtZW50KS5nZXRDb21wdXRlZFN0eWxlKGVsZW1lbnQpO1xufSIsICJpbXBvcnQgZ2V0Tm9kZU5hbWUgZnJvbSBcIi4vZ2V0Tm9kZU5hbWUuanNcIjtcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGlzVGFibGVFbGVtZW50KGVsZW1lbnQpIHtcbiAgcmV0dXJuIFsndGFibGUnLCAndGQnLCAndGgnXS5pbmRleE9mKGdldE5vZGVOYW1lKGVsZW1lbnQpKSA+PSAwO1xufSIsICJpbXBvcnQgeyBpc0VsZW1lbnQgfSBmcm9tIFwiLi9pbnN0YW5jZU9mLmpzXCI7XG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBnZXREb2N1bWVudEVsZW1lbnQoZWxlbWVudCkge1xuICAvLyAkRmxvd0ZpeE1lW2luY29tcGF0aWJsZS1yZXR1cm5dOiBhc3N1bWUgYm9keSBpcyBhbHdheXMgYXZhaWxhYmxlXG4gIHJldHVybiAoKGlzRWxlbWVudChlbGVtZW50KSA/IGVsZW1lbnQub3duZXJEb2N1bWVudCA6IC8vICRGbG93Rml4TWVbcHJvcC1taXNzaW5nXVxuICBlbGVtZW50LmRvY3VtZW50KSB8fCB3aW5kb3cuZG9jdW1lbnQpLmRvY3VtZW50RWxlbWVudDtcbn0iLCAiaW1wb3J0IGdldE5vZGVOYW1lIGZyb20gXCIuL2dldE5vZGVOYW1lLmpzXCI7XG5pbXBvcnQgZ2V0RG9jdW1lbnRFbGVtZW50IGZyb20gXCIuL2dldERvY3VtZW50RWxlbWVudC5qc1wiO1xuaW1wb3J0IHsgaXNTaGFkb3dSb290IH0gZnJvbSBcIi4vaW5zdGFuY2VPZi5qc1wiO1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gZ2V0UGFyZW50Tm9kZShlbGVtZW50KSB7XG4gIGlmIChnZXROb2RlTmFtZShlbGVtZW50KSA9PT0gJ2h0bWwnKSB7XG4gICAgcmV0dXJuIGVsZW1lbnQ7XG4gIH1cblxuICByZXR1cm4gKC8vIHRoaXMgaXMgYSBxdWlja2VyIChidXQgbGVzcyB0eXBlIHNhZmUpIHdheSB0byBzYXZlIHF1aXRlIHNvbWUgYnl0ZXMgZnJvbSB0aGUgYnVuZGxlXG4gICAgLy8gJEZsb3dGaXhNZVtpbmNvbXBhdGlibGUtcmV0dXJuXVxuICAgIC8vICRGbG93Rml4TWVbcHJvcC1taXNzaW5nXVxuICAgIGVsZW1lbnQuYXNzaWduZWRTbG90IHx8IC8vIHN0ZXAgaW50byB0aGUgc2hhZG93IERPTSBvZiB0aGUgcGFyZW50IG9mIGEgc2xvdHRlZCBub2RlXG4gICAgZWxlbWVudC5wYXJlbnROb2RlIHx8ICggLy8gRE9NIEVsZW1lbnQgZGV0ZWN0ZWRcbiAgICBpc1NoYWRvd1Jvb3QoZWxlbWVudCkgPyBlbGVtZW50Lmhvc3QgOiBudWxsKSB8fCAvLyBTaGFkb3dSb290IGRldGVjdGVkXG4gICAgLy8gJEZsb3dGaXhNZVtpbmNvbXBhdGlibGUtY2FsbF06IEhUTUxFbGVtZW50IGlzIGEgTm9kZVxuICAgIGdldERvY3VtZW50RWxlbWVudChlbGVtZW50KSAvLyBmYWxsYmFja1xuXG4gICk7XG59IiwgImltcG9ydCBnZXRXaW5kb3cgZnJvbSBcIi4vZ2V0V2luZG93LmpzXCI7XG5pbXBvcnQgZ2V0Tm9kZU5hbWUgZnJvbSBcIi4vZ2V0Tm9kZU5hbWUuanNcIjtcbmltcG9ydCBnZXRDb21wdXRlZFN0eWxlIGZyb20gXCIuL2dldENvbXB1dGVkU3R5bGUuanNcIjtcbmltcG9ydCB7IGlzSFRNTEVsZW1lbnQsIGlzU2hhZG93Um9vdCB9IGZyb20gXCIuL2luc3RhbmNlT2YuanNcIjtcbmltcG9ydCBpc1RhYmxlRWxlbWVudCBmcm9tIFwiLi9pc1RhYmxlRWxlbWVudC5qc1wiO1xuaW1wb3J0IGdldFBhcmVudE5vZGUgZnJvbSBcIi4vZ2V0UGFyZW50Tm9kZS5qc1wiO1xuaW1wb3J0IGdldFVBU3RyaW5nIGZyb20gXCIuLi91dGlscy91c2VyQWdlbnQuanNcIjtcblxuZnVuY3Rpb24gZ2V0VHJ1ZU9mZnNldFBhcmVudChlbGVtZW50KSB7XG4gIGlmICghaXNIVE1MRWxlbWVudChlbGVtZW50KSB8fCAvLyBodHRwczovL2dpdGh1Yi5jb20vcG9wcGVyanMvcG9wcGVyLWNvcmUvaXNzdWVzLzgzN1xuICBnZXRDb21wdXRlZFN0eWxlKGVsZW1lbnQpLnBvc2l0aW9uID09PSAnZml4ZWQnKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICByZXR1cm4gZWxlbWVudC5vZmZzZXRQYXJlbnQ7XG59IC8vIGAub2Zmc2V0UGFyZW50YCByZXBvcnRzIGBudWxsYCBmb3IgZml4ZWQgZWxlbWVudHMsIHdoaWxlIGFic29sdXRlIGVsZW1lbnRzXG4vLyByZXR1cm4gdGhlIGNvbnRhaW5pbmcgYmxvY2tcblxuXG5mdW5jdGlvbiBnZXRDb250YWluaW5nQmxvY2soZWxlbWVudCkge1xuICB2YXIgaXNGaXJlZm94ID0gL2ZpcmVmb3gvaS50ZXN0KGdldFVBU3RyaW5nKCkpO1xuICB2YXIgaXNJRSA9IC9UcmlkZW50L2kudGVzdChnZXRVQVN0cmluZygpKTtcblxuICBpZiAoaXNJRSAmJiBpc0hUTUxFbGVtZW50KGVsZW1lbnQpKSB7XG4gICAgLy8gSW4gSUUgOSwgMTAgYW5kIDExIGZpeGVkIGVsZW1lbnRzIGNvbnRhaW5pbmcgYmxvY2sgaXMgYWx3YXlzIGVzdGFibGlzaGVkIGJ5IHRoZSB2aWV3cG9ydFxuICAgIHZhciBlbGVtZW50Q3NzID0gZ2V0Q29tcHV0ZWRTdHlsZShlbGVtZW50KTtcblxuICAgIGlmIChlbGVtZW50Q3NzLnBvc2l0aW9uID09PSAnZml4ZWQnKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gIH1cblxuICB2YXIgY3VycmVudE5vZGUgPSBnZXRQYXJlbnROb2RlKGVsZW1lbnQpO1xuXG4gIGlmIChpc1NoYWRvd1Jvb3QoY3VycmVudE5vZGUpKSB7XG4gICAgY3VycmVudE5vZGUgPSBjdXJyZW50Tm9kZS5ob3N0O1xuICB9XG5cbiAgd2hpbGUgKGlzSFRNTEVsZW1lbnQoY3VycmVudE5vZGUpICYmIFsnaHRtbCcsICdib2R5J10uaW5kZXhPZihnZXROb2RlTmFtZShjdXJyZW50Tm9kZSkpIDwgMCkge1xuICAgIHZhciBjc3MgPSBnZXRDb21wdXRlZFN0eWxlKGN1cnJlbnROb2RlKTsgLy8gVGhpcyBpcyBub24tZXhoYXVzdGl2ZSBidXQgY292ZXJzIHRoZSBtb3N0IGNvbW1vbiBDU1MgcHJvcGVydGllcyB0aGF0XG4gICAgLy8gY3JlYXRlIGEgY29udGFpbmluZyBibG9jay5cbiAgICAvLyBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9DU1MvQ29udGFpbmluZ19ibG9jayNpZGVudGlmeWluZ190aGVfY29udGFpbmluZ19ibG9ja1xuXG4gICAgaWYgKGNzcy50cmFuc2Zvcm0gIT09ICdub25lJyB8fCBjc3MucGVyc3BlY3RpdmUgIT09ICdub25lJyB8fCBjc3MuY29udGFpbiA9PT0gJ3BhaW50JyB8fCBbJ3RyYW5zZm9ybScsICdwZXJzcGVjdGl2ZSddLmluZGV4T2YoY3NzLndpbGxDaGFuZ2UpICE9PSAtMSB8fCBpc0ZpcmVmb3ggJiYgY3NzLndpbGxDaGFuZ2UgPT09ICdmaWx0ZXInIHx8IGlzRmlyZWZveCAmJiBjc3MuZmlsdGVyICYmIGNzcy5maWx0ZXIgIT09ICdub25lJykge1xuICAgICAgcmV0dXJuIGN1cnJlbnROb2RlO1xuICAgIH0gZWxzZSB7XG4gICAgICBjdXJyZW50Tm9kZSA9IGN1cnJlbnROb2RlLnBhcmVudE5vZGU7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIG51bGw7XG59IC8vIEdldHMgdGhlIGNsb3Nlc3QgYW5jZXN0b3IgcG9zaXRpb25lZCBlbGVtZW50LiBIYW5kbGVzIHNvbWUgZWRnZSBjYXNlcyxcbi8vIHN1Y2ggYXMgdGFibGUgYW5jZXN0b3JzIGFuZCBjcm9zcyBicm93c2VyIGJ1Z3MuXG5cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gZ2V0T2Zmc2V0UGFyZW50KGVsZW1lbnQpIHtcbiAgdmFyIHdpbmRvdyA9IGdldFdpbmRvdyhlbGVtZW50KTtcbiAgdmFyIG9mZnNldFBhcmVudCA9IGdldFRydWVPZmZzZXRQYXJlbnQoZWxlbWVudCk7XG5cbiAgd2hpbGUgKG9mZnNldFBhcmVudCAmJiBpc1RhYmxlRWxlbWVudChvZmZzZXRQYXJlbnQpICYmIGdldENvbXB1dGVkU3R5bGUob2Zmc2V0UGFyZW50KS5wb3NpdGlvbiA9PT0gJ3N0YXRpYycpIHtcbiAgICBvZmZzZXRQYXJlbnQgPSBnZXRUcnVlT2Zmc2V0UGFyZW50KG9mZnNldFBhcmVudCk7XG4gIH1cblxuICBpZiAob2Zmc2V0UGFyZW50ICYmIChnZXROb2RlTmFtZShvZmZzZXRQYXJlbnQpID09PSAnaHRtbCcgfHwgZ2V0Tm9kZU5hbWUob2Zmc2V0UGFyZW50KSA9PT0gJ2JvZHknICYmIGdldENvbXB1dGVkU3R5bGUob2Zmc2V0UGFyZW50KS5wb3NpdGlvbiA9PT0gJ3N0YXRpYycpKSB7XG4gICAgcmV0dXJuIHdpbmRvdztcbiAgfVxuXG4gIHJldHVybiBvZmZzZXRQYXJlbnQgfHwgZ2V0Q29udGFpbmluZ0Jsb2NrKGVsZW1lbnQpIHx8IHdpbmRvdztcbn0iLCAiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gZ2V0TWFpbkF4aXNGcm9tUGxhY2VtZW50KHBsYWNlbWVudCkge1xuICByZXR1cm4gWyd0b3AnLCAnYm90dG9tJ10uaW5kZXhPZihwbGFjZW1lbnQpID49IDAgPyAneCcgOiAneSc7XG59IiwgImltcG9ydCB7IG1heCBhcyBtYXRoTWF4LCBtaW4gYXMgbWF0aE1pbiB9IGZyb20gXCIuL21hdGguanNcIjtcbmV4cG9ydCBmdW5jdGlvbiB3aXRoaW4obWluLCB2YWx1ZSwgbWF4KSB7XG4gIHJldHVybiBtYXRoTWF4KG1pbiwgbWF0aE1pbih2YWx1ZSwgbWF4KSk7XG59XG5leHBvcnQgZnVuY3Rpb24gd2l0aGluTWF4Q2xhbXAobWluLCB2YWx1ZSwgbWF4KSB7XG4gIHZhciB2ID0gd2l0aGluKG1pbiwgdmFsdWUsIG1heCk7XG4gIHJldHVybiB2ID4gbWF4ID8gbWF4IDogdjtcbn0iLCAiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gZ2V0RnJlc2hTaWRlT2JqZWN0KCkge1xuICByZXR1cm4ge1xuICAgIHRvcDogMCxcbiAgICByaWdodDogMCxcbiAgICBib3R0b206IDAsXG4gICAgbGVmdDogMFxuICB9O1xufSIsICJpbXBvcnQgZ2V0RnJlc2hTaWRlT2JqZWN0IGZyb20gXCIuL2dldEZyZXNoU2lkZU9iamVjdC5qc1wiO1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gbWVyZ2VQYWRkaW5nT2JqZWN0KHBhZGRpbmdPYmplY3QpIHtcbiAgcmV0dXJuIE9iamVjdC5hc3NpZ24oe30sIGdldEZyZXNoU2lkZU9iamVjdCgpLCBwYWRkaW5nT2JqZWN0KTtcbn0iLCAiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gZXhwYW5kVG9IYXNoTWFwKHZhbHVlLCBrZXlzKSB7XG4gIHJldHVybiBrZXlzLnJlZHVjZShmdW5jdGlvbiAoaGFzaE1hcCwga2V5KSB7XG4gICAgaGFzaE1hcFtrZXldID0gdmFsdWU7XG4gICAgcmV0dXJuIGhhc2hNYXA7XG4gIH0sIHt9KTtcbn0iLCAiaW1wb3J0IGdldEJhc2VQbGFjZW1lbnQgZnJvbSBcIi4uL3V0aWxzL2dldEJhc2VQbGFjZW1lbnQuanNcIjtcbmltcG9ydCBnZXRMYXlvdXRSZWN0IGZyb20gXCIuLi9kb20tdXRpbHMvZ2V0TGF5b3V0UmVjdC5qc1wiO1xuaW1wb3J0IGNvbnRhaW5zIGZyb20gXCIuLi9kb20tdXRpbHMvY29udGFpbnMuanNcIjtcbmltcG9ydCBnZXRPZmZzZXRQYXJlbnQgZnJvbSBcIi4uL2RvbS11dGlscy9nZXRPZmZzZXRQYXJlbnQuanNcIjtcbmltcG9ydCBnZXRNYWluQXhpc0Zyb21QbGFjZW1lbnQgZnJvbSBcIi4uL3V0aWxzL2dldE1haW5BeGlzRnJvbVBsYWNlbWVudC5qc1wiO1xuaW1wb3J0IHsgd2l0aGluIH0gZnJvbSBcIi4uL3V0aWxzL3dpdGhpbi5qc1wiO1xuaW1wb3J0IG1lcmdlUGFkZGluZ09iamVjdCBmcm9tIFwiLi4vdXRpbHMvbWVyZ2VQYWRkaW5nT2JqZWN0LmpzXCI7XG5pbXBvcnQgZXhwYW5kVG9IYXNoTWFwIGZyb20gXCIuLi91dGlscy9leHBhbmRUb0hhc2hNYXAuanNcIjtcbmltcG9ydCB7IGxlZnQsIHJpZ2h0LCBiYXNlUGxhY2VtZW50cywgdG9wLCBib3R0b20gfSBmcm9tIFwiLi4vZW51bXMuanNcIjsgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGltcG9ydC9uby11bnVzZWQtbW9kdWxlc1xuXG52YXIgdG9QYWRkaW5nT2JqZWN0ID0gZnVuY3Rpb24gdG9QYWRkaW5nT2JqZWN0KHBhZGRpbmcsIHN0YXRlKSB7XG4gIHBhZGRpbmcgPSB0eXBlb2YgcGFkZGluZyA9PT0gJ2Z1bmN0aW9uJyA/IHBhZGRpbmcoT2JqZWN0LmFzc2lnbih7fSwgc3RhdGUucmVjdHMsIHtcbiAgICBwbGFjZW1lbnQ6IHN0YXRlLnBsYWNlbWVudFxuICB9KSkgOiBwYWRkaW5nO1xuICByZXR1cm4gbWVyZ2VQYWRkaW5nT2JqZWN0KHR5cGVvZiBwYWRkaW5nICE9PSAnbnVtYmVyJyA/IHBhZGRpbmcgOiBleHBhbmRUb0hhc2hNYXAocGFkZGluZywgYmFzZVBsYWNlbWVudHMpKTtcbn07XG5cbmZ1bmN0aW9uIGFycm93KF9yZWYpIHtcbiAgdmFyIF9zdGF0ZSRtb2RpZmllcnNEYXRhJDtcblxuICB2YXIgc3RhdGUgPSBfcmVmLnN0YXRlLFxuICAgICAgbmFtZSA9IF9yZWYubmFtZSxcbiAgICAgIG9wdGlvbnMgPSBfcmVmLm9wdGlvbnM7XG4gIHZhciBhcnJvd0VsZW1lbnQgPSBzdGF0ZS5lbGVtZW50cy5hcnJvdztcbiAgdmFyIHBvcHBlck9mZnNldHMgPSBzdGF0ZS5tb2RpZmllcnNEYXRhLnBvcHBlck9mZnNldHM7XG4gIHZhciBiYXNlUGxhY2VtZW50ID0gZ2V0QmFzZVBsYWNlbWVudChzdGF0ZS5wbGFjZW1lbnQpO1xuICB2YXIgYXhpcyA9IGdldE1haW5BeGlzRnJvbVBsYWNlbWVudChiYXNlUGxhY2VtZW50KTtcbiAgdmFyIGlzVmVydGljYWwgPSBbbGVmdCwgcmlnaHRdLmluZGV4T2YoYmFzZVBsYWNlbWVudCkgPj0gMDtcbiAgdmFyIGxlbiA9IGlzVmVydGljYWwgPyAnaGVpZ2h0JyA6ICd3aWR0aCc7XG5cbiAgaWYgKCFhcnJvd0VsZW1lbnQgfHwgIXBvcHBlck9mZnNldHMpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICB2YXIgcGFkZGluZ09iamVjdCA9IHRvUGFkZGluZ09iamVjdChvcHRpb25zLnBhZGRpbmcsIHN0YXRlKTtcbiAgdmFyIGFycm93UmVjdCA9IGdldExheW91dFJlY3QoYXJyb3dFbGVtZW50KTtcbiAgdmFyIG1pblByb3AgPSBheGlzID09PSAneScgPyB0b3AgOiBsZWZ0O1xuICB2YXIgbWF4UHJvcCA9IGF4aXMgPT09ICd5JyA/IGJvdHRvbSA6IHJpZ2h0O1xuICB2YXIgZW5kRGlmZiA9IHN0YXRlLnJlY3RzLnJlZmVyZW5jZVtsZW5dICsgc3RhdGUucmVjdHMucmVmZXJlbmNlW2F4aXNdIC0gcG9wcGVyT2Zmc2V0c1theGlzXSAtIHN0YXRlLnJlY3RzLnBvcHBlcltsZW5dO1xuICB2YXIgc3RhcnREaWZmID0gcG9wcGVyT2Zmc2V0c1theGlzXSAtIHN0YXRlLnJlY3RzLnJlZmVyZW5jZVtheGlzXTtcbiAgdmFyIGFycm93T2Zmc2V0UGFyZW50ID0gZ2V0T2Zmc2V0UGFyZW50KGFycm93RWxlbWVudCk7XG4gIHZhciBjbGllbnRTaXplID0gYXJyb3dPZmZzZXRQYXJlbnQgPyBheGlzID09PSAneScgPyBhcnJvd09mZnNldFBhcmVudC5jbGllbnRIZWlnaHQgfHwgMCA6IGFycm93T2Zmc2V0UGFyZW50LmNsaWVudFdpZHRoIHx8IDAgOiAwO1xuICB2YXIgY2VudGVyVG9SZWZlcmVuY2UgPSBlbmREaWZmIC8gMiAtIHN0YXJ0RGlmZiAvIDI7IC8vIE1ha2Ugc3VyZSB0aGUgYXJyb3cgZG9lc24ndCBvdmVyZmxvdyB0aGUgcG9wcGVyIGlmIHRoZSBjZW50ZXIgcG9pbnQgaXNcbiAgLy8gb3V0c2lkZSBvZiB0aGUgcG9wcGVyIGJvdW5kc1xuXG4gIHZhciBtaW4gPSBwYWRkaW5nT2JqZWN0W21pblByb3BdO1xuICB2YXIgbWF4ID0gY2xpZW50U2l6ZSAtIGFycm93UmVjdFtsZW5dIC0gcGFkZGluZ09iamVjdFttYXhQcm9wXTtcbiAgdmFyIGNlbnRlciA9IGNsaWVudFNpemUgLyAyIC0gYXJyb3dSZWN0W2xlbl0gLyAyICsgY2VudGVyVG9SZWZlcmVuY2U7XG4gIHZhciBvZmZzZXQgPSB3aXRoaW4obWluLCBjZW50ZXIsIG1heCk7IC8vIFByZXZlbnRzIGJyZWFraW5nIHN5bnRheCBoaWdobGlnaHRpbmcuLi5cblxuICB2YXIgYXhpc1Byb3AgPSBheGlzO1xuICBzdGF0ZS5tb2RpZmllcnNEYXRhW25hbWVdID0gKF9zdGF0ZSRtb2RpZmllcnNEYXRhJCA9IHt9LCBfc3RhdGUkbW9kaWZpZXJzRGF0YSRbYXhpc1Byb3BdID0gb2Zmc2V0LCBfc3RhdGUkbW9kaWZpZXJzRGF0YSQuY2VudGVyT2Zmc2V0ID0gb2Zmc2V0IC0gY2VudGVyLCBfc3RhdGUkbW9kaWZpZXJzRGF0YSQpO1xufVxuXG5mdW5jdGlvbiBlZmZlY3QoX3JlZjIpIHtcbiAgdmFyIHN0YXRlID0gX3JlZjIuc3RhdGUsXG4gICAgICBvcHRpb25zID0gX3JlZjIub3B0aW9ucztcbiAgdmFyIF9vcHRpb25zJGVsZW1lbnQgPSBvcHRpb25zLmVsZW1lbnQsXG4gICAgICBhcnJvd0VsZW1lbnQgPSBfb3B0aW9ucyRlbGVtZW50ID09PSB2b2lkIDAgPyAnW2RhdGEtcG9wcGVyLWFycm93XScgOiBfb3B0aW9ucyRlbGVtZW50O1xuXG4gIGlmIChhcnJvd0VsZW1lbnQgPT0gbnVsbCkge1xuICAgIHJldHVybjtcbiAgfSAvLyBDU1Mgc2VsZWN0b3JcblxuXG4gIGlmICh0eXBlb2YgYXJyb3dFbGVtZW50ID09PSAnc3RyaW5nJykge1xuICAgIGFycm93RWxlbWVudCA9IHN0YXRlLmVsZW1lbnRzLnBvcHBlci5xdWVyeVNlbGVjdG9yKGFycm93RWxlbWVudCk7XG5cbiAgICBpZiAoIWFycm93RWxlbWVudCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgfVxuXG4gIGlmICghY29udGFpbnMoc3RhdGUuZWxlbWVudHMucG9wcGVyLCBhcnJvd0VsZW1lbnQpKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgc3RhdGUuZWxlbWVudHMuYXJyb3cgPSBhcnJvd0VsZW1lbnQ7XG59IC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBpbXBvcnQvbm8tdW51c2VkLW1vZHVsZXNcblxuXG5leHBvcnQgZGVmYXVsdCB7XG4gIG5hbWU6ICdhcnJvdycsXG4gIGVuYWJsZWQ6IHRydWUsXG4gIHBoYXNlOiAnbWFpbicsXG4gIGZuOiBhcnJvdyxcbiAgZWZmZWN0OiBlZmZlY3QsXG4gIHJlcXVpcmVzOiBbJ3BvcHBlck9mZnNldHMnXSxcbiAgcmVxdWlyZXNJZkV4aXN0czogWydwcmV2ZW50T3ZlcmZsb3cnXVxufTsiLCAiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gZ2V0VmFyaWF0aW9uKHBsYWNlbWVudCkge1xuICByZXR1cm4gcGxhY2VtZW50LnNwbGl0KCctJylbMV07XG59IiwgImltcG9ydCB7IHRvcCwgbGVmdCwgcmlnaHQsIGJvdHRvbSwgZW5kIH0gZnJvbSBcIi4uL2VudW1zLmpzXCI7XG5pbXBvcnQgZ2V0T2Zmc2V0UGFyZW50IGZyb20gXCIuLi9kb20tdXRpbHMvZ2V0T2Zmc2V0UGFyZW50LmpzXCI7XG5pbXBvcnQgZ2V0V2luZG93IGZyb20gXCIuLi9kb20tdXRpbHMvZ2V0V2luZG93LmpzXCI7XG5pbXBvcnQgZ2V0RG9jdW1lbnRFbGVtZW50IGZyb20gXCIuLi9kb20tdXRpbHMvZ2V0RG9jdW1lbnRFbGVtZW50LmpzXCI7XG5pbXBvcnQgZ2V0Q29tcHV0ZWRTdHlsZSBmcm9tIFwiLi4vZG9tLXV0aWxzL2dldENvbXB1dGVkU3R5bGUuanNcIjtcbmltcG9ydCBnZXRCYXNlUGxhY2VtZW50IGZyb20gXCIuLi91dGlscy9nZXRCYXNlUGxhY2VtZW50LmpzXCI7XG5pbXBvcnQgZ2V0VmFyaWF0aW9uIGZyb20gXCIuLi91dGlscy9nZXRWYXJpYXRpb24uanNcIjtcbmltcG9ydCB7IHJvdW5kIH0gZnJvbSBcIi4uL3V0aWxzL21hdGguanNcIjsgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGltcG9ydC9uby11bnVzZWQtbW9kdWxlc1xuXG52YXIgdW5zZXRTaWRlcyA9IHtcbiAgdG9wOiAnYXV0bycsXG4gIHJpZ2h0OiAnYXV0bycsXG4gIGJvdHRvbTogJ2F1dG8nLFxuICBsZWZ0OiAnYXV0bydcbn07IC8vIFJvdW5kIHRoZSBvZmZzZXRzIHRvIHRoZSBuZWFyZXN0IHN1aXRhYmxlIHN1YnBpeGVsIGJhc2VkIG9uIHRoZSBEUFIuXG4vLyBab29taW5nIGNhbiBjaGFuZ2UgdGhlIERQUiwgYnV0IGl0IHNlZW1zIHRvIHJlcG9ydCBhIHZhbHVlIHRoYXQgd2lsbFxuLy8gY2xlYW5seSBkaXZpZGUgdGhlIHZhbHVlcyBpbnRvIHRoZSBhcHByb3ByaWF0ZSBzdWJwaXhlbHMuXG5cbmZ1bmN0aW9uIHJvdW5kT2Zmc2V0c0J5RFBSKF9yZWYsIHdpbikge1xuICB2YXIgeCA9IF9yZWYueCxcbiAgICAgIHkgPSBfcmVmLnk7XG4gIHZhciBkcHIgPSB3aW4uZGV2aWNlUGl4ZWxSYXRpbyB8fCAxO1xuICByZXR1cm4ge1xuICAgIHg6IHJvdW5kKHggKiBkcHIpIC8gZHByIHx8IDAsXG4gICAgeTogcm91bmQoeSAqIGRwcikgLyBkcHIgfHwgMFxuICB9O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gbWFwVG9TdHlsZXMoX3JlZjIpIHtcbiAgdmFyIF9PYmplY3QkYXNzaWduMjtcblxuICB2YXIgcG9wcGVyID0gX3JlZjIucG9wcGVyLFxuICAgICAgcG9wcGVyUmVjdCA9IF9yZWYyLnBvcHBlclJlY3QsXG4gICAgICBwbGFjZW1lbnQgPSBfcmVmMi5wbGFjZW1lbnQsXG4gICAgICB2YXJpYXRpb24gPSBfcmVmMi52YXJpYXRpb24sXG4gICAgICBvZmZzZXRzID0gX3JlZjIub2Zmc2V0cyxcbiAgICAgIHBvc2l0aW9uID0gX3JlZjIucG9zaXRpb24sXG4gICAgICBncHVBY2NlbGVyYXRpb24gPSBfcmVmMi5ncHVBY2NlbGVyYXRpb24sXG4gICAgICBhZGFwdGl2ZSA9IF9yZWYyLmFkYXB0aXZlLFxuICAgICAgcm91bmRPZmZzZXRzID0gX3JlZjIucm91bmRPZmZzZXRzLFxuICAgICAgaXNGaXhlZCA9IF9yZWYyLmlzRml4ZWQ7XG4gIHZhciBfb2Zmc2V0cyR4ID0gb2Zmc2V0cy54LFxuICAgICAgeCA9IF9vZmZzZXRzJHggPT09IHZvaWQgMCA/IDAgOiBfb2Zmc2V0cyR4LFxuICAgICAgX29mZnNldHMkeSA9IG9mZnNldHMueSxcbiAgICAgIHkgPSBfb2Zmc2V0cyR5ID09PSB2b2lkIDAgPyAwIDogX29mZnNldHMkeTtcblxuICB2YXIgX3JlZjMgPSB0eXBlb2Ygcm91bmRPZmZzZXRzID09PSAnZnVuY3Rpb24nID8gcm91bmRPZmZzZXRzKHtcbiAgICB4OiB4LFxuICAgIHk6IHlcbiAgfSkgOiB7XG4gICAgeDogeCxcbiAgICB5OiB5XG4gIH07XG5cbiAgeCA9IF9yZWYzLng7XG4gIHkgPSBfcmVmMy55O1xuICB2YXIgaGFzWCA9IG9mZnNldHMuaGFzT3duUHJvcGVydHkoJ3gnKTtcbiAgdmFyIGhhc1kgPSBvZmZzZXRzLmhhc093blByb3BlcnR5KCd5Jyk7XG4gIHZhciBzaWRlWCA9IGxlZnQ7XG4gIHZhciBzaWRlWSA9IHRvcDtcbiAgdmFyIHdpbiA9IHdpbmRvdztcblxuICBpZiAoYWRhcHRpdmUpIHtcbiAgICB2YXIgb2Zmc2V0UGFyZW50ID0gZ2V0T2Zmc2V0UGFyZW50KHBvcHBlcik7XG4gICAgdmFyIGhlaWdodFByb3AgPSAnY2xpZW50SGVpZ2h0JztcbiAgICB2YXIgd2lkdGhQcm9wID0gJ2NsaWVudFdpZHRoJztcblxuICAgIGlmIChvZmZzZXRQYXJlbnQgPT09IGdldFdpbmRvdyhwb3BwZXIpKSB7XG4gICAgICBvZmZzZXRQYXJlbnQgPSBnZXREb2N1bWVudEVsZW1lbnQocG9wcGVyKTtcblxuICAgICAgaWYgKGdldENvbXB1dGVkU3R5bGUob2Zmc2V0UGFyZW50KS5wb3NpdGlvbiAhPT0gJ3N0YXRpYycgJiYgcG9zaXRpb24gPT09ICdhYnNvbHV0ZScpIHtcbiAgICAgICAgaGVpZ2h0UHJvcCA9ICdzY3JvbGxIZWlnaHQnO1xuICAgICAgICB3aWR0aFByb3AgPSAnc2Nyb2xsV2lkdGgnO1xuICAgICAgfVxuICAgIH0gLy8gJEZsb3dGaXhNZVtpbmNvbXBhdGlibGUtY2FzdF06IGZvcmNlIHR5cGUgcmVmaW5lbWVudCwgd2UgY29tcGFyZSBvZmZzZXRQYXJlbnQgd2l0aCB3aW5kb3cgYWJvdmUsIGJ1dCBGbG93IGRvZXNuJ3QgZGV0ZWN0IGl0XG5cblxuICAgIG9mZnNldFBhcmVudCA9IG9mZnNldFBhcmVudDtcblxuICAgIGlmIChwbGFjZW1lbnQgPT09IHRvcCB8fCAocGxhY2VtZW50ID09PSBsZWZ0IHx8IHBsYWNlbWVudCA9PT0gcmlnaHQpICYmIHZhcmlhdGlvbiA9PT0gZW5kKSB7XG4gICAgICBzaWRlWSA9IGJvdHRvbTtcbiAgICAgIHZhciBvZmZzZXRZID0gaXNGaXhlZCAmJiBvZmZzZXRQYXJlbnQgPT09IHdpbiAmJiB3aW4udmlzdWFsVmlld3BvcnQgPyB3aW4udmlzdWFsVmlld3BvcnQuaGVpZ2h0IDogLy8gJEZsb3dGaXhNZVtwcm9wLW1pc3NpbmddXG4gICAgICBvZmZzZXRQYXJlbnRbaGVpZ2h0UHJvcF07XG4gICAgICB5IC09IG9mZnNldFkgLSBwb3BwZXJSZWN0LmhlaWdodDtcbiAgICAgIHkgKj0gZ3B1QWNjZWxlcmF0aW9uID8gMSA6IC0xO1xuICAgIH1cblxuICAgIGlmIChwbGFjZW1lbnQgPT09IGxlZnQgfHwgKHBsYWNlbWVudCA9PT0gdG9wIHx8IHBsYWNlbWVudCA9PT0gYm90dG9tKSAmJiB2YXJpYXRpb24gPT09IGVuZCkge1xuICAgICAgc2lkZVggPSByaWdodDtcbiAgICAgIHZhciBvZmZzZXRYID0gaXNGaXhlZCAmJiBvZmZzZXRQYXJlbnQgPT09IHdpbiAmJiB3aW4udmlzdWFsVmlld3BvcnQgPyB3aW4udmlzdWFsVmlld3BvcnQud2lkdGggOiAvLyAkRmxvd0ZpeE1lW3Byb3AtbWlzc2luZ11cbiAgICAgIG9mZnNldFBhcmVudFt3aWR0aFByb3BdO1xuICAgICAgeCAtPSBvZmZzZXRYIC0gcG9wcGVyUmVjdC53aWR0aDtcbiAgICAgIHggKj0gZ3B1QWNjZWxlcmF0aW9uID8gMSA6IC0xO1xuICAgIH1cbiAgfVxuXG4gIHZhciBjb21tb25TdHlsZXMgPSBPYmplY3QuYXNzaWduKHtcbiAgICBwb3NpdGlvbjogcG9zaXRpb25cbiAgfSwgYWRhcHRpdmUgJiYgdW5zZXRTaWRlcyk7XG5cbiAgdmFyIF9yZWY0ID0gcm91bmRPZmZzZXRzID09PSB0cnVlID8gcm91bmRPZmZzZXRzQnlEUFIoe1xuICAgIHg6IHgsXG4gICAgeTogeVxuICB9LCBnZXRXaW5kb3cocG9wcGVyKSkgOiB7XG4gICAgeDogeCxcbiAgICB5OiB5XG4gIH07XG5cbiAgeCA9IF9yZWY0Lng7XG4gIHkgPSBfcmVmNC55O1xuXG4gIGlmIChncHVBY2NlbGVyYXRpb24pIHtcbiAgICB2YXIgX09iamVjdCRhc3NpZ247XG5cbiAgICByZXR1cm4gT2JqZWN0LmFzc2lnbih7fSwgY29tbW9uU3R5bGVzLCAoX09iamVjdCRhc3NpZ24gPSB7fSwgX09iamVjdCRhc3NpZ25bc2lkZVldID0gaGFzWSA/ICcwJyA6ICcnLCBfT2JqZWN0JGFzc2lnbltzaWRlWF0gPSBoYXNYID8gJzAnIDogJycsIF9PYmplY3QkYXNzaWduLnRyYW5zZm9ybSA9ICh3aW4uZGV2aWNlUGl4ZWxSYXRpbyB8fCAxKSA8PSAxID8gXCJ0cmFuc2xhdGUoXCIgKyB4ICsgXCJweCwgXCIgKyB5ICsgXCJweClcIiA6IFwidHJhbnNsYXRlM2QoXCIgKyB4ICsgXCJweCwgXCIgKyB5ICsgXCJweCwgMClcIiwgX09iamVjdCRhc3NpZ24pKTtcbiAgfVxuXG4gIHJldHVybiBPYmplY3QuYXNzaWduKHt9LCBjb21tb25TdHlsZXMsIChfT2JqZWN0JGFzc2lnbjIgPSB7fSwgX09iamVjdCRhc3NpZ24yW3NpZGVZXSA9IGhhc1kgPyB5ICsgXCJweFwiIDogJycsIF9PYmplY3QkYXNzaWduMltzaWRlWF0gPSBoYXNYID8geCArIFwicHhcIiA6ICcnLCBfT2JqZWN0JGFzc2lnbjIudHJhbnNmb3JtID0gJycsIF9PYmplY3QkYXNzaWduMikpO1xufVxuXG5mdW5jdGlvbiBjb21wdXRlU3R5bGVzKF9yZWY1KSB7XG4gIHZhciBzdGF0ZSA9IF9yZWY1LnN0YXRlLFxuICAgICAgb3B0aW9ucyA9IF9yZWY1Lm9wdGlvbnM7XG4gIHZhciBfb3B0aW9ucyRncHVBY2NlbGVyYXQgPSBvcHRpb25zLmdwdUFjY2VsZXJhdGlvbixcbiAgICAgIGdwdUFjY2VsZXJhdGlvbiA9IF9vcHRpb25zJGdwdUFjY2VsZXJhdCA9PT0gdm9pZCAwID8gdHJ1ZSA6IF9vcHRpb25zJGdwdUFjY2VsZXJhdCxcbiAgICAgIF9vcHRpb25zJGFkYXB0aXZlID0gb3B0aW9ucy5hZGFwdGl2ZSxcbiAgICAgIGFkYXB0aXZlID0gX29wdGlvbnMkYWRhcHRpdmUgPT09IHZvaWQgMCA/IHRydWUgOiBfb3B0aW9ucyRhZGFwdGl2ZSxcbiAgICAgIF9vcHRpb25zJHJvdW5kT2Zmc2V0cyA9IG9wdGlvbnMucm91bmRPZmZzZXRzLFxuICAgICAgcm91bmRPZmZzZXRzID0gX29wdGlvbnMkcm91bmRPZmZzZXRzID09PSB2b2lkIDAgPyB0cnVlIDogX29wdGlvbnMkcm91bmRPZmZzZXRzO1xuICB2YXIgY29tbW9uU3R5bGVzID0ge1xuICAgIHBsYWNlbWVudDogZ2V0QmFzZVBsYWNlbWVudChzdGF0ZS5wbGFjZW1lbnQpLFxuICAgIHZhcmlhdGlvbjogZ2V0VmFyaWF0aW9uKHN0YXRlLnBsYWNlbWVudCksXG4gICAgcG9wcGVyOiBzdGF0ZS5lbGVtZW50cy5wb3BwZXIsXG4gICAgcG9wcGVyUmVjdDogc3RhdGUucmVjdHMucG9wcGVyLFxuICAgIGdwdUFjY2VsZXJhdGlvbjogZ3B1QWNjZWxlcmF0aW9uLFxuICAgIGlzRml4ZWQ6IHN0YXRlLm9wdGlvbnMuc3RyYXRlZ3kgPT09ICdmaXhlZCdcbiAgfTtcblxuICBpZiAoc3RhdGUubW9kaWZpZXJzRGF0YS5wb3BwZXJPZmZzZXRzICE9IG51bGwpIHtcbiAgICBzdGF0ZS5zdHlsZXMucG9wcGVyID0gT2JqZWN0LmFzc2lnbih7fSwgc3RhdGUuc3R5bGVzLnBvcHBlciwgbWFwVG9TdHlsZXMoT2JqZWN0LmFzc2lnbih7fSwgY29tbW9uU3R5bGVzLCB7XG4gICAgICBvZmZzZXRzOiBzdGF0ZS5tb2RpZmllcnNEYXRhLnBvcHBlck9mZnNldHMsXG4gICAgICBwb3NpdGlvbjogc3RhdGUub3B0aW9ucy5zdHJhdGVneSxcbiAgICAgIGFkYXB0aXZlOiBhZGFwdGl2ZSxcbiAgICAgIHJvdW5kT2Zmc2V0czogcm91bmRPZmZzZXRzXG4gICAgfSkpKTtcbiAgfVxuXG4gIGlmIChzdGF0ZS5tb2RpZmllcnNEYXRhLmFycm93ICE9IG51bGwpIHtcbiAgICBzdGF0ZS5zdHlsZXMuYXJyb3cgPSBPYmplY3QuYXNzaWduKHt9LCBzdGF0ZS5zdHlsZXMuYXJyb3csIG1hcFRvU3R5bGVzKE9iamVjdC5hc3NpZ24oe30sIGNvbW1vblN0eWxlcywge1xuICAgICAgb2Zmc2V0czogc3RhdGUubW9kaWZpZXJzRGF0YS5hcnJvdyxcbiAgICAgIHBvc2l0aW9uOiAnYWJzb2x1dGUnLFxuICAgICAgYWRhcHRpdmU6IGZhbHNlLFxuICAgICAgcm91bmRPZmZzZXRzOiByb3VuZE9mZnNldHNcbiAgICB9KSkpO1xuICB9XG5cbiAgc3RhdGUuYXR0cmlidXRlcy5wb3BwZXIgPSBPYmplY3QuYXNzaWduKHt9LCBzdGF0ZS5hdHRyaWJ1dGVzLnBvcHBlciwge1xuICAgICdkYXRhLXBvcHBlci1wbGFjZW1lbnQnOiBzdGF0ZS5wbGFjZW1lbnRcbiAgfSk7XG59IC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBpbXBvcnQvbm8tdW51c2VkLW1vZHVsZXNcblxuXG5leHBvcnQgZGVmYXVsdCB7XG4gIG5hbWU6ICdjb21wdXRlU3R5bGVzJyxcbiAgZW5hYmxlZDogdHJ1ZSxcbiAgcGhhc2U6ICdiZWZvcmVXcml0ZScsXG4gIGZuOiBjb21wdXRlU3R5bGVzLFxuICBkYXRhOiB7fVxufTsiLCAiaW1wb3J0IGdldFdpbmRvdyBmcm9tIFwiLi4vZG9tLXV0aWxzL2dldFdpbmRvdy5qc1wiOyAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgaW1wb3J0L25vLXVudXNlZC1tb2R1bGVzXG5cbnZhciBwYXNzaXZlID0ge1xuICBwYXNzaXZlOiB0cnVlXG59O1xuXG5mdW5jdGlvbiBlZmZlY3QoX3JlZikge1xuICB2YXIgc3RhdGUgPSBfcmVmLnN0YXRlLFxuICAgICAgaW5zdGFuY2UgPSBfcmVmLmluc3RhbmNlLFxuICAgICAgb3B0aW9ucyA9IF9yZWYub3B0aW9ucztcbiAgdmFyIF9vcHRpb25zJHNjcm9sbCA9IG9wdGlvbnMuc2Nyb2xsLFxuICAgICAgc2Nyb2xsID0gX29wdGlvbnMkc2Nyb2xsID09PSB2b2lkIDAgPyB0cnVlIDogX29wdGlvbnMkc2Nyb2xsLFxuICAgICAgX29wdGlvbnMkcmVzaXplID0gb3B0aW9ucy5yZXNpemUsXG4gICAgICByZXNpemUgPSBfb3B0aW9ucyRyZXNpemUgPT09IHZvaWQgMCA/IHRydWUgOiBfb3B0aW9ucyRyZXNpemU7XG4gIHZhciB3aW5kb3cgPSBnZXRXaW5kb3coc3RhdGUuZWxlbWVudHMucG9wcGVyKTtcbiAgdmFyIHNjcm9sbFBhcmVudHMgPSBbXS5jb25jYXQoc3RhdGUuc2Nyb2xsUGFyZW50cy5yZWZlcmVuY2UsIHN0YXRlLnNjcm9sbFBhcmVudHMucG9wcGVyKTtcblxuICBpZiAoc2Nyb2xsKSB7XG4gICAgc2Nyb2xsUGFyZW50cy5mb3JFYWNoKGZ1bmN0aW9uIChzY3JvbGxQYXJlbnQpIHtcbiAgICAgIHNjcm9sbFBhcmVudC5hZGRFdmVudExpc3RlbmVyKCdzY3JvbGwnLCBpbnN0YW5jZS51cGRhdGUsIHBhc3NpdmUpO1xuICAgIH0pO1xuICB9XG5cbiAgaWYgKHJlc2l6ZSkge1xuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCBpbnN0YW5jZS51cGRhdGUsIHBhc3NpdmUpO1xuICB9XG5cbiAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoc2Nyb2xsKSB7XG4gICAgICBzY3JvbGxQYXJlbnRzLmZvckVhY2goZnVuY3Rpb24gKHNjcm9sbFBhcmVudCkge1xuICAgICAgICBzY3JvbGxQYXJlbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgaW5zdGFuY2UudXBkYXRlLCBwYXNzaXZlKTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGlmIChyZXNpemUpIHtcbiAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdyZXNpemUnLCBpbnN0YW5jZS51cGRhdGUsIHBhc3NpdmUpO1xuICAgIH1cbiAgfTtcbn0gLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGltcG9ydC9uby11bnVzZWQtbW9kdWxlc1xuXG5cbmV4cG9ydCBkZWZhdWx0IHtcbiAgbmFtZTogJ2V2ZW50TGlzdGVuZXJzJyxcbiAgZW5hYmxlZDogdHJ1ZSxcbiAgcGhhc2U6ICd3cml0ZScsXG4gIGZuOiBmdW5jdGlvbiBmbigpIHt9LFxuICBlZmZlY3Q6IGVmZmVjdCxcbiAgZGF0YToge31cbn07IiwgInZhciBoYXNoID0ge1xuICBsZWZ0OiAncmlnaHQnLFxuICByaWdodDogJ2xlZnQnLFxuICBib3R0b206ICd0b3AnLFxuICB0b3A6ICdib3R0b20nXG59O1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gZ2V0T3Bwb3NpdGVQbGFjZW1lbnQocGxhY2VtZW50KSB7XG4gIHJldHVybiBwbGFjZW1lbnQucmVwbGFjZSgvbGVmdHxyaWdodHxib3R0b218dG9wL2csIGZ1bmN0aW9uIChtYXRjaGVkKSB7XG4gICAgcmV0dXJuIGhhc2hbbWF0Y2hlZF07XG4gIH0pO1xufSIsICJ2YXIgaGFzaCA9IHtcbiAgc3RhcnQ6ICdlbmQnLFxuICBlbmQ6ICdzdGFydCdcbn07XG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBnZXRPcHBvc2l0ZVZhcmlhdGlvblBsYWNlbWVudChwbGFjZW1lbnQpIHtcbiAgcmV0dXJuIHBsYWNlbWVudC5yZXBsYWNlKC9zdGFydHxlbmQvZywgZnVuY3Rpb24gKG1hdGNoZWQpIHtcbiAgICByZXR1cm4gaGFzaFttYXRjaGVkXTtcbiAgfSk7XG59IiwgImltcG9ydCBnZXRXaW5kb3cgZnJvbSBcIi4vZ2V0V2luZG93LmpzXCI7XG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBnZXRXaW5kb3dTY3JvbGwobm9kZSkge1xuICB2YXIgd2luID0gZ2V0V2luZG93KG5vZGUpO1xuICB2YXIgc2Nyb2xsTGVmdCA9IHdpbi5wYWdlWE9mZnNldDtcbiAgdmFyIHNjcm9sbFRvcCA9IHdpbi5wYWdlWU9mZnNldDtcbiAgcmV0dXJuIHtcbiAgICBzY3JvbGxMZWZ0OiBzY3JvbGxMZWZ0LFxuICAgIHNjcm9sbFRvcDogc2Nyb2xsVG9wXG4gIH07XG59IiwgImltcG9ydCBnZXRCb3VuZGluZ0NsaWVudFJlY3QgZnJvbSBcIi4vZ2V0Qm91bmRpbmdDbGllbnRSZWN0LmpzXCI7XG5pbXBvcnQgZ2V0RG9jdW1lbnRFbGVtZW50IGZyb20gXCIuL2dldERvY3VtZW50RWxlbWVudC5qc1wiO1xuaW1wb3J0IGdldFdpbmRvd1Njcm9sbCBmcm9tIFwiLi9nZXRXaW5kb3dTY3JvbGwuanNcIjtcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGdldFdpbmRvd1Njcm9sbEJhclgoZWxlbWVudCkge1xuICAvLyBJZiA8aHRtbD4gaGFzIGEgQ1NTIHdpZHRoIGdyZWF0ZXIgdGhhbiB0aGUgdmlld3BvcnQsIHRoZW4gdGhpcyB3aWxsIGJlXG4gIC8vIGluY29ycmVjdCBmb3IgUlRMLlxuICAvLyBQb3BwZXIgMSBpcyBicm9rZW4gaW4gdGhpcyBjYXNlIGFuZCBuZXZlciBoYWQgYSBidWcgcmVwb3J0IHNvIGxldCdzIGFzc3VtZVxuICAvLyBpdCdzIG5vdCBhbiBpc3N1ZS4gSSBkb24ndCB0aGluayBhbnlvbmUgZXZlciBzcGVjaWZpZXMgd2lkdGggb24gPGh0bWw+XG4gIC8vIGFueXdheS5cbiAgLy8gQnJvd3NlcnMgd2hlcmUgdGhlIGxlZnQgc2Nyb2xsYmFyIGRvZXNuJ3QgY2F1c2UgYW4gaXNzdWUgcmVwb3J0IGAwYCBmb3JcbiAgLy8gdGhpcyAoZS5nLiBFZGdlIDIwMTksIElFMTEsIFNhZmFyaSlcbiAgcmV0dXJuIGdldEJvdW5kaW5nQ2xpZW50UmVjdChnZXREb2N1bWVudEVsZW1lbnQoZWxlbWVudCkpLmxlZnQgKyBnZXRXaW5kb3dTY3JvbGwoZWxlbWVudCkuc2Nyb2xsTGVmdDtcbn0iLCAiaW1wb3J0IGdldFdpbmRvdyBmcm9tIFwiLi9nZXRXaW5kb3cuanNcIjtcbmltcG9ydCBnZXREb2N1bWVudEVsZW1lbnQgZnJvbSBcIi4vZ2V0RG9jdW1lbnRFbGVtZW50LmpzXCI7XG5pbXBvcnQgZ2V0V2luZG93U2Nyb2xsQmFyWCBmcm9tIFwiLi9nZXRXaW5kb3dTY3JvbGxCYXJYLmpzXCI7XG5pbXBvcnQgaXNMYXlvdXRWaWV3cG9ydCBmcm9tIFwiLi9pc0xheW91dFZpZXdwb3J0LmpzXCI7XG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBnZXRWaWV3cG9ydFJlY3QoZWxlbWVudCwgc3RyYXRlZ3kpIHtcbiAgdmFyIHdpbiA9IGdldFdpbmRvdyhlbGVtZW50KTtcbiAgdmFyIGh0bWwgPSBnZXREb2N1bWVudEVsZW1lbnQoZWxlbWVudCk7XG4gIHZhciB2aXN1YWxWaWV3cG9ydCA9IHdpbi52aXN1YWxWaWV3cG9ydDtcbiAgdmFyIHdpZHRoID0gaHRtbC5jbGllbnRXaWR0aDtcbiAgdmFyIGhlaWdodCA9IGh0bWwuY2xpZW50SGVpZ2h0O1xuICB2YXIgeCA9IDA7XG4gIHZhciB5ID0gMDtcblxuICBpZiAodmlzdWFsVmlld3BvcnQpIHtcbiAgICB3aWR0aCA9IHZpc3VhbFZpZXdwb3J0LndpZHRoO1xuICAgIGhlaWdodCA9IHZpc3VhbFZpZXdwb3J0LmhlaWdodDtcbiAgICB2YXIgbGF5b3V0Vmlld3BvcnQgPSBpc0xheW91dFZpZXdwb3J0KCk7XG5cbiAgICBpZiAobGF5b3V0Vmlld3BvcnQgfHwgIWxheW91dFZpZXdwb3J0ICYmIHN0cmF0ZWd5ID09PSAnZml4ZWQnKSB7XG4gICAgICB4ID0gdmlzdWFsVmlld3BvcnQub2Zmc2V0TGVmdDtcbiAgICAgIHkgPSB2aXN1YWxWaWV3cG9ydC5vZmZzZXRUb3A7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHtcbiAgICB3aWR0aDogd2lkdGgsXG4gICAgaGVpZ2h0OiBoZWlnaHQsXG4gICAgeDogeCArIGdldFdpbmRvd1Njcm9sbEJhclgoZWxlbWVudCksXG4gICAgeTogeVxuICB9O1xufSIsICJpbXBvcnQgZ2V0RG9jdW1lbnRFbGVtZW50IGZyb20gXCIuL2dldERvY3VtZW50RWxlbWVudC5qc1wiO1xuaW1wb3J0IGdldENvbXB1dGVkU3R5bGUgZnJvbSBcIi4vZ2V0Q29tcHV0ZWRTdHlsZS5qc1wiO1xuaW1wb3J0IGdldFdpbmRvd1Njcm9sbEJhclggZnJvbSBcIi4vZ2V0V2luZG93U2Nyb2xsQmFyWC5qc1wiO1xuaW1wb3J0IGdldFdpbmRvd1Njcm9sbCBmcm9tIFwiLi9nZXRXaW5kb3dTY3JvbGwuanNcIjtcbmltcG9ydCB7IG1heCB9IGZyb20gXCIuLi91dGlscy9tYXRoLmpzXCI7IC8vIEdldHMgdGhlIGVudGlyZSBzaXplIG9mIHRoZSBzY3JvbGxhYmxlIGRvY3VtZW50IGFyZWEsIGV2ZW4gZXh0ZW5kaW5nIG91dHNpZGVcbi8vIG9mIHRoZSBgPGh0bWw+YCBhbmQgYDxib2R5PmAgcmVjdCBib3VuZHMgaWYgaG9yaXpvbnRhbGx5IHNjcm9sbGFibGVcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gZ2V0RG9jdW1lbnRSZWN0KGVsZW1lbnQpIHtcbiAgdmFyIF9lbGVtZW50JG93bmVyRG9jdW1lbjtcblxuICB2YXIgaHRtbCA9IGdldERvY3VtZW50RWxlbWVudChlbGVtZW50KTtcbiAgdmFyIHdpblNjcm9sbCA9IGdldFdpbmRvd1Njcm9sbChlbGVtZW50KTtcbiAgdmFyIGJvZHkgPSAoX2VsZW1lbnQkb3duZXJEb2N1bWVuID0gZWxlbWVudC5vd25lckRvY3VtZW50KSA9PSBudWxsID8gdm9pZCAwIDogX2VsZW1lbnQkb3duZXJEb2N1bWVuLmJvZHk7XG4gIHZhciB3aWR0aCA9IG1heChodG1sLnNjcm9sbFdpZHRoLCBodG1sLmNsaWVudFdpZHRoLCBib2R5ID8gYm9keS5zY3JvbGxXaWR0aCA6IDAsIGJvZHkgPyBib2R5LmNsaWVudFdpZHRoIDogMCk7XG4gIHZhciBoZWlnaHQgPSBtYXgoaHRtbC5zY3JvbGxIZWlnaHQsIGh0bWwuY2xpZW50SGVpZ2h0LCBib2R5ID8gYm9keS5zY3JvbGxIZWlnaHQgOiAwLCBib2R5ID8gYm9keS5jbGllbnRIZWlnaHQgOiAwKTtcbiAgdmFyIHggPSAtd2luU2Nyb2xsLnNjcm9sbExlZnQgKyBnZXRXaW5kb3dTY3JvbGxCYXJYKGVsZW1lbnQpO1xuICB2YXIgeSA9IC13aW5TY3JvbGwuc2Nyb2xsVG9wO1xuXG4gIGlmIChnZXRDb21wdXRlZFN0eWxlKGJvZHkgfHwgaHRtbCkuZGlyZWN0aW9uID09PSAncnRsJykge1xuICAgIHggKz0gbWF4KGh0bWwuY2xpZW50V2lkdGgsIGJvZHkgPyBib2R5LmNsaWVudFdpZHRoIDogMCkgLSB3aWR0aDtcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgd2lkdGg6IHdpZHRoLFxuICAgIGhlaWdodDogaGVpZ2h0LFxuICAgIHg6IHgsXG4gICAgeTogeVxuICB9O1xufSIsICJpbXBvcnQgZ2V0Q29tcHV0ZWRTdHlsZSBmcm9tIFwiLi9nZXRDb21wdXRlZFN0eWxlLmpzXCI7XG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBpc1Njcm9sbFBhcmVudChlbGVtZW50KSB7XG4gIC8vIEZpcmVmb3ggd2FudHMgdXMgdG8gY2hlY2sgYC14YCBhbmQgYC15YCB2YXJpYXRpb25zIGFzIHdlbGxcbiAgdmFyIF9nZXRDb21wdXRlZFN0eWxlID0gZ2V0Q29tcHV0ZWRTdHlsZShlbGVtZW50KSxcbiAgICAgIG92ZXJmbG93ID0gX2dldENvbXB1dGVkU3R5bGUub3ZlcmZsb3csXG4gICAgICBvdmVyZmxvd1ggPSBfZ2V0Q29tcHV0ZWRTdHlsZS5vdmVyZmxvd1gsXG4gICAgICBvdmVyZmxvd1kgPSBfZ2V0Q29tcHV0ZWRTdHlsZS5vdmVyZmxvd1k7XG5cbiAgcmV0dXJuIC9hdXRvfHNjcm9sbHxvdmVybGF5fGhpZGRlbi8udGVzdChvdmVyZmxvdyArIG92ZXJmbG93WSArIG92ZXJmbG93WCk7XG59IiwgImltcG9ydCBnZXRQYXJlbnROb2RlIGZyb20gXCIuL2dldFBhcmVudE5vZGUuanNcIjtcbmltcG9ydCBpc1Njcm9sbFBhcmVudCBmcm9tIFwiLi9pc1Njcm9sbFBhcmVudC5qc1wiO1xuaW1wb3J0IGdldE5vZGVOYW1lIGZyb20gXCIuL2dldE5vZGVOYW1lLmpzXCI7XG5pbXBvcnQgeyBpc0hUTUxFbGVtZW50IH0gZnJvbSBcIi4vaW5zdGFuY2VPZi5qc1wiO1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gZ2V0U2Nyb2xsUGFyZW50KG5vZGUpIHtcbiAgaWYgKFsnaHRtbCcsICdib2R5JywgJyNkb2N1bWVudCddLmluZGV4T2YoZ2V0Tm9kZU5hbWUobm9kZSkpID49IDApIHtcbiAgICAvLyAkRmxvd0ZpeE1lW2luY29tcGF0aWJsZS1yZXR1cm5dOiBhc3N1bWUgYm9keSBpcyBhbHdheXMgYXZhaWxhYmxlXG4gICAgcmV0dXJuIG5vZGUub3duZXJEb2N1bWVudC5ib2R5O1xuICB9XG5cbiAgaWYgKGlzSFRNTEVsZW1lbnQobm9kZSkgJiYgaXNTY3JvbGxQYXJlbnQobm9kZSkpIHtcbiAgICByZXR1cm4gbm9kZTtcbiAgfVxuXG4gIHJldHVybiBnZXRTY3JvbGxQYXJlbnQoZ2V0UGFyZW50Tm9kZShub2RlKSk7XG59IiwgImltcG9ydCBnZXRTY3JvbGxQYXJlbnQgZnJvbSBcIi4vZ2V0U2Nyb2xsUGFyZW50LmpzXCI7XG5pbXBvcnQgZ2V0UGFyZW50Tm9kZSBmcm9tIFwiLi9nZXRQYXJlbnROb2RlLmpzXCI7XG5pbXBvcnQgZ2V0V2luZG93IGZyb20gXCIuL2dldFdpbmRvdy5qc1wiO1xuaW1wb3J0IGlzU2Nyb2xsUGFyZW50IGZyb20gXCIuL2lzU2Nyb2xsUGFyZW50LmpzXCI7XG4vKlxuZ2l2ZW4gYSBET00gZWxlbWVudCwgcmV0dXJuIHRoZSBsaXN0IG9mIGFsbCBzY3JvbGwgcGFyZW50cywgdXAgdGhlIGxpc3Qgb2YgYW5jZXNvcnNcbnVudGlsIHdlIGdldCB0byB0aGUgdG9wIHdpbmRvdyBvYmplY3QuIFRoaXMgbGlzdCBpcyB3aGF0IHdlIGF0dGFjaCBzY3JvbGwgbGlzdGVuZXJzXG50bywgYmVjYXVzZSBpZiBhbnkgb2YgdGhlc2UgcGFyZW50IGVsZW1lbnRzIHNjcm9sbCwgd2UnbGwgbmVlZCB0byByZS1jYWxjdWxhdGUgdGhlXG5yZWZlcmVuY2UgZWxlbWVudCdzIHBvc2l0aW9uLlxuKi9cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gbGlzdFNjcm9sbFBhcmVudHMoZWxlbWVudCwgbGlzdCkge1xuICB2YXIgX2VsZW1lbnQkb3duZXJEb2N1bWVuO1xuXG4gIGlmIChsaXN0ID09PSB2b2lkIDApIHtcbiAgICBsaXN0ID0gW107XG4gIH1cblxuICB2YXIgc2Nyb2xsUGFyZW50ID0gZ2V0U2Nyb2xsUGFyZW50KGVsZW1lbnQpO1xuICB2YXIgaXNCb2R5ID0gc2Nyb2xsUGFyZW50ID09PSAoKF9lbGVtZW50JG93bmVyRG9jdW1lbiA9IGVsZW1lbnQub3duZXJEb2N1bWVudCkgPT0gbnVsbCA/IHZvaWQgMCA6IF9lbGVtZW50JG93bmVyRG9jdW1lbi5ib2R5KTtcbiAgdmFyIHdpbiA9IGdldFdpbmRvdyhzY3JvbGxQYXJlbnQpO1xuICB2YXIgdGFyZ2V0ID0gaXNCb2R5ID8gW3dpbl0uY29uY2F0KHdpbi52aXN1YWxWaWV3cG9ydCB8fCBbXSwgaXNTY3JvbGxQYXJlbnQoc2Nyb2xsUGFyZW50KSA/IHNjcm9sbFBhcmVudCA6IFtdKSA6IHNjcm9sbFBhcmVudDtcbiAgdmFyIHVwZGF0ZWRMaXN0ID0gbGlzdC5jb25jYXQodGFyZ2V0KTtcbiAgcmV0dXJuIGlzQm9keSA/IHVwZGF0ZWRMaXN0IDogLy8gJEZsb3dGaXhNZVtpbmNvbXBhdGlibGUtY2FsbF06IGlzQm9keSB0ZWxscyB1cyB0YXJnZXQgd2lsbCBiZSBhbiBIVE1MRWxlbWVudCBoZXJlXG4gIHVwZGF0ZWRMaXN0LmNvbmNhdChsaXN0U2Nyb2xsUGFyZW50cyhnZXRQYXJlbnROb2RlKHRhcmdldCkpKTtcbn0iLCAiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gcmVjdFRvQ2xpZW50UmVjdChyZWN0KSB7XG4gIHJldHVybiBPYmplY3QuYXNzaWduKHt9LCByZWN0LCB7XG4gICAgbGVmdDogcmVjdC54LFxuICAgIHRvcDogcmVjdC55LFxuICAgIHJpZ2h0OiByZWN0LnggKyByZWN0LndpZHRoLFxuICAgIGJvdHRvbTogcmVjdC55ICsgcmVjdC5oZWlnaHRcbiAgfSk7XG59IiwgImltcG9ydCB7IHZpZXdwb3J0IH0gZnJvbSBcIi4uL2VudW1zLmpzXCI7XG5pbXBvcnQgZ2V0Vmlld3BvcnRSZWN0IGZyb20gXCIuL2dldFZpZXdwb3J0UmVjdC5qc1wiO1xuaW1wb3J0IGdldERvY3VtZW50UmVjdCBmcm9tIFwiLi9nZXREb2N1bWVudFJlY3QuanNcIjtcbmltcG9ydCBsaXN0U2Nyb2xsUGFyZW50cyBmcm9tIFwiLi9saXN0U2Nyb2xsUGFyZW50cy5qc1wiO1xuaW1wb3J0IGdldE9mZnNldFBhcmVudCBmcm9tIFwiLi9nZXRPZmZzZXRQYXJlbnQuanNcIjtcbmltcG9ydCBnZXREb2N1bWVudEVsZW1lbnQgZnJvbSBcIi4vZ2V0RG9jdW1lbnRFbGVtZW50LmpzXCI7XG5pbXBvcnQgZ2V0Q29tcHV0ZWRTdHlsZSBmcm9tIFwiLi9nZXRDb21wdXRlZFN0eWxlLmpzXCI7XG5pbXBvcnQgeyBpc0VsZW1lbnQsIGlzSFRNTEVsZW1lbnQgfSBmcm9tIFwiLi9pbnN0YW5jZU9mLmpzXCI7XG5pbXBvcnQgZ2V0Qm91bmRpbmdDbGllbnRSZWN0IGZyb20gXCIuL2dldEJvdW5kaW5nQ2xpZW50UmVjdC5qc1wiO1xuaW1wb3J0IGdldFBhcmVudE5vZGUgZnJvbSBcIi4vZ2V0UGFyZW50Tm9kZS5qc1wiO1xuaW1wb3J0IGNvbnRhaW5zIGZyb20gXCIuL2NvbnRhaW5zLmpzXCI7XG5pbXBvcnQgZ2V0Tm9kZU5hbWUgZnJvbSBcIi4vZ2V0Tm9kZU5hbWUuanNcIjtcbmltcG9ydCByZWN0VG9DbGllbnRSZWN0IGZyb20gXCIuLi91dGlscy9yZWN0VG9DbGllbnRSZWN0LmpzXCI7XG5pbXBvcnQgeyBtYXgsIG1pbiB9IGZyb20gXCIuLi91dGlscy9tYXRoLmpzXCI7XG5cbmZ1bmN0aW9uIGdldElubmVyQm91bmRpbmdDbGllbnRSZWN0KGVsZW1lbnQsIHN0cmF0ZWd5KSB7XG4gIHZhciByZWN0ID0gZ2V0Qm91bmRpbmdDbGllbnRSZWN0KGVsZW1lbnQsIGZhbHNlLCBzdHJhdGVneSA9PT0gJ2ZpeGVkJyk7XG4gIHJlY3QudG9wID0gcmVjdC50b3AgKyBlbGVtZW50LmNsaWVudFRvcDtcbiAgcmVjdC5sZWZ0ID0gcmVjdC5sZWZ0ICsgZWxlbWVudC5jbGllbnRMZWZ0O1xuICByZWN0LmJvdHRvbSA9IHJlY3QudG9wICsgZWxlbWVudC5jbGllbnRIZWlnaHQ7XG4gIHJlY3QucmlnaHQgPSByZWN0LmxlZnQgKyBlbGVtZW50LmNsaWVudFdpZHRoO1xuICByZWN0LndpZHRoID0gZWxlbWVudC5jbGllbnRXaWR0aDtcbiAgcmVjdC5oZWlnaHQgPSBlbGVtZW50LmNsaWVudEhlaWdodDtcbiAgcmVjdC54ID0gcmVjdC5sZWZ0O1xuICByZWN0LnkgPSByZWN0LnRvcDtcbiAgcmV0dXJuIHJlY3Q7XG59XG5cbmZ1bmN0aW9uIGdldENsaWVudFJlY3RGcm9tTWl4ZWRUeXBlKGVsZW1lbnQsIGNsaXBwaW5nUGFyZW50LCBzdHJhdGVneSkge1xuICByZXR1cm4gY2xpcHBpbmdQYXJlbnQgPT09IHZpZXdwb3J0ID8gcmVjdFRvQ2xpZW50UmVjdChnZXRWaWV3cG9ydFJlY3QoZWxlbWVudCwgc3RyYXRlZ3kpKSA6IGlzRWxlbWVudChjbGlwcGluZ1BhcmVudCkgPyBnZXRJbm5lckJvdW5kaW5nQ2xpZW50UmVjdChjbGlwcGluZ1BhcmVudCwgc3RyYXRlZ3kpIDogcmVjdFRvQ2xpZW50UmVjdChnZXREb2N1bWVudFJlY3QoZ2V0RG9jdW1lbnRFbGVtZW50KGVsZW1lbnQpKSk7XG59IC8vIEEgXCJjbGlwcGluZyBwYXJlbnRcIiBpcyBhbiBvdmVyZmxvd2FibGUgY29udGFpbmVyIHdpdGggdGhlIGNoYXJhY3RlcmlzdGljIG9mXG4vLyBjbGlwcGluZyAob3IgaGlkaW5nKSBvdmVyZmxvd2luZyBlbGVtZW50cyB3aXRoIGEgcG9zaXRpb24gZGlmZmVyZW50IGZyb21cbi8vIGBpbml0aWFsYFxuXG5cbmZ1bmN0aW9uIGdldENsaXBwaW5nUGFyZW50cyhlbGVtZW50KSB7XG4gIHZhciBjbGlwcGluZ1BhcmVudHMgPSBsaXN0U2Nyb2xsUGFyZW50cyhnZXRQYXJlbnROb2RlKGVsZW1lbnQpKTtcbiAgdmFyIGNhbkVzY2FwZUNsaXBwaW5nID0gWydhYnNvbHV0ZScsICdmaXhlZCddLmluZGV4T2YoZ2V0Q29tcHV0ZWRTdHlsZShlbGVtZW50KS5wb3NpdGlvbikgPj0gMDtcbiAgdmFyIGNsaXBwZXJFbGVtZW50ID0gY2FuRXNjYXBlQ2xpcHBpbmcgJiYgaXNIVE1MRWxlbWVudChlbGVtZW50KSA/IGdldE9mZnNldFBhcmVudChlbGVtZW50KSA6IGVsZW1lbnQ7XG5cbiAgaWYgKCFpc0VsZW1lbnQoY2xpcHBlckVsZW1lbnQpKSB7XG4gICAgcmV0dXJuIFtdO1xuICB9IC8vICRGbG93Rml4TWVbaW5jb21wYXRpYmxlLXJldHVybl06IGh0dHBzOi8vZ2l0aHViLmNvbS9mYWNlYm9vay9mbG93L2lzc3Vlcy8xNDE0XG5cblxuICByZXR1cm4gY2xpcHBpbmdQYXJlbnRzLmZpbHRlcihmdW5jdGlvbiAoY2xpcHBpbmdQYXJlbnQpIHtcbiAgICByZXR1cm4gaXNFbGVtZW50KGNsaXBwaW5nUGFyZW50KSAmJiBjb250YWlucyhjbGlwcGluZ1BhcmVudCwgY2xpcHBlckVsZW1lbnQpICYmIGdldE5vZGVOYW1lKGNsaXBwaW5nUGFyZW50KSAhPT0gJ2JvZHknO1xuICB9KTtcbn0gLy8gR2V0cyB0aGUgbWF4aW11bSBhcmVhIHRoYXQgdGhlIGVsZW1lbnQgaXMgdmlzaWJsZSBpbiBkdWUgdG8gYW55IG51bWJlciBvZlxuLy8gY2xpcHBpbmcgcGFyZW50c1xuXG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGdldENsaXBwaW5nUmVjdChlbGVtZW50LCBib3VuZGFyeSwgcm9vdEJvdW5kYXJ5LCBzdHJhdGVneSkge1xuICB2YXIgbWFpbkNsaXBwaW5nUGFyZW50cyA9IGJvdW5kYXJ5ID09PSAnY2xpcHBpbmdQYXJlbnRzJyA/IGdldENsaXBwaW5nUGFyZW50cyhlbGVtZW50KSA6IFtdLmNvbmNhdChib3VuZGFyeSk7XG4gIHZhciBjbGlwcGluZ1BhcmVudHMgPSBbXS5jb25jYXQobWFpbkNsaXBwaW5nUGFyZW50cywgW3Jvb3RCb3VuZGFyeV0pO1xuICB2YXIgZmlyc3RDbGlwcGluZ1BhcmVudCA9IGNsaXBwaW5nUGFyZW50c1swXTtcbiAgdmFyIGNsaXBwaW5nUmVjdCA9IGNsaXBwaW5nUGFyZW50cy5yZWR1Y2UoZnVuY3Rpb24gKGFjY1JlY3QsIGNsaXBwaW5nUGFyZW50KSB7XG4gICAgdmFyIHJlY3QgPSBnZXRDbGllbnRSZWN0RnJvbU1peGVkVHlwZShlbGVtZW50LCBjbGlwcGluZ1BhcmVudCwgc3RyYXRlZ3kpO1xuICAgIGFjY1JlY3QudG9wID0gbWF4KHJlY3QudG9wLCBhY2NSZWN0LnRvcCk7XG4gICAgYWNjUmVjdC5yaWdodCA9IG1pbihyZWN0LnJpZ2h0LCBhY2NSZWN0LnJpZ2h0KTtcbiAgICBhY2NSZWN0LmJvdHRvbSA9IG1pbihyZWN0LmJvdHRvbSwgYWNjUmVjdC5ib3R0b20pO1xuICAgIGFjY1JlY3QubGVmdCA9IG1heChyZWN0LmxlZnQsIGFjY1JlY3QubGVmdCk7XG4gICAgcmV0dXJuIGFjY1JlY3Q7XG4gIH0sIGdldENsaWVudFJlY3RGcm9tTWl4ZWRUeXBlKGVsZW1lbnQsIGZpcnN0Q2xpcHBpbmdQYXJlbnQsIHN0cmF0ZWd5KSk7XG4gIGNsaXBwaW5nUmVjdC53aWR0aCA9IGNsaXBwaW5nUmVjdC5yaWdodCAtIGNsaXBwaW5nUmVjdC5sZWZ0O1xuICBjbGlwcGluZ1JlY3QuaGVpZ2h0ID0gY2xpcHBpbmdSZWN0LmJvdHRvbSAtIGNsaXBwaW5nUmVjdC50b3A7XG4gIGNsaXBwaW5nUmVjdC54ID0gY2xpcHBpbmdSZWN0LmxlZnQ7XG4gIGNsaXBwaW5nUmVjdC55ID0gY2xpcHBpbmdSZWN0LnRvcDtcbiAgcmV0dXJuIGNsaXBwaW5nUmVjdDtcbn0iLCAiaW1wb3J0IGdldEJhc2VQbGFjZW1lbnQgZnJvbSBcIi4vZ2V0QmFzZVBsYWNlbWVudC5qc1wiO1xuaW1wb3J0IGdldFZhcmlhdGlvbiBmcm9tIFwiLi9nZXRWYXJpYXRpb24uanNcIjtcbmltcG9ydCBnZXRNYWluQXhpc0Zyb21QbGFjZW1lbnQgZnJvbSBcIi4vZ2V0TWFpbkF4aXNGcm9tUGxhY2VtZW50LmpzXCI7XG5pbXBvcnQgeyB0b3AsIHJpZ2h0LCBib3R0b20sIGxlZnQsIHN0YXJ0LCBlbmQgfSBmcm9tIFwiLi4vZW51bXMuanNcIjtcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGNvbXB1dGVPZmZzZXRzKF9yZWYpIHtcbiAgdmFyIHJlZmVyZW5jZSA9IF9yZWYucmVmZXJlbmNlLFxuICAgICAgZWxlbWVudCA9IF9yZWYuZWxlbWVudCxcbiAgICAgIHBsYWNlbWVudCA9IF9yZWYucGxhY2VtZW50O1xuICB2YXIgYmFzZVBsYWNlbWVudCA9IHBsYWNlbWVudCA/IGdldEJhc2VQbGFjZW1lbnQocGxhY2VtZW50KSA6IG51bGw7XG4gIHZhciB2YXJpYXRpb24gPSBwbGFjZW1lbnQgPyBnZXRWYXJpYXRpb24ocGxhY2VtZW50KSA6IG51bGw7XG4gIHZhciBjb21tb25YID0gcmVmZXJlbmNlLnggKyByZWZlcmVuY2Uud2lkdGggLyAyIC0gZWxlbWVudC53aWR0aCAvIDI7XG4gIHZhciBjb21tb25ZID0gcmVmZXJlbmNlLnkgKyByZWZlcmVuY2UuaGVpZ2h0IC8gMiAtIGVsZW1lbnQuaGVpZ2h0IC8gMjtcbiAgdmFyIG9mZnNldHM7XG5cbiAgc3dpdGNoIChiYXNlUGxhY2VtZW50KSB7XG4gICAgY2FzZSB0b3A6XG4gICAgICBvZmZzZXRzID0ge1xuICAgICAgICB4OiBjb21tb25YLFxuICAgICAgICB5OiByZWZlcmVuY2UueSAtIGVsZW1lbnQuaGVpZ2h0XG4gICAgICB9O1xuICAgICAgYnJlYWs7XG5cbiAgICBjYXNlIGJvdHRvbTpcbiAgICAgIG9mZnNldHMgPSB7XG4gICAgICAgIHg6IGNvbW1vblgsXG4gICAgICAgIHk6IHJlZmVyZW5jZS55ICsgcmVmZXJlbmNlLmhlaWdodFxuICAgICAgfTtcbiAgICAgIGJyZWFrO1xuXG4gICAgY2FzZSByaWdodDpcbiAgICAgIG9mZnNldHMgPSB7XG4gICAgICAgIHg6IHJlZmVyZW5jZS54ICsgcmVmZXJlbmNlLndpZHRoLFxuICAgICAgICB5OiBjb21tb25ZXG4gICAgICB9O1xuICAgICAgYnJlYWs7XG5cbiAgICBjYXNlIGxlZnQ6XG4gICAgICBvZmZzZXRzID0ge1xuICAgICAgICB4OiByZWZlcmVuY2UueCAtIGVsZW1lbnQud2lkdGgsXG4gICAgICAgIHk6IGNvbW1vbllcbiAgICAgIH07XG4gICAgICBicmVhaztcblxuICAgIGRlZmF1bHQ6XG4gICAgICBvZmZzZXRzID0ge1xuICAgICAgICB4OiByZWZlcmVuY2UueCxcbiAgICAgICAgeTogcmVmZXJlbmNlLnlcbiAgICAgIH07XG4gIH1cblxuICB2YXIgbWFpbkF4aXMgPSBiYXNlUGxhY2VtZW50ID8gZ2V0TWFpbkF4aXNGcm9tUGxhY2VtZW50KGJhc2VQbGFjZW1lbnQpIDogbnVsbDtcblxuICBpZiAobWFpbkF4aXMgIT0gbnVsbCkge1xuICAgIHZhciBsZW4gPSBtYWluQXhpcyA9PT0gJ3knID8gJ2hlaWdodCcgOiAnd2lkdGgnO1xuXG4gICAgc3dpdGNoICh2YXJpYXRpb24pIHtcbiAgICAgIGNhc2Ugc3RhcnQ6XG4gICAgICAgIG9mZnNldHNbbWFpbkF4aXNdID0gb2Zmc2V0c1ttYWluQXhpc10gLSAocmVmZXJlbmNlW2xlbl0gLyAyIC0gZWxlbWVudFtsZW5dIC8gMik7XG4gICAgICAgIGJyZWFrO1xuXG4gICAgICBjYXNlIGVuZDpcbiAgICAgICAgb2Zmc2V0c1ttYWluQXhpc10gPSBvZmZzZXRzW21haW5BeGlzXSArIChyZWZlcmVuY2VbbGVuXSAvIDIgLSBlbGVtZW50W2xlbl0gLyAyKTtcbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGRlZmF1bHQ6XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIG9mZnNldHM7XG59IiwgImltcG9ydCBnZXRDbGlwcGluZ1JlY3QgZnJvbSBcIi4uL2RvbS11dGlscy9nZXRDbGlwcGluZ1JlY3QuanNcIjtcbmltcG9ydCBnZXREb2N1bWVudEVsZW1lbnQgZnJvbSBcIi4uL2RvbS11dGlscy9nZXREb2N1bWVudEVsZW1lbnQuanNcIjtcbmltcG9ydCBnZXRCb3VuZGluZ0NsaWVudFJlY3QgZnJvbSBcIi4uL2RvbS11dGlscy9nZXRCb3VuZGluZ0NsaWVudFJlY3QuanNcIjtcbmltcG9ydCBjb21wdXRlT2Zmc2V0cyBmcm9tIFwiLi9jb21wdXRlT2Zmc2V0cy5qc1wiO1xuaW1wb3J0IHJlY3RUb0NsaWVudFJlY3QgZnJvbSBcIi4vcmVjdFRvQ2xpZW50UmVjdC5qc1wiO1xuaW1wb3J0IHsgY2xpcHBpbmdQYXJlbnRzLCByZWZlcmVuY2UsIHBvcHBlciwgYm90dG9tLCB0b3AsIHJpZ2h0LCBiYXNlUGxhY2VtZW50cywgdmlld3BvcnQgfSBmcm9tIFwiLi4vZW51bXMuanNcIjtcbmltcG9ydCB7IGlzRWxlbWVudCB9IGZyb20gXCIuLi9kb20tdXRpbHMvaW5zdGFuY2VPZi5qc1wiO1xuaW1wb3J0IG1lcmdlUGFkZGluZ09iamVjdCBmcm9tIFwiLi9tZXJnZVBhZGRpbmdPYmplY3QuanNcIjtcbmltcG9ydCBleHBhbmRUb0hhc2hNYXAgZnJvbSBcIi4vZXhwYW5kVG9IYXNoTWFwLmpzXCI7IC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBpbXBvcnQvbm8tdW51c2VkLW1vZHVsZXNcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gZGV0ZWN0T3ZlcmZsb3coc3RhdGUsIG9wdGlvbnMpIHtcbiAgaWYgKG9wdGlvbnMgPT09IHZvaWQgMCkge1xuICAgIG9wdGlvbnMgPSB7fTtcbiAgfVxuXG4gIHZhciBfb3B0aW9ucyA9IG9wdGlvbnMsXG4gICAgICBfb3B0aW9ucyRwbGFjZW1lbnQgPSBfb3B0aW9ucy5wbGFjZW1lbnQsXG4gICAgICBwbGFjZW1lbnQgPSBfb3B0aW9ucyRwbGFjZW1lbnQgPT09IHZvaWQgMCA/IHN0YXRlLnBsYWNlbWVudCA6IF9vcHRpb25zJHBsYWNlbWVudCxcbiAgICAgIF9vcHRpb25zJHN0cmF0ZWd5ID0gX29wdGlvbnMuc3RyYXRlZ3ksXG4gICAgICBzdHJhdGVneSA9IF9vcHRpb25zJHN0cmF0ZWd5ID09PSB2b2lkIDAgPyBzdGF0ZS5zdHJhdGVneSA6IF9vcHRpb25zJHN0cmF0ZWd5LFxuICAgICAgX29wdGlvbnMkYm91bmRhcnkgPSBfb3B0aW9ucy5ib3VuZGFyeSxcbiAgICAgIGJvdW5kYXJ5ID0gX29wdGlvbnMkYm91bmRhcnkgPT09IHZvaWQgMCA/IGNsaXBwaW5nUGFyZW50cyA6IF9vcHRpb25zJGJvdW5kYXJ5LFxuICAgICAgX29wdGlvbnMkcm9vdEJvdW5kYXJ5ID0gX29wdGlvbnMucm9vdEJvdW5kYXJ5LFxuICAgICAgcm9vdEJvdW5kYXJ5ID0gX29wdGlvbnMkcm9vdEJvdW5kYXJ5ID09PSB2b2lkIDAgPyB2aWV3cG9ydCA6IF9vcHRpb25zJHJvb3RCb3VuZGFyeSxcbiAgICAgIF9vcHRpb25zJGVsZW1lbnRDb250ZSA9IF9vcHRpb25zLmVsZW1lbnRDb250ZXh0LFxuICAgICAgZWxlbWVudENvbnRleHQgPSBfb3B0aW9ucyRlbGVtZW50Q29udGUgPT09IHZvaWQgMCA/IHBvcHBlciA6IF9vcHRpb25zJGVsZW1lbnRDb250ZSxcbiAgICAgIF9vcHRpb25zJGFsdEJvdW5kYXJ5ID0gX29wdGlvbnMuYWx0Qm91bmRhcnksXG4gICAgICBhbHRCb3VuZGFyeSA9IF9vcHRpb25zJGFsdEJvdW5kYXJ5ID09PSB2b2lkIDAgPyBmYWxzZSA6IF9vcHRpb25zJGFsdEJvdW5kYXJ5LFxuICAgICAgX29wdGlvbnMkcGFkZGluZyA9IF9vcHRpb25zLnBhZGRpbmcsXG4gICAgICBwYWRkaW5nID0gX29wdGlvbnMkcGFkZGluZyA9PT0gdm9pZCAwID8gMCA6IF9vcHRpb25zJHBhZGRpbmc7XG4gIHZhciBwYWRkaW5nT2JqZWN0ID0gbWVyZ2VQYWRkaW5nT2JqZWN0KHR5cGVvZiBwYWRkaW5nICE9PSAnbnVtYmVyJyA/IHBhZGRpbmcgOiBleHBhbmRUb0hhc2hNYXAocGFkZGluZywgYmFzZVBsYWNlbWVudHMpKTtcbiAgdmFyIGFsdENvbnRleHQgPSBlbGVtZW50Q29udGV4dCA9PT0gcG9wcGVyID8gcmVmZXJlbmNlIDogcG9wcGVyO1xuICB2YXIgcG9wcGVyUmVjdCA9IHN0YXRlLnJlY3RzLnBvcHBlcjtcbiAgdmFyIGVsZW1lbnQgPSBzdGF0ZS5lbGVtZW50c1thbHRCb3VuZGFyeSA/IGFsdENvbnRleHQgOiBlbGVtZW50Q29udGV4dF07XG4gIHZhciBjbGlwcGluZ0NsaWVudFJlY3QgPSBnZXRDbGlwcGluZ1JlY3QoaXNFbGVtZW50KGVsZW1lbnQpID8gZWxlbWVudCA6IGVsZW1lbnQuY29udGV4dEVsZW1lbnQgfHwgZ2V0RG9jdW1lbnRFbGVtZW50KHN0YXRlLmVsZW1lbnRzLnBvcHBlciksIGJvdW5kYXJ5LCByb290Qm91bmRhcnksIHN0cmF0ZWd5KTtcbiAgdmFyIHJlZmVyZW5jZUNsaWVudFJlY3QgPSBnZXRCb3VuZGluZ0NsaWVudFJlY3Qoc3RhdGUuZWxlbWVudHMucmVmZXJlbmNlKTtcbiAgdmFyIHBvcHBlck9mZnNldHMgPSBjb21wdXRlT2Zmc2V0cyh7XG4gICAgcmVmZXJlbmNlOiByZWZlcmVuY2VDbGllbnRSZWN0LFxuICAgIGVsZW1lbnQ6IHBvcHBlclJlY3QsXG4gICAgc3RyYXRlZ3k6ICdhYnNvbHV0ZScsXG4gICAgcGxhY2VtZW50OiBwbGFjZW1lbnRcbiAgfSk7XG4gIHZhciBwb3BwZXJDbGllbnRSZWN0ID0gcmVjdFRvQ2xpZW50UmVjdChPYmplY3QuYXNzaWduKHt9LCBwb3BwZXJSZWN0LCBwb3BwZXJPZmZzZXRzKSk7XG4gIHZhciBlbGVtZW50Q2xpZW50UmVjdCA9IGVsZW1lbnRDb250ZXh0ID09PSBwb3BwZXIgPyBwb3BwZXJDbGllbnRSZWN0IDogcmVmZXJlbmNlQ2xpZW50UmVjdDsgLy8gcG9zaXRpdmUgPSBvdmVyZmxvd2luZyB0aGUgY2xpcHBpbmcgcmVjdFxuICAvLyAwIG9yIG5lZ2F0aXZlID0gd2l0aGluIHRoZSBjbGlwcGluZyByZWN0XG5cbiAgdmFyIG92ZXJmbG93T2Zmc2V0cyA9IHtcbiAgICB0b3A6IGNsaXBwaW5nQ2xpZW50UmVjdC50b3AgLSBlbGVtZW50Q2xpZW50UmVjdC50b3AgKyBwYWRkaW5nT2JqZWN0LnRvcCxcbiAgICBib3R0b206IGVsZW1lbnRDbGllbnRSZWN0LmJvdHRvbSAtIGNsaXBwaW5nQ2xpZW50UmVjdC5ib3R0b20gKyBwYWRkaW5nT2JqZWN0LmJvdHRvbSxcbiAgICBsZWZ0OiBjbGlwcGluZ0NsaWVudFJlY3QubGVmdCAtIGVsZW1lbnRDbGllbnRSZWN0LmxlZnQgKyBwYWRkaW5nT2JqZWN0LmxlZnQsXG4gICAgcmlnaHQ6IGVsZW1lbnRDbGllbnRSZWN0LnJpZ2h0IC0gY2xpcHBpbmdDbGllbnRSZWN0LnJpZ2h0ICsgcGFkZGluZ09iamVjdC5yaWdodFxuICB9O1xuICB2YXIgb2Zmc2V0RGF0YSA9IHN0YXRlLm1vZGlmaWVyc0RhdGEub2Zmc2V0OyAvLyBPZmZzZXRzIGNhbiBiZSBhcHBsaWVkIG9ubHkgdG8gdGhlIHBvcHBlciBlbGVtZW50XG5cbiAgaWYgKGVsZW1lbnRDb250ZXh0ID09PSBwb3BwZXIgJiYgb2Zmc2V0RGF0YSkge1xuICAgIHZhciBvZmZzZXQgPSBvZmZzZXREYXRhW3BsYWNlbWVudF07XG4gICAgT2JqZWN0LmtleXMob3ZlcmZsb3dPZmZzZXRzKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgIHZhciBtdWx0aXBseSA9IFtyaWdodCwgYm90dG9tXS5pbmRleE9mKGtleSkgPj0gMCA/IDEgOiAtMTtcbiAgICAgIHZhciBheGlzID0gW3RvcCwgYm90dG9tXS5pbmRleE9mKGtleSkgPj0gMCA/ICd5JyA6ICd4JztcbiAgICAgIG92ZXJmbG93T2Zmc2V0c1trZXldICs9IG9mZnNldFtheGlzXSAqIG11bHRpcGx5O1xuICAgIH0pO1xuICB9XG5cbiAgcmV0dXJuIG92ZXJmbG93T2Zmc2V0cztcbn0iLCAiaW1wb3J0IGdldFZhcmlhdGlvbiBmcm9tIFwiLi9nZXRWYXJpYXRpb24uanNcIjtcbmltcG9ydCB7IHZhcmlhdGlvblBsYWNlbWVudHMsIGJhc2VQbGFjZW1lbnRzLCBwbGFjZW1lbnRzIGFzIGFsbFBsYWNlbWVudHMgfSBmcm9tIFwiLi4vZW51bXMuanNcIjtcbmltcG9ydCBkZXRlY3RPdmVyZmxvdyBmcm9tIFwiLi9kZXRlY3RPdmVyZmxvdy5qc1wiO1xuaW1wb3J0IGdldEJhc2VQbGFjZW1lbnQgZnJvbSBcIi4vZ2V0QmFzZVBsYWNlbWVudC5qc1wiO1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gY29tcHV0ZUF1dG9QbGFjZW1lbnQoc3RhdGUsIG9wdGlvbnMpIHtcbiAgaWYgKG9wdGlvbnMgPT09IHZvaWQgMCkge1xuICAgIG9wdGlvbnMgPSB7fTtcbiAgfVxuXG4gIHZhciBfb3B0aW9ucyA9IG9wdGlvbnMsXG4gICAgICBwbGFjZW1lbnQgPSBfb3B0aW9ucy5wbGFjZW1lbnQsXG4gICAgICBib3VuZGFyeSA9IF9vcHRpb25zLmJvdW5kYXJ5LFxuICAgICAgcm9vdEJvdW5kYXJ5ID0gX29wdGlvbnMucm9vdEJvdW5kYXJ5LFxuICAgICAgcGFkZGluZyA9IF9vcHRpb25zLnBhZGRpbmcsXG4gICAgICBmbGlwVmFyaWF0aW9ucyA9IF9vcHRpb25zLmZsaXBWYXJpYXRpb25zLFxuICAgICAgX29wdGlvbnMkYWxsb3dlZEF1dG9QID0gX29wdGlvbnMuYWxsb3dlZEF1dG9QbGFjZW1lbnRzLFxuICAgICAgYWxsb3dlZEF1dG9QbGFjZW1lbnRzID0gX29wdGlvbnMkYWxsb3dlZEF1dG9QID09PSB2b2lkIDAgPyBhbGxQbGFjZW1lbnRzIDogX29wdGlvbnMkYWxsb3dlZEF1dG9QO1xuICB2YXIgdmFyaWF0aW9uID0gZ2V0VmFyaWF0aW9uKHBsYWNlbWVudCk7XG4gIHZhciBwbGFjZW1lbnRzID0gdmFyaWF0aW9uID8gZmxpcFZhcmlhdGlvbnMgPyB2YXJpYXRpb25QbGFjZW1lbnRzIDogdmFyaWF0aW9uUGxhY2VtZW50cy5maWx0ZXIoZnVuY3Rpb24gKHBsYWNlbWVudCkge1xuICAgIHJldHVybiBnZXRWYXJpYXRpb24ocGxhY2VtZW50KSA9PT0gdmFyaWF0aW9uO1xuICB9KSA6IGJhc2VQbGFjZW1lbnRzO1xuICB2YXIgYWxsb3dlZFBsYWNlbWVudHMgPSBwbGFjZW1lbnRzLmZpbHRlcihmdW5jdGlvbiAocGxhY2VtZW50KSB7XG4gICAgcmV0dXJuIGFsbG93ZWRBdXRvUGxhY2VtZW50cy5pbmRleE9mKHBsYWNlbWVudCkgPj0gMDtcbiAgfSk7XG5cbiAgaWYgKGFsbG93ZWRQbGFjZW1lbnRzLmxlbmd0aCA9PT0gMCkge1xuICAgIGFsbG93ZWRQbGFjZW1lbnRzID0gcGxhY2VtZW50cztcbiAgfSAvLyAkRmxvd0ZpeE1lW2luY29tcGF0aWJsZS10eXBlXTogRmxvdyBzZWVtcyB0byBoYXZlIHByb2JsZW1zIHdpdGggdHdvIGFycmF5IHVuaW9ucy4uLlxuXG5cbiAgdmFyIG92ZXJmbG93cyA9IGFsbG93ZWRQbGFjZW1lbnRzLnJlZHVjZShmdW5jdGlvbiAoYWNjLCBwbGFjZW1lbnQpIHtcbiAgICBhY2NbcGxhY2VtZW50XSA9IGRldGVjdE92ZXJmbG93KHN0YXRlLCB7XG4gICAgICBwbGFjZW1lbnQ6IHBsYWNlbWVudCxcbiAgICAgIGJvdW5kYXJ5OiBib3VuZGFyeSxcbiAgICAgIHJvb3RCb3VuZGFyeTogcm9vdEJvdW5kYXJ5LFxuICAgICAgcGFkZGluZzogcGFkZGluZ1xuICAgIH0pW2dldEJhc2VQbGFjZW1lbnQocGxhY2VtZW50KV07XG4gICAgcmV0dXJuIGFjYztcbiAgfSwge30pO1xuICByZXR1cm4gT2JqZWN0LmtleXMob3ZlcmZsb3dzKS5zb3J0KGZ1bmN0aW9uIChhLCBiKSB7XG4gICAgcmV0dXJuIG92ZXJmbG93c1thXSAtIG92ZXJmbG93c1tiXTtcbiAgfSk7XG59IiwgImltcG9ydCBnZXRPcHBvc2l0ZVBsYWNlbWVudCBmcm9tIFwiLi4vdXRpbHMvZ2V0T3Bwb3NpdGVQbGFjZW1lbnQuanNcIjtcbmltcG9ydCBnZXRCYXNlUGxhY2VtZW50IGZyb20gXCIuLi91dGlscy9nZXRCYXNlUGxhY2VtZW50LmpzXCI7XG5pbXBvcnQgZ2V0T3Bwb3NpdGVWYXJpYXRpb25QbGFjZW1lbnQgZnJvbSBcIi4uL3V0aWxzL2dldE9wcG9zaXRlVmFyaWF0aW9uUGxhY2VtZW50LmpzXCI7XG5pbXBvcnQgZGV0ZWN0T3ZlcmZsb3cgZnJvbSBcIi4uL3V0aWxzL2RldGVjdE92ZXJmbG93LmpzXCI7XG5pbXBvcnQgY29tcHV0ZUF1dG9QbGFjZW1lbnQgZnJvbSBcIi4uL3V0aWxzL2NvbXB1dGVBdXRvUGxhY2VtZW50LmpzXCI7XG5pbXBvcnQgeyBib3R0b20sIHRvcCwgc3RhcnQsIHJpZ2h0LCBsZWZ0LCBhdXRvIH0gZnJvbSBcIi4uL2VudW1zLmpzXCI7XG5pbXBvcnQgZ2V0VmFyaWF0aW9uIGZyb20gXCIuLi91dGlscy9nZXRWYXJpYXRpb24uanNcIjsgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGltcG9ydC9uby11bnVzZWQtbW9kdWxlc1xuXG5mdW5jdGlvbiBnZXRFeHBhbmRlZEZhbGxiYWNrUGxhY2VtZW50cyhwbGFjZW1lbnQpIHtcbiAgaWYgKGdldEJhc2VQbGFjZW1lbnQocGxhY2VtZW50KSA9PT0gYXV0bykge1xuICAgIHJldHVybiBbXTtcbiAgfVxuXG4gIHZhciBvcHBvc2l0ZVBsYWNlbWVudCA9IGdldE9wcG9zaXRlUGxhY2VtZW50KHBsYWNlbWVudCk7XG4gIHJldHVybiBbZ2V0T3Bwb3NpdGVWYXJpYXRpb25QbGFjZW1lbnQocGxhY2VtZW50KSwgb3Bwb3NpdGVQbGFjZW1lbnQsIGdldE9wcG9zaXRlVmFyaWF0aW9uUGxhY2VtZW50KG9wcG9zaXRlUGxhY2VtZW50KV07XG59XG5cbmZ1bmN0aW9uIGZsaXAoX3JlZikge1xuICB2YXIgc3RhdGUgPSBfcmVmLnN0YXRlLFxuICAgICAgb3B0aW9ucyA9IF9yZWYub3B0aW9ucyxcbiAgICAgIG5hbWUgPSBfcmVmLm5hbWU7XG5cbiAgaWYgKHN0YXRlLm1vZGlmaWVyc0RhdGFbbmFtZV0uX3NraXApIHtcbiAgICByZXR1cm47XG4gIH1cblxuICB2YXIgX29wdGlvbnMkbWFpbkF4aXMgPSBvcHRpb25zLm1haW5BeGlzLFxuICAgICAgY2hlY2tNYWluQXhpcyA9IF9vcHRpb25zJG1haW5BeGlzID09PSB2b2lkIDAgPyB0cnVlIDogX29wdGlvbnMkbWFpbkF4aXMsXG4gICAgICBfb3B0aW9ucyRhbHRBeGlzID0gb3B0aW9ucy5hbHRBeGlzLFxuICAgICAgY2hlY2tBbHRBeGlzID0gX29wdGlvbnMkYWx0QXhpcyA9PT0gdm9pZCAwID8gdHJ1ZSA6IF9vcHRpb25zJGFsdEF4aXMsXG4gICAgICBzcGVjaWZpZWRGYWxsYmFja1BsYWNlbWVudHMgPSBvcHRpb25zLmZhbGxiYWNrUGxhY2VtZW50cyxcbiAgICAgIHBhZGRpbmcgPSBvcHRpb25zLnBhZGRpbmcsXG4gICAgICBib3VuZGFyeSA9IG9wdGlvbnMuYm91bmRhcnksXG4gICAgICByb290Qm91bmRhcnkgPSBvcHRpb25zLnJvb3RCb3VuZGFyeSxcbiAgICAgIGFsdEJvdW5kYXJ5ID0gb3B0aW9ucy5hbHRCb3VuZGFyeSxcbiAgICAgIF9vcHRpb25zJGZsaXBWYXJpYXRpbyA9IG9wdGlvbnMuZmxpcFZhcmlhdGlvbnMsXG4gICAgICBmbGlwVmFyaWF0aW9ucyA9IF9vcHRpb25zJGZsaXBWYXJpYXRpbyA9PT0gdm9pZCAwID8gdHJ1ZSA6IF9vcHRpb25zJGZsaXBWYXJpYXRpbyxcbiAgICAgIGFsbG93ZWRBdXRvUGxhY2VtZW50cyA9IG9wdGlvbnMuYWxsb3dlZEF1dG9QbGFjZW1lbnRzO1xuICB2YXIgcHJlZmVycmVkUGxhY2VtZW50ID0gc3RhdGUub3B0aW9ucy5wbGFjZW1lbnQ7XG4gIHZhciBiYXNlUGxhY2VtZW50ID0gZ2V0QmFzZVBsYWNlbWVudChwcmVmZXJyZWRQbGFjZW1lbnQpO1xuICB2YXIgaXNCYXNlUGxhY2VtZW50ID0gYmFzZVBsYWNlbWVudCA9PT0gcHJlZmVycmVkUGxhY2VtZW50O1xuICB2YXIgZmFsbGJhY2tQbGFjZW1lbnRzID0gc3BlY2lmaWVkRmFsbGJhY2tQbGFjZW1lbnRzIHx8IChpc0Jhc2VQbGFjZW1lbnQgfHwgIWZsaXBWYXJpYXRpb25zID8gW2dldE9wcG9zaXRlUGxhY2VtZW50KHByZWZlcnJlZFBsYWNlbWVudCldIDogZ2V0RXhwYW5kZWRGYWxsYmFja1BsYWNlbWVudHMocHJlZmVycmVkUGxhY2VtZW50KSk7XG4gIHZhciBwbGFjZW1lbnRzID0gW3ByZWZlcnJlZFBsYWNlbWVudF0uY29uY2F0KGZhbGxiYWNrUGxhY2VtZW50cykucmVkdWNlKGZ1bmN0aW9uIChhY2MsIHBsYWNlbWVudCkge1xuICAgIHJldHVybiBhY2MuY29uY2F0KGdldEJhc2VQbGFjZW1lbnQocGxhY2VtZW50KSA9PT0gYXV0byA/IGNvbXB1dGVBdXRvUGxhY2VtZW50KHN0YXRlLCB7XG4gICAgICBwbGFjZW1lbnQ6IHBsYWNlbWVudCxcbiAgICAgIGJvdW5kYXJ5OiBib3VuZGFyeSxcbiAgICAgIHJvb3RCb3VuZGFyeTogcm9vdEJvdW5kYXJ5LFxuICAgICAgcGFkZGluZzogcGFkZGluZyxcbiAgICAgIGZsaXBWYXJpYXRpb25zOiBmbGlwVmFyaWF0aW9ucyxcbiAgICAgIGFsbG93ZWRBdXRvUGxhY2VtZW50czogYWxsb3dlZEF1dG9QbGFjZW1lbnRzXG4gICAgfSkgOiBwbGFjZW1lbnQpO1xuICB9LCBbXSk7XG4gIHZhciByZWZlcmVuY2VSZWN0ID0gc3RhdGUucmVjdHMucmVmZXJlbmNlO1xuICB2YXIgcG9wcGVyUmVjdCA9IHN0YXRlLnJlY3RzLnBvcHBlcjtcbiAgdmFyIGNoZWNrc01hcCA9IG5ldyBNYXAoKTtcbiAgdmFyIG1ha2VGYWxsYmFja0NoZWNrcyA9IHRydWU7XG4gIHZhciBmaXJzdEZpdHRpbmdQbGFjZW1lbnQgPSBwbGFjZW1lbnRzWzBdO1xuXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgcGxhY2VtZW50cy5sZW5ndGg7IGkrKykge1xuICAgIHZhciBwbGFjZW1lbnQgPSBwbGFjZW1lbnRzW2ldO1xuXG4gICAgdmFyIF9iYXNlUGxhY2VtZW50ID0gZ2V0QmFzZVBsYWNlbWVudChwbGFjZW1lbnQpO1xuXG4gICAgdmFyIGlzU3RhcnRWYXJpYXRpb24gPSBnZXRWYXJpYXRpb24ocGxhY2VtZW50KSA9PT0gc3RhcnQ7XG4gICAgdmFyIGlzVmVydGljYWwgPSBbdG9wLCBib3R0b21dLmluZGV4T2YoX2Jhc2VQbGFjZW1lbnQpID49IDA7XG4gICAgdmFyIGxlbiA9IGlzVmVydGljYWwgPyAnd2lkdGgnIDogJ2hlaWdodCc7XG4gICAgdmFyIG92ZXJmbG93ID0gZGV0ZWN0T3ZlcmZsb3coc3RhdGUsIHtcbiAgICAgIHBsYWNlbWVudDogcGxhY2VtZW50LFxuICAgICAgYm91bmRhcnk6IGJvdW5kYXJ5LFxuICAgICAgcm9vdEJvdW5kYXJ5OiByb290Qm91bmRhcnksXG4gICAgICBhbHRCb3VuZGFyeTogYWx0Qm91bmRhcnksXG4gICAgICBwYWRkaW5nOiBwYWRkaW5nXG4gICAgfSk7XG4gICAgdmFyIG1haW5WYXJpYXRpb25TaWRlID0gaXNWZXJ0aWNhbCA/IGlzU3RhcnRWYXJpYXRpb24gPyByaWdodCA6IGxlZnQgOiBpc1N0YXJ0VmFyaWF0aW9uID8gYm90dG9tIDogdG9wO1xuXG4gICAgaWYgKHJlZmVyZW5jZVJlY3RbbGVuXSA+IHBvcHBlclJlY3RbbGVuXSkge1xuICAgICAgbWFpblZhcmlhdGlvblNpZGUgPSBnZXRPcHBvc2l0ZVBsYWNlbWVudChtYWluVmFyaWF0aW9uU2lkZSk7XG4gICAgfVxuXG4gICAgdmFyIGFsdFZhcmlhdGlvblNpZGUgPSBnZXRPcHBvc2l0ZVBsYWNlbWVudChtYWluVmFyaWF0aW9uU2lkZSk7XG4gICAgdmFyIGNoZWNrcyA9IFtdO1xuXG4gICAgaWYgKGNoZWNrTWFpbkF4aXMpIHtcbiAgICAgIGNoZWNrcy5wdXNoKG92ZXJmbG93W19iYXNlUGxhY2VtZW50XSA8PSAwKTtcbiAgICB9XG5cbiAgICBpZiAoY2hlY2tBbHRBeGlzKSB7XG4gICAgICBjaGVja3MucHVzaChvdmVyZmxvd1ttYWluVmFyaWF0aW9uU2lkZV0gPD0gMCwgb3ZlcmZsb3dbYWx0VmFyaWF0aW9uU2lkZV0gPD0gMCk7XG4gICAgfVxuXG4gICAgaWYgKGNoZWNrcy5ldmVyeShmdW5jdGlvbiAoY2hlY2spIHtcbiAgICAgIHJldHVybiBjaGVjaztcbiAgICB9KSkge1xuICAgICAgZmlyc3RGaXR0aW5nUGxhY2VtZW50ID0gcGxhY2VtZW50O1xuICAgICAgbWFrZUZhbGxiYWNrQ2hlY2tzID0gZmFsc2U7XG4gICAgICBicmVhaztcbiAgICB9XG5cbiAgICBjaGVja3NNYXAuc2V0KHBsYWNlbWVudCwgY2hlY2tzKTtcbiAgfVxuXG4gIGlmIChtYWtlRmFsbGJhY2tDaGVja3MpIHtcbiAgICAvLyBgMmAgbWF5IGJlIGRlc2lyZWQgaW4gc29tZSBjYXNlcyBcdTIwMTMgcmVzZWFyY2ggbGF0ZXJcbiAgICB2YXIgbnVtYmVyT2ZDaGVja3MgPSBmbGlwVmFyaWF0aW9ucyA/IDMgOiAxO1xuXG4gICAgdmFyIF9sb29wID0gZnVuY3Rpb24gX2xvb3AoX2kpIHtcbiAgICAgIHZhciBmaXR0aW5nUGxhY2VtZW50ID0gcGxhY2VtZW50cy5maW5kKGZ1bmN0aW9uIChwbGFjZW1lbnQpIHtcbiAgICAgICAgdmFyIGNoZWNrcyA9IGNoZWNrc01hcC5nZXQocGxhY2VtZW50KTtcblxuICAgICAgICBpZiAoY2hlY2tzKSB7XG4gICAgICAgICAgcmV0dXJuIGNoZWNrcy5zbGljZSgwLCBfaSkuZXZlcnkoZnVuY3Rpb24gKGNoZWNrKSB7XG4gICAgICAgICAgICByZXR1cm4gY2hlY2s7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICBpZiAoZml0dGluZ1BsYWNlbWVudCkge1xuICAgICAgICBmaXJzdEZpdHRpbmdQbGFjZW1lbnQgPSBmaXR0aW5nUGxhY2VtZW50O1xuICAgICAgICByZXR1cm4gXCJicmVha1wiO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBmb3IgKHZhciBfaSA9IG51bWJlck9mQ2hlY2tzOyBfaSA+IDA7IF9pLS0pIHtcbiAgICAgIHZhciBfcmV0ID0gX2xvb3AoX2kpO1xuXG4gICAgICBpZiAoX3JldCA9PT0gXCJicmVha1wiKSBicmVhaztcbiAgICB9XG4gIH1cblxuICBpZiAoc3RhdGUucGxhY2VtZW50ICE9PSBmaXJzdEZpdHRpbmdQbGFjZW1lbnQpIHtcbiAgICBzdGF0ZS5tb2RpZmllcnNEYXRhW25hbWVdLl9za2lwID0gdHJ1ZTtcbiAgICBzdGF0ZS5wbGFjZW1lbnQgPSBmaXJzdEZpdHRpbmdQbGFjZW1lbnQ7XG4gICAgc3RhdGUucmVzZXQgPSB0cnVlO1xuICB9XG59IC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBpbXBvcnQvbm8tdW51c2VkLW1vZHVsZXNcblxuXG5leHBvcnQgZGVmYXVsdCB7XG4gIG5hbWU6ICdmbGlwJyxcbiAgZW5hYmxlZDogdHJ1ZSxcbiAgcGhhc2U6ICdtYWluJyxcbiAgZm46IGZsaXAsXG4gIHJlcXVpcmVzSWZFeGlzdHM6IFsnb2Zmc2V0J10sXG4gIGRhdGE6IHtcbiAgICBfc2tpcDogZmFsc2VcbiAgfVxufTsiLCAiaW1wb3J0IHsgdG9wLCBib3R0b20sIGxlZnQsIHJpZ2h0IH0gZnJvbSBcIi4uL2VudW1zLmpzXCI7XG5pbXBvcnQgZGV0ZWN0T3ZlcmZsb3cgZnJvbSBcIi4uL3V0aWxzL2RldGVjdE92ZXJmbG93LmpzXCI7XG5cbmZ1bmN0aW9uIGdldFNpZGVPZmZzZXRzKG92ZXJmbG93LCByZWN0LCBwcmV2ZW50ZWRPZmZzZXRzKSB7XG4gIGlmIChwcmV2ZW50ZWRPZmZzZXRzID09PSB2b2lkIDApIHtcbiAgICBwcmV2ZW50ZWRPZmZzZXRzID0ge1xuICAgICAgeDogMCxcbiAgICAgIHk6IDBcbiAgICB9O1xuICB9XG5cbiAgcmV0dXJuIHtcbiAgICB0b3A6IG92ZXJmbG93LnRvcCAtIHJlY3QuaGVpZ2h0IC0gcHJldmVudGVkT2Zmc2V0cy55LFxuICAgIHJpZ2h0OiBvdmVyZmxvdy5yaWdodCAtIHJlY3Qud2lkdGggKyBwcmV2ZW50ZWRPZmZzZXRzLngsXG4gICAgYm90dG9tOiBvdmVyZmxvdy5ib3R0b20gLSByZWN0LmhlaWdodCArIHByZXZlbnRlZE9mZnNldHMueSxcbiAgICBsZWZ0OiBvdmVyZmxvdy5sZWZ0IC0gcmVjdC53aWR0aCAtIHByZXZlbnRlZE9mZnNldHMueFxuICB9O1xufVxuXG5mdW5jdGlvbiBpc0FueVNpZGVGdWxseUNsaXBwZWQob3ZlcmZsb3cpIHtcbiAgcmV0dXJuIFt0b3AsIHJpZ2h0LCBib3R0b20sIGxlZnRdLnNvbWUoZnVuY3Rpb24gKHNpZGUpIHtcbiAgICByZXR1cm4gb3ZlcmZsb3dbc2lkZV0gPj0gMDtcbiAgfSk7XG59XG5cbmZ1bmN0aW9uIGhpZGUoX3JlZikge1xuICB2YXIgc3RhdGUgPSBfcmVmLnN0YXRlLFxuICAgICAgbmFtZSA9IF9yZWYubmFtZTtcbiAgdmFyIHJlZmVyZW5jZVJlY3QgPSBzdGF0ZS5yZWN0cy5yZWZlcmVuY2U7XG4gIHZhciBwb3BwZXJSZWN0ID0gc3RhdGUucmVjdHMucG9wcGVyO1xuICB2YXIgcHJldmVudGVkT2Zmc2V0cyA9IHN0YXRlLm1vZGlmaWVyc0RhdGEucHJldmVudE92ZXJmbG93O1xuICB2YXIgcmVmZXJlbmNlT3ZlcmZsb3cgPSBkZXRlY3RPdmVyZmxvdyhzdGF0ZSwge1xuICAgIGVsZW1lbnRDb250ZXh0OiAncmVmZXJlbmNlJ1xuICB9KTtcbiAgdmFyIHBvcHBlckFsdE92ZXJmbG93ID0gZGV0ZWN0T3ZlcmZsb3coc3RhdGUsIHtcbiAgICBhbHRCb3VuZGFyeTogdHJ1ZVxuICB9KTtcbiAgdmFyIHJlZmVyZW5jZUNsaXBwaW5nT2Zmc2V0cyA9IGdldFNpZGVPZmZzZXRzKHJlZmVyZW5jZU92ZXJmbG93LCByZWZlcmVuY2VSZWN0KTtcbiAgdmFyIHBvcHBlckVzY2FwZU9mZnNldHMgPSBnZXRTaWRlT2Zmc2V0cyhwb3BwZXJBbHRPdmVyZmxvdywgcG9wcGVyUmVjdCwgcHJldmVudGVkT2Zmc2V0cyk7XG4gIHZhciBpc1JlZmVyZW5jZUhpZGRlbiA9IGlzQW55U2lkZUZ1bGx5Q2xpcHBlZChyZWZlcmVuY2VDbGlwcGluZ09mZnNldHMpO1xuICB2YXIgaGFzUG9wcGVyRXNjYXBlZCA9IGlzQW55U2lkZUZ1bGx5Q2xpcHBlZChwb3BwZXJFc2NhcGVPZmZzZXRzKTtcbiAgc3RhdGUubW9kaWZpZXJzRGF0YVtuYW1lXSA9IHtcbiAgICByZWZlcmVuY2VDbGlwcGluZ09mZnNldHM6IHJlZmVyZW5jZUNsaXBwaW5nT2Zmc2V0cyxcbiAgICBwb3BwZXJFc2NhcGVPZmZzZXRzOiBwb3BwZXJFc2NhcGVPZmZzZXRzLFxuICAgIGlzUmVmZXJlbmNlSGlkZGVuOiBpc1JlZmVyZW5jZUhpZGRlbixcbiAgICBoYXNQb3BwZXJFc2NhcGVkOiBoYXNQb3BwZXJFc2NhcGVkXG4gIH07XG4gIHN0YXRlLmF0dHJpYnV0ZXMucG9wcGVyID0gT2JqZWN0LmFzc2lnbih7fSwgc3RhdGUuYXR0cmlidXRlcy5wb3BwZXIsIHtcbiAgICAnZGF0YS1wb3BwZXItcmVmZXJlbmNlLWhpZGRlbic6IGlzUmVmZXJlbmNlSGlkZGVuLFxuICAgICdkYXRhLXBvcHBlci1lc2NhcGVkJzogaGFzUG9wcGVyRXNjYXBlZFxuICB9KTtcbn0gLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGltcG9ydC9uby11bnVzZWQtbW9kdWxlc1xuXG5cbmV4cG9ydCBkZWZhdWx0IHtcbiAgbmFtZTogJ2hpZGUnLFxuICBlbmFibGVkOiB0cnVlLFxuICBwaGFzZTogJ21haW4nLFxuICByZXF1aXJlc0lmRXhpc3RzOiBbJ3ByZXZlbnRPdmVyZmxvdyddLFxuICBmbjogaGlkZVxufTsiLCAiaW1wb3J0IGdldEJhc2VQbGFjZW1lbnQgZnJvbSBcIi4uL3V0aWxzL2dldEJhc2VQbGFjZW1lbnQuanNcIjtcbmltcG9ydCB7IHRvcCwgbGVmdCwgcmlnaHQsIHBsYWNlbWVudHMgfSBmcm9tIFwiLi4vZW51bXMuanNcIjsgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGltcG9ydC9uby11bnVzZWQtbW9kdWxlc1xuXG5leHBvcnQgZnVuY3Rpb24gZGlzdGFuY2VBbmRTa2lkZGluZ1RvWFkocGxhY2VtZW50LCByZWN0cywgb2Zmc2V0KSB7XG4gIHZhciBiYXNlUGxhY2VtZW50ID0gZ2V0QmFzZVBsYWNlbWVudChwbGFjZW1lbnQpO1xuICB2YXIgaW52ZXJ0RGlzdGFuY2UgPSBbbGVmdCwgdG9wXS5pbmRleE9mKGJhc2VQbGFjZW1lbnQpID49IDAgPyAtMSA6IDE7XG5cbiAgdmFyIF9yZWYgPSB0eXBlb2Ygb2Zmc2V0ID09PSAnZnVuY3Rpb24nID8gb2Zmc2V0KE9iamVjdC5hc3NpZ24oe30sIHJlY3RzLCB7XG4gICAgcGxhY2VtZW50OiBwbGFjZW1lbnRcbiAgfSkpIDogb2Zmc2V0LFxuICAgICAgc2tpZGRpbmcgPSBfcmVmWzBdLFxuICAgICAgZGlzdGFuY2UgPSBfcmVmWzFdO1xuXG4gIHNraWRkaW5nID0gc2tpZGRpbmcgfHwgMDtcbiAgZGlzdGFuY2UgPSAoZGlzdGFuY2UgfHwgMCkgKiBpbnZlcnREaXN0YW5jZTtcbiAgcmV0dXJuIFtsZWZ0LCByaWdodF0uaW5kZXhPZihiYXNlUGxhY2VtZW50KSA+PSAwID8ge1xuICAgIHg6IGRpc3RhbmNlLFxuICAgIHk6IHNraWRkaW5nXG4gIH0gOiB7XG4gICAgeDogc2tpZGRpbmcsXG4gICAgeTogZGlzdGFuY2VcbiAgfTtcbn1cblxuZnVuY3Rpb24gb2Zmc2V0KF9yZWYyKSB7XG4gIHZhciBzdGF0ZSA9IF9yZWYyLnN0YXRlLFxuICAgICAgb3B0aW9ucyA9IF9yZWYyLm9wdGlvbnMsXG4gICAgICBuYW1lID0gX3JlZjIubmFtZTtcbiAgdmFyIF9vcHRpb25zJG9mZnNldCA9IG9wdGlvbnMub2Zmc2V0LFxuICAgICAgb2Zmc2V0ID0gX29wdGlvbnMkb2Zmc2V0ID09PSB2b2lkIDAgPyBbMCwgMF0gOiBfb3B0aW9ucyRvZmZzZXQ7XG4gIHZhciBkYXRhID0gcGxhY2VtZW50cy5yZWR1Y2UoZnVuY3Rpb24gKGFjYywgcGxhY2VtZW50KSB7XG4gICAgYWNjW3BsYWNlbWVudF0gPSBkaXN0YW5jZUFuZFNraWRkaW5nVG9YWShwbGFjZW1lbnQsIHN0YXRlLnJlY3RzLCBvZmZzZXQpO1xuICAgIHJldHVybiBhY2M7XG4gIH0sIHt9KTtcbiAgdmFyIF9kYXRhJHN0YXRlJHBsYWNlbWVudCA9IGRhdGFbc3RhdGUucGxhY2VtZW50XSxcbiAgICAgIHggPSBfZGF0YSRzdGF0ZSRwbGFjZW1lbnQueCxcbiAgICAgIHkgPSBfZGF0YSRzdGF0ZSRwbGFjZW1lbnQueTtcblxuICBpZiAoc3RhdGUubW9kaWZpZXJzRGF0YS5wb3BwZXJPZmZzZXRzICE9IG51bGwpIHtcbiAgICBzdGF0ZS5tb2RpZmllcnNEYXRhLnBvcHBlck9mZnNldHMueCArPSB4O1xuICAgIHN0YXRlLm1vZGlmaWVyc0RhdGEucG9wcGVyT2Zmc2V0cy55ICs9IHk7XG4gIH1cblxuICBzdGF0ZS5tb2RpZmllcnNEYXRhW25hbWVdID0gZGF0YTtcbn0gLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGltcG9ydC9uby11bnVzZWQtbW9kdWxlc1xuXG5cbmV4cG9ydCBkZWZhdWx0IHtcbiAgbmFtZTogJ29mZnNldCcsXG4gIGVuYWJsZWQ6IHRydWUsXG4gIHBoYXNlOiAnbWFpbicsXG4gIHJlcXVpcmVzOiBbJ3BvcHBlck9mZnNldHMnXSxcbiAgZm46IG9mZnNldFxufTsiLCAiaW1wb3J0IGNvbXB1dGVPZmZzZXRzIGZyb20gXCIuLi91dGlscy9jb21wdXRlT2Zmc2V0cy5qc1wiO1xuXG5mdW5jdGlvbiBwb3BwZXJPZmZzZXRzKF9yZWYpIHtcbiAgdmFyIHN0YXRlID0gX3JlZi5zdGF0ZSxcbiAgICAgIG5hbWUgPSBfcmVmLm5hbWU7XG4gIC8vIE9mZnNldHMgYXJlIHRoZSBhY3R1YWwgcG9zaXRpb24gdGhlIHBvcHBlciBuZWVkcyB0byBoYXZlIHRvIGJlXG4gIC8vIHByb3Blcmx5IHBvc2l0aW9uZWQgbmVhciBpdHMgcmVmZXJlbmNlIGVsZW1lbnRcbiAgLy8gVGhpcyBpcyB0aGUgbW9zdCBiYXNpYyBwbGFjZW1lbnQsIGFuZCB3aWxsIGJlIGFkanVzdGVkIGJ5XG4gIC8vIHRoZSBtb2RpZmllcnMgaW4gdGhlIG5leHQgc3RlcFxuICBzdGF0ZS5tb2RpZmllcnNEYXRhW25hbWVdID0gY29tcHV0ZU9mZnNldHMoe1xuICAgIHJlZmVyZW5jZTogc3RhdGUucmVjdHMucmVmZXJlbmNlLFxuICAgIGVsZW1lbnQ6IHN0YXRlLnJlY3RzLnBvcHBlcixcbiAgICBzdHJhdGVneTogJ2Fic29sdXRlJyxcbiAgICBwbGFjZW1lbnQ6IHN0YXRlLnBsYWNlbWVudFxuICB9KTtcbn0gLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGltcG9ydC9uby11bnVzZWQtbW9kdWxlc1xuXG5cbmV4cG9ydCBkZWZhdWx0IHtcbiAgbmFtZTogJ3BvcHBlck9mZnNldHMnLFxuICBlbmFibGVkOiB0cnVlLFxuICBwaGFzZTogJ3JlYWQnLFxuICBmbjogcG9wcGVyT2Zmc2V0cyxcbiAgZGF0YToge31cbn07IiwgImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGdldEFsdEF4aXMoYXhpcykge1xuICByZXR1cm4gYXhpcyA9PT0gJ3gnID8gJ3knIDogJ3gnO1xufSIsICJpbXBvcnQgeyB0b3AsIGxlZnQsIHJpZ2h0LCBib3R0b20sIHN0YXJ0IH0gZnJvbSBcIi4uL2VudW1zLmpzXCI7XG5pbXBvcnQgZ2V0QmFzZVBsYWNlbWVudCBmcm9tIFwiLi4vdXRpbHMvZ2V0QmFzZVBsYWNlbWVudC5qc1wiO1xuaW1wb3J0IGdldE1haW5BeGlzRnJvbVBsYWNlbWVudCBmcm9tIFwiLi4vdXRpbHMvZ2V0TWFpbkF4aXNGcm9tUGxhY2VtZW50LmpzXCI7XG5pbXBvcnQgZ2V0QWx0QXhpcyBmcm9tIFwiLi4vdXRpbHMvZ2V0QWx0QXhpcy5qc1wiO1xuaW1wb3J0IHsgd2l0aGluLCB3aXRoaW5NYXhDbGFtcCB9IGZyb20gXCIuLi91dGlscy93aXRoaW4uanNcIjtcbmltcG9ydCBnZXRMYXlvdXRSZWN0IGZyb20gXCIuLi9kb20tdXRpbHMvZ2V0TGF5b3V0UmVjdC5qc1wiO1xuaW1wb3J0IGdldE9mZnNldFBhcmVudCBmcm9tIFwiLi4vZG9tLXV0aWxzL2dldE9mZnNldFBhcmVudC5qc1wiO1xuaW1wb3J0IGRldGVjdE92ZXJmbG93IGZyb20gXCIuLi91dGlscy9kZXRlY3RPdmVyZmxvdy5qc1wiO1xuaW1wb3J0IGdldFZhcmlhdGlvbiBmcm9tIFwiLi4vdXRpbHMvZ2V0VmFyaWF0aW9uLmpzXCI7XG5pbXBvcnQgZ2V0RnJlc2hTaWRlT2JqZWN0IGZyb20gXCIuLi91dGlscy9nZXRGcmVzaFNpZGVPYmplY3QuanNcIjtcbmltcG9ydCB7IG1pbiBhcyBtYXRoTWluLCBtYXggYXMgbWF0aE1heCB9IGZyb20gXCIuLi91dGlscy9tYXRoLmpzXCI7XG5cbmZ1bmN0aW9uIHByZXZlbnRPdmVyZmxvdyhfcmVmKSB7XG4gIHZhciBzdGF0ZSA9IF9yZWYuc3RhdGUsXG4gICAgICBvcHRpb25zID0gX3JlZi5vcHRpb25zLFxuICAgICAgbmFtZSA9IF9yZWYubmFtZTtcbiAgdmFyIF9vcHRpb25zJG1haW5BeGlzID0gb3B0aW9ucy5tYWluQXhpcyxcbiAgICAgIGNoZWNrTWFpbkF4aXMgPSBfb3B0aW9ucyRtYWluQXhpcyA9PT0gdm9pZCAwID8gdHJ1ZSA6IF9vcHRpb25zJG1haW5BeGlzLFxuICAgICAgX29wdGlvbnMkYWx0QXhpcyA9IG9wdGlvbnMuYWx0QXhpcyxcbiAgICAgIGNoZWNrQWx0QXhpcyA9IF9vcHRpb25zJGFsdEF4aXMgPT09IHZvaWQgMCA/IGZhbHNlIDogX29wdGlvbnMkYWx0QXhpcyxcbiAgICAgIGJvdW5kYXJ5ID0gb3B0aW9ucy5ib3VuZGFyeSxcbiAgICAgIHJvb3RCb3VuZGFyeSA9IG9wdGlvbnMucm9vdEJvdW5kYXJ5LFxuICAgICAgYWx0Qm91bmRhcnkgPSBvcHRpb25zLmFsdEJvdW5kYXJ5LFxuICAgICAgcGFkZGluZyA9IG9wdGlvbnMucGFkZGluZyxcbiAgICAgIF9vcHRpb25zJHRldGhlciA9IG9wdGlvbnMudGV0aGVyLFxuICAgICAgdGV0aGVyID0gX29wdGlvbnMkdGV0aGVyID09PSB2b2lkIDAgPyB0cnVlIDogX29wdGlvbnMkdGV0aGVyLFxuICAgICAgX29wdGlvbnMkdGV0aGVyT2Zmc2V0ID0gb3B0aW9ucy50ZXRoZXJPZmZzZXQsXG4gICAgICB0ZXRoZXJPZmZzZXQgPSBfb3B0aW9ucyR0ZXRoZXJPZmZzZXQgPT09IHZvaWQgMCA/IDAgOiBfb3B0aW9ucyR0ZXRoZXJPZmZzZXQ7XG4gIHZhciBvdmVyZmxvdyA9IGRldGVjdE92ZXJmbG93KHN0YXRlLCB7XG4gICAgYm91bmRhcnk6IGJvdW5kYXJ5LFxuICAgIHJvb3RCb3VuZGFyeTogcm9vdEJvdW5kYXJ5LFxuICAgIHBhZGRpbmc6IHBhZGRpbmcsXG4gICAgYWx0Qm91bmRhcnk6IGFsdEJvdW5kYXJ5XG4gIH0pO1xuICB2YXIgYmFzZVBsYWNlbWVudCA9IGdldEJhc2VQbGFjZW1lbnQoc3RhdGUucGxhY2VtZW50KTtcbiAgdmFyIHZhcmlhdGlvbiA9IGdldFZhcmlhdGlvbihzdGF0ZS5wbGFjZW1lbnQpO1xuICB2YXIgaXNCYXNlUGxhY2VtZW50ID0gIXZhcmlhdGlvbjtcbiAgdmFyIG1haW5BeGlzID0gZ2V0TWFpbkF4aXNGcm9tUGxhY2VtZW50KGJhc2VQbGFjZW1lbnQpO1xuICB2YXIgYWx0QXhpcyA9IGdldEFsdEF4aXMobWFpbkF4aXMpO1xuICB2YXIgcG9wcGVyT2Zmc2V0cyA9IHN0YXRlLm1vZGlmaWVyc0RhdGEucG9wcGVyT2Zmc2V0cztcbiAgdmFyIHJlZmVyZW5jZVJlY3QgPSBzdGF0ZS5yZWN0cy5yZWZlcmVuY2U7XG4gIHZhciBwb3BwZXJSZWN0ID0gc3RhdGUucmVjdHMucG9wcGVyO1xuICB2YXIgdGV0aGVyT2Zmc2V0VmFsdWUgPSB0eXBlb2YgdGV0aGVyT2Zmc2V0ID09PSAnZnVuY3Rpb24nID8gdGV0aGVyT2Zmc2V0KE9iamVjdC5hc3NpZ24oe30sIHN0YXRlLnJlY3RzLCB7XG4gICAgcGxhY2VtZW50OiBzdGF0ZS5wbGFjZW1lbnRcbiAgfSkpIDogdGV0aGVyT2Zmc2V0O1xuICB2YXIgbm9ybWFsaXplZFRldGhlck9mZnNldFZhbHVlID0gdHlwZW9mIHRldGhlck9mZnNldFZhbHVlID09PSAnbnVtYmVyJyA/IHtcbiAgICBtYWluQXhpczogdGV0aGVyT2Zmc2V0VmFsdWUsXG4gICAgYWx0QXhpczogdGV0aGVyT2Zmc2V0VmFsdWVcbiAgfSA6IE9iamVjdC5hc3NpZ24oe1xuICAgIG1haW5BeGlzOiAwLFxuICAgIGFsdEF4aXM6IDBcbiAgfSwgdGV0aGVyT2Zmc2V0VmFsdWUpO1xuICB2YXIgb2Zmc2V0TW9kaWZpZXJTdGF0ZSA9IHN0YXRlLm1vZGlmaWVyc0RhdGEub2Zmc2V0ID8gc3RhdGUubW9kaWZpZXJzRGF0YS5vZmZzZXRbc3RhdGUucGxhY2VtZW50XSA6IG51bGw7XG4gIHZhciBkYXRhID0ge1xuICAgIHg6IDAsXG4gICAgeTogMFxuICB9O1xuXG4gIGlmICghcG9wcGVyT2Zmc2V0cykge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGlmIChjaGVja01haW5BeGlzKSB7XG4gICAgdmFyIF9vZmZzZXRNb2RpZmllclN0YXRlJDtcblxuICAgIHZhciBtYWluU2lkZSA9IG1haW5BeGlzID09PSAneScgPyB0b3AgOiBsZWZ0O1xuICAgIHZhciBhbHRTaWRlID0gbWFpbkF4aXMgPT09ICd5JyA/IGJvdHRvbSA6IHJpZ2h0O1xuICAgIHZhciBsZW4gPSBtYWluQXhpcyA9PT0gJ3knID8gJ2hlaWdodCcgOiAnd2lkdGgnO1xuICAgIHZhciBvZmZzZXQgPSBwb3BwZXJPZmZzZXRzW21haW5BeGlzXTtcbiAgICB2YXIgbWluID0gb2Zmc2V0ICsgb3ZlcmZsb3dbbWFpblNpZGVdO1xuICAgIHZhciBtYXggPSBvZmZzZXQgLSBvdmVyZmxvd1thbHRTaWRlXTtcbiAgICB2YXIgYWRkaXRpdmUgPSB0ZXRoZXIgPyAtcG9wcGVyUmVjdFtsZW5dIC8gMiA6IDA7XG4gICAgdmFyIG1pbkxlbiA9IHZhcmlhdGlvbiA9PT0gc3RhcnQgPyByZWZlcmVuY2VSZWN0W2xlbl0gOiBwb3BwZXJSZWN0W2xlbl07XG4gICAgdmFyIG1heExlbiA9IHZhcmlhdGlvbiA9PT0gc3RhcnQgPyAtcG9wcGVyUmVjdFtsZW5dIDogLXJlZmVyZW5jZVJlY3RbbGVuXTsgLy8gV2UgbmVlZCB0byBpbmNsdWRlIHRoZSBhcnJvdyBpbiB0aGUgY2FsY3VsYXRpb24gc28gdGhlIGFycm93IGRvZXNuJ3QgZ29cbiAgICAvLyBvdXRzaWRlIHRoZSByZWZlcmVuY2UgYm91bmRzXG5cbiAgICB2YXIgYXJyb3dFbGVtZW50ID0gc3RhdGUuZWxlbWVudHMuYXJyb3c7XG4gICAgdmFyIGFycm93UmVjdCA9IHRldGhlciAmJiBhcnJvd0VsZW1lbnQgPyBnZXRMYXlvdXRSZWN0KGFycm93RWxlbWVudCkgOiB7XG4gICAgICB3aWR0aDogMCxcbiAgICAgIGhlaWdodDogMFxuICAgIH07XG4gICAgdmFyIGFycm93UGFkZGluZ09iamVjdCA9IHN0YXRlLm1vZGlmaWVyc0RhdGFbJ2Fycm93I3BlcnNpc3RlbnQnXSA/IHN0YXRlLm1vZGlmaWVyc0RhdGFbJ2Fycm93I3BlcnNpc3RlbnQnXS5wYWRkaW5nIDogZ2V0RnJlc2hTaWRlT2JqZWN0KCk7XG4gICAgdmFyIGFycm93UGFkZGluZ01pbiA9IGFycm93UGFkZGluZ09iamVjdFttYWluU2lkZV07XG4gICAgdmFyIGFycm93UGFkZGluZ01heCA9IGFycm93UGFkZGluZ09iamVjdFthbHRTaWRlXTsgLy8gSWYgdGhlIHJlZmVyZW5jZSBsZW5ndGggaXMgc21hbGxlciB0aGFuIHRoZSBhcnJvdyBsZW5ndGgsIHdlIGRvbid0IHdhbnRcbiAgICAvLyB0byBpbmNsdWRlIGl0cyBmdWxsIHNpemUgaW4gdGhlIGNhbGN1bGF0aW9uLiBJZiB0aGUgcmVmZXJlbmNlIGlzIHNtYWxsXG4gICAgLy8gYW5kIG5lYXIgdGhlIGVkZ2Ugb2YgYSBib3VuZGFyeSwgdGhlIHBvcHBlciBjYW4gb3ZlcmZsb3cgZXZlbiBpZiB0aGVcbiAgICAvLyByZWZlcmVuY2UgaXMgbm90IG92ZXJmbG93aW5nIGFzIHdlbGwgKGUuZy4gdmlydHVhbCBlbGVtZW50cyB3aXRoIG5vXG4gICAgLy8gd2lkdGggb3IgaGVpZ2h0KVxuXG4gICAgdmFyIGFycm93TGVuID0gd2l0aGluKDAsIHJlZmVyZW5jZVJlY3RbbGVuXSwgYXJyb3dSZWN0W2xlbl0pO1xuICAgIHZhciBtaW5PZmZzZXQgPSBpc0Jhc2VQbGFjZW1lbnQgPyByZWZlcmVuY2VSZWN0W2xlbl0gLyAyIC0gYWRkaXRpdmUgLSBhcnJvd0xlbiAtIGFycm93UGFkZGluZ01pbiAtIG5vcm1hbGl6ZWRUZXRoZXJPZmZzZXRWYWx1ZS5tYWluQXhpcyA6IG1pbkxlbiAtIGFycm93TGVuIC0gYXJyb3dQYWRkaW5nTWluIC0gbm9ybWFsaXplZFRldGhlck9mZnNldFZhbHVlLm1haW5BeGlzO1xuICAgIHZhciBtYXhPZmZzZXQgPSBpc0Jhc2VQbGFjZW1lbnQgPyAtcmVmZXJlbmNlUmVjdFtsZW5dIC8gMiArIGFkZGl0aXZlICsgYXJyb3dMZW4gKyBhcnJvd1BhZGRpbmdNYXggKyBub3JtYWxpemVkVGV0aGVyT2Zmc2V0VmFsdWUubWFpbkF4aXMgOiBtYXhMZW4gKyBhcnJvd0xlbiArIGFycm93UGFkZGluZ01heCArIG5vcm1hbGl6ZWRUZXRoZXJPZmZzZXRWYWx1ZS5tYWluQXhpcztcbiAgICB2YXIgYXJyb3dPZmZzZXRQYXJlbnQgPSBzdGF0ZS5lbGVtZW50cy5hcnJvdyAmJiBnZXRPZmZzZXRQYXJlbnQoc3RhdGUuZWxlbWVudHMuYXJyb3cpO1xuICAgIHZhciBjbGllbnRPZmZzZXQgPSBhcnJvd09mZnNldFBhcmVudCA/IG1haW5BeGlzID09PSAneScgPyBhcnJvd09mZnNldFBhcmVudC5jbGllbnRUb3AgfHwgMCA6IGFycm93T2Zmc2V0UGFyZW50LmNsaWVudExlZnQgfHwgMCA6IDA7XG4gICAgdmFyIG9mZnNldE1vZGlmaWVyVmFsdWUgPSAoX29mZnNldE1vZGlmaWVyU3RhdGUkID0gb2Zmc2V0TW9kaWZpZXJTdGF0ZSA9PSBudWxsID8gdm9pZCAwIDogb2Zmc2V0TW9kaWZpZXJTdGF0ZVttYWluQXhpc10pICE9IG51bGwgPyBfb2Zmc2V0TW9kaWZpZXJTdGF0ZSQgOiAwO1xuICAgIHZhciB0ZXRoZXJNaW4gPSBvZmZzZXQgKyBtaW5PZmZzZXQgLSBvZmZzZXRNb2RpZmllclZhbHVlIC0gY2xpZW50T2Zmc2V0O1xuICAgIHZhciB0ZXRoZXJNYXggPSBvZmZzZXQgKyBtYXhPZmZzZXQgLSBvZmZzZXRNb2RpZmllclZhbHVlO1xuICAgIHZhciBwcmV2ZW50ZWRPZmZzZXQgPSB3aXRoaW4odGV0aGVyID8gbWF0aE1pbihtaW4sIHRldGhlck1pbikgOiBtaW4sIG9mZnNldCwgdGV0aGVyID8gbWF0aE1heChtYXgsIHRldGhlck1heCkgOiBtYXgpO1xuICAgIHBvcHBlck9mZnNldHNbbWFpbkF4aXNdID0gcHJldmVudGVkT2Zmc2V0O1xuICAgIGRhdGFbbWFpbkF4aXNdID0gcHJldmVudGVkT2Zmc2V0IC0gb2Zmc2V0O1xuICB9XG5cbiAgaWYgKGNoZWNrQWx0QXhpcykge1xuICAgIHZhciBfb2Zmc2V0TW9kaWZpZXJTdGF0ZSQyO1xuXG4gICAgdmFyIF9tYWluU2lkZSA9IG1haW5BeGlzID09PSAneCcgPyB0b3AgOiBsZWZ0O1xuXG4gICAgdmFyIF9hbHRTaWRlID0gbWFpbkF4aXMgPT09ICd4JyA/IGJvdHRvbSA6IHJpZ2h0O1xuXG4gICAgdmFyIF9vZmZzZXQgPSBwb3BwZXJPZmZzZXRzW2FsdEF4aXNdO1xuXG4gICAgdmFyIF9sZW4gPSBhbHRBeGlzID09PSAneScgPyAnaGVpZ2h0JyA6ICd3aWR0aCc7XG5cbiAgICB2YXIgX21pbiA9IF9vZmZzZXQgKyBvdmVyZmxvd1tfbWFpblNpZGVdO1xuXG4gICAgdmFyIF9tYXggPSBfb2Zmc2V0IC0gb3ZlcmZsb3dbX2FsdFNpZGVdO1xuXG4gICAgdmFyIGlzT3JpZ2luU2lkZSA9IFt0b3AsIGxlZnRdLmluZGV4T2YoYmFzZVBsYWNlbWVudCkgIT09IC0xO1xuXG4gICAgdmFyIF9vZmZzZXRNb2RpZmllclZhbHVlID0gKF9vZmZzZXRNb2RpZmllclN0YXRlJDIgPSBvZmZzZXRNb2RpZmllclN0YXRlID09IG51bGwgPyB2b2lkIDAgOiBvZmZzZXRNb2RpZmllclN0YXRlW2FsdEF4aXNdKSAhPSBudWxsID8gX29mZnNldE1vZGlmaWVyU3RhdGUkMiA6IDA7XG5cbiAgICB2YXIgX3RldGhlck1pbiA9IGlzT3JpZ2luU2lkZSA/IF9taW4gOiBfb2Zmc2V0IC0gcmVmZXJlbmNlUmVjdFtfbGVuXSAtIHBvcHBlclJlY3RbX2xlbl0gLSBfb2Zmc2V0TW9kaWZpZXJWYWx1ZSArIG5vcm1hbGl6ZWRUZXRoZXJPZmZzZXRWYWx1ZS5hbHRBeGlzO1xuXG4gICAgdmFyIF90ZXRoZXJNYXggPSBpc09yaWdpblNpZGUgPyBfb2Zmc2V0ICsgcmVmZXJlbmNlUmVjdFtfbGVuXSArIHBvcHBlclJlY3RbX2xlbl0gLSBfb2Zmc2V0TW9kaWZpZXJWYWx1ZSAtIG5vcm1hbGl6ZWRUZXRoZXJPZmZzZXRWYWx1ZS5hbHRBeGlzIDogX21heDtcblxuICAgIHZhciBfcHJldmVudGVkT2Zmc2V0ID0gdGV0aGVyICYmIGlzT3JpZ2luU2lkZSA/IHdpdGhpbk1heENsYW1wKF90ZXRoZXJNaW4sIF9vZmZzZXQsIF90ZXRoZXJNYXgpIDogd2l0aGluKHRldGhlciA/IF90ZXRoZXJNaW4gOiBfbWluLCBfb2Zmc2V0LCB0ZXRoZXIgPyBfdGV0aGVyTWF4IDogX21heCk7XG5cbiAgICBwb3BwZXJPZmZzZXRzW2FsdEF4aXNdID0gX3ByZXZlbnRlZE9mZnNldDtcbiAgICBkYXRhW2FsdEF4aXNdID0gX3ByZXZlbnRlZE9mZnNldCAtIF9vZmZzZXQ7XG4gIH1cblxuICBzdGF0ZS5tb2RpZmllcnNEYXRhW25hbWVdID0gZGF0YTtcbn0gLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGltcG9ydC9uby11bnVzZWQtbW9kdWxlc1xuXG5cbmV4cG9ydCBkZWZhdWx0IHtcbiAgbmFtZTogJ3ByZXZlbnRPdmVyZmxvdycsXG4gIGVuYWJsZWQ6IHRydWUsXG4gIHBoYXNlOiAnbWFpbicsXG4gIGZuOiBwcmV2ZW50T3ZlcmZsb3csXG4gIHJlcXVpcmVzSWZFeGlzdHM6IFsnb2Zmc2V0J11cbn07IiwgImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGdldEhUTUxFbGVtZW50U2Nyb2xsKGVsZW1lbnQpIHtcbiAgcmV0dXJuIHtcbiAgICBzY3JvbGxMZWZ0OiBlbGVtZW50LnNjcm9sbExlZnQsXG4gICAgc2Nyb2xsVG9wOiBlbGVtZW50LnNjcm9sbFRvcFxuICB9O1xufSIsICJpbXBvcnQgZ2V0V2luZG93U2Nyb2xsIGZyb20gXCIuL2dldFdpbmRvd1Njcm9sbC5qc1wiO1xuaW1wb3J0IGdldFdpbmRvdyBmcm9tIFwiLi9nZXRXaW5kb3cuanNcIjtcbmltcG9ydCB7IGlzSFRNTEVsZW1lbnQgfSBmcm9tIFwiLi9pbnN0YW5jZU9mLmpzXCI7XG5pbXBvcnQgZ2V0SFRNTEVsZW1lbnRTY3JvbGwgZnJvbSBcIi4vZ2V0SFRNTEVsZW1lbnRTY3JvbGwuanNcIjtcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGdldE5vZGVTY3JvbGwobm9kZSkge1xuICBpZiAobm9kZSA9PT0gZ2V0V2luZG93KG5vZGUpIHx8ICFpc0hUTUxFbGVtZW50KG5vZGUpKSB7XG4gICAgcmV0dXJuIGdldFdpbmRvd1Njcm9sbChub2RlKTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gZ2V0SFRNTEVsZW1lbnRTY3JvbGwobm9kZSk7XG4gIH1cbn0iLCAiaW1wb3J0IGdldEJvdW5kaW5nQ2xpZW50UmVjdCBmcm9tIFwiLi9nZXRCb3VuZGluZ0NsaWVudFJlY3QuanNcIjtcbmltcG9ydCBnZXROb2RlU2Nyb2xsIGZyb20gXCIuL2dldE5vZGVTY3JvbGwuanNcIjtcbmltcG9ydCBnZXROb2RlTmFtZSBmcm9tIFwiLi9nZXROb2RlTmFtZS5qc1wiO1xuaW1wb3J0IHsgaXNIVE1MRWxlbWVudCB9IGZyb20gXCIuL2luc3RhbmNlT2YuanNcIjtcbmltcG9ydCBnZXRXaW5kb3dTY3JvbGxCYXJYIGZyb20gXCIuL2dldFdpbmRvd1Njcm9sbEJhclguanNcIjtcbmltcG9ydCBnZXREb2N1bWVudEVsZW1lbnQgZnJvbSBcIi4vZ2V0RG9jdW1lbnRFbGVtZW50LmpzXCI7XG5pbXBvcnQgaXNTY3JvbGxQYXJlbnQgZnJvbSBcIi4vaXNTY3JvbGxQYXJlbnQuanNcIjtcbmltcG9ydCB7IHJvdW5kIH0gZnJvbSBcIi4uL3V0aWxzL21hdGguanNcIjtcblxuZnVuY3Rpb24gaXNFbGVtZW50U2NhbGVkKGVsZW1lbnQpIHtcbiAgdmFyIHJlY3QgPSBlbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICB2YXIgc2NhbGVYID0gcm91bmQocmVjdC53aWR0aCkgLyBlbGVtZW50Lm9mZnNldFdpZHRoIHx8IDE7XG4gIHZhciBzY2FsZVkgPSByb3VuZChyZWN0LmhlaWdodCkgLyBlbGVtZW50Lm9mZnNldEhlaWdodCB8fCAxO1xuICByZXR1cm4gc2NhbGVYICE9PSAxIHx8IHNjYWxlWSAhPT0gMTtcbn0gLy8gUmV0dXJucyB0aGUgY29tcG9zaXRlIHJlY3Qgb2YgYW4gZWxlbWVudCByZWxhdGl2ZSB0byBpdHMgb2Zmc2V0UGFyZW50LlxuLy8gQ29tcG9zaXRlIG1lYW5zIGl0IHRha2VzIGludG8gYWNjb3VudCB0cmFuc2Zvcm1zIGFzIHdlbGwgYXMgbGF5b3V0LlxuXG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGdldENvbXBvc2l0ZVJlY3QoZWxlbWVudE9yVmlydHVhbEVsZW1lbnQsIG9mZnNldFBhcmVudCwgaXNGaXhlZCkge1xuICBpZiAoaXNGaXhlZCA9PT0gdm9pZCAwKSB7XG4gICAgaXNGaXhlZCA9IGZhbHNlO1xuICB9XG5cbiAgdmFyIGlzT2Zmc2V0UGFyZW50QW5FbGVtZW50ID0gaXNIVE1MRWxlbWVudChvZmZzZXRQYXJlbnQpO1xuICB2YXIgb2Zmc2V0UGFyZW50SXNTY2FsZWQgPSBpc0hUTUxFbGVtZW50KG9mZnNldFBhcmVudCkgJiYgaXNFbGVtZW50U2NhbGVkKG9mZnNldFBhcmVudCk7XG4gIHZhciBkb2N1bWVudEVsZW1lbnQgPSBnZXREb2N1bWVudEVsZW1lbnQob2Zmc2V0UGFyZW50KTtcbiAgdmFyIHJlY3QgPSBnZXRCb3VuZGluZ0NsaWVudFJlY3QoZWxlbWVudE9yVmlydHVhbEVsZW1lbnQsIG9mZnNldFBhcmVudElzU2NhbGVkLCBpc0ZpeGVkKTtcbiAgdmFyIHNjcm9sbCA9IHtcbiAgICBzY3JvbGxMZWZ0OiAwLFxuICAgIHNjcm9sbFRvcDogMFxuICB9O1xuICB2YXIgb2Zmc2V0cyA9IHtcbiAgICB4OiAwLFxuICAgIHk6IDBcbiAgfTtcblxuICBpZiAoaXNPZmZzZXRQYXJlbnRBbkVsZW1lbnQgfHwgIWlzT2Zmc2V0UGFyZW50QW5FbGVtZW50ICYmICFpc0ZpeGVkKSB7XG4gICAgaWYgKGdldE5vZGVOYW1lKG9mZnNldFBhcmVudCkgIT09ICdib2R5JyB8fCAvLyBodHRwczovL2dpdGh1Yi5jb20vcG9wcGVyanMvcG9wcGVyLWNvcmUvaXNzdWVzLzEwNzhcbiAgICBpc1Njcm9sbFBhcmVudChkb2N1bWVudEVsZW1lbnQpKSB7XG4gICAgICBzY3JvbGwgPSBnZXROb2RlU2Nyb2xsKG9mZnNldFBhcmVudCk7XG4gICAgfVxuXG4gICAgaWYgKGlzSFRNTEVsZW1lbnQob2Zmc2V0UGFyZW50KSkge1xuICAgICAgb2Zmc2V0cyA9IGdldEJvdW5kaW5nQ2xpZW50UmVjdChvZmZzZXRQYXJlbnQsIHRydWUpO1xuICAgICAgb2Zmc2V0cy54ICs9IG9mZnNldFBhcmVudC5jbGllbnRMZWZ0O1xuICAgICAgb2Zmc2V0cy55ICs9IG9mZnNldFBhcmVudC5jbGllbnRUb3A7XG4gICAgfSBlbHNlIGlmIChkb2N1bWVudEVsZW1lbnQpIHtcbiAgICAgIG9mZnNldHMueCA9IGdldFdpbmRvd1Njcm9sbEJhclgoZG9jdW1lbnRFbGVtZW50KTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4ge1xuICAgIHg6IHJlY3QubGVmdCArIHNjcm9sbC5zY3JvbGxMZWZ0IC0gb2Zmc2V0cy54LFxuICAgIHk6IHJlY3QudG9wICsgc2Nyb2xsLnNjcm9sbFRvcCAtIG9mZnNldHMueSxcbiAgICB3aWR0aDogcmVjdC53aWR0aCxcbiAgICBoZWlnaHQ6IHJlY3QuaGVpZ2h0XG4gIH07XG59IiwgImltcG9ydCB7IG1vZGlmaWVyUGhhc2VzIH0gZnJvbSBcIi4uL2VudW1zLmpzXCI7IC8vIHNvdXJjZTogaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvNDk4NzUyNTVcblxuZnVuY3Rpb24gb3JkZXIobW9kaWZpZXJzKSB7XG4gIHZhciBtYXAgPSBuZXcgTWFwKCk7XG4gIHZhciB2aXNpdGVkID0gbmV3IFNldCgpO1xuICB2YXIgcmVzdWx0ID0gW107XG4gIG1vZGlmaWVycy5mb3JFYWNoKGZ1bmN0aW9uIChtb2RpZmllcikge1xuICAgIG1hcC5zZXQobW9kaWZpZXIubmFtZSwgbW9kaWZpZXIpO1xuICB9KTsgLy8gT24gdmlzaXRpbmcgb2JqZWN0LCBjaGVjayBmb3IgaXRzIGRlcGVuZGVuY2llcyBhbmQgdmlzaXQgdGhlbSByZWN1cnNpdmVseVxuXG4gIGZ1bmN0aW9uIHNvcnQobW9kaWZpZXIpIHtcbiAgICB2aXNpdGVkLmFkZChtb2RpZmllci5uYW1lKTtcbiAgICB2YXIgcmVxdWlyZXMgPSBbXS5jb25jYXQobW9kaWZpZXIucmVxdWlyZXMgfHwgW10sIG1vZGlmaWVyLnJlcXVpcmVzSWZFeGlzdHMgfHwgW10pO1xuICAgIHJlcXVpcmVzLmZvckVhY2goZnVuY3Rpb24gKGRlcCkge1xuICAgICAgaWYgKCF2aXNpdGVkLmhhcyhkZXApKSB7XG4gICAgICAgIHZhciBkZXBNb2RpZmllciA9IG1hcC5nZXQoZGVwKTtcblxuICAgICAgICBpZiAoZGVwTW9kaWZpZXIpIHtcbiAgICAgICAgICBzb3J0KGRlcE1vZGlmaWVyKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuICAgIHJlc3VsdC5wdXNoKG1vZGlmaWVyKTtcbiAgfVxuXG4gIG1vZGlmaWVycy5mb3JFYWNoKGZ1bmN0aW9uIChtb2RpZmllcikge1xuICAgIGlmICghdmlzaXRlZC5oYXMobW9kaWZpZXIubmFtZSkpIHtcbiAgICAgIC8vIGNoZWNrIGZvciB2aXNpdGVkIG9iamVjdFxuICAgICAgc29ydChtb2RpZmllcik7XG4gICAgfVxuICB9KTtcbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gb3JkZXJNb2RpZmllcnMobW9kaWZpZXJzKSB7XG4gIC8vIG9yZGVyIGJhc2VkIG9uIGRlcGVuZGVuY2llc1xuICB2YXIgb3JkZXJlZE1vZGlmaWVycyA9IG9yZGVyKG1vZGlmaWVycyk7IC8vIG9yZGVyIGJhc2VkIG9uIHBoYXNlXG5cbiAgcmV0dXJuIG1vZGlmaWVyUGhhc2VzLnJlZHVjZShmdW5jdGlvbiAoYWNjLCBwaGFzZSkge1xuICAgIHJldHVybiBhY2MuY29uY2F0KG9yZGVyZWRNb2RpZmllcnMuZmlsdGVyKGZ1bmN0aW9uIChtb2RpZmllcikge1xuICAgICAgcmV0dXJuIG1vZGlmaWVyLnBoYXNlID09PSBwaGFzZTtcbiAgICB9KSk7XG4gIH0sIFtdKTtcbn0iLCAiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gZGVib3VuY2UoZm4pIHtcbiAgdmFyIHBlbmRpbmc7XG4gIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKCFwZW5kaW5nKSB7XG4gICAgICBwZW5kaW5nID0gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUpIHtcbiAgICAgICAgUHJvbWlzZS5yZXNvbHZlKCkudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgcGVuZGluZyA9IHVuZGVmaW5lZDtcbiAgICAgICAgICByZXNvbHZlKGZuKCkpO1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIHJldHVybiBwZW5kaW5nO1xuICB9O1xufSIsICJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBtZXJnZUJ5TmFtZShtb2RpZmllcnMpIHtcbiAgdmFyIG1lcmdlZCA9IG1vZGlmaWVycy5yZWR1Y2UoZnVuY3Rpb24gKG1lcmdlZCwgY3VycmVudCkge1xuICAgIHZhciBleGlzdGluZyA9IG1lcmdlZFtjdXJyZW50Lm5hbWVdO1xuICAgIG1lcmdlZFtjdXJyZW50Lm5hbWVdID0gZXhpc3RpbmcgPyBPYmplY3QuYXNzaWduKHt9LCBleGlzdGluZywgY3VycmVudCwge1xuICAgICAgb3B0aW9uczogT2JqZWN0LmFzc2lnbih7fSwgZXhpc3Rpbmcub3B0aW9ucywgY3VycmVudC5vcHRpb25zKSxcbiAgICAgIGRhdGE6IE9iamVjdC5hc3NpZ24oe30sIGV4aXN0aW5nLmRhdGEsIGN1cnJlbnQuZGF0YSlcbiAgICB9KSA6IGN1cnJlbnQ7XG4gICAgcmV0dXJuIG1lcmdlZDtcbiAgfSwge30pOyAvLyBJRTExIGRvZXMgbm90IHN1cHBvcnQgT2JqZWN0LnZhbHVlc1xuXG4gIHJldHVybiBPYmplY3Qua2V5cyhtZXJnZWQpLm1hcChmdW5jdGlvbiAoa2V5KSB7XG4gICAgcmV0dXJuIG1lcmdlZFtrZXldO1xuICB9KTtcbn0iLCAiaW1wb3J0IGdldENvbXBvc2l0ZVJlY3QgZnJvbSBcIi4vZG9tLXV0aWxzL2dldENvbXBvc2l0ZVJlY3QuanNcIjtcbmltcG9ydCBnZXRMYXlvdXRSZWN0IGZyb20gXCIuL2RvbS11dGlscy9nZXRMYXlvdXRSZWN0LmpzXCI7XG5pbXBvcnQgbGlzdFNjcm9sbFBhcmVudHMgZnJvbSBcIi4vZG9tLXV0aWxzL2xpc3RTY3JvbGxQYXJlbnRzLmpzXCI7XG5pbXBvcnQgZ2V0T2Zmc2V0UGFyZW50IGZyb20gXCIuL2RvbS11dGlscy9nZXRPZmZzZXRQYXJlbnQuanNcIjtcbmltcG9ydCBvcmRlck1vZGlmaWVycyBmcm9tIFwiLi91dGlscy9vcmRlck1vZGlmaWVycy5qc1wiO1xuaW1wb3J0IGRlYm91bmNlIGZyb20gXCIuL3V0aWxzL2RlYm91bmNlLmpzXCI7XG5pbXBvcnQgbWVyZ2VCeU5hbWUgZnJvbSBcIi4vdXRpbHMvbWVyZ2VCeU5hbWUuanNcIjtcbmltcG9ydCBkZXRlY3RPdmVyZmxvdyBmcm9tIFwiLi91dGlscy9kZXRlY3RPdmVyZmxvdy5qc1wiO1xuaW1wb3J0IHsgaXNFbGVtZW50IH0gZnJvbSBcIi4vZG9tLXV0aWxzL2luc3RhbmNlT2YuanNcIjtcbnZhciBERUZBVUxUX09QVElPTlMgPSB7XG4gIHBsYWNlbWVudDogJ2JvdHRvbScsXG4gIG1vZGlmaWVyczogW10sXG4gIHN0cmF0ZWd5OiAnYWJzb2x1dGUnXG59O1xuXG5mdW5jdGlvbiBhcmVWYWxpZEVsZW1lbnRzKCkge1xuICBmb3IgKHZhciBfbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IG5ldyBBcnJheShfbGVuKSwgX2tleSA9IDA7IF9rZXkgPCBfbGVuOyBfa2V5KyspIHtcbiAgICBhcmdzW19rZXldID0gYXJndW1lbnRzW19rZXldO1xuICB9XG5cbiAgcmV0dXJuICFhcmdzLnNvbWUoZnVuY3Rpb24gKGVsZW1lbnQpIHtcbiAgICByZXR1cm4gIShlbGVtZW50ICYmIHR5cGVvZiBlbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCA9PT0gJ2Z1bmN0aW9uJyk7XG4gIH0pO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gcG9wcGVyR2VuZXJhdG9yKGdlbmVyYXRvck9wdGlvbnMpIHtcbiAgaWYgKGdlbmVyYXRvck9wdGlvbnMgPT09IHZvaWQgMCkge1xuICAgIGdlbmVyYXRvck9wdGlvbnMgPSB7fTtcbiAgfVxuXG4gIHZhciBfZ2VuZXJhdG9yT3B0aW9ucyA9IGdlbmVyYXRvck9wdGlvbnMsXG4gICAgICBfZ2VuZXJhdG9yT3B0aW9ucyRkZWYgPSBfZ2VuZXJhdG9yT3B0aW9ucy5kZWZhdWx0TW9kaWZpZXJzLFxuICAgICAgZGVmYXVsdE1vZGlmaWVycyA9IF9nZW5lcmF0b3JPcHRpb25zJGRlZiA9PT0gdm9pZCAwID8gW10gOiBfZ2VuZXJhdG9yT3B0aW9ucyRkZWYsXG4gICAgICBfZ2VuZXJhdG9yT3B0aW9ucyRkZWYyID0gX2dlbmVyYXRvck9wdGlvbnMuZGVmYXVsdE9wdGlvbnMsXG4gICAgICBkZWZhdWx0T3B0aW9ucyA9IF9nZW5lcmF0b3JPcHRpb25zJGRlZjIgPT09IHZvaWQgMCA/IERFRkFVTFRfT1BUSU9OUyA6IF9nZW5lcmF0b3JPcHRpb25zJGRlZjI7XG4gIHJldHVybiBmdW5jdGlvbiBjcmVhdGVQb3BwZXIocmVmZXJlbmNlLCBwb3BwZXIsIG9wdGlvbnMpIHtcbiAgICBpZiAob3B0aW9ucyA9PT0gdm9pZCAwKSB7XG4gICAgICBvcHRpb25zID0gZGVmYXVsdE9wdGlvbnM7XG4gICAgfVxuXG4gICAgdmFyIHN0YXRlID0ge1xuICAgICAgcGxhY2VtZW50OiAnYm90dG9tJyxcbiAgICAgIG9yZGVyZWRNb2RpZmllcnM6IFtdLFxuICAgICAgb3B0aW9uczogT2JqZWN0LmFzc2lnbih7fSwgREVGQVVMVF9PUFRJT05TLCBkZWZhdWx0T3B0aW9ucyksXG4gICAgICBtb2RpZmllcnNEYXRhOiB7fSxcbiAgICAgIGVsZW1lbnRzOiB7XG4gICAgICAgIHJlZmVyZW5jZTogcmVmZXJlbmNlLFxuICAgICAgICBwb3BwZXI6IHBvcHBlclxuICAgICAgfSxcbiAgICAgIGF0dHJpYnV0ZXM6IHt9LFxuICAgICAgc3R5bGVzOiB7fVxuICAgIH07XG4gICAgdmFyIGVmZmVjdENsZWFudXBGbnMgPSBbXTtcbiAgICB2YXIgaXNEZXN0cm95ZWQgPSBmYWxzZTtcbiAgICB2YXIgaW5zdGFuY2UgPSB7XG4gICAgICBzdGF0ZTogc3RhdGUsXG4gICAgICBzZXRPcHRpb25zOiBmdW5jdGlvbiBzZXRPcHRpb25zKHNldE9wdGlvbnNBY3Rpb24pIHtcbiAgICAgICAgdmFyIG9wdGlvbnMgPSB0eXBlb2Ygc2V0T3B0aW9uc0FjdGlvbiA9PT0gJ2Z1bmN0aW9uJyA/IHNldE9wdGlvbnNBY3Rpb24oc3RhdGUub3B0aW9ucykgOiBzZXRPcHRpb25zQWN0aW9uO1xuICAgICAgICBjbGVhbnVwTW9kaWZpZXJFZmZlY3RzKCk7XG4gICAgICAgIHN0YXRlLm9wdGlvbnMgPSBPYmplY3QuYXNzaWduKHt9LCBkZWZhdWx0T3B0aW9ucywgc3RhdGUub3B0aW9ucywgb3B0aW9ucyk7XG4gICAgICAgIHN0YXRlLnNjcm9sbFBhcmVudHMgPSB7XG4gICAgICAgICAgcmVmZXJlbmNlOiBpc0VsZW1lbnQocmVmZXJlbmNlKSA/IGxpc3RTY3JvbGxQYXJlbnRzKHJlZmVyZW5jZSkgOiByZWZlcmVuY2UuY29udGV4dEVsZW1lbnQgPyBsaXN0U2Nyb2xsUGFyZW50cyhyZWZlcmVuY2UuY29udGV4dEVsZW1lbnQpIDogW10sXG4gICAgICAgICAgcG9wcGVyOiBsaXN0U2Nyb2xsUGFyZW50cyhwb3BwZXIpXG4gICAgICAgIH07IC8vIE9yZGVycyB0aGUgbW9kaWZpZXJzIGJhc2VkIG9uIHRoZWlyIGRlcGVuZGVuY2llcyBhbmQgYHBoYXNlYFxuICAgICAgICAvLyBwcm9wZXJ0aWVzXG5cbiAgICAgICAgdmFyIG9yZGVyZWRNb2RpZmllcnMgPSBvcmRlck1vZGlmaWVycyhtZXJnZUJ5TmFtZShbXS5jb25jYXQoZGVmYXVsdE1vZGlmaWVycywgc3RhdGUub3B0aW9ucy5tb2RpZmllcnMpKSk7IC8vIFN0cmlwIG91dCBkaXNhYmxlZCBtb2RpZmllcnNcblxuICAgICAgICBzdGF0ZS5vcmRlcmVkTW9kaWZpZXJzID0gb3JkZXJlZE1vZGlmaWVycy5maWx0ZXIoZnVuY3Rpb24gKG0pIHtcbiAgICAgICAgICByZXR1cm4gbS5lbmFibGVkO1xuICAgICAgICB9KTtcbiAgICAgICAgcnVuTW9kaWZpZXJFZmZlY3RzKCk7XG4gICAgICAgIHJldHVybiBpbnN0YW5jZS51cGRhdGUoKTtcbiAgICAgIH0sXG4gICAgICAvLyBTeW5jIHVwZGF0ZSBcdTIwMTMgaXQgd2lsbCBhbHdheXMgYmUgZXhlY3V0ZWQsIGV2ZW4gaWYgbm90IG5lY2Vzc2FyeS4gVGhpc1xuICAgICAgLy8gaXMgdXNlZnVsIGZvciBsb3cgZnJlcXVlbmN5IHVwZGF0ZXMgd2hlcmUgc3luYyBiZWhhdmlvciBzaW1wbGlmaWVzIHRoZVxuICAgICAgLy8gbG9naWMuXG4gICAgICAvLyBGb3IgaGlnaCBmcmVxdWVuY3kgdXBkYXRlcyAoZS5nLiBgcmVzaXplYCBhbmQgYHNjcm9sbGAgZXZlbnRzKSwgYWx3YXlzXG4gICAgICAvLyBwcmVmZXIgdGhlIGFzeW5jIFBvcHBlciN1cGRhdGUgbWV0aG9kXG4gICAgICBmb3JjZVVwZGF0ZTogZnVuY3Rpb24gZm9yY2VVcGRhdGUoKSB7XG4gICAgICAgIGlmIChpc0Rlc3Ryb3llZCkge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBfc3RhdGUkZWxlbWVudHMgPSBzdGF0ZS5lbGVtZW50cyxcbiAgICAgICAgICAgIHJlZmVyZW5jZSA9IF9zdGF0ZSRlbGVtZW50cy5yZWZlcmVuY2UsXG4gICAgICAgICAgICBwb3BwZXIgPSBfc3RhdGUkZWxlbWVudHMucG9wcGVyOyAvLyBEb24ndCBwcm9jZWVkIGlmIGByZWZlcmVuY2VgIG9yIGBwb3BwZXJgIGFyZSBub3QgdmFsaWQgZWxlbWVudHNcbiAgICAgICAgLy8gYW55bW9yZVxuXG4gICAgICAgIGlmICghYXJlVmFsaWRFbGVtZW50cyhyZWZlcmVuY2UsIHBvcHBlcikpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH0gLy8gU3RvcmUgdGhlIHJlZmVyZW5jZSBhbmQgcG9wcGVyIHJlY3RzIHRvIGJlIHJlYWQgYnkgbW9kaWZpZXJzXG5cblxuICAgICAgICBzdGF0ZS5yZWN0cyA9IHtcbiAgICAgICAgICByZWZlcmVuY2U6IGdldENvbXBvc2l0ZVJlY3QocmVmZXJlbmNlLCBnZXRPZmZzZXRQYXJlbnQocG9wcGVyKSwgc3RhdGUub3B0aW9ucy5zdHJhdGVneSA9PT0gJ2ZpeGVkJyksXG4gICAgICAgICAgcG9wcGVyOiBnZXRMYXlvdXRSZWN0KHBvcHBlcilcbiAgICAgICAgfTsgLy8gTW9kaWZpZXJzIGhhdmUgdGhlIGFiaWxpdHkgdG8gcmVzZXQgdGhlIGN1cnJlbnQgdXBkYXRlIGN5Y2xlLiBUaGVcbiAgICAgICAgLy8gbW9zdCBjb21tb24gdXNlIGNhc2UgZm9yIHRoaXMgaXMgdGhlIGBmbGlwYCBtb2RpZmllciBjaGFuZ2luZyB0aGVcbiAgICAgICAgLy8gcGxhY2VtZW50LCB3aGljaCB0aGVuIG5lZWRzIHRvIHJlLXJ1biBhbGwgdGhlIG1vZGlmaWVycywgYmVjYXVzZSB0aGVcbiAgICAgICAgLy8gbG9naWMgd2FzIHByZXZpb3VzbHkgcmFuIGZvciB0aGUgcHJldmlvdXMgcGxhY2VtZW50IGFuZCBpcyB0aGVyZWZvcmVcbiAgICAgICAgLy8gc3RhbGUvaW5jb3JyZWN0XG5cbiAgICAgICAgc3RhdGUucmVzZXQgPSBmYWxzZTtcbiAgICAgICAgc3RhdGUucGxhY2VtZW50ID0gc3RhdGUub3B0aW9ucy5wbGFjZW1lbnQ7IC8vIE9uIGVhY2ggdXBkYXRlIGN5Y2xlLCB0aGUgYG1vZGlmaWVyc0RhdGFgIHByb3BlcnR5IGZvciBlYWNoIG1vZGlmaWVyXG4gICAgICAgIC8vIGlzIGZpbGxlZCB3aXRoIHRoZSBpbml0aWFsIGRhdGEgc3BlY2lmaWVkIGJ5IHRoZSBtb2RpZmllci4gVGhpcyBtZWFuc1xuICAgICAgICAvLyBpdCBkb2Vzbid0IHBlcnNpc3QgYW5kIGlzIGZyZXNoIG9uIGVhY2ggdXBkYXRlLlxuICAgICAgICAvLyBUbyBlbnN1cmUgcGVyc2lzdGVudCBkYXRhLCB1c2UgYCR7bmFtZX0jcGVyc2lzdGVudGBcblxuICAgICAgICBzdGF0ZS5vcmRlcmVkTW9kaWZpZXJzLmZvckVhY2goZnVuY3Rpb24gKG1vZGlmaWVyKSB7XG4gICAgICAgICAgcmV0dXJuIHN0YXRlLm1vZGlmaWVyc0RhdGFbbW9kaWZpZXIubmFtZV0gPSBPYmplY3QuYXNzaWduKHt9LCBtb2RpZmllci5kYXRhKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgZm9yICh2YXIgaW5kZXggPSAwOyBpbmRleCA8IHN0YXRlLm9yZGVyZWRNb2RpZmllcnMubGVuZ3RoOyBpbmRleCsrKSB7XG4gICAgICAgICAgaWYgKHN0YXRlLnJlc2V0ID09PSB0cnVlKSB7XG4gICAgICAgICAgICBzdGF0ZS5yZXNldCA9IGZhbHNlO1xuICAgICAgICAgICAgaW5kZXggPSAtMTtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHZhciBfc3RhdGUkb3JkZXJlZE1vZGlmaWUgPSBzdGF0ZS5vcmRlcmVkTW9kaWZpZXJzW2luZGV4XSxcbiAgICAgICAgICAgICAgZm4gPSBfc3RhdGUkb3JkZXJlZE1vZGlmaWUuZm4sXG4gICAgICAgICAgICAgIF9zdGF0ZSRvcmRlcmVkTW9kaWZpZTIgPSBfc3RhdGUkb3JkZXJlZE1vZGlmaWUub3B0aW9ucyxcbiAgICAgICAgICAgICAgX29wdGlvbnMgPSBfc3RhdGUkb3JkZXJlZE1vZGlmaWUyID09PSB2b2lkIDAgPyB7fSA6IF9zdGF0ZSRvcmRlcmVkTW9kaWZpZTIsXG4gICAgICAgICAgICAgIG5hbWUgPSBfc3RhdGUkb3JkZXJlZE1vZGlmaWUubmFtZTtcblxuICAgICAgICAgIGlmICh0eXBlb2YgZm4gPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIHN0YXRlID0gZm4oe1xuICAgICAgICAgICAgICBzdGF0ZTogc3RhdGUsXG4gICAgICAgICAgICAgIG9wdGlvbnM6IF9vcHRpb25zLFxuICAgICAgICAgICAgICBuYW1lOiBuYW1lLFxuICAgICAgICAgICAgICBpbnN0YW5jZTogaW5zdGFuY2VcbiAgICAgICAgICAgIH0pIHx8IHN0YXRlO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIC8vIEFzeW5jIGFuZCBvcHRpbWlzdGljYWxseSBvcHRpbWl6ZWQgdXBkYXRlIFx1MjAxMyBpdCB3aWxsIG5vdCBiZSBleGVjdXRlZCBpZlxuICAgICAgLy8gbm90IG5lY2Vzc2FyeSAoZGVib3VuY2VkIHRvIHJ1biBhdCBtb3N0IG9uY2UtcGVyLXRpY2spXG4gICAgICB1cGRhdGU6IGRlYm91bmNlKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlKSB7XG4gICAgICAgICAgaW5zdGFuY2UuZm9yY2VVcGRhdGUoKTtcbiAgICAgICAgICByZXNvbHZlKHN0YXRlKTtcbiAgICAgICAgfSk7XG4gICAgICB9KSxcbiAgICAgIGRlc3Ryb3k6IGZ1bmN0aW9uIGRlc3Ryb3koKSB7XG4gICAgICAgIGNsZWFudXBNb2RpZmllckVmZmVjdHMoKTtcbiAgICAgICAgaXNEZXN0cm95ZWQgPSB0cnVlO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBpZiAoIWFyZVZhbGlkRWxlbWVudHMocmVmZXJlbmNlLCBwb3BwZXIpKSB7XG4gICAgICByZXR1cm4gaW5zdGFuY2U7XG4gICAgfVxuXG4gICAgaW5zdGFuY2Uuc2V0T3B0aW9ucyhvcHRpb25zKS50aGVuKGZ1bmN0aW9uIChzdGF0ZSkge1xuICAgICAgaWYgKCFpc0Rlc3Ryb3llZCAmJiBvcHRpb25zLm9uRmlyc3RVcGRhdGUpIHtcbiAgICAgICAgb3B0aW9ucy5vbkZpcnN0VXBkYXRlKHN0YXRlKTtcbiAgICAgIH1cbiAgICB9KTsgLy8gTW9kaWZpZXJzIGhhdmUgdGhlIGFiaWxpdHkgdG8gZXhlY3V0ZSBhcmJpdHJhcnkgY29kZSBiZWZvcmUgdGhlIGZpcnN0XG4gICAgLy8gdXBkYXRlIGN5Y2xlIHJ1bnMuIFRoZXkgd2lsbCBiZSBleGVjdXRlZCBpbiB0aGUgc2FtZSBvcmRlciBhcyB0aGUgdXBkYXRlXG4gICAgLy8gY3ljbGUuIFRoaXMgaXMgdXNlZnVsIHdoZW4gYSBtb2RpZmllciBhZGRzIHNvbWUgcGVyc2lzdGVudCBkYXRhIHRoYXRcbiAgICAvLyBvdGhlciBtb2RpZmllcnMgbmVlZCB0byB1c2UsIGJ1dCB0aGUgbW9kaWZpZXIgaXMgcnVuIGFmdGVyIHRoZSBkZXBlbmRlbnRcbiAgICAvLyBvbmUuXG5cbiAgICBmdW5jdGlvbiBydW5Nb2RpZmllckVmZmVjdHMoKSB7XG4gICAgICBzdGF0ZS5vcmRlcmVkTW9kaWZpZXJzLmZvckVhY2goZnVuY3Rpb24gKF9yZWYpIHtcbiAgICAgICAgdmFyIG5hbWUgPSBfcmVmLm5hbWUsXG4gICAgICAgICAgICBfcmVmJG9wdGlvbnMgPSBfcmVmLm9wdGlvbnMsXG4gICAgICAgICAgICBvcHRpb25zID0gX3JlZiRvcHRpb25zID09PSB2b2lkIDAgPyB7fSA6IF9yZWYkb3B0aW9ucyxcbiAgICAgICAgICAgIGVmZmVjdCA9IF9yZWYuZWZmZWN0O1xuXG4gICAgICAgIGlmICh0eXBlb2YgZWZmZWN0ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgdmFyIGNsZWFudXBGbiA9IGVmZmVjdCh7XG4gICAgICAgICAgICBzdGF0ZTogc3RhdGUsXG4gICAgICAgICAgICBuYW1lOiBuYW1lLFxuICAgICAgICAgICAgaW5zdGFuY2U6IGluc3RhbmNlLFxuICAgICAgICAgICAgb3B0aW9uczogb3B0aW9uc1xuICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgdmFyIG5vb3BGbiA9IGZ1bmN0aW9uIG5vb3BGbigpIHt9O1xuXG4gICAgICAgICAgZWZmZWN0Q2xlYW51cEZucy5wdXNoKGNsZWFudXBGbiB8fCBub29wRm4pO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjbGVhbnVwTW9kaWZpZXJFZmZlY3RzKCkge1xuICAgICAgZWZmZWN0Q2xlYW51cEZucy5mb3JFYWNoKGZ1bmN0aW9uIChmbikge1xuICAgICAgICByZXR1cm4gZm4oKTtcbiAgICAgIH0pO1xuICAgICAgZWZmZWN0Q2xlYW51cEZucyA9IFtdO1xuICAgIH1cblxuICAgIHJldHVybiBpbnN0YW5jZTtcbiAgfTtcbn1cbmV4cG9ydCB2YXIgY3JlYXRlUG9wcGVyID0gLyojX19QVVJFX18qL3BvcHBlckdlbmVyYXRvcigpOyAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgaW1wb3J0L25vLXVudXNlZC1tb2R1bGVzXG5cbmV4cG9ydCB7IGRldGVjdE92ZXJmbG93IH07IiwgImltcG9ydCB7IHBvcHBlckdlbmVyYXRvciwgZGV0ZWN0T3ZlcmZsb3cgfSBmcm9tIFwiLi9jcmVhdGVQb3BwZXIuanNcIjtcbmltcG9ydCBldmVudExpc3RlbmVycyBmcm9tIFwiLi9tb2RpZmllcnMvZXZlbnRMaXN0ZW5lcnMuanNcIjtcbmltcG9ydCBwb3BwZXJPZmZzZXRzIGZyb20gXCIuL21vZGlmaWVycy9wb3BwZXJPZmZzZXRzLmpzXCI7XG5pbXBvcnQgY29tcHV0ZVN0eWxlcyBmcm9tIFwiLi9tb2RpZmllcnMvY29tcHV0ZVN0eWxlcy5qc1wiO1xuaW1wb3J0IGFwcGx5U3R5bGVzIGZyb20gXCIuL21vZGlmaWVycy9hcHBseVN0eWxlcy5qc1wiO1xuaW1wb3J0IG9mZnNldCBmcm9tIFwiLi9tb2RpZmllcnMvb2Zmc2V0LmpzXCI7XG5pbXBvcnQgZmxpcCBmcm9tIFwiLi9tb2RpZmllcnMvZmxpcC5qc1wiO1xuaW1wb3J0IHByZXZlbnRPdmVyZmxvdyBmcm9tIFwiLi9tb2RpZmllcnMvcHJldmVudE92ZXJmbG93LmpzXCI7XG5pbXBvcnQgYXJyb3cgZnJvbSBcIi4vbW9kaWZpZXJzL2Fycm93LmpzXCI7XG5pbXBvcnQgaGlkZSBmcm9tIFwiLi9tb2RpZmllcnMvaGlkZS5qc1wiO1xudmFyIGRlZmF1bHRNb2RpZmllcnMgPSBbZXZlbnRMaXN0ZW5lcnMsIHBvcHBlck9mZnNldHMsIGNvbXB1dGVTdHlsZXMsIGFwcGx5U3R5bGVzLCBvZmZzZXQsIGZsaXAsIHByZXZlbnRPdmVyZmxvdywgYXJyb3csIGhpZGVdO1xudmFyIGNyZWF0ZVBvcHBlciA9IC8qI19fUFVSRV9fKi9wb3BwZXJHZW5lcmF0b3Ioe1xuICBkZWZhdWx0TW9kaWZpZXJzOiBkZWZhdWx0TW9kaWZpZXJzXG59KTsgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGltcG9ydC9uby11bnVzZWQtbW9kdWxlc1xuXG5leHBvcnQgeyBjcmVhdGVQb3BwZXIsIHBvcHBlckdlbmVyYXRvciwgZGVmYXVsdE1vZGlmaWVycywgZGV0ZWN0T3ZlcmZsb3cgfTsgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGltcG9ydC9uby11bnVzZWQtbW9kdWxlc1xuXG5leHBvcnQgeyBjcmVhdGVQb3BwZXIgYXMgY3JlYXRlUG9wcGVyTGl0ZSB9IGZyb20gXCIuL3BvcHBlci1saXRlLmpzXCI7IC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBpbXBvcnQvbm8tdW51c2VkLW1vZHVsZXNcblxuZXhwb3J0ICogZnJvbSBcIi4vbW9kaWZpZXJzL2luZGV4LmpzXCI7IiwgIlxyXG5pbXBvcnQgeyBQbHVnaW4sIFRGaWxlLCBURm9sZGVyLCBUQWJzdHJhY3RGaWxlLCBNYXJrZG93blBvc3RQcm9jZXNzb3JDb250ZXh0LCBwYXJzZVlhbWwsIE5vdGljZSwgS2V5bWFwLCBXb3Jrc3BhY2VMZWFmLCByZXF1aXJlQXBpVmVyc2lvbiB9IGZyb20gJ29ic2lkaWFuJztcclxuaW1wb3J0IHsgREVGQVVMVF9TRVRUSU5HUywgRm9sZGVyTm90ZXNTZXR0aW5ncywgU2V0dGluZ3NUYWIgfSBmcm9tICcuL3NldHRpbmdzL1NldHRpbmdzVGFiJztcclxuaW1wb3J0IHsgQ29tbWFuZHMgfSBmcm9tICcuL0NvbW1hbmRzJztcclxuaW1wb3J0IHsgRmlsZUV4cGxvcmVyV29ya3NwYWNlTGVhZiB9IGZyb20gJy4vZ2xvYmFscyc7XHJcbmltcG9ydCB7IGhhbmRsZUZvbGRlckNsaWNrIH0gZnJvbSAnLi9ldmVudHMvaGFuZGxlQ2xpY2snO1xyXG5pbXBvcnQgeyBhZGRPYnNlcnZlciB9IGZyb20gJy4vZXZlbnRzL011dGF0aW9uT2JzZXJ2ZXInO1xyXG5pbXBvcnQgeyBoYW5kbGVSZW5hbWUgfSBmcm9tICcuL2V2ZW50cy9oYW5kbGVSZW5hbWUnO1xyXG5pbXBvcnQgeyBnZXRGb2xkZXJOb3RlLCBnZXRGb2xkZXIsIG9wZW5Gb2xkZXJOb3RlIH0gZnJvbSAnLi9mdW5jdGlvbnMvZm9sZGVyTm90ZUZ1bmN0aW9ucyc7XHJcbmltcG9ydCB7IGhhbmRsZUNyZWF0ZSB9IGZyb20gJy4vZXZlbnRzL2hhbmRsZUNyZWF0ZSc7XHJcbmltcG9ydCB7IEZyb250TWF0dGVyVGl0bGVQbHVnaW5IYW5kbGVyIH0gZnJvbSAnLi9ldmVudHMvRnJvbnRNYXR0ZXJUaXRsZSc7XHJcbmltcG9ydCB7IEZvbGRlck92ZXJ2aWV3U2V0dGluZ3MgfSBmcm9tICcuL2ZvbGRlck92ZXJ2aWV3L3NyYy9tb2RhbHMvU2V0dGluZ3MnO1xyXG5pbXBvcnQgeyBGb2xkZXJPdmVydmlldyB9IGZyb20gJy4vZm9sZGVyT3ZlcnZpZXcvc3JjL0ZvbGRlck92ZXJ2aWV3JztcclxuaW1wb3J0IHsgVGFiTWFuYWdlciB9IGZyb20gJy4vZXZlbnRzL1RhYk1hbmFnZXInO1xyXG5pbXBvcnQgJy4vZnVuY3Rpb25zL0xpc3RDb21wb25lbnQnO1xyXG5pbXBvcnQgeyBoYW5kbGVEZWxldGUgfSBmcm9tICcuL2V2ZW50cy9oYW5kbGVEZWxldGUnO1xyXG5pbXBvcnQgeyBhZGRDU1NDbGFzc1RvVGl0bGVFTCwgZ2V0RWwsIGxvYWRGaWxlQ2xhc3NlcyB9IGZyb20gJy4vZnVuY3Rpb25zL3N0eWxlRnVuY3Rpb25zJztcclxuaW1wb3J0IHsgZ2V0RXhjbHVkZWRGb2xkZXIgfSBmcm9tICcuL0V4Y2x1ZGVGb2xkZXJzL2Z1bmN0aW9ucy9mb2xkZXJGdW5jdGlvbnMnO1xyXG5pbXBvcnQgeyBGaWxlRXhwbG9yZXJWaWV3LCBJbnRlcm5hbFBsdWdpbiB9IGZyb20gJ29ic2lkaWFuLXR5cGluZ3MnXHJcbmltcG9ydCB7IGdldEZvY3VzZWRJdGVtIH0gZnJvbSAnLi9mdW5jdGlvbnMvdXRpbHMnO1xyXG5pbXBvcnQgeyBGT0xERVJfT1ZFUlZJRVdfVklFVywgRm9sZGVyT3ZlcnZpZXdWaWV3IH0gZnJvbSAnLi9mb2xkZXJPdmVydmlldy9zcmMvdmlldyc7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBGb2xkZXJOb3Rlc1BsdWdpbiBleHRlbmRzIFBsdWdpbiB7XHJcblx0b2JzZXJ2ZXI6IE11dGF0aW9uT2JzZXJ2ZXI7XHJcblx0c2V0dGluZ3M6IEZvbGRlck5vdGVzU2V0dGluZ3M7XHJcblx0c2V0dGluZ3NUYWI6IFNldHRpbmdzVGFiO1xyXG5cdGFjdGl2ZUZvbGRlckRvbTogSFRNTEVsZW1lbnQgfCBudWxsO1xyXG5cdGFjdGl2ZUZpbGVFeHBsb3JlcjogRmlsZUV4cGxvcmVyV29ya3NwYWNlTGVhZjtcclxuXHRmbXRwSGFuZGxlcjogRnJvbnRNYXR0ZXJUaXRsZVBsdWdpbkhhbmRsZXIgfCBudWxsID0gbnVsbDtcclxuXHRob3ZlcmVkRWxlbWVudDogSFRNTEVsZW1lbnQgfCBudWxsID0gbnVsbDtcclxuXHRtb3VzZUV2ZW50OiBNb3VzZUV2ZW50IHwgbnVsbCA9IG51bGw7XHJcblx0aG92ZXJMaW5rVHJpZ2dlcmVkID0gZmFsc2U7XHJcblx0dGFiTWFuYWdlcjogVGFiTWFuYWdlcjtcclxuXHRzZXR0aW5nc09wZW5lZCA9IGZhbHNlO1xyXG5cclxuXHRwcml2YXRlIGZpbGVFeHBsb3JlclBsdWdpbiE6IEludGVybmFsUGx1Z2luO1xyXG5cdHByaXZhdGUgZmlsZUV4cGxvcmVyVmlldyE6IEZpbGVFeHBsb3JlclZpZXc7XHJcblxyXG5cdGFzeW5jIG9ubG9hZCgpIHtcclxuXHRcdGNvbnNvbGUubG9nKCdsb2FkaW5nIGZvbGRlciBub3RlcyBwbHVnaW4nKTtcclxuXHRcdGNvbnNvbGUubG9nKCdsb2FkaW5nIGZvbGRlciBub3RlcyBwbHVnaW4gMicpO1xyXG5cdFx0YXdhaXQgdGhpcy5sb2FkU2V0dGluZ3MoKTtcclxuXHRcdHRoaXMuc2V0dGluZ3NUYWIgPSBuZXcgU2V0dGluZ3NUYWIodGhpcy5hcHAsIHRoaXMpO1xyXG5cdFx0dGhpcy5hZGRTZXR0aW5nVGFiKHRoaXMuc2V0dGluZ3NUYWIpO1xyXG5cdFx0dGhpcy5zYXZlU2V0dGluZ3MoKTtcclxuXHJcblx0XHQvLyBBZGQgQ1NTIENsYXNzZXNcclxuXHRcdGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LmFkZCgnZm9sZGVyLW5vdGVzLXBsdWdpbicpO1xyXG5cdFx0aWYgKHRoaXMuc2V0dGluZ3MuaGlkZUZvbGRlck5vdGUpIHsgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QuYWRkKCdoaWRlLWZvbGRlci1ub3RlJyk7IH1cclxuXHRcdGlmICh0aGlzLnNldHRpbmdzLmhpZGVDb2xsYXBzaW5nSWNvbkZvckVtcHR5Rm9sZGVycykgeyBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5hZGQoJ2ZuLWhpZGUtZW1wdHktY29sbGFwc2UtaWNvbicpOyB9XHJcblx0XHRpZiAodGhpcy5zZXR0aW5ncy51bmRlcmxpbmVGb2xkZXIpIHsgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QuYWRkKCdmb2xkZXItbm90ZS11bmRlcmxpbmUnKTsgfVxyXG5cdFx0aWYgKHRoaXMuc2V0dGluZ3MuYm9sZE5hbWUpIHsgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QuYWRkKCdmb2xkZXItbm90ZS1ib2xkJyk7IH1cclxuXHRcdGlmICh0aGlzLnNldHRpbmdzLmN1cnNpdmVOYW1lKSB7IGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LmFkZCgnZm9sZGVyLW5vdGUtY3Vyc2l2ZScpOyB9XHJcblx0XHRpZiAodGhpcy5zZXR0aW5ncy5ib2xkTmFtZUluUGF0aCkgeyBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5hZGQoJ2ZvbGRlci1ub3RlLWJvbGQtcGF0aCcpOyB9XHJcblx0XHRpZiAodGhpcy5zZXR0aW5ncy5jdXJzaXZlTmFtZUluUGF0aCkgeyBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5hZGQoJ2ZvbGRlci1ub3RlLWN1cnNpdmUtcGF0aCcpOyB9XHJcblx0XHRpZiAodGhpcy5zZXR0aW5ncy51bmRlcmxpbmVGb2xkZXJJblBhdGgpIHsgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QuYWRkKCdmb2xkZXItbm90ZS11bmRlcmxpbmUtcGF0aCcpOyB9XHJcblx0XHRpZiAodGhpcy5zZXR0aW5ncy5zdG9wV2hpdGVzcGFjZUNvbGxhcHNpbmcpIHsgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QuYWRkKCdmbi13aGl0ZXNwYWNlLXN0b3AtY29sbGFwc2luZycpOyB9XHJcblx0XHRpZiAodGhpcy5zZXR0aW5ncy5oaWRlQ29sbGFwc2luZ0ljb24pIHsgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QuYWRkKCdmbi1oaWRlLWNvbGxhcHNlLWljb24nKTsgfVxyXG5cdFx0aWYgKCF0aGlzLnNldHRpbmdzLmhpZ2hsaWdodEZvbGRlcikgeyBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5hZGQoJ2Rpc2FibGUtZm9sZGVyLWhpZ2hsaWdodCcpOyB9XHJcblx0XHRpZiAocmVxdWlyZUFwaVZlcnNpb24oJzEuNy4yJykpIHtcclxuXHRcdFx0ZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QuYWRkKCd2ZXJzaW9uLTEtNy0yJyk7XHJcblx0XHR9XHJcblxyXG5cdFx0bmV3IENvbW1hbmRzKHRoaXMuYXBwLCB0aGlzKS5yZWdpc3RlckNvbW1hbmRzKCk7XHJcblxyXG5cdFx0dGhpcy5hcHAud29ya3NwYWNlLm9uTGF5b3V0UmVhZHkodGhpcy5vbkxheW91dFJlYWR5LmJpbmQodGhpcykpO1xyXG5cclxuXHRcdGF3YWl0IGFkZE9ic2VydmVyKHRoaXMpO1xyXG5cclxuXHRcdHRoaXMub2JzZXJ2ZXIub2JzZXJ2ZShkb2N1bWVudC5ib2R5LCB7XHJcblx0XHRcdGNoaWxkTGlzdDogdHJ1ZSxcclxuXHRcdFx0c3VidHJlZTogdHJ1ZSxcclxuXHRcdH0pO1xyXG5cclxuXHRcdHRoaXMucmVnaXN0ZXJEb21FdmVudCh3aW5kb3csICdrZXlkb3duJywgKGV2ZW50OiBLZXlib2FyZEV2ZW50KSA9PiB7XHJcblx0XHRcdGlmIChldmVudC5rZXkgPT0gJ0VudGVyJykge1xyXG5cdFx0XHRcdGNvbnN0IGZvbGRlck5vdGUgPSBnZXRGb2xkZXJOb3RlKHRoaXMsIGdldEZvY3VzZWRJdGVtKHRoaXMpPy5maWxlPy5wYXRoIHx8ICcnKTtcclxuXHRcdFx0XHRpZiAoIWZvbGRlck5vdGUpIHJldHVybjtcclxuXHRcdFx0XHRvcGVuRm9sZGVyTm90ZSh0aGlzLCBmb2xkZXJOb3RlKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Y29uc3QgaG92ZXJlZEVsZW1lbnQgPSB0aGlzLmhvdmVyZWRFbGVtZW50O1xyXG5cdFx0XHRpZiAodGhpcy5ob3ZlckxpbmtUcmlnZ2VyZWQpIHJldHVybjtcclxuXHRcdFx0aWYgKCFob3ZlcmVkRWxlbWVudCkgcmV0dXJuO1xyXG5cdFx0XHRpZiAoIUtleW1hcC5pc01vZEV2ZW50KGV2ZW50KSkgcmV0dXJuO1xyXG5cclxuXHRcdFx0Y29uc3QgZm9sZGVyUGF0aCA9IGhvdmVyZWRFbGVtZW50Py5wYXJlbnRFbGVtZW50Py5nZXRBdHRyaWJ1dGUoJ2RhdGEtcGF0aCcpIHx8ICcnO1xyXG5cdFx0XHRjb25zdCBmb2xkZXJOb3RlID0gZ2V0Rm9sZGVyTm90ZSh0aGlzLCBmb2xkZXJQYXRoKTtcclxuXHRcdFx0aWYgKCFmb2xkZXJOb3RlKSByZXR1cm47XHJcblxyXG5cdFx0XHR0aGlzLmFwcC53b3Jrc3BhY2UudHJpZ2dlcignaG92ZXItbGluaycsIHtcclxuXHRcdFx0XHRldmVudDogdGhpcy5tb3VzZUV2ZW50LFxyXG5cdFx0XHRcdHNvdXJjZTogJ3ByZXZpZXcnLFxyXG5cdFx0XHRcdGhvdmVyUGFyZW50OiB7XHJcblx0XHRcdFx0XHRmaWxlOiBmb2xkZXJOb3RlLFxyXG5cdFx0XHRcdH0sXHJcblx0XHRcdFx0dGFyZ2V0RWw6IGhvdmVyZWRFbGVtZW50LFxyXG5cdFx0XHRcdGxpbmt0ZXh0OiBmb2xkZXJOb3RlPy5iYXNlbmFtZSxcclxuXHRcdFx0XHRzb3VyY2VQYXRoOiBmb2xkZXJOb3RlPy5wYXRoLFxyXG5cdFx0XHR9KTtcclxuXHRcdFx0dGhpcy5ob3ZlckxpbmtUcmlnZ2VyZWQgPSB0cnVlO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0dGhpcy5yZWdpc3RlckV2ZW50KHRoaXMuYXBwLnZhdWx0Lm9uKCdjcmVhdGUnLCAoZmlsZTogVEFic3RyYWN0RmlsZSkgPT4ge1xyXG5cdFx0XHRoYW5kbGVDcmVhdGUoZmlsZSwgdGhpcyk7XHJcblx0XHR9KSk7XHJcblxyXG5cdFx0dGhpcy5yZWdpc3RlckV2ZW50KHRoaXMuYXBwLndvcmtzcGFjZS5vbignZmlsZS1vcGVuJywgYXN5bmMgKG9wZW5GaWxlOiBURmlsZSB8IG51bGwpID0+IHtcclxuXHRcdFx0aWYgKHRoaXMuYWN0aXZlRm9sZGVyRG9tKSB7XHJcblx0XHRcdFx0dGhpcy5hY3RpdmVGb2xkZXJEb20ucmVtb3ZlQ2xhc3MoJ2ZuLWlzLWFjdGl2ZScpO1xyXG5cdFx0XHRcdHRoaXMuYWN0aXZlRm9sZGVyRG9tID0gbnVsbDtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0aWYgKCFvcGVuRmlsZSB8fCAhb3BlbkZpbGUuYmFzZW5hbWUpIHsgcmV0dXJuOyB9XHJcblxyXG5cdFx0XHRjb25zdCBmb2xkZXIgPSBnZXRGb2xkZXIodGhpcywgb3BlbkZpbGUpO1xyXG5cdFx0XHRpZiAoIWZvbGRlcikgeyByZXR1cm47IH1cclxuXHRcdFx0Y29uc3QgZXhjbHVkZWRGb2xkZXIgPSBhd2FpdCBnZXRFeGNsdWRlZEZvbGRlcih0aGlzLCBmb2xkZXIucGF0aCwgdHJ1ZSlcclxuXHRcdFx0aWYgKGV4Y2x1ZGVkRm9sZGVyPy5kaXNhYmxlRm9sZGVyTm90ZSkgcmV0dXJuO1xyXG5cdFx0XHRjb25zdCBmb2xkZXJOb3RlID0gZ2V0Rm9sZGVyTm90ZSh0aGlzLCBmb2xkZXIucGF0aCk7XHJcblx0XHRcdGlmICghZm9sZGVyTm90ZSkgeyByZXR1cm47IH1cclxuXHRcdFx0aWYgKGZvbGRlck5vdGUucGF0aCAhPT0gb3BlbkZpbGUucGF0aCkgeyByZXR1cm47IH1cclxuXHRcdFx0dGhpcy5hY3RpdmVGb2xkZXJEb20gPSBnZXRFbChmb2xkZXIucGF0aCwgdGhpcyk7XHJcblx0XHRcdGlmICh0aGlzLmFjdGl2ZUZvbGRlckRvbSkgdGhpcy5hY3RpdmVGb2xkZXJEb20uYWRkQ2xhc3MoJ2ZuLWlzLWFjdGl2ZScpO1xyXG5cdFx0fSkpO1xyXG5cclxuXHRcdHRoaXMucmVnaXN0ZXJFdmVudCh0aGlzLmFwcC52YXVsdC5vbigncmVuYW1lJywgKGZpbGU6IFRBYnN0cmFjdEZpbGUsIG9sZFBhdGg6IHN0cmluZykgPT4ge1xyXG5cdFx0XHRoYW5kbGVSZW5hbWUoZmlsZSwgb2xkUGF0aCwgdGhpcyk7XHJcblx0XHR9KSk7XHJcblxyXG5cdFx0dGhpcy5yZWdpc3RlckV2ZW50KHRoaXMuYXBwLnZhdWx0Lm9uKCdkZWxldGUnLCAoZmlsZTogVEFic3RyYWN0RmlsZSkgPT4ge1xyXG5cdFx0XHRoYW5kbGVEZWxldGUoZmlsZSwgdGhpcyk7XHJcblx0XHR9KSk7XHJcblxyXG5cdFx0dGhpcy5yZWdpc3Rlck1hcmtkb3duQ29kZUJsb2NrUHJvY2Vzc29yKCdmb2xkZXItb3ZlcnZpZXcnLCAoc291cmNlOiBzdHJpbmcsIGVsOiBIVE1MRWxlbWVudCwgY3R4OiBNYXJrZG93blBvc3RQcm9jZXNzb3JDb250ZXh0KSA9PiB7XHJcblx0XHRcdHRoaXMuaGFuZGxlT3ZlcnZpZXdCbG9jayhzb3VyY2UsIGVsLCBjdHgpO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0aWYgKHRoaXMuYXBwLndvcmtzcGFjZS5sYXlvdXRSZWFkeSkge1xyXG5cdFx0XHR0aGlzLnJlZ2lzdGVyVmlldyhGT0xERVJfT1ZFUlZJRVdfVklFVywgKGxlYWY6IFdvcmtzcGFjZUxlYWYpID0+IHtcclxuXHRcdFx0XHRyZXR1cm4gbmV3IEZvbGRlck92ZXJ2aWV3VmlldyhsZWFmLCB0aGlzKTtcclxuXHRcdFx0fSk7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHR0aGlzLmFwcC53b3Jrc3BhY2Uub25MYXlvdXRSZWFkeShhc3luYyAoKSA9PiB7XHJcblx0XHRcdFx0dGhpcy5yZWdpc3RlclZpZXcoRk9MREVSX09WRVJWSUVXX1ZJRVcsIChsZWFmOiBXb3Jrc3BhY2VMZWFmKSA9PiB7XHJcblx0XHRcdFx0XHRyZXR1cm4gbmV3IEZvbGRlck92ZXJ2aWV3VmlldyhsZWFmLCB0aGlzKTtcclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0fSk7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHRvbkxheW91dFJlYWR5KCkge1xyXG5cdFx0aWYgKHRoaXMuc2V0dGluZ3MuZnJvbnRNYXR0ZXJUaXRsZS5lbmFibGVkKSB7XHJcblx0XHRcdHRoaXMuZm10cEhhbmRsZXIgPSBuZXcgRnJvbnRNYXR0ZXJUaXRsZVBsdWdpbkhhbmRsZXIodGhpcyk7XHJcblx0XHR9XHJcblx0XHR0aGlzLnRhYk1hbmFnZXIgPSBuZXcgVGFiTWFuYWdlcih0aGlzKTtcclxuXHRcdHRoaXMudGFiTWFuYWdlci51cGRhdGVUYWJzKCk7XHJcblxyXG5cdFx0Y29uc3QgbGVhZiA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRMZWF2ZXNPZlR5cGUoJ21hcmtkb3duJykuZmlyc3QoKTtcclxuXHRcdGNvbnN0IHZpZXcgPSBsZWFmPy52aWV3O1xyXG5cclxuXHRcdGlmICghdmlldykgeyByZXR1cm47IH1cclxuXHJcblx0XHQvLyBAdHMtaWdub3JlXHJcblx0XHRjb25zdCBlZGl0TW9kZSA9IHZpZXcuZWRpdE1vZGUgPz8gdmlldy5zb3VyY2VNb2RlID8/IHRoaXMuYXBwLndvcmtzcGFjZS5hY3RpdmVFZGl0b3I/LmVkaXRNb2RlO1xyXG5cdFx0aWYgKCFlZGl0TW9kZSkgeyByZXR1cm47IH1cclxuXHJcblx0XHRjb25zdCBwbHVnaW4gPSB0aGlzO1xyXG5cclxuXHRcdC8vIEB0cy1pZ25vcmVcclxuXHRcdGNvbnN0IG9yaWdpbmFsSGFuZGxlRHJhZ092ZXIgPSBlZGl0TW9kZS5jbGlwYm9hcmRNYW5hZ2VyLmNvbnN0cnVjdG9yLnByb3RvdHlwZS5oYW5kbGVEcmFnT3ZlcjtcclxuXHJcblx0XHQvLyBAdHMtaWdub3JlXHJcblx0XHRlZGl0TW9kZS5jbGlwYm9hcmRNYW5hZ2VyLmNvbnN0cnVjdG9yLnByb3RvdHlwZS5oYW5kbGVEcmFnT3ZlciA9IGZ1bmN0aW9uIChldnQsIC4uLmFyZ3MpIHtcclxuXHRcdFx0Y29uc3QgeyBkcmFnZ2FibGUgfSA9IHBsdWdpbi5hcHAuZHJhZ01hbmFnZXI7XHJcblx0XHRcdGlmIChkcmFnZ2FibGUgJiYgZHJhZ2dhYmxlLmZpbGUgaW5zdGFuY2VvZiBURm9sZGVyICYmIGdldEZvbGRlck5vdGUocGx1Z2luLCBkcmFnZ2FibGUuZmlsZS5wYXRoKSkge1xyXG5cdFx0XHRcdHBsdWdpbi5hcHAuZHJhZ01hbmFnZXIuc2V0QWN0aW9uKHdpbmRvdy5pMThuZXh0LnQoJ2ludGVyZmFjZS5kcmFnLWFuZC1kcm9wLmluc2VydC1saW5rLWhlcmUnKSk7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0b3JpZ2luYWxIYW5kbGVEcmFnT3Zlci5jYWxsKHRoaXMsIGV2dCwgLi4uYXJncyk7XHJcblx0XHRcdH1cclxuXHRcdH07XHJcblxyXG5cdFx0Ly8gQHRzLWlnbm9yZVxyXG5cdFx0Y29uc3Qgb3JpZ2luYWxIYW5kbGVEcm9wID0gZWRpdE1vZGUuY2xpcGJvYXJkTWFuYWdlci5jb25zdHJ1Y3Rvci5wcm90b3R5cGUuaGFuZGxlRHJvcDtcclxuXHRcdC8vIEB0cy1pZ25vcmVcclxuXHRcdGVkaXRNb2RlLmNsaXBib2FyZE1hbmFnZXIuY29uc3RydWN0b3IucHJvdG90eXBlLmhhbmRsZURyb3AgPSBmdW5jdGlvbiAoZXZ0LCAuLi5hcmdzKSB7XHJcblx0XHRcdGNvbnN0IHsgZHJhZ2dhYmxlIH0gPSBwbHVnaW4uYXBwLmRyYWdNYW5hZ2VyO1xyXG5cdFx0XHRpZiAoZHJhZ2dhYmxlICYmIGRyYWdnYWJsZS5maWxlIGluc3RhbmNlb2YgVEZvbGRlciAmJiBnZXRGb2xkZXJOb3RlKHBsdWdpbiwgZHJhZ2dhYmxlLmZpbGUucGF0aCkpIHtcclxuXHRcdFx0XHRjb25zdCBmb2xkZXJOb3RlID0gZ2V0Rm9sZGVyTm90ZShwbHVnaW4sIGRyYWdnYWJsZS5maWxlLnBhdGgpO1xyXG5cdFx0XHRcdGlmIChkcmFnZ2FibGU/LnR5cGUgPT09ICdmb2xkZXInICYmIGRyYWdnYWJsZS5maWxlIGluc3RhbmNlb2YgVEZvbGRlciAmJiBmb2xkZXJOb3RlKSB7XHJcblx0XHRcdFx0XHRkcmFnZ2FibGUuZmlsZSA9IGZvbGRlck5vdGU7XHJcblx0XHRcdFx0XHRkcmFnZ2FibGUudHlwZSA9ICdmaWxlJztcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdFx0cmV0dXJuIG9yaWdpbmFsSGFuZGxlRHJvcC5jYWxsKHRoaXMsIGV2dCwgLi4uYXJncyk7XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gY29uc3QgZmlsZUV4cGxvcmVyUGx1Z2luSW5zdGFuY2UgPSB0aGlzLmFwcC5pbnRlcm5hbFBsdWdpbnMuZ2V0RW5hYmxlZFBsdWdpbkJ5SWQoSW50ZXJuYWxQbHVnaW5OYW1lLkZpbGVFeHBsb3Jlcik7XHRcdFxyXG5cdH1cclxuXHJcblxyXG5cdGhhbmRsZU92ZXJ2aWV3QmxvY2soc291cmNlOiBzdHJpbmcsIGVsOiBIVE1MRWxlbWVudCwgY3R4OiBNYXJrZG93blBvc3RQcm9jZXNzb3JDb250ZXh0KSB7XHJcblx0XHRjb25zdCBvYnNlcnZlciA9IG5ldyBNdXRhdGlvbk9ic2VydmVyKCgpID0+IHtcclxuXHRcdFx0Y29uc3QgZWRpdEJ1dHRvbiA9IGVsLnBhcmVudEVsZW1lbnQ/LmNoaWxkTm9kZXMuaXRlbSgxKTtcclxuXHRcdFx0aWYgKGVkaXRCdXR0b24pIHtcclxuXHRcdFx0XHRlZGl0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcclxuXHRcdFx0XHRcdGUuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCk7XHJcblx0XHRcdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XHJcblx0XHRcdFx0XHRlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG5cdFx0XHRcdFx0bmV3IEZvbGRlck92ZXJ2aWV3U2V0dGluZ3ModGhpcy5hcHAsIHRoaXMsIHBhcnNlWWFtbChzb3VyY2UpLCBjdHgsIGVsLCB0aGlzLnNldHRpbmdzLmRlZmF1bHRPdmVydmlldykub3BlbigpO1xyXG5cdFx0XHRcdH0sIHsgY2FwdHVyZTogdHJ1ZSB9KTtcclxuXHRcdFx0fVxyXG5cdFx0fSk7XHJcblxyXG5cdFx0b2JzZXJ2ZXIub2JzZXJ2ZShlbCwge1xyXG5cdFx0XHRjaGlsZExpc3Q6IHRydWUsXHJcblx0XHRcdHN1YnRyZWU6IHRydWUsXHJcblx0XHR9KTtcclxuXHJcblx0XHR0cnkge1xyXG5cdFx0XHRpZiAodGhpcy5hcHAud29ya3NwYWNlLmxheW91dFJlYWR5KSB7XHJcblx0XHRcdFx0Y29uc3QgZm9sZGVyT3ZlcnZpZXcgPSBuZXcgRm9sZGVyT3ZlcnZpZXcodGhpcywgY3R4LCBzb3VyY2UsIGVsLCB0aGlzLnNldHRpbmdzLmRlZmF1bHRPdmVydmlldyk7XHJcblx0XHRcdFx0Zm9sZGVyT3ZlcnZpZXcuY3JlYXRlKHRoaXMsIHBhcnNlWWFtbChzb3VyY2UpLCBlbCwgY3R4KTtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHR0aGlzLmFwcC53b3Jrc3BhY2Uub25MYXlvdXRSZWFkeSgoKSA9PiB7XHJcblx0XHRcdFx0XHRjb25zdCBmb2xkZXJPdmVydmlldyA9IG5ldyBGb2xkZXJPdmVydmlldyh0aGlzLCBjdHgsIHNvdXJjZSwgZWwsIHRoaXMuc2V0dGluZ3MuZGVmYXVsdE92ZXJ2aWV3KTtcclxuXHRcdFx0XHRcdGZvbGRlck92ZXJ2aWV3LmNyZWF0ZSh0aGlzLCBwYXJzZVlhbWwoc291cmNlKSwgZWwsIGN0eCk7XHJcblx0XHRcdFx0fSk7XHJcblx0XHRcdH1cclxuXHRcdH0gY2F0Y2ggKGUpIHtcclxuXHRcdFx0bmV3IE5vdGljZSgnRXJyb3IgY3JlYXRpbmcgZm9sZGVyIG92ZXJ2aWV3IChmb2xkZXIgbm90ZXMgcGx1Z2luKSAtIGNoZWNrIGNvbnNvbGUgZm9yIG1vcmUgZGV0YWlscycpO1xyXG5cdFx0XHRjb25zb2xlLmVycm9yKGUpO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0YXN5bmMgYWN0aXZhdGVPdmVydmlld1ZpZXcoKSB7XHJcblx0XHRjb25zdCB7IHdvcmtzcGFjZSB9ID0gdGhpcy5hcHA7XHJcblxyXG5cdFx0bGV0IGxlYWY6IFdvcmtzcGFjZUxlYWYgfCBudWxsID0gbnVsbDtcclxuXHRcdGNvbnN0IGxlYXZlcyA9IHdvcmtzcGFjZS5nZXRMZWF2ZXNPZlR5cGUoRk9MREVSX09WRVJWSUVXX1ZJRVcpO1xyXG5cclxuXHRcdGlmIChsZWF2ZXMubGVuZ3RoID4gMCkge1xyXG5cdFx0XHRsZWFmID0gbGVhdmVzWzBdO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0bGVhZiA9IHdvcmtzcGFjZS5nZXRSaWdodExlYWYoZmFsc2UpO1xyXG5cdFx0XHRhd2FpdCBsZWFmPy5zZXRWaWV3U3RhdGUoeyB0eXBlOiBGT0xERVJfT1ZFUlZJRVdfVklFVywgYWN0aXZlOiB0cnVlIH0pO1xyXG5cdFx0fVxyXG5cclxuXHRcdGlmICghbGVhZikgcmV0dXJuO1xyXG5cdFx0d29ya3NwYWNlLnJldmVhbExlYWYobGVhZik7XHJcblx0fVxyXG5cclxuXHRhc3luYyB1cGRhdGVPdmVydmlld1ZpZXcoKSB7XHJcblx0XHRjb25zdCB7IHdvcmtzcGFjZSB9ID0gdGhpcy5hcHA7XHJcblx0XHRjb25zdCBsZWFmID0gd29ya3NwYWNlLmdldExlYXZlc09mVHlwZShGT0xERVJfT1ZFUlZJRVdfVklFVylbMF07XHJcblx0XHRpZiAoIWxlYWYpIHJldHVybjtcclxuXHRcdGNvbnN0IHZpZXcgPSBsZWFmLnZpZXcgYXMgYW55IGFzIEZvbGRlck92ZXJ2aWV3VmlldztcclxuXHRcdHZpZXcuZGlzcGxheSh2aWV3LmNvbnRlbnRFbCwgdmlldy55YW1sLCB0aGlzLCB2aWV3LmRlZmF1bHRTZXR0aW5ncywgdmlldy5kaXNwbGF5LCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgdmlldy5hY3RpdmVGaWxlKTtcclxuXHR9XHJcblxyXG5cdGlzRW1wdHlGb2xkZXJOb3RlRm9sZGVyKGZvbGRlcjogVEZvbGRlcik6IGJvb2xlYW4ge1xyXG5cdFx0bGV0IGF0dGFjaG1lbnRGb2xkZXJQYXRoID0gdGhpcy5hcHAudmF1bHQuZ2V0Q29uZmlnKCdhdHRhY2htZW50Rm9sZGVyUGF0aCcpIGFzIHN0cmluZztcclxuXHRcdGNvbnN0IGNsZWFuQXR0YWNobWVudEZvbGRlclBhdGggPSBhdHRhY2htZW50Rm9sZGVyUGF0aD8ucmVwbGFjZSgnLi8nLCAnJykgfHwgJyc7XHJcblx0XHRjb25zdCBhdHRhY2htZW50c0FyZUluUm9vdEZvbGRlciA9IGF0dGFjaG1lbnRGb2xkZXJQYXRoID09PSAnLi8nIHx8IGF0dGFjaG1lbnRGb2xkZXJQYXRoID09PSAnJztcclxuXHRcdGNvbnN0IHRocmVzaG9sZCA9IHRoaXMuc2V0dGluZ3Muc3RvcmFnZUxvY2F0aW9uID09PSAnaW5zaWRlRm9sZGVyJyA/IDEgOiAwO1xyXG5cdFx0aWYgKGZvbGRlci5jaGlsZHJlbi5sZW5ndGggPT0gMCkge1xyXG5cdFx0XHRhZGRDU1NDbGFzc1RvVGl0bGVFTChmb2xkZXIucGF0aCwgJ2ZuLWVtcHR5LWZvbGRlcicsIHRoaXMpO1xyXG5cdFx0fVxyXG5cclxuXHRcdGlmIChmb2xkZXIuY2hpbGRyZW4ubGVuZ3RoID09IHRocmVzaG9sZCkge1xyXG5cdFx0XHRyZXR1cm4gdHJ1ZTtcclxuXHRcdH0gZWxzZSBpZiAoZm9sZGVyLmNoaWxkcmVuLmxlbmd0aCA+IHRocmVzaG9sZCkge1xyXG5cdFx0XHRpZiAoYXR0YWNobWVudHNBcmVJblJvb3RGb2xkZXIpIHtcclxuXHRcdFx0XHRyZXR1cm4gZmFsc2U7XHJcblx0XHRcdH0gZWxzZSBpZiAodGhpcy5zZXR0aW5ncy5pZ25vcmVBdHRhY2htZW50Rm9sZGVyICYmIHRoaXMuYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChgJHtmb2xkZXIucGF0aH0vJHtjbGVhbkF0dGFjaG1lbnRGb2xkZXJQYXRofWApKSB7XHJcblx0XHRcdFx0Y29uc3QgZm9sZGVyUGF0aCA9IGAke2ZvbGRlci5wYXRofS8ke2NsZWFuQXR0YWNobWVudEZvbGRlclBhdGh9YFxyXG5cdFx0XHRcdGNvbnN0IGF0dGFjaG1lbnRGb2xkZXIgPSB0aGlzLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoZm9sZGVyUGF0aCk7XHJcblx0XHRcdFx0aWYgKGF0dGFjaG1lbnRGb2xkZXIgaW5zdGFuY2VvZiBURm9sZGVyICYmIGZvbGRlci5jaGlsZHJlbi5sZW5ndGggPD0gdGhyZXNob2xkICsgMSkge1xyXG5cdFx0XHRcdFx0aWYgKCFmb2xkZXIuY29sbGFwc2VkKSB7XHJcblx0XHRcdFx0XHRcdGdldEVsKGZvbGRlci5wYXRoLCB0aGlzKT8uY2xpY2soKTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0cmV0dXJuIGZvbGRlci5jaGlsZHJlbi5sZW5ndGggPD0gdGhyZXNob2xkICsgMTtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRyZXR1cm4gZmFsc2U7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHRcdHJldHVybiB0cnVlO1xyXG5cdH1cclxuXHJcblx0YXN5bmMgY2hhbmdlTmFtZShmb2xkZXI6IFRGb2xkZXIsIG5hbWU6IHN0cmluZyB8IG51bGwgfCB1bmRlZmluZWQsIHJlcGxhY2VQYXRoOiBib29sZWFuLCB3YWl0Rm9yQ3JlYXRlID0gZmFsc2UsIGNvdW50ID0gMCkge1xyXG5cdFx0aWYgKCFuYW1lKSBuYW1lID0gZm9sZGVyLm5hbWU7XHJcblx0XHRsZXQgZmlsZUV4cGxvcmVySXRlbSA9IGdldEVsKGZvbGRlci5wYXRoLCB0aGlzKTtcclxuXHRcdGlmICghZmlsZUV4cGxvcmVySXRlbSkge1xyXG5cdFx0XHRpZiAod2FpdEZvckNyZWF0ZSAmJiBjb3VudCA8IDUpIHtcclxuXHRcdFx0XHRhd2FpdCBuZXcgUHJvbWlzZSgocikgPT4gc2V0VGltZW91dChyLCA1MDApKTtcclxuXHRcdFx0XHR0aGlzLmNoYW5nZU5hbWUoZm9sZGVyLCBuYW1lLCByZXBsYWNlUGF0aCwgd2FpdEZvckNyZWF0ZSwgY291bnQgKyAxKTtcclxuXHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdH1cclxuXHRcdFx0cmV0dXJuO1xyXG5cdFx0fVxyXG5cclxuXHRcdGZpbGVFeHBsb3Jlckl0ZW0gPSBmaWxlRXhwbG9yZXJJdGVtPy5xdWVyeVNlbGVjdG9yKCdkaXYubmF2LWZvbGRlci10aXRsZS1jb250ZW50JylcclxuXHRcdGlmICghZmlsZUV4cGxvcmVySXRlbSkgeyByZXR1cm47IH1cclxuXHRcdGlmICh0aGlzLnNldHRpbmdzLmZyb250TWF0dGVyVGl0bGUuZXhwbG9yZXIgJiYgdGhpcy5zZXR0aW5ncy5mcm9udE1hdHRlclRpdGxlLmVuYWJsZWQpIHtcclxuXHRcdFx0ZmlsZUV4cGxvcmVySXRlbS5pbm5lclRleHQgPSBuYW1lO1xyXG5cdFx0XHRmaWxlRXhwbG9yZXJJdGVtLnNldEF0dHJpYnV0ZSgnb2xkLW5hbWUnLCBmb2xkZXIubmFtZSk7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHRmaWxlRXhwbG9yZXJJdGVtLmlubmVyVGV4dCA9IGZvbGRlci5uYW1lO1xyXG5cdFx0XHRmaWxlRXhwbG9yZXJJdGVtLnJlbW92ZUF0dHJpYnV0ZSgnb2xkLW5hbWUnKTtcclxuXHRcdH1cclxuXHRcdGlmIChyZXBsYWNlUGF0aCkge1xyXG5cdFx0XHR0aGlzLnVwZGF0ZUJyZWFkY3J1bWJzKCk7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHR1cGRhdGVCcmVhZGNydW1icyhyZW1vdmU/OiBib29sZWFuKSB7XHJcblx0XHRpZiAoIXRoaXMuc2V0dGluZ3MuZnJvbnRNYXR0ZXJUaXRsZS5wYXRoICYmICFyZW1vdmUpIHsgcmV0dXJuOyB9XHJcblx0XHRjb25zdCB2aWV3SGVhZGVySXRlbXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdzcGFuLnZpZXctaGVhZGVyLWJyZWFkY3J1bWInKTtcclxuXHRcdGNvbnN0IGZpbGVzID0gdGhpcy5hcHAudmF1bHQuZ2V0QWxsTG9hZGVkRmlsZXMoKS5maWx0ZXIoKGZpbGUpID0+IGZpbGUgaW5zdGFuY2VvZiBURm9sZGVyKTtcclxuXHRcdHZpZXdIZWFkZXJJdGVtcy5mb3JFYWNoKChpdGVtKSA9PiB7XHJcblx0XHRcdGlmICghaXRlbS5oYXNBdHRyaWJ1dGUoJ2RhdGEtcGF0aCcpKSB7IHJldHVybjsgfVxyXG5cdFx0XHRjb25zdCBwYXRoID0gaXRlbS5nZXRBdHRyaWJ1dGUoJ2RhdGEtcGF0aCcpO1xyXG5cdFx0XHRjb25zdCBmb2xkZXIgPSBmaWxlcy5maW5kKChmaWxlKSA9PiBmaWxlLnBhdGggPT09IHBhdGgpO1xyXG5cdFx0XHRpZiAoIShmb2xkZXIgaW5zdGFuY2VvZiBURm9sZGVyKSkgeyByZXR1cm47IH1cclxuXHRcdFx0aWYgKHJlbW92ZSkge1xyXG5cdFx0XHRcdGl0ZW0udGV4dENvbnRlbnQgPSBmb2xkZXIubmFtZTtcclxuXHRcdFx0XHRpdGVtLnJlbW92ZUF0dHJpYnV0ZSgnb2xkLW5hbWUnKTtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRpdGVtLnRleHRDb250ZW50ID0gZm9sZGVyLm5ld05hbWUgfHwgZm9sZGVyLm5hbWU7XHJcblx0XHRcdFx0aXRlbS5zZXRBdHRyaWJ1dGUoJ29sZC1uYW1lJywgZm9sZGVyLm5hbWUpO1xyXG5cdFx0XHRcdGl0ZW0uc2V0QXR0cmlidXRlKCdkYXRhLXBhdGgnLCBmb2xkZXIucGF0aCk7XHJcblx0XHRcdH1cclxuXHRcdH0pO1xyXG5cdH1cclxuXHJcblx0cmVsb2FkSGFuZGxlcnMoKSB7XHJcblx0XHRkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdkaXYubmF2LWZvbGRlci10aXRsZS1jb250ZW50JylcclxuXHRcdFx0LmZvckVhY2goKGVsZW1lbnQ6IEhUTUxFbGVtZW50KSA9PiB7XHJcblx0XHRcdFx0aWYgKGVsZW1lbnQub25jbGljaykgcmV0dXJuO1xyXG5cdFx0XHRcdGVsZW1lbnQub25jbGljayA9IChldmVudDogTW91c2VFdmVudCkgPT4gaGFuZGxlRm9sZGVyQ2xpY2soZXZlbnQsIHRoaXMpO1xyXG5cdFx0XHR9KTtcclxuXHR9XHJcblxyXG5cdG9udW5sb2FkKCkge1xyXG5cdFx0Y29uc29sZS5sb2coJ3VubG9hZGluZyBmb2xkZXIgbm90ZXMgcGx1Z2luJyk7XHJcblx0XHR0aGlzLm9ic2VydmVyLmRpc2Nvbm5lY3QoKTtcclxuXHRcdGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LnJlbW92ZSgnZm9sZGVyLW5vdGVzLXBsdWdpbicpO1xyXG5cdFx0ZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QucmVtb3ZlKCdmb2xkZXItbm90ZS11bmRlcmxpbmUnKTtcclxuXHRcdGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZS1mb2xkZXItbm90ZScpO1xyXG5cdFx0ZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QucmVtb3ZlKCdmbi13aGl0ZXNwYWNlLXN0b3AtY29sbGFwc2luZycpO1xyXG5cdFx0aWYgKHRoaXMuYWN0aXZlRm9sZGVyRG9tKSB7IHRoaXMuYWN0aXZlRm9sZGVyRG9tLnJlbW92ZUNsYXNzKCdpcy1hY3RpdmUnKTsgfVxyXG5cdFx0aWYgKHRoaXMuZm10cEhhbmRsZXIpIHtcclxuXHRcdFx0dGhpcy5mbXRwSGFuZGxlci5kZWxldGVFdmVudCgpO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0YXN5bmMgbG9hZFNldHRpbmdzKCkge1xyXG5cdFx0Y29uc3QgZGF0YSA9IGF3YWl0IHRoaXMubG9hZERhdGEoKTtcclxuXHRcdGlmIChkYXRhKSB7XHJcblx0XHRcdGlmIChkYXRhLmFsbG93V2hpdGVzcGFjZUNvbGxhcHNpbmcgPT09IHRydWUpIHtcclxuXHRcdFx0XHRkYXRhLnN0b3BXaGl0ZXNwYWNlQ29sbGFwc2luZyA9IGZhbHNlO1xyXG5cdFx0XHRcdGRlbGV0ZSBkYXRhLmFsbG93V2hpdGVzcGFjZUNvbGxhcHNpbmc7XHJcblx0XHRcdH0gZWxzZSBpZiAoZGF0YS5hbGxvd1doaXRlc3BhY2VDb2xsYXBzaW5nID09PSBmYWxzZSkge1xyXG5cdFx0XHRcdGRhdGEuc3RvcFdoaXRlc3BhY2VDb2xsYXBzaW5nID0gdHJ1ZTtcclxuXHRcdFx0XHRkZWxldGUgZGF0YS5hbGxvd1doaXRlc3BhY2VDb2xsYXBzaW5nO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0dGhpcy5zZXR0aW5ncyA9IE9iamVjdC5hc3NpZ24oe30sIERFRkFVTFRfU0VUVElOR1MsIGRhdGEpO1xyXG5cdFx0aWYgKCFkYXRhKSB7IHJldHVybjsgfVxyXG5cdFx0Y29uc3Qgb3ZlcnZpZXcgPSAoZGF0YSBhcyBhbnkpLmRlZmF1bHRPdmVydmlldztcclxuXHRcdGlmICghb3ZlcnZpZXcpIHsgcmV0dXJuOyB9XHJcblx0XHR0aGlzLnNldHRpbmdzLmRlZmF1bHRPdmVydmlldyA9IE9iamVjdC5hc3NpZ24oe30sIERFRkFVTFRfU0VUVElOR1MuZGVmYXVsdE92ZXJ2aWV3LCBvdmVydmlldyk7XHJcblx0fVxyXG5cclxuXHRhc3luYyBzYXZlU2V0dGluZ3MocmVsb2FkU3R5bGVzPzogYm9vbGVhbikge1xyXG5cdFx0YXdhaXQgdGhpcy5zYXZlRGF0YSh0aGlzLnNldHRpbmdzKTtcclxuXHRcdC8vIGNsZWFudXAgYW55IGNzcyBpZiB3ZSBuZWVkIHRvb1xyXG5cdFx0aWYgKCghdGhpcy5zZXR0aW5nc09wZW5lZCB8fCByZWxvYWRTdHlsZXMgPT09IHRydWUpICYmIHJlbG9hZFN0eWxlcyAhPT0gZmFsc2UpIHtcclxuXHRcdFx0bG9hZEZpbGVDbGFzc2VzKHRydWUsIHRoaXMpO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcbn1cclxuIiwgImltcG9ydCB7IEFwcCwgTm90aWNlLCBQbHVnaW5TZXR0aW5nVGFiLCBURmlsZSwgVEZvbGRlciwgTWFya2Rvd25Qb3N0UHJvY2Vzc29yQ29udGV4dCB9IGZyb20gJ29ic2lkaWFuJztcclxuaW1wb3J0IEZvbGRlck5vdGVzUGx1Z2luIGZyb20gJy4uL21haW4nO1xyXG5pbXBvcnQgeyBFeGNsdWRlUGF0dGVybiB9IGZyb20gJ3NyYy9FeGNsdWRlRm9sZGVycy9FeGNsdWRlUGF0dGVybic7XHJcbmltcG9ydCB7IEV4Y2x1ZGVkRm9sZGVyIH0gZnJvbSAnc3JjL0V4Y2x1ZGVGb2xkZXJzL0V4Y2x1ZGVGb2xkZXInO1xyXG5pbXBvcnQgeyBnZXRGb2xkZXJOb3RlIH0gZnJvbSAnLi4vZnVuY3Rpb25zL2ZvbGRlck5vdGVGdW5jdGlvbnMnO1xyXG5pbXBvcnQgeyBvdmVydmlld1NldHRpbmdzIH0gZnJvbSAnLi4vZm9sZGVyT3ZlcnZpZXcvc3JjL0ZvbGRlck92ZXJ2aWV3JztcclxuaW1wb3J0IHsgcmVuZGVyR2VuZXJhbCB9IGZyb20gJy4vR2VuZXJhbFNldHRpbmdzJztcclxuaW1wb3J0IHsgcmVuZGVyRmlsZUV4cGxvcmVyIH0gZnJvbSAnLi9GaWxlRXhwbG9yZXJTZXR0aW5ncyc7XHJcbmltcG9ydCB7IHJlbmRlclBhdGggfSBmcm9tICcuL1BhdGhTZXR0aW5ncyc7XHJcbmltcG9ydCB7IHJlbmRlckZvbGRlck92ZXJ2aWV3IH0gZnJvbSAnLi9Gb2xkZXJPdmVydmlld1NldHRpbmdzJztcclxuaW1wb3J0IHsgcmVuZGVyRXhjbHVkZUZvbGRlcnMgfSBmcm9tICcuL0V4Y2x1ZGVkRm9sZGVyc1NldHRpbmdzJztcclxuaW1wb3J0IHsgZ2V0Rm9sZGVyUGF0aEZyb21TdHJpbmcgfSBmcm9tICcuLi9mdW5jdGlvbnMvdXRpbHMnO1xyXG5pbXBvcnQgeyBXaGl0ZWxpc3RlZEZvbGRlciB9IGZyb20gJ3NyYy9FeGNsdWRlRm9sZGVycy9XaGl0ZWxpc3RGb2xkZXInO1xyXG5pbXBvcnQgeyBXaGl0ZWxpc3RlZFBhdHRlcm4gfSBmcm9tICdzcmMvRXhjbHVkZUZvbGRlcnMvV2hpdGVsaXN0UGF0dGVybic7XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIEZvbGRlck5vdGVzU2V0dGluZ3Mge1xyXG5cdHN5bmNGb2xkZXJOYW1lOiBib29sZWFuO1xyXG5cdGN0cmxLZXk6IGJvb2xlYW47XHJcblx0YWx0S2V5OiBib29sZWFuO1xyXG5cdGhpZGVGb2xkZXJOb3RlOiBib29sZWFuO1xyXG5cdHRlbXBsYXRlUGF0aDogc3RyaW5nO1xyXG5cdGF1dG9DcmVhdGU6IGJvb2xlYW47XHJcblx0YXV0b0NyZWF0ZUZvckF0dGFjaG1lbnRGb2xkZXI6IGJvb2xlYW47XHJcblx0YXV0b0NyZWF0ZUZvY3VzRmlsZXM6IGJvb2xlYW47XHJcblx0ZW5hYmxlQ29sbGFwc2luZzogYm9vbGVhbjtcclxuXHRleGNsdWRlRm9sZGVyczogKEV4Y2x1ZGVQYXR0ZXJuIHwgRXhjbHVkZWRGb2xkZXIpW107XHJcblx0d2hpdGVsaXN0Rm9sZGVyczogKFdoaXRlbGlzdGVkRm9sZGVyIHwgV2hpdGVsaXN0ZWRQYXR0ZXJuKVtdO1xyXG5cdHNob3dEZWxldGVDb25maXJtYXRpb246IGJvb2xlYW47XHJcblx0c2hvd1JlbmFtZUNvbmZpcm1hdGlvbjogYm9vbGVhbjtcclxuXHR1bmRlcmxpbmVGb2xkZXI6IGJvb2xlYW47XHJcblx0c3RvcFdoaXRlc3BhY2VDb2xsYXBzaW5nOiBib29sZWFuO1xyXG5cdHVuZGVybGluZUZvbGRlckluUGF0aDogYm9vbGVhbjtcclxuXHRvcGVuRm9sZGVyTm90ZU9uQ2xpY2tJblBhdGg6IGJvb2xlYW47XHJcblx0b3BlbkluTmV3VGFiOiBib29sZWFuO1xyXG5cdGZvbGRlck5vdGVOYW1lOiBzdHJpbmc7XHJcblx0bmV3Rm9sZGVyTm90ZU5hbWU6IHN0cmluZztcclxuXHRmb2xkZXJOb3RlVHlwZTogc3RyaW5nO1xyXG5cdGRpc2FibGVGb2xkZXJIaWdobGlnaHRpbmc6IGJvb2xlYW47XHJcblx0c3RvcmFnZUxvY2F0aW9uOiAnaW5zaWRlRm9sZGVyJyB8ICdwYXJlbnRGb2xkZXInIHwgJ3ZhdWx0Rm9sZGVyJztcclxuXHRzeW5jRGVsZXRlOiBib29sZWFuO1xyXG5cdGRlZmF1bHRPdmVydmlldzogb3ZlcnZpZXdTZXR0aW5ncztcclxuXHR1c2VTdWJtZW51czogYm9vbGVhbjtcclxuXHRzeW5jTW92ZTogYm9vbGVhbjtcclxuXHRmcm9udE1hdHRlclRpdGxlOiB7XHJcblx0XHRlbmFibGVkOiBib29sZWFuO1xyXG5cdFx0ZXhwbG9yZXI6IGJvb2xlYW47XHJcblx0XHRwYXRoOiBib29sZWFuO1xyXG5cdH0sXHJcblx0c2V0dGluZ3NUYWI6IHN0cmluZztcclxuXHRzdXBwb3J0ZWRGaWxlVHlwZXM6IHN0cmluZ1tdO1xyXG5cdGJvbGROYW1lOiBib29sZWFuO1xyXG5cdGJvbGROYW1lSW5QYXRoOiBib29sZWFuO1xyXG5cdGN1cnNpdmVOYW1lOiBib29sZWFuO1xyXG5cdGN1cnNpdmVOYW1lSW5QYXRoOiBib29sZWFuO1xyXG5cdGRpc2FibGVPcGVuRm9sZGVyTm90ZU9uQ2xpY2s6IGJvb2xlYW47XHJcblx0b3BlbkJ5Q2xpY2s6IGJvb2xlYW47XHJcblx0b3BlbldpdGhDdHJsOiBib29sZWFuO1xyXG5cdG9wZW5XaXRoQWx0OiBib29sZWFuO1xyXG5cdGV4Y2x1ZGVGb2xkZXJEZWZhdWx0U2V0dGluZ3M6IEV4Y2x1ZGVkRm9sZGVyO1xyXG5cdGV4Y2x1ZGVQYXR0ZXJuRGVmYXVsdFNldHRpbmdzOiBFeGNsdWRlUGF0dGVybjtcclxuXHRoaWRlQ29sbGFwc2luZ0ljb246IGJvb2xlYW47XHJcblx0aGlkZUNvbGxhcHNpbmdJY29uRm9yRW1wdHlGb2xkZXJzOiBib29sZWFuO1xyXG5cdGlnbm9yZUF0dGFjaG1lbnRGb2xkZXI6IGJvb2xlYW47XHJcblx0dGFiTWFuYWdlckVuYWJsZWQ6IGJvb2xlYW47XHJcblx0ZGVsZXRlRmlsZXNBY3Rpb246ICdkZWxldGUnIHwgJ3RyYXNoJyB8ICdvYnNpZGlhblRyYXNoJztcclxuXHRvcGVuU2lkZWJhcjoge1xyXG5cdFx0bW9iaWxlOiBib29sZWFuO1xyXG5cdFx0ZGVza3RvcDogYm9vbGVhbjtcclxuXHR9XHJcblx0aGlnaGxpZ2h0Rm9sZGVyOiBib29sZWFuO1xyXG59XHJcblxyXG5leHBvcnQgY29uc3QgREVGQVVMVF9TRVRUSU5HUzogRm9sZGVyTm90ZXNTZXR0aW5ncyA9IHtcclxuXHRzeW5jRm9sZGVyTmFtZTogdHJ1ZSxcclxuXHRjdHJsS2V5OiB0cnVlLFxyXG5cdGFsdEtleTogZmFsc2UsXHJcblx0aGlkZUZvbGRlck5vdGU6IHRydWUsXHJcblx0dGVtcGxhdGVQYXRoOiAnJyxcclxuXHRhdXRvQ3JlYXRlOiBmYWxzZSxcclxuXHRhdXRvQ3JlYXRlRm9jdXNGaWxlczogdHJ1ZSxcclxuXHRhdXRvQ3JlYXRlRm9yQXR0YWNobWVudEZvbGRlcjogZmFsc2UsXHJcblx0ZW5hYmxlQ29sbGFwc2luZzogZmFsc2UsXHJcblx0ZXhjbHVkZUZvbGRlcnM6IFtdLFxyXG5cdHdoaXRlbGlzdEZvbGRlcnM6IFtdLFxyXG5cdHNob3dEZWxldGVDb25maXJtYXRpb246IHRydWUsXHJcblx0dW5kZXJsaW5lRm9sZGVyOiB0cnVlLFxyXG5cdHN0b3BXaGl0ZXNwYWNlQ29sbGFwc2luZzogdHJ1ZSxcclxuXHR1bmRlcmxpbmVGb2xkZXJJblBhdGg6IHRydWUsXHJcblx0b3BlbkZvbGRlck5vdGVPbkNsaWNrSW5QYXRoOiB0cnVlLFxyXG5cdG9wZW5Jbk5ld1RhYjogZmFsc2UsXHJcblx0Zm9sZGVyTm90ZU5hbWU6ICd7e2ZvbGRlcl9uYW1lfX0nLFxyXG5cdGZvbGRlck5vdGVUeXBlOiAnLm1kJyxcclxuXHRkaXNhYmxlRm9sZGVySGlnaGxpZ2h0aW5nOiBmYWxzZSxcclxuXHRuZXdGb2xkZXJOb3RlTmFtZTogJ3t7Zm9sZGVyX25hbWV9fScsXHJcblx0c3RvcmFnZUxvY2F0aW9uOiAnaW5zaWRlRm9sZGVyJyxcclxuXHRzeW5jRGVsZXRlOiBmYWxzZSxcclxuXHRzaG93UmVuYW1lQ29uZmlybWF0aW9uOiB0cnVlLFxyXG5cdGRlZmF1bHRPdmVydmlldzoge1xyXG5cdFx0aWQ6ICcnLFxyXG5cdFx0Zm9sZGVyUGF0aDogJycsXHJcblx0XHR0aXRsZTogJ3t7Zm9sZGVyTmFtZX19IG92ZXJ2aWV3JyxcclxuXHRcdHNob3dUaXRsZTogZmFsc2UsXHJcblx0XHRkZXB0aDogMyxcclxuXHRcdGluY2x1ZGVUeXBlczogWydmb2xkZXInLCAnbWFya2Rvd24nXSxcclxuXHRcdHN0eWxlOiAnbGlzdCcsXHJcblx0XHRkaXNhYmxlRmlsZVRhZzogZmFsc2UsXHJcblx0XHRzb3J0Qnk6ICduYW1lJyxcclxuXHRcdHNvcnRCeUFzYzogdHJ1ZSxcclxuXHRcdHNob3dFbXB0eUZvbGRlcnM6IGZhbHNlLFxyXG5cdFx0b25seUluY2x1ZGVTdWJmb2xkZXJzOiBmYWxzZSxcclxuXHRcdHN0b3JlRm9sZGVyQ29uZGl0aW9uOiB0cnVlLFxyXG5cdFx0c2hvd0ZvbGRlck5vdGVzOiBmYWxzZSxcclxuXHRcdGRpc2FibGVDb2xsYXBzZUljb246IHRydWUsXHJcblx0XHRhbHdheXNDb2xsYXBzZTogZmFsc2UsXHJcblx0fSxcclxuXHR1c2VTdWJtZW51czogdHJ1ZSxcclxuXHRzeW5jTW92ZTogdHJ1ZSxcclxuXHRmcm9udE1hdHRlclRpdGxlOiB7XHJcblx0XHRlbmFibGVkOiBmYWxzZSxcclxuXHRcdGV4cGxvcmVyOiB0cnVlLFxyXG5cdFx0cGF0aDogdHJ1ZSxcclxuXHR9LFxyXG5cdHNldHRpbmdzVGFiOiAnZ2VuZXJhbCcsXHJcblx0c3VwcG9ydGVkRmlsZVR5cGVzOiBbJ21kJywgJ2NhbnZhcyddLFxyXG5cdGJvbGROYW1lOiBmYWxzZSxcclxuXHRib2xkTmFtZUluUGF0aDogZmFsc2UsXHJcblx0Y3Vyc2l2ZU5hbWU6IGZhbHNlLFxyXG5cdGN1cnNpdmVOYW1lSW5QYXRoOiBmYWxzZSxcclxuXHRkaXNhYmxlT3BlbkZvbGRlck5vdGVPbkNsaWNrOiBmYWxzZSxcclxuXHRvcGVuQnlDbGljazogdHJ1ZSxcclxuXHRvcGVuV2l0aEN0cmw6IGZhbHNlLFxyXG5cdG9wZW5XaXRoQWx0OiBmYWxzZSxcclxuXHRleGNsdWRlRm9sZGVyRGVmYXVsdFNldHRpbmdzOiB7XHJcblx0XHR0eXBlOiAnZm9sZGVyJyxcclxuXHRcdHBhdGg6ICcnLFxyXG5cdFx0aWQ6IGNyeXB0by5yYW5kb21VVUlEKCksXHJcblx0XHRzdWJGb2xkZXJzOiB0cnVlLFxyXG5cdFx0ZGlzYWJsZVN5bmM6IHRydWUsXHJcblx0XHRkaXNhYmxlQXV0b0NyZWF0ZTogdHJ1ZSxcclxuXHRcdGRpc2FibGVGb2xkZXJOb3RlOiBmYWxzZSxcclxuXHRcdGVuYWJsZUNvbGxhcHNpbmc6IGZhbHNlLFxyXG5cdFx0cG9zaXRpb246IDAsXHJcblx0XHRleGNsdWRlRnJvbUZvbGRlck92ZXJ2aWV3OiBmYWxzZSxcclxuXHRcdHN0cmluZzogJycsXHJcblx0XHRoaWRlSW5TZXR0aW5nczogZmFsc2UsXHJcblx0XHRkZXRhY2hlZDogZmFsc2UsXHJcblx0XHRoaWRlTm90ZTogZmFsc2UsXHJcblx0fSxcclxuXHRleGNsdWRlUGF0dGVybkRlZmF1bHRTZXR0aW5nczoge1xyXG5cdFx0dHlwZTogJ3BhdHRlcm4nLFxyXG5cdFx0cGF0aDogJycsXHJcblx0XHRpZDogY3J5cHRvLnJhbmRvbVVVSUQoKSxcclxuXHRcdHN1YkZvbGRlcnM6IHRydWUsXHJcblx0XHRkaXNhYmxlU3luYzogdHJ1ZSxcclxuXHRcdGRpc2FibGVBdXRvQ3JlYXRlOiB0cnVlLFxyXG5cdFx0ZGlzYWJsZUZvbGRlck5vdGU6IGZhbHNlLFxyXG5cdFx0ZW5hYmxlQ29sbGFwc2luZzogZmFsc2UsXHJcblx0XHRwb3NpdGlvbjogMCxcclxuXHRcdGV4Y2x1ZGVGcm9tRm9sZGVyT3ZlcnZpZXc6IGZhbHNlLFxyXG5cdFx0c3RyaW5nOiAnJyxcclxuXHRcdGhpZGVJblNldHRpbmdzOiBmYWxzZSxcclxuXHRcdGRldGFjaGVkOiBmYWxzZSxcclxuXHRcdGhpZGVOb3RlOiBmYWxzZSxcclxuXHR9LFxyXG5cdGhpZGVDb2xsYXBzaW5nSWNvbjogZmFsc2UsXHJcblx0aGlkZUNvbGxhcHNpbmdJY29uRm9yRW1wdHlGb2xkZXJzOiBmYWxzZSxcclxuXHR0YWJNYW5hZ2VyRW5hYmxlZDogdHJ1ZSxcclxuXHRpZ25vcmVBdHRhY2htZW50Rm9sZGVyOiB0cnVlLFxyXG5cdGRlbGV0ZUZpbGVzQWN0aW9uOiAndHJhc2gnLFxyXG5cdG9wZW5TaWRlYmFyOiB7XHJcblx0XHRtb2JpbGU6IGZhbHNlLFxyXG5cdFx0ZGVza3RvcDogdHJ1ZSxcclxuXHR9LFxyXG5cdGhpZ2hsaWdodEZvbGRlcjogdHJ1ZSxcclxufTtcclxuXHJcbmV4cG9ydCBjbGFzcyBTZXR0aW5nc1RhYiBleHRlbmRzIFBsdWdpblNldHRpbmdUYWIge1xyXG5cdHBsdWdpbjogRm9sZGVyTm90ZXNQbHVnaW47XHJcblx0YXBwOiBBcHA7XHJcblx0ZXhjbHVkZUZvbGRlcnM6IEV4Y2x1ZGVkRm9sZGVyW107XHJcblx0c2V0dGluZ3NQYWdlITogSFRNTEVsZW1lbnQ7XHJcblx0Y29uc3RydWN0b3IoYXBwOiBBcHAsIHBsdWdpbjogRm9sZGVyTm90ZXNQbHVnaW4pIHtcclxuXHRcdHN1cGVyKGFwcCwgcGx1Z2luKTtcclxuXHR9XHJcblx0VEFCUyA9IHtcclxuXHRcdEdFTkVSQUw6IHtcclxuXHRcdFx0bmFtZTogJ0dlbmVyYWwnLFxyXG5cdFx0XHRpZDogJ2dlbmVyYWwnXHJcblx0XHR9LFxyXG5cdFx0Rk9MREVSX09WRVJWSUVXOiB7XHJcblx0XHRcdG5hbWU6ICdGb2xkZXIgb3ZlcnZpZXcnLFxyXG5cdFx0XHRpZDogJ2ZvbGRlcl9vdmVydmlldydcclxuXHRcdH0sXHJcblx0XHRFWENMVURFX0ZPTERFUlM6IHtcclxuXHRcdFx0bmFtZTogJ0V4Y2x1ZGUgZm9sZGVycycsXHJcblx0XHRcdGlkOiAnZXhjbHVkZV9mb2xkZXJzJ1xyXG5cdFx0fSxcclxuXHRcdEZJTEVfRVhQTE9SRVI6IHtcclxuXHRcdFx0bmFtZTogJ0ZpbGUgZXhwbG9yZXInLFxyXG5cdFx0XHRpZDogJ2ZpbGVfZXhwbG9yZXInLFxyXG5cdFx0fSxcclxuXHRcdFBBVEg6IHtcclxuXHRcdFx0bmFtZTogJ1BhdGgnLFxyXG5cdFx0XHRpZDogJ3BhdGgnXHJcblx0XHR9XHJcblx0fVxyXG5cdHJlbmRlclNldHRpbmdzUGFnZSh0YWJJZDogc3RyaW5nKSB7XHJcblx0XHR0aGlzLnNldHRpbmdzUGFnZS5lbXB0eSgpO1xyXG5cdFx0c3dpdGNoICh0YWJJZC50b0xvY2FsZUxvd2VyQ2FzZSgpKSB7XHJcblx0XHRcdGNhc2UgdGhpcy5UQUJTLkdFTkVSQUwuaWQ6XHJcblx0XHRcdFx0cmVuZGVyR2VuZXJhbCh0aGlzKTtcclxuXHRcdFx0XHRicmVhaztcclxuXHRcdFx0Y2FzZSB0aGlzLlRBQlMuRk9MREVSX09WRVJWSUVXLmlkOlxyXG5cdFx0XHRcdHJlbmRlckZvbGRlck92ZXJ2aWV3KHRoaXMpO1xyXG5cdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRjYXNlIHRoaXMuVEFCUy5FWENMVURFX0ZPTERFUlMuaWQ6XHJcblx0XHRcdFx0cmVuZGVyRXhjbHVkZUZvbGRlcnModGhpcyk7XHJcblx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdGNhc2UgdGhpcy5UQUJTLkZJTEVfRVhQTE9SRVIuaWQ6XHJcblx0XHRcdFx0cmVuZGVyRmlsZUV4cGxvcmVyKHRoaXMpO1xyXG5cdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRjYXNlIHRoaXMuVEFCUy5QQVRILmlkOlxyXG5cdFx0XHRcdHJlbmRlclBhdGgodGhpcyk7XHJcblx0XHRcdFx0YnJlYWs7XHJcblx0XHR9XHJcblxyXG5cdH1cclxuXHJcblx0ZGlzcGxheShjb250ZW50RWw/OiBIVE1MRWxlbWVudCwgeWFtbD86IG92ZXJ2aWV3U2V0dGluZ3MsIHBsdWdpbj86IEZvbGRlck5vdGVzUGx1Z2luLCBkZWZhdWx0U2V0dGluZ3M/OiBib29sZWFuLCBkaXNwbGF5PzogQ2FsbGFibGVGdW5jdGlvbiwgZWw/OiBIVE1MRWxlbWVudCwgY3R4PzogTWFya2Rvd25Qb3N0UHJvY2Vzc29yQ29udGV4dCwgZmlsZT86IFRGaWxlIHwgbnVsbCwgc2V0dGluZ3NUYWI/OiB0aGlzKSB7XHJcblx0XHRwbHVnaW4gPSB0aGlzPy5wbHVnaW4gPz8gcGx1Z2luO1xyXG5cdFx0cGx1Z2luLnNldHRpbmdzT3BlbmVkID0gdHJ1ZTtcclxuXHRcdHNldHRpbmdzVGFiID0gdGhpcyA/PyBzZXR0aW5nc1RhYjtcclxuXHRcdGNvbnN0IHsgY29udGFpbmVyRWwgfSA9IHNldHRpbmdzVGFiO1xyXG5cclxuXHRcdGNvbnRhaW5lckVsLmVtcHR5KCk7XHJcblxyXG5cdFx0Y29uc3QgdGFiQmFyID0gY29udGFpbmVyRWwuY3JlYXRlRWwoJ25hdicsIHsgY2xzOiAnZm4tc2V0dGluZ3MtdGFiLWJhcicgfSk7XHJcblx0XHRmb3IgKGNvbnN0IFt0YWJJZCwgdGFiSW5mb10gb2YgT2JqZWN0LmVudHJpZXMoc2V0dGluZ3NUYWIuVEFCUykpIHtcclxuXHRcdFx0Y29uc3QgdGFiRWwgPSB0YWJCYXIuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnZm4tc2V0dGluZ3MtdGFiJyB9KTtcclxuXHRcdFx0Y29uc3QgdGFiTmFtZSA9IHRhYkVsLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ2ZuLXNldHRpbmdzLXRhYi1uYW1lJywgdGV4dDogdGFiSW5mby5uYW1lIH0pO1xyXG5cdFx0XHRpZiAocGx1Z2luLnNldHRpbmdzLnNldHRpbmdzVGFiLnRvTG9jYWxlTG93ZXJDYXNlKCkgPT09IHRhYklkLnRvTG9jYWxlTG93ZXJDYXNlKCkpIHtcclxuXHRcdFx0XHR0YWJFbC5hZGRDbGFzcygnZm4tc2V0dGluZ3MtdGFiLWFjdGl2ZScpO1xyXG5cdFx0XHR9XHJcblx0XHRcdHRhYkVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG5cdFx0XHRcdC8vIEB0cy1pZ25vcmVcclxuXHRcdFx0XHRmb3IgKGNvbnN0IHRhYkVsIG9mIHRhYkJhci5jaGlsZHJlbikge1xyXG5cdFx0XHRcdFx0dGFiRWwucmVtb3ZlQ2xhc3MoJ2ZuLXNldHRpbmdzLXRhYi1hY3RpdmUnKTtcclxuXHRcdFx0XHRcdHBsdWdpbi5zZXR0aW5ncy5zZXR0aW5nc1RhYiA9IHRhYklkLnRvTG9jYWxlTG93ZXJDYXNlKCk7XHJcblx0XHRcdFx0XHRwbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdHRhYkVsLmFkZENsYXNzKCdmbi1zZXR0aW5ncy10YWItYWN0aXZlJyk7XHJcblx0XHRcdFx0c2V0dGluZ3NUYWIucmVuZGVyU2V0dGluZ3NQYWdlKHRhYklkKTtcclxuXHRcdFx0fSk7XHJcblx0XHR9XHJcblx0XHRzZXR0aW5nc1RhYi5zZXR0aW5nc1BhZ2UgPSBjb250YWluZXJFbC5jcmVhdGVEaXYoeyBjbHM6ICdmbi1zZXR0aW5ncy1wYWdlJyB9KTtcclxuXHRcdHNldHRpbmdzVGFiLnJlbmRlclNldHRpbmdzUGFnZShwbHVnaW4uc2V0dGluZ3Muc2V0dGluZ3NUYWIpO1xyXG5cdH1cclxuXHJcblx0dXBkYXRlRm9sZGVyTm90ZXMobmV3VGVtcGxhdGU6IHN0cmluZykge1xyXG5cdFx0bmV3IE5vdGljZSgnU3RhcnRpbmcgdG8gdXBkYXRlIGZvbGRlciBub3Rlcy4uLicpO1xyXG5cdFx0Zm9yIChjb25zdCBmb2xkZXIgb2YgdGhpcy5hcHAudmF1bHQuZ2V0QWxsTG9hZGVkRmlsZXMoKSkge1xyXG5cdFx0XHRpZiAoZm9sZGVyIGluc3RhbmNlb2YgVEZvbGRlcikge1xyXG5cdFx0XHRcdGNvbnN0IGZvbGRlck5vdGUgPSBnZXRGb2xkZXJOb3RlKHRoaXMucGx1Z2luLCBmb2xkZXIucGF0aCk7XHJcblx0XHRcdFx0aWYgKCEoZm9sZGVyTm90ZSBpbnN0YW5jZW9mIFRGaWxlKSkgeyBjb250aW51ZSB9XHJcblx0XHRcdFx0Y29uc3QgZm9sZGVyTm90ZU5hbWUgPSBuZXdUZW1wbGF0ZS5yZXBsYWNlKCd7e2ZvbGRlcl9uYW1lfX0nLCBmb2xkZXIubmFtZSlcclxuXHRcdFx0XHRjb25zdCBuZXdQYXRoID0gYCR7Zm9sZGVyLnBhdGh9LyR7Zm9sZGVyTm90ZU5hbWV9LiR7Zm9sZGVyTm90ZS5leHRlbnNpb259YDtcclxuXHRcdFx0XHRpZiAodGhpcy5wbHVnaW4uYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChuZXdQYXRoKSkgeyBjb250aW51ZSB9XHJcblx0XHRcdFx0dGhpcy5wbHVnaW4uYXBwLmZpbGVNYW5hZ2VyLnJlbmFtZUZpbGUoZm9sZGVyTm90ZSwgbmV3UGF0aCk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmZvbGRlck5vdGVOYW1lID0gbmV3VGVtcGxhdGU7XHJcblx0XHR0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdG5ldyBOb3RpY2UoJ0ZpbmlzaGVkIHVwZGF0aW5nIGZvbGRlciBub3RlcycpO1xyXG5cdH1cclxuXHJcblx0c3dpdGNoU3RvcmFnZUxvY2F0aW9uKG9sZE1ldGhvZDogc3RyaW5nKSB7XHJcblx0XHRuZXcgTm90aWNlKCdTdGFydGluZyB0byBzd2l0Y2ggc3RvcmFnZSBsb2NhdGlvbi4uLicpO1xyXG5cdFx0dGhpcy5hcHAudmF1bHQuZ2V0QWxsTG9hZGVkRmlsZXMoKS5mb3JFYWNoKChmaWxlKSA9PiB7XHJcblx0XHRcdGlmIChmaWxlIGluc3RhbmNlb2YgVEZvbGRlcikge1xyXG5cdFx0XHRcdGNvbnN0IGZvbGRlck5vdGUgPSBnZXRGb2xkZXJOb3RlKHRoaXMucGx1Z2luLCBmaWxlLnBhdGgsIG9sZE1ldGhvZCk7XHJcblx0XHRcdFx0aWYgKGZvbGRlck5vdGUgaW5zdGFuY2VvZiBURmlsZSkge1xyXG5cdFx0XHRcdFx0aWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLnN0b3JhZ2VMb2NhdGlvbiA9PT0gJ3BhcmVudEZvbGRlcicpIHtcclxuXHRcdFx0XHRcdFx0bGV0IG5ld1BhdGggPSAnJztcclxuXHRcdFx0XHRcdFx0aWYgKGdldEZvbGRlclBhdGhGcm9tU3RyaW5nKGZpbGUucGF0aCkudHJpbSgpID09PSAnJykge1xyXG5cdFx0XHRcdFx0XHRcdG5ld1BhdGggPSBgJHtmb2xkZXJOb3RlLm5hbWV9YDtcclxuXHRcdFx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdFx0XHRuZXdQYXRoID0gYCR7Z2V0Rm9sZGVyUGF0aEZyb21TdHJpbmcoZmlsZS5wYXRoKX0vJHtmb2xkZXJOb3RlLm5hbWV9YDtcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5hcHAuZmlsZU1hbmFnZXIucmVuYW1lRmlsZShmb2xkZXJOb3RlLCBuZXdQYXRoKTtcclxuXHRcdFx0XHRcdH0gZWxzZSBpZiAodGhpcy5wbHVnaW4uc2V0dGluZ3Muc3RvcmFnZUxvY2F0aW9uID09PSAnaW5zaWRlRm9sZGVyJykge1xyXG5cdFx0XHRcdFx0XHRpZiAoZ2V0Rm9sZGVyUGF0aEZyb21TdHJpbmcoZm9sZGVyTm90ZS5wYXRoKSA9PT0gZmlsZS5wYXRoKSB7XHJcblx0XHRcdFx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0XHRcdGNvbnN0IG5ld1BhdGggPSBgJHtmaWxlLnBhdGh9LyR7Zm9sZGVyTm90ZS5uYW1lfWA7XHJcblx0XHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uYXBwLmZpbGVNYW5hZ2VyLnJlbmFtZUZpbGUoZm9sZGVyTm90ZSwgbmV3UGF0aCk7XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdH0pO1xyXG5cdFx0bmV3IE5vdGljZSgnRmluaXNoZWQgc3dpdGNoaW5nIHN0b3JhZ2UgbG9jYXRpb24nKTtcclxuXHR9XHJcblxyXG5cdG9uQ2xvc2UoKTogdm9pZCB7XHJcblx0XHR0aGlzLnBsdWdpbi5zZXR0aW5nc09wZW5lZCA9IGZhbHNlO1xyXG5cdH1cclxufVxyXG4iLCAiaW1wb3J0IHsgQXBwLCBNb2RhbCwgU2V0dGluZywgVEZpbGUsIFBsYXRmb3JtLCBURm9sZGVyLCBUQWJzdHJhY3RGaWxlIH0gZnJvbSAnb2JzaWRpYW4nO1xyXG5pbXBvcnQgRm9sZGVyTm90ZXNQbHVnaW4gZnJvbSAnLi4vbWFpbic7XHJcbmltcG9ydCB7IHR1cm5JbnRvRm9sZGVyTm90ZSB9IGZyb20gJ3NyYy9mdW5jdGlvbnMvZm9sZGVyTm90ZUZ1bmN0aW9ucyc7XHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEV4aXN0aW5nRm9sZGVyTm90ZU1vZGFsIGV4dGVuZHMgTW9kYWwge1xyXG5cdHBsdWdpbjogRm9sZGVyTm90ZXNQbHVnaW47XHJcblx0YXBwOiBBcHA7XHJcblx0ZmlsZTogVEZpbGU7XHJcblx0Zm9sZGVyOiBURm9sZGVyO1xyXG5cdGZvbGRlck5vdGU6IFRBYnN0cmFjdEZpbGU7XHJcblx0Y29uc3RydWN0b3IoYXBwOiBBcHAsIHBsdWdpbjogRm9sZGVyTm90ZXNQbHVnaW4sIGZpbGU6IFRGaWxlLCBmb2xkZXI6IFRGb2xkZXIsIGZvbGRlck5vdGU6IFRBYnN0cmFjdEZpbGUpIHtcclxuXHRcdHN1cGVyKGFwcCk7XHJcblx0XHR0aGlzLnBsdWdpbiA9IHBsdWdpbjtcclxuXHRcdHRoaXMuYXBwID0gYXBwO1xyXG5cdFx0dGhpcy5maWxlID0gZmlsZTtcclxuXHRcdHRoaXMuZm9sZGVyID0gZm9sZGVyO1xyXG5cdFx0dGhpcy5mb2xkZXJOb3RlID0gZm9sZGVyTm90ZTtcclxuXHR9XHJcblx0b25PcGVuKCkge1xyXG5cdFx0Y29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XHJcblx0XHRjb250ZW50RWwuY3JlYXRlRWwoJ2gyJywgeyB0ZXh0OiAnQSBmb2xkZXIgbm90ZSBmb3IgdGhpcyBmb2xkZXIgYWxyZWFkeSBleGlzdHMnIH0pO1xyXG5cdFx0Y29uc3Qgc2V0dGluZyA9IG5ldyBTZXR0aW5nKGNvbnRlbnRFbCk7XHJcblx0XHRzZXR0aW5nLmluZm9FbC5jcmVhdGVFbCgncCcsIHsgdGV4dDogJ0FyZSB5b3Ugc3VyZSB5b3Ugd2FudCB0byB0dXJuIHRoZSBub3RlIGludG8gYSBmb2xkZXIgbm90ZSBhbmQgcmVuYW1lIHRoZSBleGlzdGluZyBmb2xkZXIgbm90ZT8nIH0pO1xyXG5cclxuXHRcdHNldHRpbmcuaW5mb0VsLnBhcmVudEVsZW1lbnQ/LmNsYXNzTGlzdC5hZGQoJ2ZuLWRlbGV0ZS1jb25maXJtYXRpb24tbW9kYWwnKTtcclxuXHJcblx0XHQvLyBDcmVhdGUgYSBjb250YWluZXIgZm9yIHRoZSBidXR0b25zIGFuZCB0aGUgY2hlY2tib3hcclxuXHRcdGNvbnN0IGJ1dHRvbkNvbnRhaW5lciA9IHNldHRpbmcuaW5mb0VsLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ2ZuLWRlbGV0ZS1jb25maXJtYXRpb24tbW9kYWwtYnV0dG9ucycgfSk7XHJcblx0XHRpZiAoUGxhdGZvcm0uaXNNb2JpbGVBcHApIHtcclxuXHRcdFx0Y29uc3QgY29uZmlybUJ1dHRvbiA9IGJ1dHRvbkNvbnRhaW5lci5jcmVhdGVFbCgnYnV0dG9uJywgeyB0ZXh0OiAnUmVuYW1lIGFuZCBkb25cXCd0IGFzayBhZ2FpbicgfSk7XHJcblx0XHRcdGNvbmZpcm1CdXR0b24uY2xhc3NMaXN0LmFkZCgnbW9kLXdhcm5pbmcnLCAnZm4tY29uZmlybWF0aW9uLW1vZGFsLWJ1dHRvbicpO1xyXG5cdFx0XHRjb25maXJtQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgYXN5bmMgKCkgPT4ge1xyXG5cdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLnNob3dSZW5hbWVDb25maXJtYXRpb24gPSBmYWxzZTtcclxuXHRcdFx0XHR0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0XHR0aGlzLmNsb3NlKCk7XHJcblx0XHRcdFx0dHVybkludG9Gb2xkZXJOb3RlKHRoaXMucGx1Z2luLCB0aGlzLmZpbGUsIHRoaXMuZm9sZGVyLCB0aGlzLmZvbGRlck5vdGUsIHRydWUpO1xyXG5cdFx0XHR9KTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdGNvbnN0IGNoZWNrYm94ID0gYnV0dG9uQ29udGFpbmVyLmNyZWF0ZUVsKCdpbnB1dCcsIHsgdHlwZTogJ2NoZWNrYm94JyB9KTtcclxuXHRcdFx0Y2hlY2tib3guYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgKGUpID0+IHtcclxuXHRcdFx0XHRjb25zdCB0YXJnZXQgPSBlLnRhcmdldCBhcyBIVE1MSW5wdXRFbGVtZW50O1xyXG5cdFx0XHRcdGlmICh0YXJnZXQuY2hlY2tlZCkge1xyXG5cdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3Muc2hvd1JlbmFtZUNvbmZpcm1hdGlvbiA9IGZhbHNlO1xyXG5cdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5zaG93UmVuYW1lQ29uZmlybWF0aW9uID0gdHJ1ZTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0pO1xyXG5cdFx0XHRjb25zdCBjaGVja0JveFRleHQgPSBidXR0b25Db250YWluZXIuY3JlYXRlRWwoJ3NwYW4nLCB7IHRleHQ6ICdEb25cXCd0IGFzayBhZ2FpbicgfSk7XHJcblx0XHRcdGNoZWNrQm94VGV4dC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuXHRcdFx0XHRjaGVja2JveC5jbGljaygpO1xyXG5cdFx0XHR9KTtcclxuXHRcdH1cclxuXHRcdGNvbnN0IGJ1dHRvbiA9IGJ1dHRvbkNvbnRhaW5lci5jcmVhdGVFbCgnYnV0dG9uJywgeyB0ZXh0OiAnUmVuYW1lJyB9KTtcclxuXHRcdGJ1dHRvbi5jbGFzc0xpc3QuYWRkKCdtb2Qtd2FybmluZycsICdmbi1jb25maXJtYXRpb24tbW9kYWwtYnV0dG9uJyk7XHJcblx0XHRidXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBhc3luYyAoKSA9PiB7XHJcblx0XHRcdHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHR0aGlzLmNsb3NlKCk7XHJcblx0XHRcdHR1cm5JbnRvRm9sZGVyTm90ZSh0aGlzLnBsdWdpbiwgdGhpcy5maWxlLCB0aGlzLmZvbGRlciwgdGhpcy5mb2xkZXJOb3RlLCB0cnVlKTtcclxuXHRcdH0pO1xyXG5cdFx0YnV0dG9uLmZvY3VzKCk7XHJcblx0XHRjb25zdCBjYW5jZWxCdXR0b24gPSBidXR0b25Db250YWluZXIuY3JlYXRlRWwoJ2J1dHRvbicsIHsgdGV4dDogJ0NhbmNlbCcgfSk7XHJcblx0XHRjYW5jZWxCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBhc3luYyAoKSA9PiB7XHJcblx0XHRcdHRoaXMuY2xvc2UoKTtcclxuXHRcdH0pO1xyXG5cclxuXHR9XHJcblx0b25DbG9zZSgpIHtcclxuXHRcdGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xyXG5cdFx0Y29udGVudEVsLmVtcHR5KCk7XHJcblx0fVxyXG59XHJcbiIsICIvLyBUaGFua3MgdG8gQG1nbWV5ZXJzIGZvciB0aGUgY3JlYXRpbmcgdGhlIG9ic2lkaWFuIGthbmJhbiBwbHVnaW4gaHR0cHM6Ly9naXRodWIuY29tL21nbWV5ZXJzL29ic2lkaWFuLWthbmJhblxyXG4vLyBmcm9tIHdoZXJlIEkgZ290IHRoZSB0ZW1wbGF0ZSBjb2RlIGZvciB0aGlzIHBsdWdpblxyXG4vLyBodHRwczovL2dpdGh1Yi5jb20vbWdtZXllcnMvb2JzaWRpYW4ta2FuYmFuL2Jsb2IvNDhlNmMyNzhjZTkxNDBiN2UwMzRiMTgxNDMyMzIxZjY5N2Q2ZTQ1ZS9zcmMvY29tcG9uZW50cy9oZWxwZXJzLnRzXHJcblxyXG5pbXBvcnQgeyBURmlsZSwgQXBwLCBXb3Jrc3BhY2VMZWFmIH0gZnJvbSAnb2JzaWRpYW4nO1xyXG5pbXBvcnQgRm9sZGVyTm90ZXNQbHVnaW4gZnJvbSAnLi9tYWluJztcclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGFwcGx5VGVtcGxhdGUoXHJcblx0cGx1Z2luOiBGb2xkZXJOb3Rlc1BsdWdpbixcclxuXHRmaWxlOiBURmlsZSxcclxuXHRsZWFmPzogV29ya3NwYWNlTGVhZiB8IG51bGwsXHJcblx0dGVtcGxhdGVQYXRoPzogc3RyaW5nXHJcbikge1xyXG5cdGNvbnN0IHRlbXBsYXRlRmlsZSA9IHRlbXBsYXRlUGF0aFxyXG5cdFx0PyBwbHVnaW4uYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aCh0ZW1wbGF0ZVBhdGgpXHJcblx0XHQ6IG51bGw7XHJcblxyXG5cdGlmICh0ZW1wbGF0ZUZpbGUgJiYgdGVtcGxhdGVGaWxlIGluc3RhbmNlb2YgVEZpbGUpIHtcclxuXHRcdHRyeSB7XHJcblxyXG5cdFx0XHRjb25zdCB7XHJcblx0XHRcdFx0dGVtcGxhdGVzRW5hYmxlZCxcclxuXHRcdFx0XHR0ZW1wbGF0ZXJFbmFibGVkLFxyXG5cdFx0XHRcdHRlbXBsYXRlc1BsdWdpbixcclxuXHRcdFx0XHR0ZW1wbGF0ZXJQbHVnaW4sXHJcblx0XHRcdH0gPSBnZXRUZW1wbGF0ZVBsdWdpbnMocGx1Z2luLmFwcCk7XHJcblx0XHRcdGNvbnN0IHRlbXBsYXRlQ29udGVudCA9IGF3YWl0IHBsdWdpbi5hcHAudmF1bHQucmVhZCh0ZW1wbGF0ZUZpbGUpO1xyXG5cdFx0XHRpZiAodGVtcGxhdGVDb250ZW50LmluY2x1ZGVzKCc9PVx1MjZBMCAgU3dpdGNoIHRvIEVYQ0FMSURSQVcgVklFVyBpbiB0aGUgTU9SRSBPUFRJT05TIG1lbnUgb2YgdGhpcyBkb2N1bWVudC4gXHUyNkEwPT0nKSkgeyByZXR1cm47IH1cclxuXHJcblx0XHRcdC8vIElmIGJvdGggcGx1Z2lucyBhcmUgZW5hYmxlZCwgYXR0ZW1wdCB0byBkZXRlY3QgdGVtcGxhdGVyIGZpcnN0XHJcblxyXG5cdFx0XHRpZiAodGVtcGxhdGVzRW5hYmxlZCAmJiB0ZW1wbGF0ZXJFbmFibGVkKSB7XHJcblx0XHRcdFx0aWYgKC88JS8udGVzdCh0ZW1wbGF0ZUNvbnRlbnQpKSB7XHJcblx0XHRcdFx0XHRyZXR1cm4gYXdhaXQgdGVtcGxhdGVyUGx1Z2luLndyaXRlX3RlbXBsYXRlX3RvX2ZpbGUoXHJcblx0XHRcdFx0XHRcdHRlbXBsYXRlRmlsZSxcclxuXHRcdFx0XHRcdFx0ZmlsZVxyXG5cdFx0XHRcdFx0KTtcclxuXHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0aWYgKGxlYWYgaW5zdGFuY2VvZiBXb3Jrc3BhY2VMZWFmKSB7XHJcblx0XHRcdFx0XHRcdGxlYWYub3BlbkZpbGUoZmlsZSkudGhlbihhc3luYyAoKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0cmV0dXJuIGF3YWl0IHRlbXBsYXRlc1BsdWdpbi5pbnN0YW5jZS5pbnNlcnRUZW1wbGF0ZSh0ZW1wbGF0ZUZpbGUsIGZpbGUpO1xyXG5cdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdGlmICh0ZW1wbGF0ZXNFbmFibGVkKSB7XHJcblx0XHRcdFx0aWYgKGxlYWYgaW5zdGFuY2VvZiBXb3Jrc3BhY2VMZWFmKSB7XHJcblx0XHRcdFx0XHRsZWFmLm9wZW5GaWxlKGZpbGUpXHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdHJldHVybiBhd2FpdCB0ZW1wbGF0ZXNQbHVnaW4uaW5zdGFuY2UuaW5zZXJ0VGVtcGxhdGUodGVtcGxhdGVGaWxlKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0aWYgKHRlbXBsYXRlckVuYWJsZWQpIHtcclxuXHRcdFx0XHRyZXR1cm4gYXdhaXQgdGVtcGxhdGVyUGx1Z2luLndyaXRlX3RlbXBsYXRlX3RvX2ZpbGUoXHJcblx0XHRcdFx0XHR0ZW1wbGF0ZUZpbGUsXHJcblx0XHRcdFx0XHRmaWxlXHJcblx0XHRcdFx0KTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdH0gY2F0Y2ggKGUpIHtcclxuXHRcdFx0Y29uc29sZS5lcnJvcihlKTtcclxuXHRcdH1cclxuXHR9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRUZW1wbGF0ZVBsdWdpbnMoYXBwOiBBcHApIHtcclxuXHRjb25zdCB0ZW1wbGF0ZXNQbHVnaW4gPSAoYXBwIGFzIGFueSkuaW50ZXJuYWxQbHVnaW5zLnBsdWdpbnMudGVtcGxhdGVzO1xyXG5cdGNvbnN0IHRlbXBsYXRlc0VuYWJsZWQgPSB0ZW1wbGF0ZXNQbHVnaW4uZW5hYmxlZDtcclxuXHRjb25zdCB0ZW1wbGF0ZXJQbHVnaW4gPSAoYXBwIGFzIGFueSkucGx1Z2lucy5wbHVnaW5zWyd0ZW1wbGF0ZXItb2JzaWRpYW4nXTtcclxuXHRjb25zdCB0ZW1wbGF0ZXJFbmFibGVkID0gKGFwcCBhcyBhbnkpLnBsdWdpbnMuZW5hYmxlZFBsdWdpbnMuaGFzKFxyXG5cdFx0J3RlbXBsYXRlci1vYnNpZGlhbidcclxuXHQpO1xyXG5cdGNvbnN0IHRlbXBsYXRlckVtcHR5RmlsZVRlbXBsYXRlID1cclxuXHRcdHRlbXBsYXRlclBsdWdpbiAmJlxyXG5cdFx0KHRoaXMuYXBwIGFzIGFueSkucGx1Z2lucy5wbHVnaW5zWyd0ZW1wbGF0ZXItb2JzaWRpYW4nXS5zZXR0aW5nc1xyXG5cdFx0XHQ/LmVtcHR5X2ZpbGVfdGVtcGxhdGU7XHJcblxyXG5cdGNvbnN0IHRlbXBsYXRlRm9sZGVyID0gdGVtcGxhdGVzRW5hYmxlZFxyXG5cdFx0PyB0ZW1wbGF0ZXNQbHVnaW4uaW5zdGFuY2Uub3B0aW9ucy5mb2xkZXJcclxuXHRcdDogdGVtcGxhdGVyUGx1Z2luXHJcblx0XHRcdD8gdGVtcGxhdGVyUGx1Z2luLnNldHRpbmdzLnRlbXBsYXRlX2ZvbGRlclxyXG5cdFx0XHQ6IHVuZGVmaW5lZDtcclxuXHJcblx0cmV0dXJuIHtcclxuXHRcdHRlbXBsYXRlc1BsdWdpbixcclxuXHRcdHRlbXBsYXRlc0VuYWJsZWQsXHJcblx0XHR0ZW1wbGF0ZXJQbHVnaW46IHRlbXBsYXRlclBsdWdpbj8udGVtcGxhdGVyLFxyXG5cdFx0dGVtcGxhdGVyRW5hYmxlZCxcclxuXHRcdHRlbXBsYXRlckVtcHR5RmlsZVRlbXBsYXRlLFxyXG5cdFx0dGVtcGxhdGVGb2xkZXIsXHJcblx0fTtcclxufVxyXG4iLCAiaW1wb3J0IEZvbGRlck5vdGVzUGx1Z2luIGZyb20gJy4uL21haW4nO1xyXG5pbXBvcnQgRXhpc3RpbmdGb2xkZXJOb3RlTW9kYWwgZnJvbSAnLi4vbW9kYWxzL0V4aXN0aW5nTm90ZSc7XHJcbmltcG9ydCB7IGFwcGx5VGVtcGxhdGUgfSBmcm9tICcuLi90ZW1wbGF0ZSc7XHJcbmltcG9ydCB7IFRGb2xkZXIsIFRGaWxlLCBUQWJzdHJhY3RGaWxlLCBLZXltYXAgfSBmcm9tICdvYnNpZGlhbic7XHJcbmltcG9ydCBEZWxldGVDb25maXJtYXRpb25Nb2RhbCBmcm9tICcuLi9tb2RhbHMvRGVsZXRlQ29uZmlybWF0aW9uJztcclxuaW1wb3J0IHsgYWRkRXhjbHVkZWRGb2xkZXIsIGRlbGV0ZUV4Y2x1ZGVkRm9sZGVyLCBnZXREZXRhY2hlZEZvbGRlciwgZ2V0RXhjbHVkZWRGb2xkZXIsIHVwZGF0ZUV4Y2x1ZGVkRm9sZGVyIH0gZnJvbSAnLi4vRXhjbHVkZUZvbGRlcnMvZnVuY3Rpb25zL2ZvbGRlckZ1bmN0aW9ucyc7XHJcbmltcG9ydCB7IEV4Y2x1ZGVkRm9sZGVyIH0gZnJvbSAnLi4vRXhjbHVkZUZvbGRlcnMvRXhjbHVkZUZvbGRlcic7XHJcbmltcG9ydCB7IG9wZW5FeGNhbGlkcmF3VmlldyB9IGZyb20gJy4vZXhjYWxpZHJhdyc7XHJcbmltcG9ydCB7IEFza0ZvckV4dGVuc2lvbk1vZGFsIH0gZnJvbSAnc3JjL21vZGFscy9Bc2tGb3JFeHRlbnNpb24nO1xyXG5pbXBvcnQgeyBnZXRFbCwgYWRkQ1NTQ2xhc3NUb1RpdGxlRUwsIHJlbW92ZUNTU0NsYXNzRnJvbUVMIH0gZnJvbSAnc3JjL2Z1bmN0aW9ucy9zdHlsZUZ1bmN0aW9ucyc7XHJcbmltcG9ydCB7IGdldEZvbGRlck5hbWVGcm9tUGF0aFN0cmluZywgZ2V0Rm9sZGVyUGF0aEZyb21TdHJpbmcsIHJlbW92ZUV4dGVuc2lvbiB9IGZyb20gJ3NyYy9mdW5jdGlvbnMvdXRpbHMnO1xyXG5cclxuY29uc3QgZGVmYXVsdEV4Y2FsaWRyYXdUZW1wbGF0ZSA9IGAtLS1cclxuXHJcbmV4Y2FsaWRyYXctcGx1Z2luOiBwYXJzZWRcclxudGFnczogW2V4Y2FsaWRyYXddXHJcblxyXG4tLS1cclxuPT1cdTI2QTAgIFN3aXRjaCB0byBFWENBTElEUkFXIFZJRVcgaW4gdGhlIE1PUkUgT1BUSU9OUyBtZW51IG9mIHRoaXMgZG9jdW1lbnQuIFx1MjZBMD09XHJcblxyXG5cclxuJSVcclxuIyBEcmF3aW5nXHJcblxcYFxcYFxcYGpzb25cclxueyd0eXBlXCI6XCJleGNhbGlkcmF3XCIsXCJ2ZXJzaW9uXCI6MixcInNvdXJjZVwiOlwiaHR0cHM6Ly9naXRodWIuY29tL3pzdmljemlhbi9vYnNpZGlhbi1leGNhbGlkcmF3LXBsdWdpbi9yZWxlYXNlcy90YWcvMS45LjIwXCIsXCJlbGVtZW50c1wiOltdLFwiYXBwU3RhdGVcIjp7XCJncmlkU2l6ZVwiOm51bGwsXCJ2aWV3QmFja2dyb3VuZENvbG9yXCI6XCIjZmZmZmZmJ319XHJcblxcYFxcYFxcYFxyXG4lJWA7XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY3JlYXRlRm9sZGVyTm90ZShwbHVnaW46IEZvbGRlck5vdGVzUGx1Z2luLCBmb2xkZXJQYXRoOiBzdHJpbmcsIG9wZW5GaWxlOiBib29sZWFuLCBleHRlbnNpb24/OiBzdHJpbmcsIGRpc3BsYXlNb2RhbD86IGJvb2xlYW4sIHByZWV4aXN0aW5nTm90ZT86IFRGaWxlKSB7XHJcblx0Y29uc3QgbGVhZiA9IHBsdWdpbi5hcHAud29ya3NwYWNlLmdldExlYWYoZmFsc2UpO1xyXG5cdGNvbnN0IGZvbGRlck5hbWUgPSBnZXRGb2xkZXJOYW1lRnJvbVBhdGhTdHJpbmcoZm9sZGVyUGF0aCk7XHJcblx0Y29uc3QgZmlsZU5hbWUgPSBwbHVnaW4uc2V0dGluZ3MuZm9sZGVyTm90ZU5hbWUucmVwbGFjZSgne3tmb2xkZXJfbmFtZX19JywgZm9sZGVyTmFtZSk7XHJcblx0bGV0IGZvbGRlck5vdGUgPSBnZXRGb2xkZXJOb3RlKHBsdWdpbiwgZm9sZGVyUGF0aClcclxuXHRpZiAocHJlZXhpc3RpbmdOb3RlKSB7XHJcblx0XHRmb2xkZXJOb3RlID0gcHJlZXhpc3RpbmdOb3RlO1xyXG5cdH1cclxuXHRsZXQgZm9sZGVyTm90ZVR5cGUgPSBleHRlbnNpb24gPz8gcGx1Z2luLnNldHRpbmdzLmZvbGRlck5vdGVUeXBlO1xyXG5cdGNvbnN0IGRldGFjaGVkRm9sZGVyID0gZ2V0RGV0YWNoZWRGb2xkZXIocGx1Z2luLCBmb2xkZXJQYXRoKVxyXG5cdGxldCBwYXRoID0gJyc7XHJcblxyXG5cdGlmIChmb2xkZXJOb3RlVHlwZSA9PT0gJy5leGNhbGlkcmF3Jykge1xyXG5cdFx0Zm9sZGVyTm90ZVR5cGUgPSAnLm1kJztcclxuXHRcdGV4dGVuc2lvbiA9ICcuZXhjYWxpZHJhdyc7XHJcblx0fSBlbHNlIGlmIChmb2xkZXJOb3RlVHlwZSA9PT0gJy5hc2snKSB7XHJcblx0XHRyZXR1cm4gbmV3IEFza0ZvckV4dGVuc2lvbk1vZGFsKHBsdWdpbiwgZm9sZGVyUGF0aCwgb3BlbkZpbGUsIGZvbGRlck5vdGVUeXBlLCBkaXNwbGF5TW9kYWwsIHByZWV4aXN0aW5nTm90ZSkub3BlbigpO1xyXG5cdH1cclxuXHJcblx0aWYgKHBsdWdpbi5zZXR0aW5ncy5zdG9yYWdlTG9jYXRpb24gPT09ICdwYXJlbnRGb2xkZXInKSB7XHJcblx0XHRjb25zdCBwYXJlbnRGb2xkZXJQYXRoID0gZ2V0Rm9sZGVyUGF0aEZyb21TdHJpbmcoZm9sZGVyUGF0aCk7XHJcblx0XHRpZiAocGFyZW50Rm9sZGVyUGF0aC50cmltKCkgPT09ICcnKSB7XHJcblx0XHRcdHBhdGggPSBgJHtmaWxlTmFtZX0ke2ZvbGRlck5vdGVUeXBlfWA7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHRwYXRoID0gYCR7cGFyZW50Rm9sZGVyUGF0aH0vJHtmaWxlTmFtZX0ke2ZvbGRlck5vdGVUeXBlfWA7XHJcblx0XHR9XHJcblx0fSBlbHNlIGlmIChwbHVnaW4uc2V0dGluZ3Muc3RvcmFnZUxvY2F0aW9uID09PSAndmF1bHRGb2xkZXInKSB7XHJcblx0XHRwYXRoID0gYCR7ZmlsZU5hbWV9JHtmb2xkZXJOb3RlVHlwZX1gO1xyXG5cdH0gZWxzZSB7XHJcblx0XHRwYXRoID0gYCR7Zm9sZGVyUGF0aH0vJHtmaWxlTmFtZX0ke2ZvbGRlck5vdGVUeXBlfWA7XHJcblx0fVxyXG5cclxuXHRpZiAoZGV0YWNoZWRGb2xkZXIgJiYgZm9sZGVyTm90ZT8uZXh0ZW5zaW9uICE9PSBleHRlbnNpb24gJiYgZm9sZGVyTm90ZSkge1xyXG5cdFx0ZGVsZXRlRXhjbHVkZWRGb2xkZXIocGx1Z2luLCBkZXRhY2hlZEZvbGRlcik7XHJcblx0XHRyZW1vdmVDU1NDbGFzc0Zyb21FTChmb2xkZXJOb3RlPy5wYXRoLCAnaXMtZm9sZGVyLW5vdGUnLCBwbHVnaW4pO1xyXG5cdFx0Y29uc3QgZm9sZGVyID0gcGx1Z2luLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoZm9sZGVyUGF0aCkgYXMgVEZvbGRlcjtcclxuXHRcdGlmICghZm9sZGVyTm90ZSB8fCBmb2xkZXJOb3RlLmJhc2VuYW1lICE9PSBmaWxlTmFtZSkgcmV0dXJuO1xyXG5cdFx0bGV0IGNvdW50ID0gMTtcclxuXHRcdGxldCBuZXdOYW1lID0gcmVtb3ZlRXh0ZW5zaW9uKGZvbGRlck5vdGUucGF0aCkgKyBgICgke2NvdW50fSkuJHtmb2xkZXJOb3RlLnBhdGguc3BsaXQoJy4nKS5wb3AoKX1gO1xyXG5cdFx0d2hpbGUgKGNvdW50IDwgMTAwICYmIHBsdWdpbi5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKG5ld05hbWUpKSB7XHJcblx0XHRcdGNvdW50Kys7XHJcblx0XHRcdG5ld05hbWUgPSByZW1vdmVFeHRlbnNpb24oZm9sZGVyTm90ZS5wYXRoKSArIGAgKCR7Y291bnR9KS4ke2ZvbGRlck5vdGUucGF0aC5zcGxpdCgnLicpLnBvcCgpfWA7XHJcblx0XHR9XHJcblx0XHRjb25zdCBbZXhjbHVkZWRGb2xkZXIsIGV4Y2x1ZGVkRm9sZGVyRXhpc3RlZCwgZGlzYWJsZWRTeW5jXSA9IGF3YWl0IHRlbXBEaXNhYmxlU3luYyhwbHVnaW4sIGZvbGRlcilcclxuXHJcblx0XHRhd2FpdCBwbHVnaW4uYXBwLmZpbGVNYW5hZ2VyLnJlbmFtZUZpbGUoZm9sZGVyTm90ZSwgbmV3TmFtZSkudGhlbigoKSA9PiB7XHJcblx0XHRcdGlmICghZXhjbHVkZWRGb2xkZXIpIHJldHVybjtcclxuXHRcdFx0aWYgKCFleGNsdWRlZEZvbGRlckV4aXN0ZWQpIHtcclxuXHRcdFx0XHRkZWxldGVFeGNsdWRlZEZvbGRlcihwbHVnaW4sIGV4Y2x1ZGVkRm9sZGVyKTtcclxuXHRcdFx0fSBlbHNlIGlmICghZGlzYWJsZWRTeW5jKSB7XHJcblx0XHRcdFx0ZXhjbHVkZWRGb2xkZXIuZGlzYWJsZVN5bmMgPSBmYWxzZTtcclxuXHRcdFx0XHR1cGRhdGVFeGNsdWRlZEZvbGRlcihwbHVnaW4sIGV4Y2x1ZGVkRm9sZGVyLCBleGNsdWRlZEZvbGRlcik7XHJcblx0XHRcdH1cclxuXHRcdH0pO1xyXG5cdH1cclxuXHJcblx0aWYgKCFmb2xkZXJOb3RlKSB7XHJcblx0XHRsZXQgY29udGVudCA9ICcnO1xyXG5cdFx0aWYgKGV4dGVuc2lvbiAhPT0gJy5tZCcpIHtcclxuXHRcdFx0aWYgKHBsdWdpbi5zZXR0aW5ncy50ZW1wbGF0ZVBhdGggJiYgZm9sZGVyTm90ZVR5cGUuc3BsaXQoJy4nKS5wb3AoKSA9PSBwbHVnaW4uc2V0dGluZ3MudGVtcGxhdGVQYXRoLnNwbGl0KCcuJykucG9wKCkpIHtcclxuXHRcdFx0XHRjb25zdCB0ZW1wbGF0ZUZpbGUgPSBwbHVnaW4uYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChwbHVnaW4uc2V0dGluZ3MudGVtcGxhdGVQYXRoKTtcclxuXHRcdFx0XHRpZiAodGVtcGxhdGVGaWxlIGluc3RhbmNlb2YgVEZpbGUpIHtcclxuXHRcdFx0XHRcdGlmIChbJ21kJywgJ2NhbnZhcycsICd0eHQnXS5pbmNsdWRlcyh0ZW1wbGF0ZUZpbGUuZXh0ZW5zaW9uKSkge1xyXG5cdFx0XHRcdFx0XHRjb250ZW50ID0gYXdhaXQgcGx1Z2luLmFwcC52YXVsdC5yZWFkKHRlbXBsYXRlRmlsZSk7XHJcblx0XHRcdFx0XHRcdGlmIChleHRlbnNpb24gPT09ICcuZXhjYWxpZHJhdycgJiYgIWNvbnRlbnQuaW5jbHVkZXMoJz09XHUyNkEwICBTd2l0Y2ggdG8gRVhDQUxJRFJBVyBWSUVXIGluIHRoZSBNT1JFIE9QVElPTlMgbWVudSBvZiB0aGlzIGRvY3VtZW50LiBcdTI2QTA9PScpKSB7XHJcblx0XHRcdFx0XHRcdFx0Y29udGVudCA9IGRlZmF1bHRFeGNhbGlkcmF3VGVtcGxhdGU7XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRcdHJldHVybiBwbHVnaW4uYXBwLnZhdWx0LnJlYWRCaW5hcnkodGVtcGxhdGVGaWxlKS50aGVuKGFzeW5jIChkYXRhKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0Zm9sZGVyTm90ZSA9IGF3YWl0IHBsdWdpbi5hcHAudmF1bHQuY3JlYXRlQmluYXJ5KHBhdGgsIGRhdGEpO1xyXG5cdFx0XHRcdFx0XHRcdGlmIChvcGVuRmlsZSkge1xyXG5cdFx0XHRcdFx0XHRcdFx0YXdhaXQgbGVhZi5vcGVuRmlsZShmb2xkZXJOb3RlKTtcclxuXHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSBlbHNlIGlmIChwbHVnaW4uc2V0dGluZ3MuZm9sZGVyTm90ZVR5cGUgPT09ICcuZXhjYWxpZHJhdycgfHwgZXh0ZW5zaW9uID09PSAnLmV4Y2FsaWRyYXcnKSB7XHJcblx0XHRcdFx0Y29udGVudCA9IGRlZmF1bHRFeGNhbGlkcmF3VGVtcGxhdGU7XHJcblx0XHRcdH0gZWxzZSBpZiAocGx1Z2luLnNldHRpbmdzLmZvbGRlck5vdGVUeXBlID09PSAnLmNhbnZhcycpIHtcclxuXHRcdFx0XHRjb250ZW50ID0gJ3t9J1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0Zm9sZGVyTm90ZSA9IGF3YWl0IHBsdWdpbi5hcHAudmF1bHQuY3JlYXRlKHBhdGgsIGNvbnRlbnQpO1xyXG5cdH0gZWxzZSB7XHJcblx0XHRhd2FpdCBwbHVnaW4uYXBwLmZpbGVNYW5hZ2VyLnJlbmFtZUZpbGUoZm9sZGVyTm90ZSwgcGF0aClcclxuXHR9XHJcblxyXG5cdGlmIChvcGVuRmlsZSkge1xyXG5cdFx0aWYgKHBsdWdpbi5hcHAud29ya3NwYWNlLmdldEFjdGl2ZUZpbGUoKT8ucGF0aCA9PT0gcGF0aCkge1xyXG5cdFx0XHRpZiAocGx1Z2luLmFjdGl2ZUZvbGRlckRvbSkge1xyXG5cdFx0XHRcdHBsdWdpbi5hY3RpdmVGb2xkZXJEb20ucmVtb3ZlQ2xhc3MoJ2ZuLWlzLWFjdGl2ZScpO1xyXG5cdFx0XHRcdHBsdWdpbi5hY3RpdmVGb2xkZXJEb20gPSBudWxsO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRjb25zdCBmb2xkZXIgPSBnZXRGb2xkZXIocGx1Z2luLCBmb2xkZXJOb3RlKTtcclxuXHRcdFx0aWYgKCFmb2xkZXIpIHsgcmV0dXJuOyB9XHJcblxyXG5cdFx0XHRwbHVnaW4uYWN0aXZlRm9sZGVyRG9tID0gZ2V0RWwoZm9sZGVyLnBhdGgsIHBsdWdpbik7XHJcblx0XHRcdGlmIChwbHVnaW4uYWN0aXZlRm9sZGVyRG9tKSBwbHVnaW4uYWN0aXZlRm9sZGVyRG9tLmFkZENsYXNzKCdmbi1pcy1hY3RpdmUnKTtcclxuXHRcdH1cclxuXHRcdGF3YWl0IGxlYWYub3BlbkZpbGUoZm9sZGVyTm90ZSk7XHJcblx0XHRpZiAocGx1Z2luLnNldHRpbmdzLmZvbGRlck5vdGVUeXBlID09PSAnLmV4Y2FsaWRyYXcnIHx8IGV4dGVuc2lvbiA9PT0gJy5leGNhbGlkcmF3Jykge1xyXG5cdFx0XHRvcGVuRXhjYWxpZHJhd1ZpZXcobGVhZik7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHRjb25zdCBtYXRjaGluZ0V4dGVuc2lvbiA9IGV4dGVuc2lvbj8uc3BsaXQoJy4nKS5wb3AoKSA9PSBwbHVnaW4uc2V0dGluZ3MudGVtcGxhdGVQYXRoLnNwbGl0KCcuJykucG9wKCk7XHJcblx0aWYgKGZvbGRlck5vdGUgJiYgbWF0Y2hpbmdFeHRlbnNpb24gJiYgcGx1Z2luLnNldHRpbmdzLmZvbGRlck5vdGVUeXBlICE9PSAnLmV4Y2FsaWRyYXcnKSB7XHJcblx0XHRhcHBseVRlbXBsYXRlKHBsdWdpbiwgZm9sZGVyTm90ZSwgbGVhZiwgcGx1Z2luLnNldHRpbmdzLnRlbXBsYXRlUGF0aCk7XHJcblx0fVxyXG5cclxuXHRjb25zdCBmb2xkZXIgPSBwbHVnaW4uYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChmb2xkZXJQYXRoKTtcclxuXHRpZiAoIShmb2xkZXIgaW5zdGFuY2VvZiBURm9sZGVyKSkgcmV0dXJuO1xyXG5cdGFkZENTU0NsYXNzVG9UaXRsZUVMKHBhdGgsICdpcy1mb2xkZXItbm90ZScsIHBsdWdpbiwgdHJ1ZSk7XHJcblx0YWRkQ1NTQ2xhc3NUb1RpdGxlRUwoZm9sZGVyLnBhdGgsICdoYXMtZm9sZGVyLW5vdGUnLCBwbHVnaW4pO1xyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdHVybkludG9Gb2xkZXJOb3RlKHBsdWdpbjogRm9sZGVyTm90ZXNQbHVnaW4sIGZpbGU6IFRGaWxlLCBmb2xkZXI6IFRGb2xkZXIsIGZvbGRlck5vdGU/OiBURmlsZSB8IG51bGwgfCBUQWJzdHJhY3RGaWxlLCBza2lwQ29uZmlybWF0aW9uPzogYm9vbGVhbikge1xyXG5cdGNvbnN0IGV4dGVuc2lvbiA9IGZpbGUuZXh0ZW5zaW9uXHJcblx0Y29uc3QgZGV0YWNoZWRFeGNsdWRlZEZvbGRlciA9IGdldERldGFjaGVkRm9sZGVyKHBsdWdpbiwgZm9sZGVyLnBhdGgpO1xyXG5cclxuXHRpZiAoZm9sZGVyTm90ZSkge1xyXG5cdFx0aWYgKHBsdWdpbi5zZXR0aW5ncy5zaG93UmVuYW1lQ29uZmlybWF0aW9uICYmICFza2lwQ29uZmlybWF0aW9uICYmICFkZXRhY2hlZEV4Y2x1ZGVkRm9sZGVyKSB7XHJcblx0XHRcdHJldHVybiBuZXcgRXhpc3RpbmdGb2xkZXJOb3RlTW9kYWwocGx1Z2luLmFwcCwgcGx1Z2luLCBmaWxlLCBmb2xkZXIsIGZvbGRlck5vdGUpLm9wZW4oKTtcclxuXHRcdH1cclxuXHRcdHJlbW92ZUNTU0NsYXNzRnJvbUVMKGZvbGRlck5vdGUucGF0aCwgJ2lzLWZvbGRlci1ub3RlJywgcGx1Z2luKTtcclxuXHJcblx0XHRjb25zdCBbZXhjbHVkZWRGb2xkZXIsIGV4Y2x1ZGVkRm9sZGVyRXhpc3RlZCwgZGlzYWJsZWRTeW5jXSA9IGF3YWl0IHRlbXBEaXNhYmxlU3luYyhwbHVnaW4sIGZvbGRlcilcclxuXHJcblx0XHRjb25zdCBuZXdQYXRoID0gYCR7Zm9sZGVyLnBhdGh9LyR7Zm9sZGVyLm5hbWV9ICgke2ZpbGUuc3RhdC5jdGltZS50b1N0cmluZygpLnNsaWNlKDEwKSArIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDEwMDApfSkuJHtleHRlbnNpb259YDtcclxuXHRcdHBsdWdpbi5hcHAuZmlsZU1hbmFnZXIucmVuYW1lRmlsZShmb2xkZXJOb3RlLCBuZXdQYXRoKS50aGVuKCgpID0+IHtcclxuXHRcdFx0aWYgKCFleGNsdWRlZEZvbGRlcikgcmV0dXJuO1xyXG5cdFx0XHRpZiAoIWV4Y2x1ZGVkRm9sZGVyRXhpc3RlZCkge1xyXG5cdFx0XHRcdGRlbGV0ZUV4Y2x1ZGVkRm9sZGVyKHBsdWdpbiwgZXhjbHVkZWRGb2xkZXIpO1xyXG5cdFx0XHR9IGVsc2UgaWYgKCFkaXNhYmxlZFN5bmMpIHtcclxuXHRcdFx0XHRleGNsdWRlZEZvbGRlci5kaXNhYmxlU3luYyA9IGZhbHNlO1xyXG5cdFx0XHRcdHVwZGF0ZUV4Y2x1ZGVkRm9sZGVyKHBsdWdpbiwgZXhjbHVkZWRGb2xkZXIsIGV4Y2x1ZGVkRm9sZGVyKTtcclxuXHRcdFx0fVxyXG5cdFx0fSk7XHJcblx0fVxyXG5cdGNvbnN0IGZvbGRlck5hbWUgPSBmb2xkZXIubmFtZTtcclxuXHRjb25zdCBmaWxlTmFtZSA9IHBsdWdpbi5zZXR0aW5ncy5mb2xkZXJOb3RlTmFtZS5yZXBsYWNlKCd7e2ZvbGRlcl9uYW1lfX0nLCBmb2xkZXJOYW1lKTtcclxuXHJcblx0bGV0IHBhdGggPSBgJHtmb2xkZXIucGF0aH0vJHtmaWxlTmFtZX0uJHtleHRlbnNpb259YDtcclxuXHRpZiAocGx1Z2luLnNldHRpbmdzLnN0b3JhZ2VMb2NhdGlvbiA9PT0gJ3BhcmVudEZvbGRlcicpIHtcclxuXHRcdGNvbnN0IHBhcmVudEZvbGRlclBhdGggPSBmb2xkZXIucGFyZW50Py5wYXRoO1xyXG5cdFx0aWYgKCFwYXJlbnRGb2xkZXJQYXRoKSByZXR1cm47XHJcblx0XHRpZiAocGFyZW50Rm9sZGVyUGF0aC50cmltKCkgPT09ICcnKSB7XHJcblx0XHRcdHBhdGggPSBgJHtmaWxlTmFtZX0uJHtleHRlbnNpb259YDtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdHBhdGggPSBgJHtwYXJlbnRGb2xkZXJQYXRofS8ke2ZpbGVOYW1lfS4ke2V4dGVuc2lvbn1gO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0aWYgKGRldGFjaGVkRXhjbHVkZWRGb2xkZXIpIHtcclxuXHRcdGRlbGV0ZUV4Y2x1ZGVkRm9sZGVyKHBsdWdpbiwgZGV0YWNoZWRFeGNsdWRlZEZvbGRlcilcclxuXHR9XHJcblxyXG5cdGF3YWl0IHBsdWdpbi5hcHAuZmlsZU1hbmFnZXIucmVuYW1lRmlsZShmaWxlLCBwYXRoKTtcclxuXHRhZGRDU1NDbGFzc1RvVGl0bGVFTChwYXRoLCAnaXMtZm9sZGVyLW5vdGUnLCBwbHVnaW4sIHRydWUpO1xyXG5cdGFkZENTU0NsYXNzVG9UaXRsZUVMKGZvbGRlci5wYXRoLCAnaGFzLWZvbGRlci1ub3RlJywgcGx1Z2luKTtcclxuXHJcblx0aWYgKHBsdWdpbi5hY3RpdmVGb2xkZXJEb20pIHtcclxuXHRcdHBsdWdpbi5hY3RpdmVGb2xkZXJEb20ucmVtb3ZlQ2xhc3MoJ2ZuLWlzLWFjdGl2ZScpO1xyXG5cdFx0cGx1Z2luLmFjdGl2ZUZvbGRlckRvbSA9IG51bGw7XHJcblx0fVxyXG5cclxuXHRwbHVnaW4uYWN0aXZlRm9sZGVyRG9tID0gZ2V0RWwoZm9sZGVyLnBhdGgsIHBsdWdpbik7XHJcblx0aWYgKHBsdWdpbi5hY3RpdmVGb2xkZXJEb20pIHBsdWdpbi5hY3RpdmVGb2xkZXJEb20uYWRkQ2xhc3MoJ2ZuLWlzLWFjdGl2ZScpO1xyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdGVtcERpc2FibGVTeW5jKHBsdWdpbjogRm9sZGVyTm90ZXNQbHVnaW4sIGZvbGRlcjogVEZvbGRlcik6IFByb21pc2U8W2V4Y2x1ZGVkRm9sZGVyOiBFeGNsdWRlZEZvbGRlciB8IHVuZGVmaW5lZCwgZXhjbHVkZWRGb2xkZXJFeGlzdGVkOiBib29sZWFuLCBkaXNhYmxlZFN5bmM6IGJvb2xlYW5dPiB7XHJcblx0bGV0IGV4Y2x1ZGVkRm9sZGVyID0gYXdhaXQgZ2V0RXhjbHVkZWRGb2xkZXIocGx1Z2luLCBmb2xkZXIucGF0aCwgZmFsc2UpO1xyXG5cdGxldCBleGNsdWRlZEZvbGRlckV4aXN0ZWQgPSB0cnVlO1xyXG5cdGxldCBkaXNhYmxlZFN5bmMgPSBmYWxzZTtcclxuXHJcblx0aWYgKCFleGNsdWRlZEZvbGRlcikge1xyXG5cdFx0ZXhjbHVkZWRGb2xkZXJFeGlzdGVkID0gZmFsc2U7XHJcblx0XHRleGNsdWRlZEZvbGRlciA9IG5ldyBFeGNsdWRlZEZvbGRlcihmb2xkZXIucGF0aCwgcGx1Z2luLnNldHRpbmdzLmV4Y2x1ZGVGb2xkZXJzLmxlbmd0aCwgdW5kZWZpbmVkLCBwbHVnaW4pO1xyXG5cdFx0ZXhjbHVkZWRGb2xkZXIuZGlzYWJsZVN5bmMgPSB0cnVlO1xyXG5cdFx0YWRkRXhjbHVkZWRGb2xkZXIocGx1Z2luLCBleGNsdWRlZEZvbGRlcik7XHJcblx0fSBlbHNlIGlmICghZXhjbHVkZWRGb2xkZXIuZGlzYWJsZVN5bmMpIHtcclxuXHRcdGRpc2FibGVkU3luYyA9IGZhbHNlO1xyXG5cdFx0ZXhjbHVkZWRGb2xkZXIuZGlzYWJsZVN5bmMgPSB0cnVlO1xyXG5cdFx0dXBkYXRlRXhjbHVkZWRGb2xkZXIocGx1Z2luLCBleGNsdWRlZEZvbGRlciwgZXhjbHVkZWRGb2xkZXIpO1xyXG5cdH1cclxuXHJcblx0cmV0dXJuIFtleGNsdWRlZEZvbGRlciwgZXhjbHVkZWRGb2xkZXJFeGlzdGVkLCBkaXNhYmxlZFN5bmNdXHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBvcGVuRm9sZGVyTm90ZShwbHVnaW46IEZvbGRlck5vdGVzUGx1Z2luLCBmaWxlOiBUQWJzdHJhY3RGaWxlLCBldnQ/OiBNb3VzZUV2ZW50KSB7XHJcblx0Y29uc3QgcGF0aCA9IGZpbGUucGF0aDtcclxuXHRpZiAocGx1Z2luLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlRmlsZSgpPy5wYXRoID09PSBwYXRoICYmICEoS2V5bWFwLmlzTW9kRXZlbnQoZXZ0KSA9PSAndGFiJykpIHsgcmV0dXJuOyB9XHJcblx0Y29uc3QgbGVhZiA9IHBsdWdpbi5hcHAud29ya3NwYWNlLmdldExlYWYoS2V5bWFwLmlzTW9kRXZlbnQoZXZ0KSB8fCBwbHVnaW4uc2V0dGluZ3Mub3BlbkluTmV3VGFiKTtcclxuXHRpZiAoZmlsZSBpbnN0YW5jZW9mIFRGaWxlKSB7XHJcblx0XHRhd2FpdCBsZWFmLm9wZW5GaWxlKGZpbGUpO1xyXG5cdH1cclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGRlbGV0ZUZvbGRlck5vdGUocGx1Z2luOiBGb2xkZXJOb3Rlc1BsdWdpbiwgZmlsZTogVEZpbGUsIGRpc3BsYXlNb2RhbDogYm9vbGVhbikge1xyXG5cdGlmIChwbHVnaW4uc2V0dGluZ3Muc2hvd0RlbGV0ZUNvbmZpcm1hdGlvbiAmJiBkaXNwbGF5TW9kYWwpIHtcclxuXHRcdHJldHVybiBuZXcgRGVsZXRlQ29uZmlybWF0aW9uTW9kYWwocGx1Z2luLmFwcCwgcGx1Z2luLCBmaWxlKS5vcGVuKCk7XHJcblx0fVxyXG5cdGNvbnN0IGZvbGRlciA9IGdldEZvbGRlcihwbHVnaW4sIGZpbGUpO1xyXG5cdGlmICghZm9sZGVyKSByZXR1cm47XHJcblx0cmVtb3ZlQ1NTQ2xhc3NGcm9tRUwoZm9sZGVyLnBhdGgsICdoYXMtZm9sZGVyLW5vdGUnLCBwbHVnaW4pO1xyXG5cdHN3aXRjaCAocGx1Z2luLnNldHRpbmdzLmRlbGV0ZUZpbGVzQWN0aW9uKSB7XHJcblx0XHRjYXNlICd0cmFzaCc6XHJcblx0XHRcdGF3YWl0IHBsdWdpbi5hcHAudmF1bHQudHJhc2goZmlsZSwgdHJ1ZSk7XHJcblx0XHRcdGJyZWFrO1xyXG5cdFx0Y2FzZSAnb2JzaWRpYW5UcmFzaCc6XHJcblx0XHRcdGF3YWl0IHBsdWdpbi5hcHAudmF1bHQudHJhc2goZmlsZSwgZmFsc2UpO1xyXG5cdFx0XHRicmVhaztcclxuXHRcdGNhc2UgJ2RlbGV0ZSc6XHJcblx0XHRcdGF3YWl0IHBsdWdpbi5hcHAudmF1bHQuZGVsZXRlKGZpbGUpO1xyXG5cdFx0XHRicmVhaztcclxuXHR9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBleHRyYWN0Rm9sZGVyTmFtZSh0ZW1wbGF0ZTogc3RyaW5nLCBjaGFuZ2VkRmlsZU5hbWU6IHN0cmluZykge1xyXG5cdGNvbnN0IFtwcmVmaXgsIHN1ZmZpeF0gPSB0ZW1wbGF0ZS5zcGxpdCgne3tmb2xkZXJfbmFtZX19Jyk7XHJcblx0aWYgKHByZWZpeC50cmltKCkgPT09ICcnICYmIHN1ZmZpeC50cmltKCkgPT09ICcnKSB7XHJcblx0XHRyZXR1cm4gY2hhbmdlZEZpbGVOYW1lO1xyXG5cdH1cclxuXHRpZiAoIWNoYW5nZWRGaWxlTmFtZS5zdGFydHNXaXRoKHByZWZpeCkgfHwgIWNoYW5nZWRGaWxlTmFtZS5lbmRzV2l0aChzdWZmaXgpKSB7XHJcblx0XHRyZXR1cm4gbnVsbDtcclxuXHR9XHJcblx0aWYgKGNoYW5nZWRGaWxlTmFtZS5zdGFydHNXaXRoKHByZWZpeCkgJiYgcHJlZml4LnRyaW0oKSAhPT0gJycpIHtcclxuXHRcdHJldHVybiBjaGFuZ2VkRmlsZU5hbWUuc2xpY2UocHJlZml4Lmxlbmd0aCkucmVwbGFjZShzdWZmaXgsICcnKTtcclxuXHR9IGVsc2UgaWYgKGNoYW5nZWRGaWxlTmFtZS5lbmRzV2l0aChzdWZmaXgpICYmIHN1ZmZpeC50cmltKCkgIT09ICcnKSB7XHJcblx0XHRyZXR1cm4gY2hhbmdlZEZpbGVOYW1lLnNsaWNlKDAsIC1zdWZmaXgubGVuZ3RoKTtcclxuXHR9XHJcblx0cmV0dXJuIG51bGw7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRGb2xkZXJOb3RlKHBsdWdpbjogRm9sZGVyTm90ZXNQbHVnaW4sIGZvbGRlclBhdGg6IHN0cmluZywgc3RvcmFnZUxvY2F0aW9uPzogc3RyaW5nLCBmaWxlPzogVEZpbGUpIHtcclxuXHRpZiAoIWZvbGRlclBhdGgpIHJldHVybiBudWxsO1xyXG5cdGNvbnN0IGZvbGRlciA9IHtcclxuXHRcdHBhdGg6IGZvbGRlclBhdGgsXHJcblx0XHRuYW1lOiBnZXRGb2xkZXJOYW1lRnJvbVBhdGhTdHJpbmcoZm9sZGVyUGF0aCksXHJcblx0fTtcclxuXHJcblx0bGV0IGZpbGVOYW1lID0gcGx1Z2luLnNldHRpbmdzLmZvbGRlck5vdGVOYW1lLnJlcGxhY2UoJ3t7Zm9sZGVyX25hbWV9fScsIGZvbGRlci5uYW1lKTtcclxuXHRpZiAoZmlsZSkge1xyXG5cdFx0ZmlsZU5hbWUgPSBwbHVnaW4uc2V0dGluZ3MuZm9sZGVyTm90ZU5hbWUucmVwbGFjZSgne3tmb2xkZXJfbmFtZX19JywgZmlsZS5iYXNlbmFtZSk7XHJcblx0fVxyXG5cdGlmICghZmlsZU5hbWUpIHJldHVybiBudWxsO1xyXG5cclxuXHRpZiAoKHBsdWdpbi5zZXR0aW5ncy5zdG9yYWdlTG9jYXRpb24gPT09ICdwYXJlbnRGb2xkZXInIHx8IHN0b3JhZ2VMb2NhdGlvbiA9PT0gJ3BhcmVudEZvbGRlcicpICYmIHN0b3JhZ2VMb2NhdGlvbiAhPT0gJ2luc2lkZUZvbGRlcicpIHtcclxuXHRcdGZvbGRlci5wYXRoID0gZ2V0Rm9sZGVyUGF0aEZyb21TdHJpbmcoZm9sZGVyUGF0aCk7XHJcblx0fVxyXG5cclxuXHRsZXQgcGF0aCA9IGAke2ZvbGRlci5wYXRofS8ke2ZpbGVOYW1lfWA7XHJcblx0aWYgKGZvbGRlci5wYXRoLnRyaW0oKSA9PT0gJycpIHtcclxuXHRcdGZvbGRlci5wYXRoID0gZmlsZU5hbWU7XHJcblx0XHRwYXRoID0gYCR7ZmlsZU5hbWV9YDtcclxuXHR9XHJcblxyXG5cdGxldCBmb2xkZXJOb3RlVHlwZSA9IHBsdWdpbi5zZXR0aW5ncy5mb2xkZXJOb3RlVHlwZTtcclxuXHRpZiAoZm9sZGVyTm90ZVR5cGUgPT09ICcuZXhjYWxpZHJhdycpIHtcclxuXHRcdGZvbGRlck5vdGVUeXBlID0gJy5tZCc7XHJcblx0fVxyXG5cclxuXHRsZXQgZm9sZGVyTm90ZSA9IHBsdWdpbi5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKHBhdGggKyBmb2xkZXJOb3RlVHlwZSk7XHJcblx0aWYgKGZvbGRlck5vdGUgaW5zdGFuY2VvZiBURmlsZSkge1xyXG5cdFx0cmV0dXJuIGZvbGRlck5vdGU7XHJcblx0fSBlbHNlIHtcclxuXHRcdGNvbnN0IHN1cHBvcnRlZEZpbGVUeXBlcyA9IHBsdWdpbi5zZXR0aW5ncy5zdXBwb3J0ZWRGaWxlVHlwZXMuZmlsdGVyKCh0eXBlKSA9PiB0eXBlICE9PSBwbHVnaW4uc2V0dGluZ3MuZm9sZGVyTm90ZVR5cGUucmVwbGFjZSgnLicsICcnKSk7XHJcblx0XHRmb3IgKGxldCB0eXBlIG9mIHN1cHBvcnRlZEZpbGVUeXBlcykge1xyXG5cdFx0XHRpZiAodHlwZSA9PT0gJ2V4Y2FsaWRyYXcnIHx8IHR5cGUgPT09ICcuZXhjYWxpZHJhdycpIHtcclxuXHRcdFx0XHR0eXBlID0gJy5tZCc7XHJcblx0XHRcdH1cclxuXHRcdFx0aWYgKCF0eXBlLnN0YXJ0c1dpdGgoJy4nKSkge1xyXG5cdFx0XHRcdHR5cGUgPSAnLicgKyB0eXBlO1xyXG5cdFx0XHR9XHJcblx0XHRcdGZvbGRlck5vdGUgPSBwbHVnaW4uYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChwYXRoICsgdHlwZSk7XHJcblx0XHRcdGlmIChmb2xkZXJOb3RlIGluc3RhbmNlb2YgVEZpbGUpIHtcclxuXHRcdFx0XHRyZXR1cm4gZm9sZGVyTm90ZTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGRldGFjaEZvbGRlck5vdGUocGx1Z2luOiBGb2xkZXJOb3Rlc1BsdWdpbiwgZmlsZTogVEZpbGUpIHtcclxuXHRjb25zdCBmb2xkZXIgPSBnZXRGb2xkZXIocGx1Z2luLCBmaWxlKTtcclxuXHRpZiAoIWZvbGRlcikgcmV0dXJuO1xyXG5cdGNvbnN0IGV4Y2x1ZGVkRm9sZGVyID0gbmV3IEV4Y2x1ZGVkRm9sZGVyKGZvbGRlci5wYXRoLCBwbHVnaW4uc2V0dGluZ3MuZXhjbHVkZUZvbGRlcnMubGVuZ3RoLCB1bmRlZmluZWQsIHBsdWdpbik7XHJcblx0ZXhjbHVkZWRGb2xkZXIuaGlkZUluU2V0dGluZ3MgPSB0cnVlO1xyXG5cdGV4Y2x1ZGVkRm9sZGVyLmRpc2FibGVGb2xkZXJOb3RlID0gdHJ1ZTtcclxuXHRleGNsdWRlZEZvbGRlci5kaXNhYmxlU3luYyA9IHRydWU7XHJcblx0ZXhjbHVkZWRGb2xkZXIuc3ViRm9sZGVycyA9IGZhbHNlO1xyXG5cdGV4Y2x1ZGVkRm9sZGVyLmV4Y2x1ZGVGcm9tRm9sZGVyT3ZlcnZpZXcgPSBmYWxzZTtcclxuXHRleGNsdWRlZEZvbGRlci5kZXRhY2hlZCA9IHRydWU7XHJcblx0ZXhjbHVkZWRGb2xkZXIuZGV0YWNoZWRGaWxlUGF0aCA9IGZpbGUucGF0aDtcclxuXHRhZGRFeGNsdWRlZEZvbGRlcihwbHVnaW4sIGV4Y2x1ZGVkRm9sZGVyKTtcclxufVxyXG5cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRGb2xkZXIocGx1Z2luOiBGb2xkZXJOb3Rlc1BsdWdpbiwgZmlsZTogVEZpbGUsIHN0b3JhZ2VMb2NhdGlvbj86IHN0cmluZykge1xyXG5cdGlmICghZmlsZSkgcmV0dXJuIG51bGw7XHJcblx0bGV0IGZvbGRlck5hbWUgPSBleHRyYWN0Rm9sZGVyTmFtZShwbHVnaW4uc2V0dGluZ3MuZm9sZGVyTm90ZU5hbWUsIGZpbGUuYmFzZW5hbWUpO1xyXG5cdGlmIChwbHVnaW4uc2V0dGluZ3MuZm9sZGVyTm90ZU5hbWUgPT09IGZpbGUuYmFzZW5hbWUgJiYgcGx1Z2luLnNldHRpbmdzLnN0b3JhZ2VMb2NhdGlvbiA9PT0gJ2luc2lkZUZvbGRlcicpIHtcclxuXHRcdGZvbGRlck5hbWUgPSBmaWxlLnBhcmVudD8ubmFtZSA/PyAnJztcclxuXHR9XHJcblx0aWYgKCFmb2xkZXJOYW1lKSByZXR1cm4gbnVsbDtcclxuXHRsZXQgZm9sZGVyUGF0aCA9IGdldEZvbGRlclBhdGhGcm9tU3RyaW5nKGZpbGUucGF0aCk7XHJcblx0bGV0IGZvbGRlcjogVEZvbGRlciB8IFRBYnN0cmFjdEZpbGUgfCBudWxsID0gbnVsbDtcclxuXHRpZiAoKHBsdWdpbi5zZXR0aW5ncy5zdG9yYWdlTG9jYXRpb24gPT09ICdwYXJlbnRGb2xkZXInIHx8IHN0b3JhZ2VMb2NhdGlvbiA9PT0gJ3BhcmVudEZvbGRlcicpICYmIHN0b3JhZ2VMb2NhdGlvbiAhPT0gJ2luc2lkZUZvbGRlcicpIHtcclxuXHRcdGlmIChmb2xkZXJQYXRoLnRyaW0oKSA9PT0gJycpIHtcclxuXHRcdFx0Zm9sZGVyUGF0aCA9IGZvbGRlck5hbWU7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHRmb2xkZXJQYXRoID0gYCR7Zm9sZGVyUGF0aH0vJHtmb2xkZXJOYW1lfWA7XHJcblx0XHR9XHJcblx0XHRmb2xkZXIgPSBwbHVnaW4uYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChmb2xkZXJQYXRoKTtcclxuXHR9IGVsc2Uge1xyXG5cdFx0Zm9sZGVyID0gcGx1Z2luLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoZm9sZGVyUGF0aCk7XHJcblx0fVxyXG5cdGlmICghZm9sZGVyKSB7IHJldHVybiBudWxsOyB9XHJcblx0cmV0dXJuIGZvbGRlcjtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGdldEZvbGRlck5vdGVGb2xkZXIocGx1Z2luOiBGb2xkZXJOb3Rlc1BsdWdpbiwgZm9sZGVyTm90ZTogVEZpbGUgfCBzdHJpbmcsIGZpbGVOYW1lOiBzdHJpbmcpIHtcclxuXHRpZiAoIWZvbGRlck5vdGUpIHJldHVybiBudWxsO1xyXG5cdGxldCBmaWxlUGF0aCA9ICcnO1xyXG5cdGlmICh0eXBlb2YgZm9sZGVyTm90ZSA9PT0gJ3N0cmluZycpIHtcclxuXHRcdGZpbGVQYXRoID0gZm9sZGVyTm90ZTtcclxuXHR9IGVsc2Uge1xyXG5cdFx0ZmlsZU5hbWUgPSBmb2xkZXJOb3RlLmJhc2VuYW1lO1xyXG5cdFx0ZmlsZVBhdGggPSBmb2xkZXJOb3RlLnBhdGg7XHJcblx0fVxyXG5cdGNvbnN0IGZvbGRlck5hbWUgPSBleHRyYWN0Rm9sZGVyTmFtZShwbHVnaW4uc2V0dGluZ3MuZm9sZGVyTm90ZU5hbWUsIGZpbGVOYW1lKTtcclxuXHRpZiAoIWZvbGRlck5hbWUpIHJldHVybiBudWxsO1xyXG5cdGxldCBmb2xkZXJQYXRoID0gZ2V0Rm9sZGVyUGF0aEZyb21TdHJpbmcoZmlsZVBhdGgpO1xyXG5cdGlmIChwbHVnaW4uc2V0dGluZ3Muc3RvcmFnZUxvY2F0aW9uID09PSAncGFyZW50Rm9sZGVyJykge1xyXG5cdFx0aWYgKGZvbGRlclBhdGgudHJpbSgpID09PSAnJykge1xyXG5cdFx0XHRmb2xkZXJQYXRoID0gZm9sZGVyTmFtZTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdGZvbGRlclBhdGggPSBgJHtmb2xkZXJQYXRofS8ke2ZvbGRlck5hbWV9YDtcclxuXHRcdH1cclxuXHR9IGVsc2Uge1xyXG5cdFx0Zm9sZGVyUGF0aCA9IGdldEZvbGRlclBhdGhGcm9tU3RyaW5nKGZpbGVQYXRoKTtcclxuXHR9XHJcblx0Y29uc3QgZm9sZGVyID0gcGx1Z2luLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoZm9sZGVyUGF0aCk7XHJcblx0aWYgKCFmb2xkZXIpIHsgcmV0dXJuIG51bGw7IH1cclxuXHRyZXR1cm4gZm9sZGVyO1xyXG59XHJcbiIsICJpbXBvcnQgeyBBcHAsIE1vZGFsLCBTZXR0aW5nLCBURmlsZSwgUGxhdGZvcm0gfSBmcm9tICdvYnNpZGlhbic7XHJcbmltcG9ydCBGb2xkZXJOb3Rlc1BsdWdpbiBmcm9tICcuLi9tYWluJztcclxuaW1wb3J0IHsgZGVsZXRlRm9sZGVyTm90ZSwgZ2V0Rm9sZGVyIH0gZnJvbSAnc3JjL2Z1bmN0aW9ucy9mb2xkZXJOb3RlRnVuY3Rpb25zJztcclxuaW1wb3J0IHsgcmVtb3ZlQ1NTQ2xhc3NGcm9tRUwgfSBmcm9tICdzcmMvZnVuY3Rpb25zL3N0eWxlRnVuY3Rpb25zJztcclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRGVsZXRlQ29uZmlybWF0aW9uTW9kYWwgZXh0ZW5kcyBNb2RhbCB7XHJcblx0cGx1Z2luOiBGb2xkZXJOb3Rlc1BsdWdpbjtcclxuXHRhcHA6IEFwcDtcclxuXHRmaWxlOiBURmlsZTtcclxuXHRjb25zdHJ1Y3RvcihhcHA6IEFwcCwgcGx1Z2luOiBGb2xkZXJOb3Rlc1BsdWdpbiwgZmlsZTogVEZpbGUpIHtcclxuXHRcdHN1cGVyKGFwcCk7XHJcblx0XHR0aGlzLnBsdWdpbiA9IHBsdWdpbjtcclxuXHRcdHRoaXMuYXBwID0gYXBwO1xyXG5cdFx0dGhpcy5maWxlID0gZmlsZTtcclxuXHR9XHJcblx0b25PcGVuKCkge1xyXG5cdFx0Y29uc3QgeyBjb250ZW50RWwsIHBsdWdpbiB9ID0gdGhpcztcclxuXHRcdGNvbnN0IG1vZGFsVGl0bGUgPSBjb250ZW50RWwuY3JlYXRlRGl2KHsgY2xzOiAnZm4tbW9kYWwtdGl0bGUnIH0pO1xyXG5cdFx0Y29uc3QgbW9kYWxDb250ZW50ID0gY29udGVudEVsLmNyZWF0ZURpdih7IGNsczogJ2ZuLW1vZGFsLWNvbnRlbnQnIH0pO1xyXG5cdFx0bW9kYWxUaXRsZS5jcmVhdGVFbCgnaDInLCB7IHRleHQ6ICdEZWxldGUgZm9sZGVyIG5vdGUnIH0pO1xyXG5cdFx0bW9kYWxDb250ZW50LmNyZWF0ZUVsKCdwJywgeyB0ZXh0OiBgQXJlIHlvdSBzdXJlIHlvdSB3YW50IHRvIGRlbGV0ZSB0aGUgZm9sZGVyIG5vdGUgJyR7dGhpcy5maWxlLm5hbWV9JyA/YCB9KTtcclxuXHRcdHN3aXRjaCAocGx1Z2luLnNldHRpbmdzLmRlbGV0ZUZpbGVzQWN0aW9uKSB7XHJcblx0XHRcdGNhc2UgJ3RyYXNoJzpcclxuXHRcdFx0XHRtb2RhbENvbnRlbnQuY3JlYXRlRWwoJ3AnLCB7IHRleHQ6ICdJdCB3aWxsIGJlIG1vdmVkIHRvIHlvdXIgc3lzdGVtIHRyYXNoLicgfSk7XHJcblx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdGNhc2UgJ29ic2lkaWFuVHJhc2gnOlxyXG5cdFx0XHRcdG1vZGFsQ29udGVudC5jcmVhdGVFbCgncCcsIHsgdGV4dDogJ0l0IHdpbGwgYmUgbW92ZWQgdG8geW91ciBPYnNpZGlhbiB0cmFzaCwgd2hpY2ggaXMgbG9jYXRlZCBpbiB0aGUgXCIudHJhc2hcIiBoaWRkZW4gZm9sZGVyIGluIHlvdXIgdmF1bHQuJyB9KTtcclxuXHRcdFx0XHRicmVhaztcclxuXHRcdFx0Y2FzZSAnZGVsZXRlJzpcclxuXHRcdFx0XHRtb2RhbENvbnRlbnQuY3JlYXRlRWwoJ3AnLCB7IHRleHQ6ICdJdCB3aWxsIGJlIHBlcm1hbmVudGx5IGRlbGV0ZWQuJyB9KS5zZXRDc3NTdHlsZXMoeyBjb2xvcjogJ3JlZCcgfSk7XHJcblx0XHRcdFx0YnJlYWs7XHJcblx0XHR9XHJcblxyXG5cdFx0Y29uc3QgYnV0dG9uQ29udGFpbmVyID0gY29udGVudEVsLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ21vZGFsLWJ1dHRvbi1jb250YWluZXInIH0pO1xyXG5cclxuXHRcdGlmICghUGxhdGZvcm0uaXNNb2JpbGUpIHtcclxuXHRcdFx0Y29uc3QgY2hlY2tib3ggPSBidXR0b25Db250YWluZXIuY3JlYXRlRWwoJ2xhYmVsJywgeyBjbHM6ICdtb2QtY2hlY2tib3gnICB9KVxyXG5cdFx0XHRjaGVja2JveC50YWJJbmRleCA9IC0xXHJcblx0XHRcdGNvbnN0IGlucHV0ID0gY2hlY2tib3guY3JlYXRlRWwoJ2lucHV0JywgeyB0eXBlOiAnY2hlY2tib3gnIH0pO1xyXG5cdFx0XHRjaGVja2JveC5hcHBlbmRUZXh0KCdEb25cXCd0IGFzayBhZ2FpbicpXHJcblx0XHRcdGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIChlKSA9PiB7XHJcblx0XHRcdFx0Y29uc3QgdGFyZ2V0ID0gZS50YXJnZXQgYXMgSFRNTElucHV0RWxlbWVudDtcclxuXHRcdFx0XHRpZiAodGFyZ2V0LmNoZWNrZWQpIHtcclxuXHRcdFx0XHRcdHBsdWdpbi5zZXR0aW5ncy5zaG93RGVsZXRlQ29uZmlybWF0aW9uID0gZmFsc2U7XHJcblx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdHBsdWdpbi5zZXR0aW5ncy5zaG93RGVsZXRlQ29uZmlybWF0aW9uID0gdHJ1ZTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0cGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHR9KTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdGNvbnN0IGNvbmZpcm1CdXR0b24gPSBidXR0b25Db250YWluZXIuY3JlYXRlRWwoJ2J1dHRvbicsIHsgdGV4dDogJ0RlbGV0ZSBhbmQgZG9uXFwndCBhc2sgYWdhaW4nLCBjbHM6ICdtb2QtZGVzdHJ1Y3RpdmUnIH0pO1xyXG5cdFx0XHRjb25maXJtQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgYXN5bmMgKCkgPT4ge1xyXG5cdFx0XHRcdHBsdWdpbi5zZXR0aW5ncy5zaG93RGVsZXRlQ29uZmlybWF0aW9uID0gZmFsc2U7XHJcblx0XHRcdFx0cGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHRcdHRoaXMuY2xvc2UoKTtcclxuXHRcdFx0XHRkZWxldGVGb2xkZXJOb3RlKHBsdWdpbiwgdGhpcy5maWxlLCBmYWxzZSk7XHJcblx0XHRcdH0pO1xyXG5cdFx0fVxyXG5cclxuXHRcdGNvbnN0IGRlbGV0ZUJ1dHRvbiA9IGJ1dHRvbkNvbnRhaW5lci5jcmVhdGVFbCgnYnV0dG9uJywgeyB0ZXh0OiAnRGVsZXRlJywgY2xzOiAnbW9kLXdhcm5pbmcnIH0pO1xyXG5cdFx0ZGVsZXRlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgYXN5bmMgKCkgPT4ge1xyXG5cdFx0XHR0aGlzLmNsb3NlKCk7XHJcblx0XHRcdGRlbGV0ZUZvbGRlck5vdGUocGx1Z2luLCB0aGlzLmZpbGUsIGZhbHNlKTtcclxuXHRcdH0pO1xyXG5cdFx0ZGVsZXRlQnV0dG9uLmZvY3VzKCk7XHJcblxyXG5cdFx0Y29uc3QgY2FuY2VsQnV0dG9uID0gYnV0dG9uQ29udGFpbmVyLmNyZWF0ZUVsKCdidXR0b24nLCB7IHRleHQ6ICdDYW5jZWwnLCBjbHM6ICdtb2QtY2FuY2VsJyB9KTtcclxuXHRcdGNhbmNlbEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGFzeW5jICgpID0+IHtcclxuXHRcdFx0dGhpcy5jbG9zZSgpO1xyXG5cdFx0fSk7XHJcblx0fVxyXG5cdG9uQ2xvc2UoKSB7XHJcblx0XHRjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcclxuXHRcdGNvbnRlbnRFbC5lbXB0eSgpO1xyXG5cdH1cclxufVxyXG4iLCAiaW1wb3J0IHsgRmlsZUV4cGxvcmVyV29ya3NwYWNlTGVhZiB9IGZyb20gJ3NyYy9nbG9iYWxzJztcclxuaW1wb3J0IEZvbGRlck5vdGVzUGx1Z2luIGZyb20gJ3NyYy9tYWluJztcclxuaW1wb3J0IHsgRmlsZUV4cGxvcmVyTGVhZiB9IGZyb20gJ29ic2lkaWFuLXR5cGluZ3MnO1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGdldEZpbGVOYW1lRnJvbVBhdGhTdHJpbmcocGF0aDogc3RyaW5nKTogc3RyaW5nIHtcclxuXHRyZXR1cm4gcGF0aC5zdWJzdHJpbmcocGF0aC5sYXN0SW5kZXhPZignLycpID49IDAgPyBwYXRoLmxhc3RJbmRleE9mKCcvJykgKyAxIDogMCk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRGb2xkZXJOYW1lRnJvbVBhdGhTdHJpbmcocGF0aDogc3RyaW5nKTogc3RyaW5nIHtcclxuXHRpZiAocGF0aC5lbmRzV2l0aCgnLm1kJykgfHwgcGF0aC5lbmRzV2l0aCgnLmNhbnZhcycpKSB7XHJcblx0XHRyZXR1cm4gcGF0aC5zcGxpdCgnLycpLnNsaWNlKC0yKVswXTtcclxuXHR9IGVsc2Uge1xyXG5cdFx0cmV0dXJuIHBhdGguc3BsaXQoJy8nKS5zbGljZSgtMSlbMF07XHJcblx0fVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gcmVtb3ZlRXh0ZW5zaW9uKG5hbWU6IHN0cmluZyk6IHN0cmluZyB7XHJcblx0cmV0dXJuIG5hbWUucmVwbGFjZSgvXFwuW14vLl0rJC8sICcnKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGdldEV4dGVuc2lvbkZyb21QYXRoU3RyaW5nKHBhdGg6IHN0cmluZyk6IHN0cmluZyB7XHJcblx0cmV0dXJuIHBhdGguc2xpY2UocGF0aC5sYXN0SW5kZXhPZignLicpID49IDAgPyBwYXRoLmxhc3RJbmRleE9mKCcuJykgOiAwKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGdldEZvbGRlclBhdGhGcm9tU3RyaW5nKHBhdGg6IHN0cmluZyk6IHN0cmluZyB7XHJcblx0Y29uc3Qgc3ViU3RyaW5nID0gcGF0aC5sYXN0SW5kZXhPZignLycpID49IDAgPyBwYXRoLmxhc3RJbmRleE9mKCcvJykgOiAwO1xyXG5cdGNvbnN0IGZvbGRlclBhdGggPSBwYXRoLnN1YnN0cmluZygwLCBzdWJTdHJpbmcpO1xyXG5cdGlmIChmb2xkZXJQYXRoID09PSAnJykge1xyXG5cdFx0cmV0dXJuICcvJztcclxuXHR9IGVsc2Uge1xyXG5cdFx0cmV0dXJuIGZvbGRlclBhdGg7XHJcblx0fVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZ2V0UGFyZW50Rm9sZGVyUGF0aChwYXRoOiBzdHJpbmcpOiBzdHJpbmcge1xyXG5cdHJldHVybiB0aGlzLmdldEZvbGRlclBhdGhGcm9tU3RyaW5nKHRoaXMuZ2V0Rm9sZGVyUGF0aEZyb21TdHJpbmcocGF0aCkpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZ2V0RmlsZUV4cGxvcmVyKHBsdWdpbjogRm9sZGVyTm90ZXNQbHVnaW4pIHtcclxuXHRyZXR1cm4gcGx1Z2luLmFwcC53b3Jrc3BhY2UuZ2V0TGVhdmVzT2ZUeXBlKCdmaWxlLWV4cGxvcmVyJylbMF0gYXMgYW55IGFzIEZpbGVFeHBsb3JlcldvcmtzcGFjZUxlYWY7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRGaWxlRXhwbG9yZXJWaWV3KHBsdWdpbjogRm9sZGVyTm90ZXNQbHVnaW4pIHtcclxuXHRyZXR1cm4gZ2V0RmlsZUV4cGxvcmVyKHBsdWdpbikudmlldztcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGdldEZvY3VzZWRJdGVtKHBsdWdpbjogRm9sZGVyTm90ZXNQbHVnaW4pIHtcclxuXHRjb25zdCBmaWxlRXhwbG9yZXIgPSBnZXRGaWxlRXhwbG9yZXIocGx1Z2luKSBhcyBhbnkgYXMgRmlsZUV4cGxvcmVyTGVhZjtcclxuXHRjb25zdCBmb2N1c2VkSXRlbSA9IGZpbGVFeHBsb3Jlci52aWV3LnRyZWUuZm9jdXNlZEl0ZW07XHJcblx0cmV0dXJuIGZvY3VzZWRJdGVtO1xyXG59XHJcbiIsICJpbXBvcnQgRm9sZGVyTm90ZXNQbHVnaW4gZnJvbSAnLi4vbWFpbic7XHJcbmV4cG9ydCBjbGFzcyBFeGNsdWRlUGF0dGVybiB7XHJcblx0dHlwZTogc3RyaW5nO1xyXG5cdGlkOiBzdHJpbmc7XHJcblx0c3RyaW5nOiBzdHJpbmc7XHJcblx0cGF0aDogc3RyaW5nO1xyXG5cdHBvc2l0aW9uOiBudW1iZXI7XHJcblx0c3ViRm9sZGVyczogYm9vbGVhbjtcclxuXHRkaXNhYmxlU3luYzogYm9vbGVhbjtcclxuXHRkaXNhYmxlQXV0b0NyZWF0ZTogYm9vbGVhbjtcclxuXHRkaXNhYmxlRm9sZGVyTm90ZTogYm9vbGVhbjtcclxuXHRlbmFibGVDb2xsYXBzaW5nOiBib29sZWFuO1xyXG5cdGV4Y2x1ZGVGcm9tRm9sZGVyT3ZlcnZpZXc6IGJvb2xlYW47XHJcbiAgICBoaWRlSW5TZXR0aW5nczogYm9vbGVhbjtcclxuXHRkZXRhY2hlZDogYm9vbGVhbjtcclxuXHRkZXRhY2hlZEZpbGVQYXRoPzogc3RyaW5nO1xyXG5cdGhpZGVOb3RlOiBib29sZWFuO1xyXG5cdGNvbnN0cnVjdG9yKHBhdHRlcm46IHN0cmluZywgcG9zaXRpb246IG51bWJlciwgaWQ6IHN0cmluZyB8IHVuZGVmaW5lZCwgcGx1Z2luOiBGb2xkZXJOb3Rlc1BsdWdpbikge1xyXG5cdFx0dGhpcy50eXBlID0gJ3BhdHRlcm4nO1xyXG5cdFx0dGhpcy5pZCA9IGlkIHx8IGNyeXB0by5yYW5kb21VVUlEKCk7XHJcblx0XHR0aGlzLnN0cmluZyA9IHBhdHRlcm47XHJcblx0XHR0aGlzLnBvc2l0aW9uID0gcG9zaXRpb247XHJcblx0XHR0aGlzLnN1YkZvbGRlcnMgPSBwbHVnaW4uc2V0dGluZ3MuZXhjbHVkZVBhdHRlcm5EZWZhdWx0U2V0dGluZ3Muc3ViRm9sZGVycztcclxuXHRcdHRoaXMuZGlzYWJsZVN5bmMgPSBwbHVnaW4uc2V0dGluZ3MuZXhjbHVkZVBhdHRlcm5EZWZhdWx0U2V0dGluZ3MuZGlzYWJsZVN5bmM7XHJcblx0XHR0aGlzLmRpc2FibGVBdXRvQ3JlYXRlID0gcGx1Z2luLnNldHRpbmdzLmV4Y2x1ZGVQYXR0ZXJuRGVmYXVsdFNldHRpbmdzLmRpc2FibGVBdXRvQ3JlYXRlO1xyXG5cdFx0dGhpcy5kaXNhYmxlRm9sZGVyTm90ZSA9IHBsdWdpbi5zZXR0aW5ncy5leGNsdWRlUGF0dGVybkRlZmF1bHRTZXR0aW5ncy5kaXNhYmxlRm9sZGVyTm90ZTtcclxuXHRcdHRoaXMuZW5hYmxlQ29sbGFwc2luZyA9IHBsdWdpbi5zZXR0aW5ncy5leGNsdWRlUGF0dGVybkRlZmF1bHRTZXR0aW5ncy5lbmFibGVDb2xsYXBzaW5nO1xyXG5cdFx0dGhpcy5leGNsdWRlRnJvbUZvbGRlck92ZXJ2aWV3ID0gcGx1Z2luLnNldHRpbmdzLmV4Y2x1ZGVQYXR0ZXJuRGVmYXVsdFNldHRpbmdzLmV4Y2x1ZGVGcm9tRm9sZGVyT3ZlcnZpZXc7XHJcblx0XHR0aGlzLnBhdGggPSAnJztcclxuICAgICAgICB0aGlzLmhpZGVJblNldHRpbmdzID0gZmFsc2U7XHJcblx0fVxyXG59IiwgImltcG9ydCBGb2xkZXJOb3Rlc1BsdWdpbiBmcm9tICcuLi8uLi9tYWluJztcclxuaW1wb3J0IHsgZ2V0Rm9sZGVyTmFtZUZyb21QYXRoU3RyaW5nLCBnZXRGb2xkZXJQYXRoRnJvbVN0cmluZyB9IGZyb20gJy4uLy4uL2Z1bmN0aW9ucy91dGlscyc7XHJcbmltcG9ydCB7IEV4Y2x1ZGVkRm9sZGVyIH0gZnJvbSAnLi4vRXhjbHVkZUZvbGRlcic7XHJcbmltcG9ydCB7IEV4Y2x1ZGVQYXR0ZXJuIH0gZnJvbSAnLi4vRXhjbHVkZVBhdHRlcm4nO1xyXG5pbXBvcnQgeyBQbGF0Zm9ybSwgU2V0dGluZyB9IGZyb20gJ29ic2lkaWFuJztcclxuaW1wb3J0IHsgRm9sZGVyU3VnZ2VzdCB9IGZyb20gJy4uLy4uL3N1Z2dlc3RlcnMvRm9sZGVyU3VnZ2VzdGVyJztcclxuaW1wb3J0IHsgU2V0dGluZ3NUYWIgfSBmcm9tICcuLi8uLi9zZXR0aW5ncy9TZXR0aW5nc1RhYic7XHJcbmltcG9ydCBFeGNsdWRlZEZvbGRlclNldHRpbmdzIGZyb20gJy4uL21vZGFscy9FeGNsdWRlRm9sZGVyU2V0dGluZ3MnO1xyXG5pbXBvcnQgeyB1cGRhdGVQYXR0ZXJuLCBnZXRFeGNsdWRlZEZvbGRlcnNCeVBhdHRlcm4sIGFkZEV4Y2x1ZGVQYXR0ZXJuTGlzdEl0ZW0gfSBmcm9tICcuL3BhdHRlcm5GdW5jdGlvbnMnO1xyXG5pbXBvcnQgeyBnZXRXaGl0ZWxpc3RlZEZvbGRlciB9IGZyb20gJy4vd2hpdGVsaXN0Rm9sZGVyRnVuY3Rpb25zJztcclxuaW1wb3J0IHsgV2hpdGVsaXN0ZWRGb2xkZXIgfSBmcm9tICcuLi9XaGl0ZWxpc3RGb2xkZXInO1xyXG5pbXBvcnQgeyBXaGl0ZWxpc3RlZFBhdHRlcm4gfSBmcm9tICcuLi9XaGl0ZWxpc3RQYXR0ZXJuJztcclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRFeGNsdWRlZEZvbGRlcihwbHVnaW46IEZvbGRlck5vdGVzUGx1Z2luLCBwYXRoOiBzdHJpbmcsIGluY2x1ZGVEZXRhY2hlZDogYm9vbGVhbiwgcGF0aE9ubHk/OiBib29sZWFuLCBpZ25vcmVXaGl0ZWxpc3Q/OiBib29sZWFuKSB7XHJcblx0bGV0IGV4Y2x1ZGVkRm9sZGVyID0ge30gYXMgRXhjbHVkZWRGb2xkZXIgfCBFeGNsdWRlUGF0dGVybiB8IHVuZGVmaW5lZDtcclxuXHRjb25zdCB3aGl0ZWxpc3RlZEZvbGRlciA9IGdldFdoaXRlbGlzdGVkRm9sZGVyKHBsdWdpbiwgcGF0aCkgYXMgV2hpdGVsaXN0ZWRGb2xkZXIgfCBXaGl0ZWxpc3RlZFBhdHRlcm4gfCB1bmRlZmluZWQ7XHJcblx0Y29uc3QgZm9sZGVyTmFtZSA9IGdldEZvbGRlck5hbWVGcm9tUGF0aFN0cmluZyhwYXRoKTtcclxuXHRsZXQgbWF0Y2hlZFBhdHRlcm5zID0gZ2V0RXhjbHVkZWRGb2xkZXJzQnlQYXR0ZXJuKHBsdWdpbiwgZm9sZGVyTmFtZSk7XHJcblx0Y29uc3QgZXhjbHVkZWRGb2xkZXJzID0gZ2V0RXhjbHVkZWRGb2xkZXJzQnlQYXRoKHBsdWdpbiwgcGF0aCk7XHJcblx0aWYgKHBhdGhPbmx5KSB7IG1hdGNoZWRQYXR0ZXJucyA9IFtdOyB9XHJcblx0bGV0IGNvbWJpbmVkRXhjbHVkZWRGb2xkZXJzID0gWy4uLm1hdGNoZWRQYXR0ZXJucywgLi4uZXhjbHVkZWRGb2xkZXJzXTtcclxuXHJcblx0aWYgKCFpbmNsdWRlRGV0YWNoZWQpIHtcclxuXHRcdGNvbWJpbmVkRXhjbHVkZWRGb2xkZXJzID0gY29tYmluZWRFeGNsdWRlZEZvbGRlcnMuZmlsdGVyKGYgPT4gIWYuZGV0YWNoZWQpXHJcblx0fVxyXG5cclxuXHRjb25zdCBwcm9wZXJ0aWVzVG9Db3B5OiAoa2V5b2YgRXhjbHVkZWRGb2xkZXIpW10gPSBbXHJcblx0XHQnZGlzYWJsZUF1dG9DcmVhdGUnLFxyXG5cdFx0J2Rpc2FibGVGb2xkZXJOb3RlJyxcclxuXHRcdCdkaXNhYmxlU3luYycsXHJcblx0XHQnZW5hYmxlQ29sbGFwc2luZycsXHJcblx0XHQnZXhjbHVkZUZyb21Gb2xkZXJPdmVydmlldycsXHJcblx0XHQnZGV0YWNoZWQnLFxyXG5cdFx0J2hpZGVJblNldHRpbmdzJyxcclxuXHRcdCdoaWRlTm90ZScsXHJcblx0XHQnaWQnXHJcblx0XTtcclxuXHJcblx0aWYgKGNvbWJpbmVkRXhjbHVkZWRGb2xkZXJzLmxlbmd0aCA+IDApIHtcclxuXHRcdGZvciAoY29uc3QgbWF0Y2hlZEZvbGRlciBvZiBjb21iaW5lZEV4Y2x1ZGVkRm9sZGVycykge1xyXG5cdFx0XHRwcm9wZXJ0aWVzVG9Db3B5LmZvckVhY2gocHJvcGVydHkgPT4ge1xyXG5cdFx0XHRcdGlmIChtYXRjaGVkRm9sZGVyW3Byb3BlcnR5XSA9PT0gdHJ1ZSkge1xyXG5cdFx0XHRcdFx0KGV4Y2x1ZGVkRm9sZGVyIGFzIGFueSlbcHJvcGVydHldID0gdHJ1ZTtcclxuXHRcdFx0XHR9IGVsc2UgaWYgKCFtYXRjaGVkRm9sZGVyW3Byb3BlcnR5XSkge1xyXG5cdFx0XHRcdFx0KGV4Y2x1ZGVkRm9sZGVyIGFzIGFueSlbcHJvcGVydHldID0gZmFsc2U7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9KTtcclxuXHRcdH1cclxuXHR9IGVsc2Uge1xyXG5cdFx0ZXhjbHVkZWRGb2xkZXIgPSB1bmRlZmluZWQ7XHJcblx0fVxyXG5cclxuXHRpZiAoZXhjbHVkZWRGb2xkZXI/LmRldGFjaGVkKSB7IGlnbm9yZVdoaXRlbGlzdCA9IHRydWU7IH1cclxuXHJcblx0aWYgKHdoaXRlbGlzdGVkRm9sZGVyICYmIGV4Y2x1ZGVkRm9sZGVyICYmICFpZ25vcmVXaGl0ZWxpc3QpIHtcclxuXHRcdGV4Y2x1ZGVkRm9sZGVyLmRpc2FibGVBdXRvQ3JlYXRlID8gZXhjbHVkZWRGb2xkZXIuZGlzYWJsZUF1dG9DcmVhdGUgPSAhd2hpdGVsaXN0ZWRGb2xkZXIuZW5hYmxlQXV0b0NyZWF0ZSA6ICcnO1xyXG5cdFx0ZXhjbHVkZWRGb2xkZXIuZGlzYWJsZUZvbGRlck5vdGUgPyBleGNsdWRlZEZvbGRlci5kaXNhYmxlRm9sZGVyTm90ZSA9ICF3aGl0ZWxpc3RlZEZvbGRlci5lbmFibGVGb2xkZXJOb3RlIDogJyc7XHJcblx0XHRleGNsdWRlZEZvbGRlci5kaXNhYmxlU3luYyA/IGV4Y2x1ZGVkRm9sZGVyLmRpc2FibGVTeW5jID0gIXdoaXRlbGlzdGVkRm9sZGVyLmVuYWJsZVN5bmMgOiAnJztcclxuXHRcdGV4Y2x1ZGVkRm9sZGVyLmVuYWJsZUNvbGxhcHNpbmcgPSB3aGl0ZWxpc3RlZEZvbGRlci5lbmFibGVDb2xsYXBzaW5nO1xyXG5cdFx0ZXhjbHVkZWRGb2xkZXIuZXhjbHVkZUZyb21Gb2xkZXJPdmVydmlldyA/IGV4Y2x1ZGVkRm9sZGVyLmV4Y2x1ZGVGcm9tRm9sZGVyT3ZlcnZpZXcgPSAhd2hpdGVsaXN0ZWRGb2xkZXIuc2hvd0luRm9sZGVyT3ZlcnZpZXcgOiAnJztcclxuXHR9IGVsc2UgaWYgKGV4Y2x1ZGVkRm9sZGVyICYmIE9iamVjdC5rZXlzKGV4Y2x1ZGVkRm9sZGVyKS5sZW5ndGggPT09IDApIHtcclxuXHRcdGV4Y2x1ZGVkRm9sZGVyID0ge1xyXG5cdFx0XHR0eXBlOiAnZm9sZGVyJyxcclxuXHRcdFx0aWQ6ICcnLFxyXG5cdFx0XHRwYXRoOiAnJyxcclxuXHRcdFx0c3RyaW5nOiAnJyxcclxuXHRcdFx0c3ViRm9sZGVyczogZmFsc2UsXHJcblx0XHRcdGRpc2FibGVTeW5jOiBmYWxzZSxcclxuXHRcdFx0ZGlzYWJsZUF1dG9DcmVhdGU6IGZhbHNlLFxyXG5cdFx0XHRkaXNhYmxlRm9sZGVyTm90ZTogZmFsc2UsXHJcblx0XHRcdGVuYWJsZUNvbGxhcHNpbmc6IGZhbHNlLFxyXG5cdFx0XHRwb3NpdGlvbjogMCxcclxuXHRcdFx0ZXhjbHVkZUZyb21Gb2xkZXJPdmVydmlldzogZmFsc2UsXHJcblx0XHRcdGhpZGVJblNldHRpbmdzOiBmYWxzZSxcclxuXHRcdFx0ZGV0YWNoZWQ6IGZhbHNlLFxyXG5cdFx0XHRoaWRlTm90ZTogZmFsc2UsXHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHRyZXR1cm4gZXhjbHVkZWRGb2xkZXI7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXREZXRhY2hlZEZvbGRlcihwbHVnaW46IEZvbGRlck5vdGVzUGx1Z2luLCBwYXRoOiBzdHJpbmcpIHtcclxuXHRyZXR1cm4gcGx1Z2luLnNldHRpbmdzLmV4Y2x1ZGVGb2xkZXJzLmZpbmQoZiA9PiBmLnBhdGggPT0gcGF0aCAmJiBmLmRldGFjaGVkKTtcclxufVxyXG5cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRFeGNsdWRlZEZvbGRlckJ5UGF0aChwbHVnaW46IEZvbGRlck5vdGVzUGx1Z2luLCBwYXRoOiBzdHJpbmcpIHtcclxuXHRyZXR1cm4gcGx1Z2luLnNldHRpbmdzLmV4Y2x1ZGVGb2xkZXJzLmZpbmQoKGV4Y2x1ZGVkRm9sZGVyKSA9PiB7XHJcblx0XHRpZiAocGF0aC50cmltKCkgPT09ICcnIHx8ICFleGNsdWRlZEZvbGRlci5wYXRoKSB7IHJldHVybiBmYWxzZTsgfVxyXG5cdFx0aWYgKGV4Y2x1ZGVkRm9sZGVyLnBhdGggPT09IHBhdGgpIHsgcmV0dXJuIHRydWU7IH1cclxuXHRcdGlmICghZXhjbHVkZWRGb2xkZXIuc3ViRm9sZGVycykgeyByZXR1cm4gZmFsc2U7IH1cclxuXHRcdGNvbnN0IGV4Y2x1ZGVkRm9sZGVyUGF0aCA9IGV4Y2x1ZGVkRm9sZGVyLnBhdGguaW5jbHVkZXMoJy8nKSA/IGV4Y2x1ZGVkRm9sZGVyLnBhdGggOiBleGNsdWRlZEZvbGRlci5wYXRoICsgJy8nO1xyXG5cdFx0bGV0IGZvbGRlclBhdGggPSBnZXRGb2xkZXJQYXRoRnJvbVN0cmluZyhwYXRoKTtcclxuXHRcdGZvbGRlclBhdGggPSBmb2xkZXJQYXRoLmluY2x1ZGVzKCcvJykgPyBmb2xkZXJQYXRoIDogZm9sZGVyUGF0aCArICcvJztcclxuXHJcblx0XHRpZiAoZm9sZGVyUGF0aC5pbmNsdWRlcygnLycpIHx8IGZvbGRlclBhdGguaW5jbHVkZXMoJ1xcXFwnKSkge1xyXG5cdFx0XHRyZXR1cm4gZm9sZGVyUGF0aC5zdGFydHNXaXRoKGV4Y2x1ZGVkRm9sZGVyUGF0aCkgfHwgZm9sZGVyUGF0aCA9PT0gZXhjbHVkZWRGb2xkZXJQYXRoO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0cmV0dXJuIGZvbGRlclBhdGggPT09IGV4Y2x1ZGVkRm9sZGVyUGF0aDtcclxuXHRcdH1cclxuXHR9KTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGdldEV4Y2x1ZGVkRm9sZGVyc0J5UGF0aChwbHVnaW46IEZvbGRlck5vdGVzUGx1Z2luLCBwYXRoOiBzdHJpbmcpIHtcclxuXHRyZXR1cm4gcGx1Z2luLnNldHRpbmdzLmV4Y2x1ZGVGb2xkZXJzLmZpbHRlcigoZXhjbHVkZWRGb2xkZXIpID0+IHtcclxuXHRcdGlmIChwYXRoLnRyaW0oKSA9PT0gJycgfHwgIWV4Y2x1ZGVkRm9sZGVyLnBhdGgpIHsgcmV0dXJuIGZhbHNlOyB9XHJcblx0XHRpZiAoZXhjbHVkZWRGb2xkZXIucGF0aCA9PT0gcGF0aCkgeyByZXR1cm4gdHJ1ZTsgfVxyXG5cdFx0aWYgKCFleGNsdWRlZEZvbGRlci5zdWJGb2xkZXJzKSB7IHJldHVybiBmYWxzZTsgfVxyXG5cdFx0Y29uc3QgZXhjbHVkZWRGb2xkZXJQYXRoID0gZXhjbHVkZWRGb2xkZXIucGF0aC5pbmNsdWRlcygnLycpID8gZXhjbHVkZWRGb2xkZXIucGF0aCA6IGV4Y2x1ZGVkRm9sZGVyLnBhdGggKyAnLyc7XHJcblx0XHRsZXQgZm9sZGVyUGF0aCA9IGdldEZvbGRlclBhdGhGcm9tU3RyaW5nKHBhdGgpO1xyXG5cdFx0Zm9sZGVyUGF0aCA9IGZvbGRlclBhdGguaW5jbHVkZXMoJy8nKSA/IGZvbGRlclBhdGggOiBmb2xkZXJQYXRoICsgJy8nO1xyXG5cclxuXHRcdGlmIChmb2xkZXJQYXRoLmluY2x1ZGVzKCcvJykgfHwgZm9sZGVyUGF0aC5pbmNsdWRlcygnXFxcXCcpKSB7XHJcblx0XHRcdHJldHVybiBmb2xkZXJQYXRoLnN0YXJ0c1dpdGgoZXhjbHVkZWRGb2xkZXJQYXRoKSB8fCBmb2xkZXJQYXRoID09PSBleGNsdWRlZEZvbGRlclBhdGg7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHRyZXR1cm4gZm9sZGVyUGF0aCA9PT0gZXhjbHVkZWRGb2xkZXJQYXRoO1xyXG5cdFx0fVxyXG5cdH0pO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gYWRkRXhjbHVkZWRGb2xkZXIocGx1Z2luOiBGb2xkZXJOb3Rlc1BsdWdpbiwgZXhjbHVkZWRGb2xkZXI6IEV4Y2x1ZGVkRm9sZGVyLCByZWxvYWRTdHlsZXMgPSB0cnVlKSB7XHJcblx0cGx1Z2luLnNldHRpbmdzLmV4Y2x1ZGVGb2xkZXJzLnB1c2goZXhjbHVkZWRGb2xkZXIpO1xyXG5cdHBsdWdpbi5zYXZlU2V0dGluZ3MocmVsb2FkU3R5bGVzKTtcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGRlbGV0ZUV4Y2x1ZGVkRm9sZGVyKHBsdWdpbjogRm9sZGVyTm90ZXNQbHVnaW4sIGV4Y2x1ZGVkRm9sZGVyOiBFeGNsdWRlZEZvbGRlcikge1xyXG5cdHBsdWdpbi5zZXR0aW5ncy5leGNsdWRlRm9sZGVycyA9IHBsdWdpbi5zZXR0aW5ncy5leGNsdWRlRm9sZGVycy5maWx0ZXIoKGZvbGRlcikgPT4gZm9sZGVyLmlkICE9PSBleGNsdWRlZEZvbGRlci5pZCB8fCBmb2xkZXIudHlwZSA9PT0gJ3BhdHRlcm4nKTtcclxuXHRwbHVnaW4uc2F2ZVNldHRpbmdzKHRydWUpO1xyXG5cdHJlc3luY0FycmF5KHBsdWdpbik7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiB1cGRhdGVFeGNsdWRlZEZvbGRlcihwbHVnaW46IEZvbGRlck5vdGVzUGx1Z2luLCBleGNsdWRlZEZvbGRlcjogRXhjbHVkZVBhdHRlcm4sIG5ld0V4Y2x1ZGVGb2xkZXI6IEV4Y2x1ZGVQYXR0ZXJuKSB7XHJcblx0cGx1Z2luLnNldHRpbmdzLmV4Y2x1ZGVGb2xkZXJzID0gcGx1Z2luLnNldHRpbmdzLmV4Y2x1ZGVGb2xkZXJzLmZpbHRlcigoZm9sZGVyKSA9PiBmb2xkZXIuaWQgIT09IGV4Y2x1ZGVkRm9sZGVyLmlkKTtcclxuXHRhZGRFeGNsdWRlZEZvbGRlcihwbHVnaW4sIG5ld0V4Y2x1ZGVGb2xkZXIpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gcmVzeW5jQXJyYXkocGx1Z2luOiBGb2xkZXJOb3Rlc1BsdWdpbikge1xyXG5cdHBsdWdpbi5zZXR0aW5ncy5leGNsdWRlRm9sZGVycyA9IHBsdWdpbi5zZXR0aW5ncy5leGNsdWRlRm9sZGVycy5zb3J0KChhLCBiKSA9PiBhLnBvc2l0aW9uIC0gYi5wb3NpdGlvbik7XHJcblx0cGx1Z2luLnNldHRpbmdzLmV4Y2x1ZGVGb2xkZXJzLmZvckVhY2goKGZvbGRlciwgaW5kZXgpID0+IHtcclxuXHRcdGZvbGRlci5wb3NpdGlvbiA9IGluZGV4O1xyXG5cdH0pO1xyXG5cdHBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxufVxyXG5cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBhZGRFeGNsdWRlRm9sZGVyTGlzdEl0ZW0oc2V0dGluZ3M6IFNldHRpbmdzVGFiLCBjb250YWluZXJFbDogSFRNTEVsZW1lbnQsIGV4Y2x1ZGVkRm9sZGVyOiBFeGNsdWRlZEZvbGRlcikge1xyXG5cdGNvbnN0IHBsdWdpbjogRm9sZGVyTm90ZXNQbHVnaW4gPSBzZXR0aW5ncy5wbHVnaW47XHJcblx0Y29uc3Qgc2V0dGluZyA9IG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKTtcclxuXHRzZXR0aW5nLnNldENsYXNzKCdmbi1leGNsdWRlLWZvbGRlci1saXN0Jyk7XHJcblx0c2V0dGluZy5hZGRTZWFyY2goKGNiKSA9PiB7XHJcblx0XHRuZXcgRm9sZGVyU3VnZ2VzdChcclxuXHRcdFx0Y2IuaW5wdXRFbCxcclxuXHRcdFx0cGx1Z2luLFxyXG5cdFx0XHRmYWxzZVxyXG5cdFx0KTtcclxuXHRcdC8vIEB0cy1pZ25vcmVcclxuXHRcdGNiLmNvbnRhaW5lckVsLmFkZENsYXNzKCdmbi1leGNsdWRlLWZvbGRlci1wYXRoJyk7XHJcblx0XHRjYi5zZXRQbGFjZWhvbGRlcignRm9sZGVyIHBhdGgnKTtcclxuXHRcdGNiLnNldFZhbHVlKGV4Y2x1ZGVkRm9sZGVyLnBhdGggfHwgJycpO1xyXG5cdFx0Y2Iub25DaGFuZ2UoKHZhbHVlKSA9PiB7XHJcblx0XHRcdGlmICh2YWx1ZS5zdGFydHNXaXRoKCd7cmVnZXh9JykgfHwgdmFsdWUuaW5jbHVkZXMoJyonKSkge1xyXG5cdFx0XHRcdGRlbGV0ZUV4Y2x1ZGVkRm9sZGVyKHBsdWdpbiwgZXhjbHVkZWRGb2xkZXIpO1xyXG5cdFx0XHRcdGNvbnN0IHBhdHRlcm4gPSBuZXcgRXhjbHVkZVBhdHRlcm4odmFsdWUsIHBsdWdpbi5zZXR0aW5ncy5leGNsdWRlRm9sZGVycy5sZW5ndGgsIHVuZGVmaW5lZCwgcGx1Z2luKTtcclxuXHRcdFx0XHRhZGRFeGNsdWRlZEZvbGRlcihwbHVnaW4sIHBhdHRlcm4pO1xyXG5cdFx0XHRcdGFkZEV4Y2x1ZGVQYXR0ZXJuTGlzdEl0ZW0oc2V0dGluZ3MsIGNvbnRhaW5lckVsLCBwYXR0ZXJuKTtcclxuXHRcdFx0XHRzZXR0aW5nLmNsZWFyKCk7XHJcblx0XHRcdFx0c2V0dGluZy5zZXR0aW5nRWwucmVtb3ZlKCk7XHJcblx0XHRcdH1cclxuXHRcdFx0aWYgKCFwbHVnaW4uYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aCh2YWx1ZSkpIHJldHVybjtcclxuXHRcdFx0ZXhjbHVkZWRGb2xkZXIucGF0aCA9IHZhbHVlO1xyXG5cdFx0XHR1cGRhdGVFeGNsdWRlZEZvbGRlcihwbHVnaW4sIGV4Y2x1ZGVkRm9sZGVyLCBleGNsdWRlZEZvbGRlcik7XHJcblx0XHR9KTtcclxuXHR9KTtcclxuXHJcblx0c2V0dGluZy5hZGRCdXR0b24oKGNiKSA9PiB7XHJcblx0XHRjYi5zZXRJY29uKCdlZGl0Jyk7XHJcblx0XHRjYi5zZXRUb29sdGlwKCdFZGl0IGZvbGRlciBub3RlJyk7XHJcblx0XHRjYi5vbkNsaWNrKCgpID0+IHtcclxuXHRcdFx0bmV3IEV4Y2x1ZGVkRm9sZGVyU2V0dGluZ3MocGx1Z2luLmFwcCwgcGx1Z2luLCBleGNsdWRlZEZvbGRlcikub3BlbigpO1xyXG5cdFx0fSk7XHJcblx0fSk7XHJcblxyXG5cdGlmIChQbGF0Zm9ybS5pc0Rlc2t0b3AgfHwgUGxhdGZvcm0uaXNUYWJsZXQpIHtcclxuXHRcdHNldHRpbmcuYWRkQnV0dG9uKChjYikgPT4ge1xyXG5cdFx0XHRjYi5zZXRJY29uKCd1cC1jaGV2cm9uLWdseXBoJyk7XHJcblx0XHRcdGNiLnNldFRvb2x0aXAoJ01vdmUgdXAnKTtcclxuXHRcdFx0Y2Iub25DbGljaygoKSA9PiB7XHJcblx0XHRcdFx0aWYgKGV4Y2x1ZGVkRm9sZGVyLnBvc2l0aW9uID09PSAwKSB7IHJldHVybjsgfVxyXG5cdFx0XHRcdGV4Y2x1ZGVkRm9sZGVyLnBvc2l0aW9uIC09IDE7XHJcblx0XHRcdFx0dXBkYXRlRXhjbHVkZWRGb2xkZXIocGx1Z2luLCBleGNsdWRlZEZvbGRlciwgZXhjbHVkZWRGb2xkZXIpO1xyXG5cdFx0XHRcdGNvbnN0IG9sZEV4Y2x1ZGVkRm9sZGVyID0gcGx1Z2luLnNldHRpbmdzLmV4Y2x1ZGVGb2xkZXJzLmZpbmQoKGZvbGRlcikgPT4gZm9sZGVyLnBvc2l0aW9uID09PSBleGNsdWRlZEZvbGRlci5wb3NpdGlvbik7XHJcblx0XHRcdFx0aWYgKG9sZEV4Y2x1ZGVkRm9sZGVyKSB7XHJcblx0XHRcdFx0XHRvbGRFeGNsdWRlZEZvbGRlci5wb3NpdGlvbiArPSAxO1xyXG5cdFx0XHRcdFx0aWYgKG9sZEV4Y2x1ZGVkRm9sZGVyLnR5cGUgPT09ICdwYXR0ZXJuJykge1xyXG5cdFx0XHRcdFx0XHR1cGRhdGVQYXR0ZXJuKHBsdWdpbiwgb2xkRXhjbHVkZWRGb2xkZXIsIG9sZEV4Y2x1ZGVkRm9sZGVyKTtcclxuXHRcdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRcdHVwZGF0ZUV4Y2x1ZGVkRm9sZGVyKHBsdWdpbiwgb2xkRXhjbHVkZWRGb2xkZXIsIG9sZEV4Y2x1ZGVkRm9sZGVyKTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0c2V0dGluZ3MuZGlzcGxheSgpO1xyXG5cdFx0XHR9KTtcclxuXHRcdH0pO1xyXG5cclxuXHRcdHNldHRpbmcuYWRkQnV0dG9uKChjYikgPT4ge1xyXG5cdFx0XHRjYi5zZXRJY29uKCdkb3duLWNoZXZyb24tZ2x5cGgnKTtcclxuXHRcdFx0Y2Iuc2V0VG9vbHRpcCgnTW92ZSBkb3duJyk7XHJcblx0XHRcdGNiLm9uQ2xpY2soKCkgPT4ge1xyXG5cdFx0XHRcdGlmIChleGNsdWRlZEZvbGRlci5wb3NpdGlvbiA9PT0gcGx1Z2luLnNldHRpbmdzLmV4Y2x1ZGVGb2xkZXJzLmxlbmd0aCAtIDEpIHtcclxuXHRcdFx0XHRcdHJldHVybjtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0ZXhjbHVkZWRGb2xkZXIucG9zaXRpb24gKz0gMTtcclxuXHJcblx0XHRcdFx0dXBkYXRlRXhjbHVkZWRGb2xkZXIocGx1Z2luLCBleGNsdWRlZEZvbGRlciwgZXhjbHVkZWRGb2xkZXIpO1xyXG5cdFx0XHRcdGNvbnN0IG9sZEV4Y2x1ZGVkRm9sZGVyID0gcGx1Z2luLnNldHRpbmdzLmV4Y2x1ZGVGb2xkZXJzLmZpbmQoKGZvbGRlcikgPT4gZm9sZGVyLnBvc2l0aW9uID09PSBleGNsdWRlZEZvbGRlci5wb3NpdGlvbik7XHJcblx0XHRcdFx0aWYgKG9sZEV4Y2x1ZGVkRm9sZGVyKSB7XHJcblx0XHRcdFx0XHRvbGRFeGNsdWRlZEZvbGRlci5wb3NpdGlvbiAtPSAxO1xyXG5cdFx0XHRcdFx0aWYgKG9sZEV4Y2x1ZGVkRm9sZGVyLnR5cGUgPT09ICdwYXR0ZXJuJykge1xyXG5cdFx0XHRcdFx0XHR1cGRhdGVQYXR0ZXJuKHBsdWdpbiwgb2xkRXhjbHVkZWRGb2xkZXIsIG9sZEV4Y2x1ZGVkRm9sZGVyKTtcclxuXHRcdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRcdHVwZGF0ZUV4Y2x1ZGVkRm9sZGVyKHBsdWdpbiwgb2xkRXhjbHVkZWRGb2xkZXIsIG9sZEV4Y2x1ZGVkRm9sZGVyKTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdHNldHRpbmdzLmRpc3BsYXkoKTtcclxuXHRcdFx0fSk7XHJcblx0XHR9KTtcclxuXHR9XHJcblxyXG5cdHNldHRpbmcuYWRkQnV0dG9uKChjYikgPT4ge1xyXG5cdFx0Y2Iuc2V0SWNvbigndHJhc2gtMicpO1xyXG5cdFx0Y2Iuc2V0VG9vbHRpcCgnRGVsZXRlIGV4Y2x1ZGVkIGZvbGRlcicpO1xyXG5cdFx0Y2Iub25DbGljaygoKSA9PiB7XHJcblx0XHRcdGRlbGV0ZUV4Y2x1ZGVkRm9sZGVyKHBsdWdpbiwgZXhjbHVkZWRGb2xkZXIpO1xyXG5cdFx0XHRzZXR0aW5nLmNsZWFyKCk7XHJcblx0XHRcdHNldHRpbmcuc2V0dGluZ0VsLnJlbW92ZSgpO1xyXG5cdFx0fSk7XHJcblx0fSk7XHJcbn1cclxuIiwgIi8vIENyZWRpdHMgZ28gdG8gTGlhbSdzIFBlcmlvZGljIE5vdGVzIFBsdWdpbjogaHR0cHM6Ly9naXRodWIuY29tL2xpYW1jYWluL29ic2lkaWFuLXBlcmlvZGljLW5vdGVzIGFuZCBodHRwczovL2dpdGh1Yi5jb20vU2lsZW50Vm9pZDEzL1RlbXBsYXRlclxyXG5cclxuaW1wb3J0IHsgVEFic3RyYWN0RmlsZSwgVEZvbGRlciB9IGZyb20gJ29ic2lkaWFuJztcclxuaW1wb3J0IHsgVGV4dElucHV0U3VnZ2VzdCB9IGZyb20gJy4vU3VnZ2VzdCc7XHJcbmltcG9ydCBGb2xkZXJOb3Rlc1BsdWdpbiBmcm9tICcuLi9tYWluJztcclxuZXhwb3J0IGVudW0gRmlsZVN1Z2dlc3RNb2RlIHtcclxuICAgIFRlbXBsYXRlRmlsZXMsXHJcbiAgICBTY3JpcHRGaWxlcyxcclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIEZvbGRlclN1Z2dlc3QgZXh0ZW5kcyBUZXh0SW5wdXRTdWdnZXN0PFRGb2xkZXI+IHtcclxuXHRjb25zdHJ1Y3RvcihcclxuICAgICAgICBwdWJsaWMgaW5wdXRFbDogSFRNTElucHV0RWxlbWVudCxcclxuICAgICAgICBwbHVnaW46IEZvbGRlck5vdGVzUGx1Z2luLFxyXG5cdFx0cHJpdmF0ZSB3aGl0ZWxpc3RTdWdnZXN0ZXI6IGJvb2xlYW4sXHJcblx0XHRwdWJsaWMgZm9sZGVyPzogVEZvbGRlcixcclxuXHQpIHtcclxuXHRcdHN1cGVyKGlucHV0RWwsIHBsdWdpbik7XHJcblx0fVxyXG5cclxuXHJcblx0Z2V0X2Vycm9yX21zZyhtb2RlOiBGaWxlU3VnZ2VzdE1vZGUpOiBzdHJpbmcge1xyXG5cdFx0c3dpdGNoIChtb2RlKSB7XHJcblx0XHRcdGNhc2UgRmlsZVN1Z2dlc3RNb2RlLlRlbXBsYXRlRmlsZXM6XHJcblx0XHRcdFx0cmV0dXJuICdUZW1wbGF0ZXMgZm9sZGVyIGRvZXNuXFwndCBleGlzdCc7XHJcblx0XHRcdGNhc2UgRmlsZVN1Z2dlc3RNb2RlLlNjcmlwdEZpbGVzOlxyXG5cdFx0XHRcdHJldHVybiAnVXNlciBTY3JpcHRzIGZvbGRlciBkb2VzblxcJ3QgZXhpc3QnO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0Z2V0U3VnZ2VzdGlvbnMoaW5wdXRfc3RyOiBzdHJpbmcpOiBURm9sZGVyW10ge1xyXG5cdFx0Y29uc3QgZm9sZGVyczogVEZvbGRlcltdID0gW107XHJcblx0XHRjb25zdCBsb3dlcl9pbnB1dF9zdHIgPSBpbnB1dF9zdHIudG9Mb3dlckNhc2UoKTtcclxuXHRcdGxldCBmaWxlczogVEFic3RyYWN0RmlsZVtdID0gW107XHJcblx0XHRpZiAodGhpcy5mb2xkZXIpIHtcclxuXHRcdFx0ZmlsZXMgPSB0aGlzLmZvbGRlci5jaGlsZHJlbjtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdGZpbGVzID0gdGhpcy5wbHVnaW4uYXBwLnZhdWx0LmdldEFsbExvYWRlZEZpbGVzKCkuc2xpY2UoMCwxMDApO1xyXG5cdFx0fVxyXG5cdFx0ZmlsZXMuZm9yRWFjaCgoZm9sZGVyOiBUQWJzdHJhY3RGaWxlKSA9PiB7XHJcblx0XHRcdGlmIChcclxuXHRcdFx0XHRmb2xkZXIgaW5zdGFuY2VvZiBURm9sZGVyICYmXHJcbiAgICAgICAgICAgICAgICBmb2xkZXIucGF0aC50b0xvd2VyQ2FzZSgpLmNvbnRhaW5zKGxvd2VyX2lucHV0X3N0cikgJiZcclxuICAgICAgICAgICAgICAgICghdGhpcy5wbHVnaW4uc2V0dGluZ3MuZXhjbHVkZUZvbGRlcnMuZmluZCgoZikgPT4gZi5wYXRoID09PSBmb2xkZXIucGF0aCkgfHwgdGhpcy53aGl0ZWxpc3RTdWdnZXN0ZXIpIFxyXG5cdFx0XHQpIHtcclxuXHRcdFx0XHRmb2xkZXJzLnB1c2goZm9sZGVyKTtcclxuXHRcdFx0fVxyXG5cdFx0fSk7XHJcblxyXG5cdFx0cmV0dXJuIGZvbGRlcnM7XHJcblx0fVxyXG5cclxuXHRyZW5kZXJTdWdnZXN0aW9uKGZvbGRlcjogVEZvbGRlciwgZWw6IEhUTUxFbGVtZW50KTogdm9pZCB7XHJcblx0XHRlbC5zZXRUZXh0KGZvbGRlci5wYXRoKTtcclxuXHR9XHJcblxyXG5cdHNlbGVjdFN1Z2dlc3Rpb24oZm9sZGVyOiBURm9sZGVyKTogdm9pZCB7XHJcblx0XHR0aGlzLmlucHV0RWwudmFsdWUgPSBmb2xkZXIucGF0aDtcclxuXHRcdHRoaXMuaW5wdXRFbC50cmlnZ2VyKCdpbnB1dCcpO1xyXG5cdFx0dGhpcy5jbG9zZSgpO1xyXG5cdH1cclxufVxyXG4iLCAiLy8gQ3JlZGl0cyBnbyB0byBMaWFtJ3MgUGVyaW9kaWMgTm90ZXMgUGx1Z2luOiBodHRwczovL2dpdGh1Yi5jb20vbGlhbWNhaW4vb2JzaWRpYW4tcGVyaW9kaWMtbm90ZXMgYW5kIGh0dHBzOi8vZ2l0aHViLmNvbS9TaWxlbnRWb2lkMTMvVGVtcGxhdGVyXHJcblxyXG5cclxuaW1wb3J0IHsgSVN1Z2dlc3RPd25lciwgU2NvcGUgfSBmcm9tICdvYnNpZGlhbic7XHJcbmltcG9ydCB7IGNyZWF0ZVBvcHBlciwgSW5zdGFuY2UgYXMgUG9wcGVySW5zdGFuY2UgfSBmcm9tICdAcG9wcGVyanMvY29yZSc7XHJcbmltcG9ydCBGb2xkZXJOb3Rlc1BsdWdpbiBmcm9tICdzcmMvbWFpbic7XHJcblxyXG5jb25zdCB3cmFwQXJvdW5kID0gKHZhbHVlOiBudW1iZXIsIHNpemU6IG51bWJlcik6IG51bWJlciA9PiB7XHJcblx0cmV0dXJuICgodmFsdWUgJSBzaXplKSArIHNpemUpICUgc2l6ZTtcclxufTtcclxuXHJcbmNsYXNzIFN1Z2dlc3Q8VD4ge1xyXG5cdHByaXZhdGUgb3duZXI6IElTdWdnZXN0T3duZXI8VD47XHJcblx0cHJpdmF0ZSB2YWx1ZXM6IFRbXTtcclxuXHRwcml2YXRlIHN1Z2dlc3Rpb25zOiBIVE1MRGl2RWxlbWVudFtdO1xyXG5cdHByaXZhdGUgc2VsZWN0ZWRJdGVtOiBudW1iZXI7XHJcblx0cHJpdmF0ZSBjb250YWluZXJFbDogSFRNTEVsZW1lbnQ7XHJcblx0cGx1Z2luOiBGb2xkZXJOb3Rlc1BsdWdpbjtcclxuXHJcblx0Y29uc3RydWN0b3IoXHJcblx0XHRvd25lcjogSVN1Z2dlc3RPd25lcjxUPixcclxuXHRcdGNvbnRhaW5lckVsOiBIVE1MRWxlbWVudCxcclxuXHRcdHNjb3BlOiBTY29wZVxyXG5cdCkge1xyXG5cdFx0dGhpcy5vd25lciA9IG93bmVyO1xyXG5cdFx0dGhpcy5jb250YWluZXJFbCA9IGNvbnRhaW5lckVsO1xyXG5cclxuXHRcdGNvbnRhaW5lckVsLm9uKFxyXG5cdFx0XHQnY2xpY2snLFxyXG5cdFx0XHQnLnN1Z2dlc3Rpb24taXRlbScsXHJcblx0XHRcdHRoaXMub25TdWdnZXN0aW9uQ2xpY2suYmluZCh0aGlzKVxyXG5cdFx0KTtcclxuXHRcdGNvbnRhaW5lckVsLm9uKFxyXG5cdFx0XHQnbW91c2Vtb3ZlJyxcclxuXHRcdFx0Jy5zdWdnZXN0aW9uLWl0ZW0nLFxyXG5cdFx0XHR0aGlzLm9uU3VnZ2VzdGlvbk1vdXNlb3Zlci5iaW5kKHRoaXMpXHJcblx0XHQpO1xyXG5cclxuXHRcdHNjb3BlLnJlZ2lzdGVyKFtdLCAnQXJyb3dVcCcsIChldmVudCkgPT4ge1xyXG5cdFx0XHRpZiAoIWV2ZW50LmlzQ29tcG9zaW5nKSB7XHJcblx0XHRcdFx0dGhpcy5zZXRTZWxlY3RlZEl0ZW0odGhpcy5zZWxlY3RlZEl0ZW0gLSAxLCB0cnVlKTtcclxuXHRcdFx0XHRyZXR1cm4gZmFsc2U7XHJcblx0XHRcdH1cclxuXHRcdH0pO1xyXG5cclxuXHRcdHNjb3BlLnJlZ2lzdGVyKFtdLCAnQXJyb3dEb3duJywgKGV2ZW50KSA9PiB7XHJcblx0XHRcdGlmICghZXZlbnQuaXNDb21wb3NpbmcpIHtcclxuXHRcdFx0XHR0aGlzLnNldFNlbGVjdGVkSXRlbSh0aGlzLnNlbGVjdGVkSXRlbSArIDEsIHRydWUpO1xyXG5cdFx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdFx0fVxyXG5cdFx0fSk7XHJcblxyXG5cdFx0c2NvcGUucmVnaXN0ZXIoW10sICdFbnRlcicsIChldmVudCkgPT4ge1xyXG5cdFx0XHRpZiAoIWV2ZW50LmlzQ29tcG9zaW5nKSB7XHJcblx0XHRcdFx0dGhpcy51c2VTZWxlY3RlZEl0ZW0oZXZlbnQpO1xyXG5cdFx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdFx0fVxyXG5cdFx0fSk7XHJcblx0fVxyXG5cclxuXHRvblN1Z2dlc3Rpb25DbGljayhldmVudDogTW91c2VFdmVudCwgZWw6IEhUTUxEaXZFbGVtZW50KTogdm9pZCB7XHJcblx0XHRldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cclxuXHRcdGNvbnN0IGl0ZW0gPSB0aGlzLnN1Z2dlc3Rpb25zLmluZGV4T2YoZWwpO1xyXG5cdFx0dGhpcy5zZXRTZWxlY3RlZEl0ZW0oaXRlbSwgZmFsc2UpO1xyXG5cdFx0dGhpcy51c2VTZWxlY3RlZEl0ZW0oZXZlbnQpO1xyXG5cdH1cclxuXHJcblx0b25TdWdnZXN0aW9uTW91c2VvdmVyKF9ldmVudDogTW91c2VFdmVudCwgZWw6IEhUTUxEaXZFbGVtZW50KTogdm9pZCB7XHJcblx0XHRjb25zdCBpdGVtID0gdGhpcy5zdWdnZXN0aW9ucy5pbmRleE9mKGVsKTtcclxuXHRcdHRoaXMuc2V0U2VsZWN0ZWRJdGVtKGl0ZW0sIGZhbHNlKTtcclxuXHR9XHJcblxyXG5cdHNldFN1Z2dlc3Rpb25zKHZhbHVlczogVFtdKSB7XHJcblx0XHR0aGlzLmNvbnRhaW5lckVsLmVtcHR5KCk7XHJcblx0XHRjb25zdCBzdWdnZXN0aW9uRWxzOiBIVE1MRGl2RWxlbWVudFtdID0gW107XHJcblxyXG5cdFx0dmFsdWVzLmZvckVhY2goKHZhbHVlKSA9PiB7XHJcblx0XHRcdGNvbnN0IHN1Z2dlc3Rpb25FbCA9IHRoaXMuY29udGFpbmVyRWwuY3JlYXRlRGl2KCdzdWdnZXN0aW9uLWl0ZW0nKTtcclxuXHRcdFx0dGhpcy5vd25lci5yZW5kZXJTdWdnZXN0aW9uKHZhbHVlLCBzdWdnZXN0aW9uRWwpO1xyXG5cdFx0XHRzdWdnZXN0aW9uRWxzLnB1c2goc3VnZ2VzdGlvbkVsKTtcclxuXHRcdH0pO1xyXG5cclxuXHRcdHRoaXMudmFsdWVzID0gdmFsdWVzO1xyXG5cdFx0dGhpcy5zdWdnZXN0aW9ucyA9IHN1Z2dlc3Rpb25FbHM7XHJcblx0XHR0aGlzLnNldFNlbGVjdGVkSXRlbSgwLCBmYWxzZSk7XHJcblx0fVxyXG5cclxuXHR1c2VTZWxlY3RlZEl0ZW0oZXZlbnQ6IE1vdXNlRXZlbnQgfCBLZXlib2FyZEV2ZW50KSB7XHJcblx0XHRjb25zdCBjdXJyZW50VmFsdWUgPSB0aGlzLnZhbHVlc1t0aGlzLnNlbGVjdGVkSXRlbV07XHJcblx0XHRpZiAoY3VycmVudFZhbHVlKSB7XHJcblx0XHRcdHRoaXMub3duZXIuc2VsZWN0U3VnZ2VzdGlvbihjdXJyZW50VmFsdWUsIGV2ZW50KTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdHNldFNlbGVjdGVkSXRlbShzZWxlY3RlZEluZGV4OiBudW1iZXIsIHNjcm9sbEludG9WaWV3OiBib29sZWFuKSB7XHJcblx0XHRjb25zdCBub3JtYWxpemVkSW5kZXggPSB3cmFwQXJvdW5kKFxyXG5cdFx0XHRzZWxlY3RlZEluZGV4LFxyXG5cdFx0XHR0aGlzLnN1Z2dlc3Rpb25zLmxlbmd0aFxyXG5cdFx0KTtcclxuXHRcdGNvbnN0IHByZXZTZWxlY3RlZFN1Z2dlc3Rpb24gPSB0aGlzLnN1Z2dlc3Rpb25zW3RoaXMuc2VsZWN0ZWRJdGVtXTtcclxuXHRcdGNvbnN0IHNlbGVjdGVkU3VnZ2VzdGlvbiA9IHRoaXMuc3VnZ2VzdGlvbnNbbm9ybWFsaXplZEluZGV4XTtcclxuXHJcblx0XHRwcmV2U2VsZWN0ZWRTdWdnZXN0aW9uPy5yZW1vdmVDbGFzcygnaXMtc2VsZWN0ZWQnKTtcclxuXHRcdHNlbGVjdGVkU3VnZ2VzdGlvbj8uYWRkQ2xhc3MoJ2lzLXNlbGVjdGVkJyk7XHJcblxyXG5cdFx0dGhpcy5zZWxlY3RlZEl0ZW0gPSBub3JtYWxpemVkSW5kZXg7XHJcblxyXG5cdFx0aWYgKHNjcm9sbEludG9WaWV3KSB7XHJcblx0XHRcdHNlbGVjdGVkU3VnZ2VzdGlvbi5zY3JvbGxJbnRvVmlldyhmYWxzZSk7XHJcblx0XHR9XHJcblx0fVxyXG59XHJcblxyXG5leHBvcnQgYWJzdHJhY3QgY2xhc3MgVGV4dElucHV0U3VnZ2VzdDxUPiBpbXBsZW1lbnRzIElTdWdnZXN0T3duZXI8VD4ge1xyXG5cdHByb3RlY3RlZCBpbnB1dEVsOiBIVE1MSW5wdXRFbGVtZW50IHwgSFRNTFRleHRBcmVhRWxlbWVudDtcclxuXHJcblx0cHJpdmF0ZSBwb3BwZXI6IFBvcHBlckluc3RhbmNlO1xyXG5cdHByaXZhdGUgc2NvcGU6IFNjb3BlO1xyXG5cdHByaXZhdGUgc3VnZ2VzdEVsOiBIVE1MRWxlbWVudDtcclxuXHRwcml2YXRlIHN1Z2dlc3Q6IFN1Z2dlc3Q8VD47XHJcblx0cGx1Z2luOiBGb2xkZXJOb3Rlc1BsdWdpbjtcclxuXHJcblx0Y29uc3RydWN0b3IoaW5wdXRFbDogSFRNTElucHV0RWxlbWVudCB8IEhUTUxUZXh0QXJlYUVsZW1lbnQsIHBsdWdpbjogRm9sZGVyTm90ZXNQbHVnaW4pIHtcclxuXHRcdHRoaXMuaW5wdXRFbCA9IGlucHV0RWw7XHJcblx0XHR0aGlzLnBsdWdpbiA9IHBsdWdpbjtcclxuXHRcdHRoaXMuc2NvcGUgPSBuZXcgU2NvcGUoKTtcclxuXHJcblx0XHR0aGlzLnN1Z2dlc3RFbCA9IGNyZWF0ZURpdignc3VnZ2VzdGlvbi1jb250YWluZXInKTtcclxuXHRcdGNvbnN0IHN1Z2dlc3Rpb24gPSB0aGlzLnN1Z2dlc3RFbC5jcmVhdGVEaXYoJ3N1Z2dlc3Rpb24nKTtcclxuXHRcdHRoaXMuc3VnZ2VzdCA9IG5ldyBTdWdnZXN0KHRoaXMsIHN1Z2dlc3Rpb24sIHRoaXMuc2NvcGUpO1xyXG5cclxuXHRcdHRoaXMuc2NvcGUucmVnaXN0ZXIoW10sICdFc2NhcGUnLCB0aGlzLmNsb3NlLmJpbmQodGhpcykpO1xyXG5cclxuXHRcdHRoaXMuaW5wdXRFbC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsIHRoaXMub25JbnB1dENoYW5nZWQuYmluZCh0aGlzKSk7XHJcblx0XHR0aGlzLmlucHV0RWwuYWRkRXZlbnRMaXN0ZW5lcignZm9jdXMnLCB0aGlzLm9uSW5wdXRDaGFuZ2VkLmJpbmQodGhpcykpO1xyXG5cdFx0dGhpcy5pbnB1dEVsLmFkZEV2ZW50TGlzdGVuZXIoJ2JsdXInLCB0aGlzLmNsb3NlLmJpbmQodGhpcykpO1xyXG5cdFx0dGhpcy5zdWdnZXN0RWwub24oXHJcblx0XHRcdCdtb3VzZWRvd24nLFxyXG5cdFx0XHQnLnN1Z2dlc3Rpb24tY29udGFpbmVyJyxcclxuXHRcdFx0KGV2ZW50OiBNb3VzZUV2ZW50KSA9PiB7XHJcblx0XHRcdFx0ZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuXHRcdFx0fVxyXG5cdFx0KTtcclxuXHR9XHJcblxyXG5cdG9uSW5wdXRDaGFuZ2VkKCk6IHZvaWQge1xyXG5cdFx0Y29uc3QgaW5wdXRTdHIgPSB0aGlzLmlucHV0RWwudmFsdWU7XHJcblx0XHRjb25zdCBzdWdnZXN0aW9ucyA9IHRoaXMuZ2V0U3VnZ2VzdGlvbnMoaW5wdXRTdHIpO1xyXG5cclxuXHRcdGlmICghc3VnZ2VzdGlvbnMpIHtcclxuXHRcdFx0dGhpcy5jbG9zZSgpO1xyXG5cdFx0XHRyZXR1cm47XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKHN1Z2dlc3Rpb25zLmxlbmd0aCA+IDApIHtcclxuXHRcdFx0dGhpcy5zdWdnZXN0LnNldFN1Z2dlc3Rpb25zKHN1Z2dlc3Rpb25zKTtcclxuXHRcdFx0Ly8gQHRzLWlnbm9yZVxyXG5cdFx0XHR0aGlzLm9wZW4oYXBwLmRvbS5hcHBDb250YWluZXJFbCwgdGhpcy5pbnB1dEVsKTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdHRoaXMuY2xvc2UoKTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdG9wZW4oY29udGFpbmVyOiBIVE1MRWxlbWVudCwgaW5wdXRFbDogSFRNTEVsZW1lbnQpOiB2b2lkIHtcclxuXHRcdC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XHJcblx0XHR0aGlzLnBsdWdpbi5hcHAua2V5bWFwLnB1c2hTY29wZSh0aGlzLnNjb3BlKTtcclxuXHJcblx0XHRjb250YWluZXIuYXBwZW5kQ2hpbGQodGhpcy5zdWdnZXN0RWwpO1xyXG5cdFx0dGhpcy5wb3BwZXIgPSBjcmVhdGVQb3BwZXIoaW5wdXRFbCwgdGhpcy5zdWdnZXN0RWwsIHtcclxuXHRcdFx0cGxhY2VtZW50OiAnYm90dG9tLXN0YXJ0JyxcclxuXHRcdFx0bW9kaWZpZXJzOiBbXHJcblx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0bmFtZTogJ3NhbWVXaWR0aCcsXHJcblx0XHRcdFx0XHRlbmFibGVkOiB0cnVlLFxyXG5cdFx0XHRcdFx0Zm46ICh7IHN0YXRlLCBpbnN0YW5jZSB9KSA9PiB7XHJcblx0XHRcdFx0XHRcdC8vIE5vdGU6IHBvc2l0aW9uaW5nIG5lZWRzIHRvIGJlIGNhbGN1bGF0ZWQgdHdpY2UgLVxyXG5cdFx0XHRcdFx0XHQvLyBmaXJzdCBwYXNzIC0gcG9zaXRpb25pbmcgaXQgYWNjb3JkaW5nIHRvIHRoZSB3aWR0aCBvZiB0aGUgcG9wcGVyXHJcblx0XHRcdFx0XHRcdC8vIHNlY29uZCBwYXNzIC0gcG9zaXRpb24gaXQgd2l0aCB0aGUgd2lkdGggYm91bmQgdG8gdGhlIHJlZmVyZW5jZSBlbGVtZW50XHJcblx0XHRcdFx0XHRcdC8vIHdlIG5lZWQgdG8gZWFybHkgZXhpdCB0byBhdm9pZCBhbiBpbmZpbml0ZSBsb29wXHJcblx0XHRcdFx0XHRcdGNvbnN0IHRhcmdldFdpZHRoID0gYCR7c3RhdGUucmVjdHMucmVmZXJlbmNlLndpZHRofXB4YDtcclxuXHRcdFx0XHRcdFx0aWYgKHN0YXRlLnN0eWxlcy5wb3BwZXIud2lkdGggPT09IHRhcmdldFdpZHRoKSB7XHJcblx0XHRcdFx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdHN0YXRlLnN0eWxlcy5wb3BwZXIud2lkdGggPSB0YXJnZXRXaWR0aDtcclxuXHRcdFx0XHRcdFx0aW5zdGFuY2UudXBkYXRlKCk7XHJcblx0XHRcdFx0XHR9LFxyXG5cdFx0XHRcdFx0cGhhc2U6ICdiZWZvcmVXcml0ZScsXHJcblx0XHRcdFx0XHRyZXF1aXJlczogWydjb21wdXRlU3R5bGVzJ10sXHJcblx0XHRcdFx0fSxcclxuXHRcdFx0XSxcclxuXHRcdH0pO1xyXG5cdH1cclxuXHJcblx0Y2xvc2UoKTogdm9pZCB7XHJcblx0XHR0aGlzLnBsdWdpbi5hcHAua2V5bWFwLnBvcFNjb3BlKHRoaXMuc2NvcGUpO1xyXG5cclxuXHRcdHRoaXMuc3VnZ2VzdC5zZXRTdWdnZXN0aW9ucyhbXSk7XHJcblx0XHRpZiAodGhpcy5wb3BwZXIpIHRoaXMucG9wcGVyLmRlc3Ryb3koKTtcclxuXHRcdHRoaXMuc3VnZ2VzdEVsLmRldGFjaCgpO1xyXG5cdH1cclxuXHJcbiAgICBhYnN0cmFjdCBnZXRTdWdnZXN0aW9ucyhpbnB1dFN0cjogc3RyaW5nKTogVFtdO1xyXG4gICAgYWJzdHJhY3QgcmVuZGVyU3VnZ2VzdGlvbihpdGVtOiBULCBlbDogSFRNTEVsZW1lbnQpOiB2b2lkO1xyXG4gICAgYWJzdHJhY3Qgc2VsZWN0U3VnZ2VzdGlvbihpdGVtOiBUKTogdm9pZDtcclxufVxyXG4iLCAiaW1wb3J0IHsgQXBwLCBNb2RhbCwgU2V0dGluZyB9IGZyb20gJ29ic2lkaWFuJztcclxuaW1wb3J0IEZvbGRlck5vdGVzUGx1Z2luIGZyb20gJy4uLy4uL21haW4nO1xyXG5pbXBvcnQgeyBFeGNsdWRlZEZvbGRlciB9IGZyb20gJ3NyYy9FeGNsdWRlRm9sZGVycy9FeGNsdWRlRm9sZGVyJztcclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRXhjbHVkZWRGb2xkZXJTZXR0aW5ncyBleHRlbmRzIE1vZGFsIHtcclxuXHRwbHVnaW46IEZvbGRlck5vdGVzUGx1Z2luO1xyXG5cdGFwcDogQXBwO1xyXG5cdGV4Y2x1ZGVkRm9sZGVyOiBFeGNsdWRlZEZvbGRlcjtcclxuXHRjb25zdHJ1Y3RvcihhcHA6IEFwcCwgcGx1Z2luOiBGb2xkZXJOb3Rlc1BsdWdpbiwgZXhjbHVkZWRGb2xkZXI6IEV4Y2x1ZGVkRm9sZGVyKSB7XHJcblx0XHRzdXBlcihhcHApO1xyXG5cdFx0dGhpcy5wbHVnaW4gPSBwbHVnaW47XHJcblx0XHR0aGlzLmFwcCA9IGFwcDtcclxuXHRcdHRoaXMuZXhjbHVkZWRGb2xkZXIgPSBleGNsdWRlZEZvbGRlcjtcclxuXHR9XHJcblx0b25PcGVuKCkge1xyXG5cdFx0dGhpcy5kaXNwbGF5KCk7XHJcblx0fVxyXG5cdGRpc3BsYXkoKSB7XHJcblx0XHRjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcclxuXHRcdGNvbnRlbnRFbC5lbXB0eSgpO1xyXG5cdFx0Y29udGVudEVsLmNyZWF0ZUVsKCdoMicsIHsgdGV4dDogJ0V4Y2x1ZGVkIGZvbGRlciBzZXR0aW5ncycgfSk7XHJcblx0XHRuZXcgU2V0dGluZyhjb250ZW50RWwpXHJcblx0XHRcdC5zZXROYW1lKCdJbmNsdWRlIHN1YmZvbGRlcnMnKVxyXG5cdFx0XHQuc2V0RGVzYygnQ2hvb3NlIGlmIHRoZSBzdWJmb2xkZXJzIG9mIHRoZSBmb2xkZXIgc2hvdWxkIGFsc28gYmUgZXhjbHVkZWQnKVxyXG5cdFx0XHQuYWRkVG9nZ2xlKCh0b2dnbGUpID0+XHJcblx0XHRcdFx0dG9nZ2xlXHJcblx0XHRcdFx0XHQuc2V0VmFsdWUodGhpcy5leGNsdWRlZEZvbGRlci5zdWJGb2xkZXJzKVxyXG5cdFx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG5cdFx0XHRcdFx0XHR0aGlzLmV4Y2x1ZGVkRm9sZGVyLnN1YkZvbGRlcnMgPSB2YWx1ZTtcclxuXHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKHRydWUpO1xyXG5cdFx0XHRcdFx0fSlcclxuXHRcdFx0KTtcclxuXHJcblx0XHRuZXcgU2V0dGluZyhjb250ZW50RWwpXHJcblx0XHRcdC5zZXROYW1lKCdEaXNhYmxlIGZvbGRlciBuYW1lIHN5bmMnKVxyXG5cdFx0XHQuc2V0RGVzYygnQ2hvb3NlIGlmIHRoZSBmb2xkZXIgbm90ZSBzaG91bGQgYmUgcmVuYW1lZCB3aGVuIHRoZSBmb2xkZXIgbmFtZSBpcyBjaGFuZ2VkJylcclxuXHRcdFx0LmFkZFRvZ2dsZSgodG9nZ2xlKSA9PlxyXG5cdFx0XHRcdHRvZ2dsZVxyXG5cdFx0XHRcdFx0LnNldFZhbHVlKHRoaXMuZXhjbHVkZWRGb2xkZXIuZGlzYWJsZVN5bmMpXHJcblx0XHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcblx0XHRcdFx0XHRcdHRoaXMuZXhjbHVkZWRGb2xkZXIuZGlzYWJsZVN5bmMgPSB2YWx1ZTtcclxuXHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0XHR9KVxyXG5cdFx0XHQpO1xyXG5cclxuXHRcdG5ldyBTZXR0aW5nKGNvbnRlbnRFbClcclxuXHRcdFx0LnNldE5hbWUoJ0RvblxcJ3Qgc2hvdyBmb2xkZXIgaW4gZm9sZGVyIG92ZXJ2aWV3JylcclxuXHRcdFx0LnNldERlc2MoJ0Nob29zZSBpZiB0aGUgZm9sZGVyIHNob3VsZCBiZSBzaG93biBpbiB0aGUgZm9sZGVyIG92ZXJ2aWV3JylcclxuXHRcdFx0LmFkZFRvZ2dsZSgodG9nZ2xlKSA9PlxyXG5cdFx0XHRcdHRvZ2dsZVxyXG5cdFx0XHRcdFx0LnNldFZhbHVlKHRoaXMuZXhjbHVkZWRGb2xkZXIuZXhjbHVkZUZyb21Gb2xkZXJPdmVydmlldylcclxuXHRcdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuXHRcdFx0XHRcdFx0dGhpcy5leGNsdWRlZEZvbGRlci5leGNsdWRlRnJvbUZvbGRlck92ZXJ2aWV3ID0gdmFsdWU7XHJcblx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHRcdFx0fSlcclxuXHRcdFx0KTtcclxuXHJcblx0XHRuZXcgU2V0dGluZyhjb250ZW50RWwpXHJcblx0XHRcdC5zZXROYW1lKCdEaXNhYmxlIGF1dG8gY3JlYXRpb24gb2YgZm9sZGVyIG5vdGVzIGluIHRoaXMgZm9sZGVyJylcclxuXHRcdFx0LnNldERlc2MoJ0Nob29zZSBpZiBhIGZvbGRlciBub3RlIHNob3VsZCBiZSBjcmVhdGVkIHdoZW4gYSBuZXcgZm9sZGVyIGlzIGNyZWF0ZWQnKVxyXG5cdFx0XHQuYWRkVG9nZ2xlKCh0b2dnbGUpID0+XHJcblx0XHRcdFx0dG9nZ2xlXHJcblx0XHRcdFx0XHQuc2V0VmFsdWUodGhpcy5leGNsdWRlZEZvbGRlci5kaXNhYmxlQXV0b0NyZWF0ZSlcclxuXHRcdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuXHRcdFx0XHRcdFx0dGhpcy5leGNsdWRlZEZvbGRlci5kaXNhYmxlQXV0b0NyZWF0ZSA9IHZhbHVlO1xyXG5cdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0XHRcdH0pXHJcblx0XHRcdCk7XHJcblxyXG5cdFx0bmV3IFNldHRpbmcoY29udGVudEVsKVxyXG5cdFx0XHQuc2V0TmFtZSgnRGlzYWJsZSBvcGVuIGZvbGRlciBub3RlJylcclxuXHRcdFx0LnNldERlc2MoJ0Nob29zZSBpZiB0aGUgZm9sZGVyIG5vdGUgc2hvdWxkIGJlIG9wZW5lZCB3aGVuIHRoZSBmb2xkZXIgaXMgb3BlbmVkJylcclxuXHRcdFx0LmFkZFRvZ2dsZSgodG9nZ2xlKSA9PlxyXG5cdFx0XHRcdHRvZ2dsZVxyXG5cdFx0XHRcdFx0LnNldFZhbHVlKHRoaXMuZXhjbHVkZWRGb2xkZXIuZGlzYWJsZUZvbGRlck5vdGUpXHJcblx0XHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcblx0XHRcdFx0XHRcdHRoaXMuZXhjbHVkZWRGb2xkZXIuZGlzYWJsZUZvbGRlck5vdGUgPSB2YWx1ZTtcclxuXHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKHRydWUpO1xyXG5cdFx0XHRcdFx0XHR0aGlzLmRpc3BsYXkoKTtcclxuXHRcdFx0XHRcdH0pXHJcblx0XHRcdCk7XHJcblxyXG5cdFx0aWYgKCF0aGlzLmV4Y2x1ZGVkRm9sZGVyLmRpc2FibGVGb2xkZXJOb3RlKSB7XHJcblx0XHRcdG5ldyBTZXR0aW5nKGNvbnRlbnRFbClcclxuXHRcdFx0XHQuc2V0TmFtZSgnQ29sbGFwc2UgZm9sZGVyIHdoZW4gb3BlbmluZyBmb2xkZXIgbm90ZScpXHJcblx0XHRcdFx0LnNldERlc2MoJ0Nob29zZSBpZiB0aGUgZm9sZGVyIHNob3VsZCBiZSBjb2xsYXBzZWQgd2hlbiB0aGUgZm9sZGVyIG5vdGUgaXMgb3BlbmVkJylcclxuXHRcdFx0XHQuYWRkVG9nZ2xlKCh0b2dnbGUpID0+XHJcblx0XHRcdFx0XHR0b2dnbGVcclxuXHRcdFx0XHRcdFx0LnNldFZhbHVlKHRoaXMuZXhjbHVkZWRGb2xkZXIuZW5hYmxlQ29sbGFwc2luZylcclxuXHRcdFx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdHRoaXMuZXhjbHVkZWRGb2xkZXIuZW5hYmxlQ29sbGFwc2luZyA9IHZhbHVlO1xyXG5cdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHRcdFx0XHR9KVxyXG5cdFx0XHRcdCk7XHJcblx0XHR9XHJcblxyXG5cdH1cclxuXHRvbkNsb3NlKCkge1xyXG5cdFx0Y29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XHJcblx0XHRjb250ZW50RWwuZW1wdHkoKTtcclxuXHR9XHJcbn1cclxuIiwgImltcG9ydCBGb2xkZXJOb3Rlc1BsdWdpbiBmcm9tICcuLi8uLi9tYWluJztcclxuaW1wb3J0IHsgRXhjbHVkZVBhdHRlcm4gfSBmcm9tICcuLi9FeGNsdWRlUGF0dGVybic7XHJcbmltcG9ydCB7IFNldHRpbmcsIFBsYXRmb3JtIH0gZnJvbSAnb2JzaWRpYW4nO1xyXG5pbXBvcnQgeyBTZXR0aW5nc1RhYiB9IGZyb20gJy4uLy4uL3NldHRpbmdzL1NldHRpbmdzVGFiJztcclxuaW1wb3J0IHsgYWRkRXhjbHVkZWRGb2xkZXIsIHJlc3luY0FycmF5LCB1cGRhdGVFeGNsdWRlZEZvbGRlciB9IGZyb20gJy4vZm9sZGVyRnVuY3Rpb25zJztcclxuaW1wb3J0IFBhdHRlcm5TZXR0aW5ncyBmcm9tICcuLi9tb2RhbHMvUGF0dGVyblNldHRpbmdzJztcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiB1cGRhdGVQYXR0ZXJuKHBsdWdpbjogRm9sZGVyTm90ZXNQbHVnaW4sIHBhdHRlcm46IEV4Y2x1ZGVQYXR0ZXJuLCBuZXdQYXR0ZXJuOiBFeGNsdWRlUGF0dGVybikge1xyXG4gICAgcGx1Z2luLnNldHRpbmdzLmV4Y2x1ZGVGb2xkZXJzID0gcGx1Z2luLnNldHRpbmdzLmV4Y2x1ZGVGb2xkZXJzLmZpbHRlcigoZm9sZGVyKSA9PiBmb2xkZXIuaWQgIT09IHBhdHRlcm4uaWQpO1xyXG4gICAgYWRkRXhjbHVkZWRGb2xkZXIocGx1Z2luLCBuZXdQYXR0ZXJuKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGRlbGV0ZVBhdHRlcm4ocGx1Z2luOiBGb2xkZXJOb3Rlc1BsdWdpbiwgcGF0dGVybjogRXhjbHVkZVBhdHRlcm4pIHtcclxuICAgIHBsdWdpbi5zZXR0aW5ncy5leGNsdWRlRm9sZGVycyA9IHBsdWdpbi5zZXR0aW5ncy5leGNsdWRlRm9sZGVycy5maWx0ZXIoKGZvbGRlcikgPT4gZm9sZGVyLmlkICE9PSBwYXR0ZXJuLmlkIHx8IGZvbGRlci50eXBlID09PSAnZm9sZGVyJyk7XHJcbiAgICBwbHVnaW4uc2F2ZVNldHRpbmdzKHRydWUpO1xyXG4gICAgcmVzeW5jQXJyYXkocGx1Z2luKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGdldEV4Y2x1ZGVkRm9sZGVyc0J5UGF0dGVybihwbHVnaW46IEZvbGRlck5vdGVzUGx1Z2luLCBmb2xkZXJOYW1lOiBzdHJpbmcpOiBFeGNsdWRlUGF0dGVybltdIHtcclxuICAgIHJldHVybiBwbHVnaW4uc2V0dGluZ3MuZXhjbHVkZUZvbGRlcnMuZmlsdGVyKChzKSA9PiBzLnR5cGUgPT0gJ3BhdHRlcm4nKS5maWx0ZXIoKHBhdHRlcm4pID0+IHtcclxuICAgICAgICBpZiAoIXBhdHRlcm4uc3RyaW5nKSB7IHJldHVybiBmYWxzZTsgfVxyXG4gICAgICAgIGNvbnN0IHN0cmluZyA9IHBhdHRlcm4uc3RyaW5nLnRyaW0oKTtcclxuICAgICAgICBpZiAoIXN0cmluZy5zdGFydHNXaXRoKCd7cmVnZXh9JykgJiYgIShzdHJpbmcuc3RhcnRzV2l0aCgnKicpIHx8IHN0cmluZy5lbmRzV2l0aCgnKicpKSkgeyByZXR1cm4gZmFsc2U7IH1cclxuICAgICAgICBjb25zdCByZWdleCA9IHN0cmluZy5yZXBsYWNlKCd7cmVnZXh9JywgJycpLnRyaW0oKTtcclxuICAgICAgICBpZiAoc3RyaW5nLnN0YXJ0c1dpdGgoJ3tyZWdleH0nKSAmJiByZWdleCA9PT0gJycpIHsgcmV0dXJuIGZhbHNlOyB9XHJcbiAgICAgICAgaWYgKHJlZ2V4ICE9PSB1bmRlZmluZWQgJiYgc3RyaW5nLnN0YXJ0c1dpdGgoJ3tyZWdleH0nKSkge1xyXG4gICAgICAgICAgICBjb25zdCBtYXRjaCA9IG5ldyBSZWdFeHAocmVnZXgpLmV4ZWMoZm9sZGVyTmFtZSk7XHJcbiAgICAgICAgICAgIGlmIChtYXRjaCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2UgaWYgKHN0cmluZy5zdGFydHNXaXRoKCcqJykgJiYgc3RyaW5nLmVuZHNXaXRoKCcqJykpIHtcclxuICAgICAgICAgICAgaWYgKGZvbGRlck5hbWUuaW5jbHVkZXMoc3RyaW5nLnNsaWNlKDEsIC0xKSkpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIGlmIChzdHJpbmcuc3RhcnRzV2l0aCgnKicpKSB7XHJcbiAgICAgICAgICAgIGlmIChmb2xkZXJOYW1lLmVuZHNXaXRoKHN0cmluZy5zbGljZSgxKSkpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIGlmIChzdHJpbmcuZW5kc1dpdGgoJyonKSkge1xyXG4gICAgICAgICAgICBpZiAoZm9sZGVyTmFtZS5zdGFydHNXaXRoKHN0cmluZy5zbGljZSgwLCAtMSkpKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZ2V0RXhjbHVkZWRGb2xkZXJCeVBhdHRlcm4ocGx1Z2luOiBGb2xkZXJOb3Rlc1BsdWdpbiwgZm9sZGVyTmFtZTogc3RyaW5nKTogRXhjbHVkZVBhdHRlcm4gfCB1bmRlZmluZWR7XHJcbiAgICByZXR1cm4gcGx1Z2luLnNldHRpbmdzLmV4Y2x1ZGVGb2xkZXJzLmZpbHRlcigocykgPT4gcy50eXBlID09ICdwYXR0ZXJuJykuZmluZCgocGF0dGVybikgPT4ge1xyXG4gICAgICAgIGlmICghcGF0dGVybi5zdHJpbmcpIHsgcmV0dXJuIGZhbHNlOyB9XHJcbiAgICAgICAgY29uc3Qgc3RyaW5nID0gcGF0dGVybi5zdHJpbmcudHJpbSgpO1xyXG4gICAgICAgIGlmICghc3RyaW5nLnN0YXJ0c1dpdGgoJ3tyZWdleH0nKSAmJiAhKHN0cmluZy5zdGFydHNXaXRoKCcqJykgfHwgc3RyaW5nLmVuZHNXaXRoKCcqJykpKSB7IHJldHVybiBmYWxzZTsgfVxyXG4gICAgICAgIGNvbnN0IHJlZ2V4ID0gc3RyaW5nLnJlcGxhY2UoJ3tyZWdleH0nLCAnJykudHJpbSgpO1xyXG4gICAgICAgIGlmIChzdHJpbmcuc3RhcnRzV2l0aCgne3JlZ2V4fScpICYmIHJlZ2V4ID09PSAnJykgeyByZXR1cm4gZmFsc2U7IH1cclxuICAgICAgICBpZiAocmVnZXggIT09IHVuZGVmaW5lZCAmJiBzdHJpbmcuc3RhcnRzV2l0aCgne3JlZ2V4fScpKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IG1hdGNoID0gbmV3IFJlZ0V4cChyZWdleCkuZXhlYyhmb2xkZXJOYW1lKTtcclxuICAgICAgICAgICAgaWYgKG1hdGNoKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSBpZiAoc3RyaW5nLnN0YXJ0c1dpdGgoJyonKSAmJiBzdHJpbmcuZW5kc1dpdGgoJyonKSkge1xyXG4gICAgICAgICAgICBpZiAoZm9sZGVyTmFtZS5pbmNsdWRlcyhzdHJpbmcuc2xpY2UoMSwgLTEpKSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2UgaWYgKHN0cmluZy5zdGFydHNXaXRoKCcqJykpIHtcclxuICAgICAgICAgICAgaWYgKGZvbGRlck5hbWUuZW5kc1dpdGgoc3RyaW5nLnNsaWNlKDEpKSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2UgaWYgKHN0cmluZy5lbmRzV2l0aCgnKicpKSB7XHJcbiAgICAgICAgICAgIGlmIChmb2xkZXJOYW1lLnN0YXJ0c1dpdGgoc3RyaW5nLnNsaWNlKDAsIC0xKSkpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBhZGRFeGNsdWRlUGF0dGVybkxpc3RJdGVtKHNldHRpbmdzOiBTZXR0aW5nc1RhYiwgY29udGFpbmVyRWw6IEhUTUxFbGVtZW50LCBwYXR0ZXJuOiBFeGNsdWRlUGF0dGVybikge1xyXG4gICAgY29uc3QgcGx1Z2luOiBGb2xkZXJOb3Rlc1BsdWdpbiA9IHNldHRpbmdzLnBsdWdpbjtcclxuICAgIGNvbnN0IHNldHRpbmcgPSBuZXcgU2V0dGluZyhjb250YWluZXJFbCk7XHJcbiAgICBzZXR0aW5nLnNldENsYXNzKCdmbi1leGNsdWRlLWZvbGRlci1saXN0Jyk7XHJcbiAgICBzZXR0aW5nLmFkZFNlYXJjaCgoY2IpID0+IHtcclxuICAgICAgICAvLyBAdHMtaWdub3JlXHJcbiAgICAgICAgY2IuY29udGFpbmVyRWwuYWRkQ2xhc3MoJ2ZuLWV4Y2x1ZGUtZm9sZGVyLXBhdGgnKTtcclxuICAgICAgICBjYi5zZXRQbGFjZWhvbGRlcignUGF0dGVybicpO1xyXG4gICAgICAgIGNiLnNldFZhbHVlKHBhdHRlcm4uc3RyaW5nKTtcclxuICAgICAgICBjYi5vbkNoYW5nZSgodmFsdWUpID0+IHtcclxuICAgICAgICAgICAgcGF0dGVybi5zdHJpbmcgPSB2YWx1ZTtcclxuICAgICAgICAgICAgdXBkYXRlUGF0dGVybihwbHVnaW4sIHBhdHRlcm4sIHBhdHRlcm4pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgICBzZXR0aW5nLmFkZEJ1dHRvbigoY2IpID0+IHtcclxuICAgICAgICBjYi5zZXRJY29uKCdlZGl0Jyk7XHJcbiAgICAgICAgY2Iuc2V0VG9vbHRpcCgnRWRpdCBwYXR0ZXJuJyk7XHJcbiAgICAgICAgY2Iub25DbGljaygoKSA9PiB7XHJcbiAgICAgICAgICAgIG5ldyBQYXR0ZXJuU2V0dGluZ3MocGx1Z2luLmFwcCwgcGx1Z2luLCBwYXR0ZXJuKS5vcGVuKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpZiAoUGxhdGZvcm0uaXNEZXNrdG9wIHx8IFBsYXRmb3JtLmlzVGFibGV0KSB7XHJcbiAgICAgICAgc2V0dGluZy5hZGRCdXR0b24oKGNiKSA9PiB7XHJcbiAgICAgICAgICAgIGNiLnNldEljb24oJ3VwLWNoZXZyb24tZ2x5cGgnKTtcclxuICAgICAgICAgICAgY2Iuc2V0VG9vbHRpcCgnTW92ZSB1cCcpO1xyXG4gICAgICAgICAgICBjYi5vbkNsaWNrKCgpID0+IHtcclxuICAgICAgICAgICAgICAgIGlmIChwYXR0ZXJuLnBvc2l0aW9uID09PSAwKSB7IHJldHVybjsgfVxyXG4gICAgICAgICAgICAgICAgcGF0dGVybi5wb3NpdGlvbiAtPSAxO1xyXG4gICAgICAgICAgICAgICAgdXBkYXRlUGF0dGVybihwbHVnaW4sIHBhdHRlcm4sIHBhdHRlcm4pO1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgb2xkUGF0dGVybiA9IHBsdWdpbi5zZXR0aW5ncy5leGNsdWRlRm9sZGVycy5maW5kKChmb2xkZXIpID0+IGZvbGRlci5wb3NpdGlvbiA9PT0gcGF0dGVybi5wb3NpdGlvbik7XHJcbiAgICAgICAgICAgICAgICBpZiAob2xkUGF0dGVybikge1xyXG4gICAgICAgICAgICAgICAgICAgIG9sZFBhdHRlcm4ucG9zaXRpb24gKz0gMTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAob2xkUGF0dGVybi50eXBlID09PSAncGF0dGVybicpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdXBkYXRlUGF0dGVybihwbHVnaW4sIG9sZFBhdHRlcm4sIG9sZFBhdHRlcm4pO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZUV4Y2x1ZGVkRm9sZGVyKHBsdWdpbiwgb2xkUGF0dGVybiwgb2xkUGF0dGVybik7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgc2V0dGluZ3MuZGlzcGxheSgpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgc2V0dGluZy5hZGRCdXR0b24oKGNiKSA9PiB7XHJcbiAgICAgICAgICAgIGNiLnNldEljb24oJ2Rvd24tY2hldnJvbi1nbHlwaCcpO1xyXG4gICAgICAgICAgICBjYi5zZXRUb29sdGlwKCdNb3ZlIGRvd24nKTtcclxuICAgICAgICAgICAgY2Iub25DbGljaygoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAocGF0dGVybi5wb3NpdGlvbiA9PT0gcGx1Z2luLnNldHRpbmdzLmV4Y2x1ZGVGb2xkZXJzLmxlbmd0aCAtIDEpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBwYXR0ZXJuLnBvc2l0aW9uICs9IDE7XHJcblxyXG4gICAgICAgICAgICAgICAgdXBkYXRlUGF0dGVybihwbHVnaW4sIHBhdHRlcm4sIHBhdHRlcm4pO1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgb2xkUGF0dGVybiA9IHBsdWdpbi5zZXR0aW5ncy5leGNsdWRlRm9sZGVycy5maW5kKChmb2xkZXIpID0+IGZvbGRlci5wb3NpdGlvbiA9PT0gcGF0dGVybi5wb3NpdGlvbik7XHJcbiAgICAgICAgICAgICAgICBpZiAob2xkUGF0dGVybikge1xyXG4gICAgICAgICAgICAgICAgICAgIG9sZFBhdHRlcm4ucG9zaXRpb24gLT0gMTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAob2xkUGF0dGVybi50eXBlID09PSAncGF0dGVybicpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdXBkYXRlUGF0dGVybihwbHVnaW4sIG9sZFBhdHRlcm4sIG9sZFBhdHRlcm4pO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZUV4Y2x1ZGVkRm9sZGVyKHBsdWdpbiwgb2xkUGF0dGVybiwgb2xkUGF0dGVybik7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgc2V0dGluZ3MuZGlzcGxheSgpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBzZXR0aW5nLmFkZEJ1dHRvbigoY2IpID0+IHtcclxuICAgICAgICBjYi5zZXRJY29uKCd0cmFzaC0yJyk7XHJcbiAgICAgICAgY2Iuc2V0VG9vbHRpcCgnRGVsZXRlIHBhdHRlcm4nKTtcclxuICAgICAgICBjYi5vbkNsaWNrKCgpID0+IHtcclxuICAgICAgICAgICAgZGVsZXRlUGF0dGVybihwbHVnaW4sIHBhdHRlcm4pO1xyXG4gICAgICAgICAgICBzZXR0aW5nLmNsZWFyKCk7XHJcbiAgICAgICAgICAgIHNldHRpbmcuc2V0dGluZ0VsLnJlbW92ZSgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcbn0iLCAiaW1wb3J0IHsgQXBwLCBNb2RhbCwgU2V0dGluZyB9IGZyb20gJ29ic2lkaWFuJztcclxuaW1wb3J0IEZvbGRlck5vdGVzUGx1Z2luIGZyb20gJy4uLy4uL21haW4nO1xyXG5pbXBvcnQgeyBFeGNsdWRlUGF0dGVybiB9IGZyb20gJ3NyYy9FeGNsdWRlRm9sZGVycy9FeGNsdWRlUGF0dGVybic7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQYXR0ZXJuU2V0dGluZ3MgZXh0ZW5kcyBNb2RhbCB7XHJcblx0cGx1Z2luOiBGb2xkZXJOb3Rlc1BsdWdpbjtcclxuXHRhcHA6IEFwcDtcclxuXHRwYXR0ZXJuOiBFeGNsdWRlUGF0dGVybjtcclxuXHRjb25zdHJ1Y3RvcihhcHA6IEFwcCwgcGx1Z2luOiBGb2xkZXJOb3Rlc1BsdWdpbiwgcGF0dGVybjogRXhjbHVkZVBhdHRlcm4pIHtcclxuXHRcdHN1cGVyKGFwcCk7XHJcblx0XHR0aGlzLnBsdWdpbiA9IHBsdWdpbjtcclxuXHRcdHRoaXMuYXBwID0gYXBwO1xyXG5cdFx0dGhpcy5wYXR0ZXJuID0gcGF0dGVybjtcclxuXHR9XHJcblx0b25PcGVuKCkge1xyXG5cdFx0dGhpcy5kaXNwbGF5KCk7XHJcblx0fVxyXG5cdGRpc3BsYXkoKSB7XHJcblx0XHRjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcclxuXHRcdGNvbnRlbnRFbC5lbXB0eSgpO1xyXG5cdFx0Y29udGVudEVsLmNyZWF0ZUVsKCdoMicsIHsgdGV4dDogJ1BhdHRlcm4gc2V0dGluZ3MnIH0pO1xyXG5cclxuXHRcdG5ldyBTZXR0aW5nKGNvbnRlbnRFbClcclxuXHRcdFx0LnNldE5hbWUoJ0Rpc2FibGUgZm9sZGVyIG5hbWUgc3luYycpXHJcblx0XHRcdC5zZXREZXNjKCdDaG9vc2UgaWYgdGhlIGZvbGRlciBuYW1lIHNob3VsZCBiZSByZW5hbWVkIHdoZW4gdGhlIGZpbGUgbmFtZSBoYXMgYmVlbiBjaGFuZ2VkJylcclxuXHRcdFx0LmFkZFRvZ2dsZSgodG9nZ2xlKSA9PlxyXG5cdFx0XHRcdHRvZ2dsZVxyXG5cdFx0XHRcdFx0LnNldFZhbHVlKHRoaXMucGF0dGVybi5kaXNhYmxlU3luYylcclxuXHRcdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuXHRcdFx0XHRcdFx0dGhpcy5wYXR0ZXJuLmRpc2FibGVTeW5jID0gdmFsdWU7XHJcblx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHRcdFx0fSlcclxuXHRcdFx0KTtcclxuXHJcblx0XHRuZXcgU2V0dGluZyhjb250ZW50RWwpXHJcblx0XHRcdC5zZXROYW1lKCdEaXNhYmxlIGF1dG8gY3JlYXRpb24gb2YgZm9sZGVyIG5vdGVzIGluIHRoaXMgZm9sZGVyJylcclxuXHRcdFx0LnNldERlc2MoJ0Nob29zZSBpZiBhIGZvbGRlciBub3RlIHNob3VsZCBiZSBjcmVhdGVkIHdoZW4gYSBuZXcgZm9sZGVyIGlzIGNyZWF0ZWQgdGhhdCBtYXRjaGVzIHRoaXMgcGF0dGVybicpXHJcblx0XHRcdC5hZGRUb2dnbGUoKHRvZ2dsZSkgPT5cclxuXHRcdFx0XHR0b2dnbGVcclxuXHRcdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBhdHRlcm4uZGlzYWJsZUF1dG9DcmVhdGUpXHJcblx0XHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcblx0XHRcdFx0XHRcdHRoaXMucGF0dGVybi5kaXNhYmxlQXV0b0NyZWF0ZSA9IHZhbHVlO1xyXG5cdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0XHRcdH0pXHJcblx0XHRcdCk7XHJcblxyXG5cdFx0bmV3IFNldHRpbmcoY29udGVudEVsKVxyXG5cdFx0XHQuc2V0TmFtZSgnRG9uXFwndCBzaG93IGZvbGRlciBpbiBmb2xkZXIgb3ZlcnZpZXcnKVxyXG5cdFx0XHQuc2V0RGVzYygnQ2hvb3NlIGlmIHRoZSBmb2xkZXIgc2hvdWxkIGJlIHNob3duIGluIHRoZSBmb2xkZXIgb3ZlcnZpZXcnKVxyXG5cdFx0XHQuYWRkVG9nZ2xlKCh0b2dnbGUpID0+XHJcblx0XHRcdFx0dG9nZ2xlXHJcblx0XHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wYXR0ZXJuLmV4Y2x1ZGVGcm9tRm9sZGVyT3ZlcnZpZXcpXHJcblx0XHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcblx0XHRcdFx0XHRcdHRoaXMucGF0dGVybi5leGNsdWRlRnJvbUZvbGRlck92ZXJ2aWV3ID0gdmFsdWU7XHJcblx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHRcdFx0fSlcclxuXHRcdFx0KTtcclxuXHJcblx0XHRuZXcgU2V0dGluZyhjb250ZW50RWwpXHJcblx0XHRcdC5zZXROYW1lKCdEaXNhYmxlIG9wZW4gZm9sZGVyIG5vdGUnKVxyXG5cdFx0XHQuc2V0RGVzYygnQ2hvb3NlIGlmIHRoZSBmb2xkZXIgbm90ZSBzaG91bGQgYmUgb3BlbmVkIHdoZW4gdGhlIGZvbGRlciBpcyBvcGVuZWQnKVxyXG5cdFx0XHQuYWRkVG9nZ2xlKCh0b2dnbGUpID0+XHJcblx0XHRcdFx0dG9nZ2xlXHJcblx0XHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wYXR0ZXJuLmRpc2FibGVGb2xkZXJOb3RlKVxyXG5cdFx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG5cdFx0XHRcdFx0XHR0aGlzLnBhdHRlcm4uZGlzYWJsZUZvbGRlck5vdGUgPSB2YWx1ZTtcclxuXHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKHRydWUpO1xyXG5cdFx0XHRcdFx0XHR0aGlzLmRpc3BsYXkoKTtcclxuXHRcdFx0XHRcdH0pXHJcblx0XHRcdCk7XHJcblxyXG5cdFx0aWYgKCF0aGlzLnBhdHRlcm4uZGlzYWJsZUZvbGRlck5vdGUpIHtcclxuXHRcdFx0bmV3IFNldHRpbmcoY29udGVudEVsKVxyXG5cdFx0XHRcdC5zZXROYW1lKCdDb2xsYXBzZSBmb2xkZXIgd2hlbiBvcGVuaW5nIGZvbGRlciBub3RlJylcclxuXHRcdFx0XHQuc2V0RGVzYygnQ2hvb3NlIGlmIHRoZSBmb2xkZXIgc2hvdWxkIGJlIGNvbGxhcHNlZCB3aGVuIHRoZSBmb2xkZXIgbm90ZSBpcyBvcGVuZWQnKVxyXG5cdFx0XHRcdC5hZGRUb2dnbGUoKHRvZ2dsZSkgPT5cclxuXHRcdFx0XHRcdHRvZ2dsZVxyXG5cdFx0XHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wYXR0ZXJuLmVuYWJsZUNvbGxhcHNpbmcpXHJcblx0XHRcdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuXHRcdFx0XHRcdFx0XHR0aGlzLnBhdHRlcm4uZW5hYmxlQ29sbGFwc2luZyA9IHZhbHVlO1xyXG5cdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHRcdFx0XHR9KVxyXG5cdFx0XHRcdCk7XHJcblx0XHR9XHJcblxyXG5cdH1cclxuXHRvbkNsb3NlKCkge1xyXG5cdFx0Y29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XHJcblx0XHRjb250ZW50RWwuZW1wdHkoKTtcclxuXHR9XHJcbn1cclxuIiwgImltcG9ydCBGb2xkZXJOb3Rlc1BsdWdpbiBmcm9tICcuLi9tYWluJztcclxuZXhwb3J0IGNsYXNzIFdoaXRlbGlzdGVkUGF0dGVybiB7XHJcblx0dHlwZTogc3RyaW5nO1xyXG5cdGlkOiBzdHJpbmc7XHJcblx0c3RyaW5nOiBzdHJpbmc7XHJcblx0cGF0aDogc3RyaW5nO1xyXG5cdHBvc2l0aW9uOiBudW1iZXI7XHJcblx0c3ViRm9sZGVyczogYm9vbGVhbjtcclxuXHRlbmFibGVTeW5jOiBib29sZWFuO1xyXG5cdGVuYWJsZUF1dG9DcmVhdGU6IGJvb2xlYW47XHJcblx0ZW5hYmxlRm9sZGVyTm90ZTogYm9vbGVhbjtcclxuXHRlbmFibGVDb2xsYXBzaW5nOiBib29sZWFuO1xyXG5cdHNob3dJbkZvbGRlck92ZXJ2aWV3OiBib29sZWFuO1xyXG4gICAgaGlkZUluU2V0dGluZ3M6IGJvb2xlYW47XHJcblx0Y29uc3RydWN0b3IocGF0dGVybjogc3RyaW5nLCBwb3NpdGlvbjogbnVtYmVyLCBpZDogc3RyaW5nIHwgdW5kZWZpbmVkLCBwbHVnaW46IEZvbGRlck5vdGVzUGx1Z2luKSB7XHJcblx0XHR0aGlzLnR5cGUgPSAncGF0dGVybic7XHJcblx0XHR0aGlzLmlkID0gaWQgfHwgY3J5cHRvLnJhbmRvbVVVSUQoKTtcclxuXHRcdHRoaXMuc3ViRm9sZGVycyA9IHBsdWdpbi5zZXR0aW5ncy5leGNsdWRlUGF0dGVybkRlZmF1bHRTZXR0aW5ncy5zdWJGb2xkZXJzO1xyXG5cdFx0dGhpcy5wb3NpdGlvbiA9IHBvc2l0aW9uO1xyXG5cdFx0dGhpcy5zdHJpbmcgPSBwYXR0ZXJuO1xyXG5cdFx0dGhpcy5wYXRoID0gJyc7XHJcblx0fVxyXG59IiwgImltcG9ydCBGb2xkZXJOb3Rlc1BsdWdpbiBmcm9tICcuLi8uLi9tYWluJztcclxuaW1wb3J0IHsgZ2V0Rm9sZGVyTmFtZUZyb21QYXRoU3RyaW5nLCBnZXRGb2xkZXJQYXRoRnJvbVN0cmluZyB9IGZyb20gJy4uLy4uL2Z1bmN0aW9ucy91dGlscyc7XHJcbmltcG9ydCB7IFdoaXRlbGlzdGVkRm9sZGVyIH0gZnJvbSAnLi4vV2hpdGVsaXN0Rm9sZGVyJztcclxuaW1wb3J0IHsgV2hpdGVsaXN0ZWRQYXR0ZXJuIH0gZnJvbSAnLi4vV2hpdGVsaXN0UGF0dGVybic7XHJcbmltcG9ydCB7IFNldHRpbmcsIFBsYXRmb3JtLCBCdXR0b25Db21wb25lbnQgfSBmcm9tICdvYnNpZGlhbic7XHJcbmltcG9ydCB7IEZvbGRlclN1Z2dlc3QgfSBmcm9tICcuLi8uLi9zdWdnZXN0ZXJzL0ZvbGRlclN1Z2dlc3Rlcic7XHJcbmltcG9ydCB7IFNldHRpbmdzVGFiIH0gZnJvbSAnLi4vLi4vc2V0dGluZ3MvU2V0dGluZ3NUYWInO1xyXG5pbXBvcnQgV2hpdGVsaXN0ZWRlZEZvbGRlcnNTZXR0aW5ncyBmcm9tICcuLi9tb2RhbHMvV2hpdGVsaXN0ZWRGb2xkZXJzU2V0dGluZ3MnO1xyXG5pbXBvcnQgV2hpdGVsaXN0Rm9sZGVyU2V0dGluZ3MgZnJvbSAnLi4vbW9kYWxzL1doaXRlbGlzdEZvbGRlclNldHRpbmdzJztcclxuaW1wb3J0IHsgdXBkYXRlV2hpdGVsaXN0ZWRQYXR0ZXJuLCBnZXRXaGl0ZWxpc3RlZEZvbGRlcnNCeVBhdHRlcm4sIGFkZFdoaXRlbGlzdGVkUGF0dGVybkxpc3RJdGVtIH0gZnJvbSAnLi93aGl0ZWxpc3RQYXR0ZXJuRnVuY3Rpb25zJztcclxuUGxhdGZvcm0uaXNNb2JpbGVBcHBcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRXaGl0ZWxpc3RlZEZvbGRlcihwbHVnaW46IEZvbGRlck5vdGVzUGx1Z2luLCBwYXRoOiBzdHJpbmcpIHtcclxuXHRsZXQgd2hpdGVsaXN0ZWRGb2xkZXIgPSB7fSBhcyBXaGl0ZWxpc3RlZEZvbGRlciB8IFdoaXRlbGlzdGVkUGF0dGVybiB8IHVuZGVmaW5lZDtcclxuXHRjb25zdCBmb2xkZXJOYW1lID0gZ2V0Rm9sZGVyTmFtZUZyb21QYXRoU3RyaW5nKHBhdGgpO1xyXG5cdGNvbnN0IG1hdGNoZWRQYXR0ZXJucyA9IGdldFdoaXRlbGlzdGVkRm9sZGVyc0J5UGF0dGVybihwbHVnaW4sIGZvbGRlck5hbWUpO1xyXG5cdGNvbnN0IHdoaXRlbGlzdGVkRm9sZGVycyA9IGdldFdoaXRlbGlzdGVkRm9sZGVyc0J5UGF0aChwbHVnaW4sIHBhdGgpO1xyXG5cdGNvbnN0IGNvbWJpbmVkV2hpdGVsaXN0ZWRGb2xkZXJzID0gWy4uLm1hdGNoZWRQYXR0ZXJucywgLi4ud2hpdGVsaXN0ZWRGb2xkZXJzXTtcclxuXHRjb25zdCBwcm9wZXJ0aWVzVG9Db3B5OiAoa2V5b2YgV2hpdGVsaXN0ZWRGb2xkZXIpW10gPSBbXHJcblx0XHQnZW5hYmxlQXV0b0NyZWF0ZScsXHJcblx0XHQnZW5hYmxlRm9sZGVyTm90ZScsXHJcblx0XHQnZW5hYmxlU3luYycsXHJcblx0XHQnc2hvd0luRm9sZGVyT3ZlcnZpZXcnXHJcblx0XTtcclxuXHJcblx0aWYgKGNvbWJpbmVkV2hpdGVsaXN0ZWRGb2xkZXJzLmxlbmd0aCA+IDApIHtcclxuXHRcdGZvciAoY29uc3QgbWF0Y2hlZEZvbGRlciBvZiBjb21iaW5lZFdoaXRlbGlzdGVkRm9sZGVycykge1xyXG5cdFx0XHRwcm9wZXJ0aWVzVG9Db3B5LmZvckVhY2gocHJvcGVydHkgPT4ge1xyXG5cdFx0XHRcdGlmIChtYXRjaGVkRm9sZGVyW3Byb3BlcnR5XSA9PT0gdHJ1ZSkge1xyXG5cdFx0XHRcdFx0KHdoaXRlbGlzdGVkRm9sZGVyIGFzIGFueSlbcHJvcGVydHldID0gdHJ1ZTtcclxuXHRcdFx0XHR9IGVsc2UgaWYgKCFtYXRjaGVkRm9sZGVyW3Byb3BlcnR5XSkge1xyXG5cdFx0XHRcdFx0KHdoaXRlbGlzdGVkRm9sZGVyIGFzIGFueSlbcHJvcGVydHldID0gZmFsc2U7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9KTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdGlmICgod2hpdGVsaXN0ZWRGb2xkZXIgaW5zdGFuY2VvZiBPYmplY3QpICYmIE9iamVjdC5rZXlzKHdoaXRlbGlzdGVkRm9sZGVyKS5sZW5ndGggPT09IDApIHsgd2hpdGVsaXN0ZWRGb2xkZXIgPSB1bmRlZmluZWQ7IH1cclxuXHJcblx0cmV0dXJuIHdoaXRlbGlzdGVkRm9sZGVyO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZ2V0V2hpdGVsaXN0ZWRGb2xkZXJCeVBhdGgocGx1Z2luOiBGb2xkZXJOb3Rlc1BsdWdpbiwgcGF0aDogc3RyaW5nKSB7XHJcblx0cmV0dXJuIHBsdWdpbi5zZXR0aW5ncy53aGl0ZWxpc3RGb2xkZXJzLmZpbmQoKHdoaXRlbGlzdGVkRm9sZGVyKSA9PiB7XHJcblx0XHRpZiAod2hpdGVsaXN0ZWRGb2xkZXIucGF0aCA9PT0gcGF0aCkgeyByZXR1cm4gdHJ1ZTsgfVxyXG5cdFx0aWYgKCF3aGl0ZWxpc3RlZEZvbGRlci5zdWJGb2xkZXJzKSB7IHJldHVybiBmYWxzZTsgfVxyXG5cdFx0cmV0dXJuIGdldEZvbGRlclBhdGhGcm9tU3RyaW5nKHBhdGgpLnN0YXJ0c1dpdGgod2hpdGVsaXN0ZWRGb2xkZXIucGF0aCk7XHJcblx0fSk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRXaGl0ZWxpc3RlZEZvbGRlcnNCeVBhdGgocGx1Z2luOiBGb2xkZXJOb3Rlc1BsdWdpbiwgcGF0aDogc3RyaW5nKSB7XHJcblx0cmV0dXJuIHBsdWdpbi5zZXR0aW5ncy53aGl0ZWxpc3RGb2xkZXJzLmZpbHRlcigod2hpdGVsaXN0ZWRGb2xkZXIpID0+IHtcclxuXHRcdGlmICh3aGl0ZWxpc3RlZEZvbGRlci5wYXRoID09PSBwYXRoKSB7IHJldHVybiB0cnVlOyB9XHJcblx0XHRpZiAoIXdoaXRlbGlzdGVkRm9sZGVyLnN1YkZvbGRlcnMpIHsgcmV0dXJuIGZhbHNlOyB9XHJcblx0XHRyZXR1cm4gZ2V0Rm9sZGVyUGF0aEZyb21TdHJpbmcocGF0aCkuc3RhcnRzV2l0aCh3aGl0ZWxpc3RlZEZvbGRlci5wYXRoKTtcclxuXHR9KTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGFkZFdoaXRlbGlzdGVkRm9sZGVyKHBsdWdpbjogRm9sZGVyTm90ZXNQbHVnaW4sIHdoaXRlbGlzdGVkRm9sZGVyOiBXaGl0ZWxpc3RlZEZvbGRlcikge1xyXG5cdHBsdWdpbi5zZXR0aW5ncy53aGl0ZWxpc3RGb2xkZXJzLnB1c2god2hpdGVsaXN0ZWRGb2xkZXIpO1xyXG5cdHBsdWdpbi5zYXZlU2V0dGluZ3ModHJ1ZSk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBkZWxldGVXaGl0ZWxpc3RlZEZvbGRlcihwbHVnaW46IEZvbGRlck5vdGVzUGx1Z2luLCB3aGl0ZWxpc3RlZEZvbGRlcjogV2hpdGVsaXN0ZWRGb2xkZXIpIHtcclxuXHRwbHVnaW4uc2V0dGluZ3Mud2hpdGVsaXN0Rm9sZGVycyA9IHBsdWdpbi5zZXR0aW5ncy53aGl0ZWxpc3RGb2xkZXJzLmZpbHRlcigoZm9sZGVyKSA9PiBmb2xkZXIuaWQgIT09IHdoaXRlbGlzdGVkRm9sZGVyLmlkIHx8IGZvbGRlci50eXBlID09PSAncGF0dGVybicpO1xyXG5cdHBsdWdpbi5zYXZlU2V0dGluZ3ModHJ1ZSk7XHJcblx0cmVzeW5jQXJyYXkocGx1Z2luKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHVwZGF0ZVdoaXRlbGlzdGVkRm9sZGVyKHBsdWdpbjogRm9sZGVyTm90ZXNQbHVnaW4sIHdoaXRlbGlzdGVkRm9sZGVyOiBXaGl0ZWxpc3RlZEZvbGRlciwgbmV3V2hpdGVsaXN0Rm9sZGVyOiBXaGl0ZWxpc3RlZEZvbGRlcikge1xyXG5cdHBsdWdpbi5zZXR0aW5ncy53aGl0ZWxpc3RGb2xkZXJzID0gcGx1Z2luLnNldHRpbmdzLndoaXRlbGlzdEZvbGRlcnMuZmlsdGVyKChmb2xkZXIpID0+IGZvbGRlci5pZCAhPT0gd2hpdGVsaXN0ZWRGb2xkZXIuaWQpO1xyXG5cdGFkZFdoaXRlbGlzdGVkRm9sZGVyKHBsdWdpbiwgbmV3V2hpdGVsaXN0Rm9sZGVyKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHJlc3luY0FycmF5KHBsdWdpbjogRm9sZGVyTm90ZXNQbHVnaW4pIHtcclxuXHRwbHVnaW4uc2V0dGluZ3Mud2hpdGVsaXN0Rm9sZGVycyA9IHBsdWdpbi5zZXR0aW5ncy53aGl0ZWxpc3RGb2xkZXJzLnNvcnQoKGEsIGIpID0+IGEucG9zaXRpb24gLSBiLnBvc2l0aW9uKTtcclxuXHRwbHVnaW4uc2V0dGluZ3Mud2hpdGVsaXN0Rm9sZGVycy5mb3JFYWNoKChmb2xkZXIsIGluZGV4KSA9PiB7XHJcblx0XHRmb2xkZXIucG9zaXRpb24gPSBpbmRleDtcclxuXHR9KTtcclxuXHRwbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbn1cclxuXHJcblxyXG5leHBvcnQgZnVuY3Rpb24gYWRkV2hpdGVsaXN0Rm9sZGVyTGlzdEl0ZW0oc2V0dGluZ3M6IFNldHRpbmdzVGFiLCBjb250YWluZXJFbDogSFRNTEVsZW1lbnQsIHdoaXRlbGlzdGVkRm9sZGVyOiBXaGl0ZWxpc3RlZEZvbGRlcikge1xyXG5cdGNvbnN0IHBsdWdpbjogRm9sZGVyTm90ZXNQbHVnaW4gPSBzZXR0aW5ncy5wbHVnaW47XHJcblx0Y29uc3Qgc2V0dGluZyA9IG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKTtcclxuXHRzZXR0aW5nLnNldENsYXNzKCdmbi1leGNsdWRlLWZvbGRlci1saXN0Jyk7XHJcblxyXG5cdGNvbnN0IGlucHV0Q29udGFpbmVyID0gc2V0dGluZy5zZXR0aW5nRWwuY3JlYXRlRGl2KHsgY2xzOiAnZm4td2hpdGVsaXN0LWZvbGRlci1pbnB1dC1jb250YWluZXInIH0pO1xyXG5cdGNvbnN0IFNlYXJjaENvbXBvbmVudCA9IG5ldyBTZXR0aW5nKGlucHV0Q29udGFpbmVyKVxyXG5cdFNlYXJjaENvbXBvbmVudC5hZGRTZWFyY2goKGNiKSA9PiB7XHJcblx0XHRuZXcgRm9sZGVyU3VnZ2VzdChcclxuXHRcdFx0Y2IuaW5wdXRFbCxcclxuXHRcdFx0cGx1Z2luLFxyXG5cdFx0XHR0cnVlXHJcblx0XHQpO1xyXG5cdFx0Ly8gQHRzLWlnbm9yZVxyXG5cdFx0Y2IuY29udGFpbmVyRWwuYWRkQ2xhc3MoJ2ZuLWV4Y2x1ZGUtZm9sZGVyLXBhdGgnKTtcclxuXHRcdGNiLnNldFBsYWNlaG9sZGVyKCdGb2xkZXIgcGF0aCcpO1xyXG5cdFx0Y2Iuc2V0VmFsdWUod2hpdGVsaXN0ZWRGb2xkZXIucGF0aCk7XHJcblx0XHRjYi5vbkNoYW5nZSgodmFsdWUpID0+IHtcclxuXHRcdFx0aWYgKHZhbHVlLnN0YXJ0c1dpdGgoJ3tyZWdleH0nKSB8fCB2YWx1ZS5pbmNsdWRlcygnKicpKSB7XHJcblx0XHRcdFx0ZGVsZXRlV2hpdGVsaXN0ZWRGb2xkZXIocGx1Z2luLCB3aGl0ZWxpc3RlZEZvbGRlcik7XHJcblx0XHRcdFx0Y29uc3QgcGF0dGVybiA9IG5ldyBXaGl0ZWxpc3RlZFBhdHRlcm4odmFsdWUsIHBsdWdpbi5zZXR0aW5ncy53aGl0ZWxpc3RGb2xkZXJzLmxlbmd0aCwgdW5kZWZpbmVkLCBwbHVnaW4pO1xyXG5cdFx0XHRcdGFkZFdoaXRlbGlzdGVkRm9sZGVyKHBsdWdpbiwgcGF0dGVybik7XHJcblx0XHRcdFx0YWRkV2hpdGVsaXN0ZWRQYXR0ZXJuTGlzdEl0ZW0oc2V0dGluZ3MsIGNvbnRhaW5lckVsLCBwYXR0ZXJuKTtcclxuXHRcdFx0XHRzZXR0aW5nLmNsZWFyKCk7XHJcblx0XHRcdFx0c2V0dGluZy5zZXR0aW5nRWwucmVtb3ZlKCk7XHJcblx0XHRcdH1cclxuXHRcdFx0aWYgKCFwbHVnaW4uYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aCh2YWx1ZSkpIHJldHVybjtcclxuXHRcdFx0d2hpdGVsaXN0ZWRGb2xkZXIucGF0aCA9IHZhbHVlO1xyXG5cdFx0XHR1cGRhdGVXaGl0ZWxpc3RlZEZvbGRlcihwbHVnaW4sIHdoaXRlbGlzdGVkRm9sZGVyLCB3aGl0ZWxpc3RlZEZvbGRlcik7XHJcblx0XHR9KTtcclxuXHR9KTtcclxuXHRjb25zdCBidXR0b25Db250YWluZXIgPSBzZXR0aW5nLnNldHRpbmdFbC5jcmVhdGVEaXYoeyBjbHM6ICdmbi13aGl0ZWxpc3QtZm9sZGVyLWJ1dHRvbnMnIH0pO1xyXG5cclxuXHRuZXcgQnV0dG9uQ29tcG9uZW50KGJ1dHRvbkNvbnRhaW5lcilcclxuXHRcdC5zZXRJY29uKCdlZGl0JylcclxuXHRcdC5zZXRUb29sdGlwKCdFZGl0IGZvbGRlciBub3RlJylcclxuXHRcdC5vbkNsaWNrKCgpID0+IHtcclxuXHRcdFx0bmV3IFdoaXRlbGlzdEZvbGRlclNldHRpbmdzKHBsdWdpbi5hcHAsIHBsdWdpbiwgd2hpdGVsaXN0ZWRGb2xkZXIpLm9wZW4oKTtcclxuXHRcdH0pO1xyXG5cclxuXHRuZXcgQnV0dG9uQ29tcG9uZW50KGJ1dHRvbkNvbnRhaW5lcilcclxuXHRcdC5zZXRJY29uKCd1cC1jaGV2cm9uLWdseXBoJylcclxuXHRcdC5zZXRUb29sdGlwKCdNb3ZlIHVwJylcclxuXHRcdC5vbkNsaWNrKCgpID0+IHtcclxuXHRcdFx0aWYgKHdoaXRlbGlzdGVkRm9sZGVyLnBvc2l0aW9uID09PSAwKSB7IHJldHVybjsgfVxyXG5cdFx0XHR3aGl0ZWxpc3RlZEZvbGRlci5wb3NpdGlvbiAtPSAxO1xyXG5cdFx0XHR1cGRhdGVXaGl0ZWxpc3RlZEZvbGRlcihwbHVnaW4sIHdoaXRlbGlzdGVkRm9sZGVyLCB3aGl0ZWxpc3RlZEZvbGRlcik7XHJcblx0XHRcdGNvbnN0IG9sZFdoaXRlbGlzdGVkRm9sZGVyID0gcGx1Z2luLnNldHRpbmdzLndoaXRlbGlzdEZvbGRlcnMuZmluZCgoZm9sZGVyKSA9PiBmb2xkZXIucG9zaXRpb24gPT09IHdoaXRlbGlzdGVkRm9sZGVyLnBvc2l0aW9uKTtcclxuXHRcdFx0aWYgKG9sZFdoaXRlbGlzdGVkRm9sZGVyKSB7XHJcblx0XHRcdFx0b2xkV2hpdGVsaXN0ZWRGb2xkZXIucG9zaXRpb24gKz0gMTtcclxuXHRcdFx0XHRpZiAob2xkV2hpdGVsaXN0ZWRGb2xkZXIudHlwZSA9PT0gJ3BhdHRlcm4nKSB7XHJcblx0XHRcdFx0XHR1cGRhdGVXaGl0ZWxpc3RlZFBhdHRlcm4ocGx1Z2luLCBvbGRXaGl0ZWxpc3RlZEZvbGRlciwgb2xkV2hpdGVsaXN0ZWRGb2xkZXIpO1xyXG5cdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHR1cGRhdGVXaGl0ZWxpc3RlZEZvbGRlcihwbHVnaW4sIG9sZFdoaXRlbGlzdGVkRm9sZGVyLCBvbGRXaGl0ZWxpc3RlZEZvbGRlcik7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHRcdHNldHRpbmdzLmRpc3BsYXkoKTtcclxuXHRcdH0pO1xyXG5cclxuXHRuZXcgQnV0dG9uQ29tcG9uZW50KGJ1dHRvbkNvbnRhaW5lcilcclxuXHRcdC5zZXRJY29uKCdkb3duLWNoZXZyb24tZ2x5cGgnKVxyXG5cdFx0LnNldFRvb2x0aXAoJ01vdmUgZG93bicpXHJcblx0XHQub25DbGljaygoKSA9PiB7XHJcblx0XHRcdGlmICh3aGl0ZWxpc3RlZEZvbGRlci5wb3NpdGlvbiA9PT0gcGx1Z2luLnNldHRpbmdzLndoaXRlbGlzdEZvbGRlcnMubGVuZ3RoIC0gMSkge1xyXG5cdFx0XHRcdHJldHVybjtcclxuXHRcdFx0fVxyXG5cdFx0XHR3aGl0ZWxpc3RlZEZvbGRlci5wb3NpdGlvbiArPSAxO1xyXG5cclxuXHRcdFx0dXBkYXRlV2hpdGVsaXN0ZWRGb2xkZXIocGx1Z2luLCB3aGl0ZWxpc3RlZEZvbGRlciwgd2hpdGVsaXN0ZWRGb2xkZXIpO1xyXG5cdFx0XHRjb25zdCBvbGRXaGl0ZWxpc3RlZEZvbGRlciA9IHBsdWdpbi5zZXR0aW5ncy53aGl0ZWxpc3RGb2xkZXJzLmZpbmQoKGZvbGRlcikgPT4gZm9sZGVyLnBvc2l0aW9uID09PSB3aGl0ZWxpc3RlZEZvbGRlci5wb3NpdGlvbik7XHJcblx0XHRcdGlmIChvbGRXaGl0ZWxpc3RlZEZvbGRlcikge1xyXG5cdFx0XHRcdG9sZFdoaXRlbGlzdGVkRm9sZGVyLnBvc2l0aW9uIC09IDE7XHJcblx0XHRcdFx0aWYgKG9sZFdoaXRlbGlzdGVkRm9sZGVyLnR5cGUgPT09ICdwYXR0ZXJuJykge1xyXG5cdFx0XHRcdFx0dXBkYXRlV2hpdGVsaXN0ZWRQYXR0ZXJuKHBsdWdpbiwgb2xkV2hpdGVsaXN0ZWRGb2xkZXIsIG9sZFdoaXRlbGlzdGVkRm9sZGVyKTtcclxuXHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0dXBkYXRlV2hpdGVsaXN0ZWRGb2xkZXIocGx1Z2luLCBvbGRXaGl0ZWxpc3RlZEZvbGRlciwgb2xkV2hpdGVsaXN0ZWRGb2xkZXIpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0c2V0dGluZ3MuZGlzcGxheSgpO1xyXG5cdFx0fSk7XHJcblxyXG5cdG5ldyBCdXR0b25Db21wb25lbnQoYnV0dG9uQ29udGFpbmVyKVxyXG5cdFx0LnNldEljb24oJ3RyYXNoLTInKVxyXG5cdFx0LnNldFRvb2x0aXAoJ0RlbGV0ZSBleGNsdWRlZCBmb2xkZXInKVxyXG5cdFx0Lm9uQ2xpY2soKCkgPT4ge1xyXG5cdFx0XHRkZWxldGVXaGl0ZWxpc3RlZEZvbGRlcihwbHVnaW4sIHdoaXRlbGlzdGVkRm9sZGVyKTtcclxuXHRcdFx0c2V0dGluZy5jbGVhcigpO1xyXG5cdFx0XHRzZXR0aW5nLnNldHRpbmdFbC5yZW1vdmUoKTtcclxuXHRcdH0pO1xyXG59XHJcbiIsICJpbXBvcnQgeyBBcHAsIE1vZGFsLCBTZXR0aW5nIH0gZnJvbSAnb2JzaWRpYW4nO1xyXG5pbXBvcnQgRm9sZGVyTm90ZXNQbHVnaW4gZnJvbSAnLi4vLi4vbWFpbic7XHJcbmltcG9ydCB7IFdoaXRlbGlzdGVkRm9sZGVyIH0gZnJvbSAnLi4vV2hpdGVsaXN0Rm9sZGVyJztcclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgV2hpdGVsaXN0Rm9sZGVyU2V0dGluZ3MgZXh0ZW5kcyBNb2RhbCB7XHJcblx0cGx1Z2luOiBGb2xkZXJOb3Rlc1BsdWdpbjtcclxuXHRhcHA6IEFwcDtcclxuXHR3aGl0ZWxpc3RlZEZvbGRlcjogV2hpdGVsaXN0ZWRGb2xkZXI7XHJcblx0Y29uc3RydWN0b3IoYXBwOiBBcHAsIHBsdWdpbjogRm9sZGVyTm90ZXNQbHVnaW4sIHdoaXRlbGlzdGVkRm9sZGVyOiBXaGl0ZWxpc3RlZEZvbGRlcikge1xyXG5cdFx0c3VwZXIoYXBwKTtcclxuXHRcdHRoaXMucGx1Z2luID0gcGx1Z2luO1xyXG5cdFx0dGhpcy5hcHAgPSBhcHA7XHJcblx0XHR0aGlzLndoaXRlbGlzdGVkRm9sZGVyID0gd2hpdGVsaXN0ZWRGb2xkZXI7XHJcblx0fVxyXG5cdG9uT3BlbigpIHtcclxuXHRcdHRoaXMuZGlzcGxheSgpO1xyXG5cdH1cclxuXHRkaXNwbGF5KCkge1xyXG5cdFx0Y29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XHJcblx0XHRjb250ZW50RWwuZW1wdHkoKTtcclxuXHRcdGNvbnRlbnRFbC5jcmVhdGVFbCgnaDInLCB7IHRleHQ6ICdXaGl0ZWxpc3RlZCBmb2xkZXIgc2V0dGluZ3MnIH0pO1xyXG5cdFx0bmV3IFNldHRpbmcoY29udGVudEVsKVxyXG5cdFx0XHQuc2V0TmFtZSgnSW5jbHVkZSBzdWJmb2xkZXJzJylcclxuXHRcdFx0LnNldERlc2MoJ0Nob29zZSBpZiB0aGUgc3ViZm9sZGVycyBvZiB0aGUgZm9sZGVyIHNob3VsZCBhbHNvIGJlIHdoaXRlbGlzdGVkJylcclxuXHRcdFx0LmFkZFRvZ2dsZSgodG9nZ2xlKSA9PlxyXG5cdFx0XHRcdHRvZ2dsZVxyXG5cdFx0XHRcdFx0LnNldFZhbHVlKHRoaXMud2hpdGVsaXN0ZWRGb2xkZXIuc3ViRm9sZGVycylcclxuXHRcdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuXHRcdFx0XHRcdFx0dGhpcy53aGl0ZWxpc3RlZEZvbGRlci5zdWJGb2xkZXJzID0gdmFsdWU7XHJcblx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncyh0cnVlKTtcclxuXHRcdFx0XHRcdH0pXHJcblx0XHRcdCk7XHJcblxyXG5cdFx0bmV3IFNldHRpbmcoY29udGVudEVsKVxyXG5cdFx0XHQuc2V0TmFtZSgnRW5hYmxlIGZvbGRlciBuYW1lIHN5bmMnKVxyXG5cdFx0XHQuc2V0RGVzYygnQ2hvb3NlIGlmIHRoZSBuYW1lIG9mIGEgZm9sZGVyIG5vdGUgc2hvdWxkIGJlIHJlbmFtZWQgd2hlbiB0aGUgZm9sZGVyIG5hbWUgaXMgY2hhbmdlZCcpXHJcblx0XHRcdC5hZGRUb2dnbGUoKHRvZ2dsZSkgPT5cclxuXHRcdFx0XHR0b2dnbGVcclxuXHRcdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLndoaXRlbGlzdGVkRm9sZGVyLmVuYWJsZVN5bmMpXHJcblx0XHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcblx0XHRcdFx0XHRcdHRoaXMud2hpdGVsaXN0ZWRGb2xkZXIuZW5hYmxlU3luYyA9IHZhbHVlO1xyXG5cdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0XHRcdH0pXHJcblx0XHRcdCk7XHJcblxyXG5cdFx0bmV3IFNldHRpbmcoY29udGVudEVsKVxyXG5cdFx0XHQuc2V0TmFtZSgnU2hvdyBmb2xkZXIgaW4gZm9sZGVyIG92ZXJ2aWV3JylcclxuXHRcdFx0LnNldERlc2MoJ0Nob29zZSBpZiB0aGUgZm9sZGVyIHNob3VsZCBiZSBzaG93biBpbiB0aGUgZm9sZGVyIG92ZXJ2aWV3JylcclxuXHRcdFx0LmFkZFRvZ2dsZSgodG9nZ2xlKSA9PlxyXG5cdFx0XHRcdHRvZ2dsZVxyXG5cdFx0XHRcdFx0LnNldFZhbHVlKHRoaXMud2hpdGVsaXN0ZWRGb2xkZXIuc2hvd0luRm9sZGVyT3ZlcnZpZXcpXHJcblx0XHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcblx0XHRcdFx0XHRcdHRoaXMud2hpdGVsaXN0ZWRGb2xkZXIuc2hvd0luRm9sZGVyT3ZlcnZpZXcgPSB2YWx1ZTtcclxuXHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0XHR9KVxyXG5cdFx0XHQpO1xyXG5cclxuXHRcdG5ldyBTZXR0aW5nKGNvbnRlbnRFbClcclxuXHRcdFx0LnNldE5hbWUoJ0FsbG93IGF1dG8gY3JlYXRpb24gb2YgZm9sZGVyIG5vdGVzIGluIHRoaXMgZm9sZGVyJylcclxuXHRcdFx0LmFkZFRvZ2dsZSgodG9nZ2xlKSA9PlxyXG5cdFx0XHRcdHRvZ2dsZVxyXG5cdFx0XHRcdFx0LnNldFZhbHVlKHRoaXMud2hpdGVsaXN0ZWRGb2xkZXIuZW5hYmxlQXV0b0NyZWF0ZSlcclxuXHRcdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuXHRcdFx0XHRcdFx0dGhpcy53aGl0ZWxpc3RlZEZvbGRlci5lbmFibGVBdXRvQ3JlYXRlID0gdmFsdWU7XHJcblx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHRcdFx0fSlcclxuXHRcdFx0KTtcclxuXHJcblxyXG5cdFx0bmV3IFNldHRpbmcoY29udGVudEVsKVxyXG5cdFx0XHQuc2V0TmFtZSgnT3BlbiBmb2xkZXIgbm90ZSB3aGVuIGNsaWNraW5nIG9uIHRoZSBmb2xkZXInKVxyXG5cdFx0XHQuc2V0RGVzYygnQ2hvb3NlIGlmIHRoZSBmb2xkZXIgbm90ZSBzaG91bGQgYmUgb3BlbmVkIHdoZW4gdGhlIGZvbGRlciBpcyBvcGVuZWQnKVxyXG5cdFx0XHQuYWRkVG9nZ2xlKCh0b2dnbGUpID0+XHJcblx0XHRcdFx0dG9nZ2xlXHJcblx0XHRcdFx0XHQuc2V0VmFsdWUodGhpcy53aGl0ZWxpc3RlZEZvbGRlci5lbmFibGVGb2xkZXJOb3RlKVxyXG5cdFx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG5cdFx0XHRcdFx0XHR0aGlzLndoaXRlbGlzdGVkRm9sZGVyLmVuYWJsZUZvbGRlck5vdGUgPSB2YWx1ZTtcclxuXHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKHRydWUpO1xyXG5cdFx0XHRcdFx0XHR0aGlzLmRpc3BsYXkoKTtcclxuXHRcdFx0XHRcdH0pXHJcblx0XHRcdCk7XHJcblxyXG5cdFx0aWYgKHRoaXMud2hpdGVsaXN0ZWRGb2xkZXIuZW5hYmxlRm9sZGVyTm90ZSkge1xyXG5cdFx0XHRuZXcgU2V0dGluZyhjb250ZW50RWwpXHJcblx0XHRcdFx0LnNldE5hbWUoJ0NvbGxhcHNlIGZvbGRlciB3aGVuIG9wZW5pbmcgZm9sZGVyIG5vdGUnKVxyXG5cdFx0XHRcdC5zZXREZXNjKCdDaG9vc2UgaWYgdGhlIGZvbGRlciBzaG91bGQgYmUgY29sbGFwc2VkIHdoZW4gdGhlIGZvbGRlciBub3RlIGlzIG9wZW5lZCcpXHJcblx0XHRcdFx0LmFkZFRvZ2dsZSgodG9nZ2xlKSA9PlxyXG5cdFx0XHRcdFx0dG9nZ2xlXHJcblx0XHRcdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLndoaXRlbGlzdGVkRm9sZGVyLmVuYWJsZUNvbGxhcHNpbmcpXHJcblx0XHRcdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuXHRcdFx0XHRcdFx0XHR0aGlzLndoaXRlbGlzdGVkRm9sZGVyLmVuYWJsZUNvbGxhcHNpbmcgPSB2YWx1ZTtcclxuXHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0XHRcdFx0fSlcclxuXHRcdFx0XHQpO1xyXG5cdFx0fVxyXG5cclxuXHR9XHJcblx0b25DbG9zZSgpIHtcclxuXHRcdGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xyXG5cdFx0Y29udGVudEVsLmVtcHR5KCk7XHJcblx0fVxyXG59XHJcbiIsICJpbXBvcnQgRm9sZGVyTm90ZXNQbHVnaW4gZnJvbSAnLi4vLi4vbWFpbic7XHJcbmltcG9ydCB7IFNldHRpbmcgfSBmcm9tICdvYnNpZGlhbic7XHJcbmltcG9ydCB7IFNldHRpbmdzVGFiIH0gZnJvbSAnLi4vLi4vc2V0dGluZ3MvU2V0dGluZ3NUYWInO1xyXG5pbXBvcnQgeyBhZGRFeGNsdWRlZEZvbGRlciwgcmVzeW5jQXJyYXksIHVwZGF0ZUV4Y2x1ZGVkRm9sZGVyIH0gZnJvbSAnLi9mb2xkZXJGdW5jdGlvbnMnO1xyXG5pbXBvcnQgV2hpdGVsaXN0UGF0dGVyblNldHRpbmdzIGZyb20gJy4uL21vZGFscy9XaGl0ZWxpc3RQYXR0ZXJuU2V0dGluZ3MnO1xyXG5pbXBvcnQgeyBXaGl0ZWxpc3RlZFBhdHRlcm4gfSBmcm9tICcuLi9XaGl0ZWxpc3RQYXR0ZXJuJztcclxuaW1wb3J0IHsgYWRkV2hpdGVsaXN0ZWRGb2xkZXIsIHVwZGF0ZVdoaXRlbGlzdGVkRm9sZGVyIH0gZnJvbSAnLi93aGl0ZWxpc3RGb2xkZXJGdW5jdGlvbnMnO1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHVwZGF0ZVdoaXRlbGlzdGVkUGF0dGVybihwbHVnaW46IEZvbGRlck5vdGVzUGx1Z2luLCBwYXR0ZXJuOiBXaGl0ZWxpc3RlZFBhdHRlcm4sIG5ld1BhdHRlcm46IFdoaXRlbGlzdGVkUGF0dGVybikge1xyXG4gICAgcGx1Z2luLnNldHRpbmdzLndoaXRlbGlzdEZvbGRlcnMgPSBwbHVnaW4uc2V0dGluZ3Mud2hpdGVsaXN0Rm9sZGVycy5maWx0ZXIoKGZvbGRlcikgPT4gZm9sZGVyLmlkICE9PSBwYXR0ZXJuLmlkKTtcclxuICAgIGFkZFdoaXRlbGlzdGVkRm9sZGVyKHBsdWdpbiwgbmV3UGF0dGVybik7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBkZWxldGVQYXR0ZXJuKHBsdWdpbjogRm9sZGVyTm90ZXNQbHVnaW4sIHBhdHRlcm46IFdoaXRlbGlzdGVkUGF0dGVybikge1xyXG4gICAgcGx1Z2luLnNldHRpbmdzLndoaXRlbGlzdEZvbGRlcnMgPSBwbHVnaW4uc2V0dGluZ3Mud2hpdGVsaXN0Rm9sZGVycy5maWx0ZXIoKGZvbGRlcikgPT4gZm9sZGVyLmlkICE9PSBwYXR0ZXJuLmlkIHx8IGZvbGRlci50eXBlID09PSAnZm9sZGVyJyk7XHJcbiAgICBwbHVnaW4uc2F2ZVNldHRpbmdzKHRydWUpO1xyXG4gICAgcmVzeW5jQXJyYXkocGx1Z2luKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGdldFdoaXRlbGlzdGVkRm9sZGVyQnlQYXR0ZXJuKHBsdWdpbjogRm9sZGVyTm90ZXNQbHVnaW4sIGZvbGRlck5hbWU6IHN0cmluZykge1xyXG4gICAgcmV0dXJuIHBsdWdpbi5zZXR0aW5ncy53aGl0ZWxpc3RGb2xkZXJzLmZpbHRlcigocykgPT4gcy50eXBlID09ICdwYXR0ZXJuJykuZmluZCgocGF0dGVybikgPT4ge1xyXG4gICAgICAgIGlmICghcGF0dGVybi5zdHJpbmcpIHsgcmV0dXJuIGZhbHNlOyB9XHJcbiAgICAgICAgY29uc3Qgc3RyaW5nID0gcGF0dGVybi5zdHJpbmcudHJpbSgpO1xyXG4gICAgICAgIGlmICghc3RyaW5nLnN0YXJ0c1dpdGgoJ3tyZWdleH0nKSAmJiAhKHN0cmluZy5zdGFydHNXaXRoKCcqJykgfHwgc3RyaW5nLmVuZHNXaXRoKCcqJykpKSB7IHJldHVybiBmYWxzZTsgfVxyXG4gICAgICAgIGNvbnN0IHJlZ2V4ID0gc3RyaW5nLnJlcGxhY2UoJ3tyZWdleH0nLCAnJykudHJpbSgpO1xyXG4gICAgICAgIGlmIChzdHJpbmcuc3RhcnRzV2l0aCgne3JlZ2V4fScpICYmIHJlZ2V4ID09PSAnJykgeyByZXR1cm4gZmFsc2U7IH1cclxuICAgICAgICBpZiAocmVnZXggIT09IHVuZGVmaW5lZCAmJiBzdHJpbmcuc3RhcnRzV2l0aCgne3JlZ2V4fScpKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IG1hdGNoID0gbmV3IFJlZ0V4cChyZWdleCkuZXhlYyhmb2xkZXJOYW1lKTtcclxuICAgICAgICAgICAgaWYgKG1hdGNoKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSBpZiAoc3RyaW5nLnN0YXJ0c1dpdGgoJyonKSAmJiBzdHJpbmcuZW5kc1dpdGgoJyonKSkge1xyXG4gICAgICAgICAgICBpZiAoZm9sZGVyTmFtZS5pbmNsdWRlcyhzdHJpbmcuc2xpY2UoMSwgLTEpKSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2UgaWYgKHN0cmluZy5zdGFydHNXaXRoKCcqJykpIHtcclxuICAgICAgICAgICAgaWYgKGZvbGRlck5hbWUuZW5kc1dpdGgoc3RyaW5nLnNsaWNlKDEpKSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2UgaWYgKHN0cmluZy5lbmRzV2l0aCgnKicpKSB7XHJcbiAgICAgICAgICAgIGlmIChmb2xkZXJOYW1lLnN0YXJ0c1dpdGgoc3RyaW5nLnNsaWNlKDAsIC0xKSkpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRXaGl0ZWxpc3RlZEZvbGRlcnNCeVBhdHRlcm4ocGx1Z2luOiBGb2xkZXJOb3Rlc1BsdWdpbiwgZm9sZGVyTmFtZTogc3RyaW5nKSB7XHJcbiAgICByZXR1cm4gcGx1Z2luLnNldHRpbmdzLndoaXRlbGlzdEZvbGRlcnMuZmlsdGVyKChzKSA9PiBzLnR5cGUgPT0gJ3BhdHRlcm4nKS5maWx0ZXIoKHBhdHRlcm4pID0+IHtcclxuICAgICAgICBpZiAoIXBhdHRlcm4uc3RyaW5nKSB7IHJldHVybiBmYWxzZTsgfVxyXG4gICAgICAgIGNvbnN0IHN0cmluZyA9IHBhdHRlcm4uc3RyaW5nLnRyaW0oKTtcclxuICAgICAgICBpZiAoIXN0cmluZy5zdGFydHNXaXRoKCd7cmVnZXh9JykgJiYgIShzdHJpbmcuc3RhcnRzV2l0aCgnKicpIHx8IHN0cmluZy5lbmRzV2l0aCgnKicpKSkgeyByZXR1cm4gZmFsc2U7IH1cclxuICAgICAgICBjb25zdCByZWdleCA9IHN0cmluZy5yZXBsYWNlKCd7cmVnZXh9JywgJycpLnRyaW0oKTtcclxuICAgICAgICBpZiAoc3RyaW5nLnN0YXJ0c1dpdGgoJ3tyZWdleH0nKSAmJiByZWdleCA9PT0gJycpIHsgcmV0dXJuIGZhbHNlOyB9XHJcbiAgICAgICAgaWYgKHJlZ2V4ICE9PSB1bmRlZmluZWQgJiYgc3RyaW5nLnN0YXJ0c1dpdGgoJ3tyZWdleH0nKSkge1xyXG4gICAgICAgICAgICBjb25zdCBtYXRjaCA9IG5ldyBSZWdFeHAocmVnZXgpLmV4ZWMoZm9sZGVyTmFtZSk7XHJcbiAgICAgICAgICAgIGlmIChtYXRjaCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2UgaWYgKHN0cmluZy5zdGFydHNXaXRoKCcqJykgJiYgc3RyaW5nLmVuZHNXaXRoKCcqJykpIHtcclxuICAgICAgICAgICAgaWYgKGZvbGRlck5hbWUuaW5jbHVkZXMoc3RyaW5nLnNsaWNlKDEsIC0xKSkpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIGlmIChzdHJpbmcuc3RhcnRzV2l0aCgnKicpKSB7XHJcbiAgICAgICAgICAgIGlmIChmb2xkZXJOYW1lLmVuZHNXaXRoKHN0cmluZy5zbGljZSgxKSkpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIGlmIChzdHJpbmcuZW5kc1dpdGgoJyonKSkge1xyXG4gICAgICAgICAgICBpZiAoZm9sZGVyTmFtZS5zdGFydHNXaXRoKHN0cmluZy5zbGljZSgwLCAtMSkpKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gYWRkV2hpdGVsaXN0ZWRQYXR0ZXJuTGlzdEl0ZW0oc2V0dGluZ3M6IFNldHRpbmdzVGFiLCBjb250YWluZXJFbDogSFRNTEVsZW1lbnQsIHBhdHRlcm46IFdoaXRlbGlzdGVkUGF0dGVybikge1xyXG4gICAgY29uc3QgcGx1Z2luOiBGb2xkZXJOb3Rlc1BsdWdpbiA9IHNldHRpbmdzLnBsdWdpbjtcclxuICAgIGNvbnN0IHNldHRpbmcgPSBuZXcgU2V0dGluZyhjb250YWluZXJFbCk7XHJcbiAgICBzZXR0aW5nLnNldENsYXNzKCdmbi1leGNsdWRlLWZvbGRlci1saXN0Jyk7XHJcbiAgICBzZXR0aW5nLmFkZFNlYXJjaCgoY2IpID0+IHtcclxuICAgICAgICAvLyBAdHMtaWdub3JlXHJcbiAgICAgICAgY2IuY29udGFpbmVyRWwuYWRkQ2xhc3MoJ2ZuLWV4Y2x1ZGUtZm9sZGVyLXBhdGgnKTtcclxuICAgICAgICBjYi5zZXRQbGFjZWhvbGRlcignUGF0dGVybicpO1xyXG4gICAgICAgIGNiLnNldFZhbHVlKHBhdHRlcm4uc3RyaW5nKTtcclxuICAgICAgICBjYi5vbkNoYW5nZSgodmFsdWUpID0+IHtcclxuICAgICAgICAgICAgaWYgKHBsdWdpbi5zZXR0aW5ncy53aGl0ZWxpc3RGb2xkZXJzLmZpbmQoKGZvbGRlcikgPT4gZm9sZGVyLnN0cmluZyA9PT0gdmFsdWUpKSB7IHJldHVybjsgfVxyXG4gICAgICAgICAgICBwYXR0ZXJuLnN0cmluZyA9IHZhbHVlO1xyXG4gICAgICAgICAgICB1cGRhdGVXaGl0ZWxpc3RlZFBhdHRlcm4ocGx1Z2luLCBwYXR0ZXJuLCBwYXR0ZXJuKTtcclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG4gICAgc2V0dGluZy5hZGRCdXR0b24oKGNiKSA9PiB7XHJcbiAgICAgICAgY2Iuc2V0SWNvbignZWRpdCcpO1xyXG4gICAgICAgIGNiLnNldFRvb2x0aXAoJ0VkaXQgcGF0dGVybicpO1xyXG4gICAgICAgIGNiLm9uQ2xpY2soKCkgPT4ge1xyXG4gICAgICAgICAgICBuZXcgV2hpdGVsaXN0UGF0dGVyblNldHRpbmdzKHBsdWdpbi5hcHAsIHBsdWdpbiwgcGF0dGVybikub3BlbigpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgc2V0dGluZy5hZGRCdXR0b24oKGNiKSA9PiB7XHJcbiAgICAgICAgY2Iuc2V0SWNvbigndXAtY2hldnJvbi1nbHlwaCcpO1xyXG4gICAgICAgIGNiLnNldFRvb2x0aXAoJ01vdmUgdXAnKTtcclxuICAgICAgICBjYi5vbkNsaWNrKCgpID0+IHtcclxuICAgICAgICAgICAgaWYgKHBhdHRlcm4ucG9zaXRpb24gPT09IDApIHsgcmV0dXJuOyB9XHJcbiAgICAgICAgICAgIHBhdHRlcm4ucG9zaXRpb24gLT0gMTtcclxuICAgICAgICAgICAgdXBkYXRlV2hpdGVsaXN0ZWRQYXR0ZXJuKHBsdWdpbiwgcGF0dGVybiwgcGF0dGVybik7XHJcbiAgICAgICAgICAgIGNvbnN0IG9sZFBhdHRlcm4gPSBwbHVnaW4uc2V0dGluZ3Mud2hpdGVsaXN0Rm9sZGVycy5maW5kKChmb2xkZXIpID0+IGZvbGRlci5wb3NpdGlvbiA9PT0gcGF0dGVybi5wb3NpdGlvbik7XHJcbiAgICAgICAgICAgIGlmIChvbGRQYXR0ZXJuKSB7XHJcbiAgICAgICAgICAgICAgICBvbGRQYXR0ZXJuLnBvc2l0aW9uICs9IDE7XHJcbiAgICAgICAgICAgICAgICBpZiAob2xkUGF0dGVybi50eXBlID09PSAncGF0dGVybicpIHtcclxuICAgICAgICAgICAgICAgICAgICB1cGRhdGVXaGl0ZWxpc3RlZFBhdHRlcm4ocGx1Z2luLCBvbGRQYXR0ZXJuLCBvbGRQYXR0ZXJuKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdXBkYXRlV2hpdGVsaXN0ZWRGb2xkZXIocGx1Z2luLCBvbGRQYXR0ZXJuLCBvbGRQYXR0ZXJuKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBzZXR0aW5ncy5kaXNwbGF5KCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBzZXR0aW5nLmFkZEJ1dHRvbigoY2IpID0+IHtcclxuICAgICAgICBjYi5zZXRJY29uKCdkb3duLWNoZXZyb24tZ2x5cGgnKTtcclxuICAgICAgICBjYi5zZXRUb29sdGlwKCdNb3ZlIGRvd24nKTtcclxuICAgICAgICBjYi5vbkNsaWNrKCgpID0+IHtcclxuICAgICAgICAgICAgaWYgKHBhdHRlcm4ucG9zaXRpb24gPT09IHBsdWdpbi5zZXR0aW5ncy53aGl0ZWxpc3RGb2xkZXJzLmxlbmd0aCAtIDEpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBwYXR0ZXJuLnBvc2l0aW9uICs9IDE7XHJcblxyXG4gICAgICAgICAgICB1cGRhdGVXaGl0ZWxpc3RlZFBhdHRlcm4ocGx1Z2luLCBwYXR0ZXJuLCBwYXR0ZXJuKTtcclxuICAgICAgICAgICAgY29uc3Qgb2xkUGF0dGVybiA9IHBsdWdpbi5zZXR0aW5ncy53aGl0ZWxpc3RGb2xkZXJzLmZpbmQoKGZvbGRlcikgPT4gZm9sZGVyLnBvc2l0aW9uID09PSBwYXR0ZXJuLnBvc2l0aW9uKTtcclxuICAgICAgICAgICAgaWYgKG9sZFBhdHRlcm4pIHtcclxuICAgICAgICAgICAgICAgIG9sZFBhdHRlcm4ucG9zaXRpb24gLT0gMTtcclxuICAgICAgICAgICAgICAgIGlmIChvbGRQYXR0ZXJuLnR5cGUgPT09ICdwYXR0ZXJuJykge1xyXG4gICAgICAgICAgICAgICAgICAgIHVwZGF0ZVdoaXRlbGlzdGVkUGF0dGVybihwbHVnaW4sIG9sZFBhdHRlcm4sIG9sZFBhdHRlcm4pO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB1cGRhdGVXaGl0ZWxpc3RlZEZvbGRlcihwbHVnaW4sIG9sZFBhdHRlcm4sIG9sZFBhdHRlcm4pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHNldHRpbmdzLmRpc3BsYXkoKTtcclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG5cclxuICAgIHNldHRpbmcuYWRkQnV0dG9uKChjYikgPT4ge1xyXG4gICAgICAgIGNiLnNldEljb24oJ3RyYXNoLTInKTtcclxuICAgICAgICBjYi5zZXRUb29sdGlwKCdEZWxldGUgcGF0dGVybicpO1xyXG4gICAgICAgIGNiLm9uQ2xpY2soKCkgPT4ge1xyXG4gICAgICAgICAgICBkZWxldGVQYXR0ZXJuKHBsdWdpbiwgcGF0dGVybik7XHJcbiAgICAgICAgICAgIHNldHRpbmcuY2xlYXIoKTtcclxuICAgICAgICAgICAgc2V0dGluZy5zZXR0aW5nRWwucmVtb3ZlKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxufSIsICJpbXBvcnQgeyBBcHAsIE1vZGFsLCBTZXR0aW5nIH0gZnJvbSAnb2JzaWRpYW4nO1xyXG5pbXBvcnQgRm9sZGVyTm90ZXNQbHVnaW4gZnJvbSAnLi4vLi4vbWFpbic7XHJcbmltcG9ydCB7IFdoaXRlbGlzdGVkUGF0dGVybiB9IGZyb20gJy4uL1doaXRlbGlzdFBhdHRlcm4nO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgV2hpdGVsaXN0UGF0dGVyblNldHRpbmdzIGV4dGVuZHMgTW9kYWwge1xyXG5cdHBsdWdpbjogRm9sZGVyTm90ZXNQbHVnaW47XHJcblx0YXBwOiBBcHA7XHJcblx0cGF0dGVybjogV2hpdGVsaXN0ZWRQYXR0ZXJuO1xyXG5cdGNvbnN0cnVjdG9yKGFwcDogQXBwLCBwbHVnaW46IEZvbGRlck5vdGVzUGx1Z2luLCBwYXR0ZXJuOiBXaGl0ZWxpc3RlZFBhdHRlcm4pIHtcclxuXHRcdHN1cGVyKGFwcCk7XHJcblx0XHR0aGlzLnBsdWdpbiA9IHBsdWdpbjtcclxuXHRcdHRoaXMuYXBwID0gYXBwO1xyXG5cdFx0dGhpcy5wYXR0ZXJuID0gcGF0dGVybjtcclxuXHR9XHJcblx0b25PcGVuKCkge1xyXG5cdFx0dGhpcy5kaXNwbGF5KCk7XHJcblx0fVxyXG5cdGRpc3BsYXkoKSB7XHJcblx0XHRjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcclxuXHRcdGNvbnRlbnRFbC5lbXB0eSgpO1xyXG5cdFx0Y29udGVudEVsLmNyZWF0ZUVsKCdoMicsIHsgdGV4dDogJ1doaXRlbGlzdGVkIHBhdHRlcm4gc2V0dGluZ3MnIH0pO1xyXG5cdFx0bmV3IFNldHRpbmcoY29udGVudEVsKVxyXG5cdFx0XHQuc2V0TmFtZSgnRW5hYmxlIGZvbGRlciBuYW1lIHN5bmMnKVxyXG5cdFx0XHQuc2V0RGVzYygnQ2hvb3NlIGlmIHRoZSBuYW1lIG9mIGEgZm9sZGVyIG5vdGUgc2hvdWxkIGJlIHJlbmFtZWQgd2hlbiB0aGUgZm9sZGVyIG5hbWUgaXMgY2hhbmdlZCcpXHJcblx0XHRcdC5hZGRUb2dnbGUoKHRvZ2dsZSkgPT5cclxuXHRcdFx0XHR0b2dnbGVcclxuXHRcdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBhdHRlcm4uZW5hYmxlU3luYylcclxuXHRcdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuXHRcdFx0XHRcdFx0dGhpcy5wYXR0ZXJuLmVuYWJsZVN5bmMgPSB2YWx1ZTtcclxuXHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0XHR9KVxyXG5cdFx0XHQpO1xyXG5cclxuXHRcdG5ldyBTZXR0aW5nKGNvbnRlbnRFbClcclxuXHRcdFx0LnNldE5hbWUoJ0FsbG93IGF1dG8gY3JlYXRpb24gb2YgZm9sZGVyIG5vdGVzIGluIHRoaXMgZm9sZGVyJylcclxuXHRcdFx0LmFkZFRvZ2dsZSgodG9nZ2xlKSA9PlxyXG5cdFx0XHRcdHRvZ2dsZVxyXG5cdFx0XHRcdFx0LnNldFZhbHVlKHRoaXMucGF0dGVybi5lbmFibGVBdXRvQ3JlYXRlKVxyXG5cdFx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG5cdFx0XHRcdFx0XHR0aGlzLnBhdHRlcm4uZW5hYmxlQXV0b0NyZWF0ZSA9IHZhbHVlO1xyXG5cdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0XHRcdH0pXHJcblx0XHRcdCk7XHJcblxyXG5cdFx0bmV3IFNldHRpbmcoY29udGVudEVsKVxyXG5cdFx0XHQuc2V0TmFtZSgnU2hvdyBmb2xkZXIgaW4gZm9sZGVyIG92ZXJ2aWV3JylcclxuXHRcdFx0LnNldERlc2MoJ0Nob29zZSBpZiB0aGUgZm9sZGVyIHNob3VsZCBiZSBzaG93biBpbiB0aGUgZm9sZGVyIG92ZXJ2aWV3JylcclxuXHRcdFx0LmFkZFRvZ2dsZSgodG9nZ2xlKSA9PlxyXG5cdFx0XHRcdHRvZ2dsZVxyXG5cdFx0XHRcdFx0LnNldFZhbHVlKHRoaXMucGF0dGVybi5zaG93SW5Gb2xkZXJPdmVydmlldylcclxuXHRcdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuXHRcdFx0XHRcdFx0dGhpcy5wYXR0ZXJuLnNob3dJbkZvbGRlck92ZXJ2aWV3ID0gdmFsdWU7XHJcblx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHRcdFx0fSlcclxuXHRcdFx0KTtcclxuXHJcblxyXG5cdFx0bmV3IFNldHRpbmcoY29udGVudEVsKVxyXG5cdFx0XHQuc2V0TmFtZSgnT3BlbiBmb2xkZXIgbm90ZSB3aGVuIGNsaWNraW5nIG9uIHRoZSBmb2xkZXInKVxyXG5cdFx0XHQuc2V0RGVzYygnQ2hvb3NlIGlmIHRoZSBmb2xkZXIgbm90ZSBzaG91bGQgYmUgb3BlbmVkIHdoZW4geW91IGNsaWNrIG9uIHRoZSBmb2xkZXInKVxyXG5cdFx0XHQuYWRkVG9nZ2xlKCh0b2dnbGUpID0+XHJcblx0XHRcdFx0dG9nZ2xlXHJcblx0XHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wYXR0ZXJuLmVuYWJsZUZvbGRlck5vdGUpXHJcblx0XHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcblx0XHRcdFx0XHRcdHRoaXMucGF0dGVybi5lbmFibGVGb2xkZXJOb3RlID0gdmFsdWU7XHJcblx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncyh0cnVlKTtcclxuXHRcdFx0XHRcdFx0dGhpcy5kaXNwbGF5KCk7XHJcblx0XHRcdFx0XHR9KVxyXG5cdFx0XHQpO1xyXG5cclxuXHRcdGlmICh0aGlzLnBhdHRlcm4uZW5hYmxlRm9sZGVyTm90ZSkge1xyXG5cdFx0XHRuZXcgU2V0dGluZyhjb250ZW50RWwpXHJcblx0XHRcdFx0LnNldE5hbWUoJ0NvbGxhcHNlIGZvbGRlciB3aGVuIG9wZW5pbmcgZm9sZGVyIG5vdGUnKVxyXG5cdFx0XHRcdC5zZXREZXNjKCdDaG9vc2UgaWYgdGhlIGZvbGRlciBzaG91bGQgYmUgY29sbGFwc2VkIHdoZW4gdGhlIGZvbGRlciBub3RlIGlzIG9wZW5lZCcpXHJcblx0XHRcdFx0LmFkZFRvZ2dsZSgodG9nZ2xlKSA9PlxyXG5cdFx0XHRcdFx0dG9nZ2xlXHJcblx0XHRcdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBhdHRlcm4uZW5hYmxlQ29sbGFwc2luZylcclxuXHRcdFx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdHRoaXMucGF0dGVybi5lbmFibGVDb2xsYXBzaW5nID0gdmFsdWU7XHJcblx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0XHRcdH0pXHJcblx0XHRcdFx0KTtcclxuXHRcdH1cclxuXHJcblx0fVxyXG5cdG9uQ2xvc2UoKSB7XHJcblx0XHRjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcclxuXHRcdGNvbnRlbnRFbC5lbXB0eSgpO1xyXG5cdH1cclxufVxyXG4iLCAiaW1wb3J0IEZvbGRlck5vdGVzUGx1Z2luIGZyb20gJy4uL21haW4nO1xyXG5leHBvcnQgY2xhc3MgRXhjbHVkZWRGb2xkZXIge1xyXG5cdHR5cGU6IHN0cmluZztcclxuXHRpZDogc3RyaW5nO1xyXG5cdHBhdGg6IHN0cmluZztcclxuXHRzdHJpbmc6IHN0cmluZztcclxuXHRzdWJGb2xkZXJzOiBib29sZWFuO1xyXG5cdGRpc2FibGVTeW5jOiBib29sZWFuO1xyXG5cdGRpc2FibGVBdXRvQ3JlYXRlOiBib29sZWFuO1xyXG5cdGRpc2FibGVGb2xkZXJOb3RlOiBib29sZWFuO1xyXG5cdGVuYWJsZUNvbGxhcHNpbmc6IGJvb2xlYW47XHJcblx0cG9zaXRpb246IG51bWJlcjtcclxuXHRleGNsdWRlRnJvbUZvbGRlck92ZXJ2aWV3OiBib29sZWFuO1xyXG4gICAgaGlkZUluU2V0dGluZ3M6IGJvb2xlYW47XHJcblx0ZGV0YWNoZWQ6IGJvb2xlYW47XHJcblx0ZGV0YWNoZWRGaWxlUGF0aD86IHN0cmluZztcclxuXHRoaWRlTm90ZTogYm9vbGVhbjtcclxuXHRjb25zdHJ1Y3RvcihwYXRoOiBzdHJpbmcsIHBvc2l0aW9uOiBudW1iZXIsIGlkOiBzdHJpbmcgfCB1bmRlZmluZWQsIHBsdWdpbjogRm9sZGVyTm90ZXNQbHVnaW4pIHtcclxuXHRcdHRoaXMudHlwZSA9ICdmb2xkZXInO1xyXG5cdFx0dGhpcy5pZCA9IGlkIHx8IGNyeXB0by5yYW5kb21VVUlEKCk7XHJcblx0XHR0aGlzLnBhdGggPSBwYXRoO1xyXG5cdFx0dGhpcy5zdWJGb2xkZXJzID0gcGx1Z2luLnNldHRpbmdzLmV4Y2x1ZGVGb2xkZXJEZWZhdWx0U2V0dGluZ3Muc3ViRm9sZGVycztcclxuXHRcdHRoaXMuZGlzYWJsZVN5bmMgPSBwbHVnaW4uc2V0dGluZ3MuZXhjbHVkZUZvbGRlckRlZmF1bHRTZXR0aW5ncy5kaXNhYmxlU3luYztcclxuXHRcdHRoaXMuZGlzYWJsZUF1dG9DcmVhdGUgPSBwbHVnaW4uc2V0dGluZ3MuZXhjbHVkZUZvbGRlckRlZmF1bHRTZXR0aW5ncy5kaXNhYmxlQXV0b0NyZWF0ZTtcclxuXHRcdHRoaXMuZGlzYWJsZUZvbGRlck5vdGUgPSBwbHVnaW4uc2V0dGluZ3MuZXhjbHVkZUZvbGRlckRlZmF1bHRTZXR0aW5ncy5kaXNhYmxlRm9sZGVyTm90ZTtcclxuXHRcdHRoaXMuZW5hYmxlQ29sbGFwc2luZyA9IHBsdWdpbi5zZXR0aW5ncy5leGNsdWRlRm9sZGVyRGVmYXVsdFNldHRpbmdzLmVuYWJsZUNvbGxhcHNpbmc7XHJcblx0XHR0aGlzLnBvc2l0aW9uID0gcG9zaXRpb247XHJcblx0XHR0aGlzLmV4Y2x1ZGVGcm9tRm9sZGVyT3ZlcnZpZXcgPSBwbHVnaW4uc2V0dGluZ3MuZXhjbHVkZUZvbGRlckRlZmF1bHRTZXR0aW5ncy5leGNsdWRlRnJvbUZvbGRlck92ZXJ2aWV3O1xyXG5cdFx0dGhpcy5zdHJpbmcgPSAnJztcclxuICAgICAgICB0aGlzLmhpZGVJblNldHRpbmdzID0gZmFsc2U7XHJcblx0XHR0aGlzLmhpZGVOb3RlID0gZmFsc2U7XHJcblx0fVxyXG59IiwgImltcG9ydCB7IFdvcmtzcGFjZUxlYWYsIEFwcCB9IGZyb20gJ29ic2lkaWFuJztcclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBvcGVuRXhjYWxpZHJhd1ZpZXcobGVhZjogV29ya3NwYWNlTGVhZikge1xyXG4gICAgY29uc3Qge2V4Y2FsaWRyYXcsIGV4Y2FsaWRyYXdFbmFibGVkfSA9IGF3YWl0IGdldEV4Y2FsaWRyYXdQbHVnaW4odGhpcy5hcHApO1xyXG4gICAgaWYgKGV4Y2FsaWRyYXdFbmFibGVkKSB7XHJcbiAgICAgICAgZXhjYWxpZHJhdy5zZXRFeGNhbGlkcmF3VmlldyhsZWFmKTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldEV4Y2FsaWRyYXdQbHVnaW4oYXBwOiBBcHApIHtcclxuICAgIGNvbnN0IGV4Y2FsaWRyYXcgPSAoYXBwIGFzIGFueSkucGx1Z2lucy5wbHVnaW5zWydvYnNpZGlhbi1leGNhbGlkcmF3LXBsdWdpbiddO1xyXG4gICAgY29uc3QgZXhjYWxpZHJhd0VuYWJsZWQgPSAoYXBwIGFzIGFueSkucGx1Z2lucy5lbmFibGVkUGx1Z2lucy5oYXMoXHJcblx0XHQnb2JzaWRpYW4tZXhjYWxpZHJhdy1wbHVnaW4nXHJcblx0KTtcclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgZXhjYWxpZHJhdyxcclxuICAgICAgICBleGNhbGlkcmF3RW5hYmxlZFxyXG4gICAgfVxyXG59IiwgImltcG9ydCB7IEZ1enp5U3VnZ2VzdE1vZGFsLCBOb3RpY2UsIFRGaWxlIH0gZnJvbSAnb2JzaWRpYW4nO1xyXG5pbXBvcnQgRm9sZGVyTm90ZXNQbHVnaW4gZnJvbSAnc3JjL21haW4nO1xyXG5pbXBvcnQgeyBjcmVhdGVGb2xkZXJOb3RlIH0gZnJvbSAnc3JjL2Z1bmN0aW9ucy9mb2xkZXJOb3RlRnVuY3Rpb25zJztcclxuZXhwb3J0IGNsYXNzIEFza0ZvckV4dGVuc2lvbk1vZGFsIGV4dGVuZHMgRnV6enlTdWdnZXN0TW9kYWw8c3RyaW5nPiB7XHJcbiAgICBwbHVnaW46IEZvbGRlck5vdGVzUGx1Z2luXHJcbiAgICBleHRlbnNpb246IHN0cmluZ1xyXG4gICAgZm9sZGVyUGF0aDogc3RyaW5nO1xyXG4gICAgb3BlbkZpbGU6IGJvb2xlYW47XHJcbiAgICB1c2VNb2RhbDogYm9vbGVhbiB8IHVuZGVmaW5lZDtcclxuICAgIGV4aXN0aW5nTm90ZTogVEZpbGUgfCB1bmRlZmluZWQ7XHJcbiAgICBjb25zdHJ1Y3RvcihwbHVnaW46IEZvbGRlck5vdGVzUGx1Z2luLCBmb2xkZXJQYXRoOiBzdHJpbmcsIG9wZW5GaWxlOiBib29sZWFuLCBleHRlbnNpb246IHN0cmluZywgdXNlTW9kYWw/OiBib29sZWFuLCBleGlzdGluZ05vdGU/OiBURmlsZSkge1xyXG4gICAgICAgIHN1cGVyKHBsdWdpbi5hcHApO1xyXG4gICAgICAgIHRoaXMucGx1Z2luID0gcGx1Z2luO1xyXG4gICAgICAgIHRoaXMuZm9sZGVyUGF0aCA9IGZvbGRlclBhdGg7XHJcbiAgICAgICAgdGhpcy5leHRlbnNpb24gPSBleHRlbnNpb247XHJcbiAgICAgICAgdGhpcy5vcGVuRmlsZSA9IG9wZW5GaWxlO1xyXG4gICAgICAgIHRoaXMudXNlTW9kYWwgPSB1c2VNb2RhbDtcclxuICAgICAgICB0aGlzLmV4aXN0aW5nTm90ZSA9IGV4aXN0aW5nTm90ZTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgZ2V0SXRlbXMoKTogc3RyaW5nW10ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnBsdWdpbi5zZXR0aW5ncy5zdXBwb3J0ZWRGaWxlVHlwZXMuZmlsdGVyKChpdGVtKSA9PiBpdGVtLnRvTG93ZXJDYXNlKCkgIT09ICcuYXNrJyk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0SXRlbVRleHQoaXRlbTogc3RyaW5nKTogc3RyaW5nIHtcclxuICAgICAgICByZXR1cm4gaXRlbTtcclxuICAgIH1cclxuXHJcbiAgICBvbkNob29zZUl0ZW0oaXRlbTogc3RyaW5nLCBldnQ6IE1vdXNlRXZlbnQgfCBLZXlib2FyZEV2ZW50KSB7XHJcbiAgICAgICAgdGhpcy5leHRlbnNpb24gPSAnLicgKyBpdGVtO1xyXG4gICAgICAgIGNyZWF0ZUZvbGRlck5vdGUodGhpcy5wbHVnaW4sIHRoaXMuZm9sZGVyUGF0aCwgdGhpcy5vcGVuRmlsZSwgdGhpcy5leHRlbnNpb24sIHRoaXMudXNlTW9kYWwsIHRoaXMuZXhpc3RpbmdOb3RlKTtcclxuICAgICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICB9XHJcbn0iLCAiaW1wb3J0IHsgVEZpbGUsIFRGb2xkZXIgfSBmcm9tICdvYnNpZGlhbic7XHJcbmltcG9ydCBGb2xkZXJOb3Rlc1BsdWdpbiBmcm9tICdzcmMvbWFpbic7XHJcbmltcG9ydCB7IGdldEV4Y2x1ZGVkRm9sZGVyIH0gZnJvbSAnc3JjL0V4Y2x1ZGVGb2xkZXJzL2Z1bmN0aW9ucy9mb2xkZXJGdW5jdGlvbnMnO1xyXG5pbXBvcnQgeyBnZXRGb2xkZXIsIGdldEZvbGRlck5vdGUgfSBmcm9tICdzcmMvZnVuY3Rpb25zL2ZvbGRlck5vdGVGdW5jdGlvbnMnO1xyXG5pbXBvcnQgeyBnZXRGaWxlRXhwbG9yZXIgfSBmcm9tICcuL3V0aWxzJztcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBsb2FkRmlsZUNsYXNzZXMoZm9yY2VSZWxvYWQgPSBmYWxzZSwgcGx1Z2luOiBGb2xkZXJOb3Rlc1BsdWdpbikge1xyXG5cdGlmIChwbHVnaW4uYWN0aXZlRmlsZUV4cGxvcmVyID09PSBnZXRGaWxlRXhwbG9yZXIocGx1Z2luKSAmJiAhZm9yY2VSZWxvYWQpIHsgcmV0dXJuOyB9XHJcblx0cGx1Z2luLmFjdGl2ZUZpbGVFeHBsb3JlciA9IGdldEZpbGVFeHBsb3JlcihwbHVnaW4pO1xyXG5cdHBsdWdpbi5hcHAudmF1bHQuZ2V0QWxsTG9hZGVkRmlsZXMoKS5mb3JFYWNoKGFzeW5jIChmaWxlKSA9PiB7XHJcblx0XHRpZiAoIShmaWxlIGluc3RhbmNlb2YgVEZvbGRlcikpIHsgcmV0dXJuOyB9XHJcblx0XHRjb25zdCBmb2xkZXJOb3RlID0gZ2V0Rm9sZGVyTm90ZShwbHVnaW4sIGZpbGUucGF0aCk7XHJcblx0XHRpZiAoIWZvbGRlck5vdGUpIHtcclxuXHRcdFx0cmVtb3ZlQ1NTQ2xhc3NGcm9tRUwoZmlsZT8ucGF0aCwgJ2hhcy1mb2xkZXItbm90ZScsIHBsdWdpbik7XHJcblx0XHRcdHJlbW92ZUNTU0NsYXNzRnJvbUVMKGZpbGU/LnBhdGgsICdvbmx5LWhhcy1mb2xkZXItbm90ZScsIHBsdWdpbik7XHJcblx0XHRcdHBsdWdpbi5pc0VtcHR5Rm9sZGVyTm90ZUZvbGRlcihmaWxlKTtcclxuXHRcdFx0cmV0dXJuO1xyXG5cdFx0fVxyXG5cclxuXHRcdGNvbnN0IGV4Y2x1ZGVkRm9sZGVyID0gYXdhaXQgZ2V0RXhjbHVkZWRGb2xkZXIocGx1Z2luLCBmaWxlLnBhdGgsIHRydWUpO1xyXG5cdFx0Ly8gY2xlYW51cCBhZnRlciBvdXJzZWx2ZXNcclxuXHRcdC8vIEluY2FzZSBzZXR0aW5ncyBoYXZlIGNoYW5nZWRcclxuXHRcdGlmIChleGNsdWRlZEZvbGRlcj8uZGlzYWJsZUZvbGRlck5vdGUpIHtcclxuXHRcdFx0cmVtb3ZlQ1NTQ2xhc3NGcm9tRUwoZm9sZGVyTm90ZS5wYXRoLCAnaXMtZm9sZGVyLW5vdGUnLCBwbHVnaW4pO1xyXG5cdFx0XHRyZW1vdmVDU1NDbGFzc0Zyb21FTChmaWxlLnBhdGgsICdoYXMtZm9sZGVyLW5vdGUnLCBwbHVnaW4pO1xyXG5cdFx0XHRyZW1vdmVDU1NDbGFzc0Zyb21FTChmaWxlPy5wYXRoLCAnb25seS1oYXMtZm9sZGVyLW5vdGUnLCBwbHVnaW4pO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0aWYgKCFleGNsdWRlZEZvbGRlcj8uaGlkZU5vdGUpIHtcclxuXHRcdFx0XHRhZGRDU1NDbGFzc1RvVGl0bGVFTChmb2xkZXJOb3RlLnBhdGgsICdpcy1mb2xkZXItbm90ZScsIHBsdWdpbik7XHJcblx0XHRcdH1cclxuXHRcdFx0YWRkQ1NTQ2xhc3Nlc1RvRm9sZGVyKGZpbGUsIHBsdWdpbik7XHJcblx0XHR9XHJcblx0fSk7XHJcbn1cclxuXHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gYXBwbHlDU1NDbGFzc2VzVG9Gb2xkZXIoZm9sZGVyUGF0aDogc3RyaW5nLCBwbHVnaW46IEZvbGRlck5vdGVzUGx1Z2luKSB7XHJcblx0Y29uc3QgZm9sZGVyID0gcGx1Z2luLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoZm9sZGVyUGF0aCk7XHJcblx0aWYgKCFmb2xkZXIgfHwgIShmb2xkZXIgaW5zdGFuY2VvZiBURm9sZGVyKSkgeyByZXR1cm47IH1cclxuXHJcblx0Y29uc3QgZm9sZGVyTm90ZSA9IGdldEZvbGRlck5vdGUocGx1Z2luLCBmb2xkZXIucGF0aCk7XHJcblxyXG5cdGlmICghZm9sZGVyTm90ZSkge1xyXG5cdFx0cmVtb3ZlQ1NTQ2xhc3NGcm9tRUwoZm9sZGVyPy5wYXRoLCAnaGFzLWZvbGRlci1ub3RlJywgcGx1Z2luKTtcclxuXHRcdHJlbW92ZUNTU0NsYXNzRnJvbUVMKGZvbGRlcj8ucGF0aCwgJ29ubHktaGFzLWZvbGRlci1ub3RlJywgcGx1Z2luKTtcclxuXHRcdHJldHVybjtcclxuXHR9XHJcblxyXG5cdGNvbnN0IGV4Y2x1ZGVkRm9sZGVyID0gYXdhaXQgZ2V0RXhjbHVkZWRGb2xkZXIocGx1Z2luLCBmb2xkZXIucGF0aCwgdHJ1ZSk7XHJcblxyXG5cdGlmIChleGNsdWRlZEZvbGRlcj8uZGlzYWJsZUZvbGRlck5vdGUpIHtcclxuXHRcdHJlbW92ZUNTU0NsYXNzRnJvbUVMKGZvbGRlck5vdGUucGF0aCwgJ2lzLWZvbGRlci1ub3RlJywgcGx1Z2luKTtcclxuXHRcdHJlbW92ZUNTU0NsYXNzRnJvbUVMKGZvbGRlci5wYXRoLCAnaGFzLWZvbGRlci1ub3RlJywgcGx1Z2luKTtcclxuXHRcdHJlbW92ZUNTU0NsYXNzRnJvbUVMKGZvbGRlcj8ucGF0aCwgJ29ubHktaGFzLWZvbGRlci1ub3RlJywgcGx1Z2luKTtcclxuXHR9IGVsc2Uge1xyXG5cdFx0aWYgKCFleGNsdWRlZEZvbGRlcj8uaGlkZU5vdGUpIHtcclxuXHRcdFx0YWRkQ1NTQ2xhc3NUb0ZvbGRlck5vdGUoZm9sZGVyTm90ZSwgcGx1Z2luKTtcclxuXHRcdH1cclxuXHRcdGFkZENTU0NsYXNzZXNUb0ZvbGRlcihmb2xkZXIsIHBsdWdpbik7XHJcblx0XHRpZiAocGx1Z2luLmlzRW1wdHlGb2xkZXJOb3RlRm9sZGVyKGZvbGRlcikpIHtcclxuXHRcdFx0YWRkQ1NTQ2xhc3NUb1RpdGxlRUwoZm9sZGVyLnBhdGgsICdvbmx5LWhhcy1mb2xkZXItbm90ZScsIHBsdWdpbik7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHRyZW1vdmVDU1NDbGFzc0Zyb21FTChmb2xkZXIucGF0aCwgJ29ubHktaGFzLWZvbGRlci1ub3RlJywgcGx1Z2luKTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdGFkZENTU0NsYXNzZXNUb0JvdGhGb2xkZXJBbmROb3RlKGZvbGRlck5vdGUsIGZvbGRlciwgcGx1Z2luKTtcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGFwcGx5Q1NTQ2xhc3Nlc1RvRm9sZGVyTm90ZShmaWxlUGF0aDogc3RyaW5nLCBwbHVnaW46IEZvbGRlck5vdGVzUGx1Z2luKSB7XHJcblx0Y29uc3QgZmlsZSA9IHBsdWdpbi5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKGZpbGVQYXRoKTtcclxuXHRpZiAoIWZpbGUgfHwgIShmaWxlIGluc3RhbmNlb2YgVEZpbGUpKSB7IHJldHVybjsgfVxyXG5cclxuXHRjb25zdCBmb2xkZXIgPSBnZXRGb2xkZXIocGx1Z2luLCBmaWxlKTtcclxuXHRpZiAoIWZvbGRlciB8fCAhKGZvbGRlciBpbnN0YW5jZW9mIFRGb2xkZXIpKSB7IHJldHVybjsgfVxyXG5cclxuXHRhcHBseUNTU0NsYXNzZXNUb0ZvbGRlcihmb2xkZXIucGF0aCwgcGx1Z2luKTtcclxuXHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBhZGRDU1NDbGFzc2VzVG9Cb3RoRm9sZGVyQW5kTm90ZShmaWxlOiBURmlsZSwgZm9sZGVyOiBURm9sZGVyLCBwbHVnaW46IEZvbGRlck5vdGVzUGx1Z2luKSB7XHJcblx0YWRkQ1NTQ2xhc3NUb0ZvbGRlck5vdGUoZmlsZSwgcGx1Z2luKTtcclxuXHRhZGRDU1NDbGFzc2VzVG9Gb2xkZXIoZm9sZGVyLCBwbHVnaW4pO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gcmVtb3ZlQ1NTQ2xhc3Nlc0Zyb21Cb3RoRm9sZGVyQW5kTm90ZShmb2xkZXI6IFRGb2xkZXIsIGZpbGU6IFRGaWxlLCBwbHVnaW46IEZvbGRlck5vdGVzUGx1Z2luKSB7XHJcblx0cmVtb3ZlQ1NTQ2xhc3NGcm9tRm9sZGVyTm90ZShmaWxlLCBwbHVnaW4pO1xyXG5cdHJlbW92ZUNTU0NsYXNzZXNGcm9tRm9sZGVyKGZvbGRlciwgcGx1Z2luKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGFkZENTU0NsYXNzZXNUb0ZvbGRlcihmb2xkZXI6IFRGb2xkZXIsIHBsdWdpbjogRm9sZGVyTm90ZXNQbHVnaW4pIHtcclxuXHRhZGRDU1NDbGFzc1RvVGl0bGVFTChmb2xkZXIucGF0aCwgJ2hhcy1mb2xkZXItbm90ZScsIHBsdWdpbik7XHJcblx0aWYgKHBsdWdpbi5pc0VtcHR5Rm9sZGVyTm90ZUZvbGRlcihmb2xkZXIpKSB7XHJcblx0XHRhZGRDU1NDbGFzc1RvVGl0bGVFTChmb2xkZXIucGF0aCwgJ29ubHktaGFzLWZvbGRlci1ub3RlJywgcGx1Z2luKTtcclxuXHR9IGVsc2Uge1xyXG5cdFx0cmVtb3ZlQ1NTQ2xhc3NGcm9tRUwoZm9sZGVyLnBhdGgsICdvbmx5LWhhcy1mb2xkZXItbm90ZScsIHBsdWdpbik7XHJcblx0fVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gYWRkQ1NTQ2xhc3NUb0ZvbGRlck5vdGUoZmlsZTogVEZpbGUsIHBsdWdpbjogRm9sZGVyTm90ZXNQbHVnaW4pIHtcclxuXHRhZGRDU1NDbGFzc1RvVGl0bGVFTChmaWxlLnBhdGgsICdpcy1mb2xkZXItbm90ZScsIHBsdWdpbik7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiByZW1vdmVDU1NDbGFzc0Zyb21Gb2xkZXJOb3RlKGZpbGU6IFRGaWxlLCBwbHVnaW46IEZvbGRlck5vdGVzUGx1Z2luKSB7XHJcblx0cmVtb3ZlQ1NTQ2xhc3NGcm9tRUwoZmlsZS5wYXRoLCAnaXMtZm9sZGVyLW5vdGUnLCBwbHVnaW4pO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gcmVtb3ZlQ1NTQ2xhc3Nlc0Zyb21Gb2xkZXIoZm9sZGVyOiBURm9sZGVyLCBwbHVnaW46IEZvbGRlck5vdGVzUGx1Z2luKSB7XHJcblx0cmVtb3ZlQ1NTQ2xhc3NGcm9tRUwoZm9sZGVyLnBhdGgsICdoYXMtZm9sZGVyLW5vdGUnLCBwbHVnaW4pO1xyXG5cdHJlbW92ZUNTU0NsYXNzRnJvbUVMKGZvbGRlci5wYXRoLCAnb25seS1oYXMtZm9sZGVyLW5vdGUnLCBwbHVnaW4pO1xyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gYWRkQ1NTQ2xhc3NUb1RpdGxlRUwocGF0aDogc3RyaW5nLCBjc3NDbGFzczogc3RyaW5nLCBwbHVnaW46IEZvbGRlck5vdGVzUGx1Z2luLCB3YWl0Rm9yQ3JlYXRlID0gZmFsc2UsIGNvdW50ID0gMCkge1xyXG5cdGNvbnN0IGZpbGVFeHBsb3Jlckl0ZW0gPSBnZXRFbChwYXRoLCBwbHVnaW4pO1xyXG5cdGlmICghZmlsZUV4cGxvcmVySXRlbSkge1xyXG5cdFx0aWYgKHdhaXRGb3JDcmVhdGUgJiYgY291bnQgPCA1KSB7XHJcblx0XHRcdC8vIHNsZWVwIGZvciBhIHNlY29uZCBmb3IgdGhlIGZpbGUtZXhwbG9yZXIgZXZlbnQgdG8gY2F0Y2ggdXBcclxuXHRcdFx0Ly8gdGhpcyBpcyBhbm5veWluZyBhcyBpbiBtb3N0IHNjYW5hcmlvcyBvdXIgcGx1Z2luIHJlY2lldmVzIHRoZSBldmVudCBiZWZvcmUgZmlsZSBleHBsb3JlclxyXG5cdFx0XHQvLyBJZiB3ZSBjb3VsZCBndWFycmFudGVlIGxvYWQgb3JkZXIgaXQgd291bGRuJ3QgYmUgYW4gaXNzdWUgYnV0IHdlIGNhbid0XHJcblx0XHRcdC8vIHJlYWxpc2UgdGhpcyBpcyByYWNleSBhbmQgbmVlZHMgdG8gYmUgZml4ZWQuXHJcblx0XHRcdGF3YWl0IG5ldyBQcm9taXNlKChyKSA9PiBzZXRUaW1lb3V0KHIsIDUwMCkpO1xyXG5cdFx0XHRhZGRDU1NDbGFzc1RvVGl0bGVFTChwYXRoLCBjc3NDbGFzcywgcGx1Z2luLCB3YWl0Rm9yQ3JlYXRlLCBjb3VudCArIDEpO1xyXG5cdFx0XHRyZXR1cm47XHJcblx0XHR9XHJcblx0XHRyZXR1cm47XHJcblx0fVxyXG5cdGZpbGVFeHBsb3Jlckl0ZW0uYWRkQ2xhc3MoY3NzQ2xhc3MpO1xyXG5cdGNvbnN0IHZpZXdIZWFkZXJJdGVtcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoYFtkYXRhLXBhdGg9JyR7Q1NTLmVzY2FwZShwYXRoKX0nXWApO1xyXG5cdHZpZXdIZWFkZXJJdGVtcy5mb3JFYWNoKChpdGVtKSA9PiB7XHJcblx0XHRpdGVtLmFkZENsYXNzKGNzc0NsYXNzKTtcclxuXHR9KTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHJlbW92ZUNTU0NsYXNzRnJvbUVMKHBhdGg6IHN0cmluZyB8IHVuZGVmaW5lZCwgY3NzQ2xhc3M6IHN0cmluZywgcGx1Z2luOiBGb2xkZXJOb3Rlc1BsdWdpbikge1xyXG5cdGlmICghcGF0aCkgcmV0dXJuO1xyXG5cdGNvbnN0IGZpbGVFeHBsb3Jlckl0ZW0gPSBnZXRFbChwYXRoLCBwbHVnaW4pO1xyXG5cdGNvbnN0IHZpZXdIZWFkZXJJdGVtcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoYFtkYXRhLXBhdGg9JyR7Q1NTLmVzY2FwZShwYXRoKX0nXWApO1xyXG5cdHZpZXdIZWFkZXJJdGVtcy5mb3JFYWNoKChpdGVtKSA9PiB7XHJcblx0XHRpdGVtLnJlbW92ZUNsYXNzKGNzc0NsYXNzKTtcclxuXHR9KTtcclxuXHRpZiAoIWZpbGVFeHBsb3Jlckl0ZW0pIHsgcmV0dXJuOyB9XHJcblx0ZmlsZUV4cGxvcmVySXRlbS5yZW1vdmVDbGFzcyhjc3NDbGFzcyk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRFbChwYXRoOiBzdHJpbmcsIHBsdWdpbjogRm9sZGVyTm90ZXNQbHVnaW4pOiBIVE1MRWxlbWVudCB8IG51bGwge1xyXG5cdGNvbnN0IGZpbGVFeHBsb3JlciA9IGdldEZpbGVFeHBsb3JlcihwbHVnaW4pO1xyXG5cdGlmICghZmlsZUV4cGxvcmVyKSB7IHJldHVybiBudWxsOyB9XHJcblx0aWYgKCFmaWxlRXhwbG9yZXIudmlldykgeyByZXR1cm4gbnVsbDsgfVxyXG5cdGlmICghZmlsZUV4cGxvcmVyLnZpZXcuZmlsZUl0ZW1zKSB7IHJldHVybiBudWxsOyB9XHJcblx0Y29uc3QgZmlsZUV4cGxvcmVySXRlbSA9IGZpbGVFeHBsb3Jlci52aWV3LmZpbGVJdGVtc1twYXRoXTtcclxuXHRpZiAoIWZpbGVFeHBsb3Jlckl0ZW0pIHsgcmV0dXJuIG51bGw7IH1cclxuXHRpZiAoZmlsZUV4cGxvcmVySXRlbS5zZWxmRWwpIHJldHVybiBmaWxlRXhwbG9yZXJJdGVtLnNlbGZFbDtcclxuXHRyZXR1cm4gZmlsZUV4cGxvcmVySXRlbS50aXRsZUVsO1xyXG59XHJcbiIsICJpbXBvcnQgeyBTZXR0aW5nLCBQbGF0Zm9ybSwgU2V0dGluZ1RhYiB9IGZyb20gJ29ic2lkaWFuJztcclxuaW1wb3J0IHsgU2V0dGluZ3NUYWIgfSBmcm9tICcuL1NldHRpbmdzVGFiJztcclxuaW1wb3J0IHsgTGlzdENvbXBvbmVudCB9IGZyb20gJy4uL2Z1bmN0aW9ucy9MaXN0Q29tcG9uZW50JztcclxuaW1wb3J0IEFkZFN1cHBvcnRlZEZpbGVNb2RhbCBmcm9tICcuLi9tb2RhbHMvQWRkU3VwcG9ydGVkRmlsZVR5cGUnO1xyXG5pbXBvcnQgeyBGcm9udE1hdHRlclRpdGxlUGx1Z2luSGFuZGxlciB9IGZyb20gJy4uL2V2ZW50cy9Gcm9udE1hdHRlclRpdGxlJztcclxuaW1wb3J0IENvbmZpcm1hdGlvbk1vZGFsIGZyb20gJy4uL21vZGFscy9Db25maXJtQ3JlYXRpb24nO1xyXG5pbXBvcnQgeyBUZW1wbGF0ZVN1Z2dlc3QgfSBmcm9tICcuLi9zdWdnZXN0ZXJzL1RlbXBsYXRlU3VnZ2VzdGVyJztcclxuaW1wb3J0IHsgbG9hZEZpbGVDbGFzc2VzIH0gZnJvbSAnLi4vZnVuY3Rpb25zL3N0eWxlRnVuY3Rpb25zJztcclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiByZW5kZXJHZW5lcmFsKHNldHRpbmdzVGFiOiBTZXR0aW5nc1RhYikge1xyXG4gICAgY29uc3QgY29udGFpbmVyRWwgPSBzZXR0aW5nc1RhYi5zZXR0aW5nc1BhZ2U7XHJcbiAgICBjb25zdCBuYW1lU2V0dGluZyA9IG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAgIC5zZXROYW1lKCdGb2xkZXIgbm90ZSBuYW1lJylcclxuICAgICAgICAuc2V0RGVzYygne3tmb2xkZXJfbmFtZX19IHdpbGwgYmUgcmVwbGFjZWQgd2l0aCB0aGUgbmFtZSBvZiB0aGUgZm9sZGVyJylcclxuICAgICAgICAuYWRkVGV4dCgodGV4dCkgPT5cclxuICAgICAgICAgICAgdGV4dFxyXG4gICAgICAgICAgICAgICAgLnNldFZhbHVlKHNldHRpbmdzVGFiLnBsdWdpbi5zZXR0aW5ncy5uZXdGb2xkZXJOb3RlTmFtZSlcclxuICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodmFsdWUudHJpbSgpID09PSAnJykgeyByZXR1cm47IH1cclxuICAgICAgICAgICAgICAgICAgICBzZXR0aW5nc1RhYi5wbHVnaW4uc2V0dGluZ3MubmV3Rm9sZGVyTm90ZU5hbWUgPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCBzZXR0aW5nc1RhYi5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgIClcclxuICAgICAgICAuYWRkQnV0dG9uKChidXR0b24pID0+XHJcbiAgICAgICAgICAgIGJ1dHRvblxyXG4gICAgICAgICAgICAgICAgLnNldEJ1dHRvblRleHQoJ1JlbmFtZSBleGlzdGluZyBmb2xkZXIgbm90ZXMnKVxyXG4gICAgICAgICAgICAgICAgLnNldEN0YSgpXHJcbiAgICAgICAgICAgICAgICAub25DbGljayhhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2V0dGluZ3NUYWIudXBkYXRlRm9sZGVyTm90ZXMoc2V0dGluZ3NUYWIucGx1Z2luLnNldHRpbmdzLm5ld0ZvbGRlck5vdGVOYW1lKTtcclxuICAgICAgICAgICAgICAgICAgICBzZXR0aW5nc1RhYi5kaXNwbGF5KCk7XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICk7XHJcbiAgICBuYW1lU2V0dGluZy5pbmZvRWwuYXBwZW5kVGV4dCgnUmVxdWlyZXMgYSByZXN0YXJ0IHRvIHRha2UgZWZmZWN0Jyk7XHJcbiAgICBuYW1lU2V0dGluZy5pbmZvRWwuc3R5bGUuY29sb3IgPSBzZXR0aW5nc1RhYi5hcHAudmF1bHQuZ2V0Q29uZmlnKCdhY2NlbnRDb2xvcicpIGFzIHN0cmluZyB8fCAnIzdkNWJlZCc7XHJcblxyXG4gICAgaWYgKHNldHRpbmdzVGFiLnBsdWdpbi5zZXR0aW5ncy5uZXdGb2xkZXJOb3RlTmFtZSAhPT0gJ3t7Zm9sZGVyX25hbWV9fScpIHtcclxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgICAgICAgLnNldE5hbWUoJ1VzZSBmb2xkZXIgbmFtZSBpbnN0ZWFkIG9mIGZvbGRlciBub3RlIG5hbWUgaW4gdGhlIHRhYiB0aXRsZScpXHJcbiAgICAgICAgICAgIC5zZXREZXNjKCdXaGVuIHlvdVxcJ3JlIHVzaW5nIGEgZm9sZGVyIG5vdGUgbmFtZSBsaWtlIFwiZm9sZGVyIG5vdGVcIiBhbmQgaGF2ZSBtdWx0aXBsZSBmb2xkZXIgbm90ZXMgb3BlbiB5b3UgY2FuXFwndCBzZXBhcmF0ZSB0aGVtIGFueW1vcmUgYnkgdGhlaXIgbmFtZS4gVGhpcyBzZXR0aW5nIHVzZXMgdGhlIGZvbGRlciBuYW1lIGluc3RlYWQgYW5kIGFsbG93cyB5b3UgdG8gaW5kZW50aWZ5IHRoZSBkaWZmZXJlbnQgZmlsZXMuJylcclxuICAgICAgICAgICAgLmFkZFRvZ2dsZSgodG9nZ2xlKSA9PlxyXG4gICAgICAgICAgICAgICAgdG9nZ2xlXHJcbiAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKHNldHRpbmdzVGFiLnBsdWdpbi5zZXR0aW5ncy50YWJNYW5hZ2VyRW5hYmxlZClcclxuICAgICAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghdmFsdWUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldHRpbmdzVGFiLnBsdWdpbi50YWJNYW5hZ2VyLnJlc2V0VGFicygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0dGluZ3NUYWIucGx1Z2luLnNldHRpbmdzLnRhYk1hbmFnZXJFbmFibGVkID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXR0aW5nc1RhYi5wbHVnaW4udGFiTWFuYWdlci51cGRhdGVUYWJzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgc2V0dGluZ3NUYWIucGx1Z2luLnNldHRpbmdzLnRhYk1hbmFnZXJFbmFibGVkID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHNldHRpbmdzVGFiLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2V0dGluZ3NUYWIuZGlzcGxheSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgICAgLnNldE5hbWUoJ0RlZmF1bHQgZm9sZGVyIG5vdGUgdHlwZSBmb3IgbmV3IGZvbGRlciBub3RlcycpXHJcbiAgICAgICAgLnNldERlc2MoJ0Nob29zZSB0aGUgZGVmYXVsdCBmaWxlIHR5cGUgZm9yIG5ldyBmb2xkZXIgbm90ZXMuIChjYW52YXMsIG1hcmtkb3duLCAuLi4pJylcclxuICAgICAgICAuYWRkRHJvcGRvd24oKGRyb3Bkb3duKSA9PiB7XHJcbiAgICAgICAgICAgIGRyb3Bkb3duLmFkZE9wdGlvbignLmFzaycsICdhc2sgZm9yIGZpbGUgdHlwZScpO1xyXG4gICAgICAgICAgICBzZXR0aW5nc1RhYi5wbHVnaW4uc2V0dGluZ3Muc3VwcG9ydGVkRmlsZVR5cGVzLmZvckVhY2goKHR5cGUpID0+IHtcclxuICAgICAgICAgICAgICAgIGlmICh0eXBlID09PSAnLm1kJyB8fCB0eXBlID09PSAnbWQnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZHJvcGRvd24uYWRkT3B0aW9uKCcubWQnLCAnbWFya2Rvd24nKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZHJvcGRvd24uYWRkT3B0aW9uKCcuJyArIHR5cGUsIHR5cGUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgaWYgKCFzZXR0aW5nc1RhYi5wbHVnaW4uc2V0dGluZ3Muc3VwcG9ydGVkRmlsZVR5cGVzLmluY2x1ZGVzKHNldHRpbmdzVGFiLnBsdWdpbi5zZXR0aW5ncy5mb2xkZXJOb3RlVHlwZS5yZXBsYWNlKCcuJywgJycpKSAmJiBzZXR0aW5nc1RhYi5wbHVnaW4uc2V0dGluZ3MuZm9sZGVyTm90ZVR5cGUgIT09ICcuYXNrJykge1xyXG4gICAgICAgICAgICAgICAgc2V0dGluZ3NUYWIucGx1Z2luLnNldHRpbmdzLmZvbGRlck5vdGVUeXBlID0gJy5tZCc7XHJcbiAgICAgICAgICAgICAgICBzZXR0aW5nc1RhYi5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY29uc3QgZGVmYXVsdFR5cGUgPSBzZXR0aW5nc1RhYi5wbHVnaW4uc2V0dGluZ3MuZm9sZGVyTm90ZVR5cGUuc3RhcnRzV2l0aCgnLicpID8gc2V0dGluZ3NUYWIucGx1Z2luLnNldHRpbmdzLmZvbGRlck5vdGVUeXBlIDogJy4nICsgc2V0dGluZ3NUYWIucGx1Z2luLnNldHRpbmdzLmZvbGRlck5vdGVUeXBlO1xyXG5cclxuICAgICAgICAgICAgZHJvcGRvd25cclxuICAgICAgICAgICAgICAgIC5zZXRWYWx1ZShkZWZhdWx0VHlwZSlcclxuICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWU6ICcubWQnIHwgJy5jYW52YXMnKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2V0dGluZ3NUYWIucGx1Z2luLnNldHRpbmdzLmZvbGRlck5vdGVUeXBlID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgc2V0dGluZ3NUYWIucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAgICAgICAgIHNldHRpbmdzVGFiLmRpc3BsYXkoKTtcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgY29uc3Qgc2V0dGluZzAgPSBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgIHNldHRpbmcwLnNldE5hbWUoJ1N1cHBvcnRlZCBmaWxlIHR5cGVzIGZvciBmb2xkZXIgbm90ZXMnKVxyXG4gICAgY29uc3QgZGVzYzAgPSBkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7XHJcbiAgICBkZXNjMC5hcHBlbmQoXHJcbiAgICAgICAgJ0Nob29zZSB0aGUgZmlsZSB0eXBlcyB0aGF0IHNob3VsZCBiZSBzdXBwb3J0ZWQgZm9yIGZvbGRlciBub3Rlcy4gKGUuZy4gaWYgeW91IGNsaWNrIG9uIGEgZm9sZGVyIG5hbWUgaXQgc2VhcmNoZXMgZm9yIGFsbCBmaWxlIGV4dGVuc2lvbnMgdGhhdCBhcmUgc3VwcG9ydGVkKScsXHJcbiAgICAgICAgZGVzYzAuY3JlYXRlRWwoJ2JyJyksXHJcbiAgICAgICAgJ0FkZGluZyBtb3JlIGZpbGUgdHlwZXMgbWF5IGNhdXNlIHBlcmZvcm1hbmNlIGlzc3VlcyBiZWNhcmVmdWwgd2hlbiBhZGRpbmcgbW9yZSBmaWxlIHR5cGVzIGFuZCBkb25cXCd0IGFkZCB0b28gbWFueS4nLFxyXG4gICAgKVxyXG4gICAgc2V0dGluZzAuc2V0RGVzYyhkZXNjMCk7XHJcbiAgICBjb25zdCBsaXN0ID0gbmV3IExpc3RDb21wb25lbnQoc2V0dGluZzAuc2V0dGluZ0VsLHNldHRpbmdzVGFiLnBsdWdpbi5zZXR0aW5ncy5zdXBwb3J0ZWRGaWxlVHlwZXMgfHwgW10sIFsnbWQnLCAnY2FudmFzJ10gKTtcclxuICAgIGxpc3Qub24oJ3VwZGF0ZScsIGFzeW5jICh2YWx1ZXM6IHN0cmluZ1tdKSA9PiB7XHJcbiAgICAgICAgc2V0dGluZ3NUYWIucGx1Z2luLnNldHRpbmdzLnN1cHBvcnRlZEZpbGVUeXBlcyA9IHZhbHVlcztcclxuICAgICAgICBhd2FpdCBzZXR0aW5nc1RhYi5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICB9KVxyXG5cclxuICAgIGlmICghc2V0dGluZ3NUYWIucGx1Z2luLnNldHRpbmdzLnN1cHBvcnRlZEZpbGVUeXBlcy5pbmNsdWRlcygnbWQnKSB8fCAhc2V0dGluZ3NUYWIucGx1Z2luLnNldHRpbmdzLnN1cHBvcnRlZEZpbGVUeXBlcy5pbmNsdWRlcygnY2FudmFzJykgfHwgIXNldHRpbmdzVGFiLnBsdWdpbi5zZXR0aW5ncy5zdXBwb3J0ZWRGaWxlVHlwZXMuaW5jbHVkZXMoJ2V4Y2FsaWRyYXcnKSkge1xyXG4gICAgICAgIHNldHRpbmcwLmFkZERyb3Bkb3duKChkcm9wZG93bikgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBvcHRpb25zID0gW1xyXG4gICAgICAgICAgICAgICAgeyB2YWx1ZTogJ21kJywgbGFiZWw6ICdNYXJrZG93bicgfSxcclxuICAgICAgICAgICAgICAgIHsgdmFsdWU6ICdjYW52YXMnLCBsYWJlbDogJ0NhbnZhcycgfSxcclxuICAgICAgICAgICAgICAgIHsgdmFsdWU6ICdleGNhbGlkcmF3JywgbGFiZWw6ICdleGNhbGlkcmF3JyB9LFxyXG4gICAgICAgICAgICAgICAgeyB2YWx1ZTogJ2N1c3RvbScsIGxhYmVsOiAnQ3VzdG9tIGV4dGVuc2lvbicgfSxcclxuICAgICAgICAgICAgXTtcclxuXHJcbiAgICAgICAgICAgIG9wdGlvbnMuZm9yRWFjaCgob3B0aW9uKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIXNldHRpbmdzVGFiLnBsdWdpbi5zZXR0aW5ncy5zdXBwb3J0ZWRGaWxlVHlwZXM/LmluY2x1ZGVzKG9wdGlvbi52YWx1ZSkpIHtcclxuICAgICAgICAgICAgICAgICAgICBkcm9wZG93bi5hZGRPcHRpb24ob3B0aW9uLnZhbHVlLCBvcHRpb24ubGFiZWwpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgZHJvcGRvd24uYWRkT3B0aW9uKCcrJywgJysnKTtcclxuICAgICAgICAgICAgZHJvcGRvd24uc2V0VmFsdWUoJysnKTtcclxuICAgICAgICAgICAgZHJvcGRvd24ub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAodmFsdWUgPT09ICdjdXN0b20nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBBZGRTdXBwb3J0ZWRGaWxlTW9kYWwoc2V0dGluZ3NUYWIuYXBwLCBzZXR0aW5nc1RhYi5wbHVnaW4sIHNldHRpbmdzVGFiLCBsaXN0IGFzIExpc3RDb21wb25lbnQpLm9wZW4oKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGF3YWl0IGxpc3QuYWRkVmFsdWUodmFsdWUudG9Mb3dlckNhc2UoKSk7XHJcbiAgICAgICAgICAgICAgICBzZXR0aW5nc1RhYi5kaXNwbGF5KCk7XHJcbiAgICAgICAgICAgICAgICBzZXR0aW5nc1RhYi5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICBzZXR0aW5nMC5hZGRCdXR0b24oKGJ1dHRvbikgPT5cclxuICAgICAgICAgICAgYnV0dG9uXHJcbiAgICAgICAgICAgICAgICAuc2V0QnV0dG9uVGV4dCgnQWRkIGN1c3RvbSBmaWxlIHR5cGUnKVxyXG4gICAgICAgICAgICAgICAgLnNldEN0YSgpXHJcbiAgICAgICAgICAgICAgICAub25DbGljayhhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgbmV3IEFkZFN1cHBvcnRlZEZpbGVNb2RhbChzZXR0aW5nc1RhYi5hcHAsIHNldHRpbmdzVGFiLnBsdWdpbiwgc2V0dGluZ3NUYWIsIGxpc3QgYXMgTGlzdENvbXBvbmVudCkub3BlbigpO1xyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICBjb25zdCBzZXR0aW5nID0gbmV3IFNldHRpbmcoY29udGFpbmVyRWwpO1xyXG4gICAgY29uc3QgZGVzYyA9IGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtcclxuICAgIGRlc2MuYXBwZW5kKFxyXG4gICAgICAgICdSZXN0YXJ0IGFmdGVyIGNoYW5naW5nIHRoZSB0ZW1wbGF0ZSBwYXRoJyxcclxuICAgICk7XHJcbiAgICBzZXR0aW5nLnNldE5hbWUoJ1RlbXBsYXRlIHBhdGgnKTtcclxuICAgIHNldHRpbmcuc2V0RGVzYyhkZXNjKS5kZXNjRWwuc3R5bGUuY29sb3IgPSBzZXR0aW5nc1RhYi5hcHAudmF1bHQuZ2V0Q29uZmlnKCdhY2NlbnRDb2xvcicpIGFzIHN0cmluZyB8fCAnIzdkNWJlZCc7XHJcbiAgICBzZXR0aW5nLmFkZFNlYXJjaCgoY2IpID0+IHtcclxuICAgICAgICBuZXcgVGVtcGxhdGVTdWdnZXN0KGNiLmlucHV0RWwsIHNldHRpbmdzVGFiLnBsdWdpbik7XHJcbiAgICAgICAgY2Iuc2V0UGxhY2Vob2xkZXIoJ1RlbXBsYXRlIHBhdGgnKTtcclxuICAgICAgICBjYi5zZXRWYWx1ZShzZXR0aW5nc1RhYi5wbHVnaW4uYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChzZXR0aW5nc1RhYi5wbHVnaW4uc2V0dGluZ3MudGVtcGxhdGVQYXRoKT8ubmFtZS5yZXBsYWNlKCcubWQnLCAnJykgfHwgJycpO1xyXG4gICAgICAgIGNiLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICBpZiAodmFsdWUudHJpbSgpID09PSAnJykge1xyXG4gICAgICAgICAgICAgICAgc2V0dGluZ3NUYWIucGx1Z2luLnNldHRpbmdzLnRlbXBsYXRlUGF0aCA9ICcnO1xyXG4gICAgICAgICAgICAgICAgYXdhaXQgc2V0dGluZ3NUYWIucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAgICAgc2V0dGluZ3NUYWIuZGlzcGxheSgpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBjb25zdCBzdG9yYWdlTG9jYXRpb24gPSBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgICAuc2V0TmFtZSgnU3RvcmFnZSBsb2NhdGlvbicpXHJcbiAgICAgICAgLnNldERlc2MoJ0Nob29zZSB3aGVyZSB0byBzdG9yZSB0aGUgZm9sZGVyIG5vdGVzJylcclxuICAgICAgICAuYWRkRHJvcGRvd24oKGRyb3Bkb3duKSA9PlxyXG4gICAgICAgICAgICBkcm9wZG93blxyXG4gICAgICAgICAgICAgICAgLmFkZE9wdGlvbignaW5zaWRlRm9sZGVyJywgJ0luc2lkZSB0aGUgZm9sZGVyJylcclxuICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oJ3BhcmVudEZvbGRlcicsICdJbiB0aGUgcGFyZW50IGZvbGRlcicpXHJcbiAgICAgICAgICAgICAgICAuc2V0VmFsdWUoc2V0dGluZ3NUYWIucGx1Z2luLnNldHRpbmdzLnN0b3JhZ2VMb2NhdGlvbilcclxuICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWU6ICdpbnNpZGVGb2xkZXInIHwgJ3BhcmVudEZvbGRlcicgfCAndmF1bHRGb2xkZXInKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2V0dGluZ3NUYWIucGx1Z2luLnNldHRpbmdzLnN0b3JhZ2VMb2NhdGlvbiA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHNldHRpbmdzVGFiLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgICAgICBzZXR0aW5nc1RhYi5kaXNwbGF5KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgbG9hZEZpbGVDbGFzc2VzKHVuZGVmaW5lZCwgc2V0dGluZ3NUYWIucGx1Z2luKTtcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgKTtcclxuICAgIHN0b3JhZ2VMb2NhdGlvbi5pbmZvRWwuYXBwZW5kVGV4dCgnUmVxdWlyZXMgYSByZXN0YXJ0IHRvIHRha2UgZWZmZWN0Jyk7XHJcbiAgICBzdG9yYWdlTG9jYXRpb24uaW5mb0VsLnN0eWxlLmNvbG9yID0gc2V0dGluZ3NUYWIuYXBwLnZhdWx0LmdldENvbmZpZygnYWNjZW50Q29sb3InKSBhcyBzdHJpbmcgfHwgJyM3ZDViZWQnO1xyXG5cclxuICAgIGNvbnN0IHN3aXRjaExvY2F0aW9uID0gbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgICAgLnNldE5hbWUoJ1N3aXRjaCB0byBuZXcgc3RvcmFnZSBsb2NhdGlvbicpXHJcbiAgICAgICAgLnNldERlc2MoJ01vdmUgYWxsIGZvbGRlciBub3RlcyB0byB0aGUgbmV3IHN0b3JhZ2UgbG9jYXRpb24nKVxyXG4gICAgICAgIC5hZGRCdXR0b24oKGJ1dHRvbikgPT5cclxuICAgICAgICAgICAgYnV0dG9uXHJcbiAgICAgICAgICAgICAgICAuc2V0QnV0dG9uVGV4dCgnU3dpdGNoJylcclxuICAgICAgICAgICAgICAgIC5zZXRDdGEoKVxyXG4gICAgICAgICAgICAgICAgLm9uQ2xpY2soYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBvbGRTdG9yYWdlTG9jYXRpb24gPSBzZXR0aW5nc1RhYi5wbHVnaW4uc2V0dGluZ3Muc3RvcmFnZUxvY2F0aW9uO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChzZXR0aW5nc1RhYi5wbHVnaW4uc2V0dGluZ3Muc3RvcmFnZUxvY2F0aW9uID09PSAncGFyZW50Rm9sZGVyJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBvbGRTdG9yYWdlTG9jYXRpb24gPSAnaW5zaWRlRm9sZGVyJztcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHNldHRpbmdzVGFiLnBsdWdpbi5zZXR0aW5ncy5zdG9yYWdlTG9jYXRpb24gPT09ICdpbnNpZGVGb2xkZXInKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9sZFN0b3JhZ2VMb2NhdGlvbiA9ICdwYXJlbnRGb2xkZXInO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBzZXR0aW5nc1RhYi5zd2l0Y2hTdG9yYWdlTG9jYXRpb24ob2xkU3RvcmFnZUxvY2F0aW9uKTtcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgKTtcclxuICAgIHN3aXRjaExvY2F0aW9uLmluZm9FbC5hcHBlbmRUZXh0KCdSZXF1aXJlcyBhIHJlc3RhcnQgdG8gdGFrZSBlZmZlY3QnKTtcclxuICAgIHN3aXRjaExvY2F0aW9uLmluZm9FbC5zdHlsZS5jb2xvciA9IHNldHRpbmdzVGFiLmFwcC52YXVsdC5nZXRDb25maWcoJ2FjY2VudENvbG9yJykgYXMgc3RyaW5nIHx8ICcjN2Q1YmVkJztcclxuXHJcbiAgICBpZiAoc2V0dGluZ3NUYWIucGx1Z2luLnNldHRpbmdzLnN0b3JhZ2VMb2NhdGlvbiA9PT0gJ3BhcmVudEZvbGRlcicpIHtcclxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgICAgICAgLnNldE5hbWUoJ0RlbGV0ZSBmb2xkZXIgbm90ZXMgd2hlbiBkZWxldGluZyB0aGUgZm9sZGVyJylcclxuICAgICAgICAgICAgLnNldERlc2MoJ0RlbGV0ZSB0aGUgZm9sZGVyIG5vdGUgd2hlbiBkZWxldGluZyB0aGUgZm9sZGVyJylcclxuICAgICAgICAgICAgLmFkZFRvZ2dsZSgodG9nZ2xlKSA9PlxyXG4gICAgICAgICAgICAgICAgdG9nZ2xlXHJcbiAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKHNldHRpbmdzVGFiLnBsdWdpbi5zZXR0aW5ncy5zeW5jRGVsZXRlKVxyXG4gICAgICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2V0dGluZ3NUYWIucGx1Z2luLnNldHRpbmdzLnN5bmNEZWxldGUgPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgc2V0dGluZ3NUYWIucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgICAgICAgIC5zZXROYW1lKCdNb3ZlIGZvbGRlciBub3RlcyB3aGVuIG1vdmluZyB0aGUgZm9sZGVyJylcclxuICAgICAgICAgICAgLnNldERlc2MoJ01vdmUgdGhlIGZvbGRlciBub3RlIHdoZW4gbW92aW5nIHRoZSBmb2xkZXInKVxyXG4gICAgICAgICAgICAuYWRkVG9nZ2xlKCh0b2dnbGUpID0+XHJcbiAgICAgICAgICAgICAgICB0b2dnbGVcclxuICAgICAgICAgICAgICAgICAgICAuc2V0VmFsdWUoc2V0dGluZ3NUYWIucGx1Z2luLnNldHRpbmdzLnN5bmNNb3ZlKVxyXG4gICAgICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2V0dGluZ3NUYWIucGx1Z2luLnNldHRpbmdzLnN5bmNNb3ZlID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHNldHRpbmdzVGFiLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICApO1xyXG4gICAgfVxyXG4gICAgaWYgKFBsYXRmb3JtLmlzRGVza3RvcEFwcCkge1xyXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAgICAgICAuc2V0TmFtZSgnS2V5IGZvciBjcmVhdGluZyBmb2xkZXIgbm90ZScpXHJcbiAgICAgICAgICAgIC5zZXREZXNjKCdUaGUga2V5IGNvbWJpbmF0aW9uIHRvIGNyZWF0ZSBhIGZvbGRlciBub3RlJylcclxuICAgICAgICAgICAgLmFkZERyb3Bkb3duKChkcm9wZG93bikgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKCFQbGF0Zm9ybS5pc01hY09TKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZHJvcGRvd24uYWRkT3B0aW9uKCdjdHJsJywgJ0N0cmwgKyBDbGljaycpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBkcm9wZG93bi5hZGRPcHRpb24oJ2N0cmwnLCAnQ21kICsgQ2xpY2snKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGRyb3Bkb3duLmFkZE9wdGlvbignYWx0JywgJ0FsdCArIENsaWNrJyk7XHJcbiAgICAgICAgICAgICAgICBkcm9wZG93bi5zZXRWYWx1ZShzZXR0aW5nc1RhYi5wbHVnaW4uc2V0dGluZ3MuY3RybEtleSA/ICdjdHJsJyA6ICdhbHQnKTtcclxuICAgICAgICAgICAgICAgIGRyb3Bkb3duLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHNldHRpbmdzVGFiLnBsdWdpbi5zZXR0aW5ncy5jdHJsS2V5ID0gdmFsdWUgPT09ICdjdHJsJztcclxuICAgICAgICAgICAgICAgICAgICBzZXR0aW5nc1RhYi5wbHVnaW4uc2V0dGluZ3MuYWx0S2V5ID0gdmFsdWUgPT09ICdhbHQnO1xyXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHNldHRpbmdzVGFiLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgICAgICBzZXR0aW5nc1RhYi5kaXNwbGF5KCk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAgICAgICAuc2V0TmFtZSgnS2V5IGZvciBvcGVuaW5nIGZvbGRlciBub3RlJylcclxuICAgICAgICAgICAgLnNldERlc2MoJ1NlbGVjdCB0aGUgY29tYmluYXRpb24gdG8gb3BlbiBhIGZvbGRlciBub3RlJylcclxuICAgICAgICAgICAgLmFkZERyb3Bkb3duKChkcm9wZG93bikgPT4ge1xyXG4gICAgICAgICAgICAgICAgZHJvcGRvd24uYWRkT3B0aW9uKCdjbGljaycsICdNb3VzZSBDbGljaycpO1xyXG4gICAgICAgICAgICAgICAgaWYgKCFQbGF0Zm9ybS5pc01hY09TKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZHJvcGRvd24uYWRkT3B0aW9uKCdjdHJsJywgJ0N0cmwgKyBDbGljaycpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBkcm9wZG93bi5hZGRPcHRpb24oJ2N0cmwnLCAnQ21kICsgQ2xpY2snKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGRyb3Bkb3duLmFkZE9wdGlvbignYWx0JywgJ0FsdCArIENsaWNrJyk7XHJcbiAgICAgICAgICAgICAgICBpZiAoc2V0dGluZ3NUYWIucGx1Z2luLnNldHRpbmdzLm9wZW5CeUNsaWNrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZHJvcGRvd24uc2V0VmFsdWUoJ2NsaWNrJyk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHNldHRpbmdzVGFiLnBsdWdpbi5zZXR0aW5ncy5vcGVuV2l0aEN0cmwpIHtcclxuICAgICAgICAgICAgICAgICAgICBkcm9wZG93bi5zZXRWYWx1ZSgnY3RybCcpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBkcm9wZG93bi5zZXRWYWx1ZSgnYWx0Jyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBkcm9wZG93bi5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBzZXR0aW5nc1RhYi5wbHVnaW4uc2V0dGluZ3Mub3BlbkJ5Q2xpY2sgPSB2YWx1ZSA9PT0gJ2NsaWNrJztcclxuICAgICAgICAgICAgICAgICAgICBzZXR0aW5nc1RhYi5wbHVnaW4uc2V0dGluZ3Mub3BlbldpdGhDdHJsID0gdmFsdWUgPT09ICdjdHJsJztcclxuICAgICAgICAgICAgICAgICAgICBzZXR0aW5nc1RhYi5wbHVnaW4uc2V0dGluZ3Mub3BlbldpdGhBbHQgPSB2YWx1ZSA9PT0gJ2FsdCc7XHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgc2V0dGluZ3NUYWIucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAgICAgICAgIHNldHRpbmdzVGFiLmRpc3BsYXkoKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgICAuc2V0TmFtZSgnU3luYyBmb2xkZXIgbmFtZScpXHJcbiAgICAgICAgLnNldERlc2MoJ0F1dG9tYXRpY2FsbHkgcmVuYW1lIHRoZSBmb2xkZXIgbm90ZSB3aGVuIHRoZSBmb2xkZXIgbmFtZSBpcyBjaGFuZ2VkJylcclxuICAgICAgICAuYWRkVG9nZ2xlKCh0b2dnbGUpID0+XHJcbiAgICAgICAgICAgIHRvZ2dsZVxyXG4gICAgICAgICAgICAgICAgLnNldFZhbHVlKHNldHRpbmdzVGFiLnBsdWdpbi5zZXR0aW5ncy5zeW5jRm9sZGVyTmFtZSlcclxuICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBzZXR0aW5nc1RhYi5wbHVnaW4uc2V0dGluZ3Muc3luY0ZvbGRlck5hbWUgPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCBzZXR0aW5nc1RhYi5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgc2V0dGluZ3NUYWIuZGlzcGxheSgpO1xyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICApO1xyXG5cclxuICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAgIC5zZXROYW1lKCdDb25maXJtIGZvbGRlciBub3RlIGRlbGV0aW9uJylcclxuICAgICAgICAuc2V0RGVzYygnQXNrIGZvciBjb25maXJtYXRpb24gYmVmb3JlIGRlbGV0aW5nIGEgZm9sZGVyIG5vdGUnKVxyXG4gICAgICAgIC5hZGRUb2dnbGUoKHRvZ2dsZSkgPT5cclxuICAgICAgICAgICAgdG9nZ2xlXHJcbiAgICAgICAgICAgICAgICAuc2V0VmFsdWUoc2V0dGluZ3NUYWIucGx1Z2luLnNldHRpbmdzLnNob3dEZWxldGVDb25maXJtYXRpb24pXHJcbiAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2V0dGluZ3NUYWIucGx1Z2luLnNldHRpbmdzLnNob3dEZWxldGVDb25maXJtYXRpb24gPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCBzZXR0aW5nc1RhYi5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgc2V0dGluZ3NUYWIuZGlzcGxheSgpO1xyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICApO1xyXG5cclxuICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAgIC5zZXROYW1lKCdEZWxldGVkIGZvbGRlciBub3RlcycpXHJcbiAgICAgICAgLnNldERlc2MoJ1doYXQgaGFwcGVucyB0byB0aGUgZm9sZGVyIG5vdGUgYWZ0ZXIgeW91IGRlbGV0ZSBpdCcpXHJcbiAgICAgICAgLmFkZERyb3Bkb3duKChkcm9wZG93bikgPT4ge1xyXG4gICAgICAgICAgICBkcm9wZG93bi5hZGRPcHRpb24oJ3RyYXNoJywgJ01vdmUgdG8gc3lzdGVtIHRyYXNoJyk7XHJcbiAgICAgICAgICAgIGRyb3Bkb3duLmFkZE9wdGlvbignb2JzaWRpYW5UcmFzaCcsICdNb3ZlIHRvIE9ic2lkaWFuIHRyYXNoICgudHJhc2ggZm9sZGVyKScpO1xyXG4gICAgICAgICAgICBkcm9wZG93bi5hZGRPcHRpb24oJ2RlbGV0ZScsICdEZWxldGUgcGVybWFuZW50bHknKTtcclxuICAgICAgICAgICAgZHJvcGRvd24uc2V0VmFsdWUoc2V0dGluZ3NUYWIucGx1Z2luLnNldHRpbmdzLmRlbGV0ZUZpbGVzQWN0aW9uKTtcclxuICAgICAgICAgICAgZHJvcGRvd24ub25DaGFuZ2UoYXN5bmMgKHZhbHVlOiAndHJhc2gnIHwgJ2RlbGV0ZScgfCAnb2JzaWRpYW5UcmFzaCcpID0+IHtcclxuICAgICAgICAgICAgICAgIHNldHRpbmdzVGFiLnBsdWdpbi5zZXR0aW5ncy5kZWxldGVGaWxlc0FjdGlvbiA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgYXdhaXQgc2V0dGluZ3NUYWIucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAgICAgc2V0dGluZ3NUYWIuZGlzcGxheSgpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIFxyXG4gICAgaWYgKFBsYXRmb3JtLmlzRGVza3RvcCkge1xyXG4gICAgICAgIGNvbnN0IHNldHRpbmczID0gbmV3IFNldHRpbmcoY29udGFpbmVyRWwpO1xyXG4gICAgICAgIHNldHRpbmczLnNldE5hbWUoJ09wZW4gZm9sZGVyIG5vdGUgaW4gYSBuZXcgdGFiIGJ5IGRlZmF1bHQnKTtcclxuICAgICAgICBzZXR0aW5nMy5zZXREZXNjKCdBbHdheXMgb3BlbiBmb2xkZXIgbm90ZXMgaW4gYSBuZXcgdGFiIChleGNlcHQgd2hlbiB5b3UgdHJ5IHRvIG9wZW4gdGhlIHNhbWUgbm90ZSkgaW5zdGVhZCBvZiBoYXZpbmcgdG8gdXNlIGN0cmwvY21kICsgY2xpY2sgdG8gb3BlbiBpbiBhIG5ldyB0YWInKTtcclxuICAgICAgICBzZXR0aW5nMy5hZGRUb2dnbGUoKHRvZ2dsZSkgPT5cclxuICAgICAgICAgICAgdG9nZ2xlXHJcbiAgICAgICAgICAgICAgICAuc2V0VmFsdWUoc2V0dGluZ3NUYWIucGx1Z2luLnNldHRpbmdzLm9wZW5Jbk5ld1RhYilcclxuICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBzZXR0aW5nc1RhYi5wbHVnaW4uc2V0dGluZ3Mub3BlbkluTmV3VGFiID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgc2V0dGluZ3NUYWIucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAgICAgICAgIHNldHRpbmdzVGFiLmRpc3BsYXkoKTtcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgKTtcclxuICAgICAgICBzZXR0aW5nMy5pbmZvRWwuYXBwZW5kVGV4dCgnUmVxdWlyZXMgYSByZXN0YXJ0IHRvIHRha2UgZWZmZWN0Jyk7XHJcbiAgICAgICAgc2V0dGluZzMuaW5mb0VsLnN0eWxlLmNvbG9yID0gc2V0dGluZ3NUYWIuYXBwLnZhdWx0LmdldENvbmZpZygnYWNjZW50Q29sb3InKSBhcyBzdHJpbmcgfHwgJyM3ZDViZWQnO1xyXG4gICAgfVxyXG5cclxuICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAgIC5zZXROYW1lKCdFbmFibGUgZnJvbnQgbWF0dGVyIHRpdGxlIHBsdWdpbiBpbnRlZ3JhdGlvbicpXHJcbiAgICAgICAgLnNldERlc2MoJ0F1dG9tYXRpY2FsbHkgcmVuYW1lIGEgZm9sZGVyIG5hbWUgd2hlbiB0aGUgZm9sZGVyIG5vdGUgaXMgcmVuYW1lZCcpXHJcbiAgICAgICAgLmFkZFRvZ2dsZSgodG9nZ2xlKSA9PlxyXG4gICAgICAgICAgICB0b2dnbGVcclxuICAgICAgICAgICAgICAgIC5zZXRWYWx1ZShzZXR0aW5nc1RhYi5wbHVnaW4uc2V0dGluZ3MuZnJvbnRNYXR0ZXJUaXRsZS5lbmFibGVkKVxyXG4gICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHNldHRpbmdzVGFiLnBsdWdpbi5zZXR0aW5ncy5mcm9udE1hdHRlclRpdGxlLmVuYWJsZWQgPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCBzZXR0aW5nc1RhYi5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldHRpbmdzVGFiLnBsdWdpbi5mbXRwSGFuZGxlciA9IG5ldyBGcm9udE1hdHRlclRpdGxlUGx1Z2luSGFuZGxlcihzZXR0aW5nc1RhYi5wbHVnaW4pO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzZXR0aW5nc1RhYi5wbHVnaW4uZm10cEhhbmRsZXIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldHRpbmdzVGFiLnBsdWdpbi51cGRhdGVCcmVhZGNydW1icyh0cnVlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZXR0aW5nc1RhYi5wbHVnaW4uYXBwLnZhdWx0LmdldEZpbGVzKCkuZm9yRWFjaCgoZmlsZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0dGluZ3NUYWIucGx1Z2luLmZtdHBIYW5kbGVyPy5oYW5kbGVSZW5hbWUoeyBpZDogJycsIHJlc3VsdDogZmFsc2UsIHBhdGg6IGZpbGUucGF0aCB9LCBmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZXR0aW5nc1RhYi5wbHVnaW4uZm10cEhhbmRsZXI/LmRlbGV0ZUV2ZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldHRpbmdzVGFiLnBsdWdpbi5mbXRwSGFuZGxlciA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHNldHRpbmdzVGFiLmRpc3BsYXkoKTtcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgKTtcclxuXHJcbiAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgICAuc2V0TmFtZSgnQ3JlYXRlIGZvbGRlciBub3RlIGZvciBldmVyeSBmb2xkZXInKVxyXG4gICAgICAgIC5zZXREZXNjKCdDcmVhdGUgYSBmb2xkZXIgbm90ZSBmb3IgZXZlcnkgZm9sZGVyIGluIHRoZSB2YXVsdCcpXHJcbiAgICAgICAgLmFkZEJ1dHRvbigoY2IpID0+IHtcclxuICAgICAgICAgICAgY2Iuc2V0SWNvbigncGx1cycpO1xyXG4gICAgICAgICAgICBjYi5zZXRUb29sdGlwKCdDcmVhdGUgZm9sZGVyIG5vdGVzJyk7XHJcbiAgICAgICAgICAgIGNiLm9uQ2xpY2soYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgbmV3IENvbmZpcm1hdGlvbk1vZGFsKHNldHRpbmdzVGFiLmFwcCwgc2V0dGluZ3NUYWIucGx1Z2luKS5vcGVuKCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAgIC5zZXROYW1lKCdBdXRvbWF0aWNhbGx5IGNyZWF0ZSBmb2xkZXIgbm90ZXMnKVxyXG4gICAgICAgIC5zZXREZXNjKCdBdXRvbWF0aWNhbGx5IGNyZWF0ZSBhIGZvbGRlciBub3RlIHdoZW4gYSBuZXcgZm9sZGVyIGlzIGNyZWF0ZWQnKVxyXG4gICAgICAgIC5hZGRUb2dnbGUoKHRvZ2dsZSkgPT5cclxuICAgICAgICAgICAgdG9nZ2xlXHJcbiAgICAgICAgICAgICAgICAuc2V0VmFsdWUoc2V0dGluZ3NUYWIucGx1Z2luLnNldHRpbmdzLmF1dG9DcmVhdGUpXHJcbiAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2V0dGluZ3NUYWIucGx1Z2luLnNldHRpbmdzLmF1dG9DcmVhdGUgPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCBzZXR0aW5nc1RhYi5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgc2V0dGluZ3NUYWIuZGlzcGxheSgpO1xyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICApO1xyXG5cclxuICAgIGlmIChzZXR0aW5nc1RhYi5wbHVnaW4uc2V0dGluZ3MuYXV0b0NyZWF0ZSkge1xyXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAgICAgICAuc2V0TmFtZSgnT3BlbiBmb2xkZXIgbm90ZSBhZnRlciBjcmVhdGluZycpXHJcbiAgICAgICAgICAgIC5zZXREZXNjKCdBdXRvbWF0aWNhbGx5IG9wZW4gdGhlIGZvbGRlciBub3RlIGFmdGVyIGF1dG9tYXRpY2FsbHkgY3JlYXRpbmcgaXQnKVxyXG4gICAgICAgICAgICAuYWRkVG9nZ2xlKCh0b2dnbGUpID0+XHJcbiAgICAgICAgICAgICAgICB0b2dnbGVcclxuICAgICAgICAgICAgICAgICAgICAuc2V0VmFsdWUoc2V0dGluZ3NUYWIucGx1Z2luLnNldHRpbmdzLmF1dG9DcmVhdGVGb2N1c0ZpbGVzKVxyXG4gICAgICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2V0dGluZ3NUYWIucGx1Z2luLnNldHRpbmdzLmF1dG9DcmVhdGVGb2N1c0ZpbGVzID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHNldHRpbmdzVGFiLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2V0dGluZ3NUYWIuZGlzcGxheSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICk7XHJcblxyXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAgICAgICAuc2V0TmFtZSgnQXV0byBjcmVhdGUgZm9sZGVyIG5vdGUgZm9yIGF0dGFjaG1lbnQgZm9sZGVyJylcclxuICAgICAgICAgICAgLnNldERlc2MoJ0F1dG9tYXRpY2FsbHkgY3JlYXRlIGEgZm9sZGVyIG5vdGUgZm9yIHRoZSBhdHRhY2htZW50IGZvbGRlciB3aGVuIHlvdSBhdHRhY2ggYSBmaWxlIHRvIGEgbm90ZSBhbmQgdGhlIGF0dGFjaG1lbnQgZm9sZGVyIGdldHMgY3JlYXRlZCcpXHJcbiAgICAgICAgICAgIC5hZGRUb2dnbGUoKHRvZ2dsZSkgPT5cclxuICAgICAgICAgICAgICAgIHRvZ2dsZVxyXG4gICAgICAgICAgICAgICAgICAgIC5zZXRWYWx1ZShzZXR0aW5nc1RhYi5wbHVnaW4uc2V0dGluZ3MuYXV0b0NyZWF0ZUZvckF0dGFjaG1lbnRGb2xkZXIpXHJcbiAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZXR0aW5nc1RhYi5wbHVnaW4uc2V0dGluZ3MuYXV0b0NyZWF0ZUZvckF0dGFjaG1lbnRGb2xkZXIgPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgc2V0dGluZ3NUYWIucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZXR0aW5nc1RhYi5kaXNwbGF5KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgKTtcclxuICAgIH1cclxufSIsICJleHBvcnQgY2xhc3MgQ3VzdG9tRXZlbnRFbWl0dGVyIHtcclxuICAgIHByaXZhdGUgZXZlbnRzOiB7IFtrZXk6IHN0cmluZ106IEFycmF5PChkYXRhPzogYW55KSA9PiB2b2lkPiB9ID0ge307XHJcblxyXG4gICAgb24oZXZlbnQ6IHN0cmluZywgbGlzdGVuZXI6IChkYXRhPzogYW55KSA9PiB2b2lkKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLmV2ZW50c1tldmVudF0pIHtcclxuICAgICAgICAgICAgdGhpcy5ldmVudHNbZXZlbnRdID0gW107XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuZXZlbnRzW2V2ZW50XS5wdXNoKGxpc3RlbmVyKTtcclxuICAgIH1cclxuXHJcbiAgICBvZmYoZXZlbnQ6IHN0cmluZywgbGlzdGVuZXI6IChkYXRhPzogYW55KSA9PiB2b2lkKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLmV2ZW50c1tldmVudF0pIHJldHVybjtcclxuXHJcbiAgICAgICAgdGhpcy5ldmVudHNbZXZlbnRdID0gdGhpcy5ldmVudHNbZXZlbnRdLmZpbHRlcigobCkgPT4gbCAhPT0gbGlzdGVuZXIpO1xyXG4gICAgfVxyXG5cclxuICAgIGVtaXQoZXZlbnQ6IHN0cmluZywgZGF0YT86IGFueSkge1xyXG4gICAgICAgIGlmICghdGhpcy5ldmVudHNbZXZlbnRdKSByZXR1cm47XHJcblxyXG4gICAgICAgIHRoaXMuZXZlbnRzW2V2ZW50XS5mb3JFYWNoKChsaXN0ZW5lcikgPT4gbGlzdGVuZXIoZGF0YSkpO1xyXG4gICAgfVxyXG59IiwgImltcG9ydCB7IEN1c3RvbUV2ZW50RW1pdHRlciB9IGZyb20gJ3NyYy9ldmVudHMvRXZlbnRFbWl0dGVyJztcclxuXHJcbmV4cG9ydCBjbGFzcyBMaXN0Q29tcG9uZW50IHtcclxuXHRlbWl0dGVyOiBDdXN0b21FdmVudEVtaXR0ZXI7XHJcblx0Y29udGFpbmVyRWw6IEhUTUxFbGVtZW50O1xyXG5cdGNvbnRyb2xFbDogSFRNTEVsZW1lbnQ7XHJcblx0ZW1wdHlTdGF0ZUVsOiBIVE1MRWxlbWVudDtcclxuXHRsaXN0RWw6IEhUTUxFbGVtZW50O1xyXG5cdHZhbHVlczogc3RyaW5nW107XHJcblx0ZGVmYXVsdFZhbHVlczogc3RyaW5nW107XHJcblx0Y29uc3RydWN0b3IoY29udGFpbmVyRWw6IEhUTUxFbGVtZW50LCB2YWx1ZXM6IHN0cmluZ1tdID0gW10sIGRlZmF1bHRWYWx1ZXM6IHN0cmluZ1tdID0gW10pIHtcclxuXHRcdHRoaXMuZW1pdHRlciA9IG5ldyBDdXN0b21FdmVudEVtaXR0ZXIoKTtcclxuXHRcdHRoaXMuY29udGFpbmVyRWwgPSBjb250YWluZXJFbDtcclxuXHRcdHRoaXMuY29udHJvbEVsID0gY29udGFpbmVyRWwucXVlcnlTZWxlY3RvcignLnNldHRpbmctaXRlbS1jb250cm9sJykgfHwgY29udGFpbmVyRWw7XHJcblx0XHR0aGlzLmxpc3RFbCA9IHRoaXMuY29udHJvbEVsLmNyZWF0ZURpdignc2V0dGluZy1jb21tYW5kLWhvdGtleXMnKTtcclxuXHRcdHRoaXMuYWRkUmVzZXRCdXR0b24oKTtcclxuXHRcdHRoaXMuc2V0VmFsdWVzKHZhbHVlcyk7XHJcblx0XHR0aGlzLmRlZmF1bHRWYWx1ZXMgPSBkZWZhdWx0VmFsdWVzO1xyXG5cdH1cclxuXHJcblx0b24oZXZlbnQ6IHN0cmluZywgbGlzdGVuZXI6IChkYXRhPzogYW55KSA9PiB2b2lkKSB7XHJcblx0XHR0aGlzLmVtaXR0ZXIub24oZXZlbnQsIGxpc3RlbmVyKTtcclxuXHR9XHJcblxyXG5cdG9mZihldmVudDogc3RyaW5nLCBsaXN0ZW5lcjogKGRhdGE/OiBhbnkpID0+IHZvaWQpIHtcclxuXHRcdHRoaXMuZW1pdHRlci5vZmYoZXZlbnQsIGxpc3RlbmVyKTtcclxuXHR9XHJcblxyXG5cdHByaXZhdGUgZW1pdChldmVudDogc3RyaW5nLCBkYXRhPzogYW55KSB7XHJcblx0XHR0aGlzLmVtaXR0ZXIuZW1pdChldmVudCwgZGF0YSk7XHJcblx0fVxyXG5cclxuXHRzZXRWYWx1ZXModmFsdWVzOiBzdHJpbmdbXSkge1xyXG5cdFx0dGhpcy5yZW1vdmVFbGVtZW50cygpO1xyXG5cdFx0dGhpcy52YWx1ZXMgPSB2YWx1ZXM7XHJcblx0XHRpZiAodmFsdWVzLmxlbmd0aCAhPT0gMCkge1xyXG5cdFx0XHR2YWx1ZXMuZm9yRWFjaCgodmFsdWUpID0+IHtcclxuXHRcdFx0XHR0aGlzLmFkZEVsZW1lbnQodmFsdWUpO1xyXG5cdFx0XHR9KTtcclxuXHRcdH1cclxuXHRcdHRoaXMuZW1pdCgndXBkYXRlJywgdGhpcy52YWx1ZXMpO1xyXG5cdH1cclxuXHJcblx0cmVtb3ZlRWxlbWVudHMoKSB7XHJcblx0XHR0aGlzLmxpc3RFbC5lbXB0eSgpO1xyXG5cdH1cclxuXHJcblx0YWRkRWxlbWVudCh2YWx1ZTogc3RyaW5nKSB7XHJcblx0XHR0aGlzLmxpc3RFbC5jcmVhdGVTcGFuKCdzZXR0aW5nLWhvdGtleScsIChzcGFuKSA9PiB7XHJcblx0XHRcdGlmICh2YWx1ZS50b0xvY2FsZUxvd2VyQ2FzZSgpID09PSAnbWQnKSB7XHJcblx0XHRcdFx0c3Bhbi5pbm5lclRleHQgPSAnbWFya2Rvd24nO1xyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdHNwYW4uaW5uZXJUZXh0ID0gdmFsdWU7XHJcblx0XHRcdH1cclxuXHRcdFx0c3Bhbi5zZXRBdHRyaWJ1dGUoJ2V4dGVuc2lvbicsIHZhbHVlKTtcclxuXHRcdFx0Y29uc3QgcmVtb3ZlU3BhbiA9IHNwYW4uY3JlYXRlRWwoJ3NwYW4nLCB7IGNsczogJ29mbi1saXN0LWl0ZW0tcmVtb3ZlIHNldHRpbmctaG90a2V5LWljb24nIH0pO1xyXG5cdFx0XHRjb25zdCBzdmcgPSAnPHN2ZyB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgd2lkdGg9XCIyNFwiIGhlaWdodD1cIjI0XCIgdmlld0JveD1cIjAgMCAyNCAyNFwiIGZpbGw9XCJub25lXCIgc3Ryb2tlPVwiY3VycmVudENvbG9yXCIgc3Ryb2tlLXdpZHRoPVwiMlwiIHN0cm9rZS1saW5lY2FwPVwicm91bmRcIiBzdHJva2UtbGluZWpvaW49XCJyb3VuZFwiIGNsYXNzPVwic3ZnLWljb24gbHVjaWRlLXhcIj48bGluZSB4MT1cIjE4XCIgeTE9XCI2XCIgeDI9XCI2XCIgeTI9XCIxOFwiPjwvbGluZT48bGluZSB4MT1cIjZcIiB5MT1cIjZcIiB4Mj1cIjE4XCIgeTI9XCIxOFwiPjwvbGluZT48L3N2Zz4nO1xyXG5cdFx0XHRjb25zdCBzdmdFbGVtZW50ID0gcmVtb3ZlU3Bhbi5jcmVhdGVFbCgnc3BhbicsIHsgY2xzOiAnb2ZuLWxpc3QtaXRlbS1yZW1vdmUtaWNvbicgfSk7XHJcblx0XHRcdHN2Z0VsZW1lbnQuaW5uZXJIVE1MID0gc3ZnO1xyXG5cdFx0XHRyZW1vdmVTcGFuLm9uQ2xpY2tFdmVudCgoZSkgPT4ge1xyXG5cdFx0XHRcdHRoaXMucmVtb3ZlVmFsdWUodmFsdWUpO1xyXG5cdFx0XHRcdHNwYW4ucmVtb3ZlKCk7XHJcblx0XHRcdH0pO1xyXG5cdFx0fSk7XHJcblx0fVxyXG5cclxuXHRhc3luYyBhZGRWYWx1ZSh2YWx1ZTogc3RyaW5nKSB7XHJcblx0XHR0aGlzLnZhbHVlcy5wdXNoKHZhbHVlKTtcclxuXHRcdHRoaXMuYWRkRWxlbWVudCh2YWx1ZSk7XHJcblx0XHR0aGlzLmVtaXQoJ2FkZCcsIHZhbHVlKTtcclxuXHRcdHRoaXMuZW1pdCgndXBkYXRlJywgdGhpcy52YWx1ZXMpO1xyXG5cdH1cclxuXHJcblx0YWRkUmVzZXRCdXR0b24oKSB7XHJcblx0XHRjb25zdCByZXNldEJ1dHRvbiA9IHRoaXMuY29udHJvbEVsLmNyZWF0ZUVsKCdzcGFuJywgeyBjbHM6ICdjbGlja2FibGUtaWNvbiBzZXR0aW5nLXJlc3RvcmUtaG90a2V5LWJ1dHRvbicgfSk7XHJcblx0XHRjb25zdCBzdmcgPSAnPHN2ZyB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgd2lkdGg9XCIyNFwiIGhlaWdodD1cIjI0XCIgdmlld0JveD1cIjAgMCAyNCAyNFwiIGZpbGw9XCJub25lXCIgc3Ryb2tlPVwiY3VycmVudENvbG9yXCIgc3Ryb2tlLXdpZHRoPVwiMlwiIHN0cm9rZS1saW5lY2FwPVwicm91bmRcIiBzdHJva2UtbGluZWpvaW49XCJyb3VuZFwiIGNsYXNzPVwic3ZnLWljb24gbHVjaWRlLXJvdGF0ZS1jY3dcIj48cGF0aCBkPVwiTTMgMnY2aDZcIj48L3BhdGg+PHBhdGggZD1cIk0zIDEzYTkgOSAwIDEgMCAzLTcuN0wzIDhcIj48L3BhdGg+PC9zdmc+JztcclxuXHRcdHJlc2V0QnV0dG9uLmlubmVySFRNTCA9IHN2ZztcclxuXHRcdHJlc2V0QnV0dG9uLm9uQ2xpY2tFdmVudCgoZSkgPT4ge1xyXG5cdFx0XHRcdHRoaXMuc2V0VmFsdWVzKHRoaXMuZGVmYXVsdFZhbHVlcyk7XHJcblx0XHR9KTtcclxuXHRcdHJldHVybiB0aGlzO1xyXG5cdH1cclxuXHJcblx0cmVtb3ZlVmFsdWUodmFsdWU6IHN0cmluZykge1xyXG5cdFx0dGhpcy52YWx1ZXMgPSB0aGlzLnZhbHVlcy5maWx0ZXIoKHYpID0+IHYgIT09IHZhbHVlKTtcclxuXHRcdHRoaXMubGlzdEVsLmZpbmQoYFtleHRlbnNpb249JyR7dmFsdWV9J11gKS5yZW1vdmUoKTtcclxuXHRcdHRoaXMuZW1pdCgncmVtb3ZlJywgdmFsdWUpO1xyXG5cdFx0dGhpcy5lbWl0KCd1cGRhdGUnLCB0aGlzLnZhbHVlcyk7XHJcblx0fVxyXG59IiwgImltcG9ydCB7IEFwcCwgTW9kYWwsIFNldHRpbmcsIFRGb2xkZXIsIE5vdGljZSB9IGZyb20gJ29ic2lkaWFuJztcclxuaW1wb3J0IEZvbGRlck5vdGVzUGx1Z2luIGZyb20gJy4uL21haW4nO1xyXG5pbXBvcnQgeyBMaXN0Q29tcG9uZW50IH0gZnJvbSAnc3JjL2Z1bmN0aW9ucy9MaXN0Q29tcG9uZW50JztcclxuaW1wb3J0IHsgU2V0dGluZ1RhYiB9IGZyb20gJ29ic2lkaWFuJztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEFkZFN1cHBvcnRlZEZpbGVNb2RhbCBleHRlbmRzIE1vZGFsIHtcclxuICAgIHBsdWdpbjogRm9sZGVyTm90ZXNQbHVnaW47XHJcbiAgICBhcHA6IEFwcDtcclxuICAgIG5hbWU6IHN0cmluZztcclxuICAgIGxpc3Q6IExpc3RDb21wb25lbnQ7XHJcbiAgICBzZXR0aW5nc1RhYjogU2V0dGluZ1RhYjtcclxuICAgIGNvbnN0cnVjdG9yKGFwcDogQXBwLCBwbHVnaW46IEZvbGRlck5vdGVzUGx1Z2luLCBzZXR0aW5nc1RhYjogU2V0dGluZ1RhYiwgbGlzdDogTGlzdENvbXBvbmVudCkge1xyXG4gICAgICAgIHN1cGVyKGFwcCk7XHJcbiAgICAgICAgdGhpcy5wbHVnaW4gPSBwbHVnaW47XHJcbiAgICAgICAgdGhpcy5hcHAgPSBhcHA7XHJcbiAgICAgICAgdGhpcy5uYW1lID0gJyc7XHJcbiAgICAgICAgdGhpcy5saXN0ID0gbGlzdDtcclxuICAgICAgICB0aGlzLnNldHRpbmdzVGFiID0gc2V0dGluZ3NUYWI7XHJcbiAgICB9XHJcbiAgICBvbk9wZW4oKSB7XHJcbiAgICAgICAgY29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XHJcbiAgICAgICAgLy8gY2xvc2Ugd2hlbiB1c2VyIHByZXNzZXMgZW50ZXJcclxuICAgICAgICBjb250ZW50RWwuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIChlKSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChlLmtleSA9PT0gJ0VudGVyJykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgY29udGVudEVsLmNyZWF0ZUVsKCdoMicsIHsgdGV4dDogJ0V4dGVuc2lvbiBuYW1lJyB9KTtcclxuICAgICAgICBuZXcgU2V0dGluZyhjb250ZW50RWwpXHJcbiAgICAgICAgICAgIC5zZXROYW1lKCdFbnRlciB0aGUgbmFtZSBvZiB0aGUgZXh0ZW5zaW9uIChvbmx5IHRoZSBzaG9ydCBmb3JtLCBlLmcuIFwibWRcIiknKVxyXG4gICAgICAgICAgICAuYWRkVGV4dCgodGV4dCkgPT5cclxuICAgICAgICAgICAgICAgIHRleHRcclxuICAgICAgICAgICAgICAgICAgICAuc2V0VmFsdWUoJycpXHJcbiAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodmFsdWUudHJpbSgpICE9PSAnJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5uYW1lID0gdmFsdWUudHJpbSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgKTtcclxuICAgIH1cclxuICAgIGFzeW5jIG9uQ2xvc2UoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMubmFtZS50b0xvY2FsZUxvd2VyQ2FzZSgpID09PSAnbWFya2Rvd24nKSB7XHJcbiAgICAgICAgICAgIHRoaXMubmFtZSA9ICdtZCc7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xyXG4gICAgICAgIGlmICh0aGlzLm5hbWUgPT09ICcnKSB7XHJcbiAgICAgICAgICAgIGNvbnRlbnRFbC5lbXB0eSgpO1xyXG4gICAgICAgICAgICB0aGlzLnNldHRpbmdzVGFiLmRpc3BsYXkoKTtcclxuICAgICAgICB9IGVsc2UgaWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLnN1cHBvcnRlZEZpbGVUeXBlcy5pbmNsdWRlcyh0aGlzLm5hbWUudG9Mb3dlckNhc2UoKSkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBOb3RpY2UoJ1RoaXMgZXh0ZW5zaW9uIGlzIGFscmVhZHkgc3VwcG9ydGVkJyk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgLy8gQHRzLWlnbm9yZVxyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLmxpc3QuYWRkVmFsdWUodGhpcy5uYW1lLnRvTG93ZXJDYXNlKCkpO1xyXG4gICAgICAgICAgICB0aGlzLnNldHRpbmdzVGFiLmRpc3BsYXkoKTtcclxuICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICAgIGNvbnRlbnRFbC5lbXB0eSgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCAiaW1wb3J0IEZvbGRlck5vdGVzUGx1Z2luIGZyb20gJ3NyYy9tYWluJztcclxuaW1wb3J0IHsgZ2V0RGVmZXIsIExpc3RlbmVyLCBFdmVudHMsIEFwaUludGVyZmFjZSwgRGVmZXJJbnRlcmZhY2UsIExpc3RlbmVyUmVmLCBFdmVudERpc3BhdGNoZXJJbnRlcmZhY2UgfSBmcm9tICdmcm9udC1tYXR0ZXItcGx1Z2luLWFwaS1wcm92aWRlcic7XHJcbmltcG9ydCB7IEFwcCwgVEZpbGUsIFRGb2xkZXIgfSBmcm9tICdvYnNpZGlhbic7XHJcbmltcG9ydCB7IGV4dHJhY3RGb2xkZXJOYW1lLCBnZXRGb2xkZXIsIGdldEZvbGRlck5vdGUgfSBmcm9tICdzcmMvZnVuY3Rpb25zL2ZvbGRlck5vdGVGdW5jdGlvbnMnO1xyXG5leHBvcnQgY2xhc3MgRnJvbnRNYXR0ZXJUaXRsZVBsdWdpbkhhbmRsZXIge1xyXG5cdHBsdWdpbjogRm9sZGVyTm90ZXNQbHVnaW47XHJcblx0YXBwOiBBcHA7XHJcblx0YXBpOiBBcGlJbnRlcmZhY2UgfCBudWxsID0gbnVsbDtcclxuXHRkZWZmZXI6IERlZmVySW50ZXJmYWNlIHwgbnVsbCA9IG51bGw7XHJcblx0bW9kaWZpZWRGb2xkZXJzOiBNYXA8c3RyaW5nLCBURm9sZGVyPiA9IG5ldyBNYXAoKTtcclxuXHRldmVudFJlZjogTGlzdGVuZXJSZWY8J21hbmFnZXI6dXBkYXRlJz47XHJcblx0ZGlzcGF0Y2hlcjogRXZlbnREaXNwYXRjaGVySW50ZXJmYWNlPEV2ZW50cz5cclxuXHRjb25zdHJ1Y3RvcihwbHVnaW46IEZvbGRlck5vdGVzUGx1Z2luKSB7XHJcblx0XHR0aGlzLnBsdWdpbiA9IHBsdWdpbjtcclxuXHRcdHRoaXMuYXBwID0gcGx1Z2luLmFwcDtcclxuXHJcblx0XHQoYXN5bmMgKCkgPT4ge1xyXG5cdFx0XHR0aGlzLmRlZmZlciA9IGdldERlZmVyKHRoaXMuYXBwKTtcclxuXHRcdFx0aWYgKHRoaXMuZGVmZmVyLmlzUGx1Z2luUmVhZHkoKSkge1xyXG5cdFx0XHRcdHRoaXMuYXBpID0gdGhpcy5kZWZmZXIuZ2V0QXBpKCk7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0YXdhaXQgdGhpcy5kZWZmZXIuYXdhaXRQbHVnaW4oKTtcclxuXHRcdFx0XHR0aGlzLmFwaSA9IHRoaXMuZGVmZmVyLmdldEFwaSgpO1xyXG5cdFx0XHRcdC8vIGlmIHlvdSB3YW50IHRvIHdhaXQgZmVhdHVyZXMgeW91IGNhbiB1c2UgdGhlIGZvbGxvd2luZyBjaGFpblxyXG5cdFx0XHRcdGlmICghdGhpcy5kZWZmZXIuaXNGZWF0dXJlc1JlYWR5KCkpIHtcclxuXHRcdFx0XHRcdGF3YWl0IHRoaXMuZGVmZmVyLmF3YWl0RmVhdHVyZXMoKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdFx0Y29uc3QgZGlzcGF0Y2hlciA9IHRoaXMuYXBpPy5nZXRFdmVudERpc3BhdGNoZXIoKTtcclxuXHRcdFx0aWYgKGRpc3BhdGNoZXIpIHtcclxuXHRcdFx0XHR0aGlzLmRpc3BhdGNoZXIgPSBkaXNwYXRjaGVyO1xyXG5cdFx0XHR9XHJcblx0XHRcdGNvbnN0IGV2ZW50OiBMaXN0ZW5lcjxFdmVudHMsICdtYW5hZ2VyOnVwZGF0ZSc+ID0ge1xyXG5cdFx0XHRcdG5hbWU6ICdtYW5hZ2VyOnVwZGF0ZScsXHJcblx0XHRcdFx0Y2I6IChkYXRhKSA9PiB7XHJcblx0XHRcdFx0XHR0aGlzLmhhbmRsZVJlbmFtZShkYXRhIGFzIGFueSwgdHJ1ZSk7XHJcblx0XHRcdFx0fSxcclxuXHRcdFx0fTtcclxuXHRcdFx0Ly8gS2VlcCByZWYgdG8gcmVtb3ZlIGxpc3RlbmVyXHJcblx0XHRcdGNvbnN0IHJlZiA9IGRpc3BhdGNoZXI/LmFkZExpc3RlbmVyKGV2ZW50KTtcclxuXHRcdFx0aWYgKHJlZikge1xyXG5cdFx0XHRcdHRoaXMuZXZlbnRSZWYgPSByZWY7XHJcblx0XHRcdH1cclxuXHRcdFx0dGhpcy5wbHVnaW4uYXBwLnZhdWx0LmdldEZpbGVzKCkuZm9yRWFjaCgoZmlsZSkgPT4ge1xyXG5cdFx0XHRcdHRoaXMuaGFuZGxlUmVuYW1lKHsgaWQ6ICcnLCByZXN1bHQ6IGZhbHNlLCBwYXRoOiBmaWxlLnBhdGggfSwgZmFsc2UpO1xyXG5cdFx0XHR9KTtcclxuXHRcdFx0dGhpcy5wbHVnaW4udXBkYXRlQnJlYWRjcnVtYnMoKTtcclxuXHRcdH0pKCk7XHJcblx0fVxyXG5cdGRlbGV0ZUV2ZW50KCkge1xyXG5cdFx0aWYgKHRoaXMuZXZlbnRSZWYpIHtcclxuXHRcdFx0dGhpcy5kaXNwYXRjaGVyLnJlbW92ZUxpc3RlbmVyKHRoaXMuZXZlbnRSZWYpO1xyXG5cdFx0fVxyXG5cdH1cclxuXHRhc3luYyBoYW5kbGVSZW5hbWUoZGF0YToge1xyXG5cdFx0aWQ6IHN0cmluZztcclxuXHRcdHJlc3VsdDogYm9vbGVhbjtcclxuXHRcdHBhdGg6IHN0cmluZztcclxuXHR9LCBpc0V2ZW50OiBib29sZWFuKSB7XHJcblx0XHRpZiAoKGRhdGEgYXMgYW55KS5kYXRhKSBkYXRhID0gKGRhdGEgYXMgYW55KS5kYXRhXHJcblx0XHRjb25zdCBmaWxlID0gdGhpcy5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKGRhdGEucGF0aCk7XHJcblx0XHRpZiAoIShmaWxlIGluc3RhbmNlb2YgVEZpbGUpKSB7IHJldHVybjsgfVxyXG5cclxuXHRcdGNvbnN0IHJlc29sdmVyID0gdGhpcy5hcGk/LmdldFJlc29sdmVyRmFjdG9yeSgpPy5jcmVhdGVSZXNvbHZlcignI2ZlYXR1cmUtaWQjJyk7XHJcblx0XHRjb25zdCBuZXdOYW1lID0gcmVzb2x2ZXI/LnJlc29sdmUoZmlsZT8ucGF0aCA/PyAnJylcclxuXHRcdGNvbnN0IGZvbGRlciA9IGdldEZvbGRlcih0aGlzLnBsdWdpbiwgZmlsZSk7XHJcblx0XHRpZiAoIShmb2xkZXIgaW5zdGFuY2VvZiBURm9sZGVyKSkgeyByZXR1cm47IH1cclxuXHRcdFxyXG5cdFx0Y29uc3QgZm9sZGVyTm90ZSA9IGdldEZvbGRlck5vdGUodGhpcy5wbHVnaW4sIGZvbGRlci5wYXRoKTtcclxuXHRcdGlmICghZm9sZGVyTm90ZSkgeyByZXR1cm4gfVxyXG5cdFx0aWYgKGZvbGRlck5vdGUgIT09IGZpbGUpIHsgcmV0dXJuIH1cclxuXHJcblx0XHRpZiAoaXNFdmVudCkge1xyXG5cdFx0XHR0aGlzLnBsdWdpbi5jaGFuZ2VOYW1lKGZvbGRlciwgbmV3TmFtZSwgdHJ1ZSk7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHR0aGlzLnBsdWdpbi5jaGFuZ2VOYW1lKGZvbGRlciwgbmV3TmFtZSwgZmFsc2UpO1xyXG5cdFx0fVxyXG5cdFx0aWYgKG5ld05hbWUpIHtcclxuXHRcdFx0Zm9sZGVyLm5ld05hbWUgPSBuZXdOYW1lO1xyXG5cdFx0XHR0aGlzLm1vZGlmaWVkRm9sZGVycy5zZXQoZm9sZGVyLnBhdGgsIGZvbGRlcik7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHRmb2xkZXIubmV3TmFtZSA9IG51bGw7XHJcblx0XHRcdHRoaXMubW9kaWZpZWRGb2xkZXJzLmRlbGV0ZShmb2xkZXIucGF0aCk7XHJcblx0XHR9XHJcblxyXG5cdH1cclxufVxyXG4iLCAiaW1wb3J0IHsgQXBwLCBCdXR0b25Db21wb25lbnQsIE1vZGFsLCBTZXR0aW5nLCBURm9sZGVyLCBOb3RpY2UgfSBmcm9tICdvYnNpZGlhbic7XHJcbmltcG9ydCBGb2xkZXJOb3Rlc1BsdWdpbiBmcm9tICcuLi9tYWluJztcclxuaW1wb3J0IHsgY3JlYXRlRm9sZGVyTm90ZSwgZ2V0Rm9sZGVyTm90ZSB9IGZyb20gJ3NyYy9mdW5jdGlvbnMvZm9sZGVyTm90ZUZ1bmN0aW9ucyc7XHJcbmltcG9ydCB7IGdldFRlbXBsYXRlUGx1Z2lucyB9IGZyb20gJ3NyYy90ZW1wbGF0ZSc7XHJcbmltcG9ydCB7IGdldEV4Y2x1ZGVkRm9sZGVyIH0gZnJvbSAnc3JjL0V4Y2x1ZGVGb2xkZXJzL2Z1bmN0aW9ucy9mb2xkZXJGdW5jdGlvbnMnO1xyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBDb25maXJtYXRpb25Nb2RhbCBleHRlbmRzIE1vZGFsIHtcclxuXHRwbHVnaW46IEZvbGRlck5vdGVzUGx1Z2luO1xyXG5cdGFwcDogQXBwO1xyXG5cdGZvbGRlcjogVEZvbGRlcjtcclxuXHRleHRlbnNpb246IHN0cmluZztcclxuXHRjb25zdHJ1Y3RvcihhcHA6IEFwcCwgcGx1Z2luOiBGb2xkZXJOb3Rlc1BsdWdpbikge1xyXG5cdFx0c3VwZXIoYXBwKTtcclxuXHRcdHRoaXMucGx1Z2luID0gcGx1Z2luO1xyXG5cdFx0dGhpcy5hcHAgPSBhcHA7XHJcblx0XHR0aGlzLmV4dGVuc2lvbiA9IHBsdWdpbi5zZXR0aW5ncy5mb2xkZXJOb3RlVHlwZTtcclxuXHR9XHJcblx0b25PcGVuKCkge1xyXG5cdFx0dGhpcy5tb2RhbEVsLmFkZENsYXNzKCdmbi1jb25maXJtYXRpb24tbW9kYWwnKTtcclxuXHRcdGxldCB0ZW1wbGF0ZUZvbGRlclBhdGg6IHN0cmluZztcclxuXHRcdGNvbnN0IHsgdGVtcGxhdGVGb2xkZXIsIHRlbXBsYXRlclBsdWdpbiB9ID0gZ2V0VGVtcGxhdGVQbHVnaW5zKHRoaXMucGx1Z2luLmFwcCk7XHJcblx0XHRpZiAoKCF0ZW1wbGF0ZUZvbGRlciB8fCB0ZW1wbGF0ZUZvbGRlcj8udHJpbSgpID09PSAnJykgJiYgIXRlbXBsYXRlclBsdWdpbikge1xyXG5cdFx0XHR0ZW1wbGF0ZUZvbGRlclBhdGggPSAnJztcclxuXHRcdH1cclxuXHRcdGlmICh0ZW1wbGF0ZXJQbHVnaW4pIHtcclxuXHRcdFx0dGVtcGxhdGVGb2xkZXJQYXRoID0gdGVtcGxhdGVyUGx1Z2luLnBsdWdpbj8uc2V0dGluZ3M/LnRlbXBsYXRlc19mb2xkZXIgYXMgc3RyaW5nO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0dGVtcGxhdGVGb2xkZXJQYXRoID0gdGVtcGxhdGVGb2xkZXI7XHJcblx0XHR9XHJcblxyXG5cdFx0Y29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XHJcblx0XHRjb250ZW50RWwuY3JlYXRlRWwoJ2gyJywgeyB0ZXh0OiAnQ3JlYXRlIGZvbGRlciBub3RlIGZvciBldmVyeSBmb2xkZXInIH0pO1xyXG5cdFx0Y29uc3Qgc2V0dGluZyA9IG5ldyBTZXR0aW5nKGNvbnRlbnRFbCk7XHJcblx0XHRzZXR0aW5nLmluZm9FbC5jcmVhdGVFbCgncCcsIHsgdGV4dDogJ01ha2Ugc3VyZSB0byBiYWNrdXAgeW91ciB2YXVsdCBiZWZvcmUgdXNpbmcgdGhpcyBmZWF0dXJlLicgfSkuc3R5bGUuY29sb3IgPSAnI2ZiNDY0Yyc7XHJcblx0XHRzZXR0aW5nLmluZm9FbC5jcmVhdGVFbCgncCcsIHsgdGV4dDogJ1RoaXMgZmVhdHVyZSB3aWxsIGNyZWF0ZSBhIGZvbGRlciBub3RlIGZvciBldmVyeSBmb2xkZXIgaW4geW91ciB2YXVsdC4nIH0pO1xyXG5cdFx0c2V0dGluZy5pbmZvRWwuY3JlYXRlRWwoJ3AnLCB7IHRleHQ6ICdFdmVyeSBmb2xkZXIgdGhhdCBhbHJlYWR5IGhhcyBhIGZvbGRlciBub3RlIHdpbGwgYmUgaWdub3JlZC4nIH0pO1xyXG5cdFx0c2V0dGluZy5pbmZvRWwuY3JlYXRlRWwoJ3AnLCB7IHRleHQ6ICdFdmVyeSBleGNsdWRlZCBmb2xkZXIgd2lsbCBiZSBpZ25vcmVkLicgfSk7XHJcblx0XHRpZiAoIXRoaXMucGx1Z2luLnNldHRpbmdzLnRlbXBsYXRlUGF0aCB8fCB0aGlzLnBsdWdpbi5zZXR0aW5ncy50ZW1wbGF0ZVBhdGg/LnRyaW0oKSA9PT0gJycpIHtcclxuXHRcdFx0bmV3IFNldHRpbmcoY29udGVudEVsKVxyXG5cdFx0XHRcdC5zZXROYW1lKCdGb2xkZXIgbm90ZSBmaWxlIGV4dGVuc2lvbicpXHJcblx0XHRcdFx0LnNldERlc2MoJ0Nob29zZSB0aGUgZmlsZSBleHRlbnNpb24gZm9yIHRoZSBmb2xkZXIgbm90ZXMuJylcclxuXHRcdFx0XHQuYWRkRHJvcGRvd24oKGNiKSA9PiB7XHJcblx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5zdXBwb3J0ZWRGaWxlVHlwZXMuZm9yRWFjaCgoZXh0ZW5zaW9uKSA9PiB7XHJcblx0XHRcdFx0XHRcdGNiLmFkZE9wdGlvbignLicgKyBleHRlbnNpb24sIGV4dGVuc2lvbik7XHJcblx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdGNiLnNldFZhbHVlKHRoaXMuZXh0ZW5zaW9uKTtcclxuXHRcdFx0XHRcdGNiLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG5cdFx0XHRcdFx0XHR0aGlzLmV4dGVuc2lvbiA9IHZhbHVlO1xyXG5cdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdCk7XHJcblx0XHR9XHJcblx0XHRuZXcgU2V0dGluZyhjb250ZW50RWwpXHJcblx0XHRcdC5hZGRCdXR0b24oKGNiOiBCdXR0b25Db21wb25lbnQpID0+IHtcclxuXHRcdFx0XHRjYi5zZXRCdXR0b25UZXh0KCdDcmVhdGUnKTtcclxuXHRcdFx0XHRjYi5zZXRDdGEoKTtcclxuXHRcdFx0XHRjYi5idXR0b25FbC5mb2N1cygpO1xyXG5cdFx0XHRcdGNiLm9uQ2xpY2soYXN5bmMgKCkgPT4ge1xyXG5cdFx0XHRcdFx0aWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLnRlbXBsYXRlUGF0aCAmJiB0aGlzLnBsdWdpbi5zZXR0aW5ncy50ZW1wbGF0ZVBhdGgudHJpbSgpICE9PSAnJykge1xyXG5cdFx0XHRcdFx0XHR0aGlzLmV4dGVuc2lvbiA9ICcuJyArIHRoaXMucGx1Z2luLnNldHRpbmdzLnRlbXBsYXRlUGF0aC5zcGxpdCgnLicpLnBvcCgpO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0aWYgKHRoaXMuZXh0ZW5zaW9uID09PSAnLmFzaycpIHtcclxuXHRcdFx0XHRcdFx0cmV0dXJuIG5ldyBOb3RpY2UoJ1BsZWFzZSBjaG9vc2UgYSBmaWxlIGV4dGVuc2lvbicpO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0dGhpcy5jbG9zZSgpO1xyXG5cdFx0XHRcdFx0Y29uc3QgZm9sZGVycyA9IHRoaXMuYXBwLnZhdWx0LmdldEFsbExvYWRlZEZpbGVzKCkuZmlsdGVyKChmaWxlKSA9PiBmaWxlLnBhcmVudCBpbnN0YW5jZW9mIFRGb2xkZXIpO1xyXG5cdFx0XHRcdFx0Zm9yIChjb25zdCBmb2xkZXIgb2YgZm9sZGVycykge1xyXG5cdFx0XHRcdFx0XHRpZiAoZm9sZGVyIGluc3RhbmNlb2YgVEZvbGRlcikge1xyXG5cdFx0XHRcdFx0XHRcdGNvbnN0IGV4Y2x1ZGVkRm9sZGVyID0gYXdhaXQgZ2V0RXhjbHVkZWRGb2xkZXIodGhpcy5wbHVnaW4sIGZvbGRlci5wYXRoLCB0cnVlKTtcclxuXHRcdFx0XHRcdFx0XHRpZiAoZXhjbHVkZWRGb2xkZXIpIGNvbnRpbnVlO1xyXG5cdFx0XHRcdFx0XHRcdGlmIChmb2xkZXIucGF0aCA9PT0gdGVtcGxhdGVGb2xkZXJQYXRoKSBjb250aW51ZTtcclxuXHRcdFx0XHRcdFx0XHRjb25zdCBmb2xkZXJOb3RlID0gZ2V0Rm9sZGVyTm90ZSh0aGlzLnBsdWdpbiwgZm9sZGVyLnBhdGgpO1xyXG5cdFx0XHRcdFx0XHRcdGlmIChmb2xkZXJOb3RlKSBjb250aW51ZTtcclxuXHRcdFx0XHRcdFx0XHRhd2FpdCBjcmVhdGVGb2xkZXJOb3RlKHRoaXMucGx1Z2luLCBmb2xkZXIucGF0aCwgZmFsc2UsIHRoaXMuZXh0ZW5zaW9uKTtcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHR9KVxyXG5cdFx0XHQuYWRkQnV0dG9uKChjYjogQnV0dG9uQ29tcG9uZW50KSA9PiB7XHJcblx0XHRcdFx0Y2Iuc2V0QnV0dG9uVGV4dCgnQ2FuY2VsJyk7XHJcblx0XHRcdFx0Y2Iub25DbGljayhhc3luYyAoKSA9PiB7XHJcblx0XHRcdFx0XHR0aGlzLmNsb3NlKCk7XHJcblx0XHRcdFx0fSk7XHJcblx0XHRcdH0pO1xyXG5cdH1cclxuXHRvbkNsb3NlKCkge1xyXG5cdFx0Y29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XHJcblx0XHRjb250ZW50RWwuZW1wdHkoKTtcclxuXHR9XHJcbn1cclxuIiwgIi8vIENyZWRpdHMgZ28gdG8gTGlhbSdzIFBlcmlvZGljIE5vdGVzIFBsdWdpbjogaHR0cHM6Ly9naXRodWIuY29tL2xpYW1jYWluL29ic2lkaWFuLXBlcmlvZGljLW5vdGVzIGFuZCBodHRwczovL2dpdGh1Yi5jb20vU2lsZW50Vm9pZDEzL1RlbXBsYXRlclxyXG5cclxuaW1wb3J0IHsgVEFic3RyYWN0RmlsZSwgVEZpbGUsIFRGb2xkZXIsIFZhdWx0IH0gZnJvbSAnb2JzaWRpYW4nO1xyXG5pbXBvcnQgeyBUZXh0SW5wdXRTdWdnZXN0IH0gZnJvbSAnLi9TdWdnZXN0JztcclxuaW1wb3J0IEZvbGRlck5vdGVzUGx1Z2luIGZyb20gJy4uL21haW4nO1xyXG5pbXBvcnQgeyBnZXRUZW1wbGF0ZVBsdWdpbnMgfSBmcm9tICdzcmMvdGVtcGxhdGUnO1xyXG5leHBvcnQgZW51bSBGaWxlU3VnZ2VzdE1vZGUge1xyXG4gICAgVGVtcGxhdGVGaWxlcyxcclxuICAgIFNjcmlwdEZpbGVzLFxyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgVGVtcGxhdGVTdWdnZXN0IGV4dGVuZHMgVGV4dElucHV0U3VnZ2VzdDxURmlsZT4ge1xyXG5cdGNvbnN0cnVjdG9yKFxyXG4gICAgICAgIHB1YmxpYyBpbnB1dEVsOiBIVE1MSW5wdXRFbGVtZW50LFxyXG4gICAgICAgIHBsdWdpbjogRm9sZGVyTm90ZXNQbHVnaW5cclxuXHQpIHtcclxuXHRcdHN1cGVyKGlucHV0RWwsIHBsdWdpbik7XHJcblx0fVxyXG5cclxuXHJcblx0Z2V0X2Vycm9yX21zZyhtb2RlOiBGaWxlU3VnZ2VzdE1vZGUpOiBzdHJpbmcge1xyXG5cdFx0c3dpdGNoIChtb2RlKSB7XHJcblx0XHRcdGNhc2UgRmlsZVN1Z2dlc3RNb2RlLlRlbXBsYXRlRmlsZXM6XHJcblx0XHRcdFx0cmV0dXJuICdUZW1wbGF0ZXMgZm9sZGVyIGRvZXNuXFwndCBleGlzdCc7XHJcblx0XHRcdGNhc2UgRmlsZVN1Z2dlc3RNb2RlLlNjcmlwdEZpbGVzOlxyXG5cdFx0XHRcdHJldHVybiAnVXNlciBTY3JpcHRzIGZvbGRlciBkb2VzblxcJ3QgZXhpc3QnO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0Z2V0U3VnZ2VzdGlvbnMoaW5wdXRfc3RyOiBzdHJpbmcpOiBURmlsZVtdIHtcclxuXHRcdGNvbnN0IHsgdGVtcGxhdGVGb2xkZXIsIHRlbXBsYXRlclBsdWdpbiB9ID0gZ2V0VGVtcGxhdGVQbHVnaW5zKHRoaXMucGx1Z2luLmFwcCk7XHJcblx0XHRpZiAoKCF0ZW1wbGF0ZUZvbGRlciB8fCB0ZW1wbGF0ZUZvbGRlcj8udHJpbSgpID09PSAnJykgJiYgIXRlbXBsYXRlclBsdWdpbikge1xyXG5cdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy50ZW1wbGF0ZVBhdGggPSAnJztcclxuXHRcdFx0dGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdHJldHVybiBbXTtcclxuXHRcdH1cclxuXHRcdGxldCBmb2xkZXI6IFRGb2xkZXI7XHJcblx0XHRpZiAodGVtcGxhdGVyUGx1Z2luKSB7XHJcblx0XHRcdGZvbGRlciA9IHRoaXMucGx1Z2luLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgodGVtcGxhdGVyUGx1Z2luLnBsdWdpbj8uc2V0dGluZ3M/LnRlbXBsYXRlc19mb2xkZXIgYXMgc3RyaW5nKSBhcyBURm9sZGVyO1xyXG5cclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdGZvbGRlciA9IHRoaXMucGx1Z2luLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgodGVtcGxhdGVGb2xkZXIpIGFzIFRGb2xkZXI7XHJcblx0XHR9XHJcblxyXG5cdFx0Y29uc3QgZmlsZXM6IFRGaWxlW10gPSBbXTtcclxuXHRcdGNvbnN0IGxvd2VyX2lucHV0X3N0ciA9IGlucHV0X3N0ci50b0xvd2VyQ2FzZSgpO1xyXG5cclxuXHRcdFZhdWx0LnJlY3Vyc2VDaGlsZHJlbihmb2xkZXIsIChmaWxlOiBUQWJzdHJhY3RGaWxlKSA9PiB7XHJcblx0XHRcdGlmIChmaWxlIGluc3RhbmNlb2YgVEZpbGUgJiZcclxuICAgICAgICAgICAgICAgIGZpbGUucGF0aC50b0xvd2VyQ2FzZSgpLmNvbnRhaW5zKGxvd2VyX2lucHV0X3N0cilcclxuXHRcdFx0KSB7XHJcblx0XHRcdFx0ZmlsZXMucHVzaChmaWxlKTtcclxuXHRcdFx0fVxyXG5cdFx0fSk7XHJcblxyXG5cdFx0cmV0dXJuIGZpbGVzO1xyXG5cdH1cclxuXHJcblx0cmVuZGVyU3VnZ2VzdGlvbihmaWxlOiBURmlsZSwgZWw6IEhUTUxFbGVtZW50KTogdm9pZCB7XHJcblx0XHRlbC5zZXRUZXh0KGZpbGUubmFtZS5yZXBsYWNlKCcubWQnLCAnJykpO1xyXG5cdH1cclxuXHJcblx0c2VsZWN0U3VnZ2VzdGlvbihmaWxlOiBURmlsZSk6IHZvaWQge1xyXG5cdFx0dGhpcy5pbnB1dEVsLnZhbHVlID0gZmlsZS5uYW1lLnJlcGxhY2UoJy5tZCcsICcnKTtcclxuXHRcdHRoaXMuaW5wdXRFbC50cmlnZ2VyKCdpbnB1dCcpO1xyXG5cdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MudGVtcGxhdGVQYXRoID0gZmlsZS5wYXRoO1xyXG5cdFx0dGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcblx0XHR0aGlzLmNsb3NlKCk7XHJcblx0fVxyXG59XHJcbiIsICJpbXBvcnQgeyBTZXR0aW5nIH0gZnJvbSAnb2JzaWRpYW4nO1xyXG5pbXBvcnQgeyBTZXR0aW5nc1RhYiB9IGZyb20gJy4vU2V0dGluZ3NUYWInO1xyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcmVuZGVyRmlsZUV4cGxvcmVyKHNldHRpbmdzVGFiOiBTZXR0aW5nc1RhYikge1xyXG4gICAgY29uc3QgY29udGFpbmVyRWwgPSBzZXR0aW5nc1RhYi5zZXR0aW5nc1BhZ2U7XHJcblxyXG4gICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgICAgLnNldE5hbWUoJ0hpZGUgZm9sZGVyIG5vdGUnKVxyXG4gICAgICAgIC5zZXREZXNjKCdIaWRlIHRoZSBmb2xkZXIgbm90ZSBpbiB0aGUgZmlsZSBleHBsb3JlcicpXHJcbiAgICAgICAgLmFkZFRvZ2dsZSgodG9nZ2xlKSA9PlxyXG4gICAgICAgICAgICB0b2dnbGVcclxuICAgICAgICAgICAgICAgIC5zZXRWYWx1ZShzZXR0aW5nc1RhYi5wbHVnaW4uc2V0dGluZ3MuaGlkZUZvbGRlck5vdGUpXHJcbiAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2V0dGluZ3NUYWIucGx1Z2luLnNldHRpbmdzLmhpZGVGb2xkZXJOb3RlID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgc2V0dGluZ3NUYWIucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5hZGQoJ2hpZGUtZm9sZGVyLW5vdGUnKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGUtZm9sZGVyLW5vdGUnKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgc2V0dGluZ3NUYWIuZGlzcGxheSgpO1xyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICApO1xyXG5cclxuICAgIGNvbnN0IHNldHRpbmcyID0gbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgICAgLnNldE5hbWUoJ0RvblxcJ3Qgb3BlbiBmb2xkZXIgbm90ZXMgYnkgY2xpY2tpbmcgb24gdGhlIG5hbWUgKG9uIG1vYmlsZSknKVxyXG4gICAgICAgIC5zZXREZXNjKCdGb2xkZXIgbm90ZXMgZG9uXFwndCBvcGVuIHdoZW4gY2xpY2tpbmcgb24gdGhlIG5hbWUgb2YgdGhlIGZvbGRlciAob24gbW9iaWxlKScpXHJcbiAgICAgICAgLmFkZFRvZ2dsZSgodG9nZ2xlKSA9PlxyXG4gICAgICAgICAgICB0b2dnbGVcclxuICAgICAgICAgICAgICAgIC5zZXRWYWx1ZShzZXR0aW5nc1RhYi5wbHVnaW4uc2V0dGluZ3MuZGlzYWJsZU9wZW5Gb2xkZXJOb3RlT25DbGljaylcclxuICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBzZXR0aW5nc1RhYi5wbHVnaW4uc2V0dGluZ3MuZGlzYWJsZU9wZW5Gb2xkZXJOb3RlT25DbGljayA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHNldHRpbmdzVGFiLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgKTtcclxuXHJcbiAgICAgICAgc2V0dGluZzIuaW5mb0VsLmFwcGVuZFRleHQoJ1JlcXVpcmVzIGEgcmVzdGFydCB0byB0YWtlIGVmZmVjdCcpO1xyXG4gICAgICAgIHNldHRpbmcyLmluZm9FbC5zdHlsZS5jb2xvciA9IHNldHRpbmdzVGFiLmFwcC52YXVsdC5nZXRDb25maWcoJ2FjY2VudENvbG9yJykgYXMgc3RyaW5nIHx8ICcjN2Q1YmVkJztcclxuXHJcbiAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgICAuc2V0TmFtZSgnT25seSBvcGVuIGZvbGRlciBub3RlcyB0aHJvdWdoIHRoZSBuYW1lJylcclxuICAgICAgICAuc2V0RGVzYygnT25seSBvcGVuIGZvbGRlciBub3RlcyBpbiB0aGUgZmlsZSBleHBsb3JlciBieSBjbGlja2luZyBvbiB0aGUgZm9sZGVyIG5hbWUnKVxyXG4gICAgICAgIC5hZGRUb2dnbGUoKHRvZ2dsZSkgPT5cclxuICAgICAgICAgICAgdG9nZ2xlXHJcbiAgICAgICAgICAgICAgICAuc2V0VmFsdWUoIXNldHRpbmdzVGFiLnBsdWdpbi5zZXR0aW5ncy5zdG9wV2hpdGVzcGFjZUNvbGxhcHNpbmcpXHJcbiAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCF2YWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5hZGQoJ2ZuLXdoaXRlc3BhY2Utc3RvcC1jb2xsYXBzaW5nJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QucmVtb3ZlKCdmbi13aGl0ZXNwYWNlLXN0b3AtY29sbGFwc2luZycpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBzZXR0aW5nc1RhYi5wbHVnaW4uc2V0dGluZ3Muc3RvcFdoaXRlc3BhY2VDb2xsYXBzaW5nID0gIXZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHNldHRpbmdzVGFiLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgKTtcclxuICAgICAgICBcclxuICAgIGNvbnN0IGRpc2FibGVTZXR0aW5nID0gbmV3IFNldHRpbmcoY29udGFpbmVyRWwpO1xyXG4gICAgZGlzYWJsZVNldHRpbmcuc2V0TmFtZSgnRGlzYWJsZSBmb2xkZXIgY29sbGFwc2luZycpO1xyXG4gICAgZGlzYWJsZVNldHRpbmcuc2V0RGVzYygnRGlzYWJsZSB0aGUgYWJpbGl0eSB0byBjb2xsYXBzZSBmb2xkZXJzIGJ5IGNsaWNraW5nIGV4YWN0bHkgb24gdGhlIGZvbGRlciBuYW1lJyk7XHJcbiAgICBkaXNhYmxlU2V0dGluZy5hZGRUb2dnbGUoKHRvZ2dsZSkgPT5cclxuICAgICAgICB0b2dnbGVcclxuICAgICAgICAgICAgLnNldFZhbHVlKCFzZXR0aW5nc1RhYi5wbHVnaW4uc2V0dGluZ3MuZW5hYmxlQ29sbGFwc2luZylcclxuICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgc2V0dGluZ3NUYWIucGx1Z2luLnNldHRpbmdzLmVuYWJsZUNvbGxhcHNpbmcgPSAhdmFsdWU7XHJcbiAgICAgICAgICAgICAgICBhd2FpdCBzZXR0aW5nc1RhYi5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICApO1xyXG4gICAgZGlzYWJsZVNldHRpbmcuaW5mb0VsLmFwcGVuZFRleHQoJ1JlcXVpcmVzIGEgcmVzdGFydCB0byB0YWtlIGVmZmVjdCcpO1xyXG4gICAgZGlzYWJsZVNldHRpbmcuaW5mb0VsLnN0eWxlLmNvbG9yID0gc2V0dGluZ3NUYWIuYXBwLnZhdWx0LmdldENvbmZpZygnYWNjZW50Q29sb3InKSBhcyBzdHJpbmcgfHwgJyM3ZDViZWQnO1xyXG5cclxuICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAgIC5zZXROYW1lKCdVc2Ugc3VibWVudXMnKVxyXG4gICAgICAgIC5zZXREZXNjKCdVc2Ugc3VibWVudXMgZm9yIGZpbGUvZm9sZGVyIGNvbW1hbmRzJylcclxuICAgICAgICAuYWRkVG9nZ2xlKCh0b2dnbGUpID0+XHJcbiAgICAgICAgICAgIHRvZ2dsZVxyXG4gICAgICAgICAgICAgICAgLnNldFZhbHVlKHNldHRpbmdzVGFiLnBsdWdpbi5zZXR0aW5ncy51c2VTdWJtZW51cylcclxuICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBzZXR0aW5nc1RhYi5wbHVnaW4uc2V0dGluZ3MudXNlU3VibWVudXMgPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCBzZXR0aW5nc1RhYi5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgc2V0dGluZ3NUYWIuZGlzcGxheSgpO1xyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICApO1xyXG5cclxuICAgIGlmIChzZXR0aW5nc1RhYi5wbHVnaW4uc2V0dGluZ3MuZnJvbnRNYXR0ZXJUaXRsZS5lbmFibGVkKSB7XHJcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgICAgICAgIC5zZXROYW1lKCdDaGFuZ2UgZm9sZGVyIG5hbWUgaW4gdGhlIGZpbGUgZXhwbG9yZXInKVxyXG4gICAgICAgICAgICAuc2V0RGVzYygnQXV0b21hdGljYWxseSByZW5hbWUgYSBmb2xkZXIgbmFtZSBpbiB0aGUgZmlsZSBleHBsb3JlciB3aGVuIHRoZSBmb2xkZXIgbm90ZSBpcyByZW5hbWVkJylcclxuICAgICAgICAgICAgLmFkZFRvZ2dsZSgodG9nZ2xlKSA9PlxyXG4gICAgICAgICAgICAgICAgdG9nZ2xlXHJcbiAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKHNldHRpbmdzVGFiLnBsdWdpbi5zZXR0aW5ncy5mcm9udE1hdHRlclRpdGxlLmV4cGxvcmVyKVxyXG4gICAgICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2V0dGluZ3NUYWIucGx1Z2luLnNldHRpbmdzLmZyb250TWF0dGVyVGl0bGUuZXhwbG9yZXIgPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgc2V0dGluZ3NUYWIucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZXR0aW5nc1RhYi5wbHVnaW4uYXBwLnZhdWx0LmdldEZpbGVzKCkuZm9yRWFjaCgoZmlsZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0dGluZ3NUYWIucGx1Z2luLmZtdHBIYW5kbGVyPy5oYW5kbGVSZW5hbWUoeyBpZDogJycsIHJlc3VsdDogZmFsc2UsIHBhdGg6IGZpbGUucGF0aCB9LCBmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0dGluZ3NUYWIuc2V0dGluZ3NQYWdlLmNyZWF0ZUVsKCdoMycsIHsgdGV4dDogJ1N0eWxlIHNldHRpbmdzJyB9KTtcclxuXHJcbiAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgICAuc2V0TmFtZSgnSGlnaGxpZ2h0IGZvbGRlciBpbiB0aGUgZmlsZSBleHBsb3JlcicpXHJcbiAgICAgICAgLnNldERlc2MoJ0hpZ2hsaWdodCB0aGUgZm9sZGVyIG5hbWUgaW4gdGhlIGZpbGUgZXhwbG9yZXIgd2hlbiB5b3UgY2xpY2sgb24gYSBmb2xkZXIgdGhhdCBoYXMgYSBmb2xkZXIgbm90ZScpXHJcbiAgICAgICAgLmFkZFRvZ2dsZSgodG9nZ2xlKSA9PlxyXG4gICAgICAgICAgICB0b2dnbGVcclxuICAgICAgICAgICAgICAgIC5zZXRWYWx1ZShzZXR0aW5nc1RhYi5wbHVnaW4uc2V0dGluZ3MuaGlnaGxpZ2h0Rm9sZGVyKVxyXG4gICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHNldHRpbmdzVGFiLnBsdWdpbi5zZXR0aW5ncy5oaWdobGlnaHRGb2xkZXIgPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIXZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LmFkZCgnZGlzYWJsZS1mb2xkZXItaGlnaGxpZ2h0Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QucmVtb3ZlKCdkaXNhYmxlLWZvbGRlci1oaWdobGlnaHQnKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgc2V0dGluZ3NUYWIucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICApO1xyXG5cclxuICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAgIC5zZXROYW1lKCdIaWRlIGNvbGxhcHNlIGljb24nKVxyXG4gICAgICAgIC5zZXREZXNjKCdIaWRlIHRoZSBjb2xsYXBzZSBpY29uIGluIHRoZSBmaWxlIGV4cGxvcmVyIG5leHQgdG8gdGhlIG5hbWUgb2YgYSBmb2xkZXIgd2hlbiBhIGZvbGRlciBvbmx5IGNvbnRhaW5zIGEgZm9sZGVyIG5vdGUnKVxyXG4gICAgICAgIC5hZGRUb2dnbGUoKHRvZ2dsZSkgPT5cclxuICAgICAgICAgICAgdG9nZ2xlXHJcbiAgICAgICAgICAgICAgICAuc2V0VmFsdWUoc2V0dGluZ3NUYWIucGx1Z2luLnNldHRpbmdzLmhpZGVDb2xsYXBzaW5nSWNvbilcclxuICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBzZXR0aW5nc1RhYi5wbHVnaW4uc2V0dGluZ3MuaGlkZUNvbGxhcHNpbmdJY29uID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgc2V0dGluZ3NUYWIucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5hZGQoJ2ZuLWhpZGUtY29sbGFwc2UtaWNvbicpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LnJlbW92ZSgnZm4taGlkZS1jb2xsYXBzZS1pY29uJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHNldHRpbmdzVGFiLmRpc3BsYXkoKTtcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgKTtcclxuXHJcbiAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgICAuc2V0TmFtZSgnSGlkZSBjb2xsYXBzZSBpY29uIGZvciBldmVyeSBlbXB0eSBmb2xkZXInKVxyXG4gICAgICAgIC5zZXREZXNjKCdIaWRlIHRoZSBjb2xsYXBzZSBpY29uIGluIHRoZSBmaWxlIGV4cGxvcmVyIG5leHQgdG8gdGhlIG5hbWUgb2YgYSBmb2xkZXIgd2hlbiBhIGZvbGRlciBpcyBlbXB0eScpXHJcbiAgICAgICAgLmFkZFRvZ2dsZSgodG9nZ2xlKSA9PlxyXG4gICAgICAgICAgICB0b2dnbGVcclxuICAgICAgICAgICAgICAgIC5zZXRWYWx1ZShzZXR0aW5nc1RhYi5wbHVnaW4uc2V0dGluZ3MuaGlkZUNvbGxhcHNpbmdJY29uRm9yRW1wdHlGb2xkZXJzKVxyXG4gICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHNldHRpbmdzVGFiLnBsdWdpbi5zZXR0aW5ncy5oaWRlQ29sbGFwc2luZ0ljb25Gb3JFbXB0eUZvbGRlcnMgPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCBzZXR0aW5nc1RhYi5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LmFkZCgnZm4taGlkZS1lbXB0eS1jb2xsYXBzZS1pY29uJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QucmVtb3ZlKCdmbi1oaWRlLWVtcHR5LWNvbGxhcHNlLWljb24nKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgc2V0dGluZ3NUYWIuZGlzcGxheSgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICkpO1xyXG5cclxuICAgIGlmIChzZXR0aW5nc1RhYi5wbHVnaW4uc2V0dGluZ3MuaGlkZUNvbGxhcHNpbmdJY29uKSB7XHJcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgICAgICAgIC5zZXROYW1lKCdIaWRlIGNvbGxhcHNlIGljb24gYWxzbyB3aGVuIHRoZSBhdHRhY2htZW50IGZvbGRlciBpcyBpbiB0aGUgc2FtZSBmb2xkZXInKVxyXG4gICAgICAgICAgICAuYWRkVG9nZ2xlKCh0b2dnbGUpID0+XHJcbiAgICAgICAgICAgICAgICB0b2dnbGVcclxuICAgICAgICAgICAgICAgICAgICAuc2V0VmFsdWUoc2V0dGluZ3NUYWIucGx1Z2luLnNldHRpbmdzLmlnbm9yZUF0dGFjaG1lbnRGb2xkZXIpXHJcbiAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZXR0aW5nc1RhYi5wbHVnaW4uc2V0dGluZ3MuaWdub3JlQXR0YWNobWVudEZvbGRlciA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCBzZXR0aW5nc1RhYi5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgICAuc2V0TmFtZSgnVW5kZXJsaW5lIHRoZSBuYW1lIG9mIGZvbGRlciBub3RlcycpXHJcbiAgICAgICAgLnNldERlc2MoJ0FkZCBhbiB1bmRlcmxpbmUgdG8gZm9sZGVycyB0aGF0IGhhdmUgYSBmb2xkZXIgbm90ZSBpbiB0aGUgZmlsZSBleHBsb3JlcicpXHJcbiAgICAgICAgLmFkZFRvZ2dsZSgodG9nZ2xlKSA9PlxyXG4gICAgICAgICAgICB0b2dnbGVcclxuICAgICAgICAgICAgICAgIC5zZXRWYWx1ZShzZXR0aW5nc1RhYi5wbHVnaW4uc2V0dGluZ3MudW5kZXJsaW5lRm9sZGVyKVxyXG4gICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHNldHRpbmdzVGFiLnBsdWdpbi5zZXR0aW5ncy51bmRlcmxpbmVGb2xkZXIgPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodmFsdWUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QuYWRkKCdmb2xkZXItbm90ZS11bmRlcmxpbmUnKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5yZW1vdmUoJ2ZvbGRlci1ub3RlLXVuZGVybGluZScpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCBzZXR0aW5nc1RhYi5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICk7XHJcblxyXG4gICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgICAgLnNldE5hbWUoJ0JvbGQgdGhlIG5hbWUgb2YgZm9sZGVyIG5vdGVzJylcclxuICAgICAgICAuc2V0RGVzYygnTWFrZSB0aGUgZm9sZGVyIG5hbWUgYm9sZCBpbiB0aGUgZmlsZSBleHBsb3JlcicpXHJcbiAgICAgICAgLmFkZFRvZ2dsZSgodG9nZ2xlKSA9PlxyXG4gICAgICAgICAgICB0b2dnbGVcclxuICAgICAgICAgICAgICAgIC5zZXRWYWx1ZShzZXR0aW5nc1RhYi5wbHVnaW4uc2V0dGluZ3MuYm9sZE5hbWUpXHJcbiAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2V0dGluZ3NUYWIucGx1Z2luLnNldHRpbmdzLmJvbGROYW1lID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LmFkZCgnZm9sZGVyLW5vdGUtYm9sZCcpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LnJlbW92ZSgnZm9sZGVyLW5vdGUtYm9sZCcpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCBzZXR0aW5nc1RhYi5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICk7XHJcblxyXG4gICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgICAgLnNldE5hbWUoJ0N1cnNpdmUgdGhlIG5hbWUgb2YgZm9sZGVyIG5vdGVzJylcclxuICAgICAgICAuc2V0RGVzYygnTWFrZSB0aGUgZm9sZGVyIG5hbWUgY3Vyc2l2ZSBpbiB0aGUgZmlsZSBleHBsb3JlcicpXHJcbiAgICAgICAgLmFkZFRvZ2dsZSgodG9nZ2xlKSA9PlxyXG4gICAgICAgICAgICB0b2dnbGVcclxuICAgICAgICAgICAgICAgIC5zZXRWYWx1ZShzZXR0aW5nc1RhYi5wbHVnaW4uc2V0dGluZ3MuY3Vyc2l2ZU5hbWUpXHJcbiAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2V0dGluZ3NUYWIucGx1Z2luLnNldHRpbmdzLmN1cnNpdmVOYW1lID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LmFkZCgnZm9sZGVyLW5vdGUtY3Vyc2l2ZScpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LnJlbW92ZSgnZm9sZGVyLW5vdGUtY3Vyc2l2ZScpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCBzZXR0aW5nc1RhYi5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICk7XHJcblxyXG59XHJcbiIsICJpbXBvcnQgeyBTZXR0aW5nIH0gZnJvbSAnb2JzaWRpYW4nO1xyXG5pbXBvcnQgeyBTZXR0aW5nc1RhYiB9IGZyb20gJy4vU2V0dGluZ3NUYWInO1xyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcmVuZGVyUGF0aChzZXR0aW5nc1RhYjogU2V0dGluZ3NUYWIpIHtcclxuICAgIGNvbnN0IGNvbnRhaW5lckVsID0gc2V0dGluZ3NUYWIuc2V0dGluZ3NQYWdlO1xyXG4gICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgICAgLnNldE5hbWUoJ09wZW4gZm9sZGVyIG5vdGUgdGhyb3VnaCBwYXRoJylcclxuICAgICAgICAuc2V0RGVzYygnT3BlbiBhIGZvbGRlciBub3RlIHdoZW4gY2xpY2tpbmcgb24gYSBmb2xkZXIgbmFtZSBpbiB0aGUgcGF0aCBpZiBpdCBpcyBhIGZvbGRlciBub3RlJylcclxuICAgICAgICAuYWRkVG9nZ2xlKCh0b2dnbGUpID0+XHJcbiAgICAgICAgICAgIHRvZ2dsZVxyXG4gICAgICAgICAgICAgICAgLnNldFZhbHVlKHNldHRpbmdzVGFiLnBsdWdpbi5zZXR0aW5ncy5vcGVuRm9sZGVyTm90ZU9uQ2xpY2tJblBhdGgpXHJcbiAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2V0dGluZ3NUYWIucGx1Z2luLnNldHRpbmdzLm9wZW5Gb2xkZXJOb3RlT25DbGlja0luUGF0aCA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHNldHRpbmdzVGFiLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgICAgICBzZXR0aW5nc1RhYi5kaXNwbGF5KCk7XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICk7XHJcblxyXG4gICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgICAgLnNldE5hbWUoJ09wZW4gc2lkZWJhciB3aGVuIG9wZW5pbmcgYSBmb2xkZXIgbm90ZSB0aHJvdWdoIHBhdGggKE1vYmlsZSBvbmx5KScpXHJcbiAgICAgICAgLnNldERlc2MoJ09wZW4gdGhlIHNpZGViYXIgd2hlbiBvcGVuaW5nIGEgZm9sZGVyIG5vdGUgdGhyb3VnaCB0aGUgcGF0aCBvbiBtb2JpbGUnKVxyXG4gICAgICAgIC5hZGRUb2dnbGUoKHRvZ2dsZSkgPT5cclxuICAgICAgICAgICAgdG9nZ2xlXHJcbiAgICAgICAgICAgICAgICAuc2V0VmFsdWUoc2V0dGluZ3NUYWIucGx1Z2luLnNldHRpbmdzLm9wZW5TaWRlYmFyLm1vYmlsZSlcclxuICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBzZXR0aW5nc1RhYi5wbHVnaW4uc2V0dGluZ3Mub3BlblNpZGViYXIubW9iaWxlID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgc2V0dGluZ3NUYWIucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICApO1xyXG5cclxuICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAgIC5zZXROYW1lKCdPcGVuIHNpZGViYXIgd2hlbiBvcGVuaW5nIGEgZm9sZGVyIG5vdGUgdGhyb3VnaCBwYXRoIChEZXNrdG9wIG9ubHkpJylcclxuICAgICAgICAuc2V0RGVzYygnT3BlbiB0aGUgc2lkZWJhciB3aGVuIG9wZW5pbmcgYSBmb2xkZXIgbm90ZSB0aHJvdWdoIHRoZSBwYXRoIG9uIGRlc2t0b3AnKVxyXG4gICAgICAgIC5hZGRUb2dnbGUoKHRvZ2dsZSkgPT5cclxuICAgICAgICAgICAgdG9nZ2xlXHJcbiAgICAgICAgICAgICAgICAuc2V0VmFsdWUoc2V0dGluZ3NUYWIucGx1Z2luLnNldHRpbmdzLm9wZW5TaWRlYmFyLmRlc2t0b3ApXHJcbiAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2V0dGluZ3NUYWIucGx1Z2luLnNldHRpbmdzLm9wZW5TaWRlYmFyLmRlc2t0b3AgPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCBzZXR0aW5nc1RhYi5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICk7XHJcblxyXG4gICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgICAgLnNldE5hbWUoJ0NoYW5nZSBmb2xkZXIgbmFtZSBpbiB0aGUgcGF0aCcpXHJcbiAgICAgICAgLnNldERlc2MoJ0F1dG9tYXRpY2FsbHkgcmVuYW1lIGEgZm9sZGVyIG5hbWUgaW4gdGhlIHBhdGggYWJvdmUgYSBub3RlIHdoZW4gdGhlIGZvbGRlciBub3RlIGlzIHJlbmFtZWQnKVxyXG4gICAgICAgIC5hZGRUb2dnbGUoKHRvZ2dsZSkgPT5cclxuICAgICAgICAgICAgdG9nZ2xlXHJcbiAgICAgICAgICAgICAgICAuc2V0VmFsdWUoc2V0dGluZ3NUYWIucGx1Z2luLnNldHRpbmdzLmZyb250TWF0dGVyVGl0bGUucGF0aClcclxuICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBzZXR0aW5nc1RhYi5wbHVnaW4uc2V0dGluZ3MuZnJvbnRNYXR0ZXJUaXRsZS5wYXRoID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgc2V0dGluZ3NUYWIucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZXR0aW5nc1RhYi5wbHVnaW4udXBkYXRlQnJlYWRjcnVtYnMoKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZXR0aW5nc1RhYi5wbHVnaW4udXBkYXRlQnJlYWRjcnVtYnModHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICApO1xyXG5cclxuICAgIHNldHRpbmdzVGFiLnNldHRpbmdzUGFnZS5jcmVhdGVFbCgnaDMnLCB7IHRleHQ6ICdTdHlsZSBzZXR0aW5ncycgfSk7XHJcblxyXG4gICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgICAgLnNldE5hbWUoJ1VuZGVybGluZSBmb2xkZXJzIGluIHRoZSBwYXRoJylcclxuICAgICAgICAuc2V0RGVzYygnQWRkIGFuIHVuZGVybGluZSB0byBmb2xkZXJzIHRoYXQgaGF2ZSBhIGZvbGRlciBub3RlIGluIHRoZSBwYXRoIGFib3ZlIGEgbm90ZScpXHJcbiAgICAgICAgLmFkZFRvZ2dsZSgodG9nZ2xlKSA9PlxyXG4gICAgICAgICAgICB0b2dnbGVcclxuICAgICAgICAgICAgICAgIC5zZXRWYWx1ZShzZXR0aW5nc1RhYi5wbHVnaW4uc2V0dGluZ3MudW5kZXJsaW5lRm9sZGVySW5QYXRoKVxyXG4gICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHNldHRpbmdzVGFiLnBsdWdpbi5zZXR0aW5ncy51bmRlcmxpbmVGb2xkZXJJblBhdGggPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodmFsdWUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QuYWRkKCdmb2xkZXItbm90ZS11bmRlcmxpbmUtcGF0aCcpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LnJlbW92ZSgnZm9sZGVyLW5vdGUtdW5kZXJsaW5lLXBhdGgnKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgc2V0dGluZ3NUYWIucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICApO1xyXG5cclxuICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAgIC5zZXROYW1lKCdCb2xkIGZvbGRlcnMgaW4gdGhlIHBhdGgnKVxyXG4gICAgICAgIC5zZXREZXNjKCdNYWtlIHRoZSBmb2xkZXIgbmFtZSBib2xkIGluIHRoZSBwYXRoIGFib3ZlIGEgbm90ZScpXHJcbiAgICAgICAgLmFkZFRvZ2dsZSgodG9nZ2xlKSA9PlxyXG4gICAgICAgICAgICB0b2dnbGVcclxuICAgICAgICAgICAgICAgIC5zZXRWYWx1ZShzZXR0aW5nc1RhYi5wbHVnaW4uc2V0dGluZ3MuYm9sZE5hbWVJblBhdGgpXHJcbiAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2V0dGluZ3NUYWIucGx1Z2luLnNldHRpbmdzLmJvbGROYW1lSW5QYXRoID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LmFkZCgnZm9sZGVyLW5vdGUtYm9sZC1wYXRoJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QucmVtb3ZlKCdmb2xkZXItbm90ZS1ib2xkLXBhdGgnKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgc2V0dGluZ3NUYWIucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICApO1xyXG5cclxuICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAgIC5zZXROYW1lKCdDdXJzaXZlIHRoZSBuYW1lIG9mIGZvbGRlciBub3RlcyBpbiB0aGUgcGF0aCcpXHJcbiAgICAgICAgLnNldERlc2MoJ01ha2UgdGhlIGZvbGRlciBuYW1lIGN1cnNpdmUgaW4gdGhlIHBhdGggYWJvdmUgYSBub3RlJylcclxuICAgICAgICAuYWRkVG9nZ2xlKCh0b2dnbGUpID0+XHJcbiAgICAgICAgICAgIHRvZ2dsZVxyXG4gICAgICAgICAgICAgICAgLnNldFZhbHVlKHNldHRpbmdzVGFiLnBsdWdpbi5zZXR0aW5ncy5jdXJzaXZlTmFtZUluUGF0aClcclxuICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBzZXR0aW5nc1RhYi5wbHVnaW4uc2V0dGluZ3MuY3Vyc2l2ZU5hbWVJblBhdGggPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodmFsdWUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QuYWRkKCdmb2xkZXItbm90ZS1jdXJzaXZlLXBhdGgnKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5yZW1vdmUoJ2ZvbGRlci1ub3RlLWN1cnNpdmUtcGF0aCcpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCBzZXR0aW5nc1RhYi5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICk7XHJcbn0iLCAiaW1wb3J0IHsgUGx1Z2luU2V0dGluZ1RhYiwgU2V0dGluZywgVEZvbGRlciB9IGZyb20gJ29ic2lkaWFuJztcclxuaW1wb3J0IHsgU2V0dGluZ3NUYWIgfSBmcm9tICcuL1NldHRpbmdzVGFiJztcclxuaW1wb3J0IHsgTGlzdENvbXBvbmVudCB9IGZyb20gJ3NyYy9mdW5jdGlvbnMvTGlzdENvbXBvbmVudCc7XHJcbmltcG9ydCB7IGluY2x1ZGVUeXBlcyB9IGZyb20gJ3NyYy9mb2xkZXJPdmVydmlldy9zcmMvRm9sZGVyT3ZlcnZpZXcnO1xyXG5pbXBvcnQgeyBGb2xkZXJTdWdnZXN0IH0gZnJvbSAnc3JjL3N1Z2dlc3RlcnMvRm9sZGVyU3VnZ2VzdGVyJztcclxuaW1wb3J0IHsgY3JlYXRlT3ZlcnZpZXdTZXR0aW5ncyB9IGZyb20gJ3NyYy9mb2xkZXJPdmVydmlldy9zcmMvc2V0dGluZ3MnO1xyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHJlbmRlckZvbGRlck92ZXJ2aWV3KHNldHRpbmdzVGFiOiBTZXR0aW5nc1RhYikge1xyXG4gICAgY29uc3QgeyBwbHVnaW4gfSA9IHNldHRpbmdzVGFiO1xyXG4gICAgbGV0IG92ZXJ2aWV3U2V0dGluZ3MgPSBwbHVnaW4uc2V0dGluZ3MuZGVmYXVsdE92ZXJ2aWV3O1xyXG4gICAgY29uc3QgY29udGFpbmVyRWwgPSBzZXR0aW5nc1RhYi5zZXR0aW5nc1BhZ2U7XHJcbiAgICBjb250YWluZXJFbC5jcmVhdGVFbCgncCcsIHsgdGV4dDogJ0NoYW5nZSB0aGUgZGVmYXVsdCBzZXR0aW5ncyBmb3IgZm9sZGVyIG92ZXJ2aWV3cycsIGNsczogJ3NldHRpbmctaXRlbS1kZXNjcmlwdGlvbicgfSk7XHJcblxyXG4gICAgY3JlYXRlT3ZlcnZpZXdTZXR0aW5ncyhjb250YWluZXJFbCwgb3ZlcnZpZXdTZXR0aW5ncywgcGx1Z2luLCBwbHVnaW4uc2V0dGluZ3MuZGVmYXVsdE92ZXJ2aWV3LCBzZXR0aW5nc1RhYi5kaXNwbGF5LCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCBzZXR0aW5nc1RhYiApO1xyXG59XHJcbiIsICJpbXBvcnQgeyBhZGRFeGNsdWRlRm9sZGVyTGlzdEl0ZW0sIGFkZEV4Y2x1ZGVkRm9sZGVyIH0gZnJvbSAnc3JjL0V4Y2x1ZGVGb2xkZXJzL2Z1bmN0aW9ucy9mb2xkZXJGdW5jdGlvbnMnO1xyXG5pbXBvcnQgeyBFeGNsdWRlZEZvbGRlciB9IGZyb20gJ3NyYy9FeGNsdWRlRm9sZGVycy9FeGNsdWRlRm9sZGVyJztcclxuaW1wb3J0IHsgYWRkRXhjbHVkZVBhdHRlcm5MaXN0SXRlbSB9IGZyb20gJ3NyYy9FeGNsdWRlRm9sZGVycy9mdW5jdGlvbnMvcGF0dGVybkZ1bmN0aW9ucyc7XHJcbmltcG9ydCB7IFNldHRpbmcgfSBmcm9tICdvYnNpZGlhbic7XHJcbmltcG9ydCB7IFNldHRpbmdzVGFiIH0gZnJvbSAnLi9TZXR0aW5nc1RhYic7XHJcbmltcG9ydCBFeGNsdWRlZEZvbGRlclNldHRpbmdzIGZyb20gJ3NyYy9FeGNsdWRlRm9sZGVycy9tb2RhbHMvRXhjbHVkZUZvbGRlclNldHRpbmdzJztcclxuaW1wb3J0IFBhdHRlcm5TZXR0aW5ncyBmcm9tICdzcmMvRXhjbHVkZUZvbGRlcnMvbW9kYWxzL1BhdHRlcm5TZXR0aW5ncyc7XHJcbmltcG9ydCBXaGl0ZWxpc3RlZEZvbGRlcnNTZXR0aW5ncyBmcm9tICdzcmMvRXhjbHVkZUZvbGRlcnMvbW9kYWxzL1doaXRlbGlzdGVkRm9sZGVyc1NldHRpbmdzJztcclxuLy8gaW1wb3J0IEV4Y2x1ZGVkRm9sZGVyc1doaXRlbGlzdCBmcm9tICdzcmMvRXhjbHVkZUZvbGRlcnMvbW9kYWxzL1doaXRlbGlzdE1vZGFsJztcclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiByZW5kZXJFeGNsdWRlRm9sZGVycyhzZXR0aW5nc1RhYjogU2V0dGluZ3NUYWIpIHtcclxuICAgIGNvbnN0IGNvbnRhaW5lckVsID0gc2V0dGluZ3NUYWIuc2V0dGluZ3NQYWdlO1xyXG4gICAgY29uc3QgbWFuYWdlRXhjbHVkZWQgPSBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgICAuc2V0SGVhZGluZygpXHJcbiAgICAgICAgLnNldENsYXNzKCdmbi1leGNsdWRlZC1mb2xkZXItaGVhZGluZycpXHJcbiAgICAgICAgLnNldE5hbWUoJ01hbmFnZSBleGNsdWRlZCBmb2xkZXJzJyk7XHJcbiAgICBjb25zdCBkZXNjMyA9IGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtcclxuICAgIGRlc2MzLmFwcGVuZChcclxuICAgICAgICAnQWRkIHtyZWdleH0gYXQgdGhlIGJlZ2lubmluZyBvZiB0aGUgZm9sZGVyIG5hbWUgdG8gdXNlIGEgcmVnZXggcGF0dGVybi4nLFxyXG4gICAgICAgIGRlc2MzLmNyZWF0ZUVsKCdicicpLFxyXG4gICAgICAgICdVc2UgKiBiZWZvcmUgYW5kIGFmdGVyIHRvIGV4Y2x1ZGUgZm9sZGVycyB0aGF0IGluY2x1ZGUgdGhlIG5hbWUgYmV0d2VlbiB0aGUgKnMuJyxcclxuICAgICAgICBkZXNjMy5jcmVhdGVFbCgnYnInKSxcclxuICAgICAgICAnVXNlICogYmVmb3JlIHRoZSBmb2xkZXIgbmFtZSB0byBleGNsdWRlIGZvbGRlcnMgdGhhdCBlbmQgd2l0aCB0aGUgZm9sZGVyIG5hbWUuJyxcclxuICAgICAgICBkZXNjMy5jcmVhdGVFbCgnYnInKSxcclxuICAgICAgICAnVXNlICogYWZ0ZXIgdGhlIGZvbGRlciBuYW1lIHRvIGV4Y2x1ZGUgZm9sZGVycyB0aGF0IHN0YXJ0IHdpdGggdGhlIGZvbGRlciBuYW1lLicsXHJcbiAgICApO1xyXG4gICAgbWFuYWdlRXhjbHVkZWQuc2V0RGVzYyhkZXNjMyk7XHJcbiAgICBtYW5hZ2VFeGNsdWRlZC5pbmZvRWwuYXBwZW5kVGV4dCgnVGhlIHJlZ2V4ZXMgYW5kIHdpbGRjYXJkcyBhcmUgb25seSBmb3IgdGhlIGZvbGRlciBuYW1lLCBub3QgdGhlIHBhdGguJyk7XHJcbiAgICBtYW5hZ2VFeGNsdWRlZC5pbmZvRWwuY3JlYXRlRWwoJ2JyJyk7XHJcbiAgICBtYW5hZ2VFeGNsdWRlZC5pbmZvRWwuYXBwZW5kVGV4dCgnSWYgeW91IHdhbnQgdG8gc3dpdGNoIHRvIGEgZm9sZGVyIHBhdGggZGVsZXRlIHRoZSBwYXR0ZXJuIGZpcnN0LicpO1xyXG4gICAgbWFuYWdlRXhjbHVkZWQuaW5mb0VsLnN0eWxlLmNvbG9yID0gc2V0dGluZ3NUYWIuYXBwLnZhdWx0LmdldENvbmZpZygnYWNjZW50Q29sb3InKSBhcyBzdHJpbmcgfHwgJyM3ZDViZWQnO1xyXG5cclxuXHJcbiAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgICAuc2V0TmFtZSgnV2hpdGVsaXN0ZWQgZm9sZGVycycpXHJcbiAgICAgICAgLnNldERlc2MoJ0ZvbGRlcnMgdGhhdCBvdmVycmlkZSB0aGUgZXhjbHVkZWQgZm9sZGVycy9wYXR0ZXJucycpXHJcbiAgICAgICAgLmFkZEJ1dHRvbigoY2IpID0+IHtcclxuICAgICAgICAgICAgY2Iuc2V0QnV0dG9uVGV4dCgnTWFuYWdlJylcclxuICAgICAgICAgICAgY2Iuc2V0Q3RhKClcclxuICAgICAgICAgICAgY2Iub25DbGljayhhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBuZXcgV2hpdGVsaXN0ZWRGb2xkZXJzU2V0dGluZ3Moc2V0dGluZ3NUYWIpLm9wZW4oKTtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9KVxyXG5cclxuICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAgIC5zZXROYW1lKCdFeGNsdWRlIGZvbGRlciBkZWZhdWx0IHNldHRpbmdzJylcclxuICAgICAgICAuYWRkQnV0dG9uKChjYikgPT4ge1xyXG4gICAgICAgICAgICBjYi5zZXRCdXR0b25UZXh0KCdNYW5hZ2UnKVxyXG4gICAgICAgICAgICBjYi5zZXRDdGEoKVxyXG4gICAgICAgICAgICBjYi5vbkNsaWNrKGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgICAgIG5ldyBFeGNsdWRlZEZvbGRlclNldHRpbmdzKHNldHRpbmdzVGFiLmFwcCwgc2V0dGluZ3NUYWIucGx1Z2luLCBzZXR0aW5nc1RhYi5wbHVnaW4uc2V0dGluZ3MuZXhjbHVkZUZvbGRlckRlZmF1bHRTZXR0aW5ncykub3BlbigpO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH0pXHJcblxyXG4gICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgICAgLnNldE5hbWUoJ0V4Y2x1ZGUgcGF0dGVybiBkZWZhdWx0IHNldHRpbmdzJylcclxuICAgICAgICAuYWRkQnV0dG9uKChjYikgPT4ge1xyXG4gICAgICAgICAgICBjYi5zZXRCdXR0b25UZXh0KCdNYW5hZ2UnKVxyXG4gICAgICAgICAgICBjYi5zZXRDdGEoKVxyXG4gICAgICAgICAgICBjYi5vbkNsaWNrKGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgICAgIG5ldyBQYXR0ZXJuU2V0dGluZ3Moc2V0dGluZ3NUYWIuYXBwLCBzZXR0aW5nc1RhYi5wbHVnaW4sIHNldHRpbmdzVGFiLnBsdWdpbi5zZXR0aW5ncy5leGNsdWRlUGF0dGVybkRlZmF1bHRTZXR0aW5ncykub3BlbigpO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH0pXHJcblxyXG5cclxuICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAgIC5zZXROYW1lKCdBZGQgZXhjbHVkZWQgZm9sZGVyJylcclxuICAgICAgICAuc2V0Q2xhc3MoJ2FkZC1leGNsdWRlLWZvbGRlci1pdGVtJylcclxuICAgICAgICAuYWRkQnV0dG9uKChjYikgPT4ge1xyXG4gICAgICAgICAgICBjYi5zZXRJY29uKCdwbHVzJyk7XHJcbiAgICAgICAgICAgIGNiLnNldENsYXNzKCdhZGQtZXhjbHVkZS1mb2xkZXInKTtcclxuICAgICAgICAgICAgY2Iuc2V0VG9vbHRpcCgnQWRkIGV4Y2x1ZGVkIGZvbGRlcicpO1xyXG4gICAgICAgICAgICBjYi5vbkNsaWNrKCgpID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGV4Y2x1ZGVkRm9sZGVyID0gbmV3IEV4Y2x1ZGVkRm9sZGVyKCcnLCBzZXR0aW5nc1RhYi5wbHVnaW4uc2V0dGluZ3MuZXhjbHVkZUZvbGRlcnMubGVuZ3RoLCB1bmRlZmluZWQsIHNldHRpbmdzVGFiLnBsdWdpbik7XHJcbiAgICAgICAgICAgICAgICBhZGRFeGNsdWRlRm9sZGVyTGlzdEl0ZW0oc2V0dGluZ3NUYWIsIGNvbnRhaW5lckVsLCBleGNsdWRlZEZvbGRlcik7XHJcbiAgICAgICAgICAgICAgICBhZGRFeGNsdWRlZEZvbGRlcihzZXR0aW5nc1RhYi5wbHVnaW4sIGV4Y2x1ZGVkRm9sZGVyKTtcclxuICAgICAgICAgICAgICAgIHNldHRpbmdzVGFiLmRpc3BsYXkoKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgc2V0dGluZ3NUYWIucGx1Z2luLnNldHRpbmdzLmV4Y2x1ZGVGb2xkZXJzLmZpbHRlcigoZm9sZGVyKSA9PiAhZm9sZGVyLmhpZGVJblNldHRpbmdzKS5zb3J0KChhLCBiKSA9PiBhLnBvc2l0aW9uIC0gYi5wb3NpdGlvbikuZm9yRWFjaCgoZXhjbHVkZWRGb2xkZXIpID0+IHtcclxuICAgICAgICBpZiAoZXhjbHVkZWRGb2xkZXIuc3RyaW5nPy50cmltKCkgIT09ICcnICYmIGV4Y2x1ZGVkRm9sZGVyLnBhdGg/LnRyaW0oKSA9PT0gJycpIHtcclxuICAgICAgICAgICAgYWRkRXhjbHVkZVBhdHRlcm5MaXN0SXRlbShzZXR0aW5nc1RhYiwgY29udGFpbmVyRWwsIGV4Y2x1ZGVkRm9sZGVyKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBhZGRFeGNsdWRlRm9sZGVyTGlzdEl0ZW0oc2V0dGluZ3NUYWIsIGNvbnRhaW5lckVsLCBleGNsdWRlZEZvbGRlcik7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbn0iLCAiaW1wb3J0IHsgQXBwLCBCdXR0b25Db21wb25lbnQsIE1vZGFsLCBTZXR0aW5nLCBURm9sZGVyLCBOb3RpY2UgfSBmcm9tICdvYnNpZGlhbic7XHJcbmltcG9ydCB7IFNldHRpbmdzVGFiIH0gZnJvbSAnc3JjL3NldHRpbmdzL1NldHRpbmdzVGFiJztcclxuaW1wb3J0IEZvbGRlck5vdGVzUGx1Z2luIGZyb20gJy4uLy4uL21haW4nO1xyXG5pbXBvcnQgeyBXaGl0ZWxpc3RlZEZvbGRlciB9IGZyb20gJy4uL1doaXRlbGlzdEZvbGRlcic7XHJcbmltcG9ydCB7IGFkZFdoaXRlbGlzdEZvbGRlckxpc3RJdGVtLCBhZGRXaGl0ZWxpc3RlZEZvbGRlciB9IGZyb20gJy4uL2Z1bmN0aW9ucy93aGl0ZWxpc3RGb2xkZXJGdW5jdGlvbnMnO1xyXG5pbXBvcnQgeyBhZGRXaGl0ZWxpc3RlZFBhdHRlcm5MaXN0SXRlbSB9IGZyb20gJy4uL2Z1bmN0aW9ucy93aGl0ZWxpc3RQYXR0ZXJuRnVuY3Rpb25zJztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFdoaXRlbGlzdGVkRm9sZGVyc1NldHRpbmdzIGV4dGVuZHMgTW9kYWwge1xyXG5cdHBsdWdpbjogRm9sZGVyTm90ZXNQbHVnaW47XHJcblx0YXBwOiBBcHA7XHJcblx0c2V0dGluZ3NUYWI6IFNldHRpbmdzVGFiO1xyXG5cdGNvbnN0cnVjdG9yKHNldHRpbmdzVGFiOiBTZXR0aW5nc1RhYikge1xyXG5cdFx0c3VwZXIoc2V0dGluZ3NUYWIuYXBwKTtcclxuXHRcdHRoaXMucGx1Z2luID0gc2V0dGluZ3NUYWIucGx1Z2luO1xyXG5cdFx0dGhpcy5zZXR0aW5nc1RhYiA9IHNldHRpbmdzVGFiO1xyXG5cdFx0dGhpcy5hcHAgPSBzZXR0aW5nc1RhYi5hcHA7XHJcblx0fVxyXG5cdG9uT3BlbigpIHtcclxuXHJcblx0XHRjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcclxuXHRcdGNvbnRlbnRFbC5jcmVhdGVFbCgnaDInLCB7IHRleHQ6ICdNYW5hZ2Ugd2hpdGVsaXN0ZWQgZm9sZGVycycgfSk7XHJcblxyXG5cdFx0bmV3IFNldHRpbmcoY29udGVudEVsKVxyXG5cdFx0XHQuc2V0TmFtZSgnQWRkIHdoaXRlbGlzdGVkIGZvbGRlcicpXHJcblx0XHRcdC5zZXRDbGFzcygnYWRkLWV4Y2x1ZGUtZm9sZGVyLWl0ZW0nKVxyXG5cdFx0XHQuYWRkQnV0dG9uKChjYikgPT4ge1xyXG5cdFx0XHRcdGNiLnNldEljb24oJ3BsdXMnKTtcclxuXHRcdFx0XHRjYi5zZXRDbGFzcygnYWRkLWV4Y2x1ZGUtZm9sZGVyJyk7XHJcblx0XHRcdFx0Y2Iuc2V0VG9vbHRpcCgnQWRkIHdoaXRlbGlzdGVkIGZvbGRlcicpO1xyXG5cdFx0XHRcdGNiLm9uQ2xpY2soKCkgPT4ge1xyXG5cdFx0XHRcdFx0Y29uc3Qgd2hpdGVsaXN0ZWRGb2xkZXIgPSBuZXcgV2hpdGVsaXN0ZWRGb2xkZXIoJycsIHRoaXMucGx1Z2luLnNldHRpbmdzLndoaXRlbGlzdEZvbGRlcnMubGVuZ3RoLCB1bmRlZmluZWQsIHRoaXMucGx1Z2luKTtcclxuXHRcdFx0XHRcdGFkZFdoaXRlbGlzdEZvbGRlckxpc3RJdGVtKHRoaXMucGx1Z2luLnNldHRpbmdzVGFiLCBjb250ZW50RWwsIHdoaXRlbGlzdGVkRm9sZGVyKTtcclxuXHRcdFx0XHRcdGFkZFdoaXRlbGlzdGVkRm9sZGVyKHRoaXMucGx1Z2luLCB3aGl0ZWxpc3RlZEZvbGRlcik7XHJcblx0XHRcdFx0XHR0aGlzLnNldHRpbmdzVGFiLmRpc3BsYXkoKTtcclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0fSk7XHJcblx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy53aGl0ZWxpc3RGb2xkZXJzLnNvcnQoKGEsIGIpID0+IGEucG9zaXRpb24gLSBiLnBvc2l0aW9uKS5mb3JFYWNoKCh3aGl0ZWxpc3RlZEZvbGRlcikgPT4ge1xyXG5cdFx0XHRpZiAod2hpdGVsaXN0ZWRGb2xkZXIuc3RyaW5nPy50cmltKCkgIT09ICcnICYmIHdoaXRlbGlzdGVkRm9sZGVyLnBhdGg/LnRyaW0oKSA9PT0gJycpIHtcclxuXHRcdFx0XHRhZGRXaGl0ZWxpc3RlZFBhdHRlcm5MaXN0SXRlbSh0aGlzLnNldHRpbmdzVGFiLCBjb250ZW50RWwsIHdoaXRlbGlzdGVkRm9sZGVyKTtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRhZGRXaGl0ZWxpc3RGb2xkZXJMaXN0SXRlbSh0aGlzLnNldHRpbmdzVGFiLCBjb250ZW50RWwsIHdoaXRlbGlzdGVkRm9sZGVyKTtcclxuXHRcdFx0fVxyXG5cdFx0fSk7XHJcblx0fVxyXG5cclxuXHRvbkNsb3NlKCkge1xyXG5cdFx0Y29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XHJcblx0XHRjb250ZW50RWwuZW1wdHkoKTtcclxuXHR9XHJcbn0iLCAiaW1wb3J0IEZvbGRlck5vdGVzUGx1Z2luIGZyb20gJy4uL21haW4nO1xyXG5leHBvcnQgY2xhc3MgV2hpdGVsaXN0ZWRGb2xkZXIge1xyXG5cdHR5cGU6IHN0cmluZztcclxuXHRpZDogc3RyaW5nO1xyXG5cdHBhdGg6IHN0cmluZztcclxuXHRzdHJpbmc6IHN0cmluZztcclxuXHRzdWJGb2xkZXJzOiBib29sZWFuO1xyXG5cdGVuYWJsZVN5bmM6IGJvb2xlYW47XHJcblx0ZW5hYmxlQXV0b0NyZWF0ZTogYm9vbGVhbjtcclxuXHRlbmFibGVGb2xkZXJOb3RlOiBib29sZWFuO1xyXG5cdGVuYWJsZUNvbGxhcHNpbmc6IGJvb2xlYW47XHJcblx0c2hvd0luRm9sZGVyT3ZlcnZpZXc6IGJvb2xlYW47XHJcblx0cG9zaXRpb246IG51bWJlcjtcclxuXHRoaWRlSW5TZXR0aW5nczogYm9vbGVhbjtcclxuXHRjb25zdHJ1Y3RvcihwYXRoOiBzdHJpbmcsIHBvc2l0aW9uOiBudW1iZXIsIGlkOiBzdHJpbmcgfCB1bmRlZmluZWQsIHBsdWdpbjogRm9sZGVyTm90ZXNQbHVnaW4pIHtcclxuXHRcdHRoaXMudHlwZSA9ICdmb2xkZXInO1xyXG5cdFx0dGhpcy5pZCA9IGlkIHx8IGNyeXB0by5yYW5kb21VVUlEKCk7XHJcblx0XHR0aGlzLnBhdGggPSBwYXRoO1xyXG5cdFx0dGhpcy5zdWJGb2xkZXJzID0gcGx1Z2luLnNldHRpbmdzLmV4Y2x1ZGVGb2xkZXJEZWZhdWx0U2V0dGluZ3Muc3ViRm9sZGVycztcclxuXHRcdHRoaXMucG9zaXRpb24gPSBwb3NpdGlvbjtcclxuXHRcdHRoaXMuc3RyaW5nID0gJyc7XHJcblx0fVxyXG59IiwgImltcG9ydCB7IEFwcCwgVEZvbGRlciwgTWVudSwgVEFic3RyYWN0RmlsZSwgTm90aWNlLCBURmlsZSwgRWRpdG9yLCBNYXJrZG93blZpZXcsIFBsYXRmb3JtLCBzdHJpbmdpZnlZYW1sIH0gZnJvbSAnb2JzaWRpYW4nO1xyXG5pbXBvcnQgRm9sZGVyTm90ZXNQbHVnaW4gZnJvbSAnLi9tYWluJztcclxuaW1wb3J0IHsgZ2V0Rm9sZGVyTm90ZSwgY3JlYXRlRm9sZGVyTm90ZSwgZGVsZXRlRm9sZGVyTm90ZSwgdHVybkludG9Gb2xkZXJOb3RlLCBvcGVuRm9sZGVyTm90ZSwgZXh0cmFjdEZvbGRlck5hbWUsIGRldGFjaEZvbGRlck5vdGUgfSBmcm9tICcuL2Z1bmN0aW9ucy9mb2xkZXJOb3RlRnVuY3Rpb25zJztcclxuaW1wb3J0IHsgRXhjbHVkZWRGb2xkZXIgfSBmcm9tICcuL0V4Y2x1ZGVGb2xkZXJzL0V4Y2x1ZGVGb2xkZXInO1xyXG5pbXBvcnQgeyBnZXRGb2xkZXJQYXRoRnJvbVN0cmluZyB9IGZyb20gJy4vZnVuY3Rpb25zL3V0aWxzJztcclxuaW1wb3J0IHsgZ2V0RXhjbHVkZWRGb2xkZXJCeVBhdHRlcm4gfSBmcm9tICcuL0V4Y2x1ZGVGb2xkZXJzL2Z1bmN0aW9ucy9wYXR0ZXJuRnVuY3Rpb25zJztcclxuaW1wb3J0IHsgYWRkRXhjbHVkZWRGb2xkZXIsIGRlbGV0ZUV4Y2x1ZGVkRm9sZGVyLCBnZXREZXRhY2hlZEZvbGRlciwgZ2V0RXhjbHVkZWRGb2xkZXIsIGdldEV4Y2x1ZGVkRm9sZGVyc0J5UGF0aCwgdXBkYXRlRXhjbHVkZWRGb2xkZXIgfSBmcm9tICcuL0V4Y2x1ZGVGb2xkZXJzL2Z1bmN0aW9ucy9mb2xkZXJGdW5jdGlvbnMnO1xyXG5pbXBvcnQgRXhjbHVkZWRGb2xkZXJTZXR0aW5ncyBmcm9tICcuL0V4Y2x1ZGVGb2xkZXJzL21vZGFscy9FeGNsdWRlRm9sZGVyU2V0dGluZ3MnXHJcbmltcG9ydCB7IEV4Y2x1ZGVQYXR0ZXJuIH0gZnJvbSAnLi9FeGNsdWRlRm9sZGVycy9FeGNsdWRlUGF0dGVybic7XHJcbmltcG9ydCBQYXR0ZXJuU2V0dGluZ3MgZnJvbSAnLi9FeGNsdWRlRm9sZGVycy9tb2RhbHMvUGF0dGVyblNldHRpbmdzJztcclxuaW1wb3J0IHsgYXBwbHlDU1NDbGFzc2VzVG9Gb2xkZXIgfSBmcm9tICcuL2Z1bmN0aW9ucy9zdHlsZUZ1bmN0aW9ucyc7XHJcblxyXG5leHBvcnQgY2xhc3MgQ29tbWFuZHMge1xyXG5cdHBsdWdpbjogRm9sZGVyTm90ZXNQbHVnaW47XHJcblx0YXBwOiBBcHA7XHJcblx0Y29uc3RydWN0b3IoYXBwOiBBcHAsIHBsdWdpbjogRm9sZGVyTm90ZXNQbHVnaW4pIHtcclxuXHRcdHRoaXMucGx1Z2luID0gcGx1Z2luO1xyXG5cdFx0dGhpcy5hcHAgPSBhcHA7XHJcblx0fVxyXG5cdHJlZ2lzdGVyQ29tbWFuZHMoKSB7XHJcblx0XHR0aGlzLmVkaXRvckNvbW1hbmRzKCk7XHJcblx0XHR0aGlzLmZpbGVDb21tYW5kcygpO1xyXG5cdFx0dGhpcy5yZWd1bGFyQ29tbWFuZHMoKTtcclxuXHR9XHJcblx0cmVndWxhckNvbW1hbmRzKCkge1xyXG5cdFx0dGhpcy5wbHVnaW4uYWRkQ29tbWFuZCh7XHJcblx0XHRcdGlkOiAndHVybi1pbnRvLWZvbGRlci1ub3RlJyxcclxuXHRcdFx0bmFtZTogJ01ha2UgY3VycmVudCBhY3RpdmUgbm90ZSBhIGZvbGRlciBub3RlIGZvciB0aGUgZm9sZGVyIG9mIHRoZSBhY3RpdmUgbm90ZScsXHJcblx0XHRcdGNhbGxiYWNrOiAoKSA9PiB7XHJcblx0XHRcdFx0Y29uc3QgZmlsZSA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVGaWxlKCk7XHJcblx0XHRcdFx0aWYgKCEoZmlsZSBpbnN0YW5jZW9mIFRGaWxlKSkgcmV0dXJuO1xyXG5cdFx0XHRcdGNvbnN0IGZvbGRlciA9IGZpbGUucGFyZW50O1xyXG5cdFx0XHRcdGlmICghKGZvbGRlciBpbnN0YW5jZW9mIFRGb2xkZXIpKSByZXR1cm47XHJcblx0XHRcdFx0Y29uc3QgZm9sZGVyTm90ZSA9IGdldEZvbGRlck5vdGUodGhpcy5wbHVnaW4sIGZvbGRlci5wYXRoKTtcclxuXHRcdFx0XHR0dXJuSW50b0ZvbGRlck5vdGUodGhpcy5wbHVnaW4sIGZpbGUsIGZvbGRlciwgZm9sZGVyTm90ZSk7XHJcblx0XHRcdH1cclxuXHRcdH0pO1xyXG5cclxuXHRcdGNvbnNvbGUubG9nKCdyZWdpc3RlcmluZyBjb21tYW5kcycpXHJcblx0XHR0aGlzLnBsdWdpbi5hZGRDb21tYW5kKHtcclxuXHRcdFx0aWQ6ICdvcGVuLWZvbGRlci1vdmVydmlldy12aWV3JyxcclxuXHRcdFx0bmFtZTogJ0NoYW5nZSBmb2xkZXIgb3ZlcnZpZXcgc2V0dGluZ3MnLFxyXG5cdFx0XHRjYWxsYmFjazogKCkgPT4ge1xyXG5cdFx0XHRcdHRoaXMucGx1Z2luLmFjdGl2YXRlT3ZlcnZpZXdWaWV3KCk7XHJcblx0XHRcdH1cclxuXHRcdH0pO1xyXG5cclxuXHJcblx0XHR0aGlzLnBsdWdpbi5hZGRDb21tYW5kKHtcclxuXHRcdFx0aWQ6ICdvcGVuLWZvbGRlci1vdmVydmlldy12aWV3JyxcclxuXHRcdFx0bmFtZTogJ0NoYW5nZSBmb2xkZXIgb3ZlcnZpZXcgc2V0dGluZ3MnLFxyXG5cdFx0XHRjYWxsYmFjazogKCkgPT4ge1xyXG5cdFx0XHRcdHRoaXMucGx1Z2luLmFjdGl2YXRlT3ZlcnZpZXdWaWV3KCk7XHJcblx0XHRcdH1cclxuXHRcdH0pO1xyXG5cclxuXHRcdHRoaXMucGx1Z2luLmFkZENvbW1hbmQoe1xyXG5cdFx0XHRpZDogJ2NyZWF0ZS1mb2xkZXItbm90ZScsXHJcblx0XHRcdG5hbWU6ICdDcmVhdGUgZm9sZGVyIG5vdGUgd2l0aCBhIG5ldyBmb2xkZXIgZm9yIHRoZSBhY3RpdmUgbm90ZSBpbiB0aGUgY3VycmVudCBmb2xkZXInLFxyXG5cdFx0XHRjYWxsYmFjazogYXN5bmMgKCkgPT4ge1xyXG5cdFx0XHRcdGNvbnN0IGZpbGUgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlRmlsZSgpO1xyXG5cdFx0XHRcdGlmICghKGZpbGUgaW5zdGFuY2VvZiBURmlsZSkpIHJldHVybjtcclxuXHRcdFx0XHRsZXQgbmV3UGF0aCA9IGZpbGUucGFyZW50Py5wYXRoICsgJy8nICsgZmlsZS5iYXNlbmFtZTtcclxuXHRcdFx0XHRpZiAoZmlsZS5wYXJlbnQ/LnBhdGggPT09ICcnIHx8IGZpbGUucGFyZW50Py5wYXRoID09PSAnLycpIHtcclxuXHRcdFx0XHRcdG5ld1BhdGggPSBmaWxlLmJhc2VuYW1lO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRpZiAodGhpcy5wbHVnaW4uYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChuZXdQYXRoKSkge1xyXG5cdFx0XHRcdFx0cmV0dXJuIG5ldyBOb3RpY2UoJ0ZvbGRlciBhbHJlYWR5IGV4aXN0cycpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRjb25zdCBhdXRvbWF0aWNhbGx5Q3JlYXRlRm9sZGVyTm90ZSA9IHRoaXMucGx1Z2luLnNldHRpbmdzLmF1dG9DcmVhdGU7XHJcblx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuYXV0b0NyZWF0ZSA9IGZhbHNlO1xyXG5cdFx0XHRcdHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLmFwcC52YXVsdC5jcmVhdGVGb2xkZXIobmV3UGF0aCk7XHJcblx0XHRcdFx0Y29uc3QgZm9sZGVyID0gdGhpcy5wbHVnaW4uYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChuZXdQYXRoKTtcclxuXHRcdFx0XHRpZiAoIShmb2xkZXIgaW5zdGFuY2VvZiBURm9sZGVyKSkgcmV0dXJuO1xyXG5cdFx0XHRcdGNyZWF0ZUZvbGRlck5vdGUodGhpcy5wbHVnaW4sIGZvbGRlci5wYXRoLCB0cnVlLCAnLicgKyBmaWxlLmV4dGVuc2lvbiwgZmFsc2UsIGZpbGUpO1xyXG5cdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmF1dG9DcmVhdGUgPSBhdXRvbWF0aWNhbGx5Q3JlYXRlRm9sZGVyTm90ZTtcclxuXHRcdFx0XHR0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0fVxyXG5cdFx0fSlcclxuXHJcblx0XHR0aGlzLnBsdWdpbi5hZGRDb21tYW5kKHtcclxuXHRcdFx0aWQ6ICdjcmVhdGUtZm9sZGVyLW5vdGUtZm9yLWN1cnJlbnQtZm9sZGVyJyxcclxuXHRcdFx0bmFtZTogJ0NyZWF0ZSBtYXJrZG93biBmb2xkZXIgbm90ZSBmb3IgY3VycmVudCBmb2xkZXIgb2YgYWN0aXZlIG5vdGUnLFxyXG5cdFx0XHRjYWxsYmFjazogKCkgPT4ge1xyXG5cdFx0XHRcdGNvbnN0IGZpbGUgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlRmlsZSgpO1xyXG5cdFx0XHRcdGlmICghKGZpbGUgaW5zdGFuY2VvZiBURmlsZSkpIHJldHVybjtcclxuXHRcdFx0XHRjb25zdCBmb2xkZXIgPSBmaWxlLnBhcmVudDtcclxuXHRcdFx0XHRpZiAoIShmb2xkZXIgaW5zdGFuY2VvZiBURm9sZGVyKSkgcmV0dXJuO1xyXG5cdFx0XHRcdGNyZWF0ZUZvbGRlck5vdGUodGhpcy5wbHVnaW4sIGZvbGRlci5wYXRoLCB0cnVlLCAnLm1kJywgZmFsc2UpO1xyXG5cdFx0XHR9XHJcblx0XHR9KTtcclxuXHJcblx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5zdXBwb3J0ZWRGaWxlVHlwZXMuZm9yRWFjaCgoZmlsZVR5cGUpID0+IHtcclxuXHRcdFx0aWYgKGZpbGVUeXBlID09PSAnbWQnKSByZXR1cm47XHJcblx0XHRcdHRoaXMucGx1Z2luLmFkZENvbW1hbmQoe1xyXG5cdFx0XHRcdGlkOiBgY3JlYXRlLSR7ZmlsZVR5cGV9LWZvbGRlci1ub3RlLWZvci1jdXJyZW50LWZvbGRlcmAsXHJcblx0XHRcdFx0bmFtZTogYENyZWF0ZSAke2ZpbGVUeXBlfSBmb2xkZXIgbm90ZSBmb3IgY3VycmVudCBmb2xkZXIgb2YgYWN0aXZlIG5vdGVgLFxyXG5cdFx0XHRcdGNhbGxiYWNrOiAoKSA9PiB7XHJcblx0XHRcdFx0XHRjb25zdCBmaWxlID0gdGhpcy5hcHAud29ya3NwYWNlLmdldEFjdGl2ZUZpbGUoKTtcclxuXHRcdFx0XHRcdGlmICghKGZpbGUgaW5zdGFuY2VvZiBURmlsZSkpIHJldHVybjtcclxuXHRcdFx0XHRcdGNvbnN0IGZvbGRlciA9IGZpbGUucGFyZW50O1xyXG5cdFx0XHRcdFx0aWYgKCEoZm9sZGVyIGluc3RhbmNlb2YgVEZvbGRlcikpIHJldHVybjtcclxuXHRcdFx0XHRcdGNyZWF0ZUZvbGRlck5vdGUodGhpcy5wbHVnaW4sIGZvbGRlci5wYXRoLCB0cnVlLCAnLicgKyBmaWxlVHlwZSwgZmFsc2UpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSk7XHJcblx0XHR9KTtcclxuXHJcblx0XHR0aGlzLnBsdWdpbi5hZGRDb21tYW5kKHtcclxuXHRcdFx0aWQ6ICdkZWxldGUtZm9sZGVyLW5vdGUtZm9yLWN1cnJlbnQtZm9sZGVyJyxcclxuXHRcdFx0bmFtZTogJ0RlbGV0ZSBmb2xkZXIgbm90ZSBvZiBjdXJyZW50IGZvbGRlciBvZiBhY3RpdmUgbm90ZScsXHJcblx0XHRcdGNhbGxiYWNrOiAoKSA9PiB7XHJcblx0XHRcdFx0Y29uc3QgZmlsZSA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVGaWxlKCk7XHJcblx0XHRcdFx0aWYgKCEoZmlsZSBpbnN0YW5jZW9mIFRGaWxlKSkgcmV0dXJuO1xyXG5cdFx0XHRcdGNvbnN0IGZvbGRlciA9IGZpbGUucGFyZW50O1xyXG5cdFx0XHRcdGlmICghKGZvbGRlciBpbnN0YW5jZW9mIFRGb2xkZXIpKSByZXR1cm47XHJcblx0XHRcdFx0Y29uc3QgZm9sZGVyTm90ZSA9IGdldEZvbGRlck5vdGUodGhpcy5wbHVnaW4sIGZvbGRlci5wYXRoKTtcclxuXHRcdFx0XHRpZiAoIShmb2xkZXJOb3RlIGluc3RhbmNlb2YgVEZpbGUpKSByZXR1cm47XHJcblx0XHRcdFx0ZGVsZXRlRm9sZGVyTm90ZSh0aGlzLnBsdWdpbiwgZm9sZGVyTm90ZSwgdHJ1ZSk7XHJcblx0XHRcdH1cclxuXHRcdH0pO1xyXG5cclxuXHRcdHRoaXMucGx1Z2luLmFkZENvbW1hbmQoe1xyXG5cdFx0XHRpZDogJ29wZW4tZm9sZGVyLW5vdGUtZm9yLWN1cnJlbnQtZm9sZGVyJyxcclxuXHRcdFx0bmFtZTogJ09wZW4gZm9sZGVyIG5vdGUgb2YgY3VycmVudCBmb2xkZXIgb2YgYWN0aXZlIG5vdGUnLFxyXG5cdFx0XHRjYWxsYmFjazogKCkgPT4ge1xyXG5cdFx0XHRcdGNvbnN0IGZpbGUgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlRmlsZSgpO1xyXG5cdFx0XHRcdGlmICghKGZpbGUgaW5zdGFuY2VvZiBURmlsZSkpIHJldHVybjtcclxuXHRcdFx0XHRjb25zdCBmb2xkZXIgPSBmaWxlLnBhcmVudDtcclxuXHRcdFx0XHRpZiAoIShmb2xkZXIgaW5zdGFuY2VvZiBURm9sZGVyKSkgcmV0dXJuO1xyXG5cdFx0XHRcdGNvbnN0IGZvbGRlck5vdGUgPSBnZXRGb2xkZXJOb3RlKHRoaXMucGx1Z2luLCBmb2xkZXIucGF0aCk7XHJcblx0XHRcdFx0aWYgKCEoZm9sZGVyTm90ZSBpbnN0YW5jZW9mIFRGaWxlKSkgcmV0dXJuO1xyXG5cdFx0XHRcdG9wZW5Gb2xkZXJOb3RlKHRoaXMucGx1Z2luLCBmb2xkZXJOb3RlKTtcclxuXHRcdFx0fVxyXG5cdFx0fSk7XHJcblx0XHR0aGlzLnBsdWdpbi5hZGRDb21tYW5kKHtcclxuXHRcdFx0aWQ6ICdpbnNlcnQtZm9sZGVyLW92ZXJ2aWV3LWZuJyxcclxuXHRcdFx0bmFtZTogJ0luc2VydCBmb2xkZXIgb3ZlcnZpZXcnLFxyXG5cdFx0XHRlZGl0b3JDaGVja0NhbGxiYWNrOiAoY2hlY2tpbmc6IGJvb2xlYW4sIGVkaXRvcjogRWRpdG9yKSA9PiB7XHJcblx0XHRcdFx0Y29uc3QgbGluZSA9IGVkaXRvci5nZXRDdXJzb3IoKS5saW5lO1xyXG5cdFx0XHRcdGNvbnN0IGxpbmVUZXh0ID0gZWRpdG9yLmdldExpbmUobGluZSk7XHJcblx0XHRcdFx0aWYgKGxpbmVUZXh0LnRyaW0oKSA9PT0gJycgfHwgbGluZVRleHQudHJpbSgpID09PSAnPicpIHtcclxuXHRcdFx0XHRcdGlmICghY2hlY2tpbmcpIHtcclxuXHRcdFx0XHRcdFx0bGV0IGpzb24gPSBPYmplY3QuYXNzaWduKHt9LCB0aGlzLnBsdWdpbi5zZXR0aW5ncy5kZWZhdWx0T3ZlcnZpZXcpO1xyXG5cdFx0XHRcdFx0XHRqc29uLmlkID0gY3J5cHRvLnJhbmRvbVVVSUQoKTtcclxuXHRcdFx0XHRcdFx0Y29uc3QgeWFtbCA9IHN0cmluZ2lmeVlhbWwoanNvbilcclxuXHRcdFx0XHRcdFx0aWYgKGxpbmVUZXh0LnRyaW0oKSA9PT0gJycpIHtcclxuXHRcdFx0XHRcdFx0XHRlZGl0b3IucmVwbGFjZVNlbGVjdGlvbihgXFxgXFxgXFxgZm9sZGVyLW92ZXJ2aWV3XFxuJHt5YW1sfVxcYFxcYFxcYFxcbmApO1xyXG5cdFx0XHRcdFx0XHR9IGVsc2UgaWYgKGxpbmVUZXh0LnRyaW0oKSA9PT0gJz4nKSB7XHJcblx0XHRcdFx0XHRcdFx0Ly8gYWRkID4gdG8gdGhlIGJlZ2lubmluZyBvZiBlYWNoIGxpbmVcclxuXHRcdFx0XHRcdFx0XHRjb25zdCBsaW5lcyA9IHlhbWwuc3BsaXQoJ1xcbicpO1xyXG5cdFx0XHRcdFx0XHRcdGNvbnN0IG5ld0xpbmVzID0gbGluZXMubWFwKChsaW5lKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0XHRyZXR1cm4gYD4gJHtsaW5lfWA7XHJcblx0XHRcdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHRcdFx0ZWRpdG9yLnJlcGxhY2VTZWxlY3Rpb24oYFxcYFxcYFxcYGZvbGRlci1vdmVydmlld1xcbiR7bmV3TGluZXMuam9pbignXFxuJyl9XFxgXFxgXFxgXFxuYCk7XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdHJldHVybiB0cnVlO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRyZXR1cm4gZmFsc2U7XHJcblx0XHRcdH0sXHJcblx0XHR9KVxyXG5cdFx0dGhpcy5wbHVnaW4uYWRkQ29tbWFuZCh7XHJcblx0XHRcdGlkOiAnY3JlYXRlLWZvbGRlci1ub3RlLWZyb20tc2VsZWN0ZWQtdGV4dCcsXHJcblx0XHRcdG5hbWU6ICdDcmVhdGUgZm9sZGVyIG5vdGUgZnJvbSBzZWxlY3RlZCB0ZXh0JyxcclxuXHRcdFx0ZWRpdG9yQ2hlY2tDYWxsYmFjazogKGNoZWNraW5nOiBib29sZWFuLCBlZGl0b3I6IEVkaXRvciwgdmlldzogTWFya2Rvd25WaWV3KSA9PiB7XHJcblx0XHRcdFx0Y29uc3QgdGV4dCA9IGVkaXRvci5nZXRTZWxlY3Rpb24oKS50cmltKCk7XHJcblx0XHRcdFx0Y29uc3QgbGluZSA9IGVkaXRvci5nZXRDdXJzb3IoKS5saW5lO1xyXG5cdFx0XHRcdGNvbnN0IGZpbGUgPSB2aWV3LmZpbGU7XHJcblx0XHRcdFx0aWYgKCEoZmlsZSBpbnN0YW5jZW9mIFRGaWxlKSkgcmV0dXJuIGZhbHNlO1xyXG5cdFx0XHRcdGlmICh0ZXh0ICYmIHRleHQudHJpbSgpICE9PSAnJykge1xyXG5cdFx0XHRcdFx0aWYgKGNoZWNraW5nKSB7IHJldHVybiB0cnVlOyB9XHJcblx0XHRcdFx0XHRjb25zdCBibGFja2xpc3QgPSBbJyonLCAnXFxcXCcsICdcIicsICcvJywgJzwnLCAnPicsICc/JywgJ3wnLCAnOiddO1xyXG5cdFx0XHRcdFx0Zm9yIChjb25zdCBjaGFyIG9mIGJsYWNrbGlzdCkge1xyXG5cdFx0XHRcdFx0XHRpZiAodGV4dC5pbmNsdWRlcyhjaGFyKSkge1xyXG5cdFx0XHRcdFx0XHRcdG5ldyBOb3RpY2UoJ0ZpbGUgbmFtZSBjYW5ub3QgY29udGFpbiBhbnkgb2YgdGhlIGZvbGxvd2luZyBjaGFyYWN0ZXJzOiAqIFwiIFxcXFwgLyA8ID4gOiB8ID8nKTtcclxuXHRcdFx0XHRcdFx0XHRyZXR1cm4gZmFsc2U7XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdGlmICh0ZXh0LmVuZHNXaXRoKCcuJykpIHtcclxuXHRcdFx0XHRcdFx0bmV3IE5vdGljZSgnRmlsZSBuYW1lIGNhbm5vdCBlbmQgd2l0aCBhIGRvdCcpO1xyXG5cdFx0XHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRsZXQgZm9sZGVyOiBUQWJzdHJhY3RGaWxlIHwgbnVsbDtcclxuXHRcdFx0XHRcdGNvbnN0IGZvbGRlclBhdGggPSBnZXRGb2xkZXJQYXRoRnJvbVN0cmluZyhmaWxlLnBhdGgpO1xyXG5cdFx0XHRcdFx0aWYgKGZvbGRlclBhdGggPT09ICcnKSB7XHJcblx0XHRcdFx0XHRcdGZvbGRlciA9IHRoaXMucGx1Z2luLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgodGV4dCk7XHJcblx0XHRcdFx0XHRcdGlmIChmb2xkZXIgaW5zdGFuY2VvZiBURm9sZGVyKSB7XHJcblx0XHRcdFx0XHRcdFx0bmV3IE5vdGljZSgnRm9sZGVyIG5vdGUgYWxyZWFkeSBleGlzdHMnKTtcclxuXHRcdFx0XHRcdFx0XHRyZXR1cm4gZmFsc2U7XHJcblx0XHRcdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uYXBwLnZhdWx0LmNyZWF0ZUZvbGRlcih0ZXh0KTtcclxuXHRcdFx0XHRcdFx0XHRjcmVhdGVGb2xkZXJOb3RlKHRoaXMucGx1Z2luLCB0ZXh0LCBmYWxzZSk7XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRcdGZvbGRlciA9IHRoaXMucGx1Z2luLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoZm9sZGVyUGF0aCArICcvJyArIHRleHQpO1xyXG5cdFx0XHRcdFx0XHRpZiAoZm9sZGVyIGluc3RhbmNlb2YgVEZvbGRlcikge1xyXG5cdFx0XHRcdFx0XHRcdG5ldyBOb3RpY2UoJ0ZvbGRlciBub3RlIGFscmVhZHkgZXhpc3RzJyk7XHJcblx0XHRcdFx0XHRcdFx0cmV0dXJuIGZhbHNlO1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdGlmICh0aGlzLnBsdWdpbi5zZXR0aW5ncy5zdG9yYWdlTG9jYXRpb24gPT09ICdwYXJlbnRGb2xkZXInKSB7XHJcblx0XHRcdFx0XHRcdFx0aWYgKHRoaXMuYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChmb2xkZXJQYXRoICsgJy8nICsgdGV4dCArIHRoaXMucGx1Z2luLnNldHRpbmdzLmZvbGRlck5vdGVUeXBlKSkge1xyXG5cdFx0XHRcdFx0XHRcdFx0bmV3IE5vdGljZSgnRmlsZSBhbHJlYWR5IGV4aXN0cycpO1xyXG5cdFx0XHRcdFx0XHRcdFx0cmV0dXJuIGZhbHNlO1xyXG5cdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5hcHAudmF1bHQuY3JlYXRlRm9sZGVyKGZvbGRlclBhdGggKyAnLycgKyB0ZXh0KTtcclxuXHRcdFx0XHRcdFx0Y3JlYXRlRm9sZGVyTm90ZSh0aGlzLnBsdWdpbiwgZm9sZGVyUGF0aCArICcvJyArIHRleHQsIGZhbHNlKTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdGNvbnN0IGZpbGVOYW1lID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MuZm9sZGVyTm90ZU5hbWUucmVwbGFjZSgne3tmb2xkZXJfbmFtZX19JywgdGV4dCk7XHJcblx0XHRcdFx0XHRpZiAoZmlsZU5hbWUgIT09IHRleHQpIHtcclxuXHRcdFx0XHRcdFx0ZWRpdG9yLnJlcGxhY2VTZWxlY3Rpb24oYFtbJHtmaWxlTmFtZX1dXWApO1xyXG5cdFx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdFx0ZWRpdG9yLnJlcGxhY2VTZWxlY3Rpb24oYFtbJHtmaWxlTmFtZX18JHt0ZXh0fV1dYCk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRyZXR1cm4gdHJ1ZTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0cmV0dXJuIGZhbHNlO1xyXG5cdFx0XHR9LFxyXG5cdFx0fSlcclxuXHR9XHJcblxyXG5cdGZpbGVDb21tYW5kcygpIHtcclxuXHRcdHRoaXMucGx1Z2luLnJlZ2lzdGVyRXZlbnQodGhpcy5hcHAud29ya3NwYWNlLm9uKCdmaWxlLW1lbnUnLCBhc3luYyAobWVudTogTWVudSwgZmlsZTogVEFic3RyYWN0RmlsZSkgPT4ge1xyXG5cdFx0XHRsZXQgZm9sZGVyOiBUQWJzdHJhY3RGaWxlIHwgVEZvbGRlciB8IG51bGwgPSBmaWxlLnBhcmVudDtcclxuXHRcdFx0aWYgKGZpbGUgaW5zdGFuY2VvZiBURmlsZSkge1xyXG5cdFx0XHRcdGlmICh0aGlzLnBsdWdpbi5zZXR0aW5ncy5zdG9yYWdlTG9jYXRpb24gPT09ICdpbnNpZGVGb2xkZXInKSB7XHJcblx0XHRcdFx0XHRmb2xkZXIgPSBmaWxlLnBhcmVudDtcclxuXHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0Y29uc3QgZmlsZU5hbWUgPSBleHRyYWN0Rm9sZGVyTmFtZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5mb2xkZXJOb3RlTmFtZSwgZmlsZS5iYXNlbmFtZSk7XHJcblx0XHRcdFx0XHRpZiAoZmlsZU5hbWUpIHtcclxuXHRcdFx0XHRcdFx0aWYgKGZpbGUucGFyZW50Py5wYXRoID09PSAnJyB8fCBmaWxlLnBhcmVudD8ucGF0aCA9PT0gJy8nKSB7XHJcblx0XHRcdFx0XHRcdFx0Zm9sZGVyID0gdGhpcy5wbHVnaW4uYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChmaWxlTmFtZSk7XHJcblx0XHRcdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRcdFx0Zm9sZGVyID0gdGhpcy5wbHVnaW4uYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChmaWxlLnBhcmVudD8ucGF0aCArICcvJyArIGZpbGVOYW1lKTtcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0aWYgKGZvbGRlciBpbnN0YW5jZW9mIFRGb2xkZXIpIHtcclxuXHRcdFx0XHRcdGNvbnN0IGZvbGRlck5vdGUgPSBnZXRGb2xkZXJOb3RlKHRoaXMucGx1Z2luLCBmb2xkZXIucGF0aCk7XHJcblx0XHRcdFx0XHRjb25zdCBleGNsdWRlZEZvbGRlciA9IGF3YWl0IGdldEV4Y2x1ZGVkRm9sZGVyKHRoaXMucGx1Z2luLCBmb2xkZXIucGF0aCwgdHJ1ZSlcclxuXHRcdFx0XHRcdGlmIChmb2xkZXJOb3RlPy5wYXRoID09PSBmaWxlLnBhdGggJiYgIWV4Y2x1ZGVkRm9sZGVyPy5kZXRhY2hlZCkgeyByZXR1cm47IH1cclxuXHRcdFx0XHR9IGVsc2UgaWYgKGZpbGUucGFyZW50IGluc3RhbmNlb2YgVEZvbGRlcikge1xyXG5cdFx0XHRcdFx0Zm9sZGVyID0gZmlsZS5wYXJlbnQ7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRtZW51LmFkZEl0ZW0oYXN5bmMgKGl0ZW0pID0+IHtcclxuXHRcdFx0XHRpZiAoUGxhdGZvcm0uaXNEZXNrdG9wICYmICFQbGF0Zm9ybS5pc1RhYmxldCAmJiB0aGlzLnBsdWdpbi5zZXR0aW5ncy51c2VTdWJtZW51cykge1xyXG5cdFx0XHRcdFx0aXRlbVxyXG5cdFx0XHRcdFx0XHQuc2V0VGl0bGUoJ0ZvbGRlciBOb3RlIENvbW1hbmRzJylcclxuXHRcdFx0XHRcdFx0LnNldEljb24oJ2ZvbGRlci1lZGl0Jyk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGxldCBzdWJNZW51OiBNZW51O1xyXG5cdFx0XHRcdGlmICghUGxhdGZvcm0uaXNEZXNrdG9wQXBwIHx8ICFQbGF0Zm9ybS5pc0Rlc2t0b3AgfHwgUGxhdGZvcm0uaXNUYWJsZXQgfHwgIXRoaXMucGx1Z2luLnNldHRpbmdzLnVzZVN1Ym1lbnVzKSB7XHJcblx0XHRcdFx0XHRzdWJNZW51ID0gbWVudTtcclxuXHRcdFx0XHRcdGl0ZW0uc2V0RGlzYWJsZWQodHJ1ZSk7XHJcblx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdC8vIEB0cy1pZ25vcmVcclxuXHRcdFx0XHRcdHN1Yk1lbnUgPSBpdGVtLnNldFN1Ym1lbnUoKSBhcyBNZW51O1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRpZiAoZmlsZSBpbnN0YW5jZW9mIFRGaWxlKSB7XHJcblx0XHRcdFx0XHQvLyBAdHMtaWdub3JlXHJcblx0XHRcdFx0XHRzdWJNZW51LmFkZEl0ZW0oKGl0ZW0pID0+IHtcclxuXHRcdFx0XHRcdFx0aXRlbS5zZXRUaXRsZSgnQ3JlYXRlIGZvbGRlciBub3RlJylcclxuXHRcdFx0XHRcdFx0XHQuc2V0SWNvbignZWRpdCcpXHJcblx0XHRcdFx0XHRcdFx0Lm9uQ2xpY2soYXN5bmMgKCkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdFx0aWYgKCFmb2xkZXIpIHJldHVybjtcclxuXHRcdFx0XHRcdFx0XHRcdGxldCBuZXdQYXRoID0gZm9sZGVyLnBhdGggKyAnLycgKyBmaWxlLmJhc2VuYW1lO1xyXG5cdFx0XHRcdFx0XHRcdFx0aWYgKGZvbGRlci5wYXRoID09PSAnJyB8fCBmb2xkZXIucGF0aCA9PT0gJy8nKSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdG5ld1BhdGggPSBmaWxlLmJhc2VuYW1lO1xyXG5cdFx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdFx0aWYgKHRoaXMucGx1Z2luLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgobmV3UGF0aCkpIHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0cmV0dXJuIG5ldyBOb3RpY2UoJ0ZvbGRlciBhbHJlYWR5IGV4aXN0cycpO1xyXG5cdFx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdFx0Y29uc3QgYXV0b21hdGljYWxseUNyZWF0ZUZvbGRlck5vdGUgPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5hdXRvQ3JlYXRlO1xyXG5cdFx0XHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuYXV0b0NyZWF0ZSA9IGZhbHNlO1xyXG5cdFx0XHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5hcHAudmF1bHQuY3JlYXRlRm9sZGVyKG5ld1BhdGgpO1xyXG5cdFx0XHRcdFx0XHRcdFx0Y29uc3QgbmV3Rm9sZGVyID0gdGhpcy5wbHVnaW4uYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChuZXdQYXRoKTtcclxuXHRcdFx0XHRcdFx0XHRcdGlmICghKG5ld0ZvbGRlciBpbnN0YW5jZW9mIFRGb2xkZXIpKSByZXR1cm47XHJcblx0XHRcdFx0XHRcdFx0XHRhd2FpdCBjcmVhdGVGb2xkZXJOb3RlKHRoaXMucGx1Z2luLCBuZXdGb2xkZXIucGF0aCwgdHJ1ZSwgJy4nICsgZmlsZS5leHRlbnNpb24sIGZhbHNlLCBmaWxlKTtcclxuXHRcdFx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmF1dG9DcmVhdGUgPSBhdXRvbWF0aWNhbGx5Q3JlYXRlRm9sZGVyTm90ZTtcclxuXHRcdFx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHRpZiAoZ2V0Rm9sZGVyUGF0aEZyb21TdHJpbmcoZmlsZS5wYXRoKSA9PT0gJycpIHJldHVybjtcclxuXHRcdFx0XHRcdGlmICghKGZvbGRlciBpbnN0YW5jZW9mIFRGb2xkZXIpKSByZXR1cm47XHJcblx0XHRcdFx0XHRzdWJNZW51LmFkZEl0ZW0oKGl0ZW0pID0+IHtcclxuXHRcdFx0XHRcdFx0aXRlbS5zZXRUaXRsZShgVHVybiBpbnRvIGZvbGRlciBub3RlIGZvciAke2ZvbGRlcj8ubmFtZX1gKVxyXG5cdFx0XHRcdFx0XHRcdC5zZXRJY29uKCdlZGl0JylcclxuXHRcdFx0XHRcdFx0XHQub25DbGljaygoKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0XHRpZiAoIWZvbGRlciB8fCAhKGZvbGRlciBpbnN0YW5jZW9mIFRGb2xkZXIpKSByZXR1cm47XHJcblx0XHRcdFx0XHRcdFx0XHRjb25zdCBmb2xkZXJOb3RlID0gZ2V0Rm9sZGVyTm90ZSh0aGlzLnBsdWdpbiwgZm9sZGVyLnBhdGgpO1xyXG5cdFx0XHRcdFx0XHRcdFx0dHVybkludG9Gb2xkZXJOb3RlKHRoaXMucGx1Z2luLCBmaWxlLCBmb2xkZXIsIGZvbGRlck5vdGUpO1xyXG5cdFx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGlmICghKGZpbGUgaW5zdGFuY2VvZiBURm9sZGVyKSkgcmV0dXJuO1xyXG5cdFx0XHRcdGNvbnN0IGV4Y2x1ZGVkRm9sZGVyID0gYXdhaXQgZ2V0RXhjbHVkZWRGb2xkZXIodGhpcy5wbHVnaW4sIGZpbGUucGF0aCwgZmFsc2UpXHJcblx0XHRcdFx0Y29uc3QgZGV0YWNoZWRFeGNsdWRlZEZvbGRlciA9IGdldERldGFjaGVkRm9sZGVyKHRoaXMucGx1Z2luLCBmaWxlLnBhdGgpXHJcblx0XHRcdFx0aWYgKGV4Y2x1ZGVkRm9sZGVyICYmICFleGNsdWRlZEZvbGRlci5oaWRlTm90ZSkge1xyXG5cdFx0XHRcdFx0Ly8gSSdtIG5vdCBzdXJlIGlmIEknbSBldmVyIGdvaW5nIHRvIGFkZCB0aGlzIGJlY2F1c2Ugb2YgdGhlIHBvc3NpYmlsaXR5IHRoYXQgYSBmb2xkZXIgZ290IG1vcmUgdGhhbiBvbmUgZXhjbHVkZWRcclxuXHRcdFx0XHRcdC8vIHN1Yk1lbnUuYWRkSXRlbSgoaXRlbSkgPT4ge1xyXG5cdFx0XHRcdFx0Ly8gXHRpdGVtLnNldFRpdGxlKCdNYW5hZ2UgZXhjbHVkZWQgZm9sZGVyJylcclxuXHRcdFx0XHRcdC8vIFx0XHQuc2V0SWNvbignc2V0dGluZ3MtMicpXHJcblx0XHRcdFx0XHQvLyBcdFx0Lm9uQ2xpY2soKCkgPT4ge1xyXG5cdFx0XHRcdFx0Ly8gXHRcdFx0Y29uc29sZS5sb2coJ2V4Y2x1ZGVkRm9sZGVyJywgZXhjbHVkZWRGb2xkZXIpXHJcblx0XHRcdFx0XHQvLyBcdFx0XHRjb25zb2xlLmxvZygnMicsIGdldEV4Y2x1ZGVkRm9sZGVyKHRoaXMucGx1Z2luLCBmaWxlLnBhdGgsIGZhbHNlKSlcclxuXHRcdFx0XHRcdC8vIFx0XHRcdGlmIChleGNsdWRlZEZvbGRlciBpbnN0YW5jZW9mIEV4Y2x1ZGVkRm9sZGVyKSB7XHJcblx0XHRcdFx0XHQvLyBcdFx0XHRcdG5ldyBFeGNsdWRlZEZvbGRlclNldHRpbmdzKHRoaXMucGx1Z2luLmFwcCwgdGhpcy5wbHVnaW4sIGV4Y2x1ZGVkRm9sZGVyKS5vcGVuKCk7XHJcblx0XHRcdFx0XHQvLyBcdFx0XHR9IGVsc2UgaWYgKGV4Y2x1ZGVkRm9sZGVyIGluc3RhbmNlb2YgRXhjbHVkZVBhdHRlcm4pIHtcclxuXHRcdFx0XHRcdC8vIFx0XHRcdFx0bmV3IFBhdHRlcm5TZXR0aW5ncyh0aGlzLnBsdWdpbi5hcHAsIHRoaXMucGx1Z2luLCBleGNsdWRlZEZvbGRlcikub3BlbigpO1xyXG5cdFx0XHRcdFx0Ly8gXHRcdFx0fVxyXG5cdFx0XHRcdFx0Ly8gXHRcdH0pXHJcblx0XHRcdFx0XHQvLyB9KVxyXG5cdFx0XHRcdFx0c3ViTWVudS5hZGRJdGVtKChpdGVtKSA9PiB7XHJcblx0XHRcdFx0XHRcdGl0ZW0uc2V0VGl0bGUoJ1JlbW92ZSBmb2xkZXIgZnJvbSBleGNsdWRlZCBmb2xkZXJzJylcclxuXHRcdFx0XHRcdFx0XHQuc2V0SWNvbigndHJhc2gnKVxyXG5cdFx0XHRcdFx0XHRcdC5vbkNsaWNrKCgpID0+IHtcclxuXHRcdFx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmV4Y2x1ZGVGb2xkZXJzID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MuZXhjbHVkZUZvbGRlcnMuZmlsdGVyKFxyXG5cdFx0XHRcdFx0XHRcdFx0XHQoZm9sZGVyKSA9PiAoZm9sZGVyLnBhdGggIT09IGZpbGUucGF0aCkgfHwgZm9sZGVyLmRldGFjaGVkKTtcclxuXHRcdFx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncyh0cnVlKTtcclxuXHRcdFx0XHRcdFx0XHRcdG5ldyBOb3RpY2UoJ1N1Y2Nlc3NmdWxseSByZW1vdmVkIGZvbGRlciBmcm9tIGV4Y2x1ZGVkIGZvbGRlcnMnKTtcclxuXHRcdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRpZiAoZGV0YWNoZWRFeGNsdWRlZEZvbGRlcikge1xyXG5cdFx0XHRcdFx0c3ViTWVudS5hZGRJdGVtKChpdGVtKSA9PiB7XHJcblx0XHRcdFx0XHRcdGl0ZW0uc2V0VGl0bGUoJ1JlbW92ZSBmb2xkZXIgZnJvbSBkZXRhY2hlZCBmb2xkZXJzJylcclxuXHRcdFx0XHRcdFx0XHQuc2V0SWNvbigndHJhc2gnKVxyXG5cdFx0XHRcdFx0XHRcdC5vbkNsaWNrKCgpID0+IHtcclxuXHRcdFx0XHRcdFx0XHRcdGRlbGV0ZUV4Y2x1ZGVkRm9sZGVyKHRoaXMucGx1Z2luLCBkZXRhY2hlZEV4Y2x1ZGVkRm9sZGVyKTtcclxuXHRcdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFx0Ly8gcmV0dXJuO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRzdWJNZW51LmFkZEl0ZW0oKGl0ZW0pID0+IHtcclxuXHRcdFx0XHRcdGl0ZW0uc2V0VGl0bGUoJ0V4Y2x1ZGUgZm9sZGVyIGZyb20gZm9sZGVyIG5vdGVzJylcclxuXHRcdFx0XHRcdFx0LnNldEljb24oJ3gtY2lyY2xlJylcclxuXHRcdFx0XHRcdFx0Lm9uQ2xpY2soKCkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdGNvbnN0IGV4Y2x1ZGVkRm9sZGVyID0gbmV3IEV4Y2x1ZGVkRm9sZGVyKGZpbGUucGF0aCwgdGhpcy5wbHVnaW4uc2V0dGluZ3MuZXhjbHVkZUZvbGRlcnMubGVuZ3RoLCB1bmRlZmluZWQsIHRoaXMucGx1Z2luKTtcclxuXHRcdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5leGNsdWRlRm9sZGVycy5wdXNoKGV4Y2x1ZGVkRm9sZGVyKTtcclxuXHRcdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3ModHJ1ZSk7XHJcblx0XHRcdFx0XHRcdFx0bmV3IE5vdGljZSgnU3VjY2Vzc2Z1bGx5IGV4Y2x1ZGVkIGZvbGRlciBmcm9tIGZvbGRlciBub3RlcycpO1xyXG5cdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0XHRpZiAoIShmaWxlIGluc3RhbmNlb2YgVEZvbGRlcikpIHJldHVybjtcclxuXHRcdFx0XHRjb25zdCBmb2xkZXJOb3RlID0gZ2V0Rm9sZGVyTm90ZSh0aGlzLnBsdWdpbiwgZmlsZS5wYXRoKTtcclxuXHRcdFx0XHRpZiAoZm9sZGVyTm90ZSBpbnN0YW5jZW9mIFRGaWxlICYmICFkZXRhY2hlZEV4Y2x1ZGVkRm9sZGVyKSB7XHJcblx0XHRcdFx0XHRzdWJNZW51LmFkZEl0ZW0oKGl0ZW0pID0+IHtcclxuXHRcdFx0XHRcdFx0aXRlbS5zZXRUaXRsZSgnRGVsZXRlIGZvbGRlciBub3RlJylcclxuXHRcdFx0XHRcdFx0XHQuc2V0SWNvbigndHJhc2gnKVxyXG5cdFx0XHRcdFx0XHRcdC5vbkNsaWNrKCgpID0+IHtcclxuXHRcdFx0XHRcdFx0XHRcdGRlbGV0ZUZvbGRlck5vdGUodGhpcy5wbHVnaW4sIGZvbGRlck5vdGUsIHRydWUpO1xyXG5cdFx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFx0fSk7XHJcblxyXG5cdFx0XHRcdFx0c3ViTWVudS5hZGRJdGVtKChpdGVtKSA9PiB7XHJcblx0XHRcdFx0XHRcdGl0ZW0uc2V0VGl0bGUoJ09wZW4gZm9sZGVyIG5vdGUnKVxyXG5cdFx0XHRcdFx0XHRcdC5zZXRJY29uKCdjaGV2cm9uLXJpZ2h0LXNxdWFyZScpXHJcblx0XHRcdFx0XHRcdFx0Lm9uQ2xpY2soKCkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdFx0b3BlbkZvbGRlck5vdGUodGhpcy5wbHVnaW4sIGZvbGRlck5vdGUpO1xyXG5cdFx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFx0fSk7XHJcblxyXG5cdFx0XHRcdFx0c3ViTWVudS5hZGRJdGVtKChpdGVtKSA9PiB7XHJcblx0XHRcdFx0XHRcdGl0ZW0uc2V0VGl0bGUoJ0RldGFjaCBmb2xkZXIgbm90ZScpXHJcblx0XHRcdFx0XHRcdFx0LnNldEljb24oJ3VubGluaycpXHJcblx0XHRcdFx0XHRcdFx0Lm9uQ2xpY2soKCkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdFx0ZGV0YWNoRm9sZGVyTm90ZSh0aGlzLnBsdWdpbiwgZm9sZGVyTm90ZSk7XHJcblx0XHRcdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHR9KTtcclxuXHJcblx0XHRcdFx0XHRzdWJNZW51LmFkZEl0ZW0oKGl0ZW0pID0+IHtcclxuXHRcdFx0XHRcdFx0aXRlbS5zZXRUaXRsZSgnQ29weSBPYnNpZGlhbiBVUkwnKVxyXG5cdFx0XHRcdFx0XHRcdC5zZXRJY29uKCdsaW5rJylcclxuXHRcdFx0XHRcdFx0XHQub25DbGljaygoKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0XHQvLyBAdHMtaWdub3JlXHJcblx0XHRcdFx0XHRcdFx0XHR0aGlzLmFwcC5jb3B5T2JzaWRpYW5VcmwoZm9sZGVyTm90ZSk7XHJcblx0XHRcdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHR9KTtcclxuXHJcblx0XHRcdFx0XHRpZiAodGhpcy5wbHVnaW4uc2V0dGluZ3MuaGlkZUZvbGRlck5vdGUpIHtcclxuXHRcdFx0XHRcdFx0aWYgKGV4Y2x1ZGVkRm9sZGVyPy5oaWRlTm90ZSkge1xyXG5cdFx0XHRcdFx0XHRcdHN1Yk1lbnUuYWRkSXRlbSgoaXRlbSkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdFx0aXRlbS5zZXRUaXRsZSgnSGlkZSBmb2xkZXIgbm90ZSBpbiBleHBsb3JlcicpXHJcblx0XHRcdFx0XHRcdFx0XHRcdC5zZXRJY29uKCdleWUtb2ZmJylcclxuXHRcdFx0XHRcdFx0XHRcdFx0Lm9uQ2xpY2soKCkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmV4Y2x1ZGVGb2xkZXJzID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MuZXhjbHVkZUZvbGRlcnMuZmlsdGVyKFxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0KGZvbGRlcikgPT4gKGZvbGRlci5wYXRoICE9PSBmaWxlLnBhdGgpICYmIGZvbGRlci5oaWRlTm90ZSk7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKGZhbHNlKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRhcHBseUNTU0NsYXNzZXNUb0ZvbGRlcihmaWxlLnBhdGgsIHRoaXMucGx1Z2luKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRcdFx0c3ViTWVudS5hZGRJdGVtKChpdGVtKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0XHRpdGVtLnNldFRpdGxlKCdTaG93IGZvbGRlciBub3RlIGluIGV4cGxvcmVyJylcclxuXHRcdFx0XHRcdFx0XHRcdFx0LnNldEljb24oJ2V5ZScpXHJcblx0XHRcdFx0XHRcdFx0XHRcdC5vbkNsaWNrKCgpID0+IHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRjb25zdCBleGNsdWRlZEZvbGRlciA9IG5ldyBFeGNsdWRlZEZvbGRlcihmaWxlLnBhdGgsIHRoaXMucGx1Z2luLnNldHRpbmdzLmV4Y2x1ZGVGb2xkZXJzLmxlbmd0aCwgdW5kZWZpbmVkLCB0aGlzLnBsdWdpbik7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0ZXhjbHVkZWRGb2xkZXIuaGlkZU5vdGUgPSB0cnVlO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGV4Y2x1ZGVkRm9sZGVyLnN1YkZvbGRlcnMgPSBmYWxzZTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRleGNsdWRlZEZvbGRlci5kaXNhYmxlU3luYyA9IGZhbHNlO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGV4Y2x1ZGVkRm9sZGVyLmRpc2FibGVBdXRvQ3JlYXRlID0gZmFsc2U7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0ZXhjbHVkZWRGb2xkZXIuZGlzYWJsZUZvbGRlck5vdGUgPSBmYWxzZTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRleGNsdWRlZEZvbGRlci5lbmFibGVDb2xsYXBzaW5nID0gZmFsc2U7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0ZXhjbHVkZWRGb2xkZXIuZXhjbHVkZUZyb21Gb2xkZXJPdmVydmlldyA9IGZhbHNlO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGV4Y2x1ZGVkRm9sZGVyLmhpZGVJblNldHRpbmdzID0gdHJ1ZTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRhZGRFeGNsdWRlZEZvbGRlcih0aGlzLnBsdWdpbiwgZXhjbHVkZWRGb2xkZXIsIGZhbHNlKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRhcHBseUNTU0NsYXNzZXNUb0ZvbGRlcihmaWxlLnBhdGgsIHRoaXMucGx1Z2luKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdHN1Yk1lbnUuYWRkSXRlbSgoaXRlbSkgPT4ge1xyXG5cdFx0XHRcdFx0XHRpdGVtLnNldFRpdGxlKCdDcmVhdGUgbWFya2Rvd24gZm9sZGVyIG5vdGUnKVxyXG5cdFx0XHRcdFx0XHRcdC5zZXRJY29uKCdlZGl0JylcclxuXHRcdFx0XHRcdFx0XHQub25DbGljaygoKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0XHRjcmVhdGVGb2xkZXJOb3RlKHRoaXMucGx1Z2luLCBmaWxlLnBhdGgsIHRydWUsICcubWQnKTtcclxuXHRcdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdH0pO1xyXG5cclxuXHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLnN1cHBvcnRlZEZpbGVUeXBlcy5mb3JFYWNoKChmaWxlVHlwZSkgPT4ge1xyXG5cdFx0XHRcdFx0XHRpZiAoZmlsZVR5cGUgPT09ICdtZCcpIHJldHVybjtcclxuXHRcdFx0XHRcdFx0c3ViTWVudS5hZGRJdGVtKChpdGVtKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0aXRlbS5zZXRUaXRsZShgQ3JlYXRlICR7ZmlsZVR5cGV9IGZvbGRlciBub3RlYClcclxuXHRcdFx0XHRcdFx0XHRcdC5zZXRJY29uKCdlZGl0JylcclxuXHRcdFx0XHRcdFx0XHRcdC5vbkNsaWNrKCgpID0+IHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0Y3JlYXRlRm9sZGVyTm90ZSh0aGlzLnBsdWdpbiwgZmlsZS5wYXRoLCB0cnVlLCAnLicgKyBmaWxlVHlwZSk7XHJcblx0XHRcdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0pO1xyXG5cdFx0fSkpO1xyXG5cdH1cclxuXHJcblx0ZWRpdG9yQ29tbWFuZHMoKSB7XHJcblx0XHR0aGlzLnBsdWdpbi5yZWdpc3RlckV2ZW50KHRoaXMucGx1Z2luLmFwcC53b3Jrc3BhY2Uub24oJ2VkaXRvci1tZW51JywgKG1lbnU6IE1lbnUsIGVkaXRvcjogRWRpdG9yLCB2aWV3OiBNYXJrZG93blZpZXcpID0+IHtcclxuXHRcdFx0Y29uc3QgdGV4dCA9IGVkaXRvci5nZXRTZWxlY3Rpb24oKS50cmltKCk7XHJcblx0XHRcdGNvbnN0IGxpbmUgPSBlZGl0b3IuZ2V0Q3Vyc29yKCkubGluZTtcclxuXHRcdFx0Y29uc3QgbGluZVRleHQgPSBlZGl0b3IuZ2V0TGluZShsaW5lKTtcclxuXHRcdFx0aWYgKGxpbmVUZXh0LnRyaW0oKSA9PT0gJycgfHwgbGluZVRleHQudHJpbSgpID09PSAnPicpIHtcclxuXHRcdFx0XHRtZW51LmFkZEl0ZW0oKGl0ZW0pID0+IHtcclxuXHRcdFx0XHRcdGl0ZW0uc2V0VGl0bGUoJ0NyZWF0ZSBmb2xkZXIgb3ZlcnZpZXcnKVxyXG5cdFx0XHRcdFx0XHQuc2V0SWNvbignZWRpdCcpXHJcblx0XHRcdFx0XHRcdC5vbkNsaWNrKCgpID0+IHtcclxuXHRcdFx0XHRcdFx0XHRsZXQganNvbiA9IE9iamVjdC5hc3NpZ24oe30sIHRoaXMucGx1Z2luLnNldHRpbmdzLmRlZmF1bHRPdmVydmlldyk7XHJcblx0XHRcdFx0XHRcdFx0anNvbi5pZCA9IGNyeXB0by5yYW5kb21VVUlEKCk7XHJcblx0XHRcdFx0XHRcdFx0Y29uc3QgeWFtbCA9IHN0cmluZ2lmeVlhbWwoanNvbilcclxuXHRcdFx0XHRcdFx0XHRpZiAobGluZVRleHQudHJpbSgpID09PSAnJykge1xyXG5cdFx0XHRcdFx0XHRcdFx0ZWRpdG9yLnJlcGxhY2VTZWxlY3Rpb24oYFxcYFxcYFxcYGZvbGRlci1vdmVydmlld1xcbiR7eWFtbH1cXGBcXGBcXGBcXG5gKTtcclxuXHRcdFx0XHRcdFx0XHR9IGVsc2UgaWYgKGxpbmVUZXh0LnRyaW0oKSA9PT0gJz4nKSB7XHJcblx0XHRcdFx0XHRcdFx0XHQvLyBhZGQgPiB0byB0aGUgYmVnaW5uaW5nIG9mIGVhY2ggbGluZVxyXG5cdFx0XHRcdFx0XHRcdFx0Y29uc3QgbGluZXMgPSB5YW1sLnNwbGl0KCdcXG4nKTtcclxuXHRcdFx0XHRcdFx0XHRcdGNvbnN0IG5ld0xpbmVzID0gbGluZXMubWFwKChsaW5lKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdHJldHVybiBgPiAke2xpbmV9YDtcclxuXHRcdFx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFx0XHRcdFx0ZWRpdG9yLnJlcGxhY2VTZWxlY3Rpb24oYFxcYFxcYFxcYGZvbGRlci1vdmVydmlld1xcbiR7bmV3TGluZXMuam9pbignXFxuJyl9XFxgXFxgXFxgXFxuYCk7XHJcblx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0fVxyXG5cdFx0XHRpZiAoIXRleHQgfHwgdGV4dC50cmltKCkgPT09ICcnKSByZXR1cm47XHJcblx0XHRcdG1lbnUuYWRkSXRlbSgoaXRlbSkgPT4ge1xyXG5cdFx0XHRcdGl0ZW0uc2V0VGl0bGUoJ0NyZWF0ZSBmb2xkZXIgbm90ZScpXHJcblx0XHRcdFx0XHQuc2V0SWNvbignZWRpdCcpXHJcblx0XHRcdFx0XHQub25DbGljaygoKSA9PiB7XHJcblx0XHRcdFx0XHRcdGNvbnN0IGZpbGUgPSB2aWV3LmZpbGU7XHJcblx0XHRcdFx0XHRcdGlmICghKGZpbGUgaW5zdGFuY2VvZiBURmlsZSkpIHJldHVybjtcclxuXHRcdFx0XHRcdFx0Y29uc3QgYmxhY2tsaXN0ID0gWycqJywgJ1xcXFwnLCAnXCInLCAnLycsICc8JywgJz4nLCAnPycsICd8JywgJzonXTtcclxuXHRcdFx0XHRcdFx0Zm9yIChjb25zdCBjaGFyIG9mIGJsYWNrbGlzdCkge1xyXG5cdFx0XHRcdFx0XHRcdGlmICh0ZXh0LmluY2x1ZGVzKGNoYXIpKSB7XHJcblx0XHRcdFx0XHRcdFx0XHRuZXcgTm90aWNlKCdGaWxlIG5hbWUgY2Fubm90IGNvbnRhaW4gYW55IG9mIHRoZSBmb2xsb3dpbmcgY2hhcmFjdGVyczogKiBcIiBcXFxcIC8gPCA+IDogfCA/Jyk7XHJcblx0XHRcdFx0XHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdGlmICh0ZXh0LmVuZHNXaXRoKCcuJykpIHtcclxuXHRcdFx0XHRcdFx0XHRuZXcgTm90aWNlKCdGaWxlIG5hbWUgY2Fubm90IGVuZCB3aXRoIGEgZG90Jyk7XHJcblx0XHRcdFx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdGxldCBmb2xkZXI6IFRBYnN0cmFjdEZpbGUgfCBudWxsO1xyXG5cdFx0XHRcdFx0XHRjb25zdCBmb2xkZXJQYXRoID0gZ2V0Rm9sZGVyUGF0aEZyb21TdHJpbmcoZmlsZS5wYXRoKTtcclxuXHRcdFx0XHRcdFx0Y29uc3QgZmlsZU5hbWUgPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5mb2xkZXJOb3RlTmFtZS5yZXBsYWNlKCd7e2ZvbGRlcl9uYW1lfX0nLCB0ZXh0KTtcclxuXHRcdFx0XHRcdFx0aWYgKGZvbGRlclBhdGggPT09ICcnKSB7XHJcblx0XHRcdFx0XHRcdFx0Zm9sZGVyID0gdGhpcy5wbHVnaW4uYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aCh0ZXh0KTtcclxuXHRcdFx0XHRcdFx0XHRpZiAoZm9sZGVyIGluc3RhbmNlb2YgVEZvbGRlcikge1xyXG5cdFx0XHRcdFx0XHRcdFx0cmV0dXJuIG5ldyBOb3RpY2UoJ0ZvbGRlciBub3RlIGFscmVhZHkgZXhpc3RzJyk7XHJcblx0XHRcdFx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLmFwcC52YXVsdC5jcmVhdGVGb2xkZXIodGV4dCk7XHJcblx0XHRcdFx0XHRcdFx0XHRjcmVhdGVGb2xkZXJOb3RlKHRoaXMucGx1Z2luLCB0ZXh0LCBmYWxzZSk7XHJcblx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0XHRcdGZvbGRlciA9IHRoaXMucGx1Z2luLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoZm9sZGVyUGF0aCArICcvJyArIHRleHQpO1xyXG5cdFx0XHRcdFx0XHRcdGlmIChmb2xkZXIgaW5zdGFuY2VvZiBURm9sZGVyKSB7XHJcblx0XHRcdFx0XHRcdFx0XHRyZXR1cm4gbmV3IE5vdGljZSgnRm9sZGVyIG5vdGUgYWxyZWFkeSBleGlzdHMnKTtcclxuXHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFx0aWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLnN0b3JhZ2VMb2NhdGlvbiA9PT0gJ3BhcmVudEZvbGRlcicpIHtcclxuXHRcdFx0XHRcdFx0XHRcdGlmICh0aGlzLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoZm9sZGVyUGF0aCArICcvJyArIGZpbGVOYW1lICsgdGhpcy5wbHVnaW4uc2V0dGluZ3MuZm9sZGVyTm90ZVR5cGUpKSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdHJldHVybiBuZXcgTm90aWNlKCdGaWxlIGFscmVhZHkgZXhpc3RzJyk7XHJcblx0XHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLmFwcC52YXVsdC5jcmVhdGVGb2xkZXIoZm9sZGVyUGF0aCArICcvJyArIHRleHQpO1xyXG5cdFx0XHRcdFx0XHRcdGNyZWF0ZUZvbGRlck5vdGUodGhpcy5wbHVnaW4sIGZvbGRlclBhdGggKyAnLycgKyB0ZXh0LCBmYWxzZSk7XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0aWYgKGZpbGVOYW1lICE9PSB0ZXh0KSB7XHJcblx0XHRcdFx0XHRcdFx0ZWRpdG9yLnJlcGxhY2VTZWxlY3Rpb24oYFtbJHtmaWxlTmFtZX1dXWApO1xyXG5cdFx0XHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0XHRcdGVkaXRvci5yZXBsYWNlU2VsZWN0aW9uKGBbWyR7ZmlsZU5hbWV9fCR7dGV4dH1dXWApO1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHR9KTtcclxuXHRcdFx0fSk7XHJcblx0XHR9KSk7XHJcblx0fVxyXG59XHJcbiIsICJpbXBvcnQgeyBLZXltYXAsIFBsYXRmb3JtIH0gZnJvbSAnb2JzaWRpYW4nO1xyXG5pbXBvcnQgRm9sZGVyTm90ZXNQbHVnaW4gZnJvbSAnc3JjL21haW4nO1xyXG5pbXBvcnQgeyBvcGVuRm9sZGVyTm90ZSwgY3JlYXRlRm9sZGVyTm90ZSwgZ2V0Rm9sZGVyTm90ZSB9IGZyb20gJ3NyYy9mdW5jdGlvbnMvZm9sZGVyTm90ZUZ1bmN0aW9ucyc7XHJcbmltcG9ydCB7IGdldEV4Y2x1ZGVkRm9sZGVyIH0gZnJvbSAnc3JjL0V4Y2x1ZGVGb2xkZXJzL2Z1bmN0aW9ucy9mb2xkZXJGdW5jdGlvbnMnO1xyXG5pbXBvcnQgeyBhZGRDU1NDbGFzc1RvVGl0bGVFTCwgcmVtb3ZlQ1NTQ2xhc3NGcm9tRUwgfSBmcm9tICdzcmMvZnVuY3Rpb25zL3N0eWxlRnVuY3Rpb25zJztcclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBoYW5kbGVWaWV3SGVhZGVyQ2xpY2soZXZlbnQ6IE1vdXNlRXZlbnQsIHBsdWdpbjogRm9sZGVyTm90ZXNQbHVnaW4pIHtcclxuXHRldmVudC5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKTtcclxuXHRldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cdGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xyXG5cdGlmICghKGV2ZW50LnRhcmdldCBpbnN0YW5jZW9mIEhUTUxFbGVtZW50KSkgcmV0dXJuO1xyXG5cdGlmICghcGx1Z2luLnNldHRpbmdzLm9wZW5Gb2xkZXJOb3RlT25DbGlja0luUGF0aCkgcmV0dXJuO1xyXG5cclxuXHRjb25zdCBmb2xkZXJQYXRoID0gZXZlbnQudGFyZ2V0LmdldEF0dHJpYnV0ZSgnZGF0YS1wYXRoJyk7XHJcblx0aWYgKCFmb2xkZXJQYXRoKSB7IHJldHVybjsgfVxyXG5cdGNvbnN0IGV4Y2x1ZGVkRm9sZGVyID0gYXdhaXQgZ2V0RXhjbHVkZWRGb2xkZXIocGx1Z2luLCBmb2xkZXJQYXRoLCB0cnVlKTtcclxuXHRpZiAoZXhjbHVkZWRGb2xkZXI/LmRpc2FibGVGb2xkZXJOb3RlKSB7XHJcblx0XHRldmVudC50YXJnZXQub25jbGljayA9IG51bGw7XHJcblx0XHRldmVudC50YXJnZXQuY2xpY2soKTtcclxuXHRcdHJldHVybjtcclxuXHR9IGVsc2UgaWYgKGV4Y2x1ZGVkRm9sZGVyPy5lbmFibGVDb2xsYXBzaW5nIHx8IHBsdWdpbi5zZXR0aW5ncy5lbmFibGVDb2xsYXBzaW5nKSB7XHJcblx0XHRldmVudC50YXJnZXQub25jbGljayA9IG51bGw7XHJcblx0XHRldmVudC50YXJnZXQuY2xpY2soKTtcclxuXHR9XHJcblxyXG5cdGNvbnN0IGZvbGRlck5vdGUgPSBnZXRGb2xkZXJOb3RlKHBsdWdpbiwgZm9sZGVyUGF0aCk7XHJcblx0aWYgKGZvbGRlck5vdGUpIHtcclxuXHRcdGF3YWl0IG9wZW5Gb2xkZXJOb3RlKHBsdWdpbiwgZm9sZGVyTm90ZSwgZXZlbnQpLnRoZW4oYXN5bmMgKCkgPT4ge1xyXG5cdFx0XHQvLyBAdHMtaWdub3JlXHJcblx0XHRcdGNvbnN0IGZpbGVFeHBsb3JlclBsdWdpbiA9IHBsdWdpbi5hcHAuaW50ZXJuYWxQbHVnaW5zLmdldEVuYWJsZWRQbHVnaW5CeUlkKCdmaWxlLWV4cGxvcmVyJyk7XHJcblx0XHRcdGlmIChmaWxlRXhwbG9yZXJQbHVnaW4gJiYgUGxhdGZvcm0uaXNNb2JpbGUgJiYgcGx1Z2luLnNldHRpbmdzLm9wZW5TaWRlYmFyLm1vYmlsZSkge1xyXG5cdFx0XHRcdHNldFRpbWVvdXQoKCkgPT4geyBmaWxlRXhwbG9yZXJQbHVnaW4ucmV2ZWFsSW5Gb2xkZXIoZm9sZGVyTm90ZSk7IH0sIDIwMCk7XHJcblx0XHRcdH0gZWxzZSBpZiAoZmlsZUV4cGxvcmVyUGx1Z2luICYmIFBsYXRmb3JtLmlzRGVza3RvcCAmJiBwbHVnaW4uc2V0dGluZ3Mub3BlblNpZGViYXIuZGVza3RvcCkge1xyXG5cdFx0XHRcdGZpbGVFeHBsb3JlclBsdWdpbi5yZXZlYWxJbkZvbGRlcihmb2xkZXJOb3RlKTtcclxuXHRcdFx0fVxyXG5cdFx0fSk7XHJcblx0XHRyZXR1cm47XHJcblx0fSBlbHNlIGlmIChldmVudC5hbHRLZXkgfHwgS2V5bWFwLmlzTW9kRXZlbnQoZXZlbnQpID09PSAndGFiJykge1xyXG5cdFx0aWYgKChwbHVnaW4uc2V0dGluZ3MuYWx0S2V5ICYmIGV2ZW50LmFsdEtleSkgfHwgKHBsdWdpbi5zZXR0aW5ncy5jdHJsS2V5ICYmIEtleW1hcC5pc01vZEV2ZW50KGV2ZW50KSA9PT0gJ3RhYicpKSB7XHJcblx0XHRcdGF3YWl0IGNyZWF0ZUZvbGRlck5vdGUocGx1Z2luLCBmb2xkZXJQYXRoLCB0cnVlLCB1bmRlZmluZWQsIHRydWUpO1xyXG5cdFx0XHRhZGRDU1NDbGFzc1RvVGl0bGVFTChmb2xkZXJQYXRoLCAnaGFzLWZvbGRlci1ub3RlJywgcGx1Z2luKTtcclxuXHRcdFx0cmVtb3ZlQ1NTQ2xhc3NGcm9tRUwoZm9sZGVyUGF0aCwgJ2hhcy1ub3QtZm9sZGVyLW5vdGUnLCBwbHVnaW4pO1xyXG5cdFx0XHRyZXR1cm47XHJcblx0XHR9XHJcblx0fVxyXG5cdGV2ZW50LnRhcmdldC5vbmNsaWNrID0gbnVsbDtcclxuXHRldmVudC50YXJnZXQuY2xpY2soKTtcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGhhbmRsZUZvbGRlckNsaWNrKGV2ZW50OiBNb3VzZUV2ZW50LCBwbHVnaW46IEZvbGRlck5vdGVzUGx1Z2luKSB7XHJcblxyXG5cdGlmICghKGV2ZW50LnRhcmdldCBpbnN0YW5jZW9mIEhUTUxFbGVtZW50KSkgcmV0dXJuO1xyXG5cdGlmICghZXZlbnQgfHwgIWV2ZW50LnRhcmdldCkgcmV0dXJuO1xyXG5cdGV2ZW50LnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpO1xyXG5cdGlmICghZXZlbnQuc2hpZnRLZXkpIHtcclxuXHRcdGV2ZW50LnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpO1xyXG5cdH0gZWxzZSB7XHJcblx0XHRyZXR1cm47XHJcblx0fVxyXG5cclxuXHRjb25zdCBmb2xkZXJQYXRoID0gZXZlbnQudGFyZ2V0LnBhcmVudEVsZW1lbnQ/LmdldEF0dHJpYnV0ZSgnZGF0YS1wYXRoJyk7XHJcblx0aWYgKCFmb2xkZXJQYXRoKSB7IHJldHVybjsgfVxyXG5cclxuXHRjb25zdCBleGNsdWRlZEZvbGRlciA9IGF3YWl0IGdldEV4Y2x1ZGVkRm9sZGVyKHBsdWdpbiwgZm9sZGVyUGF0aCwgdHJ1ZSk7XHJcblx0aWYgKGV4Y2x1ZGVkRm9sZGVyPy5kaXNhYmxlRm9sZGVyTm90ZSkge1xyXG5cdFx0ZXZlbnQudGFyZ2V0Lm9uY2xpY2sgPSBudWxsO1xyXG5cdFx0ZXZlbnQudGFyZ2V0LmNsaWNrKCk7XHJcblx0XHRyZXR1cm47XHJcblx0fSBlbHNlIGlmIChleGNsdWRlZEZvbGRlcj8uZW5hYmxlQ29sbGFwc2luZyB8fCBwbHVnaW4uc2V0dGluZ3MuZW5hYmxlQ29sbGFwc2luZykge1xyXG5cdFx0ZXZlbnQudGFyZ2V0Lm9uY2xpY2sgPSBudWxsO1xyXG5cdFx0ZXZlbnQudGFyZ2V0LmNsaWNrKCk7XHJcblx0fVxyXG5cclxuXHRjb25zdCBmb2xkZXJOb3RlID0gZ2V0Rm9sZGVyTm90ZShwbHVnaW4sIGZvbGRlclBhdGgpO1xyXG5cclxuXHRpZiAoZm9sZGVyTm90ZSkge1xyXG5cdFx0aWYgKHBsdWdpbi5zZXR0aW5ncy5vcGVuQnlDbGljaykge1xyXG5cdFx0XHRyZXR1cm4gb3BlbkZvbGRlck5vdGUocGx1Z2luLCBmb2xkZXJOb3RlLCBldmVudCk7XHJcblx0XHR9IGVsc2UgaWYgKHBsdWdpbi5zZXR0aW5ncy5vcGVuV2l0aEN0cmwgJiYgS2V5bWFwLmlzTW9kRXZlbnQoZXZlbnQpID09PSAndGFiJykge1xyXG5cdFx0XHRyZXR1cm4gb3BlbkZvbGRlck5vdGUocGx1Z2luLCBmb2xkZXJOb3RlLCBldmVudCk7XHJcblx0XHR9IGVsc2UgaWYgKHBsdWdpbi5zZXR0aW5ncy5vcGVuV2l0aEFsdCAmJiBldmVudC5hbHRLZXkpIHtcclxuXHRcdFx0cmV0dXJuIG9wZW5Gb2xkZXJOb3RlKHBsdWdpbiwgZm9sZGVyTm90ZSwgZXZlbnQpO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0aWYgKHBsdWdpbi5zZXR0aW5ncy5lbmFibGVDb2xsYXBzaW5nKSByZXR1cm47XHJcblx0XHRcdGV2ZW50LnRhcmdldC5wYXJlbnRFbGVtZW50Py5jbGljaygpXHJcblx0XHRcdHJldHVybjtcclxuXHRcdH1cclxuXHR9IGVsc2UgaWYgKGV2ZW50LmFsdEtleSB8fCBLZXltYXAuaXNNb2RFdmVudChldmVudCkgPT09ICd0YWInKSB7XHJcblx0XHRpZiAoKHBsdWdpbi5zZXR0aW5ncy5hbHRLZXkgJiYgZXZlbnQuYWx0S2V5KSB8fCAocGx1Z2luLnNldHRpbmdzLmN0cmxLZXkgJiYgS2V5bWFwLmlzTW9kRXZlbnQoZXZlbnQpID09PSAndGFiJykpIHtcclxuXHRcdFx0YXdhaXQgY3JlYXRlRm9sZGVyTm90ZShwbHVnaW4sIGZvbGRlclBhdGgsIHRydWUsIHVuZGVmaW5lZCwgdHJ1ZSk7XHJcblx0XHRcdGFkZENTU0NsYXNzVG9UaXRsZUVMKGZvbGRlclBhdGgsICdoYXMtZm9sZGVyLW5vdGUnLCBwbHVnaW4pO1xyXG5cdFx0XHRyZW1vdmVDU1NDbGFzc0Zyb21FTChmb2xkZXJQYXRoLCAnaGFzLW5vdC1mb2xkZXItbm90ZScsIHBsdWdpbik7XHJcblx0XHRcdHJldHVybjtcclxuXHRcdH1cclxuXHR9IGVsc2UgaWYgKCFmb2xkZXJOb3RlKSB7XHJcblx0XHRpZiAocGx1Z2luLnNldHRpbmdzLmVuYWJsZUNvbGxhcHNpbmcpIHJldHVybjtcclxuXHRcdHJldHVybiBldmVudC50YXJnZXQucGFyZW50RWxlbWVudD8uY2xpY2soKTtcclxuXHR9XHJcblxyXG5cdGV2ZW50LnRhcmdldC5vbmNsaWNrID0gbnVsbDtcclxuXHRldmVudC50YXJnZXQuY2xpY2soKTtcclxufVxyXG4iLCAiaW1wb3J0IEZvbGRlck5vdGVzUGx1Z2luIGZyb20gJ3NyYy9tYWluJztcclxuaW1wb3J0IHsgUGxhdGZvcm0sIEtleW1hcCB9IGZyb20gJ29ic2lkaWFuJztcclxuaW1wb3J0IHsgZ2V0Rm9sZGVyLCBnZXRGb2xkZXJOb3RlIH0gZnJvbSAnc3JjL2Z1bmN0aW9ucy9mb2xkZXJOb3RlRnVuY3Rpb25zJztcclxuaW1wb3J0IHsgaGFuZGxlRm9sZGVyQ2xpY2ssIGhhbmRsZVZpZXdIZWFkZXJDbGljayB9IGZyb20gJy4vaGFuZGxlQ2xpY2snO1xyXG5pbXBvcnQgeyBnZXRFeGNsdWRlZEZvbGRlciB9IGZyb20gJ3NyYy9FeGNsdWRlRm9sZGVycy9mdW5jdGlvbnMvZm9sZGVyRnVuY3Rpb25zJztcclxuaW1wb3J0IHsgYXBwbHlDU1NDbGFzc2VzVG9Gb2xkZXIsIGFwcGx5Q1NTQ2xhc3Nlc1RvRm9sZGVyTm90ZSB9IGZyb20gJ3NyYy9mdW5jdGlvbnMvc3R5bGVGdW5jdGlvbnMnO1xyXG5pbXBvcnQgeyBnZXRGb2xkZXJOYW1lRnJvbVBhdGhTdHJpbmcgfSBmcm9tICdzcmMvZnVuY3Rpb25zL3V0aWxzJztcclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBhZGRPYnNlcnZlcihwbHVnaW46IEZvbGRlck5vdGVzUGx1Z2luKSB7XHJcbiAgICBwbHVnaW4ub2JzZXJ2ZXIgPSBuZXcgTXV0YXRpb25PYnNlcnZlcigobXV0YXRpb25zOiBNdXRhdGlvblJlY29yZFtdKSA9PiB7XHJcbiAgICAgICAgbXV0YXRpb25zLmZvckVhY2goKHJlYykgPT4ge1xyXG4gICAgICAgICAgICBpZiAocmVjLnR5cGUgPT09ICdjaGlsZExpc3QnKSB7XHJcbiAgICAgICAgICAgICAgICAoPEVsZW1lbnQ+cmVjLnRhcmdldCkucXVlcnlTZWxlY3RvckFsbCgnZGl2Lm5hdi1mb2xkZXInKVxyXG4gICAgICAgICAgICAgICAgICAgIC5mb3JFYWNoKGFzeW5jIChlbGVtZW50OiBIVE1MRWxlbWVudCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgZm9sZGVyVGl0bGUgPSBlbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJ2Rpdi5uYXYtZm9sZGVyLXRpdGxlLWNvbnRlbnQnKSBhcyBIVE1MRWxlbWVudDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZmlsZVBhdGggPSBmb2xkZXJUaXRsZS5wYXJlbnRFbGVtZW50Py5nZXRBdHRyaWJ1dGUoJ2RhdGEtcGF0aCcpIHx8ICcnO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXBwbHlDU1NDbGFzc2VzVG9Gb2xkZXIoZmlsZVBhdGgsIHBsdWdpbik7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZm9sZGVyVGl0bGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IGluaXRpYWxpemVGb2xkZXJUaXRsZShmb2xkZXJUaXRsZSwgcGx1Z2luKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBvYnNlcnZlciA9IG5ldyBNdXRhdGlvbk9ic2VydmVyKGFzeW5jIChtdXRhdGlvbnMsIG9icykgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvbGRlclRpdGxlID0gZWxlbWVudC5xdWVyeVNlbGVjdG9yKCdkaXYubmF2LWZvbGRlci10aXRsZS1jb250ZW50JykgYXMgSFRNTEVsZW1lbnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGZvbGRlclRpdGxlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IGluaXRpYWxpemVGb2xkZXJUaXRsZShmb2xkZXJUaXRsZSwgcGx1Z2luKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2JzLmRpc2Nvbm5lY3QoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvYnNlcnZlci5vYnNlcnZlKGVsZW1lbnQsIHsgY2hpbGRMaXN0OiB0cnVlLCBzdWJ0cmVlOiB0cnVlIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBpZiAoIXBsdWdpbi5zZXR0aW5ncy5vcGVuRm9sZGVyTm90ZU9uQ2xpY2tJblBhdGgpIHsgcmV0dXJuOyB9XHJcbiAgICAgICAgICAgICAgICAvLyAoPEVsZW1lbnQ+cmVjLnRhcmdldCkucXVlcnlTZWxlY3RvckFsbCgnZGl2Lm5hdi1maWxlLXRpdGxlLWNvbnRlbnQnKVxyXG4gICAgICAgICAgICAgICAgLy8gICAgIC5mb3JFYWNoKGFzeW5jIChlbGVtZW50OiBIVE1MRWxlbWVudCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgLy8gICAgICAgICBjb25zdCBmaWxlUGF0aCA9IGVsZW1lbnQucGFyZW50RWxlbWVudD8uZ2V0QXR0cmlidXRlKCdkYXRhLXBhdGgnKSB8fCAnJztcclxuICAgICAgICAgICAgICAgIC8vICAgICAgICAgYXBwbHlDU1NDbGFzc2VzVG9Gb2xkZXJOb3RlKGZpbGVQYXRoLCBwbHVnaW4pO1xyXG4gICAgICAgICAgICAgICAgLy8gICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgKDxFbGVtZW50PnJlYy50YXJnZXQpLnF1ZXJ5U2VsZWN0b3JBbGwoJ3NwYW4udmlldy1oZWFkZXItYnJlYWRjcnVtYicpXHJcbiAgICAgICAgICAgICAgICAgICAgLmZvckVhY2goKGVsZW1lbnQ6IEhUTUxFbGVtZW50KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGJyZWFkY3J1bWJzID0gZWxlbWVudC5wYXJlbnRFbGVtZW50Py5xdWVyeVNlbGVjdG9yQWxsKCdzcGFuLnZpZXctaGVhZGVyLWJyZWFkY3J1bWInKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFicmVhZGNydW1icykgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgcGF0aCA9ICcnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhZGNydW1icy5mb3JFYWNoKGFzeW5jIChicmVhZGNydW1iOiBIVE1MRWxlbWVudCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGJyZWFkY3J1bWIuaGFzQXR0cmlidXRlKCdvbGQtbmFtZScpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGF0aCArPSBicmVhZGNydW1iLmdldEF0dHJpYnV0ZSgnb2xkLW5hbWUnKSArICcvJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGF0aCArPSBicmVhZGNydW1iLmlubmVyVGV4dC50cmltKCkgKyAnLyc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBmb2xkZXJQYXRoID0gcGF0aC5zbGljZSgwLCAtMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhZGNydW1iLnNldEF0dHJpYnV0ZSgnZGF0YS1wYXRoJywgZm9sZGVyUGF0aCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBmb2xkZXIgPSBwbHVnaW4uZm10cEhhbmRsZXI/Lm1vZGlmaWVkRm9sZGVycy5nZXQoZm9sZGVyUGF0aCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZm9sZGVyICYmIHBsdWdpbi5zZXR0aW5ncy5mcm9udE1hdHRlclRpdGxlLnBhdGggJiYgcGx1Z2luLnNldHRpbmdzLmZyb250TWF0dGVyVGl0bGUuZW5hYmxlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFkY3J1bWIuc2V0QXR0cmlidXRlKCdvbGQtbmFtZScsIGZvbGRlci5uYW1lIHx8ICcnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhZGNydW1iLmlubmVyVGV4dCA9IGZvbGRlci5uZXdOYW1lIHx8ICcnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZXhjbHVkZWRGb2xkZXIgPSBhd2FpdCBnZXRFeGNsdWRlZEZvbGRlcihwbHVnaW4sIGZvbGRlclBhdGgsIHRydWUpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXhjbHVkZWRGb2xkZXI/LmRpc2FibGVGb2xkZXJOb3RlKSByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBmb2xkZXJOb3RlID0gZ2V0Rm9sZGVyTm90ZShwbHVnaW4sIGZvbGRlclBhdGgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGZvbGRlck5vdGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhZGNydW1iLmNsYXNzTGlzdC5hZGQoJ2hhcy1mb2xkZXItbm90ZScpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5wYXJlbnRFbGVtZW50Py5zZXRBdHRyaWJ1dGUoJ2RhdGEtcGF0aCcsIHBhdGguc2xpY2UoMCwgLTEpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGJyZWFkY3J1bWJzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFkY3J1bWJzLmZvckVhY2goKGJyZWFkY3J1bWI6IEhUTUxFbGVtZW50KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGJyZWFkY3J1bWIub25jbGljaykgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFkY3J1bWIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoYW5kbGVWaWV3SGVhZGVyQ2xpY2soZSwgcGx1Z2luKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCB7IGNhcHR1cmU6IHRydWUgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxufVxyXG5cclxuYXN5bmMgZnVuY3Rpb24gaW5pdGlhbGl6ZUZvbGRlclRpdGxlKGZvbGRlclRpdGxlOiBIVE1MRWxlbWVudCwgcGx1Z2luOiBhbnkpIHtcclxuICAgIGlmIChmb2xkZXJUaXRsZS5vbmNsaWNrKSByZXR1cm47XHJcbiAgICBpZiAoUGxhdGZvcm0uaXNNb2JpbGUgJiYgcGx1Z2luLnNldHRpbmdzLmRpc2FibGVPcGVuRm9sZGVyTm90ZU9uQ2xpY2spIHJldHVybjtcclxuXHJcbiAgICBsZXQgZm9sZGVyUGF0aCA9IGZvbGRlclRpdGxlLnBhcmVudEVsZW1lbnQ/LmdldEF0dHJpYnV0ZSgnZGF0YS1wYXRoJykgfHwgJyc7XHJcblxyXG4gICAgYXdhaXQgYXBwbHlDU1NDbGFzc2VzVG9Gb2xkZXIoZm9sZGVyUGF0aCwgcGx1Z2luKTtcclxuXHJcbiAgICAvLyBIYW5kbGUgbWlkZGxlIGNsaWNrIChhdXhjbGljaylcclxuICAgIGZvbGRlclRpdGxlLmFkZEV2ZW50TGlzdGVuZXIoJ2F1eGNsaWNrJywgKGV2ZW50OiBNb3VzZUV2ZW50KSA9PiB7XHJcbiAgICAgICAgaWYgKGV2ZW50LmJ1dHRvbiA9PSAxKSB7XHJcbiAgICAgICAgICAgIGhhbmRsZUZvbGRlckNsaWNrKGV2ZW50LCBwbHVnaW4pO1xyXG4gICAgICAgIH1cclxuICAgIH0sIHsgY2FwdHVyZTogdHJ1ZSB9KTtcclxuXHJcbiAgICBmb2xkZXJUaXRsZS5vbmNsaWNrID0gKGV2ZW50OiBNb3VzZUV2ZW50KSA9PiBoYW5kbGVGb2xkZXJDbGljayhldmVudCwgcGx1Z2luKTtcclxuXHJcbiAgICBwbHVnaW4ucmVnaXN0ZXJEb21FdmVudChmb2xkZXJUaXRsZSwgJ3BvaW50ZXJvdmVyJywgKGV2ZW50OiBNb3VzZUV2ZW50KSA9PiB7XHJcbiAgICAgICAgcGx1Z2luLmhvdmVyZWRFbGVtZW50ID0gZm9sZGVyVGl0bGU7XHJcbiAgICAgICAgcGx1Z2luLm1vdXNlRXZlbnQgPSBldmVudDtcclxuXHJcbiAgICAgICAgaWYgKCFLZXltYXAuaXNNb2RFdmVudChldmVudCkpIHJldHVybjtcclxuICAgICAgICBpZiAoIShldmVudC50YXJnZXQgaW5zdGFuY2VvZiBIVE1MRWxlbWVudCkpIHJldHVybjtcclxuXHJcbiAgICAgICAgY29uc3QgZm9sZGVyUGF0aCA9IGV2ZW50Py50YXJnZXQucGFyZW50RWxlbWVudD8uZ2V0QXR0cmlidXRlKCdkYXRhLXBhdGgnKSB8fCAnJztcclxuICAgICAgICBjb25zdCBmb2xkZXJOb3RlID0gZ2V0Rm9sZGVyTm90ZShwbHVnaW4sIGZvbGRlclBhdGgpO1xyXG4gICAgICAgIGlmICghZm9sZGVyTm90ZSkgcmV0dXJuO1xyXG5cclxuICAgICAgICBwbHVnaW4uYXBwLndvcmtzcGFjZS50cmlnZ2VyKCdob3Zlci1saW5rJywge1xyXG4gICAgICAgICAgICBldmVudDogZXZlbnQsXHJcbiAgICAgICAgICAgIHNvdXJjZTogJ3ByZXZpZXcnLFxyXG4gICAgICAgICAgICBob3ZlclBhcmVudDogeyBmaWxlOiBmb2xkZXJOb3RlIH0sXHJcbiAgICAgICAgICAgIHRhcmdldEVsOiBldmVudC50YXJnZXQsXHJcbiAgICAgICAgICAgIGxpbmt0ZXh0OiBmb2xkZXJOb3RlPy5iYXNlbmFtZSxcclxuICAgICAgICAgICAgc291cmNlUGF0aDogZm9sZGVyTm90ZT8ucGF0aCxcclxuICAgICAgICB9KTtcclxuICAgICAgICBwbHVnaW4uaG92ZXJMaW5rVHJpZ2dlcmVkID0gdHJ1ZTtcclxuICAgIH0pO1xyXG5cclxuICAgIHBsdWdpbi5yZWdpc3RlckRvbUV2ZW50KGZvbGRlclRpdGxlLCAncG9pbnRlcm91dCcsICgpID0+IHtcclxuICAgICAgICBwbHVnaW4uaG92ZXJlZEVsZW1lbnQgPSBudWxsO1xyXG4gICAgICAgIHBsdWdpbi5tb3VzZUV2ZW50ID0gbnVsbDtcclxuICAgICAgICBwbHVnaW4uaG92ZXJMaW5rVHJpZ2dlcmVkID0gZmFsc2U7XHJcbiAgICB9KTtcclxufSIsICJpbXBvcnQgeyBURmlsZSwgVEZvbGRlciwgVEFic3RyYWN0RmlsZSwgTm90aWNlIH0gZnJvbSAnb2JzaWRpYW4nO1xyXG5pbXBvcnQgRm9sZGVyTm90ZXNQbHVnaW4gZnJvbSAnc3JjL21haW4nO1xyXG5pbXBvcnQgeyBleHRyYWN0Rm9sZGVyTmFtZSwgZ2V0Rm9sZGVyTm90ZSwgZ2V0Rm9sZGVyTm90ZUZvbGRlciB9IGZyb20gJy4uL2Z1bmN0aW9ucy9mb2xkZXJOb3RlRnVuY3Rpb25zJztcclxuaW1wb3J0IHsgZ2V0RXhjbHVkZWRGb2xkZXIsIGFkZEV4Y2x1ZGVkRm9sZGVyLCB1cGRhdGVFeGNsdWRlZEZvbGRlciwgZGVsZXRlRXhjbHVkZWRGb2xkZXIsIGdldERldGFjaGVkRm9sZGVyIH0gZnJvbSAnLi4vRXhjbHVkZUZvbGRlcnMvZnVuY3Rpb25zL2ZvbGRlckZ1bmN0aW9ucyc7XHJcbmltcG9ydCB7IEV4Y2x1ZGVkRm9sZGVyIH0gZnJvbSAnc3JjL0V4Y2x1ZGVGb2xkZXJzL0V4Y2x1ZGVGb2xkZXInO1xyXG5pbXBvcnQgeyByZW1vdmVDU1NDbGFzc0Zyb21FTCwgYWRkQ1NTQ2xhc3NUb1RpdGxlRUwgfSBmcm9tICdzcmMvZnVuY3Rpb25zL3N0eWxlRnVuY3Rpb25zJztcclxuaW1wb3J0IHsgZ2V0Rm9sZGVyUGF0aEZyb21TdHJpbmcsIHJlbW92ZUV4dGVuc2lvbiwgZ2V0RmlsZU5hbWVGcm9tUGF0aFN0cmluZyB9IGZyb20gJ3NyYy9mdW5jdGlvbnMvdXRpbHMnO1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGhhbmRsZVJlbmFtZShmaWxlOiBUQWJzdHJhY3RGaWxlLCBvbGRQYXRoOiBzdHJpbmcsIHBsdWdpbjogRm9sZGVyTm90ZXNQbHVnaW4pIHtcclxuXHRjb25zdCBmb2xkZXIgPSBmaWxlLnBhcmVudDtcclxuXHRjb25zdCBvbGRGb2xkZXIgPSBwbHVnaW4uYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChnZXRGb2xkZXJQYXRoRnJvbVN0cmluZyhvbGRQYXRoKSk7XHJcblx0Y29uc3QgaXNSZW5hbWUgPSAoZmlsZS5wYXJlbnQ/LnBhdGggPT09IGdldEZvbGRlclBhdGhGcm9tU3RyaW5nKG9sZFBhdGgpKVxyXG5cdGlmIChmb2xkZXIgaW5zdGFuY2VvZiBURm9sZGVyKSB7XHJcblx0XHRpZiAocGx1Z2luLmlzRW1wdHlGb2xkZXJOb3RlRm9sZGVyKGZvbGRlcikpIHtcclxuXHRcdFx0YWRkQ1NTQ2xhc3NUb1RpdGxlRUwoZm9sZGVyLnBhdGgsICdvbmx5LWhhcy1mb2xkZXItbm90ZScsIHBsdWdpbik7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHRyZW1vdmVDU1NDbGFzc0Zyb21FTChmb2xkZXIucGF0aCwgJ29ubHktaGFzLWZvbGRlci1ub3RlJywgcGx1Z2luKTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdGlmIChvbGRGb2xkZXIgaW5zdGFuY2VvZiBURm9sZGVyKSB7XHJcblx0XHRpZiAocGx1Z2luLmlzRW1wdHlGb2xkZXJOb3RlRm9sZGVyKG9sZEZvbGRlcikpIHtcclxuXHRcdFx0YWRkQ1NTQ2xhc3NUb1RpdGxlRUwob2xkRm9sZGVyLnBhdGgsICdvbmx5LWhhcy1mb2xkZXItbm90ZScsIHBsdWdpbik7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHRyZW1vdmVDU1NDbGFzc0Zyb21FTChvbGRGb2xkZXIucGF0aCwgJ29ubHktaGFzLWZvbGRlci1ub3RlJywgcGx1Z2luKTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdGlmIChmaWxlIGluc3RhbmNlb2YgVEZvbGRlcikge1xyXG5cdFx0cGx1Z2luLnRhYk1hbmFnZXIudXBkYXRlVGFiKGZpbGUucGF0aCk7XHJcblx0XHR1cGRhdGVFeGNsdWRlZEZvbGRlclBhdGgoZmlsZSwgb2xkUGF0aCwgcGx1Z2luKTtcclxuXHRcdGlmIChpc1JlbmFtZSkge1xyXG5cdFx0XHRyZXR1cm4gaGFuZGxlRm9sZGVyUmVuYW1lKGZpbGUsIG9sZFBhdGgsIHBsdWdpbik7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHRyZXR1cm4gaGFuZGxlRm9sZGVyTW92ZShmaWxlLCBvbGRQYXRoLCBwbHVnaW4pO1xyXG5cdFx0fVxyXG5cdH0gZWxzZSBpZiAoZmlsZSBpbnN0YW5jZW9mIFRGaWxlKSB7XHJcblx0XHRpZiAoaXNSZW5hbWUpIHtcclxuXHRcdFx0cmV0dXJuIGhhbmRsZUZpbGVSZW5hbWUoZmlsZSwgb2xkUGF0aCwgcGx1Z2luKTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdHJldHVybiBoYW5kbGVGaWxlTW92ZShmaWxlLCBvbGRQYXRoLCBwbHVnaW4pO1xyXG5cdFx0fVxyXG5cdH1cclxufVxyXG5cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBoYW5kbGVGb2xkZXJNb3ZlKGZpbGU6IFRGb2xkZXIsIG9sZFBhdGg6IHN0cmluZywgcGx1Z2luOiBGb2xkZXJOb3Rlc1BsdWdpbikge1xyXG5cdC8vIFNvb25cclxuXHQvLyBXaWxsIGJlIHVzZWZ1bCB0byBtb3ZlIGZvbGRlciBub3RlcyBhbG9uZyB3aXRoIHRoZSBmb2xkZXJcclxuXHQvLyBXaGVuIHRoZSBmb2xkZXIgbm90ZSBpcyBpbiB0aGUgcGFyZW50IGZvbGRlclxyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gaGFuZGxlRmlsZU1vdmUoZmlsZTogVEZpbGUsIG9sZFBhdGg6IHN0cmluZywgcGx1Z2luOiBGb2xkZXJOb3Rlc1BsdWdpbikge1xyXG5cdGNvbnN0IGZvbGRlck5hbWUgPSBleHRyYWN0Rm9sZGVyTmFtZShwbHVnaW4uc2V0dGluZ3MuZm9sZGVyTm90ZU5hbWUsIGZpbGUuYmFzZW5hbWUpIHx8IGZpbGUuYmFzZW5hbWU7XHJcblx0Y29uc3Qgb2xkRmlsZU5hbWUgPSByZW1vdmVFeHRlbnNpb24oZ2V0RmlsZU5hbWVGcm9tUGF0aFN0cmluZyhvbGRQYXRoKSk7XHJcblx0Y29uc3QgbmV3Rm9sZGVyID0gZ2V0Rm9sZGVyTm90ZUZvbGRlcihwbHVnaW4sIGZpbGUsIGZpbGUuYmFzZW5hbWUpO1xyXG5cdGNvbnN0IGZvbGRlck5vdGUgPSBnZXRGb2xkZXJOb3RlKHBsdWdpbiwgb2xkUGF0aCwgcGx1Z2luLnNldHRpbmdzLnN0b3JhZ2VMb2NhdGlvbiwgZmlsZSk7XHJcblx0bGV0IGV4Y2x1ZGVkRm9sZGVyID0gYXdhaXQgZ2V0RXhjbHVkZWRGb2xkZXIocGx1Z2luLCBuZXdGb2xkZXI/LnBhdGggfHwgJycsIHRydWUpO1xyXG5cdGNvbnN0IG9sZEZvbGRlciA9IGdldEZvbGRlck5vdGVGb2xkZXIocGx1Z2luLCBvbGRQYXRoLCBvbGRGaWxlTmFtZSk7XHJcblxyXG5cdC8vIGZpbGUgaGFzIGJlZW4gbW92ZWQgaW50byBwb3NpdGlvbiB3aGVyZSBpdCBjYW4gYmUgYSBmb2xkZXIgbm90ZSFcclxuXHRpZiAoZm9sZGVyTmFtZSA9PT0gbmV3Rm9sZGVyPy5uYW1lICYmIGZvbGRlck5vdGUpIHtcclxuXHRcdGxldCBleGNsdWRlZEZvbGRlckV4aXN0ZWQgPSB0cnVlO1xyXG5cdFx0bGV0IGRpc2FibGVkU3luYyA9IGZhbHNlO1xyXG5cclxuXHRcdGlmICghZXhjbHVkZWRGb2xkZXIpIHtcclxuXHRcdFx0ZXhjbHVkZWRGb2xkZXJFeGlzdGVkID0gZmFsc2U7XHJcblx0XHRcdGV4Y2x1ZGVkRm9sZGVyID0gbmV3IEV4Y2x1ZGVkRm9sZGVyKG9sZEZvbGRlcj8ucGF0aCB8fCAnJywgcGx1Z2luLnNldHRpbmdzLmV4Y2x1ZGVGb2xkZXJzLmxlbmd0aCwgdW5kZWZpbmVkLCBwbHVnaW4pO1xyXG5cdFx0XHRhZGRFeGNsdWRlZEZvbGRlcihwbHVnaW4sIGV4Y2x1ZGVkRm9sZGVyKTtcclxuXHRcdH0gZWxzZSBpZiAoIWV4Y2x1ZGVkRm9sZGVyLmRpc2FibGVTeW5jKSB7XHJcblx0XHRcdGRpc2FibGVkU3luYyA9IGZhbHNlO1xyXG5cdFx0XHRleGNsdWRlZEZvbGRlci5kaXNhYmxlU3luYyA9IHRydWU7XHJcblx0XHRcdHVwZGF0ZUV4Y2x1ZGVkRm9sZGVyKHBsdWdpbiwgZXhjbHVkZWRGb2xkZXIsIGV4Y2x1ZGVkRm9sZGVyKTtcclxuXHRcdH1cclxuXHRcdHJldHVybiBwbHVnaW4uYXBwLmZpbGVNYW5hZ2VyLnJlbmFtZUZpbGUoZmlsZSwgb2xkUGF0aCkudGhlbigoKSA9PiB7XHJcblx0XHRcdGlmICghZXhjbHVkZWRGb2xkZXIpIHsgcmV0dXJuOyB9XHJcblx0XHRcdGlmICghZXhjbHVkZWRGb2xkZXJFeGlzdGVkKSB7XHJcblx0XHRcdFx0ZGVsZXRlRXhjbHVkZWRGb2xkZXIocGx1Z2luLCBleGNsdWRlZEZvbGRlcik7XHJcblx0XHRcdH0gZWxzZSBpZiAoIWRpc2FibGVkU3luYykge1xyXG5cdFx0XHRcdGV4Y2x1ZGVkRm9sZGVyLmRpc2FibGVTeW5jID0gZmFsc2U7XHJcblx0XHRcdFx0dXBkYXRlRXhjbHVkZWRGb2xkZXIocGx1Z2luLCBleGNsdWRlZEZvbGRlciwgZXhjbHVkZWRGb2xkZXIpO1xyXG5cdFx0XHR9XHJcblx0XHR9KTtcclxuXHR9IGVsc2UgaWYgKG9sZEZvbGRlciAmJiBvbGRGb2xkZXIubmFtZSA9PT0gb2xkRmlsZU5hbWUgJiYgbmV3Rm9sZGVyPy5wYXRoICE9PSBvbGRGb2xkZXIucGF0aCkge1xyXG5cdFx0Ly8gdGhlIG5vdGUgaGFzIGJlZW4gbW92ZWQgc29tZXdoZXJlIGFuZCBpcyBubyBsb25nZXIgYSBmb2xkZXIgbm90ZVxyXG5cdFx0Ly8gY2xlYW51cCBjc3Mgb24gdGhlIGZvbGRlciBhbmQgbm90ZVxyXG5cdFx0cmVtb3ZlQ1NTQ2xhc3NGcm9tRUwob2xkRm9sZGVyLnBhdGgsICdoYXMtZm9sZGVyLW5vdGUnLCBwbHVnaW4pO1xyXG5cdFx0cmVtb3ZlQ1NTQ2xhc3NGcm9tRUwoZmlsZS5wYXRoLCAnaXMtZm9sZGVyLW5vdGUnLCBwbHVnaW4pO1xyXG5cdFx0cmVtb3ZlQ1NTQ2xhc3NGcm9tRUwob2xkUGF0aCwgJ2lzLWZvbGRlci1ub3RlJywgcGx1Z2luKTtcclxuXHR9XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBoYW5kbGVGb2xkZXJSZW5hbWUoZmlsZTogVEZvbGRlciwgb2xkUGF0aDogc3RyaW5nLCBwbHVnaW46IEZvbGRlck5vdGVzUGx1Z2luKSB7XHJcblx0Y29uc3QgZmlsZU5hbWUgPSBwbHVnaW4uc2V0dGluZ3MuZm9sZGVyTm90ZU5hbWUucmVwbGFjZSgne3tmb2xkZXJfbmFtZX19JywgZmlsZS5uYW1lKTtcclxuXHRjb25zdCBvbGRGaWxlTmFtZSA9IHBsdWdpbi5zZXR0aW5ncy5mb2xkZXJOb3RlTmFtZS5yZXBsYWNlKCd7e2ZvbGRlcl9uYW1lfX0nLCBnZXRGaWxlTmFtZUZyb21QYXRoU3RyaW5nKG9sZFBhdGgpKTtcclxuXHJcblx0aWYgKGZpbGVOYW1lID09PSBvbGRGaWxlTmFtZSkgeyByZXR1cm47IH1cclxuXHJcblxyXG5cdGNvbnN0IGZvbGRlck5vdGUgPSBnZXRGb2xkZXJOb3RlKHBsdWdpbiwgb2xkUGF0aCk7XHJcblx0aWYgKCEoZm9sZGVyTm90ZSBpbnN0YW5jZW9mIFRGaWxlKSkgcmV0dXJuO1xyXG5cclxuXHJcblx0Y29uc3QgZXhjbHVkZWRGb2xkZXIgPSBhd2FpdCBnZXRFeGNsdWRlZEZvbGRlcihwbHVnaW4sIGZpbGUucGF0aCwgdHJ1ZSk7XHJcblx0aWYgKGV4Y2x1ZGVkRm9sZGVyPy5kaXNhYmxlU3luYyAmJiAhZm9sZGVyTm90ZSkge1xyXG5cdFx0cmV0dXJuIHJlbW92ZUNTU0NsYXNzRnJvbUVMKGZpbGUucGF0aCwgJ2hhcy1mb2xkZXItbm90ZScsIHBsdWdpbik7XHJcblx0fVxyXG5cclxuXHRpZiAoIXBsdWdpbi5zZXR0aW5ncy5zeW5jRm9sZGVyTmFtZSkgeyByZXR1cm47IH1cclxuXHJcblx0bGV0IG5ld1BhdGggPSAnJztcclxuXHRpZiAocGx1Z2luLnNldHRpbmdzLnN0b3JhZ2VMb2NhdGlvbiA9PT0gJ3BhcmVudEZvbGRlcicpIHtcclxuXHRcdGNvbnN0IHBhcmVudEZvbGRlclBhdGggPSBnZXRGb2xkZXJQYXRoRnJvbVN0cmluZyhmaWxlLnBhdGgpO1xyXG5cdFx0Y29uc3Qgb2xkUGFyZW50Rm9sZGVyUGF0aCA9IGdldEZvbGRlclBhdGhGcm9tU3RyaW5nKG9sZFBhdGgpO1xyXG5cdFx0aWYgKHBhcmVudEZvbGRlclBhdGggIT09IG9sZFBhcmVudEZvbGRlclBhdGgpIHtcclxuXHRcdFx0aWYgKCFwbHVnaW4uc2V0dGluZ3Muc3luY01vdmUpIHsgcmV0dXJuOyB9XHJcblx0XHRcdG5ld1BhdGggPSBgJHtwYXJlbnRGb2xkZXJQYXRofS8ke2ZpbGVOYW1lfS4ke2ZvbGRlck5vdGUuZXh0ZW5zaW9ufWA7XHJcblx0XHR9IGVsc2UgaWYgKHBhcmVudEZvbGRlclBhdGgudHJpbSgpID09PSAnJykge1xyXG5cdFx0XHRmb2xkZXJOb3RlLnBhdGggPSBgJHtmb2xkZXJOb3RlLm5hbWV9YDtcclxuXHRcdFx0bmV3UGF0aCA9IGAke2ZpbGVOYW1lfS4ke2ZvbGRlck5vdGUuZXh0ZW5zaW9ufWA7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHRmb2xkZXJOb3RlLnBhdGggPSBgJHtwYXJlbnRGb2xkZXJQYXRofS8ke2ZvbGRlck5vdGUubmFtZX1gO1xyXG5cdFx0XHRuZXdQYXRoID0gYCR7cGFyZW50Rm9sZGVyUGF0aH0vJHtmaWxlTmFtZX0uJHtmb2xkZXJOb3RlLmV4dGVuc2lvbn1gO1xyXG5cdFx0fVxyXG5cdH0gZWxzZSB7XHJcblx0XHRmb2xkZXJOb3RlLnBhdGggPSBgJHtmaWxlLnBhdGh9LyR7Zm9sZGVyTm90ZS5uYW1lfWA7XHJcblx0XHRuZXdQYXRoID0gYCR7ZmlsZS5wYXRofS8ke2ZpbGVOYW1lfS4ke2ZvbGRlck5vdGUuZXh0ZW5zaW9ufWA7XHJcblx0fVxyXG5cdHBsdWdpbi5hcHAuZmlsZU1hbmFnZXIucmVuYW1lRmlsZShmb2xkZXJOb3RlLCBuZXdQYXRoKTtcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGhhbmRsZUZpbGVSZW5hbWUoZmlsZTogVEZpbGUsIG9sZFBhdGg6IHN0cmluZywgcGx1Z2luOiBGb2xkZXJOb3Rlc1BsdWdpbikge1xyXG5cdGNvbnN0IG9sZEZpbGVOYW1lID0gcmVtb3ZlRXh0ZW5zaW9uKGdldEZpbGVOYW1lRnJvbVBhdGhTdHJpbmcob2xkUGF0aCkpO1xyXG5cdGNvbnN0IG5ld0ZpbGVOYW1lID0gZmlsZS5iYXNlbmFtZTtcclxuXHRpZiAob2xkRmlsZU5hbWUgPT09IG5ld0ZpbGVOYW1lKSB7IHJldHVybjsgfVxyXG5cclxuXHRjb25zdCBvbGRGb2xkZXIgPSBnZXRGb2xkZXJOb3RlRm9sZGVyKHBsdWdpbiwgb2xkUGF0aCwgb2xkRmlsZU5hbWUpO1xyXG5cdGNvbnN0IGZvbGRlck5hbWUgPSBleHRyYWN0Rm9sZGVyTmFtZShwbHVnaW4uc2V0dGluZ3MuZm9sZGVyTm90ZU5hbWUsIGZpbGUuYmFzZW5hbWUpIHx8IGZpbGUuYmFzZW5hbWU7XHJcblx0Y29uc3Qgb2xkRm9sZGVyTmFtZSA9IGV4dHJhY3RGb2xkZXJOYW1lKHBsdWdpbi5zZXR0aW5ncy5mb2xkZXJOb3RlTmFtZSwgb2xkRmlsZU5hbWUpIHx8IG9sZEZpbGVOYW1lO1xyXG5cdGNvbnN0IG5ld0ZvbGRlciA9IGdldEZvbGRlck5vdGVGb2xkZXIocGx1Z2luLCBmaWxlLCBmaWxlLmJhc2VuYW1lKTtcclxuXHRsZXQgZXhjbHVkZWRGb2xkZXIgPSBhd2FpdCBnZXRFeGNsdWRlZEZvbGRlcihwbHVnaW4sIG5ld0ZvbGRlcj8ucGF0aCB8fCAnJywgdHJ1ZSk7XHJcblx0Y29uc3QgZGV0YWNoZWRFeGNsdWRlZEZvbGRlciA9IGdldERldGFjaGVkRm9sZGVyKHBsdWdpbiwgbmV3Rm9sZGVyPy5wYXRoIHx8ICcnKVxyXG5cdGNvbnN0IGZvbGRlck5vdGUgPSBnZXRGb2xkZXJOb3RlKHBsdWdpbiwgb2xkUGF0aCwgcGx1Z2luLnNldHRpbmdzLnN0b3JhZ2VMb2NhdGlvbiwgZmlsZSk7XHJcblxyXG5cdGlmICghZXhjbHVkZWRGb2xkZXI/LmRpc2FibGVGb2xkZXJOb3RlICYmIGZvbGRlck5hbWUgPT09IG5ld0ZvbGRlcj8ubmFtZSAmJiAhZGV0YWNoZWRFeGNsdWRlZEZvbGRlcikge1xyXG5cdFx0YWRkQ1NTQ2xhc3NUb1RpdGxlRUwoZmlsZS5wYXRoLCAnaXMtZm9sZGVyLW5vdGUnLCBwbHVnaW4pO1xyXG5cdFx0YWRkQ1NTQ2xhc3NUb1RpdGxlRUwobmV3Rm9sZGVyLnBhdGgsICdoYXMtZm9sZGVyLW5vdGUnLCBwbHVnaW4pO1xyXG5cdFx0cmV0dXJuO1xyXG5cdH0gZWxzZSBpZiAoZXhjbHVkZWRGb2xkZXI/LmRpc2FibGVGb2xkZXJOb3RlIHx8IChmb2xkZXJOYW1lICE9PSBuZXdGb2xkZXI/Lm5hbWUpKSB7XHJcblx0XHRyZW1vdmVDU1NDbGFzc0Zyb21FTChmaWxlLnBhdGgsICdpcy1mb2xkZXItbm90ZScsIHBsdWdpbik7XHJcblx0XHRyZW1vdmVDU1NDbGFzc0Zyb21FTChuZXdGb2xkZXI/LnBhdGggfHwgJycsICdoYXMtZm9sZGVyLW5vdGUnLCBwbHVnaW4pO1xyXG5cdH1cclxuXHJcblx0aWYgKGV4Y2x1ZGVkRm9sZGVyPy5kaXNhYmxlU3luYyB8fCAhcGx1Z2luLnNldHRpbmdzLnN5bmNGb2xkZXJOYW1lKSB7IHJldHVybjsgfVxyXG5cclxuXHJcblx0aWYgKGZvbGRlck5hbWUgPT09IG5ld0ZvbGRlcj8ubmFtZSkge1xyXG5cdFx0YWRkQ1NTQ2xhc3NUb1RpdGxlRUwoZmlsZS5wYXRoLCAnaXMtZm9sZGVyLW5vdGUnLCBwbHVnaW4pO1xyXG5cdFx0cmVtb3ZlQ1NTQ2xhc3NGcm9tRUwob2xkRm9sZGVyPy5wYXRoLCAnaGFzLWZvbGRlci1ub3RlJywgcGx1Z2luKTtcclxuXHRcdGFkZENTU0NsYXNzVG9UaXRsZUVMKG5ld0ZvbGRlci5wYXRoLCAnaGFzLWZvbGRlci1ub3RlJywgcGx1Z2luKTtcclxuXHRcdHJldHVybjtcclxuXHR9XHJcblxyXG5cdC8vIGZpbGUgbWF0Y2hlZCBmb2xkZXIgbmFtZSBiZWZvcmUgcmVuYW1lXHJcblx0Ly8gZmlsZSBoYXNudCBtb3ZlZCBqdXN0IHJlbmFtZWRcclxuXHQvLyBOZWVkIHRvIHJlbmFtZSB0aGUgZm9sZGVyXHJcblx0aWYgKCFvbGRGb2xkZXIpIHJldHVybjtcclxuXHRpZiAob2xkRm9sZGVyTmFtZSA9PT0gb2xkRm9sZGVyLm5hbWUgJiYgbmV3Rm9sZGVyPy5wYXRoID09PSBvbGRGb2xkZXIucGF0aCkge1xyXG5cdFx0cmV0dXJuIHJlbmFtZUZvbGRlck9uRmlsZVJlbmFtZShmaWxlLCBvbGRQYXRoLCBvbGRGb2xkZXIsIHBsdWdpbik7XHJcblx0fSBlbHNlIGlmIChmb2xkZXJOb3RlICYmIG9sZEZvbGRlck5hbWUgPT09IG9sZEZvbGRlci5uYW1lKSB7XHJcblx0XHRyZXR1cm4gcmVuYW1lRm9sZGVyT25GaWxlUmVuYW1lKGZpbGUsIG9sZFBhdGgsIG9sZEZvbGRlciwgcGx1Z2luKTtcclxuXHR9XHJcbn1cclxuXHJcbmFzeW5jIGZ1bmN0aW9uIHJlbmFtZUZvbGRlck9uRmlsZVJlbmFtZShmaWxlOiBURmlsZSwgb2xkUGF0aDogc3RyaW5nLCBvbGRGb2xkZXI6IFRBYnN0cmFjdEZpbGUsIHBsdWdpbjogRm9sZGVyTm90ZXNQbHVnaW4pIHtcclxuXHRjb25zdCBuZXdGb2xkZXJOYW1lID0gZXh0cmFjdEZvbGRlck5hbWUocGx1Z2luLnNldHRpbmdzLmZvbGRlck5vdGVOYW1lLCBmaWxlLmJhc2VuYW1lKTtcclxuXHRpZiAoIW5ld0ZvbGRlck5hbWUpIHtcclxuXHRcdHJlbW92ZUNTU0NsYXNzRnJvbUVMKG9sZEZvbGRlci5wYXRoLCAnaGFzLWZvbGRlci1ub3RlJywgcGx1Z2luKTtcclxuXHRcdHJlbW92ZUNTU0NsYXNzRnJvbUVMKGZpbGUucGF0aCwgJ2lzLWZvbGRlci1ub3RlJywgcGx1Z2luKTtcclxuXHRcdHJldHVybjtcclxuXHR9IGVsc2UgaWYgKG5ld0ZvbGRlck5hbWUgPT09IG9sZEZvbGRlci5uYW1lKSB7XHJcblx0XHRhZGRDU1NDbGFzc1RvVGl0bGVFTChvbGRGb2xkZXIucGF0aCwgJ2hhcy1mb2xkZXItbm90ZScsIHBsdWdpbik7XHJcblx0XHRhZGRDU1NDbGFzc1RvVGl0bGVFTChmaWxlLnBhdGgsICdpcy1mb2xkZXItbm90ZScsIHBsdWdpbik7XHJcblx0XHRyZXR1cm47XHJcblx0fVxyXG5cclxuXHRsZXQgbmV3Rm9sZGVyUGF0aCA9ICcnO1xyXG5cdGlmIChwbHVnaW4uc2V0dGluZ3Muc3RvcmFnZUxvY2F0aW9uID09PSAnaW5zaWRlRm9sZGVyJykge1xyXG5cdFx0aWYgKG9sZEZvbGRlci5wYXJlbnQ/LnBhdGggPT09ICcvJykge1xyXG5cdFx0XHRuZXdGb2xkZXJQYXRoID0gYCR7bmV3Rm9sZGVyTmFtZX1gO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0bmV3Rm9sZGVyUGF0aCA9IG9sZEZvbGRlci5wYXJlbnQ/LnBhdGggKyAnLycgKyBuZXdGb2xkZXJOYW1lO1xyXG5cdFx0fVxyXG5cdH0gZWxzZSB7XHJcblx0XHRjb25zdCBwYXJlbnRGb2xkZXJQYXRoID0gZ2V0Rm9sZGVyUGF0aEZyb21TdHJpbmcoZmlsZS5wYXRoKTtcclxuXHRcdGlmIChwYXJlbnRGb2xkZXJQYXRoLnRyaW0oKSA9PT0gJycgfHwgcGFyZW50Rm9sZGVyUGF0aC50cmltKCkgPT09ICcvJykge1xyXG5cdFx0XHRuZXdGb2xkZXJQYXRoID0gYCR7bmV3Rm9sZGVyTmFtZX1gO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0bmV3Rm9sZGVyUGF0aCA9IGAke3BhcmVudEZvbGRlclBhdGh9LyR7bmV3Rm9sZGVyTmFtZX1gO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0aWYgKHBsdWdpbi5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKG5ld0ZvbGRlclBhdGgpKSB7XHJcblx0XHRhd2FpdCBwbHVnaW4uYXBwLmZpbGVNYW5hZ2VyLnJlbmFtZUZpbGUoZmlsZSwgb2xkUGF0aCk7XHJcblx0XHRyZXR1cm4gbmV3IE5vdGljZSgnQSBmb2xkZXIgd2l0aCB0aGUgc2FtZSBuYW1lIGFscmVhZHkgZXhpc3RzJyk7XHJcblx0fVxyXG5cdHBsdWdpbi5hcHAuZmlsZU1hbmFnZXIucmVuYW1lRmlsZShvbGRGb2xkZXIsIG5ld0ZvbGRlclBhdGgpO1xyXG59XHJcblxyXG5mdW5jdGlvbiB1cGRhdGVFeGNsdWRlZEZvbGRlclBhdGgoZm9sZGVyOiBURm9sZGVyLCBvbGRQYXRoOiBzdHJpbmcsIHBsdWdpbjogRm9sZGVyTm90ZXNQbHVnaW4pIHtcclxuXHRjb25zdCBleGNsdWRlZEZvbGRlcnMgPSBwbHVnaW4uc2V0dGluZ3MuZXhjbHVkZUZvbGRlcnMuZmlsdGVyKFxyXG5cdFx0KGV4Y2x1ZGVkRm9sZGVyKSA9PiBleGNsdWRlZEZvbGRlci5wYXRoPy5pbmNsdWRlcyhvbGRQYXRoKVxyXG5cdCk7XHJcblxyXG5cdGV4Y2x1ZGVkRm9sZGVycy5mb3JFYWNoKChleGNsdWRlZEZvbGRlcikgPT4ge1xyXG5cdFx0aWYgKGV4Y2x1ZGVkRm9sZGVyLnBhdGggPT09IG9sZFBhdGgpIHtcclxuXHRcdFx0ZXhjbHVkZWRGb2xkZXIucGF0aCA9IGZvbGRlci5wYXRoO1xyXG5cdFx0XHRyZXR1cm47XHJcblx0XHR9XHJcblx0XHRpZiAoIWV4Y2x1ZGVkRm9sZGVyLnBhdGgpIHJldHVybjtcclxuXHRcdGNvbnN0IGZvbGRlcnMgPSBleGNsdWRlZEZvbGRlci5wYXRoLnNwbGl0KCcvJyk7XHJcblx0XHRpZiAoZm9sZGVycy5sZW5ndGggPCAxKSB7XHJcblx0XHRcdGZvbGRlcnMucHVzaChleGNsdWRlZEZvbGRlci5wYXRoKTtcclxuXHRcdH1cclxuXHJcblx0XHRmb2xkZXJzW2ZvbGRlcnMuaW5kZXhPZihmb2xkZXIubmFtZSldID0gZm9sZGVyLm5hbWU7XHJcblx0XHRleGNsdWRlZEZvbGRlci5wYXRoID0gZm9sZGVycy5qb2luKCcvJyk7XHJcblx0fSk7XHJcblx0cGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG59IiwgImltcG9ydCB7IFRBYnN0cmFjdEZpbGUsIFRGb2xkZXIsIFRGaWxlIH0gZnJvbSAnb2JzaWRpYW4nO1xyXG5pbXBvcnQgRm9sZGVyTm90ZXNQbHVnaW4gZnJvbSAnc3JjL21haW4nO1xyXG5pbXBvcnQgeyBjcmVhdGVGb2xkZXJOb3RlLCBnZXRGb2xkZXIsIGdldEZvbGRlck5vdGUgfSBmcm9tICdzcmMvZnVuY3Rpb25zL2ZvbGRlck5vdGVGdW5jdGlvbnMnO1xyXG5pbXBvcnQgeyBnZXRFeGNsdWRlZEZvbGRlciB9IGZyb20gJ3NyYy9FeGNsdWRlRm9sZGVycy9mdW5jdGlvbnMvZm9sZGVyRnVuY3Rpb25zJztcclxuaW1wb3J0IHsgcmVtb3ZlQ1NTQ2xhc3NGcm9tRUwsIGFkZENTU0NsYXNzVG9UaXRsZUVMIH0gZnJvbSAnc3JjL2Z1bmN0aW9ucy9zdHlsZUZ1bmN0aW9ucyc7XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gaGFuZGxlQ3JlYXRlKGZpbGU6IFRBYnN0cmFjdEZpbGUsIHBsdWdpbjogRm9sZGVyTm90ZXNQbHVnaW4pIHtcclxuICAgIGlmICghcGx1Z2luLmFwcC53b3Jrc3BhY2UubGF5b3V0UmVhZHkpIHJldHVybjtcclxuXHJcbiAgICBjb25zdCBmb2xkZXIgPSBmaWxlLnBhcmVudDtcclxuICAgIGlmIChmb2xkZXIgaW5zdGFuY2VvZiBURm9sZGVyKSB7XHJcbiAgICAgICAgaWYgKHBsdWdpbi5pc0VtcHR5Rm9sZGVyTm90ZUZvbGRlcihmb2xkZXIpKSB7XHJcbiAgICAgICAgICAgIGFkZENTU0NsYXNzVG9UaXRsZUVMKGZvbGRlci5wYXRoLCAnb25seS1oYXMtZm9sZGVyLW5vdGUnLCBwbHVnaW4pO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJlbW92ZUNTU0NsYXNzRnJvbUVMKGZvbGRlci5wYXRoLCAnb25seS1oYXMtZm9sZGVyLW5vdGUnLCBwbHVnaW4pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBpZiAoZmlsZSBpbnN0YW5jZW9mIFRGaWxlKSB7XHJcbiAgICAgICAgaGFuZGxlRmlsZUNyZWF0aW9uKGZpbGUsIHBsdWdpbik7XHJcbiAgICB9IGVsc2UgaWYgKGZpbGUgaW5zdGFuY2VvZiBURm9sZGVyICYmIHBsdWdpbi5zZXR0aW5ncy5hdXRvQ3JlYXRlKSB7XHJcbiAgICAgICAgaGFuZGxlRm9sZGVyQ3JlYXRpb24oZmlsZSwgcGx1Z2luKTtcclxuICAgIH1cclxufVxyXG5cclxuYXN5bmMgZnVuY3Rpb24gaGFuZGxlRmlsZUNyZWF0aW9uKGZpbGU6IFRGaWxlLCBwbHVnaW46IEZvbGRlck5vdGVzUGx1Z2luKSB7XHJcbiAgICBjb25zdCBmb2xkZXIgPSBnZXRGb2xkZXIocGx1Z2luLCBmaWxlKTtcclxuICAgIGlmICghKGZvbGRlciBpbnN0YW5jZW9mIFRGb2xkZXIpKSB7IHJldHVybjsgfVxyXG4gICAgY29uc3QgZGV0YWNoZWRGb2xkZXIgPSBhd2FpdCBnZXRFeGNsdWRlZEZvbGRlcihwbHVnaW4sIGZvbGRlci5wYXRoLCB0cnVlKTtcclxuICAgIGlmIChkZXRhY2hlZEZvbGRlcikgeyByZXR1cm47IH1cclxuICAgIGNvbnN0IGZvbGRlck5vdGUgPSBnZXRGb2xkZXJOb3RlKHBsdWdpbiwgZm9sZGVyLnBhdGgpO1xyXG5cclxuICAgIGlmIChmb2xkZXJOb3RlICYmIGZvbGRlck5vdGUucGF0aCA9PT0gZmlsZS5wYXRoKSB7XHJcbiAgICAgICAgYWRkQ1NTQ2xhc3NUb1RpdGxlRUwoZm9sZGVyLnBhdGgsICdoYXMtZm9sZGVyLW5vdGUnLCBwbHVnaW4pO1xyXG4gICAgICAgIGFkZENTU0NsYXNzVG9UaXRsZUVMKGZpbGUucGF0aCwgJ2lzLWZvbGRlci1ub3RlJywgcGx1Z2luKTtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcbn1cclxuXHJcbmFzeW5jIGZ1bmN0aW9uIGhhbmRsZUZvbGRlckNyZWF0aW9uKGZvbGRlcjogVEZvbGRlciwgcGx1Z2luOiBGb2xkZXJOb3Rlc1BsdWdpbikge1xyXG4gICAgbGV0IG9wZW5GaWxlID0gcGx1Z2luLnNldHRpbmdzLmF1dG9DcmVhdGVGb2N1c0ZpbGVzO1xyXG5cclxuICAgIGNvbnN0IGF0dGFjaG1lbnRGb2xkZXJQYXRoID0gcGx1Z2luLmFwcC52YXVsdC5nZXRDb25maWcoJ2F0dGFjaG1lbnRGb2xkZXJQYXRoJykgYXMgc3RyaW5nO1xyXG4gICAgY29uc3QgY2xlYW5BdHRhY2htZW50Rm9sZGVyUGF0aCA9IGF0dGFjaG1lbnRGb2xkZXJQYXRoPy5yZXBsYWNlKCcuLycsICcnKSB8fCAnJztcclxuICAgIGNvbnN0IGF0dGFjaG1lbnRzQXJlSW5Sb290Rm9sZGVyID0gYXR0YWNobWVudEZvbGRlclBhdGggPT09ICcuLycgfHwgYXR0YWNobWVudEZvbGRlclBhdGggPT09ICcnO1xyXG5cclxuICAgIGlmICghcGx1Z2luLnNldHRpbmdzLmF1dG9DcmVhdGVGb3JBdHRhY2htZW50Rm9sZGVyKSB7XHJcbiAgICAgICAgaWYgKCFhdHRhY2htZW50c0FyZUluUm9vdEZvbGRlciAmJiBjbGVhbkF0dGFjaG1lbnRGb2xkZXJQYXRoID09PSBmb2xkZXIubmFtZSkgcmV0dXJuO1xyXG4gICAgfSBlbHNlIGlmICghYXR0YWNobWVudHNBcmVJblJvb3RGb2xkZXIgJiYgY2xlYW5BdHRhY2htZW50Rm9sZGVyUGF0aCA9PT0gZm9sZGVyLm5hbWUpIHtcclxuICAgICAgICBvcGVuRmlsZSA9IGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IGV4Y2x1ZGVkRm9sZGVyID0gYXdhaXQgZ2V0RXhjbHVkZWRGb2xkZXIocGx1Z2luLCBmb2xkZXIucGF0aCwgdHJ1ZSk7XHJcbiAgICBpZiAoZXhjbHVkZWRGb2xkZXI/LmRpc2FibGVBdXRvQ3JlYXRlKSByZXR1cm47XHJcblxyXG4gICAgY29uc3QgZm9sZGVyTm90ZSA9IGdldEZvbGRlck5vdGUocGx1Z2luLCBmb2xkZXIucGF0aCk7XHJcbiAgICBpZiAoZm9sZGVyTm90ZSkgcmV0dXJuO1xyXG5cclxuICAgIGNyZWF0ZUZvbGRlck5vdGUocGx1Z2luLCBmb2xkZXIucGF0aCwgb3BlbkZpbGUsIHVuZGVmaW5lZCwgdHJ1ZSk7XHJcbiAgICBhZGRDU1NDbGFzc1RvVGl0bGVFTChmb2xkZXIucGF0aCwgJ2hhcy1mb2xkZXItbm90ZScsIHBsdWdpbik7XHJcbn0iLCAiaW1wb3J0IEZvbGRlck5vdGVzUGx1Z2luIGZyb20gJ3NyYy9tYWluJztcclxuaW1wb3J0IHsgQXBwLCBFZGl0YWJsZUZpbGVWaWV3LCBURmlsZSwgVEZvbGRlciB9IGZyb20gJ29ic2lkaWFuJztcclxuaW1wb3J0IHsgZ2V0Rm9sZGVyLCBnZXRGb2xkZXJOb3RlfSBmcm9tICdzcmMvZnVuY3Rpb25zL2ZvbGRlck5vdGVGdW5jdGlvbnMnO1xyXG5leHBvcnQgY2xhc3MgVGFiTWFuYWdlciB7XHJcbiAgICBwbHVnaW46IEZvbGRlck5vdGVzUGx1Z2luO1xyXG4gICAgYXBwOiBBcHA7XHJcbiAgICBjb25zdHJ1Y3RvcihwbHVnaW46IEZvbGRlck5vdGVzUGx1Z2luKSB7XHJcbiAgICAgICAgdGhpcy5wbHVnaW4gPSBwbHVnaW47XHJcbiAgICAgICAgdGhpcy5hcHAgPSBwbHVnaW4uYXBwO1xyXG4gICAgfVxyXG5cclxuICAgIHJlc2V0VGFicygpIHtcclxuICAgICAgICBpZiAoIXRoaXMuaXNFbmFibGVkKCkpIHJldHVybjtcclxuXHJcbiAgICAgICAgdGhpcy5hcHAud29ya3NwYWNlLml0ZXJhdGVBbGxMZWF2ZXMoKGxlYWYpID0+IHtcclxuICAgICAgICAgICAgaWYgKCEobGVhZi52aWV3IGluc3RhbmNlb2YgRWRpdGFibGVGaWxlVmlldykpIHJldHVybjtcclxuICAgICAgICAgICAgY29uc3QgZmlsZSA9IGxlYWYudmlldz8uZmlsZTtcclxuICAgICAgICAgICAgaWYgKCFmaWxlKSByZXR1cm47XHJcbiAgICAgICAgICAgIC8vIEB0cy1pZ25vcmVcclxuICAgICAgICAgICAgbGVhZi50YWJIZWFkZXJJbm5lclRpdGxlRWwuc2V0VGV4dChmaWxlLmJhc2VuYW1lKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICB1cGRhdGVUYWJzKCkge1xyXG4gICAgICAgIGlmICghdGhpcy5pc0VuYWJsZWQoKSkgcmV0dXJuO1xyXG4gICAgICAgIHRoaXMuYXBwLndvcmtzcGFjZS5pdGVyYXRlQWxsTGVhdmVzKChsZWFmKSA9PiB7XHJcbiAgICAgICAgICAgIGlmICghKGxlYWYudmlldyBpbnN0YW5jZW9mIEVkaXRhYmxlRmlsZVZpZXcpKSByZXR1cm47XHJcbiAgICAgICAgICAgIGNvbnN0IGZpbGUgPSBsZWFmLnZpZXc/LmZpbGU7XHJcbiAgICAgICAgICAgIGlmICghZmlsZSkgcmV0dXJuO1xyXG4gICAgICAgICAgICBjb25zdCBmb2xkZXIgPSBnZXRGb2xkZXIodGhpcy5wbHVnaW4sIGZpbGUpO1xyXG4gICAgICAgICAgICBpZiAoIWZvbGRlcikgcmV0dXJuO1xyXG4gICAgICAgICAgICAvLyBAdHMtaWdub3JlXHJcbiAgICAgICAgICAgIGxlYWYudGFiSGVhZGVySW5uZXJUaXRsZUVsLnNldFRleHQoZm9sZGVyLm5hbWUpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHVwZGF0ZVRhYihmb2xkZXJQYXRoOiBzdHJpbmcpIHtcclxuICAgICAgICBpZiAoIXRoaXMuaXNFbmFibGVkKCkpIHJldHVybjtcclxuXHJcbiAgICAgICAgY29uc3QgZm9sZGVyID0gdGhpcy5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKGZvbGRlclBhdGgpO1xyXG4gICAgICAgIGlmICghKGZvbGRlciBpbnN0YW5jZW9mIFRGb2xkZXIpKSByZXR1cm47XHJcblxyXG4gICAgICAgIGNvbnN0IGZvbGRlck5vdGUgPSBnZXRGb2xkZXJOb3RlKHRoaXMucGx1Z2luLCBmb2xkZXIucGF0aCk7XHJcbiAgICAgICAgaWYgKCFmb2xkZXJOb3RlKSByZXR1cm47XHJcbiAgICAgICAgXHJcbiAgICAgICAgdGhpcy5hcHAud29ya3NwYWNlLml0ZXJhdGVBbGxMZWF2ZXMoKGxlYWYpID0+IHtcclxuICAgICAgICAgICAgaWYgKCEobGVhZi52aWV3IGluc3RhbmNlb2YgRWRpdGFibGVGaWxlVmlldykpIHJldHVybjtcclxuICAgICAgICAgICAgY29uc3QgZmlsZSA9IGxlYWYudmlldz8uZmlsZTtcclxuICAgICAgICAgICAgaWYgKCFmaWxlKSByZXR1cm47XHJcbiAgICAgICAgICAgIGlmIChmaWxlLnBhdGggPT09IGZvbGRlck5vdGUucGF0aCkge1xyXG4gICAgICAgICAgICAgICAgLy8gQHRzLWlnbm9yZVxyXG4gICAgICAgICAgICAgICAgbGVhZi50YWJIZWFkZXJJbm5lclRpdGxlRWwuc2V0VGV4dChmb2xkZXIubmFtZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBpc0VuYWJsZWQoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLmZvbGRlck5vdGVOYW1lID09ICd7e2ZvbGRlcl9uYW1lfX0nKSByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucGx1Z2luLnNldHRpbmdzLnRhYk1hbmFnZXJFbmFibGVkO1xyXG4gICAgfVxyXG59IiwgImltcG9ydCB7IFRBYnN0cmFjdEZpbGUsIFRGb2xkZXIsIFRGaWxlIH0gZnJvbSAnb2JzaWRpYW4nO1xyXG5pbXBvcnQgRm9sZGVyTm90ZXNQbHVnaW4gZnJvbSAnc3JjL21haW4nO1xyXG5pbXBvcnQgeyBnZXRGb2xkZXJOb3RlLCBnZXRGb2xkZXIsIGRlbGV0ZUZvbGRlck5vdGUgfSBmcm9tICdzcmMvZnVuY3Rpb25zL2ZvbGRlck5vdGVGdW5jdGlvbnMnO1xyXG5pbXBvcnQgeyByZW1vdmVDU1NDbGFzc0Zyb21FTCwgYWRkQ1NTQ2xhc3NUb1RpdGxlRUwgfSBmcm9tICdzcmMvZnVuY3Rpb25zL3N0eWxlRnVuY3Rpb25zJztcclxuaW1wb3J0IHsgZ2V0Rm9sZGVyUGF0aEZyb21TdHJpbmcgfSBmcm9tICdzcmMvZnVuY3Rpb25zL3V0aWxzJztcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBoYW5kbGVEZWxldGUoZmlsZTogVEFic3RyYWN0RmlsZSwgcGx1Z2luOiBGb2xkZXJOb3Rlc1BsdWdpbikge1xyXG4gICAgY29uc3QgZm9sZGVyID0gcGx1Z2luLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoZ2V0Rm9sZGVyUGF0aEZyb21TdHJpbmcoZmlsZS5wYXRoKSk7XHJcbiAgICBpZiAoZm9sZGVyIGluc3RhbmNlb2YgVEZvbGRlcikge1xyXG4gICAgICAgIGlmIChwbHVnaW4uaXNFbXB0eUZvbGRlck5vdGVGb2xkZXIoZm9sZGVyKSkge1xyXG4gICAgICAgICAgICBhZGRDU1NDbGFzc1RvVGl0bGVFTChmb2xkZXIucGF0aCwgJ29ubHktaGFzLWZvbGRlci1ub3RlJywgcGx1Z2luKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZW1vdmVDU1NDbGFzc0Zyb21FTChmb2xkZXIucGF0aCwgJ29ubHktaGFzLWZvbGRlci1ub3RlJywgcGx1Z2luKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKGZpbGUgaW5zdGFuY2VvZiBURmlsZSkge1xyXG4gICAgICAgIGNvbnN0IGZvbGRlciA9IGdldEZvbGRlcihwbHVnaW4sIGZpbGUpO1xyXG4gICAgICAgIGlmICghZm9sZGVyKSB7IHJldHVybjsgfVxyXG4gICAgICAgIGNvbnN0IGZvbGRlck5vdGUgPSBnZXRGb2xkZXJOb3RlKHBsdWdpbiwgZm9sZGVyLnBhdGgpO1xyXG4gICAgICAgIGlmIChmb2xkZXJOb3RlKSB7IHJldHVybjsgfVxyXG4gICAgICAgIHJlbW92ZUNTU0NsYXNzRnJvbUVMKGZvbGRlci5wYXRoLCAnaGFzLWZvbGRlci1ub3RlJywgcGx1Z2luKTtcclxuICAgICAgICByZW1vdmVDU1NDbGFzc0Zyb21FTChmb2xkZXIucGF0aCwgJ29ubHktaGFzLWZvbGRlci1ub3RlJywgcGx1Z2luKTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoIShmaWxlIGluc3RhbmNlb2YgVEZvbGRlcikpIHsgcmV0dXJuOyB9XHJcbiAgICBjb25zdCBmb2xkZXJOb3RlID0gZ2V0Rm9sZGVyTm90ZShwbHVnaW4sIGZpbGUucGF0aCk7XHJcbiAgICBpZiAoIWZvbGRlck5vdGUpIHsgcmV0dXJuOyB9XHJcbiAgICByZW1vdmVDU1NDbGFzc0Zyb21FTChmb2xkZXJOb3RlLnBhdGgsICdpcy1mb2xkZXItbm90ZScsIHBsdWdpbik7XHJcbiAgICBpZiAoIXBsdWdpbi5zZXR0aW5ncy5zeW5jRGVsZXRlKSB7IHJldHVybjsgfVxyXG4gICAgZGVsZXRlRm9sZGVyTm90ZShwbHVnaW4sIGZvbGRlck5vdGUsIGZhbHNlKTtcclxufSIsICJleHBvcnQgY2xhc3MgQ3VzdG9tRXZlbnRFbWl0dGVyIHtcclxuICAgIHByaXZhdGUgZXZlbnRzOiB7IFtrZXk6IHN0cmluZ106IEFycmF5PChkYXRhPzogYW55KSA9PiB2b2lkPiB9ID0ge307XHJcblxyXG4gICAgb24oZXZlbnQ6IHN0cmluZywgbGlzdGVuZXI6IChkYXRhPzogYW55KSA9PiB2b2lkKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLmV2ZW50c1tldmVudF0pIHtcclxuICAgICAgICAgICAgdGhpcy5ldmVudHNbZXZlbnRdID0gW107XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuZXZlbnRzW2V2ZW50XS5wdXNoKGxpc3RlbmVyKTtcclxuICAgIH1cclxuXHJcbiAgICBvZmYoZXZlbnQ6IHN0cmluZywgbGlzdGVuZXI6IChkYXRhPzogYW55KSA9PiB2b2lkKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLmV2ZW50c1tldmVudF0pIHJldHVybjtcclxuXHJcbiAgICAgICAgdGhpcy5ldmVudHNbZXZlbnRdID0gdGhpcy5ldmVudHNbZXZlbnRdLmZpbHRlcigobCkgPT4gbCAhPT0gbGlzdGVuZXIpO1xyXG4gICAgfVxyXG5cclxuICAgIGVtaXQoZXZlbnQ6IHN0cmluZywgZGF0YT86IGFueSkge1xyXG4gICAgICAgIGlmICghdGhpcy5ldmVudHNbZXZlbnRdKSByZXR1cm47XHJcblxyXG4gICAgICAgIHRoaXMuZXZlbnRzW2V2ZW50XS5mb3JFYWNoKChsaXN0ZW5lcikgPT4gbGlzdGVuZXIoZGF0YSkpO1xyXG4gICAgfVxyXG59IiwgImltcG9ydCB7IEN1c3RvbUV2ZW50RW1pdHRlciB9IGZyb20gJy4vRXZlbnRFbWl0dGVyJztcclxuXHJcbmV4cG9ydCBjbGFzcyBMaXN0Q29tcG9uZW50IHtcclxuXHRlbWl0dGVyOiBDdXN0b21FdmVudEVtaXR0ZXI7XHJcblx0Y29udGFpbmVyRWw6IEhUTUxFbGVtZW50O1xyXG5cdGNvbnRyb2xFbDogSFRNTEVsZW1lbnQ7XHJcblx0ZW1wdHlTdGF0ZUVsOiBIVE1MRWxlbWVudDtcclxuXHRsaXN0RWw6IEhUTUxFbGVtZW50O1xyXG5cdHZhbHVlczogc3RyaW5nW107XHJcblx0ZGVmYXVsdFZhbHVlczogc3RyaW5nW107XHJcblx0Y29uc3RydWN0b3IoY29udGFpbmVyRWw6IEhUTUxFbGVtZW50LCB2YWx1ZXM6IHN0cmluZ1tdID0gW10sIGRlZmF1bHRWYWx1ZXM6IHN0cmluZ1tdID0gW10pIHtcclxuXHRcdHRoaXMuZW1pdHRlciA9IG5ldyBDdXN0b21FdmVudEVtaXR0ZXIoKTtcclxuXHRcdHRoaXMuY29udGFpbmVyRWwgPSBjb250YWluZXJFbDtcclxuXHRcdHRoaXMuY29udHJvbEVsID0gY29udGFpbmVyRWwucXVlcnlTZWxlY3RvcignLnNldHRpbmctaXRlbS1jb250cm9sJykgfHwgY29udGFpbmVyRWw7XHJcblx0XHR0aGlzLmxpc3RFbCA9IHRoaXMuY29udHJvbEVsLmNyZWF0ZURpdignc2V0dGluZy1jb21tYW5kLWhvdGtleXMnKTtcclxuXHRcdHRoaXMuYWRkUmVzZXRCdXR0b24oKTtcclxuXHRcdHRoaXMuc2V0VmFsdWVzKHZhbHVlcyk7XHJcblx0XHR0aGlzLmRlZmF1bHRWYWx1ZXMgPSBkZWZhdWx0VmFsdWVzO1xyXG5cdH1cclxuXHJcblx0b24oZXZlbnQ6IHN0cmluZywgbGlzdGVuZXI6IChkYXRhPzogYW55KSA9PiB2b2lkKSB7XHJcblx0XHR0aGlzLmVtaXR0ZXIub24oZXZlbnQsIGxpc3RlbmVyKTtcclxuXHR9XHJcblxyXG5cdG9mZihldmVudDogc3RyaW5nLCBsaXN0ZW5lcjogKGRhdGE/OiBhbnkpID0+IHZvaWQpIHtcclxuXHRcdHRoaXMuZW1pdHRlci5vZmYoZXZlbnQsIGxpc3RlbmVyKTtcclxuXHR9XHJcblxyXG5cdHByaXZhdGUgZW1pdChldmVudDogc3RyaW5nLCBkYXRhPzogYW55KSB7XHJcblx0XHR0aGlzLmVtaXR0ZXIuZW1pdChldmVudCwgZGF0YSk7XHJcblx0fVxyXG5cclxuXHRzZXRWYWx1ZXModmFsdWVzOiBzdHJpbmdbXSkge1xyXG5cdFx0dGhpcy5yZW1vdmVFbGVtZW50cygpO1xyXG5cdFx0dGhpcy52YWx1ZXMgPSB2YWx1ZXM7XHJcblx0XHRpZiAodmFsdWVzLmxlbmd0aCAhPT0gMCkge1xyXG5cdFx0XHR2YWx1ZXMuZm9yRWFjaCgodmFsdWUpID0+IHtcclxuXHRcdFx0XHR0aGlzLmFkZEVsZW1lbnQodmFsdWUpO1xyXG5cdFx0XHR9KTtcclxuXHRcdH1cclxuXHRcdHRoaXMuZW1pdCgndXBkYXRlJywgdGhpcy52YWx1ZXMpO1xyXG5cdH1cclxuXHJcblx0cmVtb3ZlRWxlbWVudHMoKSB7XHJcblx0XHR0aGlzLmxpc3RFbC5lbXB0eSgpO1xyXG5cdH1cclxuXHJcblx0YWRkRWxlbWVudCh2YWx1ZTogc3RyaW5nKSB7XHJcblx0XHR0aGlzLmxpc3RFbC5jcmVhdGVTcGFuKCdzZXR0aW5nLWhvdGtleScsIChzcGFuKSA9PiB7XHJcblx0XHRcdGlmICh2YWx1ZS50b0xvY2FsZUxvd2VyQ2FzZSgpID09PSAnbWQnKSB7XHJcblx0XHRcdFx0c3Bhbi5pbm5lclRleHQgPSAnbWFya2Rvd24nO1xyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdHNwYW4uaW5uZXJUZXh0ID0gdmFsdWU7XHJcblx0XHRcdH1cclxuXHRcdFx0c3Bhbi5zZXRBdHRyaWJ1dGUoJ2V4dGVuc2lvbicsIHZhbHVlKTtcclxuXHRcdFx0Y29uc3QgcmVtb3ZlU3BhbiA9IHNwYW4uY3JlYXRlRWwoJ3NwYW4nLCB7IGNsczogJ29mbi1saXN0LWl0ZW0tcmVtb3ZlIHNldHRpbmctaG90a2V5LWljb24nIH0pO1xyXG5cdFx0XHRjb25zdCBzdmcgPSAnPHN2ZyB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgd2lkdGg9XCIyNFwiIGhlaWdodD1cIjI0XCIgdmlld0JveD1cIjAgMCAyNCAyNFwiIGZpbGw9XCJub25lXCIgc3Ryb2tlPVwiY3VycmVudENvbG9yXCIgc3Ryb2tlLXdpZHRoPVwiMlwiIHN0cm9rZS1saW5lY2FwPVwicm91bmRcIiBzdHJva2UtbGluZWpvaW49XCJyb3VuZFwiIGNsYXNzPVwic3ZnLWljb24gbHVjaWRlLXhcIj48bGluZSB4MT1cIjE4XCIgeTE9XCI2XCIgeDI9XCI2XCIgeTI9XCIxOFwiPjwvbGluZT48bGluZSB4MT1cIjZcIiB5MT1cIjZcIiB4Mj1cIjE4XCIgeTI9XCIxOFwiPjwvbGluZT48L3N2Zz4nO1xyXG5cdFx0XHRjb25zdCBzdmdFbGVtZW50ID0gcmVtb3ZlU3Bhbi5jcmVhdGVFbCgnc3BhbicsIHsgY2xzOiAnb2ZuLWxpc3QtaXRlbS1yZW1vdmUtaWNvbicgfSk7XHJcblx0XHRcdHN2Z0VsZW1lbnQuaW5uZXJIVE1MID0gc3ZnO1xyXG5cdFx0XHRyZW1vdmVTcGFuLm9uQ2xpY2tFdmVudCgoZSkgPT4ge1xyXG5cdFx0XHRcdHRoaXMucmVtb3ZlVmFsdWUodmFsdWUpO1xyXG5cdFx0XHRcdHNwYW4ucmVtb3ZlKCk7XHJcblx0XHRcdH0pO1xyXG5cdFx0fSk7XHJcblx0fVxyXG5cclxuXHRhc3luYyBhZGRWYWx1ZSh2YWx1ZTogc3RyaW5nKSB7XHJcblx0XHR0aGlzLnZhbHVlcy5wdXNoKHZhbHVlKTtcclxuXHRcdHRoaXMuYWRkRWxlbWVudCh2YWx1ZSk7XHJcblx0XHR0aGlzLmVtaXQoJ2FkZCcsIHZhbHVlKTtcclxuXHRcdHRoaXMuZW1pdCgndXBkYXRlJywgdGhpcy52YWx1ZXMpO1xyXG5cdH1cclxuXHJcblx0YWRkUmVzZXRCdXR0b24oKSB7XHJcblx0XHRjb25zdCByZXNldEJ1dHRvbiA9IHRoaXMuY29udHJvbEVsLmNyZWF0ZUVsKCdzcGFuJywgeyBjbHM6ICdjbGlja2FibGUtaWNvbiBzZXR0aW5nLXJlc3RvcmUtaG90a2V5LWJ1dHRvbicgfSk7XHJcblx0XHRjb25zdCBzdmcgPSAnPHN2ZyB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgd2lkdGg9XCIyNFwiIGhlaWdodD1cIjI0XCIgdmlld0JveD1cIjAgMCAyNCAyNFwiIGZpbGw9XCJub25lXCIgc3Ryb2tlPVwiY3VycmVudENvbG9yXCIgc3Ryb2tlLXdpZHRoPVwiMlwiIHN0cm9rZS1saW5lY2FwPVwicm91bmRcIiBzdHJva2UtbGluZWpvaW49XCJyb3VuZFwiIGNsYXNzPVwic3ZnLWljb24gbHVjaWRlLXJvdGF0ZS1jY3dcIj48cGF0aCBkPVwiTTMgMnY2aDZcIj48L3BhdGg+PHBhdGggZD1cIk0zIDEzYTkgOSAwIDEgMCAzLTcuN0wzIDhcIj48L3BhdGg+PC9zdmc+JztcclxuXHRcdHJlc2V0QnV0dG9uLmlubmVySFRNTCA9IHN2ZztcclxuXHRcdHJlc2V0QnV0dG9uLm9uQ2xpY2tFdmVudCgoZSkgPT4ge1xyXG5cdFx0XHRcdHRoaXMuc2V0VmFsdWVzKHRoaXMuZGVmYXVsdFZhbHVlcyk7XHJcblx0XHR9KTtcclxuXHRcdHJldHVybiB0aGlzO1xyXG5cdH1cclxuXHJcblx0cmVtb3ZlVmFsdWUodmFsdWU6IHN0cmluZykge1xyXG5cdFx0dGhpcy52YWx1ZXMgPSB0aGlzLnZhbHVlcy5maWx0ZXIoKHYpID0+IHYgIT09IHZhbHVlKTtcclxuXHRcdHRoaXMubGlzdEVsLmZpbmQoYFtleHRlbnNpb249JyR7dmFsdWV9J11gKS5yZW1vdmUoKTtcclxuXHRcdHRoaXMuZW1pdCgncmVtb3ZlJywgdmFsdWUpO1xyXG5cdFx0dGhpcy5lbWl0KCd1cGRhdGUnLCB0aGlzLnZhbHVlcyk7XHJcblx0fVxyXG59IiwgImltcG9ydCB7IE1hcmtkb3duUG9zdFByb2Nlc3NvckNvbnRleHQsIHBhcnNlWWFtbCwgVEFic3RyYWN0RmlsZSwgVEZvbGRlciwgVEZpbGUsIHN0cmluZ2lmeVlhbWwsIE5vdGljZSwgTWVudSB9IGZyb20gJ29ic2lkaWFuJztcclxuaW1wb3J0IHsgZ2V0Rm9sZGVyTm90ZSB9IGZyb20gJy4uLy4uL2Z1bmN0aW9ucy9mb2xkZXJOb3RlRnVuY3Rpb25zJztcclxuaW1wb3J0IHsgRm9sZGVyT3ZlcnZpZXdTZXR0aW5ncyB9IGZyb20gJy4vbW9kYWxzL1NldHRpbmdzJztcclxuaW1wb3J0IHsgZ2V0RXhjbHVkZWRGb2xkZXIgfSBmcm9tICcuLi8uLi9FeGNsdWRlRm9sZGVycy9mdW5jdGlvbnMvZm9sZGVyRnVuY3Rpb25zJztcclxuaW1wb3J0IHsgZ2V0Rm9sZGVyUGF0aEZyb21TdHJpbmcgfSBmcm9tICcuLi8uLi9mdW5jdGlvbnMvdXRpbHMnO1xyXG5pbXBvcnQgeyBnZXRFbCB9IGZyb20gJy4uLy4uL2Z1bmN0aW9ucy9zdHlsZUZ1bmN0aW9ucyc7XHJcbmltcG9ydCB7IEZvbGRlck92ZXJ2aWV3LCBvdmVydmlld1NldHRpbmdzIH0gZnJvbSAnLi9Gb2xkZXJPdmVydmlldyc7XHJcbmltcG9ydCBGb2xkZXJOYW1lTW9kYWwgZnJvbSAnLi4vLi4vbW9kYWxzL0ZvbGRlck5hbWUnO1xyXG5pbXBvcnQgTmV3Rm9sZGVyTmFtZU1vZGFsIGZyb20gJy4uLy4uL21vZGFscy9OZXdGb2xkZXJOYW1lJztcclxuaW1wb3J0IEZvbGRlck92ZXJ2aWV3UGx1Z2luIGZyb20gJy4vbWFpbic7XHJcbmltcG9ydCBGb2xkZXJOb3Rlc1BsdWdpbiBmcm9tICcuLi8uLi9tYWluJztcclxuaW1wb3J0IHsgRHJhZ01hbmFnZXIgfSBmcm9tICdvYnNpZGlhbi10eXBpbmdzJztcclxuXHJcbmV4cG9ydCBjbGFzcyBGaWxlRXhwbG9yZXJPdmVydmlldyB7XHJcbiAgICBwbHVnaW46IEZvbGRlck92ZXJ2aWV3UGx1Z2luIHwgRm9sZGVyTm90ZXNQbHVnaW47XHJcbiAgICBmb2xkZXJPdmVydmlldzogRm9sZGVyT3ZlcnZpZXc7XHJcbiAgICBwYXRoQmxhY2tsaXN0OiBzdHJpbmdbXTtcclxuICAgIHNvdXJjZTogc3RyaW5nO1xyXG4gICAgeWFtbDogb3ZlcnZpZXdTZXR0aW5ncztcclxuICAgIHJvb3Q6IEhUTUxFbGVtZW50O1xyXG5cclxuICAgIGV2ZW50TGlzdGVuZXJzOiAoKCkgPT4gdm9pZClbXSA9IFtdO1xyXG4gICAgY29uc3RydWN0b3IocGx1Z2luOiBGb2xkZXJPdmVydmlld1BsdWdpbiB8IEZvbGRlck5vdGVzUGx1Z2luLCBjdHg6IE1hcmtkb3duUG9zdFByb2Nlc3NvckNvbnRleHQsIHJvb3Q6IEhUTUxFbGVtZW50LCB5YW1sOiBvdmVydmlld1NldHRpbmdzLCBwYXRoQmxhY2tsaXN0OiBzdHJpbmdbXSwgZm9sZGVyT3ZlcnZpZXc6IEZvbGRlck92ZXJ2aWV3KSB7XHJcbiAgICAgICAgdGhpcy5wbHVnaW4gPSBwbHVnaW47XHJcbiAgICAgICAgdGhpcy5mb2xkZXJPdmVydmlldyA9IGZvbGRlck92ZXJ2aWV3O1xyXG4gICAgICAgIHRoaXMucGF0aEJsYWNrbGlzdCA9IHBhdGhCbGFja2xpc3Q7XHJcbiAgICAgICAgdGhpcy5zb3VyY2UgPSBjdHguc291cmNlUGF0aDtcclxuICAgICAgICB0aGlzLnlhbWwgPSB5YW1sO1xyXG4gICAgICAgIHRoaXMucm9vdCA9IHJvb3Q7XHJcbiAgICB9XHJcblxyXG4gICAgZGlzY29ubmVjdExpc3RlbmVycygpIHtcclxuICAgICAgICB0aGlzLmV2ZW50TGlzdGVuZXJzLmZvckVhY2goKHVucmVnaXN0ZXIpID0+IHtcclxuICAgICAgICAgICAgdW5yZWdpc3RlcigpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMuZXZlbnRMaXN0ZW5lcnMgPSBbXTtcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyByZW5kZXJGaWxlRXhwbG9yZXIoKSB7XHJcbiAgICAgICAgdGhpcy5kaXNjb25uZWN0TGlzdGVuZXJzKCk7XHJcbiAgICAgICAgY29uc3QgcGx1Z2luID0gdGhpcy5wbHVnaW47XHJcbiAgICAgICAgY29uc3QgY3R4ID0gdGhpcy5mb2xkZXJPdmVydmlldy5jdHg7XHJcbiAgICAgICAgY29uc3Qgcm9vdCA9IHRoaXMuZm9sZGVyT3ZlcnZpZXcucm9vdDtcclxuICAgICAgICBjb25zdCB5YW1sID0gdGhpcy5mb2xkZXJPdmVydmlldy55YW1sO1xyXG4gICAgICAgIGNvbnN0IGZvbGRlck92ZXJ2aWV3ID0gdGhpcy5mb2xkZXJPdmVydmlldztcclxuICAgICAgICBsZXQgZm9sZGVyOiBIVE1MRWxlbWVudCB8IG51bGwgPSBudWxsO1xyXG4gICAgICAgIGlmIChwbHVnaW4gaW5zdGFuY2VvZiBGb2xkZXJPdmVydmlld1BsdWdpbikge1xyXG4gICAgICAgICAgICBmb2xkZXIgPSBnZXRFbCh5YW1sLmZvbGRlclBhdGgsIHBsdWdpbik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGxldCBmb2xkZXJFbGVtZW50ID0gZm9sZGVyPy5wYXJlbnRFbGVtZW50O1xyXG4gICAgICAgIGNvbnN0IHNvdXJjZSA9IGN0eC5zb3VyY2VQYXRoO1xyXG4gICAgICAgIGNvbnN0IG92ZXJ2aWV3TGlzdCA9IGZvbGRlck92ZXJ2aWV3Lmxpc3RFbDtcclxuICAgICAgICBvdmVydmlld0xpc3Q/LmVtcHR5KCk7XHJcbiAgICAgICAgaWYgKCFvdmVydmlld0xpc3QpIHJldHVybjtcclxuXHJcbiAgICAgICAgbGV0IHRGb2xkZXIgPSBwbHVnaW4uYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aCh5YW1sLmZvbGRlclBhdGgpO1xyXG4gICAgICAgIGlmICghdEZvbGRlciAmJiB5YW1sLmZvbGRlclBhdGgudHJpbSgpID09ICcnKSB7XHJcbiAgICAgICAgICAgIGlmIChjdHguc291cmNlUGF0aC5pbmNsdWRlcygnLycpKSB7XHJcbiAgICAgICAgICAgICAgICB0Rm9sZGVyID0gcGx1Z2luLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoZ2V0Rm9sZGVyUGF0aEZyb21TdHJpbmcoY3R4LnNvdXJjZVBhdGgpKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHlhbWwuZm9sZGVyUGF0aCA9ICcvJztcclxuICAgICAgICAgICAgICAgIHRGb2xkZXIgPSBwbHVnaW4uYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aCgnLycpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoIWZvbGRlckVsZW1lbnQgJiYgIXRGb2xkZXIpIHJldHVybjtcclxuICAgICAgICAvLyB3YWl0IHVudGlsIHRoZSBmaWxlIGV4cGxvcmVyIGlzIGxvYWRlZFxyXG5cclxuICAgICAgICBjb25zdCBzb3VyY2VGb2xkZXJQYXRoID0gdEZvbGRlcj8ucGF0aCB8fCAnJztcclxuXHJcbiAgICAgICAgZm9sZGVyRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5uYXYtZmlsZXMtY29udGFpbmVyJylbMF0gYXMgSFRNTEVsZW1lbnQ7XHJcbiAgICAgICAgaWYgKCFmb2xkZXJFbGVtZW50KSB7XHJcbiAgICAgICAgICAgIGZvbGRlckVsZW1lbnQgPSByb290LmNyZWF0ZURpdih7XHJcbiAgICAgICAgICAgICAgICBjbHM6ICduYXYtZmlsZXMtY29udGFpbmVyJyxcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBuZXdGb2xkZXJFbGVtZW50ID0gZm9sZGVyRWxlbWVudC5jbG9uZU5vZGUodHJ1ZSkgYXMgSFRNTEVsZW1lbnQ7XHJcblxyXG4gICAgICAgIG5ld0ZvbGRlckVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCgnZGl2Lm5hdi1mb2xkZXItdGl0bGUnKS5mb3JFYWNoKChlbCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBmb2xkZXIgPSBwbHVnaW4uYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChlbC5nZXRBdHRyaWJ1dGUoJ2RhdGEtcGF0aCcpIHx8ICcnKTtcclxuICAgICAgICAgICAgaWYgKCEoZm9sZGVyIGluc3RhbmNlb2YgVEZvbGRlcikpIHJldHVybjtcclxuXHJcbiAgICAgICAgICAgIGlmICh5YW1sLmFsd2F5c0NvbGxhcHNlKSB7XHJcbiAgICAgICAgICAgICAgICBmb2xkZXIuY29sbGFwc2VkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIGVsLmNsYXNzTGlzdC5hZGQoJ2lzLWNvbGxhcHNlZCcpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaWYgKHlhbWwuc3RvcmVGb2xkZXJDb25kaXRpb24pIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZm9sZGVyLmNvbGxhcHNlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbC5jbGFzc0xpc3QuYWRkKCdpcy1jb2xsYXBzZWQnKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbC5jbGFzc0xpc3QucmVtb3ZlKCdpcy1jb2xsYXBzZWQnKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChlbC5wYXJlbnRFbGVtZW50Py5jbGFzc0xpc3QuY29udGFpbnMoJ2lzLWNvbGxhcHNlZCcpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvbGRlci5jb2xsYXBzZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvbGRlci5jb2xsYXBzZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChlbC5jbGFzc0xpc3QuY29udGFpbnMoJ2hhcy1mb2xkZXItbm90ZScpKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAocGx1Z2luIGluc3RhbmNlb2YgRm9sZGVyTm90ZXNQbHVnaW4pIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBmb2xkZXJOb3RlID0gZ2V0Rm9sZGVyTm90ZShwbHVnaW4sIGZvbGRlci5wYXRoKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZm9sZGVyTm90ZSkgeyBmb2xkZXJPdmVydmlldy5wYXRoQmxhY2tsaXN0LnB1c2goZm9sZGVyTm90ZS5wYXRoKTsgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGNvbnN0IGRlYm91bmNlZFJlbmRlckZpbGVFeHBsb3JlciA9IHRoaXMuZGVib3VuY2UoKCkgPT4gdGhpcy5yZW5kZXJGaWxlRXhwbG9yZXIoKSwgMzAwKTtcclxuXHJcbiAgICAgICAgY29uc3QgaGFuZGxlVmF1bHRDaGFuZ2UgPSAoKSA9PiB7XHJcbiAgICAgICAgICAgIGRlYm91bmNlZFJlbmRlckZpbGVFeHBsb3JlcigpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5ldmVudExpc3RlbmVycy5wdXNoKCgpID0+IHtcclxuICAgICAgICAgICAgZm9sZGVyT3ZlcnZpZXcub2ZmKCd2YXVsdC1jaGFuZ2UnLCBoYW5kbGVWYXVsdENoYW5nZSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGZvbGRlck92ZXJ2aWV3Lm9uKCd2YXVsdC1jaGFuZ2UnLCBoYW5kbGVWYXVsdENoYW5nZSk7XHJcblxyXG4gICAgICAgIGlmICh0Rm9sZGVyIGluc3RhbmNlb2YgVEZvbGRlcikge1xyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLmFkZEZpbGVzKHRGb2xkZXIuY2hpbGRyZW4sIG92ZXJ2aWV3TGlzdCwgZm9sZGVyT3ZlcnZpZXcsIHNvdXJjZUZvbGRlclBhdGgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbmV3Rm9sZGVyRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCdkaXYudHJlZS1pdGVtLWljb24nKS5mb3JFYWNoKChlbCkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoZWwgaW5zdGFuY2VvZiBIVE1MRWxlbWVudCkge1xyXG4gICAgICAgICAgICAgICAgZWwub25jbGljayA9ICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBwYXRoID0gZWwucGFyZW50RWxlbWVudD8uZ2V0QXR0cmlidXRlKCdkYXRhLXBhdGgnKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIXBhdGgpIHJldHVybjtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBmb2xkZXIgPSBwbHVnaW4uYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChwYXRoKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZUNvbGxhcHNlQ2xpY2soZWwsIHBsdWdpbiwgeWFtbCwgdGhpcy5wYXRoQmxhY2tsaXN0LCBzb3VyY2VGb2xkZXJQYXRoLCBmb2xkZXJPdmVydmlldywgZm9sZGVyKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGRlYm91bmNlKGZ1bmM6IEZ1bmN0aW9uLCB3YWl0OiBudW1iZXIpIHtcclxuICAgICAgICBsZXQgdGltZW91dDogbnVtYmVyIHwgdW5kZWZpbmVkO1xyXG4gICAgICAgIHJldHVybiAoLi4uYXJnczogYW55W10pID0+IHtcclxuICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRpbWVvdXQpO1xyXG4gICAgICAgICAgICB0aW1lb3V0ID0gd2luZG93LnNldFRpbWVvdXQoKCkgPT4gZnVuYy5hcHBseSh0aGlzLCBhcmdzKSwgd2FpdCk7XHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBhZGRGaWxlcyhmaWxlczogVEFic3RyYWN0RmlsZVtdLCBjaGlsZHJlbkVsZW1lbnQ6IEhUTUxFbGVtZW50LCBmb2xkZXJPdmVydmlldzogRm9sZGVyT3ZlcnZpZXcsIHNvdXJjZUZvbGRlclBhdGg6IHN0cmluZykge1xyXG4gICAgICAgIGNvbnN0IHBsdWdpbiA9IGZvbGRlck92ZXJ2aWV3LnBsdWdpbjtcclxuICAgICAgICBjb25zdCBhbGxGaWxlcyA9IGF3YWl0IGZvbGRlck92ZXJ2aWV3LmZpbHRlckZpbGVzKGZpbGVzLCBwbHVnaW4sIHNvdXJjZUZvbGRlclBhdGgsIGZvbGRlck92ZXJ2aWV3LnlhbWwuZGVwdGgsIGZvbGRlck92ZXJ2aWV3LnBhdGhCbGFja2xpc3QpO1xyXG4gICAgICAgIGNvbnN0IHNvcnRlZEZpbGVzID0gZm9sZGVyT3ZlcnZpZXcuc29ydEZpbGVzKGFsbEZpbGVzKTtcclxuXHJcbiAgICAgICAgY29uc3QgZm9sZGVycyA9IHNvcnRlZEZpbGVzLmZpbHRlcihjaGlsZCA9PiBjaGlsZCBpbnN0YW5jZW9mIFRGb2xkZXIpO1xyXG4gICAgICAgIGNvbnN0IG90aGVyRmlsZXMgPSBzb3J0ZWRGaWxlcy5maWx0ZXIoY2hpbGQgPT4gY2hpbGQgaW5zdGFuY2VvZiBURmlsZSk7XHJcblxyXG4gICAgICAgIGZvciAoY29uc3QgY2hpbGQgb2YgZm9sZGVycykge1xyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLmNyZWF0ZUZvbGRlckVMKHBsdWdpbiwgY2hpbGQsIGZvbGRlck92ZXJ2aWV3LCBjaGlsZHJlbkVsZW1lbnQsIHNvdXJjZUZvbGRlclBhdGgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZm9yIChjb25zdCBjaGlsZCBvZiBvdGhlckZpbGVzKSB7XHJcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuY3JlYXRlRmlsZUVMKHBsdWdpbiwgY2hpbGQsIGZvbGRlck92ZXJ2aWV3LCBjaGlsZHJlbkVsZW1lbnQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgaGFuZGxlQ29sbGFwc2VDbGljayhlbDogSFRNTEVsZW1lbnQsIHBsdWdpbjogRm9sZGVyT3ZlcnZpZXdQbHVnaW4gfCBGb2xkZXJOb3Rlc1BsdWdpbiwgeWFtbDogb3ZlcnZpZXdTZXR0aW5ncywgcGF0aEJsYWNrbGlzdDogc3RyaW5nW10sIHNvdXJjZUZvbGRlclBhdGg6IHN0cmluZywgZm9sZGVyT3ZlcnZpZXc6IEZvbGRlck92ZXJ2aWV3LCBmb2xkZXI/OiBURm9sZGVyIHwgdW5kZWZpbmVkIHwgbnVsbCB8IFRBYnN0cmFjdEZpbGUpIHtcclxuICAgICAgICBlbC5jbGFzc0xpc3QudG9nZ2xlKCdpcy1jb2xsYXBzZWQnKTtcclxuICAgICAgICBpZiAoZWwuY2xhc3NMaXN0LmNvbnRhaW5zKCdpcy1jb2xsYXBzZWQnKSkge1xyXG4gICAgICAgICAgICBpZiAoIShmb2xkZXIgaW5zdGFuY2VvZiBURm9sZGVyKSkgcmV0dXJuO1xyXG4gICAgICAgICAgICBmb2xkZXIuY29sbGFwc2VkID0gdHJ1ZTtcclxuICAgICAgICAgICAgZWwucGFyZW50RWxlbWVudD8ucGFyZW50RWxlbWVudD8uY2hpbGROb2Rlc1sxXT8ucmVtb3ZlKCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgaWYgKCEoZm9sZGVyIGluc3RhbmNlb2YgVEZvbGRlcikpIHJldHVybjtcclxuICAgICAgICAgICAgZm9sZGVyLmNvbGxhcHNlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICBjb25zdCBmb2xkZXJFbGVtZW50ID0gZWwucGFyZW50RWxlbWVudD8ucGFyZW50RWxlbWVudDtcclxuICAgICAgICAgICAgaWYgKCFmb2xkZXJFbGVtZW50KSByZXR1cm47XHJcbiAgICAgICAgICAgIGNvbnN0IGNoaWxkcmVuRWxlbWVudCA9IGZvbGRlckVsZW1lbnQuY3JlYXRlRGl2KHsgY2xzOiAndHJlZS1pdGVtLWNoaWxkcmVuIG5hdi1mb2xkZXItY2hpbGRyZW4nIH0pO1xyXG4gICAgICAgICAgICBsZXQgZmlsZXMgPSBmb2xkZXJPdmVydmlldy5zb3J0RmlsZXMoZm9sZGVyLmNoaWxkcmVuKTtcclxuICAgICAgICAgICAgZmlsZXMgPSBhd2FpdCBmb2xkZXJPdmVydmlldy5maWx0ZXJGaWxlcyhmaWxlcywgcGx1Z2luLCBmb2xkZXIucGF0aCwgeWFtbC5kZXB0aCB8fCAxLCBwYXRoQmxhY2tsaXN0KTtcclxuICAgICAgICAgICAgYXdhaXQgdGhpcy5hZGRGaWxlcyhmaWxlcywgY2hpbGRyZW5FbGVtZW50LCBmb2xkZXJPdmVydmlldywgc291cmNlRm9sZGVyUGF0aCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIGNyZWF0ZUZvbGRlckVMKHBsdWdpbjogRm9sZGVyT3ZlcnZpZXdQbHVnaW4gfCBGb2xkZXJOb3Rlc1BsdWdpbiwgY2hpbGQ6IFRGb2xkZXIsIGZvbGRlck92ZXJ2aWV3OiBGb2xkZXJPdmVydmlldywgY2hpbGRyZW5FbGVtZW50OiBIVE1MRWxlbWVudCwgc291cmNlRm9sZGVyUGF0aDogc3RyaW5nKSB7XHJcbiAgICAgICAgY29uc3QgcGF0aEJsYWNrbGlzdCA9IGZvbGRlck92ZXJ2aWV3LnBhdGhCbGFja2xpc3Q7XHJcbiAgICAgICAgY29uc3Qgc291cmNlID0gZm9sZGVyT3ZlcnZpZXcuc291cmNlO1xyXG4gICAgICAgIGxldCBmb2xkZXJOb3RlOiBURmlsZSB8IG51bGwgfCB1bmRlZmluZWQgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgaWYgKHBsdWdpbiBpbnN0YW5jZW9mIEZvbGRlck5vdGVzUGx1Z2luKSB7XHJcbiAgICAgICAgICAgIGZvbGRlck5vdGUgPSBnZXRGb2xkZXJOb3RlKHBsdWdpbiwgY2hpbGQucGF0aCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IHlhbWwgPSBmb2xkZXJPdmVydmlldy55YW1sO1xyXG4gICAgICAgIGxldCBmb2xkZXJUaXRsZTogSFRNTEVsZW1lbnQgfCBudWxsID0gbnVsbDtcclxuICAgICAgICBsZXQgZm9sZGVyRWxlbWVudDogSFRNTEVsZW1lbnQgfCBudWxsID0gbnVsbDtcclxuXHJcbiAgICAgICAgaWYgKGZvbGRlck5vdGUpIHsgcGF0aEJsYWNrbGlzdC5wdXNoKGZvbGRlck5vdGUucGF0aCk7IH1cclxuICAgICAgICBsZXQgZXhjbHVkZWRGb2xkZXIgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgaWYgKHBsdWdpbiBpbnN0YW5jZW9mIEZvbGRlck5vdGVzUGx1Z2luKSB7XHJcbiAgICAgICAgICAgIGV4Y2x1ZGVkRm9sZGVyID0gYXdhaXQgZ2V0RXhjbHVkZWRGb2xkZXIocGx1Z2luLCBjaGlsZC5wYXRoLCB0cnVlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGV4Y2x1ZGVkRm9sZGVyPy5leGNsdWRlRnJvbUZvbGRlck92ZXJ2aWV3KSB7IHJldHVybjsgfVxyXG5cclxuICAgICAgICBjb25zdCBzdmcgPSAnPHN2ZyB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgd2lkdGg9XCIyNFwiIGhlaWdodD1cIjI0XCIgdmlld0JveD1cIjAgMCAyNCAyNFwiIGZpbGw9XCJub25lXCIgc3Ryb2tlPVwiY3VycmVudENvbG9yXCIgc3Ryb2tlLXdpZHRoPVwiMlwiIHN0cm9rZS1saW5lY2FwPVwicm91bmRcIiBzdHJva2UtbGluZWpvaW49XCJyb3VuZFwiIGNsYXNzPVwic3ZnLWljb24gcmlnaHQtdHJpYW5nbGVcIj48cGF0aCBkPVwiTTMgOEwxMiAxN0wyMSA4XCI+PC9wYXRoPjwvc3ZnPic7XHJcbiAgICAgICAgaWYgKHlhbWwuaW5jbHVkZVR5cGVzLmluY2x1ZGVzKCdmb2xkZXInKSkge1xyXG4gICAgICAgICAgICBmb2xkZXJFbGVtZW50ID0gY2hpbGRyZW5FbGVtZW50LmNyZWF0ZURpdih7XHJcbiAgICAgICAgICAgICAgICBjbHM6ICd0cmVlLWl0ZW0gbmF2LWZvbGRlcicsXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBmb2xkZXJUaXRsZSA9IGZvbGRlckVsZW1lbnQuY3JlYXRlRGl2KHtcclxuICAgICAgICAgICAgICAgIGNsczogJ3RyZWUtaXRlbS1zZWxmIGlzLWNsaWNrYWJsZSBuYXYtZm9sZGVyLXRpdGxlJyxcclxuICAgICAgICAgICAgICAgIGF0dHI6IHtcclxuICAgICAgICAgICAgICAgICAgICAnZGF0YS1wYXRoJzogY2hpbGQucGF0aCxcclxuICAgICAgICAgICAgICAgICAgICAnZHJhZ2dhYmxlJzogJ3RydWUnXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB9KVxyXG5cclxuICAgICAgICAgICAgY29uc3QgZm9sZGVyVGl0bGVUZXh0ID0gZm9sZGVyVGl0bGU/LmNyZWF0ZURpdih7XHJcbiAgICAgICAgICAgICAgICBjbHM6ICd0cmVlLWl0ZW0taW5uZXIgbmF2LWZvbGRlci10aXRsZS1jb250ZW50JyxcclxuICAgICAgICAgICAgICAgIHRleHQ6IGNoaWxkLm5hbWUsXHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgaWYgKGZvbGRlclRpdGxlVGV4dCAmJiAhZm9sZGVyTm90ZSkge1xyXG4gICAgICAgICAgICAgICAgZm9sZGVyVGl0bGVUZXh0Lm9uY2xpY2sgPSAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY29sbGFwc2VJY29uID0gZm9sZGVyVGl0bGU/LnF1ZXJ5U2VsZWN0b3JBbGwoJy50cmVlLWl0ZW0taWNvbicpWzBdIGFzIEhUTUxFbGVtZW50O1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChjb2xsYXBzZUljb24pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVDb2xsYXBzZUNsaWNrKGNvbGxhcHNlSWNvbiwgcGx1Z2luLCB5YW1sLCBwYXRoQmxhY2tsaXN0LCBzb3VyY2VGb2xkZXJQYXRoLCBmb2xkZXJPdmVydmlldywgY2hpbGQpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZm9sZGVyVGl0bGUuZHJhZ2dhYmxlID0gdHJ1ZTtcclxuICAgICAgICAgICAgZm9sZGVyVGl0bGUuYWRkRXZlbnRMaXN0ZW5lcignZHJhZ3N0YXJ0JywgZSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBkcmFnTWFuYWdlciA9IHBsdWdpbi5hcHAuZHJhZ01hbmFnZXI7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBkcmFnRGF0YSA9IGRyYWdNYW5hZ2VyLmRyYWdGb2xkZXIoZSwgY2hpbGQpO1xyXG4gICAgICAgICAgICAgICAgZHJhZ01hbmFnZXIub25EcmFnU3RhcnQoZSwgZHJhZ0RhdGEpO1xyXG4gICAgICAgICAgICAgICAgZm9sZGVyVGl0bGU/LmNsYXNzTGlzdC5hZGQoJ2lzLWJlaW5nLWRyYWdnZWQnKTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBmb2xkZXJUaXRsZS5hZGRFdmVudExpc3RlbmVyKCdkcmFnZW5kJywgZSA9PiB7XHJcbiAgICAgICAgICAgICAgICBmb2xkZXJUaXRsZT8uY2xhc3NMaXN0LnJlbW92ZSgnaXMtYmVpbmctZHJhZ2dlZCcpO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIGZvbGRlclRpdGxlLmFkZEV2ZW50TGlzdGVuZXIoJ2RyYWdvdmVyJywgZSA9PiB7XHJcbiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB7IGRyYWdnYWJsZSB9ID0gcGx1Z2luLmFwcC5kcmFnTWFuYWdlcjtcclxuICAgICAgICAgICAgICAgIGlmIChkcmFnZ2FibGUgJiYgZHJhZ2dhYmxlLmZpbGUgaW5zdGFuY2VvZiBURm9sZGVyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9sZGVyRWxlbWVudD8uY2xhc3NMaXN0LmFkZCgnaXMtYmVpbmctZHJhZ2dlZC1vdmVyJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgcGx1Z2luLmFwcC5kcmFnTWFuYWdlci5zZXRBY3Rpb24od2luZG93LmkxOG5leHQudCgnaW50ZXJmYWNlLmRyYWctYW5kLWRyb3AubW92ZS1pbnRvLWZvbGRlcicsIHsgZm9sZGVyOiBjaGlsZC5uYW1lIH0pKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBmb2xkZXJUaXRsZS5hZGRFdmVudExpc3RlbmVyKCdkcmFnbGVhdmUnLCBlID0+IHtcclxuICAgICAgICAgICAgICAgIGZvbGRlckVsZW1lbnQ/LmNsYXNzTGlzdC5yZW1vdmUoJ2lzLWJlaW5nLWRyYWdnZWQtb3ZlcicpO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIC8vIGhhbmRsZSB0aGUgZHJvcCBldmVudFxyXG4gICAgICAgICAgICBmb2xkZXJUaXRsZS5hZGRFdmVudExpc3RlbmVyKCdkcm9wJywgZSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB7IGRyYWdnYWJsZSB9ID0gcGx1Z2luLmFwcC5kcmFnTWFuYWdlcjtcclxuICAgICAgICAgICAgICAgIGlmIChkcmFnZ2FibGUgJiYgZHJhZ2dhYmxlLmZpbGUgaW5zdGFuY2VvZiBURm9sZGVyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcGx1Z2luLmFwcC5maWxlTWFuYWdlci5yZW5hbWVGaWxlKGRyYWdnYWJsZS5maWxlLCBjaGlsZC5wYXRoICsgJy8nICsgZHJhZ2dhYmxlLmZpbGUubmFtZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgZm9sZGVyVGl0bGUub25jb250ZXh0bWVudSA9IChlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBmb2xkZXJPdmVydmlldy5mb2xkZXJNZW51KGNoaWxkLCBlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKCFjaGlsZC5jb2xsYXBzZWQpIHtcclxuICAgICAgICAgICAgaWYgKHlhbWwuYWx3YXlzQ29sbGFwc2UpIHtcclxuICAgICAgICAgICAgICAgIGNoaWxkLmNvbGxhcHNlZCA9IHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHlhbWwuaW5jbHVkZVR5cGVzLmluY2x1ZGVzKCdmb2xkZXInKSkge1xyXG4gICAgICAgICAgICAgICAgZm9sZGVyVGl0bGU/LmNsYXNzTGlzdC5yZW1vdmUoJ2lzLWNvbGxhcHNlZCcpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgY2hpbGRyZW5FbGVtZW50ID0gZm9sZGVyRWxlbWVudD8uY3JlYXRlRGl2KHsgY2xzOiAndHJlZS1pdGVtLWNoaWxkcmVuIG5hdi1mb2xkZXItY2hpbGRyZW4nIH0pO1xyXG4gICAgICAgICAgICAgICAgaWYgKGNoaWxkcmVuRWxlbWVudCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuYWRkRmlsZXMoY2hpbGQuY2hpbGRyZW4sIGNoaWxkcmVuRWxlbWVudCwgZm9sZGVyT3ZlcnZpZXcsIHNvdXJjZUZvbGRlclBhdGgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5hZGRGaWxlcyhjaGlsZC5jaGlsZHJlbiwgY2hpbGRyZW5FbGVtZW50LCBmb2xkZXJPdmVydmlldywgc291cmNlRm9sZGVyUGF0aCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBmb2xkZXJUaXRsZT8uY2xhc3NMaXN0LmFkZCgnaXMtY29sbGFwc2VkJyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoZm9sZGVyTm90ZSkgeyBmb2xkZXJUaXRsZT8uY2xhc3NMaXN0LmFkZCgnaGFzLWZvbGRlci1ub3RlJykgfVxyXG4gICAgICAgIGlmIChmb2xkZXJOb3RlICYmIGNoaWxkLmNoaWxkcmVuLmxlbmd0aCA9PT0gMSAmJiB5YW1sLmRpc2FibGVDb2xsYXBzZUljb24pIHsgZm9sZGVyVGl0bGU/LmNsYXNzTGlzdC5hZGQoJ2ZuLWhhcy1uby1maWxlcycpIH1cclxuXHJcbiAgICAgICAgY29uc3QgY29sbGFwc2VJY29uID0gZm9sZGVyVGl0bGU/LmNyZWF0ZURpdih7XHJcbiAgICAgICAgICAgIGNsczogJ3RyZWUtaXRlbS1pY29uIGNvbGxhcHNlLWljb24gbmF2LWZvbGRlci1jb2xsYXBzZS1pbmRpY2F0b3IgZm4tZm9sZGVyLW92ZXJ2aWV3LWNvbGxhcHNlLWljb24nLFxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpZiAoY2hpbGQuY29sbGFwc2VkKSB7XHJcbiAgICAgICAgICAgIGNvbGxhcHNlSWNvbj8uY2xhc3NMaXN0LmFkZCgnaXMtY29sbGFwc2VkJyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoY29sbGFwc2VJY29uKSB7XHJcbiAgICAgICAgICAgIGNvbGxhcHNlSWNvbi5pbm5lckhUTUwgPSBzdmc7XHJcbiAgICAgICAgICAgIGNvbGxhcHNlSWNvbi5vbmNsaWNrID0gKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVDb2xsYXBzZUNsaWNrKGNvbGxhcHNlSWNvbiwgcGx1Z2luLCB5YW1sLCBwYXRoQmxhY2tsaXN0LCBzb3VyY2VGb2xkZXJQYXRoLCBmb2xkZXJPdmVydmlldywgY2hpbGQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIGNyZWF0ZUZpbGVFTChwbHVnaW46IEZvbGRlck92ZXJ2aWV3UGx1Z2luIHwgRm9sZGVyTm90ZXNQbHVnaW4sIGNoaWxkOiBURmlsZSwgZm9sZGVyT3ZlcnZpZXc6IEZvbGRlck92ZXJ2aWV3LCBjaGlsZHJlbkVsZW1lbnQ6IEhUTUxFbGVtZW50KSB7XHJcbiAgICAgICAgY29uc3QgeWFtbCA9IGZvbGRlck92ZXJ2aWV3LnlhbWw7XHJcbiAgICAgICAgY29uc3QgcGF0aEJsYWNrbGlzdCA9IGZvbGRlck92ZXJ2aWV3LnBhdGhCbGFja2xpc3Q7XHJcblxyXG4gICAgICAgIGlmIChwYXRoQmxhY2tsaXN0LmluY2x1ZGVzKGNoaWxkLnBhdGgpICYmICF5YW1sLnNob3dGb2xkZXJOb3RlcykgeyByZXR1cm47IH1cclxuICAgICAgICBjb25zdCBleHRlbnNpb24gPSBjaGlsZC5leHRlbnNpb24udG9Mb3dlckNhc2UoKSA9PSAnbWQnID8gJ21hcmtkb3duJyA6IGNoaWxkLmV4dGVuc2lvbi50b0xvd2VyQ2FzZSgpO1xyXG4gICAgICAgIGNvbnN0IGluY2x1ZGVUeXBlcyA9IHlhbWwuaW5jbHVkZVR5cGVzO1xyXG5cclxuICAgICAgICBpZiAoaW5jbHVkZVR5cGVzLmxlbmd0aCA+IDAgJiYgIWluY2x1ZGVUeXBlcy5pbmNsdWRlcygnYWxsJykpIHtcclxuICAgICAgICAgICAgaWYgKChleHRlbnNpb24gPT09ICdtZCcgfHwgZXh0ZW5zaW9uID09PSAnbWFya2Rvd24nKSAmJiAhaW5jbHVkZVR5cGVzLmluY2x1ZGVzKCdtYXJrZG93bicpKSByZXR1cm47XHJcbiAgICAgICAgICAgIGlmIChleHRlbnNpb24gPT09ICdjYW52YXMnICYmICFpbmNsdWRlVHlwZXMuaW5jbHVkZXMoJ2NhbnZhcycpKSByZXR1cm47XHJcbiAgICAgICAgICAgIGlmIChleHRlbnNpb24gPT09ICdwZGYnICYmICFpbmNsdWRlVHlwZXMuaW5jbHVkZXMoJ3BkZicpKSByZXR1cm47XHJcbiAgICAgICAgICAgIGNvbnN0IGltYWdlVHlwZXMgPSBbJ2pwZycsICdqcGVnJywgJ3BuZycsICdnaWYnLCAnc3ZnJywgJ3dlYnAnXTtcclxuICAgICAgICAgICAgaWYgKGltYWdlVHlwZXMuaW5jbHVkZXMoZXh0ZW5zaW9uKSAmJiAhaW5jbHVkZVR5cGVzLmluY2x1ZGVzKCdpbWFnZScpKSByZXR1cm47XHJcbiAgICAgICAgICAgIGNvbnN0IHZpZGVvVHlwZXMgPSBbJ21wNCcsICd3ZWJtJywgJ29ndicsICdtb3YnLCAnbWt2J107XHJcbiAgICAgICAgICAgIGlmICh2aWRlb1R5cGVzLmluY2x1ZGVzKGV4dGVuc2lvbikgJiYgIWluY2x1ZGVUeXBlcy5pbmNsdWRlcygndmlkZW8nKSkgcmV0dXJuO1xyXG4gICAgICAgICAgICBjb25zdCBhdWRpb1R5cGVzID0gWydtcDMnLCAnd2F2JywgJ200YScsICczZ3AnLCAnZmxhYycsICdvZ2cnLCAnb2dhJywgJ29wdXMnXTtcclxuICAgICAgICAgICAgaWYgKGF1ZGlvVHlwZXMuaW5jbHVkZXMoZXh0ZW5zaW9uKSAmJiBpbmNsdWRlVHlwZXMuaW5jbHVkZXMoJ2F1ZGlvJykpIHJldHVybjtcclxuICAgICAgICAgICAgY29uc3QgYWxsVHlwZXMgPSBbJ21hcmtkb3duJywgJ21kJywgJ2NhbnZhcycsICdwZGYnLCAuLi5pbWFnZVR5cGVzLCAuLi52aWRlb1R5cGVzLCAuLi5hdWRpb1R5cGVzXTtcclxuICAgICAgICAgICAgaWYgKCFhbGxUeXBlcy5pbmNsdWRlcyhleHRlbnNpb24pICYmICFpbmNsdWRlVHlwZXMuaW5jbHVkZXMoJ290aGVyJykpIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IGZpbGVFbGVtZW50ID0gY2hpbGRyZW5FbGVtZW50LmNyZWF0ZURpdih7XHJcbiAgICAgICAgICAgIGNsczogJ3RyZWUtaXRlbSBuYXYtZmlsZScsXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGNvbnN0IGZpbGVUaXRsZSA9IGZpbGVFbGVtZW50LmNyZWF0ZURpdih7XHJcbiAgICAgICAgICAgIGNsczogJ3RyZWUtaXRlbS1zZWxmIGlzLWNsaWNrYWJsZSBuYXYtZmlsZS10aXRsZSBwb2ludGVyLWN1cnNvcicsXHJcbiAgICAgICAgICAgIGF0dHI6IHtcclxuICAgICAgICAgICAgICAgICdkYXRhLXBhdGgnOiBjaGlsZC5wYXRoLFxyXG4gICAgICAgICAgICAgICAgJ2RyYWdnYWJsZSc6ICd0cnVlJ1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgIH0pXHJcblxyXG4gICAgICAgIGZpbGVUaXRsZS5hZGRFdmVudExpc3RlbmVyKCdkcmFnb3ZlcicsIGUgPT4ge1xyXG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgIGNvbnN0IHsgZHJhZ2dhYmxlIH0gPSBwbHVnaW4uYXBwLmRyYWdNYW5hZ2VyO1xyXG4gICAgICAgICAgICBpZiAoZHJhZ2dhYmxlICYmIGRyYWdnYWJsZS5maWxlIGluc3RhbmNlb2YgVEZvbGRlcikge1xyXG4gICAgICAgICAgICAgICAgcGx1Z2luLmFwcC5kcmFnTWFuYWdlci5zZXRBY3Rpb24od2luZG93LmkxOG5leHQudCgnaW50ZXJmYWNlLmRyYWctYW5kLWRyb3AubW92ZS1pbnRvLWZvbGRlcicsIHsgZm9sZGVyOiBjaGlsZC5wYXJlbnQ/Lm5hbWUgfHwgJycgfSkpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZm9sZGVyRUwgPSBmb2xkZXJPdmVydmlldy5nZXRFbEZyb21PdmVydmlldyhjaGlsZC5wYXJlbnQ/LnBhdGggfHwgJycpXHJcbiAgICAgICAgICAgICAgICBpZiAoZm9sZGVyRUwpIHtcclxuICAgICAgICAgICAgICAgICAgICBmb2xkZXJFTC5wYXJlbnRFbGVtZW50Py5jbGFzc0xpc3QuYWRkKCdpcy1iZWluZy1kcmFnZ2VkLW92ZXInKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBmaWxlVGl0bGUuYWRkRXZlbnRMaXN0ZW5lcignZHJhZ2xlYXZlJywgZSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGZvbGRlckVMID0gZm9sZGVyT3ZlcnZpZXcuZ2V0RWxGcm9tT3ZlcnZpZXcoY2hpbGQucGFyZW50Py5wYXRoIHx8ICcnKVxyXG4gICAgICAgICAgICBpZiAoZm9sZGVyRUwpIHtcclxuICAgICAgICAgICAgICAgIGZvbGRlckVMLnBhcmVudEVsZW1lbnQ/LmNsYXNzTGlzdC5yZW1vdmUoJ2lzLWJlaW5nLWRyYWdnZWQtb3ZlcicpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGZpbGVUaXRsZS5hZGRFdmVudExpc3RlbmVyKCdkcm9wJywgZSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IHsgZHJhZ2dhYmxlIH0gPSBwbHVnaW4uYXBwLmRyYWdNYW5hZ2VyO1xyXG4gICAgICAgICAgICBpZiAoZHJhZ2dhYmxlICYmIGRyYWdnYWJsZS5maWxlIGluc3RhbmNlb2YgVEZvbGRlcikge1xyXG4gICAgICAgICAgICAgICAgcGx1Z2luLmFwcC5maWxlTWFuYWdlci5yZW5hbWVGaWxlKGRyYWdnYWJsZS5maWxlLCBjaGlsZC5wYXJlbnQ/LnBhdGggKyAnLycgKyBkcmFnZ2FibGUuZmlsZS5uYW1lKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBmaWxlVGl0bGUub25jbGljayA9ICgpID0+IHtcclxuICAgICAgICAgICAgcGx1Z2luLmFwcC53b3Jrc3BhY2Uub3BlbkxpbmtUZXh0KGNoaWxkLnBhdGgsIGNoaWxkLnBhdGgsIHRydWUpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZmlsZVRpdGxlLm9uY29udGV4dG1lbnUgPSAoZSkgPT4ge1xyXG4gICAgICAgICAgICBmb2xkZXJPdmVydmlldy5maWxlTWVudShjaGlsZCwgZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmaWxlVGl0bGUuY3JlYXRlRGl2KHtcclxuICAgICAgICAgICAgY2xzOiAndHJlZS1pdGVtLWlubmVyIG5hdi1maWxlLXRpdGxlLWNvbnRlbnQnLFxyXG4gICAgICAgICAgICB0ZXh0OiBjaGlsZC5iYXNlbmFtZSxcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaWYgKGNoaWxkLmV4dGVuc2lvbiAhPT0gJ21kJyAmJiAheWFtbC5kaXNhYmxlRmlsZVRhZykge1xyXG4gICAgICAgICAgICBmaWxlVGl0bGUuY3JlYXRlRGl2KHtcclxuICAgICAgICAgICAgICAgIGNsczogJ25hdi1maWxlLXRhZycsXHJcbiAgICAgICAgICAgICAgICB0ZXh0OiBjaGlsZC5leHRlbnNpb25cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59IiwgImltcG9ydCB7IE1hcmtkb3duUG9zdFByb2Nlc3NvckNvbnRleHQsIFRGb2xkZXIsIFRGaWxlLCBQbHVnaW4gfSBmcm9tICdvYnNpZGlhbic7XHJcbmltcG9ydCB7IGV4dHJhY3RGb2xkZXJOYW1lLCBnZXRGb2xkZXJOb3RlIH0gZnJvbSAnLi4vLi4vZnVuY3Rpb25zL2ZvbGRlck5vdGVGdW5jdGlvbnMnO1xyXG5pbXBvcnQgeyBGb2xkZXJPdmVydmlldywgb3ZlcnZpZXdTZXR0aW5ncyB9IGZyb20gJy4vRm9sZGVyT3ZlcnZpZXcnO1xyXG5pbXBvcnQgeyBnZXRGb2xkZXJQYXRoRnJvbVN0cmluZyB9IGZyb20gJy4uLy4uL2Z1bmN0aW9ucy91dGlscyc7XHJcbmltcG9ydCBGb2xkZXJPdmVydmlld1BsdWdpbiBmcm9tICcuL21haW4nO1xyXG5pbXBvcnQgRm9sZGVyTm90ZXNQbHVnaW4gZnJvbSAnLi4vLi4vbWFpbic7XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gcmVuZGVyTGlzdE92ZXJ2aWV3KHBsdWdpbjogRm9sZGVyT3ZlcnZpZXdQbHVnaW4gfCBGb2xkZXJOb3Rlc1BsdWdpbiwgY3R4OiBNYXJrZG93blBvc3RQcm9jZXNzb3JDb250ZXh0LCByb290OiBIVE1MRWxlbWVudCwgeWFtbDogb3ZlcnZpZXdTZXR0aW5ncywgcGF0aEJsYWNrbGlzdDogc3RyaW5nW10sIGZvbGRlck92ZXJ2aWV3OiBGb2xkZXJPdmVydmlldykge1xyXG4gICAgY29uc3Qgb3ZlcnZpZXdMaXN0ID0gZm9sZGVyT3ZlcnZpZXcubGlzdEVsO1xyXG4gICAgICAgIG92ZXJ2aWV3TGlzdD8uZW1wdHkoKTtcclxuICAgIGxldCB0Rm9sZGVyID0gcGx1Z2luLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoeWFtbC5mb2xkZXJQYXRoKTtcclxuICAgIGlmICghdEZvbGRlciAmJiB5YW1sLmZvbGRlclBhdGgudHJpbSgpID09ICcnKSB7XHJcbiAgICAgICAgaWYgKGN0eC5zb3VyY2VQYXRoLmluY2x1ZGVzKCcvJykpIHtcclxuICAgICAgICAgICAgdEZvbGRlciA9IHBsdWdpbi5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKGdldEZvbGRlclBhdGhGcm9tU3RyaW5nKGN0eC5zb3VyY2VQYXRoKSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgeWFtbC5mb2xkZXJQYXRoID0gJy8nO1xyXG4gICAgICAgICAgICB0Rm9sZGVyID0gcGx1Z2luLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoJy8nKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBpZiAoISh0Rm9sZGVyIGluc3RhbmNlb2YgVEZvbGRlcikpIHsgcmV0dXJuOyB9XHJcblxyXG4gICAgbGV0IGZpbGVzID0gdEZvbGRlci5jaGlsZHJlbjtcclxuICAgIGlmICghZmlsZXMpIHsgcmV0dXJuOyB9XHJcbiAgICBjb25zdCB1bCA9IGZvbGRlck92ZXJ2aWV3Lmxpc3RFbDtcclxuICAgIGNvbnN0IHNvdXJjZUZvbGRlclBhdGggPSB0Rm9sZGVyLnBhdGg7XHJcblxyXG4gICAgY29uc3QgZm9sZGVycyA9IGZvbGRlck92ZXJ2aWV3LnNvcnRGaWxlcyhmaWxlcy5maWx0ZXIoZiA9PiBmIGluc3RhbmNlb2YgVEZvbGRlcikpO1xyXG4gICAgZmlsZXMgPSBmb2xkZXJPdmVydmlldy5zb3J0RmlsZXMoZmlsZXMuZmlsdGVyKGYgPT4gZiBpbnN0YW5jZW9mIFRGaWxlKSk7XHJcbiAgICBmb2xkZXJzLmZvckVhY2goKGZpbGUpID0+IHtcclxuICAgICAgICBpZiAoZmlsZSBpbnN0YW5jZW9mIFRGb2xkZXIpIHtcclxuICAgICAgICAgICAgY29uc3QgZm9sZGVySXRlbSA9IGFkZEZvbGRlckxpc3QocGx1Z2luLCB1bCwgZm9sZGVyT3ZlcnZpZXcucGF0aEJsYWNrbGlzdCwgZmlsZSwgZm9sZGVyT3ZlcnZpZXcpO1xyXG4gICAgICAgICAgICBpZiAoIWZvbGRlckl0ZW0pIHsgcmV0dXJuOyB9XHJcbiAgICAgICAgICAgIGdvVGhyb3VnaEZvbGRlcnMocGx1Z2luLCBmb2xkZXJJdGVtLCBmaWxlLCBmb2xkZXJPdmVydmlldy55YW1sLmRlcHRoLCBzb3VyY2VGb2xkZXJQYXRoLCBjdHgsIGZvbGRlck92ZXJ2aWV3LnlhbWwsIGZvbGRlck92ZXJ2aWV3LnBhdGhCbGFja2xpc3QsIGZvbGRlck92ZXJ2aWV3LnlhbWwuaW5jbHVkZVR5cGVzLCBmb2xkZXJPdmVydmlldy55YW1sLmRpc2FibGVGaWxlVGFnLCBmb2xkZXJPdmVydmlldyk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgZmlsZXMuZm9yRWFjaCgoZmlsZSkgPT4ge1xyXG4gICAgICAgIGlmIChmaWxlIGluc3RhbmNlb2YgVEZpbGUpIHtcclxuICAgICAgICAgICAgYWRkRmlsZUxpc3QocGx1Z2luLCB1bCwgZm9sZGVyT3ZlcnZpZXcucGF0aEJsYWNrbGlzdCwgZmlsZSwgZm9sZGVyT3ZlcnZpZXcueWFtbC5pbmNsdWRlVHlwZXMsIGZvbGRlck92ZXJ2aWV3LnlhbWwuZGlzYWJsZUZpbGVUYWcsIGZvbGRlck92ZXJ2aWV3KTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICAvLyBFdmVudCBzeXN0ZW0gZm9yIHJlbmRlcmluZyBsaXN0IHN0eWxlXHJcbiAgICBjb25zdCBkZWJvdW5jZWRSZW5kZXJMaXN0T3ZlcnZpZXcgPSBkZWJvdW5jZSgoKSA9PiByZW5kZXJMaXN0T3ZlcnZpZXcocGx1Z2luLCBjdHgsIHJvb3QsIHlhbWwsIHBhdGhCbGFja2xpc3QsIGZvbGRlck92ZXJ2aWV3KSwgMzAwKTtcclxuICAgIGNvbnN0IGhhbmRsZVZhdWx0Q2hhbmdlID0gKCkgPT4ge1xyXG4gICAgICAgIGRlYm91bmNlZFJlbmRlckxpc3RPdmVydmlldygpO1xyXG4gICAgfVxyXG5cclxuICAgIGZvbGRlck92ZXJ2aWV3Lm9uKCd2YXVsdC1jaGFuZ2UnLCBoYW5kbGVWYXVsdENoYW5nZSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGRlYm91bmNlKGZ1bmM6IEZ1bmN0aW9uLCB3YWl0OiBudW1iZXIpIHtcclxuICAgIGxldCB0aW1lb3V0OiBudW1iZXIgfCB1bmRlZmluZWQ7XHJcbiAgICByZXR1cm4gKC4uLmFyZ3M6IGFueVtdKSA9PiB7XHJcbiAgICAgICAgY2xlYXJUaW1lb3V0KHRpbWVvdXQpO1xyXG4gICAgICAgIHRpbWVvdXQgPSB3aW5kb3cuc2V0VGltZW91dCgoKSA9PiBmdW5jLmFwcGx5KHRoaXMsIGFyZ3MpLCB3YWl0KTtcclxuICAgIH07XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBhZGRGb2xkZXJMaXN0KHBsdWdpbjogRm9sZGVyT3ZlcnZpZXdQbHVnaW4gfCBGb2xkZXJOb3Rlc1BsdWdpbiB8IEZvbGRlck5vdGVzUGx1Z2luLCBsaXN0OiBIVE1MVUxpc3RFbGVtZW50IHwgSFRNTExJRWxlbWVudCwgcGF0aEJsYWNrbGlzdDogc3RyaW5nW10sIGZvbGRlcjogVEZvbGRlciwgZm9sZGVyT3ZlcnZpZXc6IEZvbGRlck92ZXJ2aWV3KSB7XHJcbiAgICBjb25zdCBpc0ZpcnN0TGV2ZWxTdWIgPSBmb2xkZXIucGF0aC5zcGxpdCgnLycpLmxlbmd0aCA9PT0gZm9sZGVyT3ZlcnZpZXcueWFtbC5mb2xkZXJQYXRoLnNwbGl0KCcvJykubGVuZ3RoICsgMTtcclxuICAgIGlmICghZm9sZGVyT3ZlcnZpZXcueWFtbC5zaG93RW1wdHlGb2xkZXJzICYmIGZvbGRlci5jaGlsZHJlbi5sZW5ndGggPT09IDAgJiYgIWZvbGRlck92ZXJ2aWV3LnlhbWwub25seUluY2x1ZGVTdWJmb2xkZXJzKSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfSBlbHNlIGlmIChmb2xkZXJPdmVydmlldy55YW1sLm9ubHlJbmNsdWRlU3ViZm9sZGVycyAmJiAhaXNGaXJzdExldmVsU3ViICYmIGZvbGRlci5jaGlsZHJlbi5sZW5ndGggPT09IDApIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG5cclxuICAgIGNvbnN0IGZvbGRlckl0ZW0gPSBsaXN0LmNyZWF0ZUVsKCdsaScsIHsgY2xzOiAnZm9sZGVyLW92ZXJ2aWV3LWxpc3QgZm9sZGVyLWxpc3QnIH0pO1xyXG4gICAgaWYgKHBsdWdpbiBpbnN0YW5jZW9mIEZvbGRlck5vdGVzUGx1Z2luKSB7XHJcbiAgICAgICAgY29uc3QgZm9sZGVyTm90ZSA9IGdldEZvbGRlck5vdGUocGx1Z2luLCBmb2xkZXIucGF0aCk7XHJcbiAgICAgICAgaWYgKGZvbGRlck5vdGUgaW5zdGFuY2VvZiBURmlsZSkge1xyXG4gICAgICAgICAgICBjb25zdCBmb2xkZXJOb3RlTGluayA9IGZvbGRlckl0ZW0uY3JlYXRlRWwoJ2EnLCB7IGNsczogJ2ZvbGRlci1vdmVydmlldy1saXN0LWl0ZW0gZm9sZGVyLW5hbWUtaXRlbSBpbnRlcm5hbC1saW5rJywgaHJlZjogZm9sZGVyTm90ZS5wYXRoIH0pO1xyXG4gICAgICAgICAgICBmb2xkZXJOb3RlTGluay5pbm5lclRleHQgPSBmb2xkZXIubmFtZTtcclxuICAgICAgICAgICAgcGF0aEJsYWNrbGlzdC5wdXNoKGZvbGRlck5vdGUucGF0aCk7XHJcbiAgICAgICAgICAgIGZvbGRlck5vdGVMaW5rLm9uY29udGV4dG1lbnUgPSAoZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgZS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKTtcclxuICAgICAgICAgICAgICAgIGZvbGRlck92ZXJ2aWV3LmZpbGVNZW51KGZvbGRlck5vdGUsIGUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgY29uc3QgZm9sZGVyTmFtZSA9IGZvbGRlckl0ZW0uY3JlYXRlRWwoJ3NwYW4nLCB7IGNsczogJ2ZvbGRlci1vdmVydmlldy1saXN0LWl0ZW0gZm9sZGVyLW5hbWUtaXRlbScgfSk7XHJcbiAgICAgICAgICAgIGZvbGRlck5hbWUuaW5uZXJUZXh0ID0gZm9sZGVyLm5hbWU7XHJcbiAgICAgICAgICAgIGZvbGRlck5hbWUub25jb250ZXh0bWVudSA9IChlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBmb2xkZXJPdmVydmlldy5mb2xkZXJNZW51KGZvbGRlciwgZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIGNvbnN0IGZvbGRlck5hbWUgPSBmb2xkZXJJdGVtLmNyZWF0ZUVsKCdzcGFuJywgeyBjbHM6ICdmb2xkZXItb3ZlcnZpZXctbGlzdC1pdGVtIGZvbGRlci1uYW1lLWl0ZW0nIH0pO1xyXG4gICAgICAgIGZvbGRlck5hbWUuaW5uZXJUZXh0ID0gZm9sZGVyLm5hbWU7XHJcbiAgICAgICAgZm9sZGVyTmFtZS5vbmNvbnRleHRtZW51ID0gKGUpID0+IHtcclxuICAgICAgICAgICAgZm9sZGVyT3ZlcnZpZXcuZm9sZGVyTWVudShmb2xkZXIsIGUpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gZm9sZGVySXRlbTtcclxufVxyXG5cclxuYXN5bmMgZnVuY3Rpb24gZ29UaHJvdWdoRm9sZGVycyhwbHVnaW46IEZvbGRlck92ZXJ2aWV3UGx1Z2luIHwgRm9sZGVyTm90ZXNQbHVnaW4sIGxpc3Q6IEhUTUxMSUVsZW1lbnQgfCBIVE1MVUxpc3RFbGVtZW50LCBmb2xkZXI6IFRGb2xkZXIsXHJcbiAgICBkZXB0aDogbnVtYmVyLCBzb3VyY2VGb2xkZXJQYXRoOiBzdHJpbmcsIGN0eDogTWFya2Rvd25Qb3N0UHJvY2Vzc29yQ29udGV4dCwgeWFtbDogb3ZlcnZpZXdTZXR0aW5ncyxcclxuICAgIHBhdGhCbGFja2xpc3Q6IHN0cmluZ1tdLCBpbmNsdWRlVHlwZXM6IHN0cmluZ1tdLCBkaXNhYmxlRmlsZVRhZzogYm9vbGVhbiwgZm9sZGVyT3ZlcnZpZXc6IEZvbGRlck92ZXJ2aWV3KSB7XHJcbiAgICBpZiAoc291cmNlRm9sZGVyUGF0aCA9PT0gJycpIHtcclxuICAgICAgICBkZXB0aC0tO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IGFsbEZpbGVzID0gYXdhaXQgZm9sZGVyT3ZlcnZpZXcuZmlsdGVyRmlsZXMoZm9sZGVyLmNoaWxkcmVuLCBwbHVnaW4sIHNvdXJjZUZvbGRlclBhdGgsIGRlcHRoLCBwYXRoQmxhY2tsaXN0KTtcclxuICAgIGNvbnN0IGZpbGVzID0gZm9sZGVyT3ZlcnZpZXcuc29ydEZpbGVzKGFsbEZpbGVzLmZpbHRlcigoZmlsZSkgPT4gIShmaWxlIGluc3RhbmNlb2YgVEZvbGRlcikpKTtcclxuXHJcbiAgICBjb25zdCBmb2xkZXJzID0gZm9sZGVyT3ZlcnZpZXcuc29ydEZpbGVzKGFsbEZpbGVzLmZpbHRlcigoZmlsZSkgPT4gZmlsZSBpbnN0YW5jZW9mIFRGb2xkZXIpKTtcclxuICAgIGNvbnN0IHVsID0gbGlzdC5jcmVhdGVFbCgndWwnLCB7IGNsczogJ2ZvbGRlci1vdmVydmlldy1saXN0JyB9KTtcclxuXHJcbiAgICBmb2xkZXJzLmZvckVhY2goKGZpbGUpID0+IHtcclxuICAgICAgICBpZiAoZmlsZSBpbnN0YW5jZW9mIFRGb2xkZXIpIHtcclxuICAgICAgICAgICAgY29uc3QgZm9sZGVySXRlbSA9IGFkZEZvbGRlckxpc3QocGx1Z2luLCB1bCwgcGF0aEJsYWNrbGlzdCwgZmlsZSwgZm9sZGVyT3ZlcnZpZXcpO1xyXG4gICAgICAgICAgICBpZiAoIWZvbGRlckl0ZW0pIHJldHVybjtcclxuICAgICAgICAgICAgZ29UaHJvdWdoRm9sZGVycyhwbHVnaW4sIGZvbGRlckl0ZW0sIGZpbGUsIGRlcHRoLCBzb3VyY2VGb2xkZXJQYXRoLCBjdHgsIHlhbWwsIHBhdGhCbGFja2xpc3QsIGluY2x1ZGVUeXBlcywgZGlzYWJsZUZpbGVUYWcsIGZvbGRlck92ZXJ2aWV3KTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICBmaWxlcy5mb3JFYWNoKChmaWxlKSA9PiB7XHJcbiAgICAgICAgaWYgKGZpbGUgaW5zdGFuY2VvZiBURmlsZSkge1xyXG4gICAgICAgICAgICBhZGRGaWxlTGlzdChwbHVnaW4sIHVsLCBwYXRoQmxhY2tsaXN0LCBmaWxlLCBpbmNsdWRlVHlwZXMsIGRpc2FibGVGaWxlVGFnLCBmb2xkZXJPdmVydmlldyk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGFkZEZpbGVMaXN0KHBsdWdpbjogRm9sZGVyT3ZlcnZpZXdQbHVnaW4gfCBGb2xkZXJOb3Rlc1BsdWdpbiwgbGlzdDogSFRNTFVMaXN0RWxlbWVudCB8IEhUTUxMSUVsZW1lbnQsIHBhdGhCbGFja2xpc3Q6IHN0cmluZ1tdLCBmaWxlOiBURmlsZSwgaW5jbHVkZVR5cGVzOiBzdHJpbmdbXSwgZGlzYWJsZUZpbGVUYWc6IGJvb2xlYW4sIGZvbGRlck92ZXJ2aWV3OiBGb2xkZXJPdmVydmlldykge1xyXG4gICAgaWYgKGluY2x1ZGVUeXBlcy5sZW5ndGggPiAwICYmICFpbmNsdWRlVHlwZXMuaW5jbHVkZXMoJ2FsbCcpKSB7XHJcbiAgICAgICAgaWYgKGZpbGUuZXh0ZW5zaW9uID09PSAnbWQnICYmICFpbmNsdWRlVHlwZXMuaW5jbHVkZXMoJ21hcmtkb3duJykpIHJldHVybjtcclxuICAgICAgICBpZiAoZmlsZS5leHRlbnNpb24gPT09ICdjYW52YXMnICYmICFpbmNsdWRlVHlwZXMuaW5jbHVkZXMoJ2NhbnZhcycpKSByZXR1cm47XHJcbiAgICAgICAgaWYgKGZpbGUuZXh0ZW5zaW9uID09PSAncGRmJyAmJiAhaW5jbHVkZVR5cGVzLmluY2x1ZGVzKCdwZGYnKSkgcmV0dXJuO1xyXG4gICAgICAgIGNvbnN0IGltYWdlVHlwZXMgPSBbJ2pwZycsICdqcGVnJywgJ3BuZycsICdnaWYnLCAnc3ZnJywgJ3dlYnAnXTtcclxuICAgICAgICBpZiAoaW1hZ2VUeXBlcy5pbmNsdWRlcyhmaWxlLmV4dGVuc2lvbikgJiYgIWluY2x1ZGVUeXBlcy5pbmNsdWRlcygnaW1hZ2UnKSkgcmV0dXJuO1xyXG4gICAgICAgIGNvbnN0IHZpZGVvVHlwZXMgPSBbJ21wNCcsICd3ZWJtJywgJ29ndicsICdtb3YnLCAnbWt2J107XHJcbiAgICAgICAgaWYgKHZpZGVvVHlwZXMuaW5jbHVkZXMoZmlsZS5leHRlbnNpb24pICYmICFpbmNsdWRlVHlwZXMuaW5jbHVkZXMoJ3ZpZGVvJykpIHJldHVybjtcclxuICAgICAgICBjb25zdCBhdWRpb1R5cGVzID0gWydtcDMnLCAnd2F2JywgJ200YScsICczZ3AnLCAnZmxhYycsICdvZ2cnLCAnb2dhJywgJ29wdXMnXTtcclxuICAgICAgICBpZiAoYXVkaW9UeXBlcy5pbmNsdWRlcyhmaWxlLmV4dGVuc2lvbikgJiYgaW5jbHVkZVR5cGVzLmluY2x1ZGVzKCdhdWRpbycpKSByZXR1cm47XHJcbiAgICAgICAgY29uc3QgYWxsVHlwZXMgPSBbJ21kJywgJ2NhbnZhcycsICdwZGYnLCAuLi5pbWFnZVR5cGVzLCAuLi52aWRlb1R5cGVzLCAuLi5hdWRpb1R5cGVzXTtcclxuICAgICAgICBpZiAoIWFsbFR5cGVzLmluY2x1ZGVzKGZpbGUuZXh0ZW5zaW9uKSAmJiAhaW5jbHVkZVR5cGVzLmluY2x1ZGVzKCdvdGhlcicpKSByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKCFmb2xkZXJPdmVydmlldy55YW1sLnNob3dGb2xkZXJOb3Rlcykge1xyXG4gICAgICAgIGlmIChwYXRoQmxhY2tsaXN0LmluY2x1ZGVzKGZpbGUucGF0aCkpIHJldHVybjtcclxuICAgICAgICBpZiAocGx1Z2luIGluc3RhbmNlb2YgRm9sZGVyTm90ZXNQbHVnaW4gJiYgZXh0cmFjdEZvbGRlck5hbWUocGx1Z2luLnNldHRpbmdzLmZvbGRlck5vdGVOYW1lLCBmaWxlLmJhc2VuYW1lKSA9PT0gZmlsZS5wYXJlbnQ/Lm5hbWUpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBsaXN0SXRlbSA9IGxpc3QuY3JlYXRlRWwoJ2xpJywgeyBjbHM6ICdmb2xkZXItb3ZlcnZpZXctbGlzdCBmaWxlLWxpbmsnIH0pO1xyXG4gICAgbGlzdEl0ZW0ub25jb250ZXh0bWVudSA9IChlKSA9PiB7XHJcbiAgICAgICAgZS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKTtcclxuICAgICAgICBmb2xkZXJPdmVydmlldy5maWxlTWVudShmaWxlLCBlKTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBuYW1lSXRlbSA9IGxpc3RJdGVtLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ2ZvbGRlci1vdmVydmlldy1saXN0LWl0ZW0nIH0pO1xyXG4gICAgY29uc3QgbGluayA9IG5hbWVJdGVtLmNyZWF0ZUVsKCdhJywgeyBjbHM6ICdpbnRlcm5hbC1saW5rJywgaHJlZjogZmlsZS5wYXRoIH0pO1xyXG4gICAgbGluay5pbm5lclRleHQgPSBmaWxlLmJhc2VuYW1lO1xyXG4gICAgaWYgKGZpbGUuZXh0ZW5zaW9uICE9PSAnbWQnICYmICFkaXNhYmxlRmlsZVRhZykge1xyXG4gICAgICAgIG5hbWVJdGVtLmNyZWF0ZURpdih7IGNsczogJ25hdi1maWxlLXRhZycgfSkuaW5uZXJUZXh0ID0gZmlsZS5leHRlbnNpb247XHJcbiAgICB9XHJcbn0iLCAiaW1wb3J0IHsgQXBwLCBNb2RhbCwgU2V0dGluZywgVEZvbGRlciB9IGZyb20gJ29ic2lkaWFuJztcclxuaW1wb3J0IEZvbGRlck5vdGVzUGx1Z2luIGZyb20gJy4uL21haW4nO1xyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBOZXdGb2xkZXJOYW1lTW9kYWwgZXh0ZW5kcyBNb2RhbCB7XHJcbiAgICBwbHVnaW46IEZvbGRlck5vdGVzUGx1Z2luO1xyXG4gICAgYXBwOiBBcHA7XHJcbiAgICBmb2xkZXI6IFRGb2xkZXI7XHJcbiAgICBjb25zdHJ1Y3RvcihhcHA6IEFwcCwgcGx1Z2luOiBGb2xkZXJOb3Rlc1BsdWdpbiwgZm9sZGVyOiBURm9sZGVyKSB7XHJcbiAgICAgICAgc3VwZXIoYXBwKTtcclxuICAgICAgICB0aGlzLnBsdWdpbiA9IHBsdWdpbjtcclxuICAgICAgICB0aGlzLmFwcCA9IGFwcDtcclxuICAgICAgICB0aGlzLmZvbGRlciA9IGZvbGRlcjtcclxuICAgIH1cclxuICAgIG9uT3BlbigpIHtcclxuICAgICAgICBjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcclxuXHJcbiAgICAgICAgY29udGVudEVsLmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCAoZSkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoZS5rZXkgPT09ICdFbnRlcicpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2F2ZUZvbGRlck5hbWUoKVxyXG4gICAgICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRoaXMubW9kYWxFbC5jbGFzc0xpc3QuYWRkKCdtb2QtZmlsZS1yZW5hbWUnKVxyXG4gICAgICAgIGNvbnN0IG1vZGFsVGl0bGUgPSB0aGlzLm1vZGFsRWwucXVlcnlTZWxlY3RvcignZGl2Lm1vZGFsLXRpdGxlJylcclxuICAgICAgICBpZiAobW9kYWxUaXRsZSkge1xyXG4gICAgICAgICAgICBtb2RhbFRpdGxlLnRleHRDb250ZW50ID0gJ0ZvbGRlciB0aXRsZSdcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IHRleHRhcmVhID0gY29udGVudEVsLmNyZWF0ZUVsKCd0ZXh0YXJlYScsIHtcclxuICAgICAgICAgICAgdGV4dDogdGhpcy5mb2xkZXIubmFtZS5yZXBsYWNlKHRoaXMucGx1Z2luLnNldHRpbmdzLmZvbGRlck5vdGVUeXBlLCAnJyksXHJcbiAgICAgICAgICAgIGF0dHI6IHtcclxuICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyOiAnRW50ZXIgdGhlIG5hbWUgb2YgdGhlIGZvbGRlcicsXHJcbiAgICAgICAgICAgICAgICByb3dzOiAnMScsXHJcbiAgICAgICAgICAgICAgICBzcGVsbGNoZWNrOiAnZmFsc2UnLFxyXG4gICAgICAgICAgICAgICAgY2xhc3M6ICdyZW5hbWUtdGV4dGFyZWEnXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG5cclxuICAgICAgICB0ZXh0YXJlYS5hZGRFdmVudExpc3RlbmVyKCdmb2N1cycsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICB0aGlzLnNlbGVjdCgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHRleHRhcmVhLmZvY3VzKClcclxuXHJcbiAgICAgICAgY29uc3QgYnV0dG9uQ29udGFpbmVyID0gdGhpcy5tb2RhbEVsLmNyZWF0ZURpdih7IGNsczogJ21vZGFsLWJ1dHRvbi1jb250YWluZXInIH0pO1xyXG4gICAgICAgIGNvbnN0IHNhdmVCdXR0b24gPSBidXR0b25Db250YWluZXIuY3JlYXRlRWwoJ2J1dHRvbicsIHsgdGV4dDogJ1NhdmUnLCBjbHM6ICdtb2QtY3RhJyB9KTtcclxuICAgICAgICBzYXZlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnNhdmVGb2xkZXJOYW1lKClcclxuICAgICAgICAgICAgdGhpcy5jbG9zZSgpXHJcbiAgICAgICAgfSlcclxuXHJcbiAgICAgICAgY29uc3QgY2FuY2VsQnV0dG9uID0gYnV0dG9uQ29udGFpbmVyLmNyZWF0ZUVsKCdidXR0b24nLCB7IHRleHQ6ICdDYW5jZWwnLCBjbHM6ICdtb2QtY2FuY2VsJyB9KTtcclxuICAgICAgICBjYW5jZWxCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuY2xvc2UoKVxyXG4gICAgICAgIH0pXHJcbiAgICB9XHJcbiAgICBvbkNsb3NlKCkge1xyXG4gICAgICAgIGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xyXG4gICAgICAgIGNvbnRlbnRFbC5lbXB0eSgpO1xyXG4gICAgfVxyXG5cclxuICAgIHNhdmVGb2xkZXJOYW1lKCkge1xyXG4gICAgICAgIGNvbnN0IHRleHRhcmVhID0gdGhpcy5jb250ZW50RWwucXVlcnlTZWxlY3RvcigndGV4dGFyZWEnKVxyXG4gICAgICAgIGlmICh0ZXh0YXJlYSkge1xyXG4gICAgICAgICAgICBjb25zdCBuZXdOYW1lID0gdGV4dGFyZWEudmFsdWUudHJpbSgpXHJcbiAgICAgICAgICAgIGlmIChuZXdOYW1lLnRyaW0oKSAhPT0gJycpIHtcclxuICAgICAgICAgICAgICAgIGlmICghdGhpcy5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKHRoaXMuZm9sZGVyLnBhdGguc2xpY2UoMCwgdGhpcy5mb2xkZXIucGF0aC5sYXN0SW5kZXhPZignLycpICsgMSkgKyBuZXdOYW1lLnRyaW0oKSkpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5hcHAuZmlsZU1hbmFnZXIucmVuYW1lRmlsZSh0aGlzLmZvbGRlciwgdGhpcy5mb2xkZXIucGF0aC5zbGljZSgwLCB0aGlzLmZvbGRlci5wYXRoLmxhc3RJbmRleE9mKCcvJykgKyAxKSArIG5ld05hbWUudHJpbSgpKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCAiaW1wb3J0IEZvbGRlck92ZXJ2aWV3UGx1Z2luIGZyb20gJy4vbWFpbic7XHJcbmltcG9ydCB7IE1lbnUsIEVkaXRvciwgTWFya2Rvd25WaWV3LCBzdHJpbmdpZnlZYW1sIH0gZnJvbSAnb2JzaWRpYW4nO1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHJlZ2lzdGVyQ29tbWFuZHMocGx1Z2luOiBGb2xkZXJPdmVydmlld1BsdWdpbikge1xyXG4gICAgcGx1Z2luLmFkZENvbW1hbmQoe1xyXG4gICAgICAgIGlkOiAnb3Blbi1mb2xkZXItb3ZlcnZpZXctc2V0dGluZ3MnLFxyXG4gICAgICAgIG5hbWU6ICdPcGVuIEZvbGRlciBPdmVydmlldyBzZXR0aW5ncycsXHJcbiAgICAgICAgY2FsbGJhY2s6ICgpID0+IHtcclxuICAgICAgICAgICAgcGx1Z2luLmFjdGl2YXRlT3ZlcnZpZXdWaWV3KCk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgcGx1Z2luLnJlZ2lzdGVyRXZlbnQocGx1Z2luLmFwcC53b3Jrc3BhY2Uub24oJ2VkaXRvci1tZW51JywgKG1lbnU6IE1lbnUsIGVkaXRvcjogRWRpdG9yLCB2aWV3OiBNYXJrZG93blZpZXcpID0+IHtcclxuICAgICAgICBjb25zdCB0ZXh0ID0gZWRpdG9yLmdldFNlbGVjdGlvbigpLnRyaW0oKTtcclxuICAgICAgICBjb25zdCBsaW5lID0gZWRpdG9yLmdldEN1cnNvcigpLmxpbmU7XHJcbiAgICAgICAgY29uc3QgbGluZVRleHQgPSBlZGl0b3IuZ2V0TGluZShsaW5lKTtcclxuICAgICAgICBpZiAobGluZVRleHQudHJpbSgpID09PSAnJyB8fCBsaW5lVGV4dC50cmltKCkgPT09ICc+Jykge1xyXG4gICAgICAgICAgICBtZW51LmFkZEl0ZW0oKGl0ZW0pID0+IHtcclxuICAgICAgICAgICAgICAgIGl0ZW0uc2V0VGl0bGUoJ0NyZWF0ZSBmb2xkZXIgb3ZlcnZpZXcnKVxyXG4gICAgICAgICAgICAgICAgICAgIC5zZXRJY29uKCdlZGl0JylcclxuICAgICAgICAgICAgICAgICAgICAub25DbGljaygoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBqc29uID0gT2JqZWN0LmFzc2lnbih7fSwgcGx1Z2luLnNldHRpbmdzKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAganNvbi5pZCA9IGNyeXB0by5yYW5kb21VVUlEKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHlhbWwgPSBzdHJpbmdpZnlZYW1sKGpzb24pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChsaW5lVGV4dC50cmltKCkgPT09ICcnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlZGl0b3IucmVwbGFjZVNlbGVjdGlvbihgXFxgXFxgXFxgZm9sZGVyLW92ZXJ2aWV3XFxuJHt5YW1sfVxcYFxcYFxcYFxcbmApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGxpbmVUZXh0LnRyaW0oKSA9PT0gJz4nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBhZGQgPiB0byB0aGUgYmVnaW5uaW5nIG9mIGVhY2ggbGluZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbGluZXMgPSB5YW1sLnNwbGl0KCdcXG4nKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG5ld0xpbmVzID0gbGluZXMubWFwKChsaW5lKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGA+ICR7bGluZX1gO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlZGl0b3IucmVwbGFjZVNlbGVjdGlvbihgXFxgXFxgXFxgZm9sZGVyLW92ZXJ2aWV3XFxuJHtuZXdMaW5lcy5qb2luKCdcXG4nKX1cXGBcXGBcXGBcXG5gKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9KSk7XHJcbn0iXSwKICAibWFwcGluZ3MiOiAiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUFBO0FBQUE7QUFDQSxXQUFPLGVBQWUsU0FBUyxjQUFjLEVBQUUsT0FBTyxLQUFLLENBQUM7QUFBQTtBQUFBOzs7QUNENUQ7QUFBQTtBQUFBO0FBQ0EsV0FBTyxlQUFlLFNBQVMsY0FBYyxFQUFFLE9BQU8sS0FBSyxDQUFDO0FBQUE7QUFBQTs7O0FDRDVEO0FBQUE7QUFBQTtBQUNBLFdBQU8sZUFBZSxTQUFTLGNBQWMsRUFBRSxPQUFPLEtBQUssQ0FBQztBQUFBO0FBQUE7OztBQ0Q1RDtBQUFBO0FBQUE7QUFDQSxRQUFJLGtCQUFtQixXQUFRLFFBQUssbUJBQXFCLFFBQU8sU0FBVSxTQUFTLEdBQUcsR0FBRyxHQUFHLElBQUk7QUFDNUYsVUFBSSxPQUFPO0FBQVcsYUFBSztBQUMzQixVQUFJLE9BQU8sT0FBTyx5QkFBeUIsR0FBRyxDQUFDO0FBQy9DLFVBQUksQ0FBQyxRQUFTLFVBQVMsT0FBTyxDQUFDLEVBQUUsYUFBYSxLQUFLLFlBQVksS0FBSyxlQUFlO0FBQ2pGLGVBQU8sRUFBRSxZQUFZLE1BQU0sS0FBSyxXQUFXO0FBQUUsaUJBQU8sRUFBRTtBQUFBLFFBQUksRUFBRTtBQUFBLE1BQzlEO0FBQ0EsYUFBTyxlQUFlLEdBQUcsSUFBSSxJQUFJO0FBQUEsSUFDckMsSUFBTSxTQUFTLEdBQUcsR0FBRyxHQUFHLElBQUk7QUFDeEIsVUFBSSxPQUFPO0FBQVcsYUFBSztBQUMzQixRQUFFLE1BQU0sRUFBRTtBQUFBLElBQ2Q7QUFDQSxRQUFJLGVBQWdCLFdBQVEsUUFBSyxnQkFBaUIsU0FBUyxHQUFHLFVBQVM7QUFDbkUsZUFBUyxLQUFLO0FBQUcsWUFBSSxNQUFNLGFBQWEsQ0FBQyxPQUFPLFVBQVUsZUFBZSxLQUFLLFVBQVMsQ0FBQztBQUFHLDBCQUFnQixVQUFTLEdBQUcsQ0FBQztBQUFBLElBQzVIO0FBQ0EsV0FBTyxlQUFlLFNBQVMsY0FBYyxFQUFFLE9BQU8sS0FBSyxDQUFDO0FBQzVELFlBQVEsYUFBYSxRQUFRLFdBQVcsUUFBUSxrQkFBa0IsUUFBUSx3QkFBd0IsUUFBUSxXQUFXO0FBQ3JILGlCQUFhLGVBQTRCLE9BQU87QUFDaEQsaUJBQWEsMkJBQXdDLE9BQU87QUFDNUQsaUJBQWEsb0JBQWlDLE9BQU87QUFDckQsWUFBUSxXQUFXO0FBQ25CLFFBQU0sd0JBQU4sY0FBb0MsTUFBTTtBQUFBLElBQzFDO0FBQ0EsWUFBUSx3QkFBd0I7QUFLaEMsNkJBQXlCLE1BQUs7QUFDMUIsVUFBSSxJQUFJLElBQUk7QUFFWixhQUFRLE1BQU0sTUFBTSxNQUFLLFNBQVEsUUFBUSxTQUFRLFNBQVMsU0FBUyxLQUFJLGFBQWEsUUFBUSxPQUFPLFNBQVMsU0FBUyxHQUFHLG9CQUFvQixRQUFRLE9BQU8sU0FBUyxTQUFTLEdBQUcsSUFBSSxRQUFRLFFBQVEsT0FBTyxRQUFRLE9BQU8sU0FBUyxLQUFLO0FBQUEsSUFDNU87QUFDQSxZQUFRLGtCQUFrQjtBQUsxQix1QkFBa0IsTUFBSztBQUNuQixVQUFJLElBQUksSUFBSSxJQUFJO0FBRWhCLFlBQU0sU0FBVSxNQUFNLE1BQUssU0FBUSxRQUFRLFNBQVEsU0FBUyxTQUFTLEtBQUksYUFBYSxRQUFRLE9BQU8sU0FBUyxTQUFTLEdBQUcsVUFBVSxRQUFRLFFBQVEsT0FBTyxRQUFRLE9BQU8sU0FBUyxLQUFLO0FBQ3hMLFlBQU0sUUFBUyxNQUFNLE1BQUssV0FBVyxRQUFRLFdBQVcsU0FBUyxTQUFTLE9BQU8sY0FBYyxRQUFRLE9BQU8sU0FBUyxTQUFTLEdBQUcsS0FBSyxNQUFNLE9BQU8sUUFBUSxPQUFPLFNBQVMsS0FBSztBQUNsTCxVQUFJLFVBQVUsTUFBTTtBQUNoQixjQUFNLElBQUksc0JBQXNCLFVBQVUsUUFBUSx3Q0FBd0M7QUFBQSxNQUM5RjtBQUNBLGFBQU87QUFBQSxJQUNYO0FBQ0EsWUFBUSxXQUFXO0FBS25CLHdCQUFvQixNQUFLO0FBQ3JCLGFBQU8sSUFBSSxXQUFXLE1BQU0sSUFBRztBQUFBLElBQ25DO0FBQ0EsWUFBUSxhQUFhO0FBQ3JCLFFBQU0sYUFBTixNQUFpQjtBQUFBLE1BQ2IsWUFBWSxLQUFLLE1BQUs7QUFDbEIsYUFBSyxNQUFNO0FBQ1gsYUFBSyxNQUFNO0FBQUEsTUFDZjtBQUFBLE1BQ0EsU0FBUztBQUNMLFlBQUksS0FBSyxRQUFRLE1BQU07QUFDbkI7QUFBQSxRQUNKO0FBQ0EsY0FBTSxRQUFRLEtBQUssVUFBVTtBQUM3QixZQUFJLFVBQVUsTUFBTTtBQUNoQjtBQUFBLFFBQ0o7QUFDQSxjQUFNLE1BQU0sTUFBTSxPQUFPO0FBQ3pCLFlBQUksUUFBUSxNQUFNO0FBQ2QsaUJBQU8sTUFBTSxZQUFZLEVBQUUsS0FBSyxNQUFNO0FBQ2xDLGlCQUFLLE1BQU0sTUFBTSxPQUFPO0FBQUEsVUFDNUIsQ0FBQztBQUFBLFFBQ0wsT0FDSztBQUNELGVBQUssTUFBTTtBQUFBLFFBQ2Y7QUFBQSxNQUNKO0FBQUEsTUFDQSxZQUFZO0FBQ1IsWUFBSTtBQUNBLGlCQUFPLFVBQVMsS0FBSyxHQUFHO0FBQUEsUUFDNUIsU0FDTyxHQUFQO0FBQ0ksY0FBSSxhQUFhLHVCQUF1QjtBQUNwQyxtQkFBTztBQUFBLFVBQ1g7QUFDQSxnQkFBTTtBQUFBLFFBQ1Y7QUFBQSxNQUNKO0FBQUEsTUFDQSxxQkFBcUI7QUFDakIsWUFBSSxJQUFJO0FBQ1IsYUFBSyxPQUFPO0FBQ1osZUFBUSxNQUFNLE1BQUssS0FBSyxTQUFTLFFBQVEsT0FBTyxTQUFTLFNBQVMsR0FBRyxtQkFBbUIsT0FBTyxRQUFRLE9BQU8sU0FBUyxLQUFLO0FBQUEsTUFDaEk7QUFBQSxNQUNBLHFCQUFxQjtBQUNqQixZQUFJLElBQUk7QUFDUixhQUFLLE9BQU87QUFDWixlQUFRLE1BQU0sTUFBSyxLQUFLLFNBQVMsUUFBUSxPQUFPLFNBQVMsU0FBUyxHQUFHLG1CQUFtQixPQUFPLFFBQVEsT0FBTyxTQUFTLEtBQUs7QUFBQSxNQUNoSTtBQUFBLE1BQ0EscUJBQXFCO0FBQ2pCLFlBQUksSUFBSTtBQUNSLGFBQUssT0FBTztBQUNaLGVBQVEsTUFBTSxNQUFLLEtBQUssU0FBUyxRQUFRLE9BQU8sU0FBUyxTQUFTLEdBQUcsbUJBQW1CLE9BQU8sUUFBUSxPQUFPLFNBQVMsS0FBSyxDQUFDO0FBQUEsTUFDakk7QUFBQSxJQUNKO0FBQUE7QUFBQTs7O0FDMUdBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSx3QkFBdUY7OztBQ0F2Rix3QkFBc0c7OztBQ0F0Ryx3QkFBOEk7OztBQ0E5SSx3QkFBcUg7OztBQ0E5RyxpQ0FBaUMsTUFBc0I7QUFDMUQsUUFBTSxZQUFZLEtBQUssWUFBWSxHQUFHLEtBQUssSUFBSSxLQUFLLFlBQVksR0FBRyxJQUFJO0FBQ3ZFLFFBQU0sYUFBYSxLQUFLLFVBQVUsR0FBRyxTQUFTO0FBQzlDLE1BQUksZUFBZSxJQUFJO0FBQ25CLFdBQU87QUFBQSxFQUNYLE9BQU87QUFDSCxXQUFPO0FBQUEsRUFDWDtBQUNKOzs7QUNSQSx3QkFBMEc7OztBQ0UxRyx3QkFBdUM7OztBQ0N2QyxzQkFBcUM7OztBQ0g5QixJQUFJLE1BQU07QUFDVixJQUFJLFNBQVM7QUFDYixJQUFJLFFBQVE7QUFDWixJQUFJLE9BQU87QUFDWCxJQUFJLE9BQU87QUFDWCxJQUFJLGlCQUFpQixDQUFDLEtBQUssUUFBUSxPQUFPLElBQUk7QUFDOUMsSUFBSSxRQUFRO0FBQ1osSUFBSSxNQUFNO0FBQ1YsSUFBSSxrQkFBa0I7QUFDdEIsSUFBSSxXQUFXO0FBQ2YsSUFBSSxTQUFTO0FBQ2IsSUFBSSxZQUFZO0FBQ2hCLElBQUksc0JBQW1DLCtCQUFlLE9BQU8sU0FBVSxLQUFLLFdBQVc7QUFDNUYsU0FBTyxJQUFJLE9BQU8sQ0FBQyxZQUFZLE1BQU0sT0FBTyxZQUFZLE1BQU0sR0FBRyxDQUFDO0FBQ3BFLEdBQUcsQ0FBQyxDQUFDO0FBQ0UsSUFBSSxhQUEwQixpQkFBQyxFQUFFLE9BQU8sZ0JBQWdCLENBQUMsSUFBSSxDQUFDLEVBQUUsT0FBTyxTQUFVLEtBQUssV0FBVztBQUN0RyxTQUFPLElBQUksT0FBTyxDQUFDLFdBQVcsWUFBWSxNQUFNLE9BQU8sWUFBWSxNQUFNLEdBQUcsQ0FBQztBQUMvRSxHQUFHLENBQUMsQ0FBQztBQUVFLElBQUksYUFBYTtBQUNqQixJQUFJLE9BQU87QUFDWCxJQUFJLFlBQVk7QUFFaEIsSUFBSSxhQUFhO0FBQ2pCLElBQUksT0FBTztBQUNYLElBQUksWUFBWTtBQUVoQixJQUFJLGNBQWM7QUFDbEIsSUFBSSxRQUFRO0FBQ1osSUFBSSxhQUFhO0FBQ2pCLElBQUksaUJBQWlCLENBQUMsWUFBWSxNQUFNLFdBQVcsWUFBWSxNQUFNLFdBQVcsYUFBYSxPQUFPLFVBQVU7OztBQzlCdEcscUJBQXFCLFNBQVM7QUFDM0MsU0FBTyxVQUFXLFNBQVEsWUFBWSxJQUFJLFlBQVksSUFBSTtBQUM1RDs7O0FDRmUsbUJBQW1CLE1BQU07QUFDdEMsTUFBSSxRQUFRLE1BQU07QUFDaEIsV0FBTztBQUFBLEVBQ1Q7QUFFQSxNQUFJLEtBQUssU0FBUyxNQUFNLG1CQUFtQjtBQUN6QyxRQUFJLGdCQUFnQixLQUFLO0FBQ3pCLFdBQU8sZ0JBQWdCLGNBQWMsZUFBZSxTQUFTO0FBQUEsRUFDL0Q7QUFFQSxTQUFPO0FBQ1Q7OztBQ1RBLG1CQUFtQixNQUFNO0FBQ3ZCLE1BQUksYUFBYSxVQUFVLElBQUksRUFBRTtBQUNqQyxTQUFPLGdCQUFnQixjQUFjLGdCQUFnQjtBQUN2RDtBQUVBLHVCQUF1QixNQUFNO0FBQzNCLE1BQUksYUFBYSxVQUFVLElBQUksRUFBRTtBQUNqQyxTQUFPLGdCQUFnQixjQUFjLGdCQUFnQjtBQUN2RDtBQUVBLHNCQUFzQixNQUFNO0FBRTFCLE1BQUksT0FBTyxlQUFlLGFBQWE7QUFDckMsV0FBTztBQUFBLEVBQ1Q7QUFFQSxNQUFJLGFBQWEsVUFBVSxJQUFJLEVBQUU7QUFDakMsU0FBTyxnQkFBZ0IsY0FBYyxnQkFBZ0I7QUFDdkQ7OztBQ2hCQSxxQkFBcUIsTUFBTTtBQUN6QixNQUFJLFFBQVEsS0FBSztBQUNqQixTQUFPLEtBQUssTUFBTSxRQUFRLEVBQUUsUUFBUSxTQUFVLE1BQU07QUFDbEQsUUFBSSxRQUFRLE1BQU0sT0FBTyxTQUFTLENBQUM7QUFDbkMsUUFBSSxhQUFhLE1BQU0sV0FBVyxTQUFTLENBQUM7QUFDNUMsUUFBSSxVQUFVLE1BQU0sU0FBUztBQUU3QixRQUFJLENBQUMsY0FBYyxPQUFPLEtBQUssQ0FBQyxZQUFZLE9BQU8sR0FBRztBQUNwRDtBQUFBLElBQ0Y7QUFLQSxXQUFPLE9BQU8sUUFBUSxPQUFPLEtBQUs7QUFDbEMsV0FBTyxLQUFLLFVBQVUsRUFBRSxRQUFRLFNBQVUsT0FBTTtBQUM5QyxVQUFJLFFBQVEsV0FBVztBQUV2QixVQUFJLFVBQVUsT0FBTztBQUNuQixnQkFBUSxnQkFBZ0IsS0FBSTtBQUFBLE1BQzlCLE9BQU87QUFDTCxnQkFBUSxhQUFhLE9BQU0sVUFBVSxPQUFPLEtBQUssS0FBSztBQUFBLE1BQ3hEO0FBQUEsSUFDRixDQUFDO0FBQUEsRUFDSCxDQUFDO0FBQ0g7QUFFQSxnQkFBZ0IsT0FBTztBQUNyQixNQUFJLFFBQVEsTUFBTTtBQUNsQixNQUFJLGdCQUFnQjtBQUFBLElBQ2xCLFFBQVE7QUFBQSxNQUNOLFVBQVUsTUFBTSxRQUFRO0FBQUEsTUFDeEIsTUFBTTtBQUFBLE1BQ04sS0FBSztBQUFBLE1BQ0wsUUFBUTtBQUFBLElBQ1Y7QUFBQSxJQUNBLE9BQU87QUFBQSxNQUNMLFVBQVU7QUFBQSxJQUNaO0FBQUEsSUFDQSxXQUFXLENBQUM7QUFBQSxFQUNkO0FBQ0EsU0FBTyxPQUFPLE1BQU0sU0FBUyxPQUFPLE9BQU8sY0FBYyxNQUFNO0FBQy9ELFFBQU0sU0FBUztBQUVmLE1BQUksTUFBTSxTQUFTLE9BQU87QUFDeEIsV0FBTyxPQUFPLE1BQU0sU0FBUyxNQUFNLE9BQU8sY0FBYyxLQUFLO0FBQUEsRUFDL0Q7QUFFQSxTQUFPLFdBQVk7QUFDakIsV0FBTyxLQUFLLE1BQU0sUUFBUSxFQUFFLFFBQVEsU0FBVSxNQUFNO0FBQ2xELFVBQUksVUFBVSxNQUFNLFNBQVM7QUFDN0IsVUFBSSxhQUFhLE1BQU0sV0FBVyxTQUFTLENBQUM7QUFDNUMsVUFBSSxrQkFBa0IsT0FBTyxLQUFLLE1BQU0sT0FBTyxlQUFlLElBQUksSUFBSSxNQUFNLE9BQU8sUUFBUSxjQUFjLEtBQUs7QUFFOUcsVUFBSSxRQUFRLGdCQUFnQixPQUFPLFNBQVUsUUFBTyxVQUFVO0FBQzVELGVBQU0sWUFBWTtBQUNsQixlQUFPO0FBQUEsTUFDVCxHQUFHLENBQUMsQ0FBQztBQUVMLFVBQUksQ0FBQyxjQUFjLE9BQU8sS0FBSyxDQUFDLFlBQVksT0FBTyxHQUFHO0FBQ3BEO0FBQUEsTUFDRjtBQUVBLGFBQU8sT0FBTyxRQUFRLE9BQU8sS0FBSztBQUNsQyxhQUFPLEtBQUssVUFBVSxFQUFFLFFBQVEsU0FBVSxXQUFXO0FBQ25ELGdCQUFRLGdCQUFnQixTQUFTO0FBQUEsTUFDbkMsQ0FBQztBQUFBLElBQ0gsQ0FBQztBQUFBLEVBQ0g7QUFDRjtBQUdBLElBQU8sc0JBQVE7QUFBQSxFQUNiLE1BQU07QUFBQSxFQUNOLFNBQVM7QUFBQSxFQUNULE9BQU87QUFBQSxFQUNQLElBQUk7QUFBQSxFQUNKO0FBQUEsRUFDQSxVQUFVLENBQUMsZUFBZTtBQUM1Qjs7O0FDbEZlLDBCQUEwQixXQUFXO0FBQ2xELFNBQU8sVUFBVSxNQUFNLEdBQUcsRUFBRTtBQUM5Qjs7O0FDSE8sSUFBSSxNQUFNLEtBQUs7QUFDZixJQUFJLE1BQU0sS0FBSztBQUNmLElBQUksUUFBUSxLQUFLOzs7QUNGVCx1QkFBdUI7QUFDcEMsTUFBSSxTQUFTLFVBQVU7QUFFdkIsTUFBSSxVQUFVLFFBQVEsT0FBTyxVQUFVLE1BQU0sUUFBUSxPQUFPLE1BQU0sR0FBRztBQUNuRSxXQUFPLE9BQU8sT0FBTyxJQUFJLFNBQVUsTUFBTTtBQUN2QyxhQUFPLEtBQUssUUFBUSxNQUFNLEtBQUs7QUFBQSxJQUNqQyxDQUFDLEVBQUUsS0FBSyxHQUFHO0FBQUEsRUFDYjtBQUVBLFNBQU8sVUFBVTtBQUNuQjs7O0FDVGUsNEJBQTRCO0FBQ3pDLFNBQU8sQ0FBQyxpQ0FBaUMsS0FBSyxZQUFZLENBQUM7QUFDN0Q7OztBQ0NlLCtCQUErQixTQUFTLGNBQWMsaUJBQWlCO0FBQ3BGLE1BQUksaUJBQWlCLFFBQVE7QUFDM0IsbUJBQWU7QUFBQSxFQUNqQjtBQUVBLE1BQUksb0JBQW9CLFFBQVE7QUFDOUIsc0JBQWtCO0FBQUEsRUFDcEI7QUFFQSxNQUFJLGFBQWEsUUFBUSxzQkFBc0I7QUFDL0MsTUFBSSxTQUFTO0FBQ2IsTUFBSSxTQUFTO0FBRWIsTUFBSSxnQkFBZ0IsY0FBYyxPQUFPLEdBQUc7QUFDMUMsYUFBUyxRQUFRLGNBQWMsSUFBSSxNQUFNLFdBQVcsS0FBSyxJQUFJLFFBQVEsZUFBZSxJQUFJO0FBQ3hGLGFBQVMsUUFBUSxlQUFlLElBQUksTUFBTSxXQUFXLE1BQU0sSUFBSSxRQUFRLGdCQUFnQixJQUFJO0FBQUEsRUFDN0Y7QUFFQSxNQUFJLE9BQU8sVUFBVSxPQUFPLElBQUksVUFBVSxPQUFPLElBQUksUUFDakQsaUJBQWlCLEtBQUs7QUFFMUIsTUFBSSxtQkFBbUIsQ0FBQyxpQkFBaUIsS0FBSztBQUM5QyxNQUFJLElBQUssWUFBVyxPQUFRLHFCQUFvQixpQkFBaUIsZUFBZSxhQUFhLE1BQU07QUFDbkcsTUFBSSxJQUFLLFlBQVcsTUFBTyxxQkFBb0IsaUJBQWlCLGVBQWUsWUFBWSxNQUFNO0FBQ2pHLE1BQUksUUFBUSxXQUFXLFFBQVE7QUFDL0IsTUFBSSxTQUFTLFdBQVcsU0FBUztBQUNqQyxTQUFPO0FBQUEsSUFDTDtBQUFBLElBQ0E7QUFBQSxJQUNBLEtBQUs7QUFBQSxJQUNMLE9BQU8sSUFBSTtBQUFBLElBQ1gsUUFBUSxJQUFJO0FBQUEsSUFDWixNQUFNO0FBQUEsSUFDTjtBQUFBLElBQ0E7QUFBQSxFQUNGO0FBQ0Y7OztBQ3JDZSx1QkFBdUIsU0FBUztBQUM3QyxNQUFJLGFBQWEsc0JBQXNCLE9BQU87QUFHOUMsTUFBSSxRQUFRLFFBQVE7QUFDcEIsTUFBSSxTQUFTLFFBQVE7QUFFckIsTUFBSSxLQUFLLElBQUksV0FBVyxRQUFRLEtBQUssS0FBSyxHQUFHO0FBQzNDLFlBQVEsV0FBVztBQUFBLEVBQ3JCO0FBRUEsTUFBSSxLQUFLLElBQUksV0FBVyxTQUFTLE1BQU0sS0FBSyxHQUFHO0FBQzdDLGFBQVMsV0FBVztBQUFBLEVBQ3RCO0FBRUEsU0FBTztBQUFBLElBQ0wsR0FBRyxRQUFRO0FBQUEsSUFDWCxHQUFHLFFBQVE7QUFBQSxJQUNYO0FBQUEsSUFDQTtBQUFBLEVBQ0Y7QUFDRjs7O0FDdkJlLGtCQUFrQixRQUFRLE9BQU87QUFDOUMsTUFBSSxXQUFXLE1BQU0sZUFBZSxNQUFNLFlBQVk7QUFFdEQsTUFBSSxPQUFPLFNBQVMsS0FBSyxHQUFHO0FBQzFCLFdBQU87QUFBQSxFQUNULFdBQ1MsWUFBWSxhQUFhLFFBQVEsR0FBRztBQUN6QyxRQUFJLE9BQU87QUFFWCxPQUFHO0FBQ0QsVUFBSSxRQUFRLE9BQU8sV0FBVyxJQUFJLEdBQUc7QUFDbkMsZUFBTztBQUFBLE1BQ1Q7QUFHQSxhQUFPLEtBQUssY0FBYyxLQUFLO0FBQUEsSUFDakMsU0FBUztBQUFBLEVBQ1g7QUFHRixTQUFPO0FBQ1Q7OztBQ3JCZSwwQkFBMEIsU0FBUztBQUNoRCxTQUFPLFVBQVUsT0FBTyxFQUFFLGlCQUFpQixPQUFPO0FBQ3BEOzs7QUNGZSx3QkFBd0IsU0FBUztBQUM5QyxTQUFPLENBQUMsU0FBUyxNQUFNLElBQUksRUFBRSxRQUFRLFlBQVksT0FBTyxDQUFDLEtBQUs7QUFDaEU7OztBQ0ZlLDRCQUE0QixTQUFTO0FBRWxELFNBQVMsWUFBVSxPQUFPLElBQUksUUFBUSxnQkFDdEMsUUFBUSxhQUFhLE9BQU8sVUFBVTtBQUN4Qzs7O0FDRmUsdUJBQXVCLFNBQVM7QUFDN0MsTUFBSSxZQUFZLE9BQU8sTUFBTSxRQUFRO0FBQ25DLFdBQU87QUFBQSxFQUNUO0FBRUEsU0FHRSxRQUFRLGdCQUNSLFFBQVEsY0FDUixjQUFhLE9BQU8sSUFBSSxRQUFRLE9BQU8sU0FFdkMsbUJBQW1CLE9BQU87QUFHOUI7OztBQ1ZBLDZCQUE2QixTQUFTO0FBQ3BDLE1BQUksQ0FBQyxjQUFjLE9BQU8sS0FDMUIsaUJBQWlCLE9BQU8sRUFBRSxhQUFhLFNBQVM7QUFDOUMsV0FBTztBQUFBLEVBQ1Q7QUFFQSxTQUFPLFFBQVE7QUFDakI7QUFJQSw0QkFBNEIsU0FBUztBQUNuQyxNQUFJLFlBQVksV0FBVyxLQUFLLFlBQVksQ0FBQztBQUM3QyxNQUFJLE9BQU8sV0FBVyxLQUFLLFlBQVksQ0FBQztBQUV4QyxNQUFJLFFBQVEsY0FBYyxPQUFPLEdBQUc7QUFFbEMsUUFBSSxhQUFhLGlCQUFpQixPQUFPO0FBRXpDLFFBQUksV0FBVyxhQUFhLFNBQVM7QUFDbkMsYUFBTztBQUFBLElBQ1Q7QUFBQSxFQUNGO0FBRUEsTUFBSSxjQUFjLGNBQWMsT0FBTztBQUV2QyxNQUFJLGFBQWEsV0FBVyxHQUFHO0FBQzdCLGtCQUFjLFlBQVk7QUFBQSxFQUM1QjtBQUVBLFNBQU8sY0FBYyxXQUFXLEtBQUssQ0FBQyxRQUFRLE1BQU0sRUFBRSxRQUFRLFlBQVksV0FBVyxDQUFDLElBQUksR0FBRztBQUMzRixRQUFJLE1BQU0saUJBQWlCLFdBQVc7QUFJdEMsUUFBSSxJQUFJLGNBQWMsVUFBVSxJQUFJLGdCQUFnQixVQUFVLElBQUksWUFBWSxXQUFXLENBQUMsYUFBYSxhQUFhLEVBQUUsUUFBUSxJQUFJLFVBQVUsTUFBTSxNQUFNLGFBQWEsSUFBSSxlQUFlLFlBQVksYUFBYSxJQUFJLFVBQVUsSUFBSSxXQUFXLFFBQVE7QUFDcFAsYUFBTztBQUFBLElBQ1QsT0FBTztBQUNMLG9CQUFjLFlBQVk7QUFBQSxJQUM1QjtBQUFBLEVBQ0Y7QUFFQSxTQUFPO0FBQ1Q7QUFJZSx5QkFBeUIsU0FBUztBQUMvQyxNQUFJLFVBQVMsVUFBVSxPQUFPO0FBQzlCLE1BQUksZUFBZSxvQkFBb0IsT0FBTztBQUU5QyxTQUFPLGdCQUFnQixlQUFlLFlBQVksS0FBSyxpQkFBaUIsWUFBWSxFQUFFLGFBQWEsVUFBVTtBQUMzRyxtQkFBZSxvQkFBb0IsWUFBWTtBQUFBLEVBQ2pEO0FBRUEsTUFBSSxnQkFBaUIsYUFBWSxZQUFZLE1BQU0sVUFBVSxZQUFZLFlBQVksTUFBTSxVQUFVLGlCQUFpQixZQUFZLEVBQUUsYUFBYSxXQUFXO0FBQzFKLFdBQU87QUFBQSxFQUNUO0FBRUEsU0FBTyxnQkFBZ0IsbUJBQW1CLE9BQU8sS0FBSztBQUN4RDs7O0FDcEVlLGtDQUFrQyxXQUFXO0FBQzFELFNBQU8sQ0FBQyxPQUFPLFFBQVEsRUFBRSxRQUFRLFNBQVMsS0FBSyxJQUFJLE1BQU07QUFDM0Q7OztBQ0RPLGdCQUFnQixNQUFLLE9BQU8sTUFBSztBQUN0QyxTQUFPLElBQVEsTUFBSyxJQUFRLE9BQU8sSUFBRyxDQUFDO0FBQ3pDO0FBQ08sd0JBQXdCLE1BQUssT0FBTyxNQUFLO0FBQzlDLE1BQUksSUFBSSxPQUFPLE1BQUssT0FBTyxJQUFHO0FBQzlCLFNBQU8sSUFBSSxPQUFNLE9BQU07QUFDekI7OztBQ1BlLDhCQUE4QjtBQUMzQyxTQUFPO0FBQUEsSUFDTCxLQUFLO0FBQUEsSUFDTCxPQUFPO0FBQUEsSUFDUCxRQUFRO0FBQUEsSUFDUixNQUFNO0FBQUEsRUFDUjtBQUNGOzs7QUNOZSw0QkFBNEIsZUFBZTtBQUN4RCxTQUFPLE9BQU8sT0FBTyxDQUFDLEdBQUcsbUJBQW1CLEdBQUcsYUFBYTtBQUM5RDs7O0FDSGUseUJBQXlCLE9BQU8sTUFBTTtBQUNuRCxTQUFPLEtBQUssT0FBTyxTQUFVLFNBQVMsS0FBSztBQUN6QyxZQUFRLE9BQU87QUFDZixXQUFPO0FBQUEsRUFDVCxHQUFHLENBQUMsQ0FBQztBQUNQOzs7QUNLQSxJQUFJLGtCQUFrQiwwQkFBeUIsU0FBUyxPQUFPO0FBQzdELFlBQVUsT0FBTyxZQUFZLGFBQWEsUUFBUSxPQUFPLE9BQU8sQ0FBQyxHQUFHLE1BQU0sT0FBTztBQUFBLElBQy9FLFdBQVcsTUFBTTtBQUFBLEVBQ25CLENBQUMsQ0FBQyxJQUFJO0FBQ04sU0FBTyxtQkFBbUIsT0FBTyxZQUFZLFdBQVcsVUFBVSxnQkFBZ0IsU0FBUyxjQUFjLENBQUM7QUFDNUc7QUFFQSxlQUFlLE1BQU07QUFDbkIsTUFBSTtBQUVKLE1BQUksUUFBUSxLQUFLLE9BQ2IsT0FBTyxLQUFLLE1BQ1osVUFBVSxLQUFLO0FBQ25CLE1BQUksZUFBZSxNQUFNLFNBQVM7QUFDbEMsTUFBSSxpQkFBZ0IsTUFBTSxjQUFjO0FBQ3hDLE1BQUksZ0JBQWdCLGlCQUFpQixNQUFNLFNBQVM7QUFDcEQsTUFBSSxPQUFPLHlCQUF5QixhQUFhO0FBQ2pELE1BQUksYUFBYSxDQUFDLE1BQU0sS0FBSyxFQUFFLFFBQVEsYUFBYSxLQUFLO0FBQ3pELE1BQUksTUFBTSxhQUFhLFdBQVc7QUFFbEMsTUFBSSxDQUFDLGdCQUFnQixDQUFDLGdCQUFlO0FBQ25DO0FBQUEsRUFDRjtBQUVBLE1BQUksZ0JBQWdCLGdCQUFnQixRQUFRLFNBQVMsS0FBSztBQUMxRCxNQUFJLFlBQVksY0FBYyxZQUFZO0FBQzFDLE1BQUksVUFBVSxTQUFTLE1BQU0sTUFBTTtBQUNuQyxNQUFJLFVBQVUsU0FBUyxNQUFNLFNBQVM7QUFDdEMsTUFBSSxVQUFVLE1BQU0sTUFBTSxVQUFVLE9BQU8sTUFBTSxNQUFNLFVBQVUsUUFBUSxlQUFjLFFBQVEsTUFBTSxNQUFNLE9BQU87QUFDbEgsTUFBSSxZQUFZLGVBQWMsUUFBUSxNQUFNLE1BQU0sVUFBVTtBQUM1RCxNQUFJLG9CQUFvQixnQkFBZ0IsWUFBWTtBQUNwRCxNQUFJLGFBQWEsb0JBQW9CLFNBQVMsTUFBTSxrQkFBa0IsZ0JBQWdCLElBQUksa0JBQWtCLGVBQWUsSUFBSTtBQUMvSCxNQUFJLG9CQUFvQixVQUFVLElBQUksWUFBWTtBQUdsRCxNQUFJLE9BQU0sY0FBYztBQUN4QixNQUFJLE9BQU0sYUFBYSxVQUFVLE9BQU8sY0FBYztBQUN0RCxNQUFJLFNBQVMsYUFBYSxJQUFJLFVBQVUsT0FBTyxJQUFJO0FBQ25ELE1BQUksVUFBUyxPQUFPLE1BQUssUUFBUSxJQUFHO0FBRXBDLE1BQUksV0FBVztBQUNmLFFBQU0sY0FBYyxRQUFTLHlCQUF3QixDQUFDLEdBQUcsc0JBQXNCLFlBQVksU0FBUSxzQkFBc0IsZUFBZSxVQUFTLFFBQVE7QUFDM0o7QUFFQSxpQkFBZ0IsT0FBTztBQUNyQixNQUFJLFFBQVEsTUFBTSxPQUNkLFVBQVUsTUFBTTtBQUNwQixNQUFJLG1CQUFtQixRQUFRLFNBQzNCLGVBQWUscUJBQXFCLFNBQVMsd0JBQXdCO0FBRXpFLE1BQUksZ0JBQWdCLE1BQU07QUFDeEI7QUFBQSxFQUNGO0FBR0EsTUFBSSxPQUFPLGlCQUFpQixVQUFVO0FBQ3BDLG1CQUFlLE1BQU0sU0FBUyxPQUFPLGNBQWMsWUFBWTtBQUUvRCxRQUFJLENBQUMsY0FBYztBQUNqQjtBQUFBLElBQ0Y7QUFBQSxFQUNGO0FBRUEsTUFBSSxDQUFDLFNBQVMsTUFBTSxTQUFTLFFBQVEsWUFBWSxHQUFHO0FBQ2xEO0FBQUEsRUFDRjtBQUVBLFFBQU0sU0FBUyxRQUFRO0FBQ3pCO0FBR0EsSUFBTyxnQkFBUTtBQUFBLEVBQ2IsTUFBTTtBQUFBLEVBQ04sU0FBUztBQUFBLEVBQ1QsT0FBTztBQUFBLEVBQ1AsSUFBSTtBQUFBLEVBQ0osUUFBUTtBQUFBLEVBQ1IsVUFBVSxDQUFDLGVBQWU7QUFBQSxFQUMxQixrQkFBa0IsQ0FBQyxpQkFBaUI7QUFDdEM7OztBQ3pGZSxzQkFBc0IsV0FBVztBQUM5QyxTQUFPLFVBQVUsTUFBTSxHQUFHLEVBQUU7QUFDOUI7OztBQ09BLElBQUksYUFBYTtBQUFBLEVBQ2YsS0FBSztBQUFBLEVBQ0wsT0FBTztBQUFBLEVBQ1AsUUFBUTtBQUFBLEVBQ1IsTUFBTTtBQUNSO0FBSUEsMkJBQTJCLE1BQU0sS0FBSztBQUNwQyxNQUFJLElBQUksS0FBSyxHQUNULElBQUksS0FBSztBQUNiLE1BQUksTUFBTSxJQUFJLG9CQUFvQjtBQUNsQyxTQUFPO0FBQUEsSUFDTCxHQUFHLE1BQU0sSUFBSSxHQUFHLElBQUksT0FBTztBQUFBLElBQzNCLEdBQUcsTUFBTSxJQUFJLEdBQUcsSUFBSSxPQUFPO0FBQUEsRUFDN0I7QUFDRjtBQUVPLHFCQUFxQixPQUFPO0FBQ2pDLE1BQUk7QUFFSixNQUFJLFVBQVMsTUFBTSxRQUNmLGFBQWEsTUFBTSxZQUNuQixZQUFZLE1BQU0sV0FDbEIsWUFBWSxNQUFNLFdBQ2xCLFVBQVUsTUFBTSxTQUNoQixXQUFXLE1BQU0sVUFDakIsa0JBQWtCLE1BQU0saUJBQ3hCLFdBQVcsTUFBTSxVQUNqQixlQUFlLE1BQU0sY0FDckIsVUFBVSxNQUFNO0FBQ3BCLE1BQUksYUFBYSxRQUFRLEdBQ3JCLElBQUksZUFBZSxTQUFTLElBQUksWUFDaEMsYUFBYSxRQUFRLEdBQ3JCLElBQUksZUFBZSxTQUFTLElBQUk7QUFFcEMsTUFBSSxRQUFRLE9BQU8saUJBQWlCLGFBQWEsYUFBYTtBQUFBLElBQzVEO0FBQUEsSUFDQTtBQUFBLEVBQ0YsQ0FBQyxJQUFJO0FBQUEsSUFDSDtBQUFBLElBQ0E7QUFBQSxFQUNGO0FBRUEsTUFBSSxNQUFNO0FBQ1YsTUFBSSxNQUFNO0FBQ1YsTUFBSSxPQUFPLFFBQVEsZUFBZSxHQUFHO0FBQ3JDLE1BQUksT0FBTyxRQUFRLGVBQWUsR0FBRztBQUNyQyxNQUFJLFFBQVE7QUFDWixNQUFJLFFBQVE7QUFDWixNQUFJLE1BQU07QUFFVixNQUFJLFVBQVU7QUFDWixRQUFJLGVBQWUsZ0JBQWdCLE9BQU07QUFDekMsUUFBSSxhQUFhO0FBQ2pCLFFBQUksWUFBWTtBQUVoQixRQUFJLGlCQUFpQixVQUFVLE9BQU0sR0FBRztBQUN0QyxxQkFBZSxtQkFBbUIsT0FBTTtBQUV4QyxVQUFJLGlCQUFpQixZQUFZLEVBQUUsYUFBYSxZQUFZLGFBQWEsWUFBWTtBQUNuRixxQkFBYTtBQUNiLG9CQUFZO0FBQUEsTUFDZDtBQUFBLElBQ0Y7QUFHQSxtQkFBZTtBQUVmLFFBQUksY0FBYyxPQUFRLGVBQWMsUUFBUSxjQUFjLFVBQVUsY0FBYyxLQUFLO0FBQ3pGLGNBQVE7QUFDUixVQUFJLFVBQVUsV0FBVyxpQkFBaUIsT0FBTyxJQUFJLGlCQUFpQixJQUFJLGVBQWUsU0FDekYsYUFBYTtBQUNiLFdBQUssVUFBVSxXQUFXO0FBQzFCLFdBQUssa0JBQWtCLElBQUk7QUFBQSxJQUM3QjtBQUVBLFFBQUksY0FBYyxRQUFTLGVBQWMsT0FBTyxjQUFjLFdBQVcsY0FBYyxLQUFLO0FBQzFGLGNBQVE7QUFDUixVQUFJLFVBQVUsV0FBVyxpQkFBaUIsT0FBTyxJQUFJLGlCQUFpQixJQUFJLGVBQWUsUUFDekYsYUFBYTtBQUNiLFdBQUssVUFBVSxXQUFXO0FBQzFCLFdBQUssa0JBQWtCLElBQUk7QUFBQSxJQUM3QjtBQUFBLEVBQ0Y7QUFFQSxNQUFJLGVBQWUsT0FBTyxPQUFPO0FBQUEsSUFDL0I7QUFBQSxFQUNGLEdBQUcsWUFBWSxVQUFVO0FBRXpCLE1BQUksUUFBUSxpQkFBaUIsT0FBTyxrQkFBa0I7QUFBQSxJQUNwRDtBQUFBLElBQ0E7QUFBQSxFQUNGLEdBQUcsVUFBVSxPQUFNLENBQUMsSUFBSTtBQUFBLElBQ3RCO0FBQUEsSUFDQTtBQUFBLEVBQ0Y7QUFFQSxNQUFJLE1BQU07QUFDVixNQUFJLE1BQU07QUFFVixNQUFJLGlCQUFpQjtBQUNuQixRQUFJO0FBRUosV0FBTyxPQUFPLE9BQU8sQ0FBQyxHQUFHLGNBQWUsa0JBQWlCLENBQUMsR0FBRyxlQUFlLFNBQVMsT0FBTyxNQUFNLElBQUksZUFBZSxTQUFTLE9BQU8sTUFBTSxJQUFJLGVBQWUsWUFBYSxLQUFJLG9CQUFvQixNQUFNLElBQUksZUFBZSxJQUFJLFNBQVMsSUFBSSxRQUFRLGlCQUFpQixJQUFJLFNBQVMsSUFBSSxVQUFVLGVBQWU7QUFBQSxFQUNsVDtBQUVBLFNBQU8sT0FBTyxPQUFPLENBQUMsR0FBRyxjQUFlLG1CQUFrQixDQUFDLEdBQUcsZ0JBQWdCLFNBQVMsT0FBTyxJQUFJLE9BQU8sSUFBSSxnQkFBZ0IsU0FBUyxPQUFPLElBQUksT0FBTyxJQUFJLGdCQUFnQixZQUFZLElBQUksZ0JBQWdCO0FBQzlNO0FBRUEsdUJBQXVCLE9BQU87QUFDNUIsTUFBSSxRQUFRLE1BQU0sT0FDZCxVQUFVLE1BQU07QUFDcEIsTUFBSSx3QkFBd0IsUUFBUSxpQkFDaEMsa0JBQWtCLDBCQUEwQixTQUFTLE9BQU8sdUJBQzVELG9CQUFvQixRQUFRLFVBQzVCLFdBQVcsc0JBQXNCLFNBQVMsT0FBTyxtQkFDakQsd0JBQXdCLFFBQVEsY0FDaEMsZUFBZSwwQkFBMEIsU0FBUyxPQUFPO0FBQzdELE1BQUksZUFBZTtBQUFBLElBQ2pCLFdBQVcsaUJBQWlCLE1BQU0sU0FBUztBQUFBLElBQzNDLFdBQVcsYUFBYSxNQUFNLFNBQVM7QUFBQSxJQUN2QyxRQUFRLE1BQU0sU0FBUztBQUFBLElBQ3ZCLFlBQVksTUFBTSxNQUFNO0FBQUEsSUFDeEI7QUFBQSxJQUNBLFNBQVMsTUFBTSxRQUFRLGFBQWE7QUFBQSxFQUN0QztBQUVBLE1BQUksTUFBTSxjQUFjLGlCQUFpQixNQUFNO0FBQzdDLFVBQU0sT0FBTyxTQUFTLE9BQU8sT0FBTyxDQUFDLEdBQUcsTUFBTSxPQUFPLFFBQVEsWUFBWSxPQUFPLE9BQU8sQ0FBQyxHQUFHLGNBQWM7QUFBQSxNQUN2RyxTQUFTLE1BQU0sY0FBYztBQUFBLE1BQzdCLFVBQVUsTUFBTSxRQUFRO0FBQUEsTUFDeEI7QUFBQSxNQUNBO0FBQUEsSUFDRixDQUFDLENBQUMsQ0FBQztBQUFBLEVBQ0w7QUFFQSxNQUFJLE1BQU0sY0FBYyxTQUFTLE1BQU07QUFDckMsVUFBTSxPQUFPLFFBQVEsT0FBTyxPQUFPLENBQUMsR0FBRyxNQUFNLE9BQU8sT0FBTyxZQUFZLE9BQU8sT0FBTyxDQUFDLEdBQUcsY0FBYztBQUFBLE1BQ3JHLFNBQVMsTUFBTSxjQUFjO0FBQUEsTUFDN0IsVUFBVTtBQUFBLE1BQ1YsVUFBVTtBQUFBLE1BQ1Y7QUFBQSxJQUNGLENBQUMsQ0FBQyxDQUFDO0FBQUEsRUFDTDtBQUVBLFFBQU0sV0FBVyxTQUFTLE9BQU8sT0FBTyxDQUFDLEdBQUcsTUFBTSxXQUFXLFFBQVE7QUFBQSxJQUNuRSx5QkFBeUIsTUFBTTtBQUFBLEVBQ2pDLENBQUM7QUFDSDtBQUdBLElBQU8sd0JBQVE7QUFBQSxFQUNiLE1BQU07QUFBQSxFQUNOLFNBQVM7QUFBQSxFQUNULE9BQU87QUFBQSxFQUNQLElBQUk7QUFBQSxFQUNKLE1BQU0sQ0FBQztBQUNUOzs7QUN0S0EsSUFBSSxVQUFVO0FBQUEsRUFDWixTQUFTO0FBQ1g7QUFFQSxpQkFBZ0IsTUFBTTtBQUNwQixNQUFJLFFBQVEsS0FBSyxPQUNiLFdBQVcsS0FBSyxVQUNoQixVQUFVLEtBQUs7QUFDbkIsTUFBSSxrQkFBa0IsUUFBUSxRQUMxQixTQUFTLG9CQUFvQixTQUFTLE9BQU8saUJBQzdDLGtCQUFrQixRQUFRLFFBQzFCLFNBQVMsb0JBQW9CLFNBQVMsT0FBTztBQUNqRCxNQUFJLFVBQVMsVUFBVSxNQUFNLFNBQVMsTUFBTTtBQUM1QyxNQUFJLGdCQUFnQixDQUFDLEVBQUUsT0FBTyxNQUFNLGNBQWMsV0FBVyxNQUFNLGNBQWMsTUFBTTtBQUV2RixNQUFJLFFBQVE7QUFDVixrQkFBYyxRQUFRLFNBQVUsY0FBYztBQUM1QyxtQkFBYSxpQkFBaUIsVUFBVSxTQUFTLFFBQVEsT0FBTztBQUFBLElBQ2xFLENBQUM7QUFBQSxFQUNIO0FBRUEsTUFBSSxRQUFRO0FBQ1YsWUFBTyxpQkFBaUIsVUFBVSxTQUFTLFFBQVEsT0FBTztBQUFBLEVBQzVEO0FBRUEsU0FBTyxXQUFZO0FBQ2pCLFFBQUksUUFBUTtBQUNWLG9CQUFjLFFBQVEsU0FBVSxjQUFjO0FBQzVDLHFCQUFhLG9CQUFvQixVQUFVLFNBQVMsUUFBUSxPQUFPO0FBQUEsTUFDckUsQ0FBQztBQUFBLElBQ0g7QUFFQSxRQUFJLFFBQVE7QUFDVixjQUFPLG9CQUFvQixVQUFVLFNBQVMsUUFBUSxPQUFPO0FBQUEsSUFDL0Q7QUFBQSxFQUNGO0FBQ0Y7QUFHQSxJQUFPLHlCQUFRO0FBQUEsRUFDYixNQUFNO0FBQUEsRUFDTixTQUFTO0FBQUEsRUFDVCxPQUFPO0FBQUEsRUFDUCxJQUFJLGNBQWM7QUFBQSxFQUFDO0FBQUEsRUFDbkIsUUFBUTtBQUFBLEVBQ1IsTUFBTSxDQUFDO0FBQ1Q7OztBQ2hEQSxJQUFJLE9BQU87QUFBQSxFQUNULE1BQU07QUFBQSxFQUNOLE9BQU87QUFBQSxFQUNQLFFBQVE7QUFBQSxFQUNSLEtBQUs7QUFDUDtBQUNlLDhCQUE4QixXQUFXO0FBQ3RELFNBQU8sVUFBVSxRQUFRLDBCQUEwQixTQUFVLFNBQVM7QUFDcEUsV0FBTyxLQUFLO0FBQUEsRUFDZCxDQUFDO0FBQ0g7OztBQ1ZBLElBQUksUUFBTztBQUFBLEVBQ1QsT0FBTztBQUFBLEVBQ1AsS0FBSztBQUNQO0FBQ2UsdUNBQXVDLFdBQVc7QUFDL0QsU0FBTyxVQUFVLFFBQVEsY0FBYyxTQUFVLFNBQVM7QUFDeEQsV0FBTyxNQUFLO0FBQUEsRUFDZCxDQUFDO0FBQ0g7OztBQ1BlLHlCQUF5QixNQUFNO0FBQzVDLE1BQUksTUFBTSxVQUFVLElBQUk7QUFDeEIsTUFBSSxhQUFhLElBQUk7QUFDckIsTUFBSSxZQUFZLElBQUk7QUFDcEIsU0FBTztBQUFBLElBQ0w7QUFBQSxJQUNBO0FBQUEsRUFDRjtBQUNGOzs7QUNOZSw2QkFBNkIsU0FBUztBQVFuRCxTQUFPLHNCQUFzQixtQkFBbUIsT0FBTyxDQUFDLEVBQUUsT0FBTyxnQkFBZ0IsT0FBTyxFQUFFO0FBQzVGOzs7QUNSZSx5QkFBeUIsU0FBUyxVQUFVO0FBQ3pELE1BQUksTUFBTSxVQUFVLE9BQU87QUFDM0IsTUFBSSxPQUFPLG1CQUFtQixPQUFPO0FBQ3JDLE1BQUksaUJBQWlCLElBQUk7QUFDekIsTUFBSSxRQUFRLEtBQUs7QUFDakIsTUFBSSxTQUFTLEtBQUs7QUFDbEIsTUFBSSxJQUFJO0FBQ1IsTUFBSSxJQUFJO0FBRVIsTUFBSSxnQkFBZ0I7QUFDbEIsWUFBUSxlQUFlO0FBQ3ZCLGFBQVMsZUFBZTtBQUN4QixRQUFJLGlCQUFpQixpQkFBaUI7QUFFdEMsUUFBSSxrQkFBa0IsQ0FBQyxrQkFBa0IsYUFBYSxTQUFTO0FBQzdELFVBQUksZUFBZTtBQUNuQixVQUFJLGVBQWU7QUFBQSxJQUNyQjtBQUFBLEVBQ0Y7QUFFQSxTQUFPO0FBQUEsSUFDTDtBQUFBLElBQ0E7QUFBQSxJQUNBLEdBQUcsSUFBSSxvQkFBb0IsT0FBTztBQUFBLElBQ2xDO0FBQUEsRUFDRjtBQUNGOzs7QUN2QmUseUJBQXlCLFNBQVM7QUFDL0MsTUFBSTtBQUVKLE1BQUksT0FBTyxtQkFBbUIsT0FBTztBQUNyQyxNQUFJLFlBQVksZ0JBQWdCLE9BQU87QUFDdkMsTUFBSSxPQUFRLHlCQUF3QixRQUFRLGtCQUFrQixPQUFPLFNBQVMsc0JBQXNCO0FBQ3BHLE1BQUksUUFBUSxJQUFJLEtBQUssYUFBYSxLQUFLLGFBQWEsT0FBTyxLQUFLLGNBQWMsR0FBRyxPQUFPLEtBQUssY0FBYyxDQUFDO0FBQzVHLE1BQUksU0FBUyxJQUFJLEtBQUssY0FBYyxLQUFLLGNBQWMsT0FBTyxLQUFLLGVBQWUsR0FBRyxPQUFPLEtBQUssZUFBZSxDQUFDO0FBQ2pILE1BQUksSUFBSSxDQUFDLFVBQVUsYUFBYSxvQkFBb0IsT0FBTztBQUMzRCxNQUFJLElBQUksQ0FBQyxVQUFVO0FBRW5CLE1BQUksaUJBQWlCLFFBQVEsSUFBSSxFQUFFLGNBQWMsT0FBTztBQUN0RCxTQUFLLElBQUksS0FBSyxhQUFhLE9BQU8sS0FBSyxjQUFjLENBQUMsSUFBSTtBQUFBLEVBQzVEO0FBRUEsU0FBTztBQUFBLElBQ0w7QUFBQSxJQUNBO0FBQUEsSUFDQTtBQUFBLElBQ0E7QUFBQSxFQUNGO0FBQ0Y7OztBQzNCZSx3QkFBd0IsU0FBUztBQUU5QyxNQUFJLG9CQUFvQixpQkFBaUIsT0FBTyxHQUM1QyxXQUFXLGtCQUFrQixVQUM3QixZQUFZLGtCQUFrQixXQUM5QixZQUFZLGtCQUFrQjtBQUVsQyxTQUFPLDZCQUE2QixLQUFLLFdBQVcsWUFBWSxTQUFTO0FBQzNFOzs7QUNMZSx5QkFBeUIsTUFBTTtBQUM1QyxNQUFJLENBQUMsUUFBUSxRQUFRLFdBQVcsRUFBRSxRQUFRLFlBQVksSUFBSSxDQUFDLEtBQUssR0FBRztBQUVqRSxXQUFPLEtBQUssY0FBYztBQUFBLEVBQzVCO0FBRUEsTUFBSSxjQUFjLElBQUksS0FBSyxlQUFlLElBQUksR0FBRztBQUMvQyxXQUFPO0FBQUEsRUFDVDtBQUVBLFNBQU8sZ0JBQWdCLGNBQWMsSUFBSSxDQUFDO0FBQzVDOzs7QUNKZSwyQkFBMkIsU0FBUyxNQUFNO0FBQ3ZELE1BQUk7QUFFSixNQUFJLFNBQVMsUUFBUTtBQUNuQixXQUFPLENBQUM7QUFBQSxFQUNWO0FBRUEsTUFBSSxlQUFlLGdCQUFnQixPQUFPO0FBQzFDLE1BQUksU0FBUyxpQkFBbUIsMEJBQXdCLFFBQVEsa0JBQWtCLE9BQU8sU0FBUyxzQkFBc0I7QUFDeEgsTUFBSSxNQUFNLFVBQVUsWUFBWTtBQUNoQyxNQUFJLFNBQVMsU0FBUyxDQUFDLEdBQUcsRUFBRSxPQUFPLElBQUksa0JBQWtCLENBQUMsR0FBRyxlQUFlLFlBQVksSUFBSSxlQUFlLENBQUMsQ0FBQyxJQUFJO0FBQ2pILE1BQUksY0FBYyxLQUFLLE9BQU8sTUFBTTtBQUNwQyxTQUFPLFNBQVMsY0FDaEIsWUFBWSxPQUFPLGtCQUFrQixjQUFjLE1BQU0sQ0FBQyxDQUFDO0FBQzdEOzs7QUN6QmUsMEJBQTBCLE1BQU07QUFDN0MsU0FBTyxPQUFPLE9BQU8sQ0FBQyxHQUFHLE1BQU07QUFBQSxJQUM3QixNQUFNLEtBQUs7QUFBQSxJQUNYLEtBQUssS0FBSztBQUFBLElBQ1YsT0FBTyxLQUFLLElBQUksS0FBSztBQUFBLElBQ3JCLFFBQVEsS0FBSyxJQUFJLEtBQUs7QUFBQSxFQUN4QixDQUFDO0FBQ0g7OztBQ1FBLG9DQUFvQyxTQUFTLFVBQVU7QUFDckQsTUFBSSxPQUFPLHNCQUFzQixTQUFTLE9BQU8sYUFBYSxPQUFPO0FBQ3JFLE9BQUssTUFBTSxLQUFLLE1BQU0sUUFBUTtBQUM5QixPQUFLLE9BQU8sS0FBSyxPQUFPLFFBQVE7QUFDaEMsT0FBSyxTQUFTLEtBQUssTUFBTSxRQUFRO0FBQ2pDLE9BQUssUUFBUSxLQUFLLE9BQU8sUUFBUTtBQUNqQyxPQUFLLFFBQVEsUUFBUTtBQUNyQixPQUFLLFNBQVMsUUFBUTtBQUN0QixPQUFLLElBQUksS0FBSztBQUNkLE9BQUssSUFBSSxLQUFLO0FBQ2QsU0FBTztBQUNUO0FBRUEsb0NBQW9DLFNBQVMsZ0JBQWdCLFVBQVU7QUFDckUsU0FBTyxtQkFBbUIsV0FBVyxpQkFBaUIsZ0JBQWdCLFNBQVMsUUFBUSxDQUFDLElBQUksVUFBVSxjQUFjLElBQUksMkJBQTJCLGdCQUFnQixRQUFRLElBQUksaUJBQWlCLGdCQUFnQixtQkFBbUIsT0FBTyxDQUFDLENBQUM7QUFDOU87QUFLQSw0QkFBNEIsU0FBUztBQUNuQyxNQUFJLG1CQUFrQixrQkFBa0IsY0FBYyxPQUFPLENBQUM7QUFDOUQsTUFBSSxvQkFBb0IsQ0FBQyxZQUFZLE9BQU8sRUFBRSxRQUFRLGlCQUFpQixPQUFPLEVBQUUsUUFBUSxLQUFLO0FBQzdGLE1BQUksaUJBQWlCLHFCQUFxQixjQUFjLE9BQU8sSUFBSSxnQkFBZ0IsT0FBTyxJQUFJO0FBRTlGLE1BQUksQ0FBQyxVQUFVLGNBQWMsR0FBRztBQUM5QixXQUFPLENBQUM7QUFBQSxFQUNWO0FBR0EsU0FBTyxpQkFBZ0IsT0FBTyxTQUFVLGdCQUFnQjtBQUN0RCxXQUFPLFVBQVUsY0FBYyxLQUFLLFNBQVMsZ0JBQWdCLGNBQWMsS0FBSyxZQUFZLGNBQWMsTUFBTTtBQUFBLEVBQ2xILENBQUM7QUFDSDtBQUllLHlCQUF5QixTQUFTLFVBQVUsY0FBYyxVQUFVO0FBQ2pGLE1BQUksc0JBQXNCLGFBQWEsb0JBQW9CLG1CQUFtQixPQUFPLElBQUksQ0FBQyxFQUFFLE9BQU8sUUFBUTtBQUMzRyxNQUFJLG1CQUFrQixDQUFDLEVBQUUsT0FBTyxxQkFBcUIsQ0FBQyxZQUFZLENBQUM7QUFDbkUsTUFBSSxzQkFBc0IsaUJBQWdCO0FBQzFDLE1BQUksZUFBZSxpQkFBZ0IsT0FBTyxTQUFVLFNBQVMsZ0JBQWdCO0FBQzNFLFFBQUksT0FBTywyQkFBMkIsU0FBUyxnQkFBZ0IsUUFBUTtBQUN2RSxZQUFRLE1BQU0sSUFBSSxLQUFLLEtBQUssUUFBUSxHQUFHO0FBQ3ZDLFlBQVEsUUFBUSxJQUFJLEtBQUssT0FBTyxRQUFRLEtBQUs7QUFDN0MsWUFBUSxTQUFTLElBQUksS0FBSyxRQUFRLFFBQVEsTUFBTTtBQUNoRCxZQUFRLE9BQU8sSUFBSSxLQUFLLE1BQU0sUUFBUSxJQUFJO0FBQzFDLFdBQU87QUFBQSxFQUNULEdBQUcsMkJBQTJCLFNBQVMscUJBQXFCLFFBQVEsQ0FBQztBQUNyRSxlQUFhLFFBQVEsYUFBYSxRQUFRLGFBQWE7QUFDdkQsZUFBYSxTQUFTLGFBQWEsU0FBUyxhQUFhO0FBQ3pELGVBQWEsSUFBSSxhQUFhO0FBQzlCLGVBQWEsSUFBSSxhQUFhO0FBQzlCLFNBQU87QUFDVDs7O0FDakVlLHdCQUF3QixNQUFNO0FBQzNDLE1BQUksYUFBWSxLQUFLLFdBQ2pCLFVBQVUsS0FBSyxTQUNmLFlBQVksS0FBSztBQUNyQixNQUFJLGdCQUFnQixZQUFZLGlCQUFpQixTQUFTLElBQUk7QUFDOUQsTUFBSSxZQUFZLFlBQVksYUFBYSxTQUFTLElBQUk7QUFDdEQsTUFBSSxVQUFVLFdBQVUsSUFBSSxXQUFVLFFBQVEsSUFBSSxRQUFRLFFBQVE7QUFDbEUsTUFBSSxVQUFVLFdBQVUsSUFBSSxXQUFVLFNBQVMsSUFBSSxRQUFRLFNBQVM7QUFDcEUsTUFBSTtBQUVKLFVBQVE7QUFBQSxTQUNEO0FBQ0gsZ0JBQVU7QUFBQSxRQUNSLEdBQUc7QUFBQSxRQUNILEdBQUcsV0FBVSxJQUFJLFFBQVE7QUFBQSxNQUMzQjtBQUNBO0FBQUEsU0FFRztBQUNILGdCQUFVO0FBQUEsUUFDUixHQUFHO0FBQUEsUUFDSCxHQUFHLFdBQVUsSUFBSSxXQUFVO0FBQUEsTUFDN0I7QUFDQTtBQUFBLFNBRUc7QUFDSCxnQkFBVTtBQUFBLFFBQ1IsR0FBRyxXQUFVLElBQUksV0FBVTtBQUFBLFFBQzNCLEdBQUc7QUFBQSxNQUNMO0FBQ0E7QUFBQSxTQUVHO0FBQ0gsZ0JBQVU7QUFBQSxRQUNSLEdBQUcsV0FBVSxJQUFJLFFBQVE7QUFBQSxRQUN6QixHQUFHO0FBQUEsTUFDTDtBQUNBO0FBQUE7QUFHQSxnQkFBVTtBQUFBLFFBQ1IsR0FBRyxXQUFVO0FBQUEsUUFDYixHQUFHLFdBQVU7QUFBQSxNQUNmO0FBQUE7QUFHSixNQUFJLFdBQVcsZ0JBQWdCLHlCQUF5QixhQUFhLElBQUk7QUFFekUsTUFBSSxZQUFZLE1BQU07QUFDcEIsUUFBSSxNQUFNLGFBQWEsTUFBTSxXQUFXO0FBRXhDLFlBQVE7QUFBQSxXQUNEO0FBQ0gsZ0JBQVEsWUFBWSxRQUFRLFlBQWEsWUFBVSxPQUFPLElBQUksUUFBUSxPQUFPO0FBQzdFO0FBQUEsV0FFRztBQUNILGdCQUFRLFlBQVksUUFBUSxZQUFhLFlBQVUsT0FBTyxJQUFJLFFBQVEsT0FBTztBQUM3RTtBQUFBO0FBQUE7QUFBQSxFQUlOO0FBRUEsU0FBTztBQUNUOzs7QUMzRGUsd0JBQXdCLE9BQU8sU0FBUztBQUNyRCxNQUFJLFlBQVksUUFBUTtBQUN0QixjQUFVLENBQUM7QUFBQSxFQUNiO0FBRUEsTUFBSSxXQUFXLFNBQ1gscUJBQXFCLFNBQVMsV0FDOUIsWUFBWSx1QkFBdUIsU0FBUyxNQUFNLFlBQVksb0JBQzlELG9CQUFvQixTQUFTLFVBQzdCLFdBQVcsc0JBQXNCLFNBQVMsTUFBTSxXQUFXLG1CQUMzRCxvQkFBb0IsU0FBUyxVQUM3QixXQUFXLHNCQUFzQixTQUFTLGtCQUFrQixtQkFDNUQsd0JBQXdCLFNBQVMsY0FDakMsZUFBZSwwQkFBMEIsU0FBUyxXQUFXLHVCQUM3RCx3QkFBd0IsU0FBUyxnQkFDakMsaUJBQWlCLDBCQUEwQixTQUFTLFNBQVMsdUJBQzdELHVCQUF1QixTQUFTLGFBQ2hDLGNBQWMseUJBQXlCLFNBQVMsUUFBUSxzQkFDeEQsbUJBQW1CLFNBQVMsU0FDNUIsVUFBVSxxQkFBcUIsU0FBUyxJQUFJO0FBQ2hELE1BQUksZ0JBQWdCLG1CQUFtQixPQUFPLFlBQVksV0FBVyxVQUFVLGdCQUFnQixTQUFTLGNBQWMsQ0FBQztBQUN2SCxNQUFJLGFBQWEsbUJBQW1CLFNBQVMsWUFBWTtBQUN6RCxNQUFJLGFBQWEsTUFBTSxNQUFNO0FBQzdCLE1BQUksVUFBVSxNQUFNLFNBQVMsY0FBYyxhQUFhO0FBQ3hELE1BQUkscUJBQXFCLGdCQUFnQixVQUFVLE9BQU8sSUFBSSxVQUFVLFFBQVEsa0JBQWtCLG1CQUFtQixNQUFNLFNBQVMsTUFBTSxHQUFHLFVBQVUsY0FBYyxRQUFRO0FBQzdLLE1BQUksc0JBQXNCLHNCQUFzQixNQUFNLFNBQVMsU0FBUztBQUN4RSxNQUFJLGlCQUFnQixlQUFlO0FBQUEsSUFDakMsV0FBVztBQUFBLElBQ1gsU0FBUztBQUFBLElBQ1QsVUFBVTtBQUFBLElBQ1Y7QUFBQSxFQUNGLENBQUM7QUFDRCxNQUFJLG1CQUFtQixpQkFBaUIsT0FBTyxPQUFPLENBQUMsR0FBRyxZQUFZLGNBQWEsQ0FBQztBQUNwRixNQUFJLG9CQUFvQixtQkFBbUIsU0FBUyxtQkFBbUI7QUFHdkUsTUFBSSxrQkFBa0I7QUFBQSxJQUNwQixLQUFLLG1CQUFtQixNQUFNLGtCQUFrQixNQUFNLGNBQWM7QUFBQSxJQUNwRSxRQUFRLGtCQUFrQixTQUFTLG1CQUFtQixTQUFTLGNBQWM7QUFBQSxJQUM3RSxNQUFNLG1CQUFtQixPQUFPLGtCQUFrQixPQUFPLGNBQWM7QUFBQSxJQUN2RSxPQUFPLGtCQUFrQixRQUFRLG1CQUFtQixRQUFRLGNBQWM7QUFBQSxFQUM1RTtBQUNBLE1BQUksYUFBYSxNQUFNLGNBQWM7QUFFckMsTUFBSSxtQkFBbUIsVUFBVSxZQUFZO0FBQzNDLFFBQUksVUFBUyxXQUFXO0FBQ3hCLFdBQU8sS0FBSyxlQUFlLEVBQUUsUUFBUSxTQUFVLEtBQUs7QUFDbEQsVUFBSSxXQUFXLENBQUMsT0FBTyxNQUFNLEVBQUUsUUFBUSxHQUFHLEtBQUssSUFBSSxJQUFJO0FBQ3ZELFVBQUksT0FBTyxDQUFDLEtBQUssTUFBTSxFQUFFLFFBQVEsR0FBRyxLQUFLLElBQUksTUFBTTtBQUNuRCxzQkFBZ0IsUUFBUSxRQUFPLFFBQVE7QUFBQSxJQUN6QyxDQUFDO0FBQUEsRUFDSDtBQUVBLFNBQU87QUFDVDs7O0FDNURlLDhCQUE4QixPQUFPLFNBQVM7QUFDM0QsTUFBSSxZQUFZLFFBQVE7QUFDdEIsY0FBVSxDQUFDO0FBQUEsRUFDYjtBQUVBLE1BQUksV0FBVyxTQUNYLFlBQVksU0FBUyxXQUNyQixXQUFXLFNBQVMsVUFDcEIsZUFBZSxTQUFTLGNBQ3hCLFVBQVUsU0FBUyxTQUNuQixpQkFBaUIsU0FBUyxnQkFDMUIsd0JBQXdCLFNBQVMsdUJBQ2pDLHdCQUF3QiwwQkFBMEIsU0FBUyxhQUFnQjtBQUMvRSxNQUFJLFlBQVksYUFBYSxTQUFTO0FBQ3RDLE1BQUksY0FBYSxZQUFZLGlCQUFpQixzQkFBc0Isb0JBQW9CLE9BQU8sU0FBVSxZQUFXO0FBQ2xILFdBQU8sYUFBYSxVQUFTLE1BQU07QUFBQSxFQUNyQyxDQUFDLElBQUk7QUFDTCxNQUFJLG9CQUFvQixZQUFXLE9BQU8sU0FBVSxZQUFXO0FBQzdELFdBQU8sc0JBQXNCLFFBQVEsVUFBUyxLQUFLO0FBQUEsRUFDckQsQ0FBQztBQUVELE1BQUksa0JBQWtCLFdBQVcsR0FBRztBQUNsQyx3QkFBb0I7QUFBQSxFQUN0QjtBQUdBLE1BQUksWUFBWSxrQkFBa0IsT0FBTyxTQUFVLEtBQUssWUFBVztBQUNqRSxRQUFJLGNBQWEsZUFBZSxPQUFPO0FBQUEsTUFDckMsV0FBVztBQUFBLE1BQ1g7QUFBQSxNQUNBO0FBQUEsTUFDQTtBQUFBLElBQ0YsQ0FBQyxFQUFFLGlCQUFpQixVQUFTO0FBQzdCLFdBQU87QUFBQSxFQUNULEdBQUcsQ0FBQyxDQUFDO0FBQ0wsU0FBTyxPQUFPLEtBQUssU0FBUyxFQUFFLEtBQUssU0FBVSxHQUFHLEdBQUc7QUFDakQsV0FBTyxVQUFVLEtBQUssVUFBVTtBQUFBLEVBQ2xDLENBQUM7QUFDSDs7O0FDbENBLHVDQUF1QyxXQUFXO0FBQ2hELE1BQUksaUJBQWlCLFNBQVMsTUFBTSxNQUFNO0FBQ3hDLFdBQU8sQ0FBQztBQUFBLEVBQ1Y7QUFFQSxNQUFJLG9CQUFvQixxQkFBcUIsU0FBUztBQUN0RCxTQUFPLENBQUMsOEJBQThCLFNBQVMsR0FBRyxtQkFBbUIsOEJBQThCLGlCQUFpQixDQUFDO0FBQ3ZIO0FBRUEsY0FBYyxNQUFNO0FBQ2xCLE1BQUksUUFBUSxLQUFLLE9BQ2IsVUFBVSxLQUFLLFNBQ2YsT0FBTyxLQUFLO0FBRWhCLE1BQUksTUFBTSxjQUFjLE1BQU0sT0FBTztBQUNuQztBQUFBLEVBQ0Y7QUFFQSxNQUFJLG9CQUFvQixRQUFRLFVBQzVCLGdCQUFnQixzQkFBc0IsU0FBUyxPQUFPLG1CQUN0RCxtQkFBbUIsUUFBUSxTQUMzQixlQUFlLHFCQUFxQixTQUFTLE9BQU8sa0JBQ3BELDhCQUE4QixRQUFRLG9CQUN0QyxVQUFVLFFBQVEsU0FDbEIsV0FBVyxRQUFRLFVBQ25CLGVBQWUsUUFBUSxjQUN2QixjQUFjLFFBQVEsYUFDdEIsd0JBQXdCLFFBQVEsZ0JBQ2hDLGlCQUFpQiwwQkFBMEIsU0FBUyxPQUFPLHVCQUMzRCx3QkFBd0IsUUFBUTtBQUNwQyxNQUFJLHFCQUFxQixNQUFNLFFBQVE7QUFDdkMsTUFBSSxnQkFBZ0IsaUJBQWlCLGtCQUFrQjtBQUN2RCxNQUFJLGtCQUFrQixrQkFBa0I7QUFDeEMsTUFBSSxxQkFBcUIsK0JBQWdDLG9CQUFtQixDQUFDLGlCQUFpQixDQUFDLHFCQUFxQixrQkFBa0IsQ0FBQyxJQUFJLDhCQUE4QixrQkFBa0I7QUFDM0wsTUFBSSxjQUFhLENBQUMsa0JBQWtCLEVBQUUsT0FBTyxrQkFBa0IsRUFBRSxPQUFPLFNBQVUsS0FBSyxZQUFXO0FBQ2hHLFdBQU8sSUFBSSxPQUFPLGlCQUFpQixVQUFTLE1BQU0sT0FBTyxxQkFBcUIsT0FBTztBQUFBLE1BQ25GLFdBQVc7QUFBQSxNQUNYO0FBQUEsTUFDQTtBQUFBLE1BQ0E7QUFBQSxNQUNBO0FBQUEsTUFDQTtBQUFBLElBQ0YsQ0FBQyxJQUFJLFVBQVM7QUFBQSxFQUNoQixHQUFHLENBQUMsQ0FBQztBQUNMLE1BQUksZ0JBQWdCLE1BQU0sTUFBTTtBQUNoQyxNQUFJLGFBQWEsTUFBTSxNQUFNO0FBQzdCLE1BQUksWUFBWSxvQkFBSSxJQUFJO0FBQ3hCLE1BQUkscUJBQXFCO0FBQ3pCLE1BQUksd0JBQXdCLFlBQVc7QUFFdkMsV0FBUyxJQUFJLEdBQUcsSUFBSSxZQUFXLFFBQVEsS0FBSztBQUMxQyxRQUFJLFlBQVksWUFBVztBQUUzQixRQUFJLGlCQUFpQixpQkFBaUIsU0FBUztBQUUvQyxRQUFJLG1CQUFtQixhQUFhLFNBQVMsTUFBTTtBQUNuRCxRQUFJLGFBQWEsQ0FBQyxLQUFLLE1BQU0sRUFBRSxRQUFRLGNBQWMsS0FBSztBQUMxRCxRQUFJLE1BQU0sYUFBYSxVQUFVO0FBQ2pDLFFBQUksV0FBVyxlQUFlLE9BQU87QUFBQSxNQUNuQztBQUFBLE1BQ0E7QUFBQSxNQUNBO0FBQUEsTUFDQTtBQUFBLE1BQ0E7QUFBQSxJQUNGLENBQUM7QUFDRCxRQUFJLG9CQUFvQixhQUFhLG1CQUFtQixRQUFRLE9BQU8sbUJBQW1CLFNBQVM7QUFFbkcsUUFBSSxjQUFjLE9BQU8sV0FBVyxNQUFNO0FBQ3hDLDBCQUFvQixxQkFBcUIsaUJBQWlCO0FBQUEsSUFDNUQ7QUFFQSxRQUFJLG1CQUFtQixxQkFBcUIsaUJBQWlCO0FBQzdELFFBQUksU0FBUyxDQUFDO0FBRWQsUUFBSSxlQUFlO0FBQ2pCLGFBQU8sS0FBSyxTQUFTLG1CQUFtQixDQUFDO0FBQUEsSUFDM0M7QUFFQSxRQUFJLGNBQWM7QUFDaEIsYUFBTyxLQUFLLFNBQVMsc0JBQXNCLEdBQUcsU0FBUyxxQkFBcUIsQ0FBQztBQUFBLElBQy9FO0FBRUEsUUFBSSxPQUFPLE1BQU0sU0FBVSxPQUFPO0FBQ2hDLGFBQU87QUFBQSxJQUNULENBQUMsR0FBRztBQUNGLDhCQUF3QjtBQUN4QiwyQkFBcUI7QUFDckI7QUFBQSxJQUNGO0FBRUEsY0FBVSxJQUFJLFdBQVcsTUFBTTtBQUFBLEVBQ2pDO0FBRUEsTUFBSSxvQkFBb0I7QUFFdEIsUUFBSSxpQkFBaUIsaUJBQWlCLElBQUk7QUFFMUMsUUFBSSxRQUFRLGdCQUFlLEtBQUk7QUFDN0IsVUFBSSxtQkFBbUIsWUFBVyxLQUFLLFNBQVUsWUFBVztBQUMxRCxZQUFJLFVBQVMsVUFBVSxJQUFJLFVBQVM7QUFFcEMsWUFBSSxTQUFRO0FBQ1YsaUJBQU8sUUFBTyxNQUFNLEdBQUcsR0FBRSxFQUFFLE1BQU0sU0FBVSxPQUFPO0FBQ2hELG1CQUFPO0FBQUEsVUFDVCxDQUFDO0FBQUEsUUFDSDtBQUFBLE1BQ0YsQ0FBQztBQUVELFVBQUksa0JBQWtCO0FBQ3BCLGdDQUF3QjtBQUN4QixlQUFPO0FBQUEsTUFDVDtBQUFBLElBQ0Y7QUFFQSxhQUFTLEtBQUssZ0JBQWdCLEtBQUssR0FBRyxNQUFNO0FBQzFDLFVBQUksT0FBTyxNQUFNLEVBQUU7QUFFbkIsVUFBSSxTQUFTO0FBQVM7QUFBQSxJQUN4QjtBQUFBLEVBQ0Y7QUFFQSxNQUFJLE1BQU0sY0FBYyx1QkFBdUI7QUFDN0MsVUFBTSxjQUFjLE1BQU0sUUFBUTtBQUNsQyxVQUFNLFlBQVk7QUFDbEIsVUFBTSxRQUFRO0FBQUEsRUFDaEI7QUFDRjtBQUdBLElBQU8sZUFBUTtBQUFBLEVBQ2IsTUFBTTtBQUFBLEVBQ04sU0FBUztBQUFBLEVBQ1QsT0FBTztBQUFBLEVBQ1AsSUFBSTtBQUFBLEVBQ0osa0JBQWtCLENBQUMsUUFBUTtBQUFBLEVBQzNCLE1BQU07QUFBQSxJQUNKLE9BQU87QUFBQSxFQUNUO0FBQ0Y7OztBQy9JQSx3QkFBd0IsVUFBVSxNQUFNLGtCQUFrQjtBQUN4RCxNQUFJLHFCQUFxQixRQUFRO0FBQy9CLHVCQUFtQjtBQUFBLE1BQ2pCLEdBQUc7QUFBQSxNQUNILEdBQUc7QUFBQSxJQUNMO0FBQUEsRUFDRjtBQUVBLFNBQU87QUFBQSxJQUNMLEtBQUssU0FBUyxNQUFNLEtBQUssU0FBUyxpQkFBaUI7QUFBQSxJQUNuRCxPQUFPLFNBQVMsUUFBUSxLQUFLLFFBQVEsaUJBQWlCO0FBQUEsSUFDdEQsUUFBUSxTQUFTLFNBQVMsS0FBSyxTQUFTLGlCQUFpQjtBQUFBLElBQ3pELE1BQU0sU0FBUyxPQUFPLEtBQUssUUFBUSxpQkFBaUI7QUFBQSxFQUN0RDtBQUNGO0FBRUEsK0JBQStCLFVBQVU7QUFDdkMsU0FBTyxDQUFDLEtBQUssT0FBTyxRQUFRLElBQUksRUFBRSxLQUFLLFNBQVUsTUFBTTtBQUNyRCxXQUFPLFNBQVMsU0FBUztBQUFBLEVBQzNCLENBQUM7QUFDSDtBQUVBLGNBQWMsTUFBTTtBQUNsQixNQUFJLFFBQVEsS0FBSyxPQUNiLE9BQU8sS0FBSztBQUNoQixNQUFJLGdCQUFnQixNQUFNLE1BQU07QUFDaEMsTUFBSSxhQUFhLE1BQU0sTUFBTTtBQUM3QixNQUFJLG1CQUFtQixNQUFNLGNBQWM7QUFDM0MsTUFBSSxvQkFBb0IsZUFBZSxPQUFPO0FBQUEsSUFDNUMsZ0JBQWdCO0FBQUEsRUFDbEIsQ0FBQztBQUNELE1BQUksb0JBQW9CLGVBQWUsT0FBTztBQUFBLElBQzVDLGFBQWE7QUFBQSxFQUNmLENBQUM7QUFDRCxNQUFJLDJCQUEyQixlQUFlLG1CQUFtQixhQUFhO0FBQzlFLE1BQUksc0JBQXNCLGVBQWUsbUJBQW1CLFlBQVksZ0JBQWdCO0FBQ3hGLE1BQUksb0JBQW9CLHNCQUFzQix3QkFBd0I7QUFDdEUsTUFBSSxtQkFBbUIsc0JBQXNCLG1CQUFtQjtBQUNoRSxRQUFNLGNBQWMsUUFBUTtBQUFBLElBQzFCO0FBQUEsSUFDQTtBQUFBLElBQ0E7QUFBQSxJQUNBO0FBQUEsRUFDRjtBQUNBLFFBQU0sV0FBVyxTQUFTLE9BQU8sT0FBTyxDQUFDLEdBQUcsTUFBTSxXQUFXLFFBQVE7QUFBQSxJQUNuRSxnQ0FBZ0M7QUFBQSxJQUNoQyx1QkFBdUI7QUFBQSxFQUN6QixDQUFDO0FBQ0g7QUFHQSxJQUFPLGVBQVE7QUFBQSxFQUNiLE1BQU07QUFBQSxFQUNOLFNBQVM7QUFBQSxFQUNULE9BQU87QUFBQSxFQUNQLGtCQUFrQixDQUFDLGlCQUFpQjtBQUFBLEVBQ3BDLElBQUk7QUFDTjs7O0FDekRPLGlDQUFpQyxXQUFXLE9BQU8sU0FBUTtBQUNoRSxNQUFJLGdCQUFnQixpQkFBaUIsU0FBUztBQUM5QyxNQUFJLGlCQUFpQixDQUFDLE1BQU0sR0FBRyxFQUFFLFFBQVEsYUFBYSxLQUFLLElBQUksS0FBSztBQUVwRSxNQUFJLE9BQU8sT0FBTyxZQUFXLGFBQWEsUUFBTyxPQUFPLE9BQU8sQ0FBQyxHQUFHLE9BQU87QUFBQSxJQUN4RTtBQUFBLEVBQ0YsQ0FBQyxDQUFDLElBQUksU0FDRixXQUFXLEtBQUssSUFDaEIsV0FBVyxLQUFLO0FBRXBCLGFBQVcsWUFBWTtBQUN2QixhQUFZLGFBQVksS0FBSztBQUM3QixTQUFPLENBQUMsTUFBTSxLQUFLLEVBQUUsUUFBUSxhQUFhLEtBQUssSUFBSTtBQUFBLElBQ2pELEdBQUc7QUFBQSxJQUNILEdBQUc7QUFBQSxFQUNMLElBQUk7QUFBQSxJQUNGLEdBQUc7QUFBQSxJQUNILEdBQUc7QUFBQSxFQUNMO0FBQ0Y7QUFFQSxnQkFBZ0IsT0FBTztBQUNyQixNQUFJLFFBQVEsTUFBTSxPQUNkLFVBQVUsTUFBTSxTQUNoQixPQUFPLE1BQU07QUFDakIsTUFBSSxrQkFBa0IsUUFBUSxRQUMxQixVQUFTLG9CQUFvQixTQUFTLENBQUMsR0FBRyxDQUFDLElBQUk7QUFDbkQsTUFBSSxPQUFPLFdBQVcsT0FBTyxTQUFVLEtBQUssV0FBVztBQUNyRCxRQUFJLGFBQWEsd0JBQXdCLFdBQVcsTUFBTSxPQUFPLE9BQU07QUFDdkUsV0FBTztBQUFBLEVBQ1QsR0FBRyxDQUFDLENBQUM7QUFDTCxNQUFJLHdCQUF3QixLQUFLLE1BQU0sWUFDbkMsSUFBSSxzQkFBc0IsR0FDMUIsSUFBSSxzQkFBc0I7QUFFOUIsTUFBSSxNQUFNLGNBQWMsaUJBQWlCLE1BQU07QUFDN0MsVUFBTSxjQUFjLGNBQWMsS0FBSztBQUN2QyxVQUFNLGNBQWMsY0FBYyxLQUFLO0FBQUEsRUFDekM7QUFFQSxRQUFNLGNBQWMsUUFBUTtBQUM5QjtBQUdBLElBQU8saUJBQVE7QUFBQSxFQUNiLE1BQU07QUFBQSxFQUNOLFNBQVM7QUFBQSxFQUNULE9BQU87QUFBQSxFQUNQLFVBQVUsQ0FBQyxlQUFlO0FBQUEsRUFDMUIsSUFBSTtBQUNOOzs7QUNuREEsdUJBQXVCLE1BQU07QUFDM0IsTUFBSSxRQUFRLEtBQUssT0FDYixPQUFPLEtBQUs7QUFLaEIsUUFBTSxjQUFjLFFBQVEsZUFBZTtBQUFBLElBQ3pDLFdBQVcsTUFBTSxNQUFNO0FBQUEsSUFDdkIsU0FBUyxNQUFNLE1BQU07QUFBQSxJQUNyQixVQUFVO0FBQUEsSUFDVixXQUFXLE1BQU07QUFBQSxFQUNuQixDQUFDO0FBQ0g7QUFHQSxJQUFPLHdCQUFRO0FBQUEsRUFDYixNQUFNO0FBQUEsRUFDTixTQUFTO0FBQUEsRUFDVCxPQUFPO0FBQUEsRUFDUCxJQUFJO0FBQUEsRUFDSixNQUFNLENBQUM7QUFDVDs7O0FDeEJlLG9CQUFvQixNQUFNO0FBQ3ZDLFNBQU8sU0FBUyxNQUFNLE1BQU07QUFDOUI7OztBQ1VBLHlCQUF5QixNQUFNO0FBQzdCLE1BQUksUUFBUSxLQUFLLE9BQ2IsVUFBVSxLQUFLLFNBQ2YsT0FBTyxLQUFLO0FBQ2hCLE1BQUksb0JBQW9CLFFBQVEsVUFDNUIsZ0JBQWdCLHNCQUFzQixTQUFTLE9BQU8sbUJBQ3RELG1CQUFtQixRQUFRLFNBQzNCLGVBQWUscUJBQXFCLFNBQVMsUUFBUSxrQkFDckQsV0FBVyxRQUFRLFVBQ25CLGVBQWUsUUFBUSxjQUN2QixjQUFjLFFBQVEsYUFDdEIsVUFBVSxRQUFRLFNBQ2xCLGtCQUFrQixRQUFRLFFBQzFCLFNBQVMsb0JBQW9CLFNBQVMsT0FBTyxpQkFDN0Msd0JBQXdCLFFBQVEsY0FDaEMsZUFBZSwwQkFBMEIsU0FBUyxJQUFJO0FBQzFELE1BQUksV0FBVyxlQUFlLE9BQU87QUFBQSxJQUNuQztBQUFBLElBQ0E7QUFBQSxJQUNBO0FBQUEsSUFDQTtBQUFBLEVBQ0YsQ0FBQztBQUNELE1BQUksZ0JBQWdCLGlCQUFpQixNQUFNLFNBQVM7QUFDcEQsTUFBSSxZQUFZLGFBQWEsTUFBTSxTQUFTO0FBQzVDLE1BQUksa0JBQWtCLENBQUM7QUFDdkIsTUFBSSxXQUFXLHlCQUF5QixhQUFhO0FBQ3JELE1BQUksVUFBVSxXQUFXLFFBQVE7QUFDakMsTUFBSSxpQkFBZ0IsTUFBTSxjQUFjO0FBQ3hDLE1BQUksZ0JBQWdCLE1BQU0sTUFBTTtBQUNoQyxNQUFJLGFBQWEsTUFBTSxNQUFNO0FBQzdCLE1BQUksb0JBQW9CLE9BQU8saUJBQWlCLGFBQWEsYUFBYSxPQUFPLE9BQU8sQ0FBQyxHQUFHLE1BQU0sT0FBTztBQUFBLElBQ3ZHLFdBQVcsTUFBTTtBQUFBLEVBQ25CLENBQUMsQ0FBQyxJQUFJO0FBQ04sTUFBSSw4QkFBOEIsT0FBTyxzQkFBc0IsV0FBVztBQUFBLElBQ3hFLFVBQVU7QUFBQSxJQUNWLFNBQVM7QUFBQSxFQUNYLElBQUksT0FBTyxPQUFPO0FBQUEsSUFDaEIsVUFBVTtBQUFBLElBQ1YsU0FBUztBQUFBLEVBQ1gsR0FBRyxpQkFBaUI7QUFDcEIsTUFBSSxzQkFBc0IsTUFBTSxjQUFjLFNBQVMsTUFBTSxjQUFjLE9BQU8sTUFBTSxhQUFhO0FBQ3JHLE1BQUksT0FBTztBQUFBLElBQ1QsR0FBRztBQUFBLElBQ0gsR0FBRztBQUFBLEVBQ0w7QUFFQSxNQUFJLENBQUMsZ0JBQWU7QUFDbEI7QUFBQSxFQUNGO0FBRUEsTUFBSSxlQUFlO0FBQ2pCLFFBQUk7QUFFSixRQUFJLFdBQVcsYUFBYSxNQUFNLE1BQU07QUFDeEMsUUFBSSxVQUFVLGFBQWEsTUFBTSxTQUFTO0FBQzFDLFFBQUksTUFBTSxhQUFhLE1BQU0sV0FBVztBQUN4QyxRQUFJLFVBQVMsZUFBYztBQUMzQixRQUFJLE9BQU0sVUFBUyxTQUFTO0FBQzVCLFFBQUksT0FBTSxVQUFTLFNBQVM7QUFDNUIsUUFBSSxXQUFXLFNBQVMsQ0FBQyxXQUFXLE9BQU8sSUFBSTtBQUMvQyxRQUFJLFNBQVMsY0FBYyxRQUFRLGNBQWMsT0FBTyxXQUFXO0FBQ25FLFFBQUksU0FBUyxjQUFjLFFBQVEsQ0FBQyxXQUFXLE9BQU8sQ0FBQyxjQUFjO0FBR3JFLFFBQUksZUFBZSxNQUFNLFNBQVM7QUFDbEMsUUFBSSxZQUFZLFVBQVUsZUFBZSxjQUFjLFlBQVksSUFBSTtBQUFBLE1BQ3JFLE9BQU87QUFBQSxNQUNQLFFBQVE7QUFBQSxJQUNWO0FBQ0EsUUFBSSxxQkFBcUIsTUFBTSxjQUFjLHNCQUFzQixNQUFNLGNBQWMsb0JBQW9CLFVBQVUsbUJBQW1CO0FBQ3hJLFFBQUksa0JBQWtCLG1CQUFtQjtBQUN6QyxRQUFJLGtCQUFrQixtQkFBbUI7QUFNekMsUUFBSSxXQUFXLE9BQU8sR0FBRyxjQUFjLE1BQU0sVUFBVSxJQUFJO0FBQzNELFFBQUksWUFBWSxrQkFBa0IsY0FBYyxPQUFPLElBQUksV0FBVyxXQUFXLGtCQUFrQiw0QkFBNEIsV0FBVyxTQUFTLFdBQVcsa0JBQWtCLDRCQUE0QjtBQUM1TSxRQUFJLFlBQVksa0JBQWtCLENBQUMsY0FBYyxPQUFPLElBQUksV0FBVyxXQUFXLGtCQUFrQiw0QkFBNEIsV0FBVyxTQUFTLFdBQVcsa0JBQWtCLDRCQUE0QjtBQUM3TSxRQUFJLG9CQUFvQixNQUFNLFNBQVMsU0FBUyxnQkFBZ0IsTUFBTSxTQUFTLEtBQUs7QUFDcEYsUUFBSSxlQUFlLG9CQUFvQixhQUFhLE1BQU0sa0JBQWtCLGFBQWEsSUFBSSxrQkFBa0IsY0FBYyxJQUFJO0FBQ2pJLFFBQUksc0JBQXVCLHlCQUF3Qix1QkFBdUIsT0FBTyxTQUFTLG9CQUFvQixjQUFjLE9BQU8sd0JBQXdCO0FBQzNKLFFBQUksWUFBWSxVQUFTLFlBQVksc0JBQXNCO0FBQzNELFFBQUksWUFBWSxVQUFTLFlBQVk7QUFDckMsUUFBSSxrQkFBa0IsT0FBTyxTQUFTLElBQVEsTUFBSyxTQUFTLElBQUksTUFBSyxTQUFRLFNBQVMsSUFBUSxNQUFLLFNBQVMsSUFBSSxJQUFHO0FBQ25ILG1CQUFjLFlBQVk7QUFDMUIsU0FBSyxZQUFZLGtCQUFrQjtBQUFBLEVBQ3JDO0FBRUEsTUFBSSxjQUFjO0FBQ2hCLFFBQUk7QUFFSixRQUFJLFlBQVksYUFBYSxNQUFNLE1BQU07QUFFekMsUUFBSSxXQUFXLGFBQWEsTUFBTSxTQUFTO0FBRTNDLFFBQUksVUFBVSxlQUFjO0FBRTVCLFFBQUksT0FBTyxZQUFZLE1BQU0sV0FBVztBQUV4QyxRQUFJLE9BQU8sVUFBVSxTQUFTO0FBRTlCLFFBQUksT0FBTyxVQUFVLFNBQVM7QUFFOUIsUUFBSSxlQUFlLENBQUMsS0FBSyxJQUFJLEVBQUUsUUFBUSxhQUFhLE1BQU07QUFFMUQsUUFBSSx1QkFBd0IsMEJBQXlCLHVCQUF1QixPQUFPLFNBQVMsb0JBQW9CLGFBQWEsT0FBTyx5QkFBeUI7QUFFN0osUUFBSSxhQUFhLGVBQWUsT0FBTyxVQUFVLGNBQWMsUUFBUSxXQUFXLFFBQVEsdUJBQXVCLDRCQUE0QjtBQUU3SSxRQUFJLGFBQWEsZUFBZSxVQUFVLGNBQWMsUUFBUSxXQUFXLFFBQVEsdUJBQXVCLDRCQUE0QixVQUFVO0FBRWhKLFFBQUksbUJBQW1CLFVBQVUsZUFBZSxlQUFlLFlBQVksU0FBUyxVQUFVLElBQUksT0FBTyxTQUFTLGFBQWEsTUFBTSxTQUFTLFNBQVMsYUFBYSxJQUFJO0FBRXhLLG1CQUFjLFdBQVc7QUFDekIsU0FBSyxXQUFXLG1CQUFtQjtBQUFBLEVBQ3JDO0FBRUEsUUFBTSxjQUFjLFFBQVE7QUFDOUI7QUFHQSxJQUFPLDBCQUFRO0FBQUEsRUFDYixNQUFNO0FBQUEsRUFDTixTQUFTO0FBQUEsRUFDVCxPQUFPO0FBQUEsRUFDUCxJQUFJO0FBQUEsRUFDSixrQkFBa0IsQ0FBQyxRQUFRO0FBQzdCOzs7QUM3SWUsOEJBQThCLFNBQVM7QUFDcEQsU0FBTztBQUFBLElBQ0wsWUFBWSxRQUFRO0FBQUEsSUFDcEIsV0FBVyxRQUFRO0FBQUEsRUFDckI7QUFDRjs7O0FDRGUsdUJBQXVCLE1BQU07QUFDMUMsTUFBSSxTQUFTLFVBQVUsSUFBSSxLQUFLLENBQUMsY0FBYyxJQUFJLEdBQUc7QUFDcEQsV0FBTyxnQkFBZ0IsSUFBSTtBQUFBLEVBQzdCLE9BQU87QUFDTCxXQUFPLHFCQUFxQixJQUFJO0FBQUEsRUFDbEM7QUFDRjs7O0FDREEseUJBQXlCLFNBQVM7QUFDaEMsTUFBSSxPQUFPLFFBQVEsc0JBQXNCO0FBQ3pDLE1BQUksU0FBUyxNQUFNLEtBQUssS0FBSyxJQUFJLFFBQVEsZUFBZTtBQUN4RCxNQUFJLFNBQVMsTUFBTSxLQUFLLE1BQU0sSUFBSSxRQUFRLGdCQUFnQjtBQUMxRCxTQUFPLFdBQVcsS0FBSyxXQUFXO0FBQ3BDO0FBSWUsMEJBQTBCLHlCQUF5QixjQUFjLFNBQVM7QUFDdkYsTUFBSSxZQUFZLFFBQVE7QUFDdEIsY0FBVTtBQUFBLEVBQ1o7QUFFQSxNQUFJLDBCQUEwQixjQUFjLFlBQVk7QUFDeEQsTUFBSSx1QkFBdUIsY0FBYyxZQUFZLEtBQUssZ0JBQWdCLFlBQVk7QUFDdEYsTUFBSSxrQkFBa0IsbUJBQW1CLFlBQVk7QUFDckQsTUFBSSxPQUFPLHNCQUFzQix5QkFBeUIsc0JBQXNCLE9BQU87QUFDdkYsTUFBSSxTQUFTO0FBQUEsSUFDWCxZQUFZO0FBQUEsSUFDWixXQUFXO0FBQUEsRUFDYjtBQUNBLE1BQUksVUFBVTtBQUFBLElBQ1osR0FBRztBQUFBLElBQ0gsR0FBRztBQUFBLEVBQ0w7QUFFQSxNQUFJLDJCQUEyQixDQUFDLDJCQUEyQixDQUFDLFNBQVM7QUFDbkUsUUFBSSxZQUFZLFlBQVksTUFBTSxVQUNsQyxlQUFlLGVBQWUsR0FBRztBQUMvQixlQUFTLGNBQWMsWUFBWTtBQUFBLElBQ3JDO0FBRUEsUUFBSSxjQUFjLFlBQVksR0FBRztBQUMvQixnQkFBVSxzQkFBc0IsY0FBYyxJQUFJO0FBQ2xELGNBQVEsS0FBSyxhQUFhO0FBQzFCLGNBQVEsS0FBSyxhQUFhO0FBQUEsSUFDNUIsV0FBVyxpQkFBaUI7QUFDMUIsY0FBUSxJQUFJLG9CQUFvQixlQUFlO0FBQUEsSUFDakQ7QUFBQSxFQUNGO0FBRUEsU0FBTztBQUFBLElBQ0wsR0FBRyxLQUFLLE9BQU8sT0FBTyxhQUFhLFFBQVE7QUFBQSxJQUMzQyxHQUFHLEtBQUssTUFBTSxPQUFPLFlBQVksUUFBUTtBQUFBLElBQ3pDLE9BQU8sS0FBSztBQUFBLElBQ1osUUFBUSxLQUFLO0FBQUEsRUFDZjtBQUNGOzs7QUN2REEsZUFBZSxXQUFXO0FBQ3hCLE1BQUksTUFBTSxvQkFBSSxJQUFJO0FBQ2xCLE1BQUksVUFBVSxvQkFBSSxJQUFJO0FBQ3RCLE1BQUksU0FBUyxDQUFDO0FBQ2QsWUFBVSxRQUFRLFNBQVUsVUFBVTtBQUNwQyxRQUFJLElBQUksU0FBUyxNQUFNLFFBQVE7QUFBQSxFQUNqQyxDQUFDO0FBRUQsZ0JBQWMsVUFBVTtBQUN0QixZQUFRLElBQUksU0FBUyxJQUFJO0FBQ3pCLFFBQUksV0FBVyxDQUFDLEVBQUUsT0FBTyxTQUFTLFlBQVksQ0FBQyxHQUFHLFNBQVMsb0JBQW9CLENBQUMsQ0FBQztBQUNqRixhQUFTLFFBQVEsU0FBVSxLQUFLO0FBQzlCLFVBQUksQ0FBQyxRQUFRLElBQUksR0FBRyxHQUFHO0FBQ3JCLFlBQUksY0FBYyxJQUFJLElBQUksR0FBRztBQUU3QixZQUFJLGFBQWE7QUFDZixlQUFLLFdBQVc7QUFBQSxRQUNsQjtBQUFBLE1BQ0Y7QUFBQSxJQUNGLENBQUM7QUFDRCxXQUFPLEtBQUssUUFBUTtBQUFBLEVBQ3RCO0FBRUEsWUFBVSxRQUFRLFNBQVUsVUFBVTtBQUNwQyxRQUFJLENBQUMsUUFBUSxJQUFJLFNBQVMsSUFBSSxHQUFHO0FBRS9CLFdBQUssUUFBUTtBQUFBLElBQ2Y7QUFBQSxFQUNGLENBQUM7QUFDRCxTQUFPO0FBQ1Q7QUFFZSx3QkFBd0IsV0FBVztBQUVoRCxNQUFJLG1CQUFtQixNQUFNLFNBQVM7QUFFdEMsU0FBTyxlQUFlLE9BQU8sU0FBVSxLQUFLLE9BQU87QUFDakQsV0FBTyxJQUFJLE9BQU8saUJBQWlCLE9BQU8sU0FBVSxVQUFVO0FBQzVELGFBQU8sU0FBUyxVQUFVO0FBQUEsSUFDNUIsQ0FBQyxDQUFDO0FBQUEsRUFDSixHQUFHLENBQUMsQ0FBQztBQUNQOzs7QUMzQ2Usa0JBQWtCLEtBQUk7QUFDbkMsTUFBSTtBQUNKLFNBQU8sV0FBWTtBQUNqQixRQUFJLENBQUMsU0FBUztBQUNaLGdCQUFVLElBQUksUUFBUSxTQUFVLFNBQVM7QUFDdkMsZ0JBQVEsUUFBUSxFQUFFLEtBQUssV0FBWTtBQUNqQyxvQkFBVTtBQUNWLGtCQUFRLElBQUcsQ0FBQztBQUFBLFFBQ2QsQ0FBQztBQUFBLE1BQ0gsQ0FBQztBQUFBLElBQ0g7QUFFQSxXQUFPO0FBQUEsRUFDVDtBQUNGOzs7QUNkZSxxQkFBcUIsV0FBVztBQUM3QyxNQUFJLFNBQVMsVUFBVSxPQUFPLFNBQVUsU0FBUSxTQUFTO0FBQ3ZELFFBQUksV0FBVyxRQUFPLFFBQVE7QUFDOUIsWUFBTyxRQUFRLFFBQVEsV0FBVyxPQUFPLE9BQU8sQ0FBQyxHQUFHLFVBQVUsU0FBUztBQUFBLE1BQ3JFLFNBQVMsT0FBTyxPQUFPLENBQUMsR0FBRyxTQUFTLFNBQVMsUUFBUSxPQUFPO0FBQUEsTUFDNUQsTUFBTSxPQUFPLE9BQU8sQ0FBQyxHQUFHLFNBQVMsTUFBTSxRQUFRLElBQUk7QUFBQSxJQUNyRCxDQUFDLElBQUk7QUFDTCxXQUFPO0FBQUEsRUFDVCxHQUFHLENBQUMsQ0FBQztBQUVMLFNBQU8sT0FBTyxLQUFLLE1BQU0sRUFBRSxJQUFJLFNBQVUsS0FBSztBQUM1QyxXQUFPLE9BQU87QUFBQSxFQUNoQixDQUFDO0FBQ0g7OztBQ0pBLElBQUksa0JBQWtCO0FBQUEsRUFDcEIsV0FBVztBQUFBLEVBQ1gsV0FBVyxDQUFDO0FBQUEsRUFDWixVQUFVO0FBQ1o7QUFFQSw0QkFBNEI7QUFDMUIsV0FBUyxPQUFPLFVBQVUsUUFBUSxPQUFPLElBQUksTUFBTSxJQUFJLEdBQUcsT0FBTyxHQUFHLE9BQU8sTUFBTSxRQUFRO0FBQ3ZGLFNBQUssUUFBUSxVQUFVO0FBQUEsRUFDekI7QUFFQSxTQUFPLENBQUMsS0FBSyxLQUFLLFNBQVUsU0FBUztBQUNuQyxXQUFPLENBQUUsWUFBVyxPQUFPLFFBQVEsMEJBQTBCO0FBQUEsRUFDL0QsQ0FBQztBQUNIO0FBRU8seUJBQXlCLGtCQUFrQjtBQUNoRCxNQUFJLHFCQUFxQixRQUFRO0FBQy9CLHVCQUFtQixDQUFDO0FBQUEsRUFDdEI7QUFFQSxNQUFJLG9CQUFvQixrQkFDcEIsd0JBQXdCLGtCQUFrQixrQkFDMUMsb0JBQW1CLDBCQUEwQixTQUFTLENBQUMsSUFBSSx1QkFDM0QseUJBQXlCLGtCQUFrQixnQkFDM0MsaUJBQWlCLDJCQUEyQixTQUFTLGtCQUFrQjtBQUMzRSxTQUFPLHVCQUFzQixZQUFXLFNBQVEsU0FBUztBQUN2RCxRQUFJLFlBQVksUUFBUTtBQUN0QixnQkFBVTtBQUFBLElBQ1o7QUFFQSxRQUFJLFFBQVE7QUFBQSxNQUNWLFdBQVc7QUFBQSxNQUNYLGtCQUFrQixDQUFDO0FBQUEsTUFDbkIsU0FBUyxPQUFPLE9BQU8sQ0FBQyxHQUFHLGlCQUFpQixjQUFjO0FBQUEsTUFDMUQsZUFBZSxDQUFDO0FBQUEsTUFDaEIsVUFBVTtBQUFBLFFBQ1IsV0FBVztBQUFBLFFBQ1gsUUFBUTtBQUFBLE1BQ1Y7QUFBQSxNQUNBLFlBQVksQ0FBQztBQUFBLE1BQ2IsUUFBUSxDQUFDO0FBQUEsSUFDWDtBQUNBLFFBQUksbUJBQW1CLENBQUM7QUFDeEIsUUFBSSxjQUFjO0FBQ2xCLFFBQUksV0FBVztBQUFBLE1BQ2I7QUFBQSxNQUNBLFlBQVksb0JBQW9CLGtCQUFrQjtBQUNoRCxZQUFJLFdBQVUsT0FBTyxxQkFBcUIsYUFBYSxpQkFBaUIsTUFBTSxPQUFPLElBQUk7QUFDekYsK0JBQXVCO0FBQ3ZCLGNBQU0sVUFBVSxPQUFPLE9BQU8sQ0FBQyxHQUFHLGdCQUFnQixNQUFNLFNBQVMsUUFBTztBQUN4RSxjQUFNLGdCQUFnQjtBQUFBLFVBQ3BCLFdBQVcsVUFBVSxVQUFTLElBQUksa0JBQWtCLFVBQVMsSUFBSSxXQUFVLGlCQUFpQixrQkFBa0IsV0FBVSxjQUFjLElBQUksQ0FBQztBQUFBLFVBQzNJLFFBQVEsa0JBQWtCLE9BQU07QUFBQSxRQUNsQztBQUdBLFlBQUksbUJBQW1CLGVBQWUsWUFBWSxDQUFDLEVBQUUsT0FBTyxtQkFBa0IsTUFBTSxRQUFRLFNBQVMsQ0FBQyxDQUFDO0FBRXZHLGNBQU0sbUJBQW1CLGlCQUFpQixPQUFPLFNBQVUsR0FBRztBQUM1RCxpQkFBTyxFQUFFO0FBQUEsUUFDWCxDQUFDO0FBQ0QsMkJBQW1CO0FBQ25CLGVBQU8sU0FBUyxPQUFPO0FBQUEsTUFDekI7QUFBQSxNQU1BLGFBQWEsdUJBQXVCO0FBQ2xDLFlBQUksYUFBYTtBQUNmO0FBQUEsUUFDRjtBQUVBLFlBQUksa0JBQWtCLE1BQU0sVUFDeEIsYUFBWSxnQkFBZ0IsV0FDNUIsVUFBUyxnQkFBZ0I7QUFHN0IsWUFBSSxDQUFDLGlCQUFpQixZQUFXLE9BQU0sR0FBRztBQUN4QztBQUFBLFFBQ0Y7QUFHQSxjQUFNLFFBQVE7QUFBQSxVQUNaLFdBQVcsaUJBQWlCLFlBQVcsZ0JBQWdCLE9BQU0sR0FBRyxNQUFNLFFBQVEsYUFBYSxPQUFPO0FBQUEsVUFDbEcsUUFBUSxjQUFjLE9BQU07QUFBQSxRQUM5QjtBQU1BLGNBQU0sUUFBUTtBQUNkLGNBQU0sWUFBWSxNQUFNLFFBQVE7QUFLaEMsY0FBTSxpQkFBaUIsUUFBUSxTQUFVLFVBQVU7QUFDakQsaUJBQU8sTUFBTSxjQUFjLFNBQVMsUUFBUSxPQUFPLE9BQU8sQ0FBQyxHQUFHLFNBQVMsSUFBSTtBQUFBLFFBQzdFLENBQUM7QUFFRCxpQkFBUyxRQUFRLEdBQUcsUUFBUSxNQUFNLGlCQUFpQixRQUFRLFNBQVM7QUFDbEUsY0FBSSxNQUFNLFVBQVUsTUFBTTtBQUN4QixrQkFBTSxRQUFRO0FBQ2Qsb0JBQVE7QUFDUjtBQUFBLFVBQ0Y7QUFFQSxjQUFJLHdCQUF3QixNQUFNLGlCQUFpQixRQUMvQyxNQUFLLHNCQUFzQixJQUMzQix5QkFBeUIsc0JBQXNCLFNBQy9DLFdBQVcsMkJBQTJCLFNBQVMsQ0FBQyxJQUFJLHdCQUNwRCxPQUFPLHNCQUFzQjtBQUVqQyxjQUFJLE9BQU8sUUFBTyxZQUFZO0FBQzVCLG9CQUFRLElBQUc7QUFBQSxjQUNUO0FBQUEsY0FDQSxTQUFTO0FBQUEsY0FDVDtBQUFBLGNBQ0E7QUFBQSxZQUNGLENBQUMsS0FBSztBQUFBLFVBQ1I7QUFBQSxRQUNGO0FBQUEsTUFDRjtBQUFBLE1BR0EsUUFBUSxTQUFTLFdBQVk7QUFDM0IsZUFBTyxJQUFJLFFBQVEsU0FBVSxTQUFTO0FBQ3BDLG1CQUFTLFlBQVk7QUFDckIsa0JBQVEsS0FBSztBQUFBLFFBQ2YsQ0FBQztBQUFBLE1BQ0gsQ0FBQztBQUFBLE1BQ0QsU0FBUyxtQkFBbUI7QUFDMUIsK0JBQXVCO0FBQ3ZCLHNCQUFjO0FBQUEsTUFDaEI7QUFBQSxJQUNGO0FBRUEsUUFBSSxDQUFDLGlCQUFpQixZQUFXLE9BQU0sR0FBRztBQUN4QyxhQUFPO0FBQUEsSUFDVDtBQUVBLGFBQVMsV0FBVyxPQUFPLEVBQUUsS0FBSyxTQUFVLFFBQU87QUFDakQsVUFBSSxDQUFDLGVBQWUsUUFBUSxlQUFlO0FBQ3pDLGdCQUFRLGNBQWMsTUFBSztBQUFBLE1BQzdCO0FBQUEsSUFDRixDQUFDO0FBTUQsa0NBQThCO0FBQzVCLFlBQU0saUJBQWlCLFFBQVEsU0FBVSxNQUFNO0FBQzdDLFlBQUksT0FBTyxLQUFLLE1BQ1osZUFBZSxLQUFLLFNBQ3BCLFdBQVUsaUJBQWlCLFNBQVMsQ0FBQyxJQUFJLGNBQ3pDLFVBQVMsS0FBSztBQUVsQixZQUFJLE9BQU8sWUFBVyxZQUFZO0FBQ2hDLGNBQUksWUFBWSxRQUFPO0FBQUEsWUFDckI7QUFBQSxZQUNBO0FBQUEsWUFDQTtBQUFBLFlBQ0EsU0FBUztBQUFBLFVBQ1gsQ0FBQztBQUVELGNBQUksU0FBUyxtQkFBa0I7QUFBQSxVQUFDO0FBRWhDLDJCQUFpQixLQUFLLGFBQWEsTUFBTTtBQUFBLFFBQzNDO0FBQUEsTUFDRixDQUFDO0FBQUEsSUFDSDtBQUVBLHNDQUFrQztBQUNoQyx1QkFBaUIsUUFBUSxTQUFVLEtBQUk7QUFDckMsZUFBTyxJQUFHO0FBQUEsTUFDWixDQUFDO0FBQ0QseUJBQW1CLENBQUM7QUFBQSxJQUN0QjtBQUVBLFdBQU87QUFBQSxFQUNUO0FBQ0Y7OztBQ3pMQSxJQUFJLG1CQUFtQixDQUFDLHdCQUFnQix1QkFBZSx1QkFBZSxxQkFBYSxnQkFBUSxjQUFNLHlCQUFpQixlQUFPLFlBQUk7QUFDN0gsSUFBSSxlQUE0QixnQ0FBZ0I7QUFBQSxFQUM5QztBQUNGLENBQUM7OztBdERKRCxJQUFNLGFBQWEsQ0FBQyxPQUFlLFNBQXlCO0FBQzNELFNBQVMsU0FBUSxPQUFRLFFBQVE7QUFDbEM7QUFFQSxJQUFNLFVBQU4sTUFBaUI7QUFBQSxFQVFoQixZQUNDLE9BQ0EsYUFDQSxPQUNDO0FBQ0QsU0FBSyxRQUFRO0FBQ2IsU0FBSyxjQUFjO0FBRW5CLGdCQUFZLEdBQ1gsU0FDQSxvQkFDQSxLQUFLLGtCQUFrQixLQUFLLElBQUksQ0FDakM7QUFDQSxnQkFBWSxHQUNYLGFBQ0Esb0JBQ0EsS0FBSyxzQkFBc0IsS0FBSyxJQUFJLENBQ3JDO0FBRUEsVUFBTSxTQUFTLENBQUMsR0FBRyxXQUFXLENBQUMsVUFBVTtBQUN4QyxVQUFJLENBQUMsTUFBTSxhQUFhO0FBQ3ZCLGFBQUssZ0JBQWdCLEtBQUssZUFBZSxHQUFHLElBQUk7QUFDaEQsZUFBTztBQUFBLE1BQ1I7QUFBQSxJQUNELENBQUM7QUFFRCxVQUFNLFNBQVMsQ0FBQyxHQUFHLGFBQWEsQ0FBQyxVQUFVO0FBQzFDLFVBQUksQ0FBQyxNQUFNLGFBQWE7QUFDdkIsYUFBSyxnQkFBZ0IsS0FBSyxlQUFlLEdBQUcsSUFBSTtBQUNoRCxlQUFPO0FBQUEsTUFDUjtBQUFBLElBQ0QsQ0FBQztBQUVELFVBQU0sU0FBUyxDQUFDLEdBQUcsU0FBUyxDQUFDLFVBQVU7QUFDdEMsVUFBSSxDQUFDLE1BQU0sYUFBYTtBQUN2QixhQUFLLGdCQUFnQixLQUFLO0FBQzFCLGVBQU87QUFBQSxNQUNSO0FBQUEsSUFDRCxDQUFDO0FBQUEsRUFDRjtBQUFBLEVBRUEsa0JBQWtCLE9BQW1CLElBQTBCO0FBQzlELFVBQU0sZUFBZTtBQUVyQixVQUFNLE9BQU8sS0FBSyxZQUFZLFFBQVEsRUFBRTtBQUN4QyxTQUFLLGdCQUFnQixNQUFNLEtBQUs7QUFDaEMsU0FBSyxnQkFBZ0IsS0FBSztBQUFBLEVBQzNCO0FBQUEsRUFFQSxzQkFBc0IsUUFBb0IsSUFBMEI7QUFDbkUsVUFBTSxPQUFPLEtBQUssWUFBWSxRQUFRLEVBQUU7QUFDeEMsU0FBSyxnQkFBZ0IsTUFBTSxLQUFLO0FBQUEsRUFDakM7QUFBQSxFQUVBLGVBQWUsUUFBYTtBQUMzQixTQUFLLFlBQVksTUFBTTtBQUN2QixVQUFNLGdCQUFrQyxDQUFDO0FBRXpDLFdBQU8sUUFBUSxDQUFDLFVBQVU7QUFDekIsWUFBTSxlQUFlLEtBQUssWUFBWSxVQUFVLGlCQUFpQjtBQUNqRSxXQUFLLE1BQU0saUJBQWlCLE9BQU8sWUFBWTtBQUMvQyxvQkFBYyxLQUFLLFlBQVk7QUFBQSxJQUNoQyxDQUFDO0FBRUQsU0FBSyxTQUFTO0FBQ2QsU0FBSyxjQUFjO0FBQ25CLFNBQUssZ0JBQWdCLEdBQUcsS0FBSztBQUFBLEVBQzlCO0FBQUEsRUFFQSxnQkFBZ0IsT0FBbUM7QUFDbEQsVUFBTSxlQUFlLEtBQUssT0FBTyxLQUFLO0FBQ3RDLFFBQUksY0FBYztBQUNqQixXQUFLLE1BQU0saUJBQWlCLGNBQWMsS0FBSztBQUFBLElBQ2hEO0FBQUEsRUFDRDtBQUFBLEVBRUEsZ0JBQWdCLGVBQXVCLGdCQUF5QjtBQUMvRCxVQUFNLGtCQUFrQixXQUN2QixlQUNBLEtBQUssWUFBWSxNQUNsQjtBQUNBLFVBQU0seUJBQXlCLEtBQUssWUFBWSxLQUFLO0FBQ3JELFVBQU0scUJBQXFCLEtBQUssWUFBWTtBQUU1QyxxRUFBd0IsWUFBWTtBQUNwQyw2REFBb0IsU0FBUztBQUU3QixTQUFLLGVBQWU7QUFFcEIsUUFBSSxnQkFBZ0I7QUFDbkIseUJBQW1CLGVBQWUsS0FBSztBQUFBLElBQ3hDO0FBQUEsRUFDRDtBQUNEO0FBRU8sSUFBZSxtQkFBZixNQUErRDtBQUFBLEVBU3JFLFlBQVksU0FBaUQsUUFBa0Q7QUFDOUcsU0FBSyxVQUFVO0FBQ2YsU0FBSyxTQUFTO0FBQ2QsU0FBSyxRQUFRLElBQUksc0JBQU07QUFFdkIsU0FBSyxZQUFZLFVBQVUsc0JBQXNCO0FBQ2pELFVBQU0sYUFBYSxLQUFLLFVBQVUsVUFBVSxZQUFZO0FBQ3hELFNBQUssVUFBVSxJQUFJLFFBQVEsTUFBTSxZQUFZLEtBQUssS0FBSztBQUV2RCxTQUFLLE1BQU0sU0FBUyxDQUFDLEdBQUcsVUFBVSxLQUFLLE1BQU0sS0FBSyxJQUFJLENBQUM7QUFFdkQsU0FBSyxRQUFRLGlCQUFpQixTQUFTLEtBQUssZUFBZSxLQUFLLElBQUksQ0FBQztBQUNyRSxTQUFLLFFBQVEsaUJBQWlCLFNBQVMsS0FBSyxlQUFlLEtBQUssSUFBSSxDQUFDO0FBQ3JFLFNBQUssUUFBUSxpQkFBaUIsUUFBUSxLQUFLLE1BQU0sS0FBSyxJQUFJLENBQUM7QUFDM0QsU0FBSyxVQUFVLEdBQ2QsYUFDQSx5QkFDQSxDQUFDLFVBQXNCO0FBQ3RCLFlBQU0sZUFBZTtBQUFBLElBQ3RCLENBQ0Q7QUFBQSxFQUNEO0FBQUEsRUFFQSxpQkFBdUI7QUFDdEIsVUFBTSxXQUFXLEtBQUssUUFBUTtBQUM5QixVQUFNLGNBQWMsS0FBSyxlQUFlLFFBQVE7QUFFaEQsUUFBSSxDQUFDLGFBQWE7QUFDakIsV0FBSyxNQUFNO0FBQ1g7QUFBQSxJQUNEO0FBRUEsUUFBSSxZQUFZLFNBQVMsR0FBRztBQUMzQixXQUFLLFFBQVEsZUFBZSxXQUFXO0FBRXZDLFdBQUssS0FBSyxJQUFJLElBQUksZ0JBQWdCLEtBQUssT0FBTztBQUFBLElBQy9DLE9BQU87QUFDTixXQUFLLE1BQU07QUFBQSxJQUNaO0FBQUEsRUFDRDtBQUFBLEVBRUEsS0FBSyxXQUF3QixTQUE0QjtBQUV4RCxTQUFLLE9BQU8sSUFBSSxPQUFPLFVBQVUsS0FBSyxLQUFLO0FBRTNDLGNBQVUsWUFBWSxLQUFLLFNBQVM7QUFDcEMsU0FBSyxTQUFTLGFBQWEsU0FBUyxLQUFLLFdBQVc7QUFBQSxNQUNuRCxXQUFXO0FBQUEsTUFDWCxXQUFXO0FBQUEsUUFDVjtBQUFBLFVBQ0MsTUFBTTtBQUFBLFVBQ04sU0FBUztBQUFBLFVBQ1QsSUFBSSxDQUFDLEVBQUUsT0FBTyxlQUFlO0FBSzVCLGtCQUFNLGNBQWMsR0FBRyxNQUFNLE1BQU0sVUFBVTtBQUM3QyxnQkFBSSxNQUFNLE9BQU8sT0FBTyxVQUFVLGFBQWE7QUFDOUM7QUFBQSxZQUNEO0FBQ0Esa0JBQU0sT0FBTyxPQUFPLFFBQVE7QUFDNUIscUJBQVMsT0FBTztBQUFBLFVBQ2pCO0FBQUEsVUFDQSxPQUFPO0FBQUEsVUFDUCxVQUFVLENBQUMsZUFBZTtBQUFBLFFBQzNCO0FBQUEsTUFDRDtBQUFBLElBQ0QsQ0FBQztBQUFBLEVBQ0Y7QUFBQSxFQUVBLFFBQWM7QUFDYixTQUFLLE9BQU8sSUFBSSxPQUFPLFNBQVMsS0FBSyxLQUFLO0FBRTFDLFNBQUssUUFBUSxlQUFlLENBQUMsQ0FBQztBQUM5QixRQUFJLEtBQUs7QUFBUSxXQUFLLE9BQU8sUUFBUTtBQUNyQyxTQUFLLFVBQVUsT0FBTztBQUFBLEVBQ3ZCO0FBS0Q7OztBdUQ5TUEsd0JBQWlKOzs7QUNEakosd0JBQTRGOzs7QUNBNUYsdUJBQTZFO0FBRzdFLElBQXFCLDBCQUFyQixjQUFxRCx1QkFBTTtBQUFBLEVBTTFELFlBQVksTUFBVSxRQUEyQixNQUFhLFFBQWlCLFlBQTJCO0FBQ3pHLFVBQU0sSUFBRztBQUNULFNBQUssU0FBUztBQUNkLFNBQUssTUFBTTtBQUNYLFNBQUssT0FBTztBQUNaLFNBQUssU0FBUztBQUNkLFNBQUssYUFBYTtBQUFBLEVBQ25CO0FBQUEsRUFDQSxTQUFTO0FBakJWO0FBa0JFLFVBQU0sRUFBRSxjQUFjO0FBQ3RCLGNBQVUsU0FBUyxNQUFNLEVBQUUsTUFBTSwrQ0FBK0MsQ0FBQztBQUNqRixVQUFNLFVBQVUsSUFBSSx5QkFBUSxTQUFTO0FBQ3JDLFlBQVEsT0FBTyxTQUFTLEtBQUssRUFBRSxNQUFNLGlHQUFpRyxDQUFDO0FBRXZJLGtCQUFRLE9BQU8sa0JBQWYsbUJBQThCLFVBQVUsSUFBSTtBQUc1QyxVQUFNLGtCQUFrQixRQUFRLE9BQU8sU0FBUyxPQUFPLEVBQUUsS0FBSyx1Q0FBdUMsQ0FBQztBQUN0RyxRQUFJLDBCQUFTLGFBQWE7QUFDekIsWUFBTSxnQkFBZ0IsZ0JBQWdCLFNBQVMsVUFBVSxFQUFFLE1BQU0sNkJBQThCLENBQUM7QUFDaEcsb0JBQWMsVUFBVSxJQUFJLGVBQWUsOEJBQThCO0FBQ3pFLG9CQUFjLGlCQUFpQixTQUFTLFlBQVk7QUFDbkQsYUFBSyxPQUFPLFNBQVMseUJBQXlCO0FBQzlDLGFBQUssT0FBTyxhQUFhO0FBQ3pCLGFBQUssTUFBTTtBQUNYLDJCQUFtQixLQUFLLFFBQVEsS0FBSyxNQUFNLEtBQUssUUFBUSxLQUFLLFlBQVksSUFBSTtBQUFBLE1BQzlFLENBQUM7QUFBQSxJQUNGLE9BQU87QUFDTixZQUFNLFdBQVcsZ0JBQWdCLFNBQVMsU0FBUyxFQUFFLE1BQU0sV0FBVyxDQUFDO0FBQ3ZFLGVBQVMsaUJBQWlCLFVBQVUsQ0FBQyxNQUFNO0FBQzFDLGNBQU0sU0FBUyxFQUFFO0FBQ2pCLFlBQUksT0FBTyxTQUFTO0FBQ25CLGVBQUssT0FBTyxTQUFTLHlCQUF5QjtBQUFBLFFBQy9DLE9BQU87QUFDTixlQUFLLE9BQU8sU0FBUyx5QkFBeUI7QUFBQSxRQUMvQztBQUFBLE1BQ0QsQ0FBQztBQUNELFlBQU0sZUFBZSxnQkFBZ0IsU0FBUyxRQUFRLEVBQUUsTUFBTSxrQkFBbUIsQ0FBQztBQUNsRixtQkFBYSxpQkFBaUIsU0FBUyxNQUFNO0FBQzVDLGlCQUFTLE1BQU07QUFBQSxNQUNoQixDQUFDO0FBQUEsSUFDRjtBQUNBLFVBQU0sU0FBUyxnQkFBZ0IsU0FBUyxVQUFVLEVBQUUsTUFBTSxTQUFTLENBQUM7QUFDcEUsV0FBTyxVQUFVLElBQUksZUFBZSw4QkFBOEI7QUFDbEUsV0FBTyxpQkFBaUIsU0FBUyxZQUFZO0FBQzVDLFdBQUssT0FBTyxhQUFhO0FBQ3pCLFdBQUssTUFBTTtBQUNYLHlCQUFtQixLQUFLLFFBQVEsS0FBSyxNQUFNLEtBQUssUUFBUSxLQUFLLFlBQVksSUFBSTtBQUFBLElBQzlFLENBQUM7QUFDRCxXQUFPLE1BQU07QUFDYixVQUFNLGVBQWUsZ0JBQWdCLFNBQVMsVUFBVSxFQUFFLE1BQU0sU0FBUyxDQUFDO0FBQzFFLGlCQUFhLGlCQUFpQixTQUFTLFlBQVk7QUFDbEQsV0FBSyxNQUFNO0FBQUEsSUFDWixDQUFDO0FBQUEsRUFFRjtBQUFBLEVBQ0EsVUFBVTtBQUNULFVBQU0sRUFBRSxjQUFjO0FBQ3RCLGNBQVUsTUFBTTtBQUFBLEVBQ2pCO0FBQ0Q7OztBQ2pFQSx1QkFBMEM7QUFFMUMsNkJBQ0MsUUFDQSxNQUNBLE1BQ0EsY0FDQztBQUNELFFBQU0sZUFBZSxlQUNsQixPQUFPLElBQUksTUFBTSxzQkFBc0IsWUFBWSxJQUNuRDtBQUVILE1BQUksZ0JBQWdCLHdCQUF3Qix3QkFBTztBQUNsRCxRQUFJO0FBRUgsWUFBTTtBQUFBLFFBQ0w7QUFBQSxRQUNBO0FBQUEsUUFDQTtBQUFBLFFBQ0E7QUFBQSxVQUNHLG1CQUFtQixPQUFPLEdBQUc7QUFDakMsWUFBTSxrQkFBa0IsTUFBTSxPQUFPLElBQUksTUFBTSxLQUFLLFlBQVk7QUFDaEUsVUFBSSxnQkFBZ0IsU0FBUyx5RkFBK0UsR0FBRztBQUFFO0FBQUEsTUFBUTtBQUl6SCxVQUFJLG9CQUFvQixrQkFBa0I7QUFDekMsWUFBSSxLQUFLLEtBQUssZUFBZSxHQUFHO0FBQy9CLGlCQUFPLE1BQU0sZ0JBQWdCLHVCQUM1QixjQUNBLElBQ0Q7QUFBQSxRQUNELE9BQU87QUFDTixjQUFJLGdCQUFnQixnQ0FBZTtBQUNsQyxpQkFBSyxTQUFTLElBQUksRUFBRSxLQUFLLFlBQVk7QUFDcEMscUJBQU8sTUFBTSxnQkFBZ0IsU0FBUyxlQUFlLGNBQWMsSUFBSTtBQUFBLFlBQ3hFLENBQUM7QUFBQSxVQUNGO0FBQUEsUUFDRDtBQUFBLE1BQ0Q7QUFFQSxVQUFJLGtCQUFrQjtBQUNyQixZQUFJLGdCQUFnQixnQ0FBZTtBQUNsQyxlQUFLLFNBQVMsSUFBSTtBQUFBLFFBQ25CO0FBQ0EsZUFBTyxNQUFNLGdCQUFnQixTQUFTLGVBQWUsWUFBWTtBQUFBLE1BQ2xFO0FBRUEsVUFBSSxrQkFBa0I7QUFDckIsZUFBTyxNQUFNLGdCQUFnQix1QkFDNUIsY0FDQSxJQUNEO0FBQUEsTUFDRDtBQUFBLElBRUQsU0FBUyxHQUFQO0FBQ0QsY0FBUSxNQUFNLENBQUM7QUFBQSxJQUNoQjtBQUFBLEVBQ0Q7QUFDRDtBQUVPLDRCQUE0QixNQUFVO0FBakU3QztBQWtFQyxRQUFNLGtCQUFtQixLQUFZLGdCQUFnQixRQUFRO0FBQzdELFFBQU0sbUJBQW1CLGdCQUFnQjtBQUN6QyxRQUFNLGtCQUFtQixLQUFZLFFBQVEsUUFBUTtBQUNyRCxRQUFNLG1CQUFvQixLQUFZLFFBQVEsZUFBZSxJQUM1RCxvQkFDRDtBQUNBLFFBQU0sNkJBQ0wsbUJBQ0MsWUFBSyxJQUFZLFFBQVEsUUFBUSxzQkFBc0IsYUFBdkQsbUJBQ0U7QUFFSixRQUFNLGlCQUFpQixtQkFDcEIsZ0JBQWdCLFNBQVMsUUFBUSxTQUNqQyxrQkFDQyxnQkFBZ0IsU0FBUyxrQkFDekI7QUFFSixTQUFPO0FBQUEsSUFDTjtBQUFBLElBQ0E7QUFBQSxJQUNBLGlCQUFpQixtREFBaUI7QUFBQSxJQUNsQztBQUFBLElBQ0E7QUFBQSxJQUNBO0FBQUEsRUFDRDtBQUNEOzs7QUN4RkEsd0JBQXNEOzs7QUNIdEQsdUJBQXFEO0FBSXJELElBQXFCLDBCQUFyQixjQUFxRCx1QkFBTTtBQUFBLEVBSTFELFlBQVksTUFBVSxRQUEyQixNQUFhO0FBQzdELFVBQU0sSUFBRztBQUNULFNBQUssU0FBUztBQUNkLFNBQUssTUFBTTtBQUNYLFNBQUssT0FBTztBQUFBLEVBQ2I7QUFBQSxFQUNBLFNBQVM7QUFDUixVQUFNLEVBQUUsV0FBVyxXQUFXO0FBQzlCLFVBQU0sYUFBYSxVQUFVLFVBQVUsRUFBRSxLQUFLLGlCQUFpQixDQUFDO0FBQ2hFLFVBQU0sZUFBZSxVQUFVLFVBQVUsRUFBRSxLQUFLLG1CQUFtQixDQUFDO0FBQ3BFLGVBQVcsU0FBUyxNQUFNLEVBQUUsTUFBTSxxQkFBcUIsQ0FBQztBQUN4RCxpQkFBYSxTQUFTLEtBQUssRUFBRSxNQUFNLG9EQUFvRCxLQUFLLEtBQUssVUFBVSxDQUFDO0FBQzVHLFlBQVEsT0FBTyxTQUFTO0FBQUEsV0FDbEI7QUFDSixxQkFBYSxTQUFTLEtBQUssRUFBRSxNQUFNLHlDQUF5QyxDQUFDO0FBQzdFO0FBQUEsV0FDSTtBQUNKLHFCQUFhLFNBQVMsS0FBSyxFQUFFLE1BQU0seUdBQXlHLENBQUM7QUFDN0k7QUFBQSxXQUNJO0FBQ0oscUJBQWEsU0FBUyxLQUFLLEVBQUUsTUFBTSxrQ0FBa0MsQ0FBQyxFQUFFLGFBQWEsRUFBRSxPQUFPLE1BQU0sQ0FBQztBQUNyRztBQUFBO0FBR0YsVUFBTSxrQkFBa0IsVUFBVSxTQUFTLE9BQU8sRUFBRSxLQUFLLHlCQUF5QixDQUFDO0FBRW5GLFFBQUksQ0FBQywwQkFBUyxVQUFVO0FBQ3ZCLFlBQU0sV0FBVyxnQkFBZ0IsU0FBUyxTQUFTLEVBQUUsS0FBSyxlQUFnQixDQUFDO0FBQzNFLGVBQVMsV0FBVztBQUNwQixZQUFNLFFBQVEsU0FBUyxTQUFTLFNBQVMsRUFBRSxNQUFNLFdBQVcsQ0FBQztBQUM3RCxlQUFTLFdBQVcsaUJBQWtCO0FBQ3RDLFlBQU0saUJBQWlCLFVBQVUsQ0FBQyxNQUFNO0FBQ3ZDLGNBQU0sU0FBUyxFQUFFO0FBQ2pCLFlBQUksT0FBTyxTQUFTO0FBQ25CLGlCQUFPLFNBQVMseUJBQXlCO0FBQUEsUUFDMUMsT0FBTztBQUNOLGlCQUFPLFNBQVMseUJBQXlCO0FBQUEsUUFDMUM7QUFDQSxlQUFPLGFBQWE7QUFBQSxNQUNyQixDQUFDO0FBQUEsSUFDRixPQUFPO0FBQ04sWUFBTSxnQkFBZ0IsZ0JBQWdCLFNBQVMsVUFBVSxFQUFFLE1BQU0sOEJBQStCLEtBQUssa0JBQWtCLENBQUM7QUFDeEgsb0JBQWMsaUJBQWlCLFNBQVMsWUFBWTtBQUNuRCxlQUFPLFNBQVMseUJBQXlCO0FBQ3pDLGVBQU8sYUFBYTtBQUNwQixhQUFLLE1BQU07QUFDWCx5QkFBaUIsUUFBUSxLQUFLLE1BQU0sS0FBSztBQUFBLE1BQzFDLENBQUM7QUFBQSxJQUNGO0FBRUEsVUFBTSxlQUFlLGdCQUFnQixTQUFTLFVBQVUsRUFBRSxNQUFNLFVBQVUsS0FBSyxjQUFjLENBQUM7QUFDOUYsaUJBQWEsaUJBQWlCLFNBQVMsWUFBWTtBQUNsRCxXQUFLLE1BQU07QUFDWCx1QkFBaUIsUUFBUSxLQUFLLE1BQU0sS0FBSztBQUFBLElBQzFDLENBQUM7QUFDRCxpQkFBYSxNQUFNO0FBRW5CLFVBQU0sZUFBZSxnQkFBZ0IsU0FBUyxVQUFVLEVBQUUsTUFBTSxVQUFVLEtBQUssYUFBYSxDQUFDO0FBQzdGLGlCQUFhLGlCQUFpQixTQUFTLFlBQVk7QUFDbEQsV0FBSyxNQUFNO0FBQUEsSUFDWixDQUFDO0FBQUEsRUFDRjtBQUFBLEVBQ0EsVUFBVTtBQUNULFVBQU0sRUFBRSxjQUFjO0FBQ3RCLGNBQVUsTUFBTTtBQUFBLEVBQ2pCO0FBQ0Q7OztBQ3RFTyxtQ0FBbUMsTUFBc0I7QUFDL0QsU0FBTyxLQUFLLFVBQVUsS0FBSyxZQUFZLEdBQUcsS0FBSyxJQUFJLEtBQUssWUFBWSxHQUFHLElBQUksSUFBSSxDQUFDO0FBQ2pGO0FBRU8scUNBQXFDLE1BQXNCO0FBQ2pFLE1BQUksS0FBSyxTQUFTLEtBQUssS0FBSyxLQUFLLFNBQVMsU0FBUyxHQUFHO0FBQ3JELFdBQU8sS0FBSyxNQUFNLEdBQUcsRUFBRSxNQUFNLEVBQUUsRUFBRTtBQUFBLEVBQ2xDLE9BQU87QUFDTixXQUFPLEtBQUssTUFBTSxHQUFHLEVBQUUsTUFBTSxFQUFFLEVBQUU7QUFBQSxFQUNsQztBQUNEO0FBRU8seUJBQXlCLE1BQXNCO0FBQ3JELFNBQU8sS0FBSyxRQUFRLGFBQWEsRUFBRTtBQUNwQztBQU1PLGtDQUFpQyxNQUFzQjtBQUM3RCxRQUFNLFlBQVksS0FBSyxZQUFZLEdBQUcsS0FBSyxJQUFJLEtBQUssWUFBWSxHQUFHLElBQUk7QUFDdkUsUUFBTSxhQUFhLEtBQUssVUFBVSxHQUFHLFNBQVM7QUFDOUMsTUFBSSxlQUFlLElBQUk7QUFDdEIsV0FBTztBQUFBLEVBQ1IsT0FBTztBQUNOLFdBQU87QUFBQSxFQUNSO0FBQ0Q7QUFNTyx5QkFBeUIsUUFBMkI7QUFDMUQsU0FBTyxPQUFPLElBQUksVUFBVSxnQkFBZ0IsZUFBZSxFQUFFO0FBQzlEO0FBTU8sd0JBQXdCLFFBQTJCO0FBQ3pELFFBQU0sZUFBZSxnQkFBZ0IsTUFBTTtBQUMzQyxRQUFNLGNBQWMsYUFBYSxLQUFLLEtBQUs7QUFDM0MsU0FBTztBQUNSOzs7QUNqRE8sSUFBTSxpQkFBTixNQUFxQjtBQUFBLEVBZ0IzQixZQUFZLFNBQWlCLFVBQWtCLElBQXdCLFFBQTJCO0FBQ2pHLFNBQUssT0FBTztBQUNaLFNBQUssS0FBSyxNQUFNLE9BQU8sV0FBVztBQUNsQyxTQUFLLFNBQVM7QUFDZCxTQUFLLFdBQVc7QUFDaEIsU0FBSyxhQUFhLE9BQU8sU0FBUyw4QkFBOEI7QUFDaEUsU0FBSyxjQUFjLE9BQU8sU0FBUyw4QkFBOEI7QUFDakUsU0FBSyxvQkFBb0IsT0FBTyxTQUFTLDhCQUE4QjtBQUN2RSxTQUFLLG9CQUFvQixPQUFPLFNBQVMsOEJBQThCO0FBQ3ZFLFNBQUssbUJBQW1CLE9BQU8sU0FBUyw4QkFBOEI7QUFDdEUsU0FBSyw0QkFBNEIsT0FBTyxTQUFTLDhCQUE4QjtBQUMvRSxTQUFLLE9BQU87QUFDTixTQUFLLGlCQUFpQjtBQUFBLEVBQzdCO0FBQ0Q7OztBQzNCQSx3QkFBa0M7OztBQ0ZsQyx1QkFBdUM7OztBQ0N2Qyx1QkFBcUM7QUFJckMsSUFBTSxjQUFhLENBQUMsT0FBZSxTQUF5QjtBQUMzRCxTQUFTLFNBQVEsT0FBUSxRQUFRO0FBQ2xDO0FBRUEsSUFBTSxXQUFOLE1BQWlCO0FBQUEsRUFRaEIsWUFDQyxPQUNBLGFBQ0EsT0FDQztBQUNELFNBQUssUUFBUTtBQUNiLFNBQUssY0FBYztBQUVuQixnQkFBWSxHQUNYLFNBQ0Esb0JBQ0EsS0FBSyxrQkFBa0IsS0FBSyxJQUFJLENBQ2pDO0FBQ0EsZ0JBQVksR0FDWCxhQUNBLG9CQUNBLEtBQUssc0JBQXNCLEtBQUssSUFBSSxDQUNyQztBQUVBLFVBQU0sU0FBUyxDQUFDLEdBQUcsV0FBVyxDQUFDLFVBQVU7QUFDeEMsVUFBSSxDQUFDLE1BQU0sYUFBYTtBQUN2QixhQUFLLGdCQUFnQixLQUFLLGVBQWUsR0FBRyxJQUFJO0FBQ2hELGVBQU87QUFBQSxNQUNSO0FBQUEsSUFDRCxDQUFDO0FBRUQsVUFBTSxTQUFTLENBQUMsR0FBRyxhQUFhLENBQUMsVUFBVTtBQUMxQyxVQUFJLENBQUMsTUFBTSxhQUFhO0FBQ3ZCLGFBQUssZ0JBQWdCLEtBQUssZUFBZSxHQUFHLElBQUk7QUFDaEQsZUFBTztBQUFBLE1BQ1I7QUFBQSxJQUNELENBQUM7QUFFRCxVQUFNLFNBQVMsQ0FBQyxHQUFHLFNBQVMsQ0FBQyxVQUFVO0FBQ3RDLFVBQUksQ0FBQyxNQUFNLGFBQWE7QUFDdkIsYUFBSyxnQkFBZ0IsS0FBSztBQUMxQixlQUFPO0FBQUEsTUFDUjtBQUFBLElBQ0QsQ0FBQztBQUFBLEVBQ0Y7QUFBQSxFQUVBLGtCQUFrQixPQUFtQixJQUEwQjtBQUM5RCxVQUFNLGVBQWU7QUFFckIsVUFBTSxPQUFPLEtBQUssWUFBWSxRQUFRLEVBQUU7QUFDeEMsU0FBSyxnQkFBZ0IsTUFBTSxLQUFLO0FBQ2hDLFNBQUssZ0JBQWdCLEtBQUs7QUFBQSxFQUMzQjtBQUFBLEVBRUEsc0JBQXNCLFFBQW9CLElBQTBCO0FBQ25FLFVBQU0sT0FBTyxLQUFLLFlBQVksUUFBUSxFQUFFO0FBQ3hDLFNBQUssZ0JBQWdCLE1BQU0sS0FBSztBQUFBLEVBQ2pDO0FBQUEsRUFFQSxlQUFlLFFBQWE7QUFDM0IsU0FBSyxZQUFZLE1BQU07QUFDdkIsVUFBTSxnQkFBa0MsQ0FBQztBQUV6QyxXQUFPLFFBQVEsQ0FBQyxVQUFVO0FBQ3pCLFlBQU0sZUFBZSxLQUFLLFlBQVksVUFBVSxpQkFBaUI7QUFDakUsV0FBSyxNQUFNLGlCQUFpQixPQUFPLFlBQVk7QUFDL0Msb0JBQWMsS0FBSyxZQUFZO0FBQUEsSUFDaEMsQ0FBQztBQUVELFNBQUssU0FBUztBQUNkLFNBQUssY0FBYztBQUNuQixTQUFLLGdCQUFnQixHQUFHLEtBQUs7QUFBQSxFQUM5QjtBQUFBLEVBRUEsZ0JBQWdCLE9BQW1DO0FBQ2xELFVBQU0sZUFBZSxLQUFLLE9BQU8sS0FBSztBQUN0QyxRQUFJLGNBQWM7QUFDakIsV0FBSyxNQUFNLGlCQUFpQixjQUFjLEtBQUs7QUFBQSxJQUNoRDtBQUFBLEVBQ0Q7QUFBQSxFQUVBLGdCQUFnQixlQUF1QixnQkFBeUI7QUFDL0QsVUFBTSxrQkFBa0IsWUFDdkIsZUFDQSxLQUFLLFlBQVksTUFDbEI7QUFDQSxVQUFNLHlCQUF5QixLQUFLLFlBQVksS0FBSztBQUNyRCxVQUFNLHFCQUFxQixLQUFLLFlBQVk7QUFFNUMscUVBQXdCLFlBQVk7QUFDcEMsNkRBQW9CLFNBQVM7QUFFN0IsU0FBSyxlQUFlO0FBRXBCLFFBQUksZ0JBQWdCO0FBQ25CLHlCQUFtQixlQUFlLEtBQUs7QUFBQSxJQUN4QztBQUFBLEVBQ0Q7QUFDRDtBQUVPLElBQWUsb0JBQWYsTUFBK0Q7QUFBQSxFQVNyRSxZQUFZLFNBQWlELFFBQTJCO0FBQ3ZGLFNBQUssVUFBVTtBQUNmLFNBQUssU0FBUztBQUNkLFNBQUssUUFBUSxJQUFJLHVCQUFNO0FBRXZCLFNBQUssWUFBWSxVQUFVLHNCQUFzQjtBQUNqRCxVQUFNLGFBQWEsS0FBSyxVQUFVLFVBQVUsWUFBWTtBQUN4RCxTQUFLLFVBQVUsSUFBSSxTQUFRLE1BQU0sWUFBWSxLQUFLLEtBQUs7QUFFdkQsU0FBSyxNQUFNLFNBQVMsQ0FBQyxHQUFHLFVBQVUsS0FBSyxNQUFNLEtBQUssSUFBSSxDQUFDO0FBRXZELFNBQUssUUFBUSxpQkFBaUIsU0FBUyxLQUFLLGVBQWUsS0FBSyxJQUFJLENBQUM7QUFDckUsU0FBSyxRQUFRLGlCQUFpQixTQUFTLEtBQUssZUFBZSxLQUFLLElBQUksQ0FBQztBQUNyRSxTQUFLLFFBQVEsaUJBQWlCLFFBQVEsS0FBSyxNQUFNLEtBQUssSUFBSSxDQUFDO0FBQzNELFNBQUssVUFBVSxHQUNkLGFBQ0EseUJBQ0EsQ0FBQyxVQUFzQjtBQUN0QixZQUFNLGVBQWU7QUFBQSxJQUN0QixDQUNEO0FBQUEsRUFDRDtBQUFBLEVBRUEsaUJBQXVCO0FBQ3RCLFVBQU0sV0FBVyxLQUFLLFFBQVE7QUFDOUIsVUFBTSxjQUFjLEtBQUssZUFBZSxRQUFRO0FBRWhELFFBQUksQ0FBQyxhQUFhO0FBQ2pCLFdBQUssTUFBTTtBQUNYO0FBQUEsSUFDRDtBQUVBLFFBQUksWUFBWSxTQUFTLEdBQUc7QUFDM0IsV0FBSyxRQUFRLGVBQWUsV0FBVztBQUV2QyxXQUFLLEtBQUssSUFBSSxJQUFJLGdCQUFnQixLQUFLLE9BQU87QUFBQSxJQUMvQyxPQUFPO0FBQ04sV0FBSyxNQUFNO0FBQUEsSUFDWjtBQUFBLEVBQ0Q7QUFBQSxFQUVBLEtBQUssV0FBd0IsU0FBNEI7QUFFeEQsU0FBSyxPQUFPLElBQUksT0FBTyxVQUFVLEtBQUssS0FBSztBQUUzQyxjQUFVLFlBQVksS0FBSyxTQUFTO0FBQ3BDLFNBQUssU0FBUyxhQUFhLFNBQVMsS0FBSyxXQUFXO0FBQUEsTUFDbkQsV0FBVztBQUFBLE1BQ1gsV0FBVztBQUFBLFFBQ1Y7QUFBQSxVQUNDLE1BQU07QUFBQSxVQUNOLFNBQVM7QUFBQSxVQUNULElBQUksQ0FBQyxFQUFFLE9BQU8sZUFBZTtBQUs1QixrQkFBTSxjQUFjLEdBQUcsTUFBTSxNQUFNLFVBQVU7QUFDN0MsZ0JBQUksTUFBTSxPQUFPLE9BQU8sVUFBVSxhQUFhO0FBQzlDO0FBQUEsWUFDRDtBQUNBLGtCQUFNLE9BQU8sT0FBTyxRQUFRO0FBQzVCLHFCQUFTLE9BQU87QUFBQSxVQUNqQjtBQUFBLFVBQ0EsT0FBTztBQUFBLFVBQ1AsVUFBVSxDQUFDLGVBQWU7QUFBQSxRQUMzQjtBQUFBLE1BQ0Q7QUFBQSxJQUNELENBQUM7QUFBQSxFQUNGO0FBQUEsRUFFQSxRQUFjO0FBQ2IsU0FBSyxPQUFPLElBQUksT0FBTyxTQUFTLEtBQUssS0FBSztBQUUxQyxTQUFLLFFBQVEsZUFBZSxDQUFDLENBQUM7QUFDOUIsUUFBSSxLQUFLO0FBQVEsV0FBSyxPQUFPLFFBQVE7QUFDckMsU0FBSyxVQUFVLE9BQU87QUFBQSxFQUN2QjtBQUtEOzs7QURuTU8sSUFBTSxnQkFBTixjQUE0QixrQkFBMEI7QUFBQSxFQUM1RCxZQUNjLFNBQ1AsUUFDRSxvQkFDRCxRQUNOO0FBQ0QsVUFBTSxTQUFTLE1BQU07QUFMUjtBQUVMO0FBQ0Q7QUFBQSxFQUdSO0FBQUEsRUFHQSxjQUFjLE1BQStCO0FBQzVDLFlBQVE7QUFBQSxXQUNGO0FBQ0osZUFBTztBQUFBLFdBQ0g7QUFDSixlQUFPO0FBQUE7QUFBQSxFQUVWO0FBQUEsRUFFQSxlQUFlLFdBQThCO0FBQzVDLFVBQU0sVUFBcUIsQ0FBQztBQUM1QixVQUFNLGtCQUFrQixVQUFVLFlBQVk7QUFDOUMsUUFBSSxRQUF5QixDQUFDO0FBQzlCLFFBQUksS0FBSyxRQUFRO0FBQ2hCLGNBQVEsS0FBSyxPQUFPO0FBQUEsSUFDckIsT0FBTztBQUNOLGNBQVEsS0FBSyxPQUFPLElBQUksTUFBTSxrQkFBa0IsRUFBRSxNQUFNLEdBQUUsR0FBRztBQUFBLElBQzlEO0FBQ0EsVUFBTSxRQUFRLENBQUMsV0FBMEI7QUFDeEMsVUFDQyxrQkFBa0IsNEJBQ04sT0FBTyxLQUFLLFlBQVksRUFBRSxTQUFTLGVBQWUsS0FDakQsRUFBQyxLQUFLLE9BQU8sU0FBUyxlQUFlLEtBQUssQ0FBQyxNQUFNLEVBQUUsU0FBUyxPQUFPLElBQUksS0FBSyxLQUFLLHFCQUM3RjtBQUNELGdCQUFRLEtBQUssTUFBTTtBQUFBLE1BQ3BCO0FBQUEsSUFDRCxDQUFDO0FBRUQsV0FBTztBQUFBLEVBQ1I7QUFBQSxFQUVBLGlCQUFpQixRQUFpQixJQUF1QjtBQUN4RCxPQUFHLFFBQVEsT0FBTyxJQUFJO0FBQUEsRUFDdkI7QUFBQSxFQUVBLGlCQUFpQixRQUF1QjtBQUN2QyxTQUFLLFFBQVEsUUFBUSxPQUFPO0FBQzVCLFNBQUssUUFBUSxRQUFRLE9BQU87QUFDNUIsU0FBSyxNQUFNO0FBQUEsRUFDWjtBQUNEOzs7QUU3REEsdUJBQW9DO0FBR3BDLElBQXFCLHlCQUFyQixjQUFvRCx1QkFBTTtBQUFBLEVBSXpELFlBQVksTUFBVSxRQUEyQixnQkFBZ0M7QUFDaEYsVUFBTSxJQUFHO0FBQ1QsU0FBSyxTQUFTO0FBQ2QsU0FBSyxNQUFNO0FBQ1gsU0FBSyxpQkFBaUI7QUFBQSxFQUN2QjtBQUFBLEVBQ0EsU0FBUztBQUNSLFNBQUssUUFBUTtBQUFBLEVBQ2Q7QUFBQSxFQUNBLFVBQVU7QUFDVCxVQUFNLEVBQUUsY0FBYztBQUN0QixjQUFVLE1BQU07QUFDaEIsY0FBVSxTQUFTLE1BQU0sRUFBRSxNQUFNLDJCQUEyQixDQUFDO0FBQzdELFFBQUkseUJBQVEsU0FBUyxFQUNuQixRQUFRLG9CQUFvQixFQUM1QixRQUFRLGdFQUFnRSxFQUN4RSxVQUFVLENBQUMsV0FDWCxPQUNFLFNBQVMsS0FBSyxlQUFlLFVBQVUsRUFDdkMsU0FBUyxPQUFPLFVBQVU7QUFDMUIsV0FBSyxlQUFlLGFBQWE7QUFDakMsWUFBTSxLQUFLLE9BQU8sYUFBYSxJQUFJO0FBQUEsSUFDcEMsQ0FBQyxDQUNIO0FBRUQsUUFBSSx5QkFBUSxTQUFTLEVBQ25CLFFBQVEsMEJBQTBCLEVBQ2xDLFFBQVEsNkVBQTZFLEVBQ3JGLFVBQVUsQ0FBQyxXQUNYLE9BQ0UsU0FBUyxLQUFLLGVBQWUsV0FBVyxFQUN4QyxTQUFTLE9BQU8sVUFBVTtBQUMxQixXQUFLLGVBQWUsY0FBYztBQUNsQyxZQUFNLEtBQUssT0FBTyxhQUFhO0FBQUEsSUFDaEMsQ0FBQyxDQUNIO0FBRUQsUUFBSSx5QkFBUSxTQUFTLEVBQ25CLFFBQVEsc0NBQXVDLEVBQy9DLFFBQVEsNkRBQTZELEVBQ3JFLFVBQVUsQ0FBQyxXQUNYLE9BQ0UsU0FBUyxLQUFLLGVBQWUseUJBQXlCLEVBQ3RELFNBQVMsT0FBTyxVQUFVO0FBQzFCLFdBQUssZUFBZSw0QkFBNEI7QUFDaEQsWUFBTSxLQUFLLE9BQU8sYUFBYTtBQUFBLElBQ2hDLENBQUMsQ0FDSDtBQUVELFFBQUkseUJBQVEsU0FBUyxFQUNuQixRQUFRLHNEQUFzRCxFQUM5RCxRQUFRLHdFQUF3RSxFQUNoRixVQUFVLENBQUMsV0FDWCxPQUNFLFNBQVMsS0FBSyxlQUFlLGlCQUFpQixFQUM5QyxTQUFTLE9BQU8sVUFBVTtBQUMxQixXQUFLLGVBQWUsb0JBQW9CO0FBQ3hDLFlBQU0sS0FBSyxPQUFPLGFBQWE7QUFBQSxJQUNoQyxDQUFDLENBQ0g7QUFFRCxRQUFJLHlCQUFRLFNBQVMsRUFDbkIsUUFBUSwwQkFBMEIsRUFDbEMsUUFBUSxzRUFBc0UsRUFDOUUsVUFBVSxDQUFDLFdBQ1gsT0FDRSxTQUFTLEtBQUssZUFBZSxpQkFBaUIsRUFDOUMsU0FBUyxPQUFPLFVBQVU7QUFDMUIsV0FBSyxlQUFlLG9CQUFvQjtBQUN4QyxZQUFNLEtBQUssT0FBTyxhQUFhLElBQUk7QUFDbkMsV0FBSyxRQUFRO0FBQUEsSUFDZCxDQUFDLENBQ0g7QUFFRCxRQUFJLENBQUMsS0FBSyxlQUFlLG1CQUFtQjtBQUMzQyxVQUFJLHlCQUFRLFNBQVMsRUFDbkIsUUFBUSwwQ0FBMEMsRUFDbEQsUUFBUSx5RUFBeUUsRUFDakYsVUFBVSxDQUFDLFdBQ1gsT0FDRSxTQUFTLEtBQUssZUFBZSxnQkFBZ0IsRUFDN0MsU0FBUyxPQUFPLFVBQVU7QUFDMUIsYUFBSyxlQUFlLG1CQUFtQjtBQUN2QyxjQUFNLEtBQUssT0FBTyxhQUFhO0FBQUEsTUFDaEMsQ0FBQyxDQUNIO0FBQUEsSUFDRjtBQUFBLEVBRUQ7QUFBQSxFQUNBLFVBQVU7QUFDVCxVQUFNLEVBQUUsY0FBYztBQUN0QixjQUFVLE1BQU07QUFBQSxFQUNqQjtBQUNEOzs7QUNsR0EsdUJBQWtDOzs7QUNGbEMsdUJBQW9DO0FBSXBDLElBQXFCLGtCQUFyQixjQUE2Qyx1QkFBTTtBQUFBLEVBSWxELFlBQVksTUFBVSxRQUEyQixTQUF5QjtBQUN6RSxVQUFNLElBQUc7QUFDVCxTQUFLLFNBQVM7QUFDZCxTQUFLLE1BQU07QUFDWCxTQUFLLFVBQVU7QUFBQSxFQUNoQjtBQUFBLEVBQ0EsU0FBUztBQUNSLFNBQUssUUFBUTtBQUFBLEVBQ2Q7QUFBQSxFQUNBLFVBQVU7QUFDVCxVQUFNLEVBQUUsY0FBYztBQUN0QixjQUFVLE1BQU07QUFDaEIsY0FBVSxTQUFTLE1BQU0sRUFBRSxNQUFNLG1CQUFtQixDQUFDO0FBRXJELFFBQUkseUJBQVEsU0FBUyxFQUNuQixRQUFRLDBCQUEwQixFQUNsQyxRQUFRLGlGQUFpRixFQUN6RixVQUFVLENBQUMsV0FDWCxPQUNFLFNBQVMsS0FBSyxRQUFRLFdBQVcsRUFDakMsU0FBUyxPQUFPLFVBQVU7QUFDMUIsV0FBSyxRQUFRLGNBQWM7QUFDM0IsWUFBTSxLQUFLLE9BQU8sYUFBYTtBQUFBLElBQ2hDLENBQUMsQ0FDSDtBQUVELFFBQUkseUJBQVEsU0FBUyxFQUNuQixRQUFRLHNEQUFzRCxFQUM5RCxRQUFRLGtHQUFrRyxFQUMxRyxVQUFVLENBQUMsV0FDWCxPQUNFLFNBQVMsS0FBSyxRQUFRLGlCQUFpQixFQUN2QyxTQUFTLE9BQU8sVUFBVTtBQUMxQixXQUFLLFFBQVEsb0JBQW9CO0FBQ2pDLFlBQU0sS0FBSyxPQUFPLGFBQWE7QUFBQSxJQUNoQyxDQUFDLENBQ0g7QUFFRCxRQUFJLHlCQUFRLFNBQVMsRUFDbkIsUUFBUSxzQ0FBdUMsRUFDL0MsUUFBUSw2REFBNkQsRUFDckUsVUFBVSxDQUFDLFdBQ1gsT0FDRSxTQUFTLEtBQUssUUFBUSx5QkFBeUIsRUFDL0MsU0FBUyxPQUFPLFVBQVU7QUFDMUIsV0FBSyxRQUFRLDRCQUE0QjtBQUN6QyxZQUFNLEtBQUssT0FBTyxhQUFhO0FBQUEsSUFDaEMsQ0FBQyxDQUNIO0FBRUQsUUFBSSx5QkFBUSxTQUFTLEVBQ25CLFFBQVEsMEJBQTBCLEVBQ2xDLFFBQVEsc0VBQXNFLEVBQzlFLFVBQVUsQ0FBQyxXQUNYLE9BQ0UsU0FBUyxLQUFLLFFBQVEsaUJBQWlCLEVBQ3ZDLFNBQVMsT0FBTyxVQUFVO0FBQzFCLFdBQUssUUFBUSxvQkFBb0I7QUFDakMsWUFBTSxLQUFLLE9BQU8sYUFBYSxJQUFJO0FBQ25DLFdBQUssUUFBUTtBQUFBLElBQ2QsQ0FBQyxDQUNIO0FBRUQsUUFBSSxDQUFDLEtBQUssUUFBUSxtQkFBbUI7QUFDcEMsVUFBSSx5QkFBUSxTQUFTLEVBQ25CLFFBQVEsMENBQTBDLEVBQ2xELFFBQVEseUVBQXlFLEVBQ2pGLFVBQVUsQ0FBQyxXQUNYLE9BQ0UsU0FBUyxLQUFLLFFBQVEsZ0JBQWdCLEVBQ3RDLFNBQVMsT0FBTyxVQUFVO0FBQzFCLGFBQUssUUFBUSxtQkFBbUI7QUFDaEMsY0FBTSxLQUFLLE9BQU8sYUFBYTtBQUFBLE1BQ2hDLENBQUMsQ0FDSDtBQUFBLElBQ0Y7QUFBQSxFQUVEO0FBQUEsRUFDQSxVQUFVO0FBQ1QsVUFBTSxFQUFFLGNBQWM7QUFDdEIsY0FBVSxNQUFNO0FBQUEsRUFDakI7QUFDRDs7O0FEbkZPLHVCQUF1QixRQUEyQixTQUF5QixZQUE0QjtBQUMxRyxTQUFPLFNBQVMsaUJBQWlCLE9BQU8sU0FBUyxlQUFlLE9BQU8sQ0FBQyxXQUFXLE9BQU8sT0FBTyxRQUFRLEVBQUU7QUFDM0csb0JBQWtCLFFBQVEsVUFBVTtBQUN4QztBQUVPLHVCQUF1QixRQUEyQixTQUF5QjtBQUM5RSxTQUFPLFNBQVMsaUJBQWlCLE9BQU8sU0FBUyxlQUFlLE9BQU8sQ0FBQyxXQUFXLE9BQU8sT0FBTyxRQUFRLE1BQU0sT0FBTyxTQUFTLFFBQVE7QUFDdkksU0FBTyxhQUFhLElBQUk7QUFDeEIsY0FBWSxNQUFNO0FBQ3RCO0FBRU8scUNBQXFDLFFBQTJCLFlBQXNDO0FBQ3pHLFNBQU8sT0FBTyxTQUFTLGVBQWUsT0FBTyxDQUFDLE1BQU0sRUFBRSxRQUFRLFNBQVMsRUFBRSxPQUFPLENBQUMsWUFBWTtBQUN6RixRQUFJLENBQUMsUUFBUSxRQUFRO0FBQUUsYUFBTztBQUFBLElBQU87QUFDckMsVUFBTSxTQUFTLFFBQVEsT0FBTyxLQUFLO0FBQ25DLFFBQUksQ0FBQyxPQUFPLFdBQVcsU0FBUyxLQUFLLENBQUUsUUFBTyxXQUFXLEdBQUcsS0FBSyxPQUFPLFNBQVMsR0FBRyxJQUFJO0FBQUUsYUFBTztBQUFBLElBQU87QUFDeEcsVUFBTSxRQUFRLE9BQU8sUUFBUSxXQUFXLEVBQUUsRUFBRSxLQUFLO0FBQ2pELFFBQUksT0FBTyxXQUFXLFNBQVMsS0FBSyxVQUFVLElBQUk7QUFBRSxhQUFPO0FBQUEsSUFBTztBQUNsRSxRQUFJLFVBQVUsVUFBYSxPQUFPLFdBQVcsU0FBUyxHQUFHO0FBQ3JELFlBQU0sUUFBUSxJQUFJLE9BQU8sS0FBSyxFQUFFLEtBQUssVUFBVTtBQUMvQyxVQUFJLE9BQU87QUFDUCxlQUFPO0FBQUEsTUFDWDtBQUFBLElBQ0osV0FBVyxPQUFPLFdBQVcsR0FBRyxLQUFLLE9BQU8sU0FBUyxHQUFHLEdBQUc7QUFDdkQsVUFBSSxXQUFXLFNBQVMsT0FBTyxNQUFNLEdBQUcsRUFBRSxDQUFDLEdBQUc7QUFDMUMsZUFBTztBQUFBLE1BQ1g7QUFBQSxJQUNKLFdBQVcsT0FBTyxXQUFXLEdBQUcsR0FBRztBQUMvQixVQUFJLFdBQVcsU0FBUyxPQUFPLE1BQU0sQ0FBQyxDQUFDLEdBQUc7QUFDdEMsZUFBTztBQUFBLE1BQ1g7QUFBQSxJQUNKLFdBQVcsT0FBTyxTQUFTLEdBQUcsR0FBRztBQUM3QixVQUFJLFdBQVcsV0FBVyxPQUFPLE1BQU0sR0FBRyxFQUFFLENBQUMsR0FBRztBQUM1QyxlQUFPO0FBQUEsTUFDWDtBQUFBLElBQ0o7QUFBQSxFQUNKLENBQUM7QUFDTDtBQThCTyxtQ0FBbUMsVUFBdUIsYUFBMEIsU0FBeUI7QUFDaEgsUUFBTSxTQUE0QixTQUFTO0FBQzNDLFFBQU0sVUFBVSxJQUFJLHlCQUFRLFdBQVc7QUFDdkMsVUFBUSxTQUFTLHdCQUF3QjtBQUN6QyxVQUFRLFVBQVUsQ0FBQyxPQUFPO0FBRXRCLE9BQUcsWUFBWSxTQUFTLHdCQUF3QjtBQUNoRCxPQUFHLGVBQWUsU0FBUztBQUMzQixPQUFHLFNBQVMsUUFBUSxNQUFNO0FBQzFCLE9BQUcsU0FBUyxDQUFDLFVBQVU7QUFDbkIsY0FBUSxTQUFTO0FBQ2pCLG9CQUFjLFFBQVEsU0FBUyxPQUFPO0FBQUEsSUFDMUMsQ0FBQztBQUFBLEVBQ0wsQ0FBQztBQUNELFVBQVEsVUFBVSxDQUFDLE9BQU87QUFDdEIsT0FBRyxRQUFRLE1BQU07QUFDakIsT0FBRyxXQUFXLGNBQWM7QUFDNUIsT0FBRyxRQUFRLE1BQU07QUFDYixVQUFJLGdCQUFnQixPQUFPLEtBQUssUUFBUSxPQUFPLEVBQUUsS0FBSztBQUFBLElBQzFELENBQUM7QUFBQSxFQUNMLENBQUM7QUFFRCxNQUFJLDBCQUFTLGFBQWEsMEJBQVMsVUFBVTtBQUN6QyxZQUFRLFVBQVUsQ0FBQyxPQUFPO0FBQ3RCLFNBQUcsUUFBUSxrQkFBa0I7QUFDN0IsU0FBRyxXQUFXLFNBQVM7QUFDdkIsU0FBRyxRQUFRLE1BQU07QUFDYixZQUFJLFFBQVEsYUFBYSxHQUFHO0FBQUU7QUFBQSxRQUFRO0FBQ3RDLGdCQUFRLFlBQVk7QUFDcEIsc0JBQWMsUUFBUSxTQUFTLE9BQU87QUFDdEMsY0FBTSxhQUFhLE9BQU8sU0FBUyxlQUFlLEtBQUssQ0FBQyxXQUFXLE9BQU8sYUFBYSxRQUFRLFFBQVE7QUFDdkcsWUFBSSxZQUFZO0FBQ1oscUJBQVcsWUFBWTtBQUN2QixjQUFJLFdBQVcsU0FBUyxXQUFXO0FBQy9CLDBCQUFjLFFBQVEsWUFBWSxVQUFVO0FBQUEsVUFDaEQsT0FBTztBQUNILGlDQUFxQixRQUFRLFlBQVksVUFBVTtBQUFBLFVBQ3ZEO0FBQUEsUUFDSjtBQUNBLGlCQUFTLFFBQVE7QUFBQSxNQUNyQixDQUFDO0FBQUEsSUFDTCxDQUFDO0FBRUQsWUFBUSxVQUFVLENBQUMsT0FBTztBQUN0QixTQUFHLFFBQVEsb0JBQW9CO0FBQy9CLFNBQUcsV0FBVyxXQUFXO0FBQ3pCLFNBQUcsUUFBUSxNQUFNO0FBQ2IsWUFBSSxRQUFRLGFBQWEsT0FBTyxTQUFTLGVBQWUsU0FBUyxHQUFHO0FBQ2hFO0FBQUEsUUFDSjtBQUNBLGdCQUFRLFlBQVk7QUFFcEIsc0JBQWMsUUFBUSxTQUFTLE9BQU87QUFDdEMsY0FBTSxhQUFhLE9BQU8sU0FBUyxlQUFlLEtBQUssQ0FBQyxXQUFXLE9BQU8sYUFBYSxRQUFRLFFBQVE7QUFDdkcsWUFBSSxZQUFZO0FBQ1oscUJBQVcsWUFBWTtBQUN2QixjQUFJLFdBQVcsU0FBUyxXQUFXO0FBQy9CLDBCQUFjLFFBQVEsWUFBWSxVQUFVO0FBQUEsVUFDaEQsT0FBTztBQUNILGlDQUFxQixRQUFRLFlBQVksVUFBVTtBQUFBLFVBQ3ZEO0FBQUEsUUFDSjtBQUNBLGlCQUFTLFFBQVE7QUFBQSxNQUNyQixDQUFDO0FBQUEsSUFDTCxDQUFDO0FBQUEsRUFDTDtBQUVBLFVBQVEsVUFBVSxDQUFDLE9BQU87QUFDdEIsT0FBRyxRQUFRLFNBQVM7QUFDcEIsT0FBRyxXQUFXLGdCQUFnQjtBQUM5QixPQUFHLFFBQVEsTUFBTTtBQUNiLG9CQUFjLFFBQVEsT0FBTztBQUM3QixjQUFRLE1BQU07QUFDZCxjQUFRLFVBQVUsT0FBTztBQUFBLElBQzdCLENBQUM7QUFBQSxFQUNMLENBQUM7QUFDTDs7O0FFckpPLElBQU0scUJBQU4sTUFBeUI7QUFBQSxFQWEvQixZQUFZLFNBQWlCLFVBQWtCLElBQXdCLFFBQTJCO0FBQ2pHLFNBQUssT0FBTztBQUNaLFNBQUssS0FBSyxNQUFNLE9BQU8sV0FBVztBQUNsQyxTQUFLLGFBQWEsT0FBTyxTQUFTLDhCQUE4QjtBQUNoRSxTQUFLLFdBQVc7QUFDaEIsU0FBSyxTQUFTO0FBQ2QsU0FBSyxPQUFPO0FBQUEsRUFDYjtBQUNEOzs7QUNsQkEsd0JBQW1EOzs7QUNKbkQsd0JBQW9DO0FBR3BDLElBQXFCLDBCQUFyQixjQUFxRCx3QkFBTTtBQUFBLEVBSTFELFlBQVksTUFBVSxRQUEyQixtQkFBc0M7QUFDdEYsVUFBTSxJQUFHO0FBQ1QsU0FBSyxTQUFTO0FBQ2QsU0FBSyxNQUFNO0FBQ1gsU0FBSyxvQkFBb0I7QUFBQSxFQUMxQjtBQUFBLEVBQ0EsU0FBUztBQUNSLFNBQUssUUFBUTtBQUFBLEVBQ2Q7QUFBQSxFQUNBLFVBQVU7QUFDVCxVQUFNLEVBQUUsY0FBYztBQUN0QixjQUFVLE1BQU07QUFDaEIsY0FBVSxTQUFTLE1BQU0sRUFBRSxNQUFNLDhCQUE4QixDQUFDO0FBQ2hFLFFBQUksMEJBQVEsU0FBUyxFQUNuQixRQUFRLG9CQUFvQixFQUM1QixRQUFRLG1FQUFtRSxFQUMzRSxVQUFVLENBQUMsV0FDWCxPQUNFLFNBQVMsS0FBSyxrQkFBa0IsVUFBVSxFQUMxQyxTQUFTLE9BQU8sVUFBVTtBQUMxQixXQUFLLGtCQUFrQixhQUFhO0FBQ3BDLFlBQU0sS0FBSyxPQUFPLGFBQWEsSUFBSTtBQUFBLElBQ3BDLENBQUMsQ0FDSDtBQUVELFFBQUksMEJBQVEsU0FBUyxFQUNuQixRQUFRLHlCQUF5QixFQUNqQyxRQUFRLHVGQUF1RixFQUMvRixVQUFVLENBQUMsV0FDWCxPQUNFLFNBQVMsS0FBSyxrQkFBa0IsVUFBVSxFQUMxQyxTQUFTLE9BQU8sVUFBVTtBQUMxQixXQUFLLGtCQUFrQixhQUFhO0FBQ3BDLFlBQU0sS0FBSyxPQUFPLGFBQWE7QUFBQSxJQUNoQyxDQUFDLENBQ0g7QUFFRCxRQUFJLDBCQUFRLFNBQVMsRUFDbkIsUUFBUSxnQ0FBZ0MsRUFDeEMsUUFBUSw2REFBNkQsRUFDckUsVUFBVSxDQUFDLFdBQ1gsT0FDRSxTQUFTLEtBQUssa0JBQWtCLG9CQUFvQixFQUNwRCxTQUFTLE9BQU8sVUFBVTtBQUMxQixXQUFLLGtCQUFrQix1QkFBdUI7QUFDOUMsWUFBTSxLQUFLLE9BQU8sYUFBYTtBQUFBLElBQ2hDLENBQUMsQ0FDSDtBQUVELFFBQUksMEJBQVEsU0FBUyxFQUNuQixRQUFRLG9EQUFvRCxFQUM1RCxVQUFVLENBQUMsV0FDWCxPQUNFLFNBQVMsS0FBSyxrQkFBa0IsZ0JBQWdCLEVBQ2hELFNBQVMsT0FBTyxVQUFVO0FBQzFCLFdBQUssa0JBQWtCLG1CQUFtQjtBQUMxQyxZQUFNLEtBQUssT0FBTyxhQUFhO0FBQUEsSUFDaEMsQ0FBQyxDQUNIO0FBR0QsUUFBSSwwQkFBUSxTQUFTLEVBQ25CLFFBQVEsOENBQThDLEVBQ3RELFFBQVEsc0VBQXNFLEVBQzlFLFVBQVUsQ0FBQyxXQUNYLE9BQ0UsU0FBUyxLQUFLLGtCQUFrQixnQkFBZ0IsRUFDaEQsU0FBUyxPQUFPLFVBQVU7QUFDMUIsV0FBSyxrQkFBa0IsbUJBQW1CO0FBQzFDLFlBQU0sS0FBSyxPQUFPLGFBQWEsSUFBSTtBQUNuQyxXQUFLLFFBQVE7QUFBQSxJQUNkLENBQUMsQ0FDSDtBQUVELFFBQUksS0FBSyxrQkFBa0Isa0JBQWtCO0FBQzVDLFVBQUksMEJBQVEsU0FBUyxFQUNuQixRQUFRLDBDQUEwQyxFQUNsRCxRQUFRLHlFQUF5RSxFQUNqRixVQUFVLENBQUMsV0FDWCxPQUNFLFNBQVMsS0FBSyxrQkFBa0IsZ0JBQWdCLEVBQ2hELFNBQVMsT0FBTyxVQUFVO0FBQzFCLGFBQUssa0JBQWtCLG1CQUFtQjtBQUMxQyxjQUFNLEtBQUssT0FBTyxhQUFhO0FBQUEsTUFDaEMsQ0FBQyxDQUNIO0FBQUEsSUFDRjtBQUFBLEVBRUQ7QUFBQSxFQUNBLFVBQVU7QUFDVCxVQUFNLEVBQUUsY0FBYztBQUN0QixjQUFVLE1BQU07QUFBQSxFQUNqQjtBQUNEOzs7QUNuR0Esd0JBQXdCOzs7QUNEeEIsd0JBQW9DO0FBSXBDLElBQXFCLDJCQUFyQixjQUFzRCx3QkFBTTtBQUFBLEVBSTNELFlBQVksTUFBVSxRQUEyQixTQUE2QjtBQUM3RSxVQUFNLElBQUc7QUFDVCxTQUFLLFNBQVM7QUFDZCxTQUFLLE1BQU07QUFDWCxTQUFLLFVBQVU7QUFBQSxFQUNoQjtBQUFBLEVBQ0EsU0FBUztBQUNSLFNBQUssUUFBUTtBQUFBLEVBQ2Q7QUFBQSxFQUNBLFVBQVU7QUFDVCxVQUFNLEVBQUUsY0FBYztBQUN0QixjQUFVLE1BQU07QUFDaEIsY0FBVSxTQUFTLE1BQU0sRUFBRSxNQUFNLCtCQUErQixDQUFDO0FBQ2pFLFFBQUksMEJBQVEsU0FBUyxFQUNuQixRQUFRLHlCQUF5QixFQUNqQyxRQUFRLHVGQUF1RixFQUMvRixVQUFVLENBQUMsV0FDWCxPQUNFLFNBQVMsS0FBSyxRQUFRLFVBQVUsRUFDaEMsU0FBUyxPQUFPLFVBQVU7QUFDMUIsV0FBSyxRQUFRLGFBQWE7QUFDMUIsWUFBTSxLQUFLLE9BQU8sYUFBYTtBQUFBLElBQ2hDLENBQUMsQ0FDSDtBQUVELFFBQUksMEJBQVEsU0FBUyxFQUNuQixRQUFRLG9EQUFvRCxFQUM1RCxVQUFVLENBQUMsV0FDWCxPQUNFLFNBQVMsS0FBSyxRQUFRLGdCQUFnQixFQUN0QyxTQUFTLE9BQU8sVUFBVTtBQUMxQixXQUFLLFFBQVEsbUJBQW1CO0FBQ2hDLFlBQU0sS0FBSyxPQUFPLGFBQWE7QUFBQSxJQUNoQyxDQUFDLENBQ0g7QUFFRCxRQUFJLDBCQUFRLFNBQVMsRUFDbkIsUUFBUSxnQ0FBZ0MsRUFDeEMsUUFBUSw2REFBNkQsRUFDckUsVUFBVSxDQUFDLFdBQ1gsT0FDRSxTQUFTLEtBQUssUUFBUSxvQkFBb0IsRUFDMUMsU0FBUyxPQUFPLFVBQVU7QUFDMUIsV0FBSyxRQUFRLHVCQUF1QjtBQUNwQyxZQUFNLEtBQUssT0FBTyxhQUFhO0FBQUEsSUFDaEMsQ0FBQyxDQUNIO0FBR0QsUUFBSSwwQkFBUSxTQUFTLEVBQ25CLFFBQVEsOENBQThDLEVBQ3RELFFBQVEseUVBQXlFLEVBQ2pGLFVBQVUsQ0FBQyxXQUNYLE9BQ0UsU0FBUyxLQUFLLFFBQVEsZ0JBQWdCLEVBQ3RDLFNBQVMsT0FBTyxVQUFVO0FBQzFCLFdBQUssUUFBUSxtQkFBbUI7QUFDaEMsWUFBTSxLQUFLLE9BQU8sYUFBYSxJQUFJO0FBQ25DLFdBQUssUUFBUTtBQUFBLElBQ2QsQ0FBQyxDQUNIO0FBRUQsUUFBSSxLQUFLLFFBQVEsa0JBQWtCO0FBQ2xDLFVBQUksMEJBQVEsU0FBUyxFQUNuQixRQUFRLDBDQUEwQyxFQUNsRCxRQUFRLHlFQUF5RSxFQUNqRixVQUFVLENBQUMsV0FDWCxPQUNFLFNBQVMsS0FBSyxRQUFRLGdCQUFnQixFQUN0QyxTQUFTLE9BQU8sVUFBVTtBQUMxQixhQUFLLFFBQVEsbUJBQW1CO0FBQ2hDLGNBQU0sS0FBSyxPQUFPLGFBQWE7QUFBQSxNQUNoQyxDQUFDLENBQ0g7QUFBQSxJQUNGO0FBQUEsRUFFRDtBQUFBLEVBQ0EsVUFBVTtBQUNULFVBQU0sRUFBRSxjQUFjO0FBQ3RCLGNBQVUsTUFBTTtBQUFBLEVBQ2pCO0FBQ0Q7OztBRGpGTyxrQ0FBa0MsUUFBMkIsU0FBNkIsWUFBZ0M7QUFDN0gsU0FBTyxTQUFTLG1CQUFtQixPQUFPLFNBQVMsaUJBQWlCLE9BQU8sQ0FBQyxXQUFXLE9BQU8sT0FBTyxRQUFRLEVBQUU7QUFDL0csdUJBQXFCLFFBQVEsVUFBVTtBQUMzQztBQUVPLHdCQUF1QixRQUEyQixTQUE2QjtBQUNsRixTQUFPLFNBQVMsbUJBQW1CLE9BQU8sU0FBUyxpQkFBaUIsT0FBTyxDQUFDLFdBQVcsT0FBTyxPQUFPLFFBQVEsTUFBTSxPQUFPLFNBQVMsUUFBUTtBQUMzSSxTQUFPLGFBQWEsSUFBSTtBQUN4QixjQUFZLE1BQU07QUFDdEI7QUE4Qk8sd0NBQXdDLFFBQTJCLFlBQW9CO0FBQzFGLFNBQU8sT0FBTyxTQUFTLGlCQUFpQixPQUFPLENBQUMsTUFBTSxFQUFFLFFBQVEsU0FBUyxFQUFFLE9BQU8sQ0FBQyxZQUFZO0FBQzNGLFFBQUksQ0FBQyxRQUFRLFFBQVE7QUFBRSxhQUFPO0FBQUEsSUFBTztBQUNyQyxVQUFNLFNBQVMsUUFBUSxPQUFPLEtBQUs7QUFDbkMsUUFBSSxDQUFDLE9BQU8sV0FBVyxTQUFTLEtBQUssQ0FBRSxRQUFPLFdBQVcsR0FBRyxLQUFLLE9BQU8sU0FBUyxHQUFHLElBQUk7QUFBRSxhQUFPO0FBQUEsSUFBTztBQUN4RyxVQUFNLFFBQVEsT0FBTyxRQUFRLFdBQVcsRUFBRSxFQUFFLEtBQUs7QUFDakQsUUFBSSxPQUFPLFdBQVcsU0FBUyxLQUFLLFVBQVUsSUFBSTtBQUFFLGFBQU87QUFBQSxJQUFPO0FBQ2xFLFFBQUksVUFBVSxVQUFhLE9BQU8sV0FBVyxTQUFTLEdBQUc7QUFDckQsWUFBTSxRQUFRLElBQUksT0FBTyxLQUFLLEVBQUUsS0FBSyxVQUFVO0FBQy9DLFVBQUksT0FBTztBQUNQLGVBQU87QUFBQSxNQUNYO0FBQUEsSUFDSixXQUFXLE9BQU8sV0FBVyxHQUFHLEtBQUssT0FBTyxTQUFTLEdBQUcsR0FBRztBQUN2RCxVQUFJLFdBQVcsU0FBUyxPQUFPLE1BQU0sR0FBRyxFQUFFLENBQUMsR0FBRztBQUMxQyxlQUFPO0FBQUEsTUFDWDtBQUFBLElBQ0osV0FBVyxPQUFPLFdBQVcsR0FBRyxHQUFHO0FBQy9CLFVBQUksV0FBVyxTQUFTLE9BQU8sTUFBTSxDQUFDLENBQUMsR0FBRztBQUN0QyxlQUFPO0FBQUEsTUFDWDtBQUFBLElBQ0osV0FBVyxPQUFPLFNBQVMsR0FBRyxHQUFHO0FBQzdCLFVBQUksV0FBVyxXQUFXLE9BQU8sTUFBTSxHQUFHLEVBQUUsQ0FBQyxHQUFHO0FBQzVDLGVBQU87QUFBQSxNQUNYO0FBQUEsSUFDSjtBQUFBLEVBQ0osQ0FBQztBQUNMO0FBRU8sdUNBQXVDLFVBQXVCLGFBQTBCLFNBQTZCO0FBQ3hILFFBQU0sU0FBNEIsU0FBUztBQUMzQyxRQUFNLFVBQVUsSUFBSSwwQkFBUSxXQUFXO0FBQ3ZDLFVBQVEsU0FBUyx3QkFBd0I7QUFDekMsVUFBUSxVQUFVLENBQUMsT0FBTztBQUV0QixPQUFHLFlBQVksU0FBUyx3QkFBd0I7QUFDaEQsT0FBRyxlQUFlLFNBQVM7QUFDM0IsT0FBRyxTQUFTLFFBQVEsTUFBTTtBQUMxQixPQUFHLFNBQVMsQ0FBQyxVQUFVO0FBQ25CLFVBQUksT0FBTyxTQUFTLGlCQUFpQixLQUFLLENBQUMsV0FBVyxPQUFPLFdBQVcsS0FBSyxHQUFHO0FBQUU7QUFBQSxNQUFRO0FBQzFGLGNBQVEsU0FBUztBQUNqQiwrQkFBeUIsUUFBUSxTQUFTLE9BQU87QUFBQSxJQUNyRCxDQUFDO0FBQUEsRUFDTCxDQUFDO0FBQ0QsVUFBUSxVQUFVLENBQUMsT0FBTztBQUN0QixPQUFHLFFBQVEsTUFBTTtBQUNqQixPQUFHLFdBQVcsY0FBYztBQUM1QixPQUFHLFFBQVEsTUFBTTtBQUNiLFVBQUkseUJBQXlCLE9BQU8sS0FBSyxRQUFRLE9BQU8sRUFBRSxLQUFLO0FBQUEsSUFDbkUsQ0FBQztBQUFBLEVBQ0wsQ0FBQztBQUVELFVBQVEsVUFBVSxDQUFDLE9BQU87QUFDdEIsT0FBRyxRQUFRLGtCQUFrQjtBQUM3QixPQUFHLFdBQVcsU0FBUztBQUN2QixPQUFHLFFBQVEsTUFBTTtBQUNiLFVBQUksUUFBUSxhQUFhLEdBQUc7QUFBRTtBQUFBLE1BQVE7QUFDdEMsY0FBUSxZQUFZO0FBQ3BCLCtCQUF5QixRQUFRLFNBQVMsT0FBTztBQUNqRCxZQUFNLGFBQWEsT0FBTyxTQUFTLGlCQUFpQixLQUFLLENBQUMsV0FBVyxPQUFPLGFBQWEsUUFBUSxRQUFRO0FBQ3pHLFVBQUksWUFBWTtBQUNaLG1CQUFXLFlBQVk7QUFDdkIsWUFBSSxXQUFXLFNBQVMsV0FBVztBQUMvQixtQ0FBeUIsUUFBUSxZQUFZLFVBQVU7QUFBQSxRQUMzRCxPQUFPO0FBQ0gsa0NBQXdCLFFBQVEsWUFBWSxVQUFVO0FBQUEsUUFDMUQ7QUFBQSxNQUNKO0FBQ0EsZUFBUyxRQUFRO0FBQUEsSUFDckIsQ0FBQztBQUFBLEVBQ0wsQ0FBQztBQUVELFVBQVEsVUFBVSxDQUFDLE9BQU87QUFDdEIsT0FBRyxRQUFRLG9CQUFvQjtBQUMvQixPQUFHLFdBQVcsV0FBVztBQUN6QixPQUFHLFFBQVEsTUFBTTtBQUNiLFVBQUksUUFBUSxhQUFhLE9BQU8sU0FBUyxpQkFBaUIsU0FBUyxHQUFHO0FBQ2xFO0FBQUEsTUFDSjtBQUNBLGNBQVEsWUFBWTtBQUVwQiwrQkFBeUIsUUFBUSxTQUFTLE9BQU87QUFDakQsWUFBTSxhQUFhLE9BQU8sU0FBUyxpQkFBaUIsS0FBSyxDQUFDLFdBQVcsT0FBTyxhQUFhLFFBQVEsUUFBUTtBQUN6RyxVQUFJLFlBQVk7QUFDWixtQkFBVyxZQUFZO0FBQ3ZCLFlBQUksV0FBVyxTQUFTLFdBQVc7QUFDL0IsbUNBQXlCLFFBQVEsWUFBWSxVQUFVO0FBQUEsUUFDM0QsT0FBTztBQUNILGtDQUF3QixRQUFRLFlBQVksVUFBVTtBQUFBLFFBQzFEO0FBQUEsTUFDSjtBQUNBLGVBQVMsUUFBUTtBQUFBLElBQ3JCLENBQUM7QUFBQSxFQUNMLENBQUM7QUFFRCxVQUFRLFVBQVUsQ0FBQyxPQUFPO0FBQ3RCLE9BQUcsUUFBUSxTQUFTO0FBQ3BCLE9BQUcsV0FBVyxnQkFBZ0I7QUFDOUIsT0FBRyxRQUFRLE1BQU07QUFDYixxQkFBYyxRQUFRLE9BQU87QUFDN0IsY0FBUSxNQUFNO0FBQ2QsY0FBUSxVQUFVLE9BQU87QUFBQSxJQUM3QixDQUFDO0FBQUEsRUFDTCxDQUFDO0FBQ0w7OztBRjVJQSwyQkFBUztBQUVGLDhCQUE4QixRQUEyQixNQUFjO0FBQzdFLE1BQUksb0JBQW9CLENBQUM7QUFDekIsUUFBTSxhQUFhLDRCQUE0QixJQUFJO0FBQ25ELFFBQU0sa0JBQWtCLCtCQUErQixRQUFRLFVBQVU7QUFDekUsUUFBTSxxQkFBcUIsNEJBQTRCLFFBQVEsSUFBSTtBQUNuRSxRQUFNLDZCQUE2QixDQUFDLEdBQUcsaUJBQWlCLEdBQUcsa0JBQWtCO0FBQzdFLFFBQU0sbUJBQWdEO0FBQUEsSUFDckQ7QUFBQSxJQUNBO0FBQUEsSUFDQTtBQUFBLElBQ0E7QUFBQSxFQUNEO0FBRUEsTUFBSSwyQkFBMkIsU0FBUyxHQUFHO0FBQzFDLGVBQVcsaUJBQWlCLDRCQUE0QjtBQUN2RCx1QkFBaUIsUUFBUSxjQUFZO0FBQ3BDLFlBQUksY0FBYyxjQUFjLE1BQU07QUFDckMsVUFBQyxrQkFBMEIsWUFBWTtBQUFBLFFBQ3hDLFdBQVcsQ0FBQyxjQUFjLFdBQVc7QUFDcEMsVUFBQyxrQkFBMEIsWUFBWTtBQUFBLFFBQ3hDO0FBQUEsTUFDRCxDQUFDO0FBQUEsSUFDRjtBQUFBLEVBQ0Q7QUFFQSxNQUFLLDZCQUE2QixVQUFXLE9BQU8sS0FBSyxpQkFBaUIsRUFBRSxXQUFXLEdBQUc7QUFBRSx3QkFBb0I7QUFBQSxFQUFXO0FBRTNILFNBQU87QUFDUjtBQVVPLHFDQUFxQyxRQUEyQixNQUFjO0FBQ3BGLFNBQU8sT0FBTyxTQUFTLGlCQUFpQixPQUFPLENBQUMsc0JBQXNCO0FBQ3JFLFFBQUksa0JBQWtCLFNBQVMsTUFBTTtBQUFFLGFBQU87QUFBQSxJQUFNO0FBQ3BELFFBQUksQ0FBQyxrQkFBa0IsWUFBWTtBQUFFLGFBQU87QUFBQSxJQUFPO0FBQ25ELFdBQU8seUJBQXdCLElBQUksRUFBRSxXQUFXLGtCQUFrQixJQUFJO0FBQUEsRUFDdkUsQ0FBQztBQUNGO0FBRU8sOEJBQThCLFFBQTJCLG1CQUFzQztBQUNyRyxTQUFPLFNBQVMsaUJBQWlCLEtBQUssaUJBQWlCO0FBQ3ZELFNBQU8sYUFBYSxJQUFJO0FBQ3pCO0FBRU8saUNBQWlDLFFBQTJCLG1CQUFzQztBQUN4RyxTQUFPLFNBQVMsbUJBQW1CLE9BQU8sU0FBUyxpQkFBaUIsT0FBTyxDQUFDLFdBQVcsT0FBTyxPQUFPLGtCQUFrQixNQUFNLE9BQU8sU0FBUyxTQUFTO0FBQ3RKLFNBQU8sYUFBYSxJQUFJO0FBQ3hCLGVBQVksTUFBTTtBQUNuQjtBQUVPLGlDQUFpQyxRQUEyQixtQkFBc0Msb0JBQXVDO0FBQy9JLFNBQU8sU0FBUyxtQkFBbUIsT0FBTyxTQUFTLGlCQUFpQixPQUFPLENBQUMsV0FBVyxPQUFPLE9BQU8sa0JBQWtCLEVBQUU7QUFDekgsdUJBQXFCLFFBQVEsa0JBQWtCO0FBQ2hEO0FBRU8sc0JBQXFCLFFBQTJCO0FBQ3RELFNBQU8sU0FBUyxtQkFBbUIsT0FBTyxTQUFTLGlCQUFpQixLQUFLLENBQUMsR0FBRyxNQUFNLEVBQUUsV0FBVyxFQUFFLFFBQVE7QUFDMUcsU0FBTyxTQUFTLGlCQUFpQixRQUFRLENBQUMsUUFBUSxVQUFVO0FBQzNELFdBQU8sV0FBVztBQUFBLEVBQ25CLENBQUM7QUFDRCxTQUFPLGFBQWE7QUFDckI7QUFHTyxvQ0FBb0MsVUFBdUIsYUFBMEIsbUJBQXNDO0FBQ2pJLFFBQU0sU0FBNEIsU0FBUztBQUMzQyxRQUFNLFVBQVUsSUFBSSwwQkFBUSxXQUFXO0FBQ3ZDLFVBQVEsU0FBUyx3QkFBd0I7QUFFekMsUUFBTSxpQkFBaUIsUUFBUSxVQUFVLFVBQVUsRUFBRSxLQUFLLHNDQUFzQyxDQUFDO0FBQ2pHLFFBQU0sa0JBQWtCLElBQUksMEJBQVEsY0FBYztBQUNsRCxrQkFBZ0IsVUFBVSxDQUFDLE9BQU87QUFDakMsUUFBSSxjQUNILEdBQUcsU0FDSCxRQUNBLElBQ0Q7QUFFQSxPQUFHLFlBQVksU0FBUyx3QkFBd0I7QUFDaEQsT0FBRyxlQUFlLGFBQWE7QUFDL0IsT0FBRyxTQUFTLGtCQUFrQixJQUFJO0FBQ2xDLE9BQUcsU0FBUyxDQUFDLFVBQVU7QUFDdEIsVUFBSSxNQUFNLFdBQVcsU0FBUyxLQUFLLE1BQU0sU0FBUyxHQUFHLEdBQUc7QUFDdkQsZ0NBQXdCLFFBQVEsaUJBQWlCO0FBQ2pELGNBQU0sVUFBVSxJQUFJLG1CQUFtQixPQUFPLE9BQU8sU0FBUyxpQkFBaUIsUUFBUSxRQUFXLE1BQU07QUFDeEcsNkJBQXFCLFFBQVEsT0FBTztBQUNwQyxzQ0FBOEIsVUFBVSxhQUFhLE9BQU87QUFDNUQsZ0JBQVEsTUFBTTtBQUNkLGdCQUFRLFVBQVUsT0FBTztBQUFBLE1BQzFCO0FBQ0EsVUFBSSxDQUFDLE9BQU8sSUFBSSxNQUFNLHNCQUFzQixLQUFLO0FBQUc7QUFDcEQsd0JBQWtCLE9BQU87QUFDekIsOEJBQXdCLFFBQVEsbUJBQW1CLGlCQUFpQjtBQUFBLElBQ3JFLENBQUM7QUFBQSxFQUNGLENBQUM7QUFDRCxRQUFNLGtCQUFrQixRQUFRLFVBQVUsVUFBVSxFQUFFLEtBQUssOEJBQThCLENBQUM7QUFFMUYsTUFBSSxrQ0FBZ0IsZUFBZSxFQUNqQyxRQUFRLE1BQU0sRUFDZCxXQUFXLGtCQUFrQixFQUM3QixRQUFRLE1BQU07QUFDZCxRQUFJLHdCQUF3QixPQUFPLEtBQUssUUFBUSxpQkFBaUIsRUFBRSxLQUFLO0FBQUEsRUFDekUsQ0FBQztBQUVGLE1BQUksa0NBQWdCLGVBQWUsRUFDakMsUUFBUSxrQkFBa0IsRUFDMUIsV0FBVyxTQUFTLEVBQ3BCLFFBQVEsTUFBTTtBQUNkLFFBQUksa0JBQWtCLGFBQWEsR0FBRztBQUFFO0FBQUEsSUFBUTtBQUNoRCxzQkFBa0IsWUFBWTtBQUM5Qiw0QkFBd0IsUUFBUSxtQkFBbUIsaUJBQWlCO0FBQ3BFLFVBQU0sdUJBQXVCLE9BQU8sU0FBUyxpQkFBaUIsS0FBSyxDQUFDLFdBQVcsT0FBTyxhQUFhLGtCQUFrQixRQUFRO0FBQzdILFFBQUksc0JBQXNCO0FBQ3pCLDJCQUFxQixZQUFZO0FBQ2pDLFVBQUkscUJBQXFCLFNBQVMsV0FBVztBQUM1QyxpQ0FBeUIsUUFBUSxzQkFBc0Isb0JBQW9CO0FBQUEsTUFDNUUsT0FBTztBQUNOLGdDQUF3QixRQUFRLHNCQUFzQixvQkFBb0I7QUFBQSxNQUMzRTtBQUFBLElBQ0Q7QUFDQSxhQUFTLFFBQVE7QUFBQSxFQUNsQixDQUFDO0FBRUYsTUFBSSxrQ0FBZ0IsZUFBZSxFQUNqQyxRQUFRLG9CQUFvQixFQUM1QixXQUFXLFdBQVcsRUFDdEIsUUFBUSxNQUFNO0FBQ2QsUUFBSSxrQkFBa0IsYUFBYSxPQUFPLFNBQVMsaUJBQWlCLFNBQVMsR0FBRztBQUMvRTtBQUFBLElBQ0Q7QUFDQSxzQkFBa0IsWUFBWTtBQUU5Qiw0QkFBd0IsUUFBUSxtQkFBbUIsaUJBQWlCO0FBQ3BFLFVBQU0sdUJBQXVCLE9BQU8sU0FBUyxpQkFBaUIsS0FBSyxDQUFDLFdBQVcsT0FBTyxhQUFhLGtCQUFrQixRQUFRO0FBQzdILFFBQUksc0JBQXNCO0FBQ3pCLDJCQUFxQixZQUFZO0FBQ2pDLFVBQUkscUJBQXFCLFNBQVMsV0FBVztBQUM1QyxpQ0FBeUIsUUFBUSxzQkFBc0Isb0JBQW9CO0FBQUEsTUFDNUUsT0FBTztBQUNOLGdDQUF3QixRQUFRLHNCQUFzQixvQkFBb0I7QUFBQSxNQUMzRTtBQUFBLElBQ0Q7QUFFQSxhQUFTLFFBQVE7QUFBQSxFQUNsQixDQUFDO0FBRUYsTUFBSSxrQ0FBZ0IsZUFBZSxFQUNqQyxRQUFRLFNBQVMsRUFDakIsV0FBVyx3QkFBd0IsRUFDbkMsUUFBUSxNQUFNO0FBQ2QsNEJBQXdCLFFBQVEsaUJBQWlCO0FBQ2pELFlBQVEsTUFBTTtBQUNkLFlBQVEsVUFBVSxPQUFPO0FBQUEsRUFDMUIsQ0FBQztBQUNIOzs7QVBoS0EsaUNBQXdDLFFBQTJCLE1BQWMsaUJBQTBCLFVBQW9CLGlCQUEyQjtBQUN6SixNQUFJLGlCQUFpQixDQUFDO0FBQ3RCLFFBQU0sb0JBQW9CLHFCQUFxQixRQUFRLElBQUk7QUFDM0QsUUFBTSxhQUFhLDRCQUE0QixJQUFJO0FBQ25ELE1BQUksa0JBQWtCLDRCQUE0QixRQUFRLFVBQVU7QUFDcEUsUUFBTSxrQkFBa0IseUJBQXlCLFFBQVEsSUFBSTtBQUM3RCxNQUFJLFVBQVU7QUFBRSxzQkFBa0IsQ0FBQztBQUFBLEVBQUc7QUFDdEMsTUFBSSwwQkFBMEIsQ0FBQyxHQUFHLGlCQUFpQixHQUFHLGVBQWU7QUFFckUsTUFBSSxDQUFDLGlCQUFpQjtBQUNyQiw4QkFBMEIsd0JBQXdCLE9BQU8sT0FBSyxDQUFDLEVBQUUsUUFBUTtBQUFBLEVBQzFFO0FBRUEsUUFBTSxtQkFBNkM7QUFBQSxJQUNsRDtBQUFBLElBQ0E7QUFBQSxJQUNBO0FBQUEsSUFDQTtBQUFBLElBQ0E7QUFBQSxJQUNBO0FBQUEsSUFDQTtBQUFBLElBQ0E7QUFBQSxJQUNBO0FBQUEsRUFDRDtBQUVBLE1BQUksd0JBQXdCLFNBQVMsR0FBRztBQUN2QyxlQUFXLGlCQUFpQix5QkFBeUI7QUFDcEQsdUJBQWlCLFFBQVEsY0FBWTtBQUNwQyxZQUFJLGNBQWMsY0FBYyxNQUFNO0FBQ3JDLFVBQUMsZUFBdUIsWUFBWTtBQUFBLFFBQ3JDLFdBQVcsQ0FBQyxjQUFjLFdBQVc7QUFDcEMsVUFBQyxlQUF1QixZQUFZO0FBQUEsUUFDckM7QUFBQSxNQUNELENBQUM7QUFBQSxJQUNGO0FBQUEsRUFDRCxPQUFPO0FBQ04scUJBQWlCO0FBQUEsRUFDbEI7QUFFQSxNQUFJLGlEQUFnQixVQUFVO0FBQUUsc0JBQWtCO0FBQUEsRUFBTTtBQUV4RCxNQUFJLHFCQUFxQixrQkFBa0IsQ0FBQyxpQkFBaUI7QUFDNUQsbUJBQWUsb0JBQW9CLGVBQWUsb0JBQW9CLENBQUMsa0JBQWtCLG1CQUFtQjtBQUM1RyxtQkFBZSxvQkFBb0IsZUFBZSxvQkFBb0IsQ0FBQyxrQkFBa0IsbUJBQW1CO0FBQzVHLG1CQUFlLGNBQWMsZUFBZSxjQUFjLENBQUMsa0JBQWtCLGFBQWE7QUFDMUYsbUJBQWUsbUJBQW1CLGtCQUFrQjtBQUNwRCxtQkFBZSw0QkFBNEIsZUFBZSw0QkFBNEIsQ0FBQyxrQkFBa0IsdUJBQXVCO0FBQUEsRUFDakksV0FBVyxrQkFBa0IsT0FBTyxLQUFLLGNBQWMsRUFBRSxXQUFXLEdBQUc7QUFDdEUscUJBQWlCO0FBQUEsTUFDaEIsTUFBTTtBQUFBLE1BQ04sSUFBSTtBQUFBLE1BQ0osTUFBTTtBQUFBLE1BQ04sUUFBUTtBQUFBLE1BQ1IsWUFBWTtBQUFBLE1BQ1osYUFBYTtBQUFBLE1BQ2IsbUJBQW1CO0FBQUEsTUFDbkIsbUJBQW1CO0FBQUEsTUFDbkIsa0JBQWtCO0FBQUEsTUFDbEIsVUFBVTtBQUFBLE1BQ1YsMkJBQTJCO0FBQUEsTUFDM0IsZ0JBQWdCO0FBQUEsTUFDaEIsVUFBVTtBQUFBLE1BQ1YsVUFBVTtBQUFBLElBQ1g7QUFBQSxFQUNEO0FBRUEsU0FBTztBQUNSO0FBRU8sMkJBQTJCLFFBQTJCLE1BQWM7QUFDMUUsU0FBTyxPQUFPLFNBQVMsZUFBZSxLQUFLLE9BQUssRUFBRSxRQUFRLFFBQVEsRUFBRSxRQUFRO0FBQzdFO0FBb0JPLGtDQUFrQyxRQUEyQixNQUFjO0FBQ2pGLFNBQU8sT0FBTyxTQUFTLGVBQWUsT0FBTyxDQUFDLG1CQUFtQjtBQUNoRSxRQUFJLEtBQUssS0FBSyxNQUFNLE1BQU0sQ0FBQyxlQUFlLE1BQU07QUFBRSxhQUFPO0FBQUEsSUFBTztBQUNoRSxRQUFJLGVBQWUsU0FBUyxNQUFNO0FBQUUsYUFBTztBQUFBLElBQU07QUFDakQsUUFBSSxDQUFDLGVBQWUsWUFBWTtBQUFFLGFBQU87QUFBQSxJQUFPO0FBQ2hELFVBQU0scUJBQXFCLGVBQWUsS0FBSyxTQUFTLEdBQUcsSUFBSSxlQUFlLE9BQU8sZUFBZSxPQUFPO0FBQzNHLFFBQUksYUFBYSx5QkFBd0IsSUFBSTtBQUM3QyxpQkFBYSxXQUFXLFNBQVMsR0FBRyxJQUFJLGFBQWEsYUFBYTtBQUVsRSxRQUFJLFdBQVcsU0FBUyxHQUFHLEtBQUssV0FBVyxTQUFTLElBQUksR0FBRztBQUMxRCxhQUFPLFdBQVcsV0FBVyxrQkFBa0IsS0FBSyxlQUFlO0FBQUEsSUFDcEUsT0FBTztBQUNOLGFBQU8sZUFBZTtBQUFBLElBQ3ZCO0FBQUEsRUFDRCxDQUFDO0FBQ0Y7QUFFTywyQkFBMkIsUUFBMkIsZ0JBQWdDLGVBQWUsTUFBTTtBQUNqSCxTQUFPLFNBQVMsZUFBZSxLQUFLLGNBQWM7QUFDbEQsU0FBTyxhQUFhLFlBQVk7QUFDakM7QUFFQSxvQ0FBMkMsUUFBMkIsZ0JBQWdDO0FBQ3JHLFNBQU8sU0FBUyxpQkFBaUIsT0FBTyxTQUFTLGVBQWUsT0FBTyxDQUFDLFdBQVcsT0FBTyxPQUFPLGVBQWUsTUFBTSxPQUFPLFNBQVMsU0FBUztBQUMvSSxTQUFPLGFBQWEsSUFBSTtBQUN4QixjQUFZLE1BQU07QUFDbkI7QUFFTyw4QkFBOEIsUUFBMkIsZ0JBQWdDLGtCQUFrQztBQUNqSSxTQUFPLFNBQVMsaUJBQWlCLE9BQU8sU0FBUyxlQUFlLE9BQU8sQ0FBQyxXQUFXLE9BQU8sT0FBTyxlQUFlLEVBQUU7QUFDbEgsb0JBQWtCLFFBQVEsZ0JBQWdCO0FBQzNDO0FBRU8scUJBQXFCLFFBQTJCO0FBQ3RELFNBQU8sU0FBUyxpQkFBaUIsT0FBTyxTQUFTLGVBQWUsS0FBSyxDQUFDLEdBQUcsTUFBTSxFQUFFLFdBQVcsRUFBRSxRQUFRO0FBQ3RHLFNBQU8sU0FBUyxlQUFlLFFBQVEsQ0FBQyxRQUFRLFVBQVU7QUFDekQsV0FBTyxXQUFXO0FBQUEsRUFDbkIsQ0FBQztBQUNELFNBQU8sYUFBYTtBQUNyQjtBQUdPLGtDQUFrQyxVQUF1QixhQUEwQixnQkFBZ0M7QUFDekgsUUFBTSxTQUE0QixTQUFTO0FBQzNDLFFBQU0sVUFBVSxJQUFJLDBCQUFRLFdBQVc7QUFDdkMsVUFBUSxTQUFTLHdCQUF3QjtBQUN6QyxVQUFRLFVBQVUsQ0FBQyxPQUFPO0FBQ3pCLFFBQUksY0FDSCxHQUFHLFNBQ0gsUUFDQSxLQUNEO0FBRUEsT0FBRyxZQUFZLFNBQVMsd0JBQXdCO0FBQ2hELE9BQUcsZUFBZSxhQUFhO0FBQy9CLE9BQUcsU0FBUyxlQUFlLFFBQVEsRUFBRTtBQUNyQyxPQUFHLFNBQVMsQ0FBQyxVQUFVO0FBQ3RCLFVBQUksTUFBTSxXQUFXLFNBQVMsS0FBSyxNQUFNLFNBQVMsR0FBRyxHQUFHO0FBQ3ZELDZCQUFxQixRQUFRLGNBQWM7QUFDM0MsY0FBTSxVQUFVLElBQUksZUFBZSxPQUFPLE9BQU8sU0FBUyxlQUFlLFFBQVEsUUFBVyxNQUFNO0FBQ2xHLDBCQUFrQixRQUFRLE9BQU87QUFDakMsa0NBQTBCLFVBQVUsYUFBYSxPQUFPO0FBQ3hELGdCQUFRLE1BQU07QUFDZCxnQkFBUSxVQUFVLE9BQU87QUFBQSxNQUMxQjtBQUNBLFVBQUksQ0FBQyxPQUFPLElBQUksTUFBTSxzQkFBc0IsS0FBSztBQUFHO0FBQ3BELHFCQUFlLE9BQU87QUFDdEIsMkJBQXFCLFFBQVEsZ0JBQWdCLGNBQWM7QUFBQSxJQUM1RCxDQUFDO0FBQUEsRUFDRixDQUFDO0FBRUQsVUFBUSxVQUFVLENBQUMsT0FBTztBQUN6QixPQUFHLFFBQVEsTUFBTTtBQUNqQixPQUFHLFdBQVcsa0JBQWtCO0FBQ2hDLE9BQUcsUUFBUSxNQUFNO0FBQ2hCLFVBQUksdUJBQXVCLE9BQU8sS0FBSyxRQUFRLGNBQWMsRUFBRSxLQUFLO0FBQUEsSUFDckUsQ0FBQztBQUFBLEVBQ0YsQ0FBQztBQUVELE1BQUksMkJBQVMsYUFBYSwyQkFBUyxVQUFVO0FBQzVDLFlBQVEsVUFBVSxDQUFDLE9BQU87QUFDekIsU0FBRyxRQUFRLGtCQUFrQjtBQUM3QixTQUFHLFdBQVcsU0FBUztBQUN2QixTQUFHLFFBQVEsTUFBTTtBQUNoQixZQUFJLGVBQWUsYUFBYSxHQUFHO0FBQUU7QUFBQSxRQUFRO0FBQzdDLHVCQUFlLFlBQVk7QUFDM0IsNkJBQXFCLFFBQVEsZ0JBQWdCLGNBQWM7QUFDM0QsY0FBTSxvQkFBb0IsT0FBTyxTQUFTLGVBQWUsS0FBSyxDQUFDLFdBQVcsT0FBTyxhQUFhLGVBQWUsUUFBUTtBQUNySCxZQUFJLG1CQUFtQjtBQUN0Qiw0QkFBa0IsWUFBWTtBQUM5QixjQUFJLGtCQUFrQixTQUFTLFdBQVc7QUFDekMsMEJBQWMsUUFBUSxtQkFBbUIsaUJBQWlCO0FBQUEsVUFDM0QsT0FBTztBQUNOLGlDQUFxQixRQUFRLG1CQUFtQixpQkFBaUI7QUFBQSxVQUNsRTtBQUFBLFFBQ0Q7QUFDQSxpQkFBUyxRQUFRO0FBQUEsTUFDbEIsQ0FBQztBQUFBLElBQ0YsQ0FBQztBQUVELFlBQVEsVUFBVSxDQUFDLE9BQU87QUFDekIsU0FBRyxRQUFRLG9CQUFvQjtBQUMvQixTQUFHLFdBQVcsV0FBVztBQUN6QixTQUFHLFFBQVEsTUFBTTtBQUNoQixZQUFJLGVBQWUsYUFBYSxPQUFPLFNBQVMsZUFBZSxTQUFTLEdBQUc7QUFDMUU7QUFBQSxRQUNEO0FBQ0EsdUJBQWUsWUFBWTtBQUUzQiw2QkFBcUIsUUFBUSxnQkFBZ0IsY0FBYztBQUMzRCxjQUFNLG9CQUFvQixPQUFPLFNBQVMsZUFBZSxLQUFLLENBQUMsV0FBVyxPQUFPLGFBQWEsZUFBZSxRQUFRO0FBQ3JILFlBQUksbUJBQW1CO0FBQ3RCLDRCQUFrQixZQUFZO0FBQzlCLGNBQUksa0JBQWtCLFNBQVMsV0FBVztBQUN6QywwQkFBYyxRQUFRLG1CQUFtQixpQkFBaUI7QUFBQSxVQUMzRCxPQUFPO0FBQ04saUNBQXFCLFFBQVEsbUJBQW1CLGlCQUFpQjtBQUFBLFVBQ2xFO0FBQUEsUUFDRDtBQUVBLGlCQUFTLFFBQVE7QUFBQSxNQUNsQixDQUFDO0FBQUEsSUFDRixDQUFDO0FBQUEsRUFDRjtBQUVBLFVBQVEsVUFBVSxDQUFDLE9BQU87QUFDekIsT0FBRyxRQUFRLFNBQVM7QUFDcEIsT0FBRyxXQUFXLHdCQUF3QjtBQUN0QyxPQUFHLFFBQVEsTUFBTTtBQUNoQiwyQkFBcUIsUUFBUSxjQUFjO0FBQzNDLGNBQVEsTUFBTTtBQUNkLGNBQVEsVUFBVSxPQUFPO0FBQUEsSUFDMUIsQ0FBQztBQUFBLEVBQ0YsQ0FBQztBQUNGOzs7QVc3T08sSUFBTSxpQkFBTixNQUFxQjtBQUFBLEVBZ0IzQixZQUFZLE1BQWMsVUFBa0IsSUFBd0IsUUFBMkI7QUFDOUYsU0FBSyxPQUFPO0FBQ1osU0FBSyxLQUFLLE1BQU0sT0FBTyxXQUFXO0FBQ2xDLFNBQUssT0FBTztBQUNaLFNBQUssYUFBYSxPQUFPLFNBQVMsNkJBQTZCO0FBQy9ELFNBQUssY0FBYyxPQUFPLFNBQVMsNkJBQTZCO0FBQ2hFLFNBQUssb0JBQW9CLE9BQU8sU0FBUyw2QkFBNkI7QUFDdEUsU0FBSyxvQkFBb0IsT0FBTyxTQUFTLDZCQUE2QjtBQUN0RSxTQUFLLG1CQUFtQixPQUFPLFNBQVMsNkJBQTZCO0FBQ3JFLFNBQUssV0FBVztBQUNoQixTQUFLLDRCQUE0QixPQUFPLFNBQVMsNkJBQTZCO0FBQzlFLFNBQUssU0FBUztBQUNSLFNBQUssaUJBQWlCO0FBQzVCLFNBQUssV0FBVztBQUFBLEVBQ2pCO0FBQ0Q7OztBQzlCQSxrQ0FBeUMsTUFBcUI7QUFDMUQsUUFBTSxFQUFDLFlBQVksc0JBQXFCLE1BQU0sb0JBQW9CLEtBQUssR0FBRztBQUMxRSxNQUFJLG1CQUFtQjtBQUNuQixlQUFXLGtCQUFrQixJQUFJO0FBQUEsRUFDckM7QUFDSjtBQUVBLG1DQUEwQyxNQUFVO0FBQ2hELFFBQU0sYUFBYyxLQUFZLFFBQVEsUUFBUTtBQUNoRCxRQUFNLG9CQUFxQixLQUFZLFFBQVEsZUFBZSxJQUNoRSw0QkFDRDtBQUNHLFNBQU87QUFBQSxJQUNIO0FBQUEsSUFDQTtBQUFBLEVBQ0o7QUFDSjs7O0FDbEJBLHdCQUFpRDtBQUcxQyxJQUFNLHVCQUFOLGNBQW1DLG9DQUEwQjtBQUFBLEVBT2hFLFlBQVksUUFBMkIsWUFBb0IsVUFBbUIsV0FBbUIsVUFBb0IsY0FBc0I7QUFDdkksVUFBTSxPQUFPLEdBQUc7QUFDaEIsU0FBSyxTQUFTO0FBQ2QsU0FBSyxhQUFhO0FBQ2xCLFNBQUssWUFBWTtBQUNqQixTQUFLLFdBQVc7QUFDaEIsU0FBSyxXQUFXO0FBQ2hCLFNBQUssZUFBZTtBQUFBLEVBQ3hCO0FBQUEsRUFFQSxXQUFxQjtBQUNqQixXQUFPLEtBQUssT0FBTyxTQUFTLG1CQUFtQixPQUFPLENBQUMsU0FBUyxLQUFLLFlBQVksTUFBTSxNQUFNO0FBQUEsRUFDakc7QUFBQSxFQUVBLFlBQVksTUFBc0I7QUFDOUIsV0FBTztBQUFBLEVBQ1g7QUFBQSxFQUVBLGFBQWEsTUFBYyxLQUFpQztBQUN4RCxTQUFLLFlBQVksTUFBTTtBQUN2QixxQkFBaUIsS0FBSyxRQUFRLEtBQUssWUFBWSxLQUFLLFVBQVUsS0FBSyxXQUFXLEtBQUssVUFBVSxLQUFLLFlBQVk7QUFDOUcsU0FBSyxNQUFNO0FBQUEsRUFDZjtBQUNKOzs7QUNqQ0Esd0JBQStCO0FBTXhCLHlCQUF5QixjQUFjLE9BQU8sUUFBMkI7QUFDL0UsTUFBSSxPQUFPLHVCQUF1QixnQkFBZ0IsTUFBTSxLQUFLLENBQUMsYUFBYTtBQUFFO0FBQUEsRUFBUTtBQUNyRixTQUFPLHFCQUFxQixnQkFBZ0IsTUFBTTtBQUNsRCxTQUFPLElBQUksTUFBTSxrQkFBa0IsRUFBRSxRQUFRLE9BQU8sU0FBUztBQUM1RCxRQUFJLENBQUUsaUJBQWdCLDRCQUFVO0FBQUU7QUFBQSxJQUFRO0FBQzFDLFVBQU0sYUFBYSxjQUFjLFFBQVEsS0FBSyxJQUFJO0FBQ2xELFFBQUksQ0FBQyxZQUFZO0FBQ2hCLDJCQUFxQiw2QkFBTSxNQUFNLG1CQUFtQixNQUFNO0FBQzFELDJCQUFxQiw2QkFBTSxNQUFNLHdCQUF3QixNQUFNO0FBQy9ELGFBQU8sd0JBQXdCLElBQUk7QUFDbkM7QUFBQSxJQUNEO0FBRUEsVUFBTSxpQkFBaUIsTUFBTSxrQkFBa0IsUUFBUSxLQUFLLE1BQU0sSUFBSTtBQUd0RSxRQUFJLGlEQUFnQixtQkFBbUI7QUFDdEMsMkJBQXFCLFdBQVcsTUFBTSxrQkFBa0IsTUFBTTtBQUM5RCwyQkFBcUIsS0FBSyxNQUFNLG1CQUFtQixNQUFNO0FBQ3pELDJCQUFxQiw2QkFBTSxNQUFNLHdCQUF3QixNQUFNO0FBQUEsSUFDaEUsT0FBTztBQUNOLFVBQUksQ0FBQyxrREFBZ0IsV0FBVTtBQUM5Qiw2QkFBcUIsV0FBVyxNQUFNLGtCQUFrQixNQUFNO0FBQUEsTUFDL0Q7QUFDQSw0QkFBc0IsTUFBTSxNQUFNO0FBQUEsSUFDbkM7QUFBQSxFQUNELENBQUM7QUFDRjtBQUdBLHVDQUE4QyxZQUFvQixRQUEyQjtBQUM1RixRQUFNLFNBQVMsT0FBTyxJQUFJLE1BQU0sc0JBQXNCLFVBQVU7QUFDaEUsTUFBSSxDQUFDLFVBQVUsQ0FBRSxtQkFBa0IsNEJBQVU7QUFBRTtBQUFBLEVBQVE7QUFFdkQsUUFBTSxhQUFhLGNBQWMsUUFBUSxPQUFPLElBQUk7QUFFcEQsTUFBSSxDQUFDLFlBQVk7QUFDaEIseUJBQXFCLGlDQUFRLE1BQU0sbUJBQW1CLE1BQU07QUFDNUQseUJBQXFCLGlDQUFRLE1BQU0sd0JBQXdCLE1BQU07QUFDakU7QUFBQSxFQUNEO0FBRUEsUUFBTSxpQkFBaUIsTUFBTSxrQkFBa0IsUUFBUSxPQUFPLE1BQU0sSUFBSTtBQUV4RSxNQUFJLGlEQUFnQixtQkFBbUI7QUFDdEMseUJBQXFCLFdBQVcsTUFBTSxrQkFBa0IsTUFBTTtBQUM5RCx5QkFBcUIsT0FBTyxNQUFNLG1CQUFtQixNQUFNO0FBQzNELHlCQUFxQixpQ0FBUSxNQUFNLHdCQUF3QixNQUFNO0FBQUEsRUFDbEUsT0FBTztBQUNOLFFBQUksQ0FBQyxrREFBZ0IsV0FBVTtBQUM5Qiw4QkFBd0IsWUFBWSxNQUFNO0FBQUEsSUFDM0M7QUFDQSwwQkFBc0IsUUFBUSxNQUFNO0FBQ3BDLFFBQUksT0FBTyx3QkFBd0IsTUFBTSxHQUFHO0FBQzNDLDJCQUFxQixPQUFPLE1BQU0sd0JBQXdCLE1BQU07QUFBQSxJQUNqRSxPQUFPO0FBQ04sMkJBQXFCLE9BQU8sTUFBTSx3QkFBd0IsTUFBTTtBQUFBLElBQ2pFO0FBQUEsRUFDRDtBQUVBLG1DQUFpQyxZQUFZLFFBQVEsTUFBTTtBQUM1RDtBQWFPLDBDQUEwQyxNQUFhLFFBQWlCLFFBQTJCO0FBQ3pHLDBCQUF3QixNQUFNLE1BQU07QUFDcEMsd0JBQXNCLFFBQVEsTUFBTTtBQUNyQztBQU9PLCtCQUErQixRQUFpQixRQUEyQjtBQUNqRix1QkFBcUIsT0FBTyxNQUFNLG1CQUFtQixNQUFNO0FBQzNELE1BQUksT0FBTyx3QkFBd0IsTUFBTSxHQUFHO0FBQzNDLHlCQUFxQixPQUFPLE1BQU0sd0JBQXdCLE1BQU07QUFBQSxFQUNqRSxPQUFPO0FBQ04seUJBQXFCLE9BQU8sTUFBTSx3QkFBd0IsTUFBTTtBQUFBLEVBQ2pFO0FBQ0Q7QUFFTyxpQ0FBaUMsTUFBYSxRQUEyQjtBQUMvRSx1QkFBcUIsS0FBSyxNQUFNLGtCQUFrQixNQUFNO0FBQ3pEO0FBV0Esb0NBQTJDLE1BQWMsVUFBa0IsUUFBMkIsZ0JBQWdCLE9BQU8sUUFBUSxHQUFHO0FBQ3ZJLFFBQU0sbUJBQW1CLE1BQU0sTUFBTSxNQUFNO0FBQzNDLE1BQUksQ0FBQyxrQkFBa0I7QUFDdEIsUUFBSSxpQkFBaUIsUUFBUSxHQUFHO0FBSy9CLFlBQU0sSUFBSSxRQUFRLENBQUMsTUFBTSxXQUFXLEdBQUcsR0FBRyxDQUFDO0FBQzNDLDJCQUFxQixNQUFNLFVBQVUsUUFBUSxlQUFlLFFBQVEsQ0FBQztBQUNyRTtBQUFBLElBQ0Q7QUFDQTtBQUFBLEVBQ0Q7QUFDQSxtQkFBaUIsU0FBUyxRQUFRO0FBQ2xDLFFBQU0sa0JBQWtCLFNBQVMsaUJBQWlCLGVBQWUsSUFBSSxPQUFPLElBQUksS0FBSztBQUNyRixrQkFBZ0IsUUFBUSxDQUFDLFNBQVM7QUFDakMsU0FBSyxTQUFTLFFBQVE7QUFBQSxFQUN2QixDQUFDO0FBQ0Y7QUFFTyw4QkFBOEIsTUFBMEIsVUFBa0IsUUFBMkI7QUFDM0csTUFBSSxDQUFDO0FBQU07QUFDWCxRQUFNLG1CQUFtQixNQUFNLE1BQU0sTUFBTTtBQUMzQyxRQUFNLGtCQUFrQixTQUFTLGlCQUFpQixlQUFlLElBQUksT0FBTyxJQUFJLEtBQUs7QUFDckYsa0JBQWdCLFFBQVEsQ0FBQyxTQUFTO0FBQ2pDLFNBQUssWUFBWSxRQUFRO0FBQUEsRUFDMUIsQ0FBQztBQUNELE1BQUksQ0FBQyxrQkFBa0I7QUFBRTtBQUFBLEVBQVE7QUFDakMsbUJBQWlCLFlBQVksUUFBUTtBQUN0QztBQUVPLGVBQWUsTUFBYyxRQUErQztBQUNsRixRQUFNLGVBQWUsZ0JBQWdCLE1BQU07QUFDM0MsTUFBSSxDQUFDLGNBQWM7QUFBRSxXQUFPO0FBQUEsRUFBTTtBQUNsQyxNQUFJLENBQUMsYUFBYSxNQUFNO0FBQUUsV0FBTztBQUFBLEVBQU07QUFDdkMsTUFBSSxDQUFDLGFBQWEsS0FBSyxXQUFXO0FBQUUsV0FBTztBQUFBLEVBQU07QUFDakQsUUFBTSxtQkFBbUIsYUFBYSxLQUFLLFVBQVU7QUFDckQsTUFBSSxDQUFDLGtCQUFrQjtBQUFFLFdBQU87QUFBQSxFQUFNO0FBQ3RDLE1BQUksaUJBQWlCO0FBQVEsV0FBTyxpQkFBaUI7QUFDckQsU0FBTyxpQkFBaUI7QUFDekI7OztBbEI3SUEsSUFBTSw0QkFBNEI7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBZ0JsQyxnQ0FBdUMsUUFBMkIsWUFBb0IsVUFBbUIsV0FBb0IsY0FBd0IsaUJBQXlCO0FBNUI5SztBQTZCQyxRQUFNLE9BQU8sT0FBTyxJQUFJLFVBQVUsUUFBUSxLQUFLO0FBQy9DLFFBQU0sYUFBYSw0QkFBNEIsVUFBVTtBQUN6RCxRQUFNLFdBQVcsT0FBTyxTQUFTLGVBQWUsUUFBUSxtQkFBbUIsVUFBVTtBQUNyRixNQUFJLGFBQWEsY0FBYyxRQUFRLFVBQVU7QUFDakQsTUFBSSxpQkFBaUI7QUFDcEIsaUJBQWE7QUFBQSxFQUNkO0FBQ0EsTUFBSSxpQkFBaUIsZ0NBQWEsT0FBTyxTQUFTO0FBQ2xELFFBQU0saUJBQWlCLGtCQUFrQixRQUFRLFVBQVU7QUFDM0QsTUFBSSxPQUFPO0FBRVgsTUFBSSxtQkFBbUIsZUFBZTtBQUNyQyxxQkFBaUI7QUFDakIsZ0JBQVk7QUFBQSxFQUNiLFdBQVcsbUJBQW1CLFFBQVE7QUFDckMsV0FBTyxJQUFJLHFCQUFxQixRQUFRLFlBQVksVUFBVSxnQkFBZ0IsY0FBYyxlQUFlLEVBQUUsS0FBSztBQUFBLEVBQ25IO0FBRUEsTUFBSSxPQUFPLFNBQVMsb0JBQW9CLGdCQUFnQjtBQUN2RCxVQUFNLG1CQUFtQix5QkFBd0IsVUFBVTtBQUMzRCxRQUFJLGlCQUFpQixLQUFLLE1BQU0sSUFBSTtBQUNuQyxhQUFPLEdBQUcsV0FBVztBQUFBLElBQ3RCLE9BQU87QUFDTixhQUFPLEdBQUcsb0JBQW9CLFdBQVc7QUFBQSxJQUMxQztBQUFBLEVBQ0QsV0FBVyxPQUFPLFNBQVMsb0JBQW9CLGVBQWU7QUFDN0QsV0FBTyxHQUFHLFdBQVc7QUFBQSxFQUN0QixPQUFPO0FBQ04sV0FBTyxHQUFHLGNBQWMsV0FBVztBQUFBLEVBQ3BDO0FBRUEsTUFBSSxrQkFBa0IsMENBQVksZUFBYyxhQUFhLFlBQVk7QUFDeEUseUJBQXFCLFFBQVEsY0FBYztBQUMzQyx5QkFBcUIseUNBQVksTUFBTSxrQkFBa0IsTUFBTTtBQUMvRCxVQUFNLFVBQVMsT0FBTyxJQUFJLE1BQU0sc0JBQXNCLFVBQVU7QUFDaEUsUUFBSSxDQUFDLGNBQWMsV0FBVyxhQUFhO0FBQVU7QUFDckQsUUFBSSxRQUFRO0FBQ1osUUFBSSxVQUFVLGdCQUFnQixXQUFXLElBQUksSUFBSSxLQUFLLFVBQVUsV0FBVyxLQUFLLE1BQU0sR0FBRyxFQUFFLElBQUk7QUFDL0YsV0FBTyxRQUFRLE9BQU8sT0FBTyxJQUFJLE1BQU0sc0JBQXNCLE9BQU8sR0FBRztBQUN0RTtBQUNBLGdCQUFVLGdCQUFnQixXQUFXLElBQUksSUFBSSxLQUFLLFVBQVUsV0FBVyxLQUFLLE1BQU0sR0FBRyxFQUFFLElBQUk7QUFBQSxJQUM1RjtBQUNBLFVBQU0sQ0FBQyxnQkFBZ0IsdUJBQXVCLGdCQUFnQixNQUFNLGdCQUFnQixRQUFRLE9BQU07QUFFbEcsVUFBTSxPQUFPLElBQUksWUFBWSxXQUFXLFlBQVksT0FBTyxFQUFFLEtBQUssTUFBTTtBQUN2RSxVQUFJLENBQUM7QUFBZ0I7QUFDckIsVUFBSSxDQUFDLHVCQUF1QjtBQUMzQiw2QkFBcUIsUUFBUSxjQUFjO0FBQUEsTUFDNUMsV0FBVyxDQUFDLGNBQWM7QUFDekIsdUJBQWUsY0FBYztBQUM3Qiw2QkFBcUIsUUFBUSxnQkFBZ0IsY0FBYztBQUFBLE1BQzVEO0FBQUEsSUFDRCxDQUFDO0FBQUEsRUFDRjtBQUVBLE1BQUksQ0FBQyxZQUFZO0FBQ2hCLFFBQUksVUFBVTtBQUNkLFFBQUksY0FBYyxPQUFPO0FBQ3hCLFVBQUksT0FBTyxTQUFTLGdCQUFnQixlQUFlLE1BQU0sR0FBRyxFQUFFLElBQUksS0FBSyxPQUFPLFNBQVMsYUFBYSxNQUFNLEdBQUcsRUFBRSxJQUFJLEdBQUc7QUFDckgsY0FBTSxlQUFlLE9BQU8sSUFBSSxNQUFNLHNCQUFzQixPQUFPLFNBQVMsWUFBWTtBQUN4RixZQUFJLHdCQUF3Qix5QkFBTztBQUNsQyxjQUFJLENBQUMsTUFBTSxVQUFVLEtBQUssRUFBRSxTQUFTLGFBQWEsU0FBUyxHQUFHO0FBQzdELHNCQUFVLE1BQU0sT0FBTyxJQUFJLE1BQU0sS0FBSyxZQUFZO0FBQ2xELGdCQUFJLGNBQWMsaUJBQWlCLENBQUMsUUFBUSxTQUFTLHlGQUErRSxHQUFHO0FBQ3RJLHdCQUFVO0FBQUEsWUFDWDtBQUFBLFVBQ0QsT0FBTztBQUNOLG1CQUFPLE9BQU8sSUFBSSxNQUFNLFdBQVcsWUFBWSxFQUFFLEtBQUssT0FBTyxTQUFTO0FBQ3JFLDJCQUFhLE1BQU0sT0FBTyxJQUFJLE1BQU0sYUFBYSxNQUFNLElBQUk7QUFDM0Qsa0JBQUksVUFBVTtBQUNiLHNCQUFNLEtBQUssU0FBUyxVQUFVO0FBQUEsY0FDL0I7QUFBQSxZQUNELENBQUM7QUFBQSxVQUNGO0FBQUEsUUFDRDtBQUFBLE1BQ0QsV0FBVyxPQUFPLFNBQVMsbUJBQW1CLGlCQUFpQixjQUFjLGVBQWU7QUFDM0Ysa0JBQVU7QUFBQSxNQUNYLFdBQVcsT0FBTyxTQUFTLG1CQUFtQixXQUFXO0FBQ3hELGtCQUFVO0FBQUEsTUFDWDtBQUFBLElBQ0Q7QUFFQSxpQkFBYSxNQUFNLE9BQU8sSUFBSSxNQUFNLE9BQU8sTUFBTSxPQUFPO0FBQUEsRUFDekQsT0FBTztBQUNOLFVBQU0sT0FBTyxJQUFJLFlBQVksV0FBVyxZQUFZLElBQUk7QUFBQSxFQUN6RDtBQUVBLE1BQUksVUFBVTtBQUNiLFFBQUksY0FBTyxJQUFJLFVBQVUsY0FBYyxNQUFuQyxtQkFBc0MsVUFBUyxNQUFNO0FBQ3hELFVBQUksT0FBTyxpQkFBaUI7QUFDM0IsZUFBTyxnQkFBZ0IsWUFBWSxjQUFjO0FBQ2pELGVBQU8sa0JBQWtCO0FBQUEsTUFDMUI7QUFFQSxZQUFNLFVBQVMsV0FBVSxRQUFRLFVBQVU7QUFDM0MsVUFBSSxDQUFDLFNBQVE7QUFBRTtBQUFBLE1BQVE7QUFFdkIsYUFBTyxrQkFBa0IsTUFBTSxRQUFPLE1BQU0sTUFBTTtBQUNsRCxVQUFJLE9BQU87QUFBaUIsZUFBTyxnQkFBZ0IsU0FBUyxjQUFjO0FBQUEsSUFDM0U7QUFDQSxVQUFNLEtBQUssU0FBUyxVQUFVO0FBQzlCLFFBQUksT0FBTyxTQUFTLG1CQUFtQixpQkFBaUIsY0FBYyxlQUFlO0FBQ3BGLHlCQUFtQixJQUFJO0FBQUEsSUFDeEI7QUFBQSxFQUNEO0FBRUEsUUFBTSxvQkFBb0Isd0NBQVcsTUFBTSxLQUFLLFVBQVMsT0FBTyxTQUFTLGFBQWEsTUFBTSxHQUFHLEVBQUUsSUFBSTtBQUNyRyxNQUFJLGNBQWMscUJBQXFCLE9BQU8sU0FBUyxtQkFBbUIsZUFBZTtBQUN4RixrQkFBYyxRQUFRLFlBQVksTUFBTSxPQUFPLFNBQVMsWUFBWTtBQUFBLEVBQ3JFO0FBRUEsUUFBTSxTQUFTLE9BQU8sSUFBSSxNQUFNLHNCQUFzQixVQUFVO0FBQ2hFLE1BQUksQ0FBRSxtQkFBa0I7QUFBVTtBQUNsQyx1QkFBcUIsTUFBTSxrQkFBa0IsUUFBUSxJQUFJO0FBQ3pELHVCQUFxQixPQUFPLE1BQU0sbUJBQW1CLE1BQU07QUFDNUQ7QUFFQSxrQ0FBeUMsUUFBMkIsTUFBYSxRQUFpQixZQUEyQyxrQkFBNEI7QUFsSnpLO0FBbUpDLFFBQU0sWUFBWSxLQUFLO0FBQ3ZCLFFBQU0seUJBQXlCLGtCQUFrQixRQUFRLE9BQU8sSUFBSTtBQUVwRSxNQUFJLFlBQVk7QUFDZixRQUFJLE9BQU8sU0FBUywwQkFBMEIsQ0FBQyxvQkFBb0IsQ0FBQyx3QkFBd0I7QUFDM0YsYUFBTyxJQUFJLHdCQUF3QixPQUFPLEtBQUssUUFBUSxNQUFNLFFBQVEsVUFBVSxFQUFFLEtBQUs7QUFBQSxJQUN2RjtBQUNBLHlCQUFxQixXQUFXLE1BQU0sa0JBQWtCLE1BQU07QUFFOUQsVUFBTSxDQUFDLGdCQUFnQix1QkFBdUIsZ0JBQWdCLE1BQU0sZ0JBQWdCLFFBQVEsTUFBTTtBQUVsRyxVQUFNLFVBQVUsR0FBRyxPQUFPLFFBQVEsT0FBTyxTQUFTLEtBQUssS0FBSyxNQUFNLFNBQVMsRUFBRSxNQUFNLEVBQUUsSUFBSSxLQUFLLE1BQU0sS0FBSyxPQUFPLElBQUksR0FBSSxNQUFNO0FBQzlILFdBQU8sSUFBSSxZQUFZLFdBQVcsWUFBWSxPQUFPLEVBQUUsS0FBSyxNQUFNO0FBQ2pFLFVBQUksQ0FBQztBQUFnQjtBQUNyQixVQUFJLENBQUMsdUJBQXVCO0FBQzNCLDZCQUFxQixRQUFRLGNBQWM7QUFBQSxNQUM1QyxXQUFXLENBQUMsY0FBYztBQUN6Qix1QkFBZSxjQUFjO0FBQzdCLDZCQUFxQixRQUFRLGdCQUFnQixjQUFjO0FBQUEsTUFDNUQ7QUFBQSxJQUNELENBQUM7QUFBQSxFQUNGO0FBQ0EsUUFBTSxhQUFhLE9BQU87QUFDMUIsUUFBTSxXQUFXLE9BQU8sU0FBUyxlQUFlLFFBQVEsbUJBQW1CLFVBQVU7QUFFckYsTUFBSSxPQUFPLEdBQUcsT0FBTyxRQUFRLFlBQVk7QUFDekMsTUFBSSxPQUFPLFNBQVMsb0JBQW9CLGdCQUFnQjtBQUN2RCxVQUFNLG1CQUFtQixhQUFPLFdBQVAsbUJBQWU7QUFDeEMsUUFBSSxDQUFDO0FBQWtCO0FBQ3ZCLFFBQUksaUJBQWlCLEtBQUssTUFBTSxJQUFJO0FBQ25DLGFBQU8sR0FBRyxZQUFZO0FBQUEsSUFDdkIsT0FBTztBQUNOLGFBQU8sR0FBRyxvQkFBb0IsWUFBWTtBQUFBLElBQzNDO0FBQUEsRUFDRDtBQUVBLE1BQUksd0JBQXdCO0FBQzNCLHlCQUFxQixRQUFRLHNCQUFzQjtBQUFBLEVBQ3BEO0FBRUEsUUFBTSxPQUFPLElBQUksWUFBWSxXQUFXLE1BQU0sSUFBSTtBQUNsRCx1QkFBcUIsTUFBTSxrQkFBa0IsUUFBUSxJQUFJO0FBQ3pELHVCQUFxQixPQUFPLE1BQU0sbUJBQW1CLE1BQU07QUFFM0QsTUFBSSxPQUFPLGlCQUFpQjtBQUMzQixXQUFPLGdCQUFnQixZQUFZLGNBQWM7QUFDakQsV0FBTyxrQkFBa0I7QUFBQSxFQUMxQjtBQUVBLFNBQU8sa0JBQWtCLE1BQU0sT0FBTyxNQUFNLE1BQU07QUFDbEQsTUFBSSxPQUFPO0FBQWlCLFdBQU8sZ0JBQWdCLFNBQVMsY0FBYztBQUMzRTtBQUVBLCtCQUFzQyxRQUEyQixRQUErSDtBQUMvTCxNQUFJLGlCQUFpQixNQUFNLGtCQUFrQixRQUFRLE9BQU8sTUFBTSxLQUFLO0FBQ3ZFLE1BQUksd0JBQXdCO0FBQzVCLE1BQUksZUFBZTtBQUVuQixNQUFJLENBQUMsZ0JBQWdCO0FBQ3BCLDRCQUF3QjtBQUN4QixxQkFBaUIsSUFBSSxlQUFlLE9BQU8sTUFBTSxPQUFPLFNBQVMsZUFBZSxRQUFRLFFBQVcsTUFBTTtBQUN6RyxtQkFBZSxjQUFjO0FBQzdCLHNCQUFrQixRQUFRLGNBQWM7QUFBQSxFQUN6QyxXQUFXLENBQUMsZUFBZSxhQUFhO0FBQ3ZDLG1CQUFlO0FBQ2YsbUJBQWUsY0FBYztBQUM3Qix5QkFBcUIsUUFBUSxnQkFBZ0IsY0FBYztBQUFBLEVBQzVEO0FBRUEsU0FBTyxDQUFDLGdCQUFnQix1QkFBdUIsWUFBWTtBQUM1RDtBQUVBLDhCQUFxQyxRQUEyQixNQUFxQixLQUFrQjtBQTNOdkc7QUE0TkMsUUFBTSxPQUFPLEtBQUs7QUFDbEIsTUFBSSxjQUFPLElBQUksVUFBVSxjQUFjLE1BQW5DLG1CQUFzQyxVQUFTLFFBQVEsQ0FBRSwwQkFBTyxXQUFXLEdBQUcsS0FBSyxRQUFRO0FBQUU7QUFBQSxFQUFRO0FBQ3pHLFFBQU0sT0FBTyxPQUFPLElBQUksVUFBVSxRQUFRLHlCQUFPLFdBQVcsR0FBRyxLQUFLLE9BQU8sU0FBUyxZQUFZO0FBQ2hHLE1BQUksZ0JBQWdCLHlCQUFPO0FBQzFCLFVBQU0sS0FBSyxTQUFTLElBQUk7QUFBQSxFQUN6QjtBQUNEO0FBRUEsZ0NBQXVDLFFBQTJCLE1BQWEsY0FBdUI7QUFDckcsTUFBSSxPQUFPLFNBQVMsMEJBQTBCLGNBQWM7QUFDM0QsV0FBTyxJQUFJLHdCQUF3QixPQUFPLEtBQUssUUFBUSxJQUFJLEVBQUUsS0FBSztBQUFBLEVBQ25FO0FBQ0EsUUFBTSxTQUFTLFdBQVUsUUFBUSxJQUFJO0FBQ3JDLE1BQUksQ0FBQztBQUFRO0FBQ2IsdUJBQXFCLE9BQU8sTUFBTSxtQkFBbUIsTUFBTTtBQUMzRCxVQUFRLE9BQU8sU0FBUztBQUFBLFNBQ2xCO0FBQ0osWUFBTSxPQUFPLElBQUksTUFBTSxNQUFNLE1BQU0sSUFBSTtBQUN2QztBQUFBLFNBQ0k7QUFDSixZQUFNLE9BQU8sSUFBSSxNQUFNLE1BQU0sTUFBTSxLQUFLO0FBQ3hDO0FBQUEsU0FDSTtBQUNKLFlBQU0sT0FBTyxJQUFJLE1BQU0sT0FBTyxJQUFJO0FBQ2xDO0FBQUE7QUFFSDtBQUVPLDJCQUEyQixVQUFrQixpQkFBeUI7QUFDNUUsUUFBTSxDQUFDLFFBQVEsVUFBVSxTQUFTLE1BQU0saUJBQWlCO0FBQ3pELE1BQUksT0FBTyxLQUFLLE1BQU0sTUFBTSxPQUFPLEtBQUssTUFBTSxJQUFJO0FBQ2pELFdBQU87QUFBQSxFQUNSO0FBQ0EsTUFBSSxDQUFDLGdCQUFnQixXQUFXLE1BQU0sS0FBSyxDQUFDLGdCQUFnQixTQUFTLE1BQU0sR0FBRztBQUM3RSxXQUFPO0FBQUEsRUFDUjtBQUNBLE1BQUksZ0JBQWdCLFdBQVcsTUFBTSxLQUFLLE9BQU8sS0FBSyxNQUFNLElBQUk7QUFDL0QsV0FBTyxnQkFBZ0IsTUFBTSxPQUFPLE1BQU0sRUFBRSxRQUFRLFFBQVEsRUFBRTtBQUFBLEVBQy9ELFdBQVcsZ0JBQWdCLFNBQVMsTUFBTSxLQUFLLE9BQU8sS0FBSyxNQUFNLElBQUk7QUFDcEUsV0FBTyxnQkFBZ0IsTUFBTSxHQUFHLENBQUMsT0FBTyxNQUFNO0FBQUEsRUFDL0M7QUFDQSxTQUFPO0FBQ1I7QUFFTyx1QkFBdUIsUUFBMkIsWUFBb0IsaUJBQTBCLE1BQWM7QUFDcEgsTUFBSSxDQUFDO0FBQVksV0FBTztBQUN4QixRQUFNLFNBQVM7QUFBQSxJQUNkLE1BQU07QUFBQSxJQUNOLE1BQU0sNEJBQTRCLFVBQVU7QUFBQSxFQUM3QztBQUVBLE1BQUksV0FBVyxPQUFPLFNBQVMsZUFBZSxRQUFRLG1CQUFtQixPQUFPLElBQUk7QUFDcEYsTUFBSSxNQUFNO0FBQ1QsZUFBVyxPQUFPLFNBQVMsZUFBZSxRQUFRLG1CQUFtQixLQUFLLFFBQVE7QUFBQSxFQUNuRjtBQUNBLE1BQUksQ0FBQztBQUFVLFdBQU87QUFFdEIsTUFBSyxRQUFPLFNBQVMsb0JBQW9CLGtCQUFrQixvQkFBb0IsbUJBQW1CLG9CQUFvQixnQkFBZ0I7QUFDckksV0FBTyxPQUFPLHlCQUF3QixVQUFVO0FBQUEsRUFDakQ7QUFFQSxNQUFJLE9BQU8sR0FBRyxPQUFPLFFBQVE7QUFDN0IsTUFBSSxPQUFPLEtBQUssS0FBSyxNQUFNLElBQUk7QUFDOUIsV0FBTyxPQUFPO0FBQ2QsV0FBTyxHQUFHO0FBQUEsRUFDWDtBQUVBLE1BQUksaUJBQWlCLE9BQU8sU0FBUztBQUNyQyxNQUFJLG1CQUFtQixlQUFlO0FBQ3JDLHFCQUFpQjtBQUFBLEVBQ2xCO0FBRUEsTUFBSSxhQUFhLE9BQU8sSUFBSSxNQUFNLHNCQUFzQixPQUFPLGNBQWM7QUFDN0UsTUFBSSxzQkFBc0IseUJBQU87QUFDaEMsV0FBTztBQUFBLEVBQ1IsT0FBTztBQUNOLFVBQU0scUJBQXFCLE9BQU8sU0FBUyxtQkFBbUIsT0FBTyxDQUFDLFNBQVMsU0FBUyxPQUFPLFNBQVMsZUFBZSxRQUFRLEtBQUssRUFBRSxDQUFDO0FBQ3ZJLGFBQVMsUUFBUSxvQkFBb0I7QUFDcEMsVUFBSSxTQUFTLGdCQUFnQixTQUFTLGVBQWU7QUFDcEQsZUFBTztBQUFBLE1BQ1I7QUFDQSxVQUFJLENBQUMsS0FBSyxXQUFXLEdBQUcsR0FBRztBQUMxQixlQUFPLE1BQU07QUFBQSxNQUNkO0FBQ0EsbUJBQWEsT0FBTyxJQUFJLE1BQU0sc0JBQXNCLE9BQU8sSUFBSTtBQUMvRCxVQUFJLHNCQUFzQix5QkFBTztBQUNoQyxlQUFPO0FBQUEsTUFDUjtBQUFBLElBQ0Q7QUFBQSxFQUNEO0FBQ0Q7QUFFTywwQkFBMEIsUUFBMkIsTUFBYTtBQUN4RSxRQUFNLFNBQVMsV0FBVSxRQUFRLElBQUk7QUFDckMsTUFBSSxDQUFDO0FBQVE7QUFDYixRQUFNLGlCQUFpQixJQUFJLGVBQWUsT0FBTyxNQUFNLE9BQU8sU0FBUyxlQUFlLFFBQVEsUUFBVyxNQUFNO0FBQy9HLGlCQUFlLGlCQUFpQjtBQUNoQyxpQkFBZSxvQkFBb0I7QUFDbkMsaUJBQWUsY0FBYztBQUM3QixpQkFBZSxhQUFhO0FBQzVCLGlCQUFlLDRCQUE0QjtBQUMzQyxpQkFBZSxXQUFXO0FBQzFCLGlCQUFlLG1CQUFtQixLQUFLO0FBQ3ZDLG9CQUFrQixRQUFRLGNBQWM7QUFDekM7QUFHTyxvQkFBbUIsUUFBMkIsTUFBYSxpQkFBMEI7QUF2VTVGO0FBd1VDLE1BQUksQ0FBQztBQUFNLFdBQU87QUFDbEIsTUFBSSxhQUFhLGtCQUFrQixPQUFPLFNBQVMsZ0JBQWdCLEtBQUssUUFBUTtBQUNoRixNQUFJLE9BQU8sU0FBUyxtQkFBbUIsS0FBSyxZQUFZLE9BQU8sU0FBUyxvQkFBb0IsZ0JBQWdCO0FBQzNHLGlCQUFhLGlCQUFLLFdBQUwsbUJBQWEsU0FBYixZQUFxQjtBQUFBLEVBQ25DO0FBQ0EsTUFBSSxDQUFDO0FBQVksV0FBTztBQUN4QixNQUFJLGFBQWEseUJBQXdCLEtBQUssSUFBSTtBQUNsRCxNQUFJLFNBQXlDO0FBQzdDLE1BQUssUUFBTyxTQUFTLG9CQUFvQixrQkFBa0Isb0JBQW9CLG1CQUFtQixvQkFBb0IsZ0JBQWdCO0FBQ3JJLFFBQUksV0FBVyxLQUFLLE1BQU0sSUFBSTtBQUM3QixtQkFBYTtBQUFBLElBQ2QsT0FBTztBQUNOLG1CQUFhLEdBQUcsY0FBYztBQUFBLElBQy9CO0FBQ0EsYUFBUyxPQUFPLElBQUksTUFBTSxzQkFBc0IsVUFBVTtBQUFBLEVBQzNELE9BQU87QUFDTixhQUFTLE9BQU8sSUFBSSxNQUFNLHNCQUFzQixVQUFVO0FBQUEsRUFDM0Q7QUFDQSxNQUFJLENBQUMsUUFBUTtBQUFFLFdBQU87QUFBQSxFQUFNO0FBQzVCLFNBQU87QUFDUjtBQUVPLDZCQUE2QixRQUEyQixZQUE0QixVQUFrQjtBQUM1RyxNQUFJLENBQUM7QUFBWSxXQUFPO0FBQ3hCLE1BQUksV0FBVztBQUNmLE1BQUksT0FBTyxlQUFlLFVBQVU7QUFDbkMsZUFBVztBQUFBLEVBQ1osT0FBTztBQUNOLGVBQVcsV0FBVztBQUN0QixlQUFXLFdBQVc7QUFBQSxFQUN2QjtBQUNBLFFBQU0sYUFBYSxrQkFBa0IsT0FBTyxTQUFTLGdCQUFnQixRQUFRO0FBQzdFLE1BQUksQ0FBQztBQUFZLFdBQU87QUFDeEIsTUFBSSxhQUFhLHlCQUF3QixRQUFRO0FBQ2pELE1BQUksT0FBTyxTQUFTLG9CQUFvQixnQkFBZ0I7QUFDdkQsUUFBSSxXQUFXLEtBQUssTUFBTSxJQUFJO0FBQzdCLG1CQUFhO0FBQUEsSUFDZCxPQUFPO0FBQ04sbUJBQWEsR0FBRyxjQUFjO0FBQUEsSUFDL0I7QUFBQSxFQUNELE9BQU87QUFDTixpQkFBYSx5QkFBd0IsUUFBUTtBQUFBLEVBQzlDO0FBQ0EsUUFBTSxTQUFTLE9BQU8sSUFBSSxNQUFNLHNCQUFzQixVQUFVO0FBQ2hFLE1BQUksQ0FBQyxRQUFRO0FBQUUsV0FBTztBQUFBLEVBQU07QUFDNUIsU0FBTztBQUNSOzs7QW1CdFhBLHdCQUE4Qzs7O0FDQXZDLElBQU0scUJBQU4sTUFBeUI7QUFBQSxFQUF6QjtBQUNILFNBQVEsU0FBeUQsQ0FBQztBQUFBO0FBQUEsRUFFbEUsR0FBRyxPQUFlLFVBQWdDO0FBQzlDLFFBQUksQ0FBQyxLQUFLLE9BQU8sUUFBUTtBQUNyQixXQUFLLE9BQU8sU0FBUyxDQUFDO0FBQUEsSUFDMUI7QUFDQSxTQUFLLE9BQU8sT0FBTyxLQUFLLFFBQVE7QUFBQSxFQUNwQztBQUFBLEVBRUEsSUFBSSxPQUFlLFVBQWdDO0FBQy9DLFFBQUksQ0FBQyxLQUFLLE9BQU87QUFBUTtBQUV6QixTQUFLLE9BQU8sU0FBUyxLQUFLLE9BQU8sT0FBTyxPQUFPLENBQUMsTUFBTSxNQUFNLFFBQVE7QUFBQSxFQUN4RTtBQUFBLEVBRUEsS0FBSyxPQUFlLE1BQVk7QUFDNUIsUUFBSSxDQUFDLEtBQUssT0FBTztBQUFRO0FBRXpCLFNBQUssT0FBTyxPQUFPLFFBQVEsQ0FBQyxhQUFhLFNBQVMsSUFBSSxDQUFDO0FBQUEsRUFDM0Q7QUFDSjs7O0FDbkJPLElBQU0sZ0JBQU4sTUFBb0I7QUFBQSxFQVExQixZQUFZLGFBQTBCLFNBQW1CLENBQUMsR0FBRyxnQkFBMEIsQ0FBQyxHQUFHO0FBQzFGLFNBQUssVUFBVSxJQUFJLG1CQUFtQjtBQUN0QyxTQUFLLGNBQWM7QUFDbkIsU0FBSyxZQUFZLFlBQVksY0FBYyx1QkFBdUIsS0FBSztBQUN2RSxTQUFLLFNBQVMsS0FBSyxVQUFVLFVBQVUseUJBQXlCO0FBQ2hFLFNBQUssZUFBZTtBQUNwQixTQUFLLFVBQVUsTUFBTTtBQUNyQixTQUFLLGdCQUFnQjtBQUFBLEVBQ3RCO0FBQUEsRUFFQSxHQUFHLE9BQWUsVUFBZ0M7QUFDakQsU0FBSyxRQUFRLEdBQUcsT0FBTyxRQUFRO0FBQUEsRUFDaEM7QUFBQSxFQUVBLElBQUksT0FBZSxVQUFnQztBQUNsRCxTQUFLLFFBQVEsSUFBSSxPQUFPLFFBQVE7QUFBQSxFQUNqQztBQUFBLEVBRUEsQUFBUSxLQUFLLE9BQWUsTUFBWTtBQUN2QyxTQUFLLFFBQVEsS0FBSyxPQUFPLElBQUk7QUFBQSxFQUM5QjtBQUFBLEVBRUEsVUFBVSxRQUFrQjtBQUMzQixTQUFLLGVBQWU7QUFDcEIsU0FBSyxTQUFTO0FBQ2QsUUFBSSxPQUFPLFdBQVcsR0FBRztBQUN4QixhQUFPLFFBQVEsQ0FBQyxVQUFVO0FBQ3pCLGFBQUssV0FBVyxLQUFLO0FBQUEsTUFDdEIsQ0FBQztBQUFBLElBQ0Y7QUFDQSxTQUFLLEtBQUssVUFBVSxLQUFLLE1BQU07QUFBQSxFQUNoQztBQUFBLEVBRUEsaUJBQWlCO0FBQ2hCLFNBQUssT0FBTyxNQUFNO0FBQUEsRUFDbkI7QUFBQSxFQUVBLFdBQVcsT0FBZTtBQUN6QixTQUFLLE9BQU8sV0FBVyxrQkFBa0IsQ0FBQyxTQUFTO0FBQ2xELFVBQUksTUFBTSxrQkFBa0IsTUFBTSxNQUFNO0FBQ3ZDLGFBQUssWUFBWTtBQUFBLE1BQ2xCLE9BQU87QUFDTixhQUFLLFlBQVk7QUFBQSxNQUNsQjtBQUNBLFdBQUssYUFBYSxhQUFhLEtBQUs7QUFDcEMsWUFBTSxhQUFhLEtBQUssU0FBUyxRQUFRLEVBQUUsS0FBSywyQ0FBMkMsQ0FBQztBQUM1RixZQUFNLE1BQU07QUFDWixZQUFNLGFBQWEsV0FBVyxTQUFTLFFBQVEsRUFBRSxLQUFLLDRCQUE0QixDQUFDO0FBQ25GLGlCQUFXLFlBQVk7QUFDdkIsaUJBQVcsYUFBYSxDQUFDLE1BQU07QUFDOUIsYUFBSyxZQUFZLEtBQUs7QUFDdEIsYUFBSyxPQUFPO0FBQUEsTUFDYixDQUFDO0FBQUEsSUFDRixDQUFDO0FBQUEsRUFDRjtBQUFBLEVBRUEsTUFBTSxTQUFTLE9BQWU7QUFDN0IsU0FBSyxPQUFPLEtBQUssS0FBSztBQUN0QixTQUFLLFdBQVcsS0FBSztBQUNyQixTQUFLLEtBQUssT0FBTyxLQUFLO0FBQ3RCLFNBQUssS0FBSyxVQUFVLEtBQUssTUFBTTtBQUFBLEVBQ2hDO0FBQUEsRUFFQSxpQkFBaUI7QUFDaEIsVUFBTSxjQUFjLEtBQUssVUFBVSxTQUFTLFFBQVEsRUFBRSxLQUFLLCtDQUErQyxDQUFDO0FBQzNHLFVBQU0sTUFBTTtBQUNaLGdCQUFZLFlBQVk7QUFDeEIsZ0JBQVksYUFBYSxDQUFDLE1BQU07QUFDOUIsV0FBSyxVQUFVLEtBQUssYUFBYTtBQUFBLElBQ25DLENBQUM7QUFDRCxXQUFPO0FBQUEsRUFDUjtBQUFBLEVBRUEsWUFBWSxPQUFlO0FBQzFCLFNBQUssU0FBUyxLQUFLLE9BQU8sT0FBTyxDQUFDLE1BQU0sTUFBTSxLQUFLO0FBQ25ELFNBQUssT0FBTyxLQUFLLGVBQWUsU0FBUyxFQUFFLE9BQU87QUFDbEQsU0FBSyxLQUFLLFVBQVUsS0FBSztBQUN6QixTQUFLLEtBQUssVUFBVSxLQUFLLE1BQU07QUFBQSxFQUNoQztBQUNEOzs7QUN6RkEsd0JBQXFEO0FBS3JELElBQXFCLHdCQUFyQixjQUFtRCx3QkFBTTtBQUFBLEVBTXJELFlBQVksTUFBVSxRQUEyQixhQUF5QixNQUFxQjtBQUMzRixVQUFNLElBQUc7QUFDVCxTQUFLLFNBQVM7QUFDZCxTQUFLLE1BQU07QUFDWCxTQUFLLE9BQU87QUFDWixTQUFLLE9BQU87QUFDWixTQUFLLGNBQWM7QUFBQSxFQUN2QjtBQUFBLEVBQ0EsU0FBUztBQUNMLFVBQU0sRUFBRSxjQUFjO0FBRXRCLGNBQVUsaUJBQWlCLFdBQVcsQ0FBQyxNQUFNO0FBQ3pDLFVBQUksRUFBRSxRQUFRLFNBQVM7QUFDbkIsYUFBSyxNQUFNO0FBQUEsTUFDZjtBQUFBLElBQ0osQ0FBQztBQUNELGNBQVUsU0FBUyxNQUFNLEVBQUUsTUFBTSxpQkFBaUIsQ0FBQztBQUNuRCxRQUFJLDBCQUFRLFNBQVMsRUFDaEIsUUFBUSxrRUFBa0UsRUFDMUUsUUFBUSxDQUFDLFNBQ04sS0FDSyxTQUFTLEVBQUUsRUFDWCxTQUFTLE9BQU8sVUFBVTtBQUN2QixVQUFJLE1BQU0sS0FBSyxNQUFNLElBQUk7QUFDckIsYUFBSyxPQUFPLE1BQU0sS0FBSztBQUFBLE1BQzNCO0FBQUEsSUFDSixDQUFDLENBQ1Q7QUFBQSxFQUNSO0FBQUEsRUFDQSxNQUFNLFVBQVU7QUFDWixRQUFJLEtBQUssS0FBSyxrQkFBa0IsTUFBTSxZQUFZO0FBQzlDLFdBQUssT0FBTztBQUFBLElBQ2hCO0FBQ0EsVUFBTSxFQUFFLGNBQWM7QUFDdEIsUUFBSSxLQUFLLFNBQVMsSUFBSTtBQUNsQixnQkFBVSxNQUFNO0FBQ2hCLFdBQUssWUFBWSxRQUFRO0FBQUEsSUFDN0IsV0FBVyxLQUFLLE9BQU8sU0FBUyxtQkFBbUIsU0FBUyxLQUFLLEtBQUssWUFBWSxDQUFDLEdBQUc7QUFDbEYsYUFBTyxJQUFJLHlCQUFPLHFDQUFxQztBQUFBLElBQzNELE9BQU87QUFFSCxZQUFNLEtBQUssS0FBSyxTQUFTLEtBQUssS0FBSyxZQUFZLENBQUM7QUFDaEQsV0FBSyxZQUFZLFFBQVE7QUFDekIsV0FBSyxPQUFPLGFBQWE7QUFDekIsZ0JBQVUsTUFBTTtBQUFBLElBQ3BCO0FBQUEsRUFDSjtBQUNKOzs7QUN6REEsOENBQWdIO0FBQ2hILHdCQUFvQztBQUU3QixJQUFNLGdDQUFOLE1BQW9DO0FBQUEsRUFRMUMsWUFBWSxRQUEyQjtBQUx2QyxlQUEyQjtBQUMzQixrQkFBZ0M7QUFDaEMsMkJBQXdDLG9CQUFJLElBQUk7QUFJL0MsU0FBSyxTQUFTO0FBQ2QsU0FBSyxNQUFNLE9BQU87QUFFbEIsSUFBQyxhQUFZO0FBaEJmO0FBaUJHLFdBQUssU0FBUyxzREFBUyxLQUFLLEdBQUc7QUFDL0IsVUFBSSxLQUFLLE9BQU8sY0FBYyxHQUFHO0FBQ2hDLGFBQUssTUFBTSxLQUFLLE9BQU8sT0FBTztBQUFBLE1BQy9CLE9BQU87QUFDTixjQUFNLEtBQUssT0FBTyxZQUFZO0FBQzlCLGFBQUssTUFBTSxLQUFLLE9BQU8sT0FBTztBQUU5QixZQUFJLENBQUMsS0FBSyxPQUFPLGdCQUFnQixHQUFHO0FBQ25DLGdCQUFNLEtBQUssT0FBTyxjQUFjO0FBQUEsUUFDakM7QUFBQSxNQUNEO0FBQ0EsWUFBTSxhQUFhLFdBQUssUUFBTCxtQkFBVTtBQUM3QixVQUFJLFlBQVk7QUFDZixhQUFLLGFBQWE7QUFBQSxNQUNuQjtBQUNBLFlBQU0sUUFBNEM7QUFBQSxRQUNqRCxNQUFNO0FBQUEsUUFDTixJQUFJLENBQUMsU0FBUztBQUNiLGVBQUssYUFBYSxNQUFhLElBQUk7QUFBQSxRQUNwQztBQUFBLE1BQ0Q7QUFFQSxZQUFNLE1BQU0seUNBQVksWUFBWTtBQUNwQyxVQUFJLEtBQUs7QUFDUixhQUFLLFdBQVc7QUFBQSxNQUNqQjtBQUNBLFdBQUssT0FBTyxJQUFJLE1BQU0sU0FBUyxFQUFFLFFBQVEsQ0FBQyxTQUFTO0FBQ2xELGFBQUssYUFBYSxFQUFFLElBQUksSUFBSSxRQUFRLE9BQU8sTUFBTSxLQUFLLEtBQUssR0FBRyxLQUFLO0FBQUEsTUFDcEUsQ0FBQztBQUNELFdBQUssT0FBTyxrQkFBa0I7QUFBQSxJQUMvQixHQUFHO0FBQUEsRUFDSjtBQUFBLEVBQ0EsY0FBYztBQUNiLFFBQUksS0FBSyxVQUFVO0FBQ2xCLFdBQUssV0FBVyxlQUFlLEtBQUssUUFBUTtBQUFBLElBQzdDO0FBQUEsRUFDRDtBQUFBLEVBQ0EsTUFBTSxhQUFhLE1BSWhCLFNBQWtCO0FBMUR0QjtBQTJERSxRQUFLLEtBQWE7QUFBTSxhQUFRLEtBQWE7QUFDN0MsVUFBTSxPQUFPLEtBQUssSUFBSSxNQUFNLHNCQUFzQixLQUFLLElBQUk7QUFDM0QsUUFBSSxDQUFFLGlCQUFnQiwwQkFBUTtBQUFFO0FBQUEsSUFBUTtBQUV4QyxVQUFNLFdBQVcsaUJBQUssUUFBTCxtQkFBVSx5QkFBVixtQkFBZ0MsZUFBZTtBQUNoRSxVQUFNLFVBQVUscUNBQVUsUUFBUSxtQ0FBTSxTQUFOLFlBQWM7QUFDaEQsVUFBTSxTQUFTLFdBQVUsS0FBSyxRQUFRLElBQUk7QUFDMUMsUUFBSSxDQUFFLG1CQUFrQiw0QkFBVTtBQUFFO0FBQUEsSUFBUTtBQUU1QyxVQUFNLGFBQWEsY0FBYyxLQUFLLFFBQVEsT0FBTyxJQUFJO0FBQ3pELFFBQUksQ0FBQyxZQUFZO0FBQUU7QUFBQSxJQUFPO0FBQzFCLFFBQUksZUFBZSxNQUFNO0FBQUU7QUFBQSxJQUFPO0FBRWxDLFFBQUksU0FBUztBQUNaLFdBQUssT0FBTyxXQUFXLFFBQVEsU0FBUyxJQUFJO0FBQUEsSUFDN0MsT0FBTztBQUNOLFdBQUssT0FBTyxXQUFXLFFBQVEsU0FBUyxLQUFLO0FBQUEsSUFDOUM7QUFDQSxRQUFJLFNBQVM7QUFDWixhQUFPLFVBQVU7QUFDakIsV0FBSyxnQkFBZ0IsSUFBSSxPQUFPLE1BQU0sTUFBTTtBQUFBLElBQzdDLE9BQU87QUFDTixhQUFPLFVBQVU7QUFDakIsV0FBSyxnQkFBZ0IsT0FBTyxPQUFPLElBQUk7QUFBQSxJQUN4QztBQUFBLEVBRUQ7QUFDRDs7O0FDdEZBLHdCQUFzRTtBQUt0RSxJQUFxQixvQkFBckIsY0FBK0Msd0JBQU07QUFBQSxFQUtwRCxZQUFZLE1BQVUsUUFBMkI7QUFDaEQsVUFBTSxJQUFHO0FBQ1QsU0FBSyxTQUFTO0FBQ2QsU0FBSyxNQUFNO0FBQ1gsU0FBSyxZQUFZLE9BQU8sU0FBUztBQUFBLEVBQ2xDO0FBQUEsRUFDQSxTQUFTO0FBaEJWO0FBaUJFLFNBQUssUUFBUSxTQUFTLHVCQUF1QjtBQUM3QyxRQUFJO0FBQ0osVUFBTSxFQUFFLGdCQUFnQixvQkFBb0IsbUJBQW1CLEtBQUssT0FBTyxHQUFHO0FBQzlFLFFBQUssRUFBQyxrQkFBa0Isa0RBQWdCLFlBQVcsT0FBTyxDQUFDLGlCQUFpQjtBQUMzRSwyQkFBcUI7QUFBQSxJQUN0QjtBQUNBLFFBQUksaUJBQWlCO0FBQ3BCLDJCQUFxQiw0QkFBZ0IsV0FBaEIsbUJBQXdCLGFBQXhCLG1CQUFrQztBQUFBLElBQ3hELE9BQU87QUFDTiwyQkFBcUI7QUFBQSxJQUN0QjtBQUVBLFVBQU0sRUFBRSxjQUFjO0FBQ3RCLGNBQVUsU0FBUyxNQUFNLEVBQUUsTUFBTSxzQ0FBc0MsQ0FBQztBQUN4RSxVQUFNLFVBQVUsSUFBSSwwQkFBUSxTQUFTO0FBQ3JDLFlBQVEsT0FBTyxTQUFTLEtBQUssRUFBRSxNQUFNLDREQUE0RCxDQUFDLEVBQUUsTUFBTSxRQUFRO0FBQ2xILFlBQVEsT0FBTyxTQUFTLEtBQUssRUFBRSxNQUFNLHlFQUF5RSxDQUFDO0FBQy9HLFlBQVEsT0FBTyxTQUFTLEtBQUssRUFBRSxNQUFNLCtEQUErRCxDQUFDO0FBQ3JHLFlBQVEsT0FBTyxTQUFTLEtBQUssRUFBRSxNQUFNLHlDQUF5QyxDQUFDO0FBQy9FLFFBQUksQ0FBQyxLQUFLLE9BQU8sU0FBUyxnQkFBZ0IsWUFBSyxPQUFPLFNBQVMsaUJBQXJCLG1CQUFtQyxZQUFXLElBQUk7QUFDM0YsVUFBSSwwQkFBUSxTQUFTLEVBQ25CLFFBQVEsNEJBQTRCLEVBQ3BDLFFBQVEsaURBQWlELEVBQ3pELFlBQVksQ0FBQyxPQUFPO0FBQ3BCLGFBQUssT0FBTyxTQUFTLG1CQUFtQixRQUFRLENBQUMsY0FBYztBQUM5RCxhQUFHLFVBQVUsTUFBTSxXQUFXLFNBQVM7QUFBQSxRQUN4QyxDQUFDO0FBQ0QsV0FBRyxTQUFTLEtBQUssU0FBUztBQUMxQixXQUFHLFNBQVMsT0FBTyxVQUFVO0FBQzVCLGVBQUssWUFBWTtBQUFBLFFBQ2xCLENBQUM7QUFBQSxNQUNGLENBQ0E7QUFBQSxJQUNGO0FBQ0EsUUFBSSwwQkFBUSxTQUFTLEVBQ25CLFVBQVUsQ0FBQyxPQUF3QjtBQUNuQyxTQUFHLGNBQWMsUUFBUTtBQUN6QixTQUFHLE9BQU87QUFDVixTQUFHLFNBQVMsTUFBTTtBQUNsQixTQUFHLFFBQVEsWUFBWTtBQUN0QixZQUFJLEtBQUssT0FBTyxTQUFTLGdCQUFnQixLQUFLLE9BQU8sU0FBUyxhQUFhLEtBQUssTUFBTSxJQUFJO0FBQ3pGLGVBQUssWUFBWSxNQUFNLEtBQUssT0FBTyxTQUFTLGFBQWEsTUFBTSxHQUFHLEVBQUUsSUFBSTtBQUFBLFFBQ3pFO0FBQ0EsWUFBSSxLQUFLLGNBQWMsUUFBUTtBQUM5QixpQkFBTyxJQUFJLHlCQUFPLGdDQUFnQztBQUFBLFFBQ25EO0FBQ0EsYUFBSyxNQUFNO0FBQ1gsY0FBTSxVQUFVLEtBQUssSUFBSSxNQUFNLGtCQUFrQixFQUFFLE9BQU8sQ0FBQyxTQUFTLEtBQUssa0JBQWtCLHlCQUFPO0FBQ2xHLG1CQUFXLFVBQVUsU0FBUztBQUM3QixjQUFJLGtCQUFrQiwyQkFBUztBQUM5QixrQkFBTSxpQkFBaUIsTUFBTSxrQkFBa0IsS0FBSyxRQUFRLE9BQU8sTUFBTSxJQUFJO0FBQzdFLGdCQUFJO0FBQWdCO0FBQ3BCLGdCQUFJLE9BQU8sU0FBUztBQUFvQjtBQUN4QyxrQkFBTSxhQUFhLGNBQWMsS0FBSyxRQUFRLE9BQU8sSUFBSTtBQUN6RCxnQkFBSTtBQUFZO0FBQ2hCLGtCQUFNLGlCQUFpQixLQUFLLFFBQVEsT0FBTyxNQUFNLE9BQU8sS0FBSyxTQUFTO0FBQUEsVUFDdkU7QUFBQSxRQUNEO0FBQUEsTUFDRCxDQUFDO0FBQUEsSUFDRixDQUFDLEVBQ0EsVUFBVSxDQUFDLE9BQXdCO0FBQ25DLFNBQUcsY0FBYyxRQUFRO0FBQ3pCLFNBQUcsUUFBUSxZQUFZO0FBQ3RCLGFBQUssTUFBTTtBQUFBLE1BQ1osQ0FBQztBQUFBLElBQ0YsQ0FBQztBQUFBLEVBQ0g7QUFBQSxFQUNBLFVBQVU7QUFDVCxVQUFNLEVBQUUsY0FBYztBQUN0QixjQUFVLE1BQU07QUFBQSxFQUNqQjtBQUNEOzs7QUN0RkEsd0JBQXFEO0FBUzlDLElBQU0sa0JBQU4sY0FBOEIsa0JBQXdCO0FBQUEsRUFDNUQsWUFDYyxTQUNQLFFBQ0w7QUFDRCxVQUFNLFNBQVMsTUFBTTtBQUhSO0FBQUEsRUFJZDtBQUFBLEVBR0EsY0FBYyxNQUErQjtBQUM1QyxZQUFRO0FBQUEsV0FDRjtBQUNKLGVBQU87QUFBQSxXQUNIO0FBQ0osZUFBTztBQUFBO0FBQUEsRUFFVjtBQUFBLEVBRUEsZUFBZSxXQUE0QjtBQTdCNUM7QUE4QkUsVUFBTSxFQUFFLGdCQUFnQixvQkFBb0IsbUJBQW1CLEtBQUssT0FBTyxHQUFHO0FBQzlFLFFBQUssRUFBQyxrQkFBa0Isa0RBQWdCLFlBQVcsT0FBTyxDQUFDLGlCQUFpQjtBQUMzRSxXQUFLLE9BQU8sU0FBUyxlQUFlO0FBQ3BDLFdBQUssT0FBTyxhQUFhO0FBQ3pCLGFBQU8sQ0FBQztBQUFBLElBQ1Q7QUFDQSxRQUFJO0FBQ0osUUFBSSxpQkFBaUI7QUFDcEIsZUFBUyxLQUFLLE9BQU8sSUFBSSxNQUFNLHNCQUFzQiw0QkFBZ0IsV0FBaEIsbUJBQXdCLGFBQXhCLG1CQUFrQyxnQkFBMEI7QUFBQSxJQUVsSCxPQUFPO0FBQ04sZUFBUyxLQUFLLE9BQU8sSUFBSSxNQUFNLHNCQUFzQixjQUFjO0FBQUEsSUFDcEU7QUFFQSxVQUFNLFFBQWlCLENBQUM7QUFDeEIsVUFBTSxrQkFBa0IsVUFBVSxZQUFZO0FBRTlDLDRCQUFNLGdCQUFnQixRQUFRLENBQUMsU0FBd0I7QUFDdEQsVUFBSSxnQkFBZ0IsMkJBQ1AsS0FBSyxLQUFLLFlBQVksRUFBRSxTQUFTLGVBQWUsR0FDM0Q7QUFDRCxjQUFNLEtBQUssSUFBSTtBQUFBLE1BQ2hCO0FBQUEsSUFDRCxDQUFDO0FBRUQsV0FBTztBQUFBLEVBQ1I7QUFBQSxFQUVBLGlCQUFpQixNQUFhLElBQXVCO0FBQ3BELE9BQUcsUUFBUSxLQUFLLEtBQUssUUFBUSxPQUFPLEVBQUUsQ0FBQztBQUFBLEVBQ3hDO0FBQUEsRUFFQSxpQkFBaUIsTUFBbUI7QUFDbkMsU0FBSyxRQUFRLFFBQVEsS0FBSyxLQUFLLFFBQVEsT0FBTyxFQUFFO0FBQ2hELFNBQUssUUFBUSxRQUFRLE9BQU87QUFDNUIsU0FBSyxPQUFPLFNBQVMsZUFBZSxLQUFLO0FBQ3pDLFNBQUssT0FBTyxhQUFhO0FBQ3pCLFNBQUssTUFBTTtBQUFBLEVBQ1o7QUFDRDs7O0FONURBLDZCQUFvQyxhQUEwQjtBQUMxRCxRQUFNLGNBQWMsWUFBWTtBQUNoQyxRQUFNLGNBQWMsSUFBSSwwQkFBUSxXQUFXLEVBQ3RDLFFBQVEsa0JBQWtCLEVBQzFCLFFBQVEsOERBQThELEVBQ3RFLFFBQVEsQ0FBQyxTQUNOLEtBQ0ssU0FBUyxZQUFZLE9BQU8sU0FBUyxpQkFBaUIsRUFDdEQsU0FBUyxPQUFPLFVBQVU7QUFDdkIsUUFBSSxNQUFNLEtBQUssTUFBTSxJQUFJO0FBQUU7QUFBQSxJQUFRO0FBQ25DLGdCQUFZLE9BQU8sU0FBUyxvQkFBb0I7QUFDaEQsVUFBTSxZQUFZLE9BQU8sYUFBYTtBQUFBLEVBQzFDLENBQUMsQ0FDVCxFQUNDLFVBQVUsQ0FBQyxXQUNSLE9BQ0ssY0FBYyw4QkFBOEIsRUFDNUMsT0FBTyxFQUNQLFFBQVEsWUFBWTtBQUNqQixnQkFBWSxrQkFBa0IsWUFBWSxPQUFPLFNBQVMsaUJBQWlCO0FBQzNFLGdCQUFZLFFBQVE7QUFBQSxFQUN4QixDQUFDLENBQ1Q7QUFDSixjQUFZLE9BQU8sV0FBVyxtQ0FBbUM7QUFDakUsY0FBWSxPQUFPLE1BQU0sUUFBUSxZQUFZLElBQUksTUFBTSxVQUFVLGFBQWEsS0FBZTtBQUU3RixNQUFJLFlBQVksT0FBTyxTQUFTLHNCQUFzQixtQkFBbUI7QUFDckUsUUFBSSwwQkFBUSxXQUFXLEVBQ2xCLFFBQVEsOERBQThELEVBQ3RFLFFBQVEsdU9BQXlPLEVBQ2pQLFVBQVUsQ0FBQyxXQUNSLE9BQ0ssU0FBUyxZQUFZLE9BQU8sU0FBUyxpQkFBaUIsRUFDdEQsU0FBUyxPQUFPLFVBQVU7QUFDdkIsVUFBSSxDQUFDLE9BQU87QUFDUixvQkFBWSxPQUFPLFdBQVcsVUFBVTtBQUFBLE1BQzVDLE9BQU87QUFDSCxvQkFBWSxPQUFPLFNBQVMsb0JBQW9CO0FBQ2hELG9CQUFZLE9BQU8sV0FBVyxXQUFXO0FBQUEsTUFDN0M7QUFDQSxrQkFBWSxPQUFPLFNBQVMsb0JBQW9CO0FBQ2hELFlBQU0sWUFBWSxPQUFPLGFBQWE7QUFDdEMsa0JBQVksUUFBUTtBQUFBLElBQ3hCLENBQUMsQ0FDVDtBQUFBLEVBQ1I7QUFFQSxNQUFJLDBCQUFRLFdBQVcsRUFDbEIsUUFBUSwrQ0FBK0MsRUFDdkQsUUFBUSw0RUFBNEUsRUFDcEYsWUFBWSxDQUFDLGFBQWE7QUFDdkIsYUFBUyxVQUFVLFFBQVEsbUJBQW1CO0FBQzlDLGdCQUFZLE9BQU8sU0FBUyxtQkFBbUIsUUFBUSxDQUFDLFNBQVM7QUFDN0QsVUFBSSxTQUFTLFNBQVMsU0FBUyxNQUFNO0FBQ2pDLGlCQUFTLFVBQVUsT0FBTyxVQUFVO0FBQUEsTUFDeEMsT0FBTztBQUNILGlCQUFTLFVBQVUsTUFBTSxNQUFNLElBQUk7QUFBQSxNQUN2QztBQUFBLElBQ0osQ0FBQztBQUNELFFBQUksQ0FBQyxZQUFZLE9BQU8sU0FBUyxtQkFBbUIsU0FBUyxZQUFZLE9BQU8sU0FBUyxlQUFlLFFBQVEsS0FBSyxFQUFFLENBQUMsS0FBSyxZQUFZLE9BQU8sU0FBUyxtQkFBbUIsUUFBUTtBQUNoTCxrQkFBWSxPQUFPLFNBQVMsaUJBQWlCO0FBQzdDLGtCQUFZLE9BQU8sYUFBYTtBQUFBLElBQ3BDO0FBQ0EsVUFBTSxjQUFjLFlBQVksT0FBTyxTQUFTLGVBQWUsV0FBVyxHQUFHLElBQUksWUFBWSxPQUFPLFNBQVMsaUJBQWlCLE1BQU0sWUFBWSxPQUFPLFNBQVM7QUFFaEssYUFDSyxTQUFTLFdBQVcsRUFDcEIsU0FBUyxPQUFPLFVBQTZCO0FBQzFDLGtCQUFZLE9BQU8sU0FBUyxpQkFBaUI7QUFDN0Msa0JBQVksT0FBTyxhQUFhO0FBQ2hDLGtCQUFZLFFBQVE7QUFBQSxJQUN4QixDQUFDO0FBQUEsRUFDVCxDQUFDO0FBRUwsUUFBTSxXQUFXLElBQUksMEJBQVEsV0FBVztBQUN4QyxXQUFTLFFBQVEsdUNBQXVDO0FBQ3hELFFBQU0sUUFBUSxTQUFTLHVCQUF1QjtBQUM5QyxRQUFNLE9BQ0YsZ0tBQ0EsTUFBTSxTQUFTLElBQUksR0FDbkIsbUhBQ0o7QUFDQSxXQUFTLFFBQVEsS0FBSztBQUN0QixRQUFNLE9BQU8sSUFBSSxjQUFjLFNBQVMsV0FBVSxZQUFZLE9BQU8sU0FBUyxzQkFBc0IsQ0FBQyxHQUFHLENBQUMsTUFBTSxRQUFRLENBQUU7QUFDekgsT0FBSyxHQUFHLFVBQVUsT0FBTyxXQUFxQjtBQUMxQyxnQkFBWSxPQUFPLFNBQVMscUJBQXFCO0FBQ2pELFVBQU0sWUFBWSxPQUFPLGFBQWE7QUFBQSxFQUMxQyxDQUFDO0FBRUQsTUFBSSxDQUFDLFlBQVksT0FBTyxTQUFTLG1CQUFtQixTQUFTLElBQUksS0FBSyxDQUFDLFlBQVksT0FBTyxTQUFTLG1CQUFtQixTQUFTLFFBQVEsS0FBSyxDQUFDLFlBQVksT0FBTyxTQUFTLG1CQUFtQixTQUFTLFlBQVksR0FBRztBQUNoTixhQUFTLFlBQVksQ0FBQyxhQUFhO0FBQy9CLFlBQU0sVUFBVTtBQUFBLFFBQ1osRUFBRSxPQUFPLE1BQU0sT0FBTyxXQUFXO0FBQUEsUUFDakMsRUFBRSxPQUFPLFVBQVUsT0FBTyxTQUFTO0FBQUEsUUFDbkMsRUFBRSxPQUFPLGNBQWMsT0FBTyxhQUFhO0FBQUEsUUFDM0MsRUFBRSxPQUFPLFVBQVUsT0FBTyxtQkFBbUI7QUFBQSxNQUNqRDtBQUVBLGNBQVEsUUFBUSxDQUFDLFdBQVc7QUEzR3hDO0FBNEdnQixZQUFJLENBQUMsbUJBQVksT0FBTyxTQUFTLHVCQUE1QixtQkFBZ0QsU0FBUyxPQUFPLFNBQVE7QUFDekUsbUJBQVMsVUFBVSxPQUFPLE9BQU8sT0FBTyxLQUFLO0FBQUEsUUFDakQ7QUFBQSxNQUNKLENBQUM7QUFDRCxlQUFTLFVBQVUsS0FBSyxHQUFHO0FBQzNCLGVBQVMsU0FBUyxHQUFHO0FBQ3JCLGVBQVMsU0FBUyxPQUFPLFVBQVU7QUFDL0IsWUFBSSxVQUFVLFVBQVU7QUFDcEIsaUJBQU8sSUFBSSxzQkFBc0IsWUFBWSxLQUFLLFlBQVksUUFBUSxhQUFhLElBQXFCLEVBQUUsS0FBSztBQUFBLFFBQ25IO0FBQ0EsY0FBTSxLQUFLLFNBQVMsTUFBTSxZQUFZLENBQUM7QUFDdkMsb0JBQVksUUFBUTtBQUNwQixvQkFBWSxPQUFPLGFBQWE7QUFBQSxNQUNwQyxDQUFDO0FBQUEsSUFDTCxDQUFDO0FBQUEsRUFDTCxPQUFPO0FBQ0gsYUFBUyxVQUFVLENBQUMsV0FDaEIsT0FDSyxjQUFjLHNCQUFzQixFQUNwQyxPQUFPLEVBQ1AsUUFBUSxZQUFZO0FBQ2pCLFVBQUksc0JBQXNCLFlBQVksS0FBSyxZQUFZLFFBQVEsYUFBYSxJQUFxQixFQUFFLEtBQUs7QUFBQSxJQUM1RyxDQUFDLENBQ1Q7QUFBQSxFQUNKO0FBR0EsUUFBTSxVQUFVLElBQUksMEJBQVEsV0FBVztBQUN2QyxRQUFNLE9BQU8sU0FBUyx1QkFBdUI7QUFDN0MsT0FBSyxPQUNELDBDQUNKO0FBQ0EsVUFBUSxRQUFRLGVBQWU7QUFDL0IsVUFBUSxRQUFRLElBQUksRUFBRSxPQUFPLE1BQU0sUUFBUSxZQUFZLElBQUksTUFBTSxVQUFVLGFBQWEsS0FBZTtBQUN2RyxVQUFRLFVBQVUsQ0FBQyxPQUFPO0FBOUk5QjtBQStJUSxRQUFJLGdCQUFnQixHQUFHLFNBQVMsWUFBWSxNQUFNO0FBQ2xELE9BQUcsZUFBZSxlQUFlO0FBQ2pDLE9BQUcsU0FBUyxtQkFBWSxPQUFPLElBQUksTUFBTSxzQkFBc0IsWUFBWSxPQUFPLFNBQVMsWUFBWSxNQUEzRixtQkFBOEYsS0FBSyxRQUFRLE9BQU8sUUFBTyxFQUFFO0FBQ3ZJLE9BQUcsU0FBUyxPQUFPLFVBQVU7QUFDekIsVUFBSSxNQUFNLEtBQUssTUFBTSxJQUFJO0FBQ3JCLG9CQUFZLE9BQU8sU0FBUyxlQUFlO0FBQzNDLGNBQU0sWUFBWSxPQUFPLGFBQWE7QUFDdEMsb0JBQVksUUFBUTtBQUNwQjtBQUFBLE1BQ0o7QUFBQSxJQUNKLENBQUM7QUFBQSxFQUNMLENBQUM7QUFFRCxRQUFNLGtCQUFrQixJQUFJLDBCQUFRLFdBQVcsRUFDMUMsUUFBUSxrQkFBa0IsRUFDMUIsUUFBUSx3Q0FBd0MsRUFDaEQsWUFBWSxDQUFDLGFBQ1YsU0FDSyxVQUFVLGdCQUFnQixtQkFBbUIsRUFDN0MsVUFBVSxnQkFBZ0Isc0JBQXNCLEVBQ2hELFNBQVMsWUFBWSxPQUFPLFNBQVMsZUFBZSxFQUNwRCxTQUFTLE9BQU8sVUFBMkQ7QUFDeEUsZ0JBQVksT0FBTyxTQUFTLGtCQUFrQjtBQUM5QyxVQUFNLFlBQVksT0FBTyxhQUFhO0FBQ3RDLGdCQUFZLFFBQVE7QUFDcEIsb0JBQWdCLFFBQVcsWUFBWSxNQUFNO0FBQUEsRUFDakQsQ0FBQyxDQUNUO0FBQ0osa0JBQWdCLE9BQU8sV0FBVyxtQ0FBbUM7QUFDckUsa0JBQWdCLE9BQU8sTUFBTSxRQUFRLFlBQVksSUFBSSxNQUFNLFVBQVUsYUFBYSxLQUFlO0FBRWpHLFFBQU0saUJBQWlCLElBQUksMEJBQVEsV0FBVyxFQUN6QyxRQUFRLGdDQUFnQyxFQUN4QyxRQUFRLG1EQUFtRCxFQUMzRCxVQUFVLENBQUMsV0FDUixPQUNLLGNBQWMsUUFBUSxFQUN0QixPQUFPLEVBQ1AsUUFBUSxZQUFZO0FBQ2pCLFFBQUkscUJBQXFCLFlBQVksT0FBTyxTQUFTO0FBQ3JELFFBQUksWUFBWSxPQUFPLFNBQVMsb0JBQW9CLGdCQUFnQjtBQUNoRSwyQkFBcUI7QUFBQSxJQUN6QixXQUFXLFlBQVksT0FBTyxTQUFTLG9CQUFvQixnQkFBZ0I7QUFDdkUsMkJBQXFCO0FBQUEsSUFDekI7QUFDQSxnQkFBWSxzQkFBc0Isa0JBQWtCO0FBQUEsRUFDeEQsQ0FBQyxDQUNUO0FBQ0osaUJBQWUsT0FBTyxXQUFXLG1DQUFtQztBQUNwRSxpQkFBZSxPQUFPLE1BQU0sUUFBUSxZQUFZLElBQUksTUFBTSxVQUFVLGFBQWEsS0FBZTtBQUVoRyxNQUFJLFlBQVksT0FBTyxTQUFTLG9CQUFvQixnQkFBZ0I7QUFDaEUsUUFBSSwwQkFBUSxXQUFXLEVBQ2xCLFFBQVEsOENBQThDLEVBQ3RELFFBQVEsaURBQWlELEVBQ3pELFVBQVUsQ0FBQyxXQUNSLE9BQ0ssU0FBUyxZQUFZLE9BQU8sU0FBUyxVQUFVLEVBQy9DLFNBQVMsT0FBTyxVQUFVO0FBQ3ZCLGtCQUFZLE9BQU8sU0FBUyxhQUFhO0FBQ3pDLFlBQU0sWUFBWSxPQUFPLGFBQWE7QUFBQSxJQUMxQyxDQUNBLENBQ1I7QUFDSixRQUFJLDBCQUFRLFdBQVcsRUFDbEIsUUFBUSwwQ0FBMEMsRUFDbEQsUUFBUSw2Q0FBNkMsRUFDckQsVUFBVSxDQUFDLFdBQ1IsT0FDSyxTQUFTLFlBQVksT0FBTyxTQUFTLFFBQVEsRUFDN0MsU0FBUyxPQUFPLFVBQVU7QUFDdkIsa0JBQVksT0FBTyxTQUFTLFdBQVc7QUFDdkMsWUFBTSxZQUFZLE9BQU8sYUFBYTtBQUFBLElBQzFDLENBQUMsQ0FDVDtBQUFBLEVBQ1I7QUFDQSxNQUFJLDJCQUFTLGNBQWM7QUFDdkIsUUFBSSwwQkFBUSxXQUFXLEVBQ2xCLFFBQVEsOEJBQThCLEVBQ3RDLFFBQVEsNkNBQTZDLEVBQ3JELFlBQVksQ0FBQyxhQUFhO0FBQ3ZCLFVBQUksQ0FBQywyQkFBUyxTQUFTO0FBQ25CLGlCQUFTLFVBQVUsUUFBUSxjQUFjO0FBQUEsTUFDN0MsT0FBTztBQUNILGlCQUFTLFVBQVUsUUFBUSxhQUFhO0FBQUEsTUFDNUM7QUFDQSxlQUFTLFVBQVUsT0FBTyxhQUFhO0FBQ3ZDLGVBQVMsU0FBUyxZQUFZLE9BQU8sU0FBUyxVQUFVLFNBQVMsS0FBSztBQUN0RSxlQUFTLFNBQVMsT0FBTyxVQUFVO0FBQy9CLG9CQUFZLE9BQU8sU0FBUyxVQUFVLFVBQVU7QUFDaEQsb0JBQVksT0FBTyxTQUFTLFNBQVMsVUFBVTtBQUMvQyxjQUFNLFlBQVksT0FBTyxhQUFhO0FBQ3RDLG9CQUFZLFFBQVE7QUFBQSxNQUN4QixDQUFDO0FBQUEsSUFDTCxDQUFDO0FBRUwsUUFBSSwwQkFBUSxXQUFXLEVBQ2xCLFFBQVEsNkJBQTZCLEVBQ3JDLFFBQVEsOENBQThDLEVBQ3RELFlBQVksQ0FBQyxhQUFhO0FBQ3ZCLGVBQVMsVUFBVSxTQUFTLGFBQWE7QUFDekMsVUFBSSxDQUFDLDJCQUFTLFNBQVM7QUFDbkIsaUJBQVMsVUFBVSxRQUFRLGNBQWM7QUFBQSxNQUM3QyxPQUFPO0FBQ0gsaUJBQVMsVUFBVSxRQUFRLGFBQWE7QUFBQSxNQUM1QztBQUNBLGVBQVMsVUFBVSxPQUFPLGFBQWE7QUFDdkMsVUFBSSxZQUFZLE9BQU8sU0FBUyxhQUFhO0FBQ3pDLGlCQUFTLFNBQVMsT0FBTztBQUFBLE1BQzdCLFdBQVcsWUFBWSxPQUFPLFNBQVMsY0FBYztBQUNqRCxpQkFBUyxTQUFTLE1BQU07QUFBQSxNQUM1QixPQUFPO0FBQ0gsaUJBQVMsU0FBUyxLQUFLO0FBQUEsTUFDM0I7QUFDQSxlQUFTLFNBQVMsT0FBTyxVQUFVO0FBQy9CLG9CQUFZLE9BQU8sU0FBUyxjQUFjLFVBQVU7QUFDcEQsb0JBQVksT0FBTyxTQUFTLGVBQWUsVUFBVTtBQUNyRCxvQkFBWSxPQUFPLFNBQVMsY0FBYyxVQUFVO0FBQ3BELGNBQU0sWUFBWSxPQUFPLGFBQWE7QUFDdEMsb0JBQVksUUFBUTtBQUFBLE1BQ3hCLENBQUM7QUFBQSxJQUNMLENBQUM7QUFBQSxFQUNUO0FBRUEsTUFBSSwwQkFBUSxXQUFXLEVBQ2xCLFFBQVEsa0JBQWtCLEVBQzFCLFFBQVEsc0VBQXNFLEVBQzlFLFVBQVUsQ0FBQyxXQUNSLE9BQ0ssU0FBUyxZQUFZLE9BQU8sU0FBUyxjQUFjLEVBQ25ELFNBQVMsT0FBTyxVQUFVO0FBQ3ZCLGdCQUFZLE9BQU8sU0FBUyxpQkFBaUI7QUFDN0MsVUFBTSxZQUFZLE9BQU8sYUFBYTtBQUN0QyxnQkFBWSxRQUFRO0FBQUEsRUFDeEIsQ0FBQyxDQUNUO0FBRUosTUFBSSwwQkFBUSxXQUFXLEVBQ2xCLFFBQVEsOEJBQThCLEVBQ3RDLFFBQVEsb0RBQW9ELEVBQzVELFVBQVUsQ0FBQyxXQUNSLE9BQ0ssU0FBUyxZQUFZLE9BQU8sU0FBUyxzQkFBc0IsRUFDM0QsU0FBUyxPQUFPLFVBQVU7QUFDdkIsZ0JBQVksT0FBTyxTQUFTLHlCQUF5QjtBQUNyRCxVQUFNLFlBQVksT0FBTyxhQUFhO0FBQ3RDLGdCQUFZLFFBQVE7QUFBQSxFQUN4QixDQUFDLENBQ1Q7QUFFSixNQUFJLDBCQUFRLFdBQVcsRUFDbEIsUUFBUSxzQkFBc0IsRUFDOUIsUUFBUSxxREFBcUQsRUFDN0QsWUFBWSxDQUFDLGFBQWE7QUFDdkIsYUFBUyxVQUFVLFNBQVMsc0JBQXNCO0FBQ2xELGFBQVMsVUFBVSxpQkFBaUIsd0NBQXdDO0FBQzVFLGFBQVMsVUFBVSxVQUFVLG9CQUFvQjtBQUNqRCxhQUFTLFNBQVMsWUFBWSxPQUFPLFNBQVMsaUJBQWlCO0FBQy9ELGFBQVMsU0FBUyxPQUFPLFVBQWdEO0FBQ3JFLGtCQUFZLE9BQU8sU0FBUyxvQkFBb0I7QUFDaEQsWUFBTSxZQUFZLE9BQU8sYUFBYTtBQUN0QyxrQkFBWSxRQUFRO0FBQUEsSUFDeEIsQ0FBQztBQUFBLEVBQ0wsQ0FBQztBQUVMLE1BQUksMkJBQVMsV0FBVztBQUNwQixVQUFNLFdBQVcsSUFBSSwwQkFBUSxXQUFXO0FBQ3hDLGFBQVMsUUFBUSwwQ0FBMEM7QUFDM0QsYUFBUyxRQUFRLGtKQUFrSjtBQUNuSyxhQUFTLFVBQVUsQ0FBQyxXQUNoQixPQUNLLFNBQVMsWUFBWSxPQUFPLFNBQVMsWUFBWSxFQUNqRCxTQUFTLE9BQU8sVUFBVTtBQUN2QixrQkFBWSxPQUFPLFNBQVMsZUFBZTtBQUMzQyxZQUFNLFlBQVksT0FBTyxhQUFhO0FBQ3RDLGtCQUFZLFFBQVE7QUFBQSxJQUN4QixDQUFDLENBQ1Q7QUFDQSxhQUFTLE9BQU8sV0FBVyxtQ0FBbUM7QUFDOUQsYUFBUyxPQUFPLE1BQU0sUUFBUSxZQUFZLElBQUksTUFBTSxVQUFVLGFBQWEsS0FBZTtBQUFBLEVBQzlGO0FBRUEsTUFBSSwwQkFBUSxXQUFXLEVBQ2xCLFFBQVEsOENBQThDLEVBQ3RELFFBQVEsb0VBQW9FLEVBQzVFLFVBQVUsQ0FBQyxXQUNSLE9BQ0ssU0FBUyxZQUFZLE9BQU8sU0FBUyxpQkFBaUIsT0FBTyxFQUM3RCxTQUFTLE9BQU8sVUFBVTtBQTNVM0M7QUE0VW9CLGdCQUFZLE9BQU8sU0FBUyxpQkFBaUIsVUFBVTtBQUN2RCxVQUFNLFlBQVksT0FBTyxhQUFhO0FBQ3RDLFFBQUksT0FBTztBQUNQLGtCQUFZLE9BQU8sY0FBYyxJQUFJLDhCQUE4QixZQUFZLE1BQU07QUFBQSxJQUN6RixPQUFPO0FBQ0gsVUFBSSxZQUFZLE9BQU8sYUFBYTtBQUNoQyxvQkFBWSxPQUFPLGtCQUFrQixJQUFJO0FBQUEsTUFDN0M7QUFDQSxrQkFBWSxPQUFPLElBQUksTUFBTSxTQUFTLEVBQUUsUUFBUSxDQUFDLFNBQVM7QUFwVmxGO0FBcVY0QiwyQkFBWSxPQUFPLGdCQUFuQixvQkFBZ0MsYUFBYSxFQUFFLElBQUksSUFBSSxRQUFRLE9BQU8sTUFBTSxLQUFLLEtBQUssR0FBRztBQUFBLE1BQzdGLENBQUM7QUFDRCx3QkFBWSxPQUFPLGdCQUFuQixtQkFBZ0M7QUFDaEMsa0JBQVksT0FBTyxjQUFjO0FBQUEsSUFDckM7QUFDQSxnQkFBWSxRQUFRO0FBQUEsRUFDeEIsQ0FBQyxDQUNUO0FBRUosTUFBSSwwQkFBUSxXQUFXLEVBQ2xCLFFBQVEscUNBQXFDLEVBQzdDLFFBQVEsb0RBQW9ELEVBQzVELFVBQVUsQ0FBQyxPQUFPO0FBQ2YsT0FBRyxRQUFRLE1BQU07QUFDakIsT0FBRyxXQUFXLHFCQUFxQjtBQUNuQyxPQUFHLFFBQVEsWUFBWTtBQUNuQixVQUFJLGtCQUFrQixZQUFZLEtBQUssWUFBWSxNQUFNLEVBQUUsS0FBSztBQUFBLElBQ3BFLENBQUM7QUFBQSxFQUNMLENBQUM7QUFFTCxNQUFJLDBCQUFRLFdBQVcsRUFDbEIsUUFBUSxtQ0FBbUMsRUFDM0MsUUFBUSxpRUFBaUUsRUFDekUsVUFBVSxDQUFDLFdBQ1IsT0FDSyxTQUFTLFlBQVksT0FBTyxTQUFTLFVBQVUsRUFDL0MsU0FBUyxPQUFPLFVBQVU7QUFDdkIsZ0JBQVksT0FBTyxTQUFTLGFBQWE7QUFDekMsVUFBTSxZQUFZLE9BQU8sYUFBYTtBQUN0QyxnQkFBWSxRQUFRO0FBQUEsRUFDeEIsQ0FBQyxDQUNUO0FBRUosTUFBSSxZQUFZLE9BQU8sU0FBUyxZQUFZO0FBQ3hDLFFBQUksMEJBQVEsV0FBVyxFQUNsQixRQUFRLGlDQUFpQyxFQUN6QyxRQUFRLG9FQUFvRSxFQUM1RSxVQUFVLENBQUMsV0FDUixPQUNLLFNBQVMsWUFBWSxPQUFPLFNBQVMsb0JBQW9CLEVBQ3pELFNBQVMsT0FBTyxVQUFVO0FBQ3ZCLGtCQUFZLE9BQU8sU0FBUyx1QkFBdUI7QUFDbkQsWUFBTSxZQUFZLE9BQU8sYUFBYTtBQUN0QyxrQkFBWSxRQUFRO0FBQUEsSUFDeEIsQ0FBQyxDQUNUO0FBRUosUUFBSSwwQkFBUSxXQUFXLEVBQ2xCLFFBQVEsK0NBQStDLEVBQ3ZELFFBQVEsc0lBQXNJLEVBQzlJLFVBQVUsQ0FBQyxXQUNSLE9BQ0ssU0FBUyxZQUFZLE9BQU8sU0FBUyw2QkFBNkIsRUFDbEUsU0FBUyxPQUFPLFVBQVU7QUFDdkIsa0JBQVksT0FBTyxTQUFTLGdDQUFnQztBQUM1RCxZQUFNLFlBQVksT0FBTyxhQUFhO0FBQ3RDLGtCQUFZLFFBQVE7QUFBQSxJQUN4QixDQUFDLENBQ1Q7QUFBQSxFQUNSO0FBQ0o7OztBT2paQSx3QkFBd0I7QUFFeEIsa0NBQXlDLGFBQTBCO0FBQy9ELFFBQU0sY0FBYyxZQUFZO0FBRWhDLE1BQUksMEJBQVEsV0FBVyxFQUNsQixRQUFRLGtCQUFrQixFQUMxQixRQUFRLDJDQUEyQyxFQUNuRCxVQUFVLENBQUMsV0FDUixPQUNLLFNBQVMsWUFBWSxPQUFPLFNBQVMsY0FBYyxFQUNuRCxTQUFTLE9BQU8sVUFBVTtBQUN2QixnQkFBWSxPQUFPLFNBQVMsaUJBQWlCO0FBQzdDLFVBQU0sWUFBWSxPQUFPLGFBQWE7QUFDdEMsUUFBSSxPQUFPO0FBQ1AsZUFBUyxLQUFLLFVBQVUsSUFBSSxrQkFBa0I7QUFBQSxJQUNsRCxPQUFPO0FBQ0gsZUFBUyxLQUFLLFVBQVUsT0FBTyxrQkFBa0I7QUFBQSxJQUNyRDtBQUNBLGdCQUFZLFFBQVE7QUFBQSxFQUN4QixDQUFDLENBQ1Q7QUFFSixRQUFNLFdBQVcsSUFBSSwwQkFBUSxXQUFXLEVBQ25DLFFBQVEsNkRBQThELEVBQ3RFLFFBQVEsNkVBQThFLEVBQ3RGLFVBQVUsQ0FBQyxXQUNSLE9BQ0ssU0FBUyxZQUFZLE9BQU8sU0FBUyw0QkFBNEIsRUFDakUsU0FBUyxPQUFPLFVBQVU7QUFDdkIsZ0JBQVksT0FBTyxTQUFTLCtCQUErQjtBQUMzRCxVQUFNLFlBQVksT0FBTyxhQUFhO0FBQUEsRUFDMUMsQ0FBQyxDQUNUO0FBRUEsV0FBUyxPQUFPLFdBQVcsbUNBQW1DO0FBQzlELFdBQVMsT0FBTyxNQUFNLFFBQVEsWUFBWSxJQUFJLE1BQU0sVUFBVSxhQUFhLEtBQWU7QUFFOUYsTUFBSSwwQkFBUSxXQUFXLEVBQ2xCLFFBQVEseUNBQXlDLEVBQ2pELFFBQVEsNEVBQTRFLEVBQ3BGLFVBQVUsQ0FBQyxXQUNSLE9BQ0ssU0FBUyxDQUFDLFlBQVksT0FBTyxTQUFTLHdCQUF3QixFQUM5RCxTQUFTLE9BQU8sVUFBVTtBQUN2QixRQUFJLENBQUMsT0FBTztBQUNSLGVBQVMsS0FBSyxVQUFVLElBQUksK0JBQStCO0FBQUEsSUFDL0QsT0FBTztBQUNILGVBQVMsS0FBSyxVQUFVLE9BQU8sK0JBQStCO0FBQUEsSUFDbEU7QUFDQSxnQkFBWSxPQUFPLFNBQVMsMkJBQTJCLENBQUM7QUFDeEQsVUFBTSxZQUFZLE9BQU8sYUFBYTtBQUFBLEVBQzFDLENBQUMsQ0FDVDtBQUVKLFFBQU0saUJBQWlCLElBQUksMEJBQVEsV0FBVztBQUM5QyxpQkFBZSxRQUFRLDJCQUEyQjtBQUNsRCxpQkFBZSxRQUFRLGdGQUFnRjtBQUN2RyxpQkFBZSxVQUFVLENBQUMsV0FDdEIsT0FDSyxTQUFTLENBQUMsWUFBWSxPQUFPLFNBQVMsZ0JBQWdCLEVBQ3RELFNBQVMsT0FBTyxVQUFVO0FBQ3ZCLGdCQUFZLE9BQU8sU0FBUyxtQkFBbUIsQ0FBQztBQUNoRCxVQUFNLFlBQVksT0FBTyxhQUFhO0FBQUEsRUFDMUMsQ0FBQyxDQUNUO0FBQ0EsaUJBQWUsT0FBTyxXQUFXLG1DQUFtQztBQUNwRSxpQkFBZSxPQUFPLE1BQU0sUUFBUSxZQUFZLElBQUksTUFBTSxVQUFVLGFBQWEsS0FBZTtBQUVoRyxNQUFJLDBCQUFRLFdBQVcsRUFDbEIsUUFBUSxjQUFjLEVBQ3RCLFFBQVEsdUNBQXVDLEVBQy9DLFVBQVUsQ0FBQyxXQUNSLE9BQ0ssU0FBUyxZQUFZLE9BQU8sU0FBUyxXQUFXLEVBQ2hELFNBQVMsT0FBTyxVQUFVO0FBQ3ZCLGdCQUFZLE9BQU8sU0FBUyxjQUFjO0FBQzFDLFVBQU0sWUFBWSxPQUFPLGFBQWE7QUFDdEMsZ0JBQVksUUFBUTtBQUFBLEVBQ3hCLENBQUMsQ0FDVDtBQUVKLE1BQUksWUFBWSxPQUFPLFNBQVMsaUJBQWlCLFNBQVM7QUFDdEQsUUFBSSwwQkFBUSxXQUFXLEVBQ2xCLFFBQVEseUNBQXlDLEVBQ2pELFFBQVEseUZBQXlGLEVBQ2pHLFVBQVUsQ0FBQyxXQUNSLE9BQ0ssU0FBUyxZQUFZLE9BQU8sU0FBUyxpQkFBaUIsUUFBUSxFQUM5RCxTQUFTLE9BQU8sVUFBVTtBQUN2QixrQkFBWSxPQUFPLFNBQVMsaUJBQWlCLFdBQVc7QUFDeEQsWUFBTSxZQUFZLE9BQU8sYUFBYTtBQUN0QyxrQkFBWSxPQUFPLElBQUksTUFBTSxTQUFTLEVBQUUsUUFBUSxDQUFDLFNBQVM7QUE1RmxGO0FBNkY0QiwwQkFBWSxPQUFPLGdCQUFuQixtQkFBZ0MsYUFBYSxFQUFFLElBQUksSUFBSSxRQUFRLE9BQU8sTUFBTSxLQUFLLEtBQUssR0FBRztBQUFBLE1BQzdGLENBQUM7QUFBQSxJQUNMLENBQUMsQ0FDVDtBQUFBLEVBQ1I7QUFFQSxjQUFZLGFBQWEsU0FBUyxNQUFNLEVBQUUsTUFBTSxpQkFBaUIsQ0FBQztBQUVsRSxNQUFJLDBCQUFRLFdBQVcsRUFDbEIsUUFBUSx1Q0FBdUMsRUFDL0MsUUFBUSxrR0FBa0csRUFDMUcsVUFBVSxDQUFDLFdBQ1IsT0FDSyxTQUFTLFlBQVksT0FBTyxTQUFTLGVBQWUsRUFDcEQsU0FBUyxPQUFPLFVBQVU7QUFDdkIsZ0JBQVksT0FBTyxTQUFTLGtCQUFrQjtBQUM5QyxRQUFJLENBQUMsT0FBTztBQUNSLGVBQVMsS0FBSyxVQUFVLElBQUksMEJBQTBCO0FBQUEsSUFDMUQsT0FBTztBQUNILGVBQVMsS0FBSyxVQUFVLE9BQU8sMEJBQTBCO0FBQUEsSUFDN0Q7QUFDQSxVQUFNLFlBQVksT0FBTyxhQUFhO0FBQUEsRUFDMUMsQ0FBQyxDQUNUO0FBRUosTUFBSSwwQkFBUSxXQUFXLEVBQ2xCLFFBQVEsb0JBQW9CLEVBQzVCLFFBQVEsb0hBQW9ILEVBQzVILFVBQVUsQ0FBQyxXQUNSLE9BQ0ssU0FBUyxZQUFZLE9BQU8sU0FBUyxrQkFBa0IsRUFDdkQsU0FBUyxPQUFPLFVBQVU7QUFDdkIsZ0JBQVksT0FBTyxTQUFTLHFCQUFxQjtBQUNqRCxVQUFNLFlBQVksT0FBTyxhQUFhO0FBQ3RDLFFBQUksT0FBTztBQUNQLGVBQVMsS0FBSyxVQUFVLElBQUksdUJBQXVCO0FBQUEsSUFDdkQsT0FBTztBQUNILGVBQVMsS0FBSyxVQUFVLE9BQU8sdUJBQXVCO0FBQUEsSUFDMUQ7QUFDQSxnQkFBWSxRQUFRO0FBQUEsRUFDeEIsQ0FBQyxDQUNUO0FBRUosTUFBSSwwQkFBUSxXQUFXLEVBQ2xCLFFBQVEsMkNBQTJDLEVBQ25ELFFBQVEsaUdBQWlHLEVBQ3pHLFVBQVUsQ0FBQyxXQUNSLE9BQ0ssU0FBUyxZQUFZLE9BQU8sU0FBUyxpQ0FBaUMsRUFDdEUsU0FBUyxPQUFPLFVBQVU7QUFDdkIsZ0JBQVksT0FBTyxTQUFTLG9DQUFvQztBQUNoRSxVQUFNLFlBQVksT0FBTyxhQUFhO0FBQ3RDLFFBQUksT0FBTztBQUNQLGVBQVMsS0FBSyxVQUFVLElBQUksNkJBQTZCO0FBQUEsSUFDN0QsT0FBTztBQUNILGVBQVMsS0FBSyxVQUFVLE9BQU8sNkJBQTZCO0FBQUEsSUFDaEU7QUFDQSxnQkFBWSxRQUFRO0FBQUEsRUFDeEIsQ0FDUixDQUFDO0FBRUwsTUFBSSxZQUFZLE9BQU8sU0FBUyxvQkFBb0I7QUFDaEQsUUFBSSwwQkFBUSxXQUFXLEVBQ2xCLFFBQVEsMEVBQTBFLEVBQ2xGLFVBQVUsQ0FBQyxXQUNSLE9BQ0ssU0FBUyxZQUFZLE9BQU8sU0FBUyxzQkFBc0IsRUFDM0QsU0FBUyxPQUFPLFVBQVU7QUFDdkIsa0JBQVksT0FBTyxTQUFTLHlCQUF5QjtBQUNyRCxZQUFNLFlBQVksT0FBTyxhQUFhO0FBQUEsSUFDMUMsQ0FBQyxDQUNUO0FBQUEsRUFDUjtBQUVBLE1BQUksMEJBQVEsV0FBVyxFQUNsQixRQUFRLG9DQUFvQyxFQUM1QyxRQUFRLDBFQUEwRSxFQUNsRixVQUFVLENBQUMsV0FDUixPQUNLLFNBQVMsWUFBWSxPQUFPLFNBQVMsZUFBZSxFQUNwRCxTQUFTLE9BQU8sVUFBVTtBQUN2QixnQkFBWSxPQUFPLFNBQVMsa0JBQWtCO0FBQzlDLFFBQUksT0FBTztBQUNQLGVBQVMsS0FBSyxVQUFVLElBQUksdUJBQXVCO0FBQUEsSUFDdkQsT0FBTztBQUNILGVBQVMsS0FBSyxVQUFVLE9BQU8sdUJBQXVCO0FBQUEsSUFDMUQ7QUFDQSxVQUFNLFlBQVksT0FBTyxhQUFhO0FBQUEsRUFDMUMsQ0FBQyxDQUNUO0FBRUosTUFBSSwwQkFBUSxXQUFXLEVBQ2xCLFFBQVEsK0JBQStCLEVBQ3ZDLFFBQVEsZ0RBQWdELEVBQ3hELFVBQVUsQ0FBQyxXQUNSLE9BQ0ssU0FBUyxZQUFZLE9BQU8sU0FBUyxRQUFRLEVBQzdDLFNBQVMsT0FBTyxVQUFVO0FBQ3ZCLGdCQUFZLE9BQU8sU0FBUyxXQUFXO0FBQ3ZDLFFBQUksT0FBTztBQUNQLGVBQVMsS0FBSyxVQUFVLElBQUksa0JBQWtCO0FBQUEsSUFDbEQsT0FBTztBQUNILGVBQVMsS0FBSyxVQUFVLE9BQU8sa0JBQWtCO0FBQUEsSUFDckQ7QUFDQSxVQUFNLFlBQVksT0FBTyxhQUFhO0FBQUEsRUFDMUMsQ0FBQyxDQUNUO0FBRUosTUFBSSwwQkFBUSxXQUFXLEVBQ2xCLFFBQVEsa0NBQWtDLEVBQzFDLFFBQVEsbURBQW1ELEVBQzNELFVBQVUsQ0FBQyxXQUNSLE9BQ0ssU0FBUyxZQUFZLE9BQU8sU0FBUyxXQUFXLEVBQ2hELFNBQVMsT0FBTyxVQUFVO0FBQ3ZCLGdCQUFZLE9BQU8sU0FBUyxjQUFjO0FBQzFDLFFBQUksT0FBTztBQUNQLGVBQVMsS0FBSyxVQUFVLElBQUkscUJBQXFCO0FBQUEsSUFDckQsT0FBTztBQUNILGVBQVMsS0FBSyxVQUFVLE9BQU8scUJBQXFCO0FBQUEsSUFDeEQ7QUFDQSxVQUFNLFlBQVksT0FBTyxhQUFhO0FBQUEsRUFDMUMsQ0FBQyxDQUNUO0FBRVI7OztBQzFOQSx3QkFBd0I7QUFFeEIsMEJBQWlDLGFBQTBCO0FBQ3ZELFFBQU0sY0FBYyxZQUFZO0FBQ2hDLE1BQUksMEJBQVEsV0FBVyxFQUNsQixRQUFRLCtCQUErQixFQUN2QyxRQUFRLHNGQUFzRixFQUM5RixVQUFVLENBQUMsV0FDUixPQUNLLFNBQVMsWUFBWSxPQUFPLFNBQVMsMkJBQTJCLEVBQ2hFLFNBQVMsT0FBTyxVQUFVO0FBQ3ZCLGdCQUFZLE9BQU8sU0FBUyw4QkFBOEI7QUFDMUQsVUFBTSxZQUFZLE9BQU8sYUFBYTtBQUN0QyxnQkFBWSxRQUFRO0FBQUEsRUFDeEIsQ0FBQyxDQUNUO0FBRUosTUFBSSwwQkFBUSxXQUFXLEVBQ2xCLFFBQVEsb0VBQW9FLEVBQzVFLFFBQVEsd0VBQXdFLEVBQ2hGLFVBQVUsQ0FBQyxXQUNSLE9BQ0ssU0FBUyxZQUFZLE9BQU8sU0FBUyxZQUFZLE1BQU0sRUFDdkQsU0FBUyxPQUFPLFVBQVU7QUFDdkIsZ0JBQVksT0FBTyxTQUFTLFlBQVksU0FBUztBQUNqRCxVQUFNLFlBQVksT0FBTyxhQUFhO0FBQUEsRUFDMUMsQ0FBQyxDQUNUO0FBRUosTUFBSSwwQkFBUSxXQUFXLEVBQ2xCLFFBQVEscUVBQXFFLEVBQzdFLFFBQVEseUVBQXlFLEVBQ2pGLFVBQVUsQ0FBQyxXQUNSLE9BQ0ssU0FBUyxZQUFZLE9BQU8sU0FBUyxZQUFZLE9BQU8sRUFDeEQsU0FBUyxPQUFPLFVBQVU7QUFDdkIsZ0JBQVksT0FBTyxTQUFTLFlBQVksVUFBVTtBQUNsRCxVQUFNLFlBQVksT0FBTyxhQUFhO0FBQUEsRUFDMUMsQ0FBQyxDQUNUO0FBRUosTUFBSSwwQkFBUSxXQUFXLEVBQ2xCLFFBQVEsZ0NBQWdDLEVBQ3hDLFFBQVEsNkZBQTZGLEVBQ3JHLFVBQVUsQ0FBQyxXQUNSLE9BQ0ssU0FBUyxZQUFZLE9BQU8sU0FBUyxpQkFBaUIsSUFBSSxFQUMxRCxTQUFTLE9BQU8sVUFBVTtBQUN2QixnQkFBWSxPQUFPLFNBQVMsaUJBQWlCLE9BQU87QUFDcEQsVUFBTSxZQUFZLE9BQU8sYUFBYTtBQUN0QyxRQUFJLE9BQU87QUFDUCxrQkFBWSxPQUFPLGtCQUFrQjtBQUFBLElBQ3pDLE9BQU87QUFDSCxrQkFBWSxPQUFPLGtCQUFrQixJQUFJO0FBQUEsSUFDN0M7QUFBQSxFQUNKLENBQUMsQ0FDVDtBQUVKLGNBQVksYUFBYSxTQUFTLE1BQU0sRUFBRSxNQUFNLGlCQUFpQixDQUFDO0FBRWxFLE1BQUksMEJBQVEsV0FBVyxFQUNsQixRQUFRLCtCQUErQixFQUN2QyxRQUFRLDhFQUE4RSxFQUN0RixVQUFVLENBQUMsV0FDUixPQUNLLFNBQVMsWUFBWSxPQUFPLFNBQVMscUJBQXFCLEVBQzFELFNBQVMsT0FBTyxVQUFVO0FBQ3ZCLGdCQUFZLE9BQU8sU0FBUyx3QkFBd0I7QUFDcEQsUUFBSSxPQUFPO0FBQ1AsZUFBUyxLQUFLLFVBQVUsSUFBSSw0QkFBNEI7QUFBQSxJQUM1RCxPQUFPO0FBQ0gsZUFBUyxLQUFLLFVBQVUsT0FBTyw0QkFBNEI7QUFBQSxJQUMvRDtBQUNBLFVBQU0sWUFBWSxPQUFPLGFBQWE7QUFBQSxFQUMxQyxDQUFDLENBQ1Q7QUFFSixNQUFJLDBCQUFRLFdBQVcsRUFDbEIsUUFBUSwwQkFBMEIsRUFDbEMsUUFBUSxvREFBb0QsRUFDNUQsVUFBVSxDQUFDLFdBQ1IsT0FDSyxTQUFTLFlBQVksT0FBTyxTQUFTLGNBQWMsRUFDbkQsU0FBUyxPQUFPLFVBQVU7QUFDdkIsZ0JBQVksT0FBTyxTQUFTLGlCQUFpQjtBQUM3QyxRQUFJLE9BQU87QUFDUCxlQUFTLEtBQUssVUFBVSxJQUFJLHVCQUF1QjtBQUFBLElBQ3ZELE9BQU87QUFDSCxlQUFTLEtBQUssVUFBVSxPQUFPLHVCQUF1QjtBQUFBLElBQzFEO0FBQ0EsVUFBTSxZQUFZLE9BQU8sYUFBYTtBQUFBLEVBQzFDLENBQUMsQ0FDVDtBQUVKLE1BQUksMEJBQVEsV0FBVyxFQUNsQixRQUFRLDhDQUE4QyxFQUN0RCxRQUFRLHVEQUF1RCxFQUMvRCxVQUFVLENBQUMsV0FDUixPQUNLLFNBQVMsWUFBWSxPQUFPLFNBQVMsaUJBQWlCLEVBQ3RELFNBQVMsT0FBTyxVQUFVO0FBQ3ZCLGdCQUFZLE9BQU8sU0FBUyxvQkFBb0I7QUFDaEQsUUFBSSxPQUFPO0FBQ1AsZUFBUyxLQUFLLFVBQVUsSUFBSSwwQkFBMEI7QUFBQSxJQUMxRCxPQUFPO0FBQ0gsZUFBUyxLQUFLLFVBQVUsT0FBTywwQkFBMEI7QUFBQSxJQUM3RDtBQUNBLFVBQU0sWUFBWSxPQUFPLGFBQWE7QUFBQSxFQUMxQyxDQUFDLENBQ1Q7QUFDUjs7O0FDdkdBLG9DQUEyQyxhQUEwQjtBQUNqRSxRQUFNLEVBQUUsV0FBVztBQUNuQixNQUFJLG9CQUFtQixPQUFPLFNBQVM7QUFDdkMsUUFBTSxjQUFjLFlBQVk7QUFDaEMsY0FBWSxTQUFTLEtBQUssRUFBRSxNQUFNLG9EQUFvRCxLQUFLLDJCQUEyQixDQUFDO0FBRXZILHlCQUF1QixhQUFhLG1CQUFrQixRQUFRLE9BQU8sU0FBUyxpQkFBaUIsWUFBWSxTQUFTLFFBQVcsUUFBVyxRQUFXLFdBQVk7QUFDcks7OztBQ1hBLHdCQUF3Qjs7O0FDSHhCLHdCQUFzRTs7O0FDQy9ELElBQU0sb0JBQU4sTUFBd0I7QUFBQSxFQWE5QixZQUFZLE1BQWMsVUFBa0IsSUFBd0IsUUFBMkI7QUFDOUYsU0FBSyxPQUFPO0FBQ1osU0FBSyxLQUFLLE1BQU0sT0FBTyxXQUFXO0FBQ2xDLFNBQUssT0FBTztBQUNaLFNBQUssYUFBYSxPQUFPLFNBQVMsNkJBQTZCO0FBQy9ELFNBQUssV0FBVztBQUNoQixTQUFLLFNBQVM7QUFBQSxFQUNmO0FBQ0Q7OztBRGZBLElBQXFCLDZCQUFyQixjQUF3RCx3QkFBTTtBQUFBLEVBSTdELFlBQVksYUFBMEI7QUFDckMsVUFBTSxZQUFZLEdBQUc7QUFDckIsU0FBSyxTQUFTLFlBQVk7QUFDMUIsU0FBSyxjQUFjO0FBQ25CLFNBQUssTUFBTSxZQUFZO0FBQUEsRUFDeEI7QUFBQSxFQUNBLFNBQVM7QUFFUixVQUFNLEVBQUUsY0FBYztBQUN0QixjQUFVLFNBQVMsTUFBTSxFQUFFLE1BQU0sNkJBQTZCLENBQUM7QUFFL0QsUUFBSSwwQkFBUSxTQUFTLEVBQ25CLFFBQVEsd0JBQXdCLEVBQ2hDLFNBQVMseUJBQXlCLEVBQ2xDLFVBQVUsQ0FBQyxPQUFPO0FBQ2xCLFNBQUcsUUFBUSxNQUFNO0FBQ2pCLFNBQUcsU0FBUyxvQkFBb0I7QUFDaEMsU0FBRyxXQUFXLHdCQUF3QjtBQUN0QyxTQUFHLFFBQVEsTUFBTTtBQUNoQixjQUFNLG9CQUFvQixJQUFJLGtCQUFrQixJQUFJLEtBQUssT0FBTyxTQUFTLGlCQUFpQixRQUFRLFFBQVcsS0FBSyxNQUFNO0FBQ3hILG1DQUEyQixLQUFLLE9BQU8sYUFBYSxXQUFXLGlCQUFpQjtBQUNoRiw2QkFBcUIsS0FBSyxRQUFRLGlCQUFpQjtBQUNuRCxhQUFLLFlBQVksUUFBUTtBQUFBLE1BQzFCLENBQUM7QUFBQSxJQUNGLENBQUM7QUFDRixTQUFLLE9BQU8sU0FBUyxpQkFBaUIsS0FBSyxDQUFDLEdBQUcsTUFBTSxFQUFFLFdBQVcsRUFBRSxRQUFRLEVBQUUsUUFBUSxDQUFDLHNCQUFzQjtBQXBDL0c7QUFxQ0csVUFBSSx5QkFBa0IsV0FBbEIsbUJBQTBCLFlBQVcsTUFBTSx5QkFBa0IsU0FBbEIsbUJBQXdCLFlBQVcsSUFBSTtBQUNyRixzQ0FBOEIsS0FBSyxhQUFhLFdBQVcsaUJBQWlCO0FBQUEsTUFDN0UsT0FBTztBQUNOLG1DQUEyQixLQUFLLGFBQWEsV0FBVyxpQkFBaUI7QUFBQSxNQUMxRTtBQUFBLElBQ0QsQ0FBQztBQUFBLEVBQ0Y7QUFBQSxFQUVBLFVBQVU7QUFDVCxVQUFNLEVBQUUsY0FBYztBQUN0QixjQUFVLE1BQU07QUFBQSxFQUNqQjtBQUNEOzs7QUR2Q0Esb0NBQTJDLGFBQTBCO0FBQ2pFLFFBQU0sY0FBYyxZQUFZO0FBQ2hDLFFBQU0saUJBQWlCLElBQUksMEJBQVEsV0FBVyxFQUN6QyxXQUFXLEVBQ1gsU0FBUyw0QkFBNEIsRUFDckMsUUFBUSx5QkFBeUI7QUFDdEMsUUFBTSxRQUFRLFNBQVMsdUJBQXVCO0FBQzlDLFFBQU0sT0FDRiwyRUFDQSxNQUFNLFNBQVMsSUFBSSxHQUNuQixtRkFDQSxNQUFNLFNBQVMsSUFBSSxHQUNuQixrRkFDQSxNQUFNLFNBQVMsSUFBSSxHQUNuQixpRkFDSjtBQUNBLGlCQUFlLFFBQVEsS0FBSztBQUM1QixpQkFBZSxPQUFPLFdBQVcsdUVBQXVFO0FBQ3hHLGlCQUFlLE9BQU8sU0FBUyxJQUFJO0FBQ25DLGlCQUFlLE9BQU8sV0FBVyxrRUFBa0U7QUFDbkcsaUJBQWUsT0FBTyxNQUFNLFFBQVEsWUFBWSxJQUFJLE1BQU0sVUFBVSxhQUFhLEtBQWU7QUFHaEcsTUFBSSwwQkFBUSxXQUFXLEVBQ2xCLFFBQVEscUJBQXFCLEVBQzdCLFFBQVEscURBQXFELEVBQzdELFVBQVUsQ0FBQyxPQUFPO0FBQ2YsT0FBRyxjQUFjLFFBQVE7QUFDekIsT0FBRyxPQUFPO0FBQ1YsT0FBRyxRQUFRLFlBQVk7QUFDbkIsVUFBSSwyQkFBMkIsV0FBVyxFQUFFLEtBQUs7QUFBQSxJQUNyRCxDQUFDO0FBQUEsRUFDTCxDQUFDO0FBRUwsTUFBSSwwQkFBUSxXQUFXLEVBQ2xCLFFBQVEsaUNBQWlDLEVBQ3pDLFVBQVUsQ0FBQyxPQUFPO0FBQ2YsT0FBRyxjQUFjLFFBQVE7QUFDekIsT0FBRyxPQUFPO0FBQ1YsT0FBRyxRQUFRLFlBQVk7QUFDbkIsVUFBSSx1QkFBdUIsWUFBWSxLQUFLLFlBQVksUUFBUSxZQUFZLE9BQU8sU0FBUyw0QkFBNEIsRUFBRSxLQUFLO0FBQUEsSUFDbkksQ0FBQztBQUFBLEVBQ0wsQ0FBQztBQUVMLE1BQUksMEJBQVEsV0FBVyxFQUNsQixRQUFRLGtDQUFrQyxFQUMxQyxVQUFVLENBQUMsT0FBTztBQUNmLE9BQUcsY0FBYyxRQUFRO0FBQ3pCLE9BQUcsT0FBTztBQUNWLE9BQUcsUUFBUSxZQUFZO0FBQ25CLFVBQUksZ0JBQWdCLFlBQVksS0FBSyxZQUFZLFFBQVEsWUFBWSxPQUFPLFNBQVMsNkJBQTZCLEVBQUUsS0FBSztBQUFBLElBQzdILENBQUM7QUFBQSxFQUNMLENBQUM7QUFHTCxNQUFJLDBCQUFRLFdBQVcsRUFDbEIsUUFBUSxxQkFBcUIsRUFDN0IsU0FBUyx5QkFBeUIsRUFDbEMsVUFBVSxDQUFDLE9BQU87QUFDZixPQUFHLFFBQVEsTUFBTTtBQUNqQixPQUFHLFNBQVMsb0JBQW9CO0FBQ2hDLE9BQUcsV0FBVyxxQkFBcUI7QUFDbkMsT0FBRyxRQUFRLE1BQU07QUFDYixZQUFNLGlCQUFpQixJQUFJLGVBQWUsSUFBSSxZQUFZLE9BQU8sU0FBUyxlQUFlLFFBQVEsUUFBVyxZQUFZLE1BQU07QUFDOUgsK0JBQXlCLGFBQWEsYUFBYSxjQUFjO0FBQ2pFLHdCQUFrQixZQUFZLFFBQVEsY0FBYztBQUNwRCxrQkFBWSxRQUFRO0FBQUEsSUFDeEIsQ0FBQztBQUFBLEVBQ0wsQ0FBQztBQUVMLGNBQVksT0FBTyxTQUFTLGVBQWUsT0FBTyxDQUFDLFdBQVcsQ0FBQyxPQUFPLGNBQWMsRUFBRSxLQUFLLENBQUMsR0FBRyxNQUFNLEVBQUUsV0FBVyxFQUFFLFFBQVEsRUFBRSxRQUFRLENBQUMsbUJBQW1CO0FBaEY5SjtBQWlGUSxRQUFJLHNCQUFlLFdBQWYsbUJBQXVCLFlBQVcsTUFBTSxzQkFBZSxTQUFmLG1CQUFxQixZQUFXLElBQUk7QUFDNUUsZ0NBQTBCLGFBQWEsYUFBYSxjQUFjO0FBQUEsSUFDdEUsT0FBTztBQUNILCtCQUF5QixhQUFhLGFBQWEsY0FBYztBQUFBLElBQ3JFO0FBQUEsRUFDSixDQUFDO0FBQ0w7OztBaENmTyxJQUFNLG1CQUF3QztBQUFBLEVBQ3BELGdCQUFnQjtBQUFBLEVBQ2hCLFNBQVM7QUFBQSxFQUNULFFBQVE7QUFBQSxFQUNSLGdCQUFnQjtBQUFBLEVBQ2hCLGNBQWM7QUFBQSxFQUNkLFlBQVk7QUFBQSxFQUNaLHNCQUFzQjtBQUFBLEVBQ3RCLCtCQUErQjtBQUFBLEVBQy9CLGtCQUFrQjtBQUFBLEVBQ2xCLGdCQUFnQixDQUFDO0FBQUEsRUFDakIsa0JBQWtCLENBQUM7QUFBQSxFQUNuQix3QkFBd0I7QUFBQSxFQUN4QixpQkFBaUI7QUFBQSxFQUNqQiwwQkFBMEI7QUFBQSxFQUMxQix1QkFBdUI7QUFBQSxFQUN2Qiw2QkFBNkI7QUFBQSxFQUM3QixjQUFjO0FBQUEsRUFDZCxnQkFBZ0I7QUFBQSxFQUNoQixnQkFBZ0I7QUFBQSxFQUNoQiwyQkFBMkI7QUFBQSxFQUMzQixtQkFBbUI7QUFBQSxFQUNuQixpQkFBaUI7QUFBQSxFQUNqQixZQUFZO0FBQUEsRUFDWix3QkFBd0I7QUFBQSxFQUN4QixpQkFBaUI7QUFBQSxJQUNoQixJQUFJO0FBQUEsSUFDSixZQUFZO0FBQUEsSUFDWixPQUFPO0FBQUEsSUFDUCxXQUFXO0FBQUEsSUFDWCxPQUFPO0FBQUEsSUFDUCxjQUFjLENBQUMsVUFBVSxVQUFVO0FBQUEsSUFDbkMsT0FBTztBQUFBLElBQ1AsZ0JBQWdCO0FBQUEsSUFDaEIsUUFBUTtBQUFBLElBQ1IsV0FBVztBQUFBLElBQ1gsa0JBQWtCO0FBQUEsSUFDbEIsdUJBQXVCO0FBQUEsSUFDdkIsc0JBQXNCO0FBQUEsSUFDdEIsaUJBQWlCO0FBQUEsSUFDakIscUJBQXFCO0FBQUEsSUFDckIsZ0JBQWdCO0FBQUEsRUFDakI7QUFBQSxFQUNBLGFBQWE7QUFBQSxFQUNiLFVBQVU7QUFBQSxFQUNWLGtCQUFrQjtBQUFBLElBQ2pCLFNBQVM7QUFBQSxJQUNULFVBQVU7QUFBQSxJQUNWLE1BQU07QUFBQSxFQUNQO0FBQUEsRUFDQSxhQUFhO0FBQUEsRUFDYixvQkFBb0IsQ0FBQyxNQUFNLFFBQVE7QUFBQSxFQUNuQyxVQUFVO0FBQUEsRUFDVixnQkFBZ0I7QUFBQSxFQUNoQixhQUFhO0FBQUEsRUFDYixtQkFBbUI7QUFBQSxFQUNuQiw4QkFBOEI7QUFBQSxFQUM5QixhQUFhO0FBQUEsRUFDYixjQUFjO0FBQUEsRUFDZCxhQUFhO0FBQUEsRUFDYiw4QkFBOEI7QUFBQSxJQUM3QixNQUFNO0FBQUEsSUFDTixNQUFNO0FBQUEsSUFDTixJQUFJLE9BQU8sV0FBVztBQUFBLElBQ3RCLFlBQVk7QUFBQSxJQUNaLGFBQWE7QUFBQSxJQUNiLG1CQUFtQjtBQUFBLElBQ25CLG1CQUFtQjtBQUFBLElBQ25CLGtCQUFrQjtBQUFBLElBQ2xCLFVBQVU7QUFBQSxJQUNWLDJCQUEyQjtBQUFBLElBQzNCLFFBQVE7QUFBQSxJQUNSLGdCQUFnQjtBQUFBLElBQ2hCLFVBQVU7QUFBQSxJQUNWLFVBQVU7QUFBQSxFQUNYO0FBQUEsRUFDQSwrQkFBK0I7QUFBQSxJQUM5QixNQUFNO0FBQUEsSUFDTixNQUFNO0FBQUEsSUFDTixJQUFJLE9BQU8sV0FBVztBQUFBLElBQ3RCLFlBQVk7QUFBQSxJQUNaLGFBQWE7QUFBQSxJQUNiLG1CQUFtQjtBQUFBLElBQ25CLG1CQUFtQjtBQUFBLElBQ25CLGtCQUFrQjtBQUFBLElBQ2xCLFVBQVU7QUFBQSxJQUNWLDJCQUEyQjtBQUFBLElBQzNCLFFBQVE7QUFBQSxJQUNSLGdCQUFnQjtBQUFBLElBQ2hCLFVBQVU7QUFBQSxJQUNWLFVBQVU7QUFBQSxFQUNYO0FBQUEsRUFDQSxvQkFBb0I7QUFBQSxFQUNwQixtQ0FBbUM7QUFBQSxFQUNuQyxtQkFBbUI7QUFBQSxFQUNuQix3QkFBd0I7QUFBQSxFQUN4QixtQkFBbUI7QUFBQSxFQUNuQixhQUFhO0FBQUEsSUFDWixRQUFRO0FBQUEsSUFDUixTQUFTO0FBQUEsRUFDVjtBQUFBLEVBQ0EsaUJBQWlCO0FBQ2xCO0FBRU8sSUFBTSxjQUFOLGNBQTBCLG1DQUFpQjtBQUFBLEVBS2pELFlBQVksTUFBVSxRQUEyQjtBQUNoRCxVQUFNLE1BQUssTUFBTTtBQUVsQixnQkFBTztBQUFBLE1BQ04sU0FBUztBQUFBLFFBQ1IsTUFBTTtBQUFBLFFBQ04sSUFBSTtBQUFBLE1BQ0w7QUFBQSxNQUNBLGlCQUFpQjtBQUFBLFFBQ2hCLE1BQU07QUFBQSxRQUNOLElBQUk7QUFBQSxNQUNMO0FBQUEsTUFDQSxpQkFBaUI7QUFBQSxRQUNoQixNQUFNO0FBQUEsUUFDTixJQUFJO0FBQUEsTUFDTDtBQUFBLE1BQ0EsZUFBZTtBQUFBLFFBQ2QsTUFBTTtBQUFBLFFBQ04sSUFBSTtBQUFBLE1BQ0w7QUFBQSxNQUNBLE1BQU07QUFBQSxRQUNMLE1BQU07QUFBQSxRQUNOLElBQUk7QUFBQSxNQUNMO0FBQUEsSUFDRDtBQUFBLEVBdEJBO0FBQUEsRUF1QkEsbUJBQW1CLE9BQWU7QUFDakMsU0FBSyxhQUFhLE1BQU07QUFDeEIsWUFBUSxNQUFNLGtCQUFrQjtBQUFBLFdBQzFCLEtBQUssS0FBSyxRQUFRO0FBQ3RCLHNCQUFjLElBQUk7QUFDbEI7QUFBQSxXQUNJLEtBQUssS0FBSyxnQkFBZ0I7QUFDOUIsNkJBQXFCLElBQUk7QUFDekI7QUFBQSxXQUNJLEtBQUssS0FBSyxnQkFBZ0I7QUFDOUIsNkJBQXFCLElBQUk7QUFDekI7QUFBQSxXQUNJLEtBQUssS0FBSyxjQUFjO0FBQzVCLDJCQUFtQixJQUFJO0FBQ3ZCO0FBQUEsV0FDSSxLQUFLLEtBQUssS0FBSztBQUNuQixtQkFBVyxJQUFJO0FBQ2Y7QUFBQTtBQUFBLEVBR0g7QUFBQSxFQUVBLFFBQVEsV0FBeUIsTUFBeUIsUUFBNEIsaUJBQTJCLFNBQTRCLElBQWtCLEtBQW9DLE1BQXFCLGFBQW9CO0FBcE83TztBQXFPRSxhQUFTLG1DQUFNLFdBQU4sWUFBZ0I7QUFDekIsV0FBTyxpQkFBaUI7QUFDeEIsa0JBQWMsc0JBQVE7QUFDdEIsVUFBTSxFQUFFLGdCQUFnQjtBQUV4QixnQkFBWSxNQUFNO0FBRWxCLFVBQU0sU0FBUyxZQUFZLFNBQVMsT0FBTyxFQUFFLEtBQUssc0JBQXNCLENBQUM7QUFDekUsZUFBVyxDQUFDLE9BQU8sWUFBWSxPQUFPLFFBQVEsWUFBWSxJQUFJLEdBQUc7QUFDaEUsWUFBTSxRQUFRLE9BQU8sU0FBUyxPQUFPLEVBQUUsS0FBSyxrQkFBa0IsQ0FBQztBQUMvRCxZQUFNLFVBQVUsTUFBTSxTQUFTLE9BQU8sRUFBRSxLQUFLLHdCQUF3QixNQUFNLFFBQVEsS0FBSyxDQUFDO0FBQ3pGLFVBQUksT0FBTyxTQUFTLFlBQVksa0JBQWtCLE1BQU0sTUFBTSxrQkFBa0IsR0FBRztBQUNsRixjQUFNLFNBQVMsd0JBQXdCO0FBQUEsTUFDeEM7QUFDQSxZQUFNLGlCQUFpQixTQUFTLE1BQU07QUFFckMsbUJBQVcsVUFBUyxPQUFPLFVBQVU7QUFDcEMsaUJBQU0sWUFBWSx3QkFBd0I7QUFDMUMsaUJBQU8sU0FBUyxjQUFjLE1BQU0sa0JBQWtCO0FBQ3RELGlCQUFPLGFBQWE7QUFBQSxRQUNyQjtBQUNBLGNBQU0sU0FBUyx3QkFBd0I7QUFDdkMsb0JBQVksbUJBQW1CLEtBQUs7QUFBQSxNQUNyQyxDQUFDO0FBQUEsSUFDRjtBQUNBLGdCQUFZLGVBQWUsWUFBWSxVQUFVLEVBQUUsS0FBSyxtQkFBbUIsQ0FBQztBQUM1RSxnQkFBWSxtQkFBbUIsT0FBTyxTQUFTLFdBQVc7QUFBQSxFQUMzRDtBQUFBLEVBRUEsa0JBQWtCLGFBQXFCO0FBQ3RDLFFBQUkseUJBQU8sb0NBQW9DO0FBQy9DLGVBQVcsVUFBVSxLQUFLLElBQUksTUFBTSxrQkFBa0IsR0FBRztBQUN4RCxVQUFJLGtCQUFrQiwyQkFBUztBQUM5QixjQUFNLGFBQWEsY0FBYyxLQUFLLFFBQVEsT0FBTyxJQUFJO0FBQ3pELFlBQUksQ0FBRSx1QkFBc0IsMEJBQVE7QUFBRTtBQUFBLFFBQVM7QUFDL0MsY0FBTSxpQkFBaUIsWUFBWSxRQUFRLG1CQUFtQixPQUFPLElBQUk7QUFDekUsY0FBTSxVQUFVLEdBQUcsT0FBTyxRQUFRLGtCQUFrQixXQUFXO0FBQy9ELFlBQUksS0FBSyxPQUFPLElBQUksTUFBTSxzQkFBc0IsT0FBTyxHQUFHO0FBQUU7QUFBQSxRQUFTO0FBQ3JFLGFBQUssT0FBTyxJQUFJLFlBQVksV0FBVyxZQUFZLE9BQU87QUFBQSxNQUMzRDtBQUFBLElBQ0Q7QUFDQSxTQUFLLE9BQU8sU0FBUyxpQkFBaUI7QUFDdEMsU0FBSyxPQUFPLGFBQWE7QUFDekIsUUFBSSx5QkFBTyxnQ0FBZ0M7QUFBQSxFQUM1QztBQUFBLEVBRUEsc0JBQXNCLFdBQW1CO0FBQ3hDLFFBQUkseUJBQU8sd0NBQXdDO0FBQ25ELFNBQUssSUFBSSxNQUFNLGtCQUFrQixFQUFFLFFBQVEsQ0FBQyxTQUFTO0FBQ3BELFVBQUksZ0JBQWdCLDJCQUFTO0FBQzVCLGNBQU0sYUFBYSxjQUFjLEtBQUssUUFBUSxLQUFLLE1BQU0sU0FBUztBQUNsRSxZQUFJLHNCQUFzQix5QkFBTztBQUNoQyxjQUFJLEtBQUssT0FBTyxTQUFTLG9CQUFvQixnQkFBZ0I7QUFDNUQsZ0JBQUksVUFBVTtBQUNkLGdCQUFJLHlCQUF3QixLQUFLLElBQUksRUFBRSxLQUFLLE1BQU0sSUFBSTtBQUNyRCx3QkFBVSxHQUFHLFdBQVc7QUFBQSxZQUN6QixPQUFPO0FBQ04sd0JBQVUsR0FBRyx5QkFBd0IsS0FBSyxJQUFJLEtBQUssV0FBVztBQUFBLFlBQy9EO0FBQ0EsaUJBQUssT0FBTyxJQUFJLFlBQVksV0FBVyxZQUFZLE9BQU87QUFBQSxVQUMzRCxXQUFXLEtBQUssT0FBTyxTQUFTLG9CQUFvQixnQkFBZ0I7QUFDbkUsZ0JBQUkseUJBQXdCLFdBQVcsSUFBSSxNQUFNLEtBQUssTUFBTTtBQUMzRDtBQUFBLFlBQ0QsT0FBTztBQUNOLG9CQUFNLFVBQVUsR0FBRyxLQUFLLFFBQVEsV0FBVztBQUMzQyxtQkFBSyxPQUFPLElBQUksWUFBWSxXQUFXLFlBQVksT0FBTztBQUFBLFlBQzNEO0FBQUEsVUFDRDtBQUFBLFFBQ0Q7QUFBQSxNQUNEO0FBQUEsSUFDRCxDQUFDO0FBQ0QsUUFBSSx5QkFBTyxxQ0FBcUM7QUFBQSxFQUNqRDtBQUFBLEVBRUEsVUFBZ0I7QUFDZixTQUFLLE9BQU8saUJBQWlCO0FBQUEsRUFDOUI7QUFDRDs7O0FtQ2xUQSx3QkFBZ0g7QUFZekcsSUFBTSxXQUFOLE1BQWU7QUFBQSxFQUdyQixZQUFZLE1BQVUsUUFBMkI7QUFDaEQsU0FBSyxTQUFTO0FBQ2QsU0FBSyxNQUFNO0FBQUEsRUFDWjtBQUFBLEVBQ0EsbUJBQW1CO0FBQ2xCLFNBQUssZUFBZTtBQUNwQixTQUFLLGFBQWE7QUFDbEIsU0FBSyxnQkFBZ0I7QUFBQSxFQUN0QjtBQUFBLEVBQ0Esa0JBQWtCO0FBQ2pCLFNBQUssT0FBTyxXQUFXO0FBQUEsTUFDdEIsSUFBSTtBQUFBLE1BQ0osTUFBTTtBQUFBLE1BQ04sVUFBVSxNQUFNO0FBQ2YsY0FBTSxPQUFPLEtBQUssSUFBSSxVQUFVLGNBQWM7QUFDOUMsWUFBSSxDQUFFLGlCQUFnQjtBQUFRO0FBQzlCLGNBQU0sU0FBUyxLQUFLO0FBQ3BCLFlBQUksQ0FBRSxtQkFBa0I7QUFBVTtBQUNsQyxjQUFNLGFBQWEsY0FBYyxLQUFLLFFBQVEsT0FBTyxJQUFJO0FBQ3pELDJCQUFtQixLQUFLLFFBQVEsTUFBTSxRQUFRLFVBQVU7QUFBQSxNQUN6RDtBQUFBLElBQ0QsQ0FBQztBQUVELFlBQVEsSUFBSSxzQkFBc0I7QUFDbEMsU0FBSyxPQUFPLFdBQVc7QUFBQSxNQUN0QixJQUFJO0FBQUEsTUFDSixNQUFNO0FBQUEsTUFDTixVQUFVLE1BQU07QUFDZixhQUFLLE9BQU8scUJBQXFCO0FBQUEsTUFDbEM7QUFBQSxJQUNELENBQUM7QUFHRCxTQUFLLE9BQU8sV0FBVztBQUFBLE1BQ3RCLElBQUk7QUFBQSxNQUNKLE1BQU07QUFBQSxNQUNOLFVBQVUsTUFBTTtBQUNmLGFBQUssT0FBTyxxQkFBcUI7QUFBQSxNQUNsQztBQUFBLElBQ0QsQ0FBQztBQUVELFNBQUssT0FBTyxXQUFXO0FBQUEsTUFDdEIsSUFBSTtBQUFBLE1BQ0osTUFBTTtBQUFBLE1BQ04sVUFBVSxZQUFZO0FBM0R6QjtBQTRESSxjQUFNLE9BQU8sS0FBSyxJQUFJLFVBQVUsY0FBYztBQUM5QyxZQUFJLENBQUUsaUJBQWdCO0FBQVE7QUFDOUIsWUFBSSxVQUFVLFlBQUssV0FBTCxtQkFBYSxRQUFPLE1BQU0sS0FBSztBQUM3QyxZQUFJLFlBQUssV0FBTCxtQkFBYSxVQUFTLE1BQU0sWUFBSyxXQUFMLG1CQUFhLFVBQVMsS0FBSztBQUMxRCxvQkFBVSxLQUFLO0FBQUEsUUFDaEI7QUFDQSxZQUFJLEtBQUssT0FBTyxJQUFJLE1BQU0sc0JBQXNCLE9BQU8sR0FBRztBQUN6RCxpQkFBTyxJQUFJLHlCQUFPLHVCQUF1QjtBQUFBLFFBQzFDO0FBQ0EsY0FBTSxnQ0FBZ0MsS0FBSyxPQUFPLFNBQVM7QUFDM0QsYUFBSyxPQUFPLFNBQVMsYUFBYTtBQUNsQyxhQUFLLE9BQU8sYUFBYTtBQUN6QixjQUFNLEtBQUssT0FBTyxJQUFJLE1BQU0sYUFBYSxPQUFPO0FBQ2hELGNBQU0sU0FBUyxLQUFLLE9BQU8sSUFBSSxNQUFNLHNCQUFzQixPQUFPO0FBQ2xFLFlBQUksQ0FBRSxtQkFBa0I7QUFBVTtBQUNsQyx5QkFBaUIsS0FBSyxRQUFRLE9BQU8sTUFBTSxNQUFNLE1BQU0sS0FBSyxXQUFXLE9BQU8sSUFBSTtBQUNsRixhQUFLLE9BQU8sU0FBUyxhQUFhO0FBQ2xDLGFBQUssT0FBTyxhQUFhO0FBQUEsTUFDMUI7QUFBQSxJQUNELENBQUM7QUFFRCxTQUFLLE9BQU8sV0FBVztBQUFBLE1BQ3RCLElBQUk7QUFBQSxNQUNKLE1BQU07QUFBQSxNQUNOLFVBQVUsTUFBTTtBQUNmLGNBQU0sT0FBTyxLQUFLLElBQUksVUFBVSxjQUFjO0FBQzlDLFlBQUksQ0FBRSxpQkFBZ0I7QUFBUTtBQUM5QixjQUFNLFNBQVMsS0FBSztBQUNwQixZQUFJLENBQUUsbUJBQWtCO0FBQVU7QUFDbEMseUJBQWlCLEtBQUssUUFBUSxPQUFPLE1BQU0sTUFBTSxPQUFPLEtBQUs7QUFBQSxNQUM5RDtBQUFBLElBQ0QsQ0FBQztBQUVELFNBQUssT0FBTyxTQUFTLG1CQUFtQixRQUFRLENBQUMsYUFBYTtBQUM3RCxVQUFJLGFBQWE7QUFBTTtBQUN2QixXQUFLLE9BQU8sV0FBVztBQUFBLFFBQ3RCLElBQUksVUFBVTtBQUFBLFFBQ2QsTUFBTSxVQUFVO0FBQUEsUUFDaEIsVUFBVSxNQUFNO0FBQ2YsZ0JBQU0sT0FBTyxLQUFLLElBQUksVUFBVSxjQUFjO0FBQzlDLGNBQUksQ0FBRSxpQkFBZ0I7QUFBUTtBQUM5QixnQkFBTSxTQUFTLEtBQUs7QUFDcEIsY0FBSSxDQUFFLG1CQUFrQjtBQUFVO0FBQ2xDLDJCQUFpQixLQUFLLFFBQVEsT0FBTyxNQUFNLE1BQU0sTUFBTSxVQUFVLEtBQUs7QUFBQSxRQUN2RTtBQUFBLE1BQ0QsQ0FBQztBQUFBLElBQ0YsQ0FBQztBQUVELFNBQUssT0FBTyxXQUFXO0FBQUEsTUFDdEIsSUFBSTtBQUFBLE1BQ0osTUFBTTtBQUFBLE1BQ04sVUFBVSxNQUFNO0FBQ2YsY0FBTSxPQUFPLEtBQUssSUFBSSxVQUFVLGNBQWM7QUFDOUMsWUFBSSxDQUFFLGlCQUFnQjtBQUFRO0FBQzlCLGNBQU0sU0FBUyxLQUFLO0FBQ3BCLFlBQUksQ0FBRSxtQkFBa0I7QUFBVTtBQUNsQyxjQUFNLGFBQWEsY0FBYyxLQUFLLFFBQVEsT0FBTyxJQUFJO0FBQ3pELFlBQUksQ0FBRSx1QkFBc0I7QUFBUTtBQUNwQyx5QkFBaUIsS0FBSyxRQUFRLFlBQVksSUFBSTtBQUFBLE1BQy9DO0FBQUEsSUFDRCxDQUFDO0FBRUQsU0FBSyxPQUFPLFdBQVc7QUFBQSxNQUN0QixJQUFJO0FBQUEsTUFDSixNQUFNO0FBQUEsTUFDTixVQUFVLE1BQU07QUFDZixjQUFNLE9BQU8sS0FBSyxJQUFJLFVBQVUsY0FBYztBQUM5QyxZQUFJLENBQUUsaUJBQWdCO0FBQVE7QUFDOUIsY0FBTSxTQUFTLEtBQUs7QUFDcEIsWUFBSSxDQUFFLG1CQUFrQjtBQUFVO0FBQ2xDLGNBQU0sYUFBYSxjQUFjLEtBQUssUUFBUSxPQUFPLElBQUk7QUFDekQsWUFBSSxDQUFFLHVCQUFzQjtBQUFRO0FBQ3BDLHVCQUFlLEtBQUssUUFBUSxVQUFVO0FBQUEsTUFDdkM7QUFBQSxJQUNELENBQUM7QUFDRCxTQUFLLE9BQU8sV0FBVztBQUFBLE1BQ3RCLElBQUk7QUFBQSxNQUNKLE1BQU07QUFBQSxNQUNOLHFCQUFxQixDQUFDLFVBQW1CLFdBQW1CO0FBQzNELGNBQU0sT0FBTyxPQUFPLFVBQVUsRUFBRTtBQUNoQyxjQUFNLFdBQVcsT0FBTyxRQUFRLElBQUk7QUFDcEMsWUFBSSxTQUFTLEtBQUssTUFBTSxNQUFNLFNBQVMsS0FBSyxNQUFNLEtBQUs7QUFDdEQsY0FBSSxDQUFDLFVBQVU7QUFDZCxnQkFBSSxPQUFPLE9BQU8sT0FBTyxDQUFDLEdBQUcsS0FBSyxPQUFPLFNBQVMsZUFBZTtBQUNqRSxpQkFBSyxLQUFLLE9BQU8sV0FBVztBQUM1QixrQkFBTSxPQUFPLHFDQUFjLElBQUk7QUFDL0IsZ0JBQUksU0FBUyxLQUFLLE1BQU0sSUFBSTtBQUMzQixxQkFBTyxpQkFBaUI7QUFBQSxFQUEwQjtBQUFBLENBQWM7QUFBQSxZQUNqRSxXQUFXLFNBQVMsS0FBSyxNQUFNLEtBQUs7QUFFbkMsb0JBQU0sUUFBUSxLQUFLLE1BQU0sSUFBSTtBQUM3QixvQkFBTSxXQUFXLE1BQU0sSUFBSSxDQUFDLFVBQVM7QUFDcEMsdUJBQU8sS0FBSztBQUFBLGNBQ2IsQ0FBQztBQUNELHFCQUFPLGlCQUFpQjtBQUFBLEVBQTBCLFNBQVMsS0FBSyxJQUFJO0FBQUEsQ0FBVztBQUFBLFlBQ2hGO0FBQUEsVUFDRDtBQUNBLGlCQUFPO0FBQUEsUUFDUjtBQUNBLGVBQU87QUFBQSxNQUNSO0FBQUEsSUFDRCxDQUFDO0FBQ0QsU0FBSyxPQUFPLFdBQVc7QUFBQSxNQUN0QixJQUFJO0FBQUEsTUFDSixNQUFNO0FBQUEsTUFDTixxQkFBcUIsQ0FBQyxVQUFtQixRQUFnQixTQUF1QjtBQUMvRSxjQUFNLE9BQU8sT0FBTyxhQUFhLEVBQUUsS0FBSztBQUN4QyxjQUFNLE9BQU8sT0FBTyxVQUFVLEVBQUU7QUFDaEMsY0FBTSxPQUFPLEtBQUs7QUFDbEIsWUFBSSxDQUFFLGlCQUFnQjtBQUFRLGlCQUFPO0FBQ3JDLFlBQUksUUFBUSxLQUFLLEtBQUssTUFBTSxJQUFJO0FBQy9CLGNBQUksVUFBVTtBQUFFLG1CQUFPO0FBQUEsVUFBTTtBQUM3QixnQkFBTSxZQUFZLENBQUMsS0FBSyxNQUFNLEtBQUssS0FBSyxLQUFLLEtBQUssS0FBSyxLQUFLLEdBQUc7QUFDL0QscUJBQVcsUUFBUSxXQUFXO0FBQzdCLGdCQUFJLEtBQUssU0FBUyxJQUFJLEdBQUc7QUFDeEIsa0JBQUkseUJBQU8sOEVBQThFO0FBQ3pGLHFCQUFPO0FBQUEsWUFDUjtBQUFBLFVBQ0Q7QUFDQSxjQUFJLEtBQUssU0FBUyxHQUFHLEdBQUc7QUFDdkIsZ0JBQUkseUJBQU8saUNBQWlDO0FBQzVDO0FBQUEsVUFDRDtBQUNBLGNBQUk7QUFDSixnQkFBTSxhQUFhLHlCQUF3QixLQUFLLElBQUk7QUFDcEQsY0FBSSxlQUFlLElBQUk7QUFDdEIscUJBQVMsS0FBSyxPQUFPLElBQUksTUFBTSxzQkFBc0IsSUFBSTtBQUN6RCxnQkFBSSxrQkFBa0IsMkJBQVM7QUFDOUIsa0JBQUkseUJBQU8sNEJBQTRCO0FBQ3ZDLHFCQUFPO0FBQUEsWUFDUixPQUFPO0FBQ04sbUJBQUssT0FBTyxJQUFJLE1BQU0sYUFBYSxJQUFJO0FBQ3ZDLCtCQUFpQixLQUFLLFFBQVEsTUFBTSxLQUFLO0FBQUEsWUFDMUM7QUFBQSxVQUNELE9BQU87QUFDTixxQkFBUyxLQUFLLE9BQU8sSUFBSSxNQUFNLHNCQUFzQixhQUFhLE1BQU0sSUFBSTtBQUM1RSxnQkFBSSxrQkFBa0IsMkJBQVM7QUFDOUIsa0JBQUkseUJBQU8sNEJBQTRCO0FBQ3ZDLHFCQUFPO0FBQUEsWUFDUjtBQUNBLGdCQUFJLEtBQUssT0FBTyxTQUFTLG9CQUFvQixnQkFBZ0I7QUFDNUQsa0JBQUksS0FBSyxJQUFJLE1BQU0sc0JBQXNCLGFBQWEsTUFBTSxPQUFPLEtBQUssT0FBTyxTQUFTLGNBQWMsR0FBRztBQUN4RyxvQkFBSSx5QkFBTyxxQkFBcUI7QUFDaEMsdUJBQU87QUFBQSxjQUNSO0FBQUEsWUFDRDtBQUNBLGlCQUFLLE9BQU8sSUFBSSxNQUFNLGFBQWEsYUFBYSxNQUFNLElBQUk7QUFDMUQsNkJBQWlCLEtBQUssUUFBUSxhQUFhLE1BQU0sTUFBTSxLQUFLO0FBQUEsVUFDN0Q7QUFDQSxnQkFBTSxXQUFXLEtBQUssT0FBTyxTQUFTLGVBQWUsUUFBUSxtQkFBbUIsSUFBSTtBQUNwRixjQUFJLGFBQWEsTUFBTTtBQUN0QixtQkFBTyxpQkFBaUIsS0FBSyxZQUFZO0FBQUEsVUFDMUMsT0FBTztBQUNOLG1CQUFPLGlCQUFpQixLQUFLLFlBQVksUUFBUTtBQUFBLFVBQ2xEO0FBQ0EsaUJBQU87QUFBQSxRQUNSO0FBQ0EsZUFBTztBQUFBLE1BQ1I7QUFBQSxJQUNELENBQUM7QUFBQSxFQUNGO0FBQUEsRUFFQSxlQUFlO0FBQ2QsU0FBSyxPQUFPLGNBQWMsS0FBSyxJQUFJLFVBQVUsR0FBRyxhQUFhLE9BQU8sTUFBWSxTQUF3QjtBQS9OMUc7QUFnT0csVUFBSSxTQUF5QyxLQUFLO0FBQ2xELFVBQUksZ0JBQWdCLHlCQUFPO0FBQzFCLFlBQUksS0FBSyxPQUFPLFNBQVMsb0JBQW9CLGdCQUFnQjtBQUM1RCxtQkFBUyxLQUFLO0FBQUEsUUFDZixPQUFPO0FBQ04sZ0JBQU0sV0FBVyxrQkFBa0IsS0FBSyxPQUFPLFNBQVMsZ0JBQWdCLEtBQUssUUFBUTtBQUNyRixjQUFJLFVBQVU7QUFDYixnQkFBSSxZQUFLLFdBQUwsbUJBQWEsVUFBUyxNQUFNLFlBQUssV0FBTCxtQkFBYSxVQUFTLEtBQUs7QUFDMUQsdUJBQVMsS0FBSyxPQUFPLElBQUksTUFBTSxzQkFBc0IsUUFBUTtBQUFBLFlBQzlELE9BQU87QUFDTix1QkFBUyxLQUFLLE9BQU8sSUFBSSxNQUFNLHNCQUFzQixZQUFLLFdBQUwsbUJBQWEsUUFBTyxNQUFNLFFBQVE7QUFBQSxZQUN4RjtBQUFBLFVBQ0Q7QUFBQSxRQUNEO0FBRUEsWUFBSSxrQkFBa0IsMkJBQVM7QUFDOUIsZ0JBQU0sYUFBYSxjQUFjLEtBQUssUUFBUSxPQUFPLElBQUk7QUFDekQsZ0JBQU0saUJBQWlCLE1BQU0sa0JBQWtCLEtBQUssUUFBUSxPQUFPLE1BQU0sSUFBSTtBQUM3RSxjQUFJLDBDQUFZLFVBQVMsS0FBSyxRQUFRLENBQUMsa0RBQWdCLFdBQVU7QUFBRTtBQUFBLFVBQVE7QUFBQSxRQUM1RSxXQUFXLEtBQUssa0JBQWtCLDJCQUFTO0FBQzFDLG1CQUFTLEtBQUs7QUFBQSxRQUNmO0FBQUEsTUFDRDtBQUVBLFdBQUssUUFBUSxPQUFPLFNBQVM7QUFDNUIsWUFBSSwyQkFBUyxhQUFhLENBQUMsMkJBQVMsWUFBWSxLQUFLLE9BQU8sU0FBUyxhQUFhO0FBQ2pGLGVBQ0UsU0FBUyxzQkFBc0IsRUFDL0IsUUFBUSxhQUFhO0FBQUEsUUFDeEI7QUFDQSxZQUFJO0FBQ0osWUFBSSxDQUFDLDJCQUFTLGdCQUFnQixDQUFDLDJCQUFTLGFBQWEsMkJBQVMsWUFBWSxDQUFDLEtBQUssT0FBTyxTQUFTLGFBQWE7QUFDNUcsb0JBQVU7QUFDVixlQUFLLFlBQVksSUFBSTtBQUFBLFFBQ3RCLE9BQU87QUFFTixvQkFBVSxLQUFLLFdBQVc7QUFBQSxRQUMzQjtBQUNBLFlBQUksZ0JBQWdCLHlCQUFPO0FBRTFCLGtCQUFRLFFBQVEsQ0FBQyxVQUFTO0FBQ3pCLGtCQUFLLFNBQVMsb0JBQW9CLEVBQ2hDLFFBQVEsTUFBTSxFQUNkLFFBQVEsWUFBWTtBQUNwQixrQkFBSSxDQUFDO0FBQVE7QUFDYixrQkFBSSxVQUFVLE9BQU8sT0FBTyxNQUFNLEtBQUs7QUFDdkMsa0JBQUksT0FBTyxTQUFTLE1BQU0sT0FBTyxTQUFTLEtBQUs7QUFDOUMsMEJBQVUsS0FBSztBQUFBLGNBQ2hCO0FBQ0Esa0JBQUksS0FBSyxPQUFPLElBQUksTUFBTSxzQkFBc0IsT0FBTyxHQUFHO0FBQ3pELHVCQUFPLElBQUkseUJBQU8sdUJBQXVCO0FBQUEsY0FDMUM7QUFDQSxvQkFBTSxnQ0FBZ0MsS0FBSyxPQUFPLFNBQVM7QUFDM0QsbUJBQUssT0FBTyxTQUFTLGFBQWE7QUFDbEMsbUJBQUssT0FBTyxhQUFhO0FBQ3pCLG9CQUFNLEtBQUssT0FBTyxJQUFJLE1BQU0sYUFBYSxPQUFPO0FBQ2hELG9CQUFNLFlBQVksS0FBSyxPQUFPLElBQUksTUFBTSxzQkFBc0IsT0FBTztBQUNyRSxrQkFBSSxDQUFFLHNCQUFxQjtBQUFVO0FBQ3JDLG9CQUFNLGlCQUFpQixLQUFLLFFBQVEsVUFBVSxNQUFNLE1BQU0sTUFBTSxLQUFLLFdBQVcsT0FBTyxJQUFJO0FBQzNGLG1CQUFLLE9BQU8sU0FBUyxhQUFhO0FBQ2xDLG1CQUFLLE9BQU8sYUFBYTtBQUFBLFlBQzFCLENBQUM7QUFBQSxVQUNILENBQUM7QUFDRCxjQUFJLHlCQUF3QixLQUFLLElBQUksTUFBTTtBQUFJO0FBQy9DLGNBQUksQ0FBRSxtQkFBa0I7QUFBVTtBQUNsQyxrQkFBUSxRQUFRLENBQUMsVUFBUztBQUN6QixrQkFBSyxTQUFTLDZCQUE2QixpQ0FBUSxNQUFNLEVBQ3ZELFFBQVEsTUFBTSxFQUNkLFFBQVEsTUFBTTtBQUNkLGtCQUFJLENBQUMsVUFBVSxDQUFFLG1CQUFrQjtBQUFVO0FBQzdDLG9CQUFNLGNBQWEsY0FBYyxLQUFLLFFBQVEsT0FBTyxJQUFJO0FBQ3pELGlDQUFtQixLQUFLLFFBQVEsTUFBTSxRQUFRLFdBQVU7QUFBQSxZQUN6RCxDQUFDO0FBQUEsVUFDSCxDQUFDO0FBQUEsUUFDRjtBQUNBLFlBQUksQ0FBRSxpQkFBZ0I7QUFBVTtBQUNoQyxjQUFNLGlCQUFpQixNQUFNLGtCQUFrQixLQUFLLFFBQVEsS0FBSyxNQUFNLEtBQUs7QUFDNUUsY0FBTSx5QkFBeUIsa0JBQWtCLEtBQUssUUFBUSxLQUFLLElBQUk7QUFDdkUsWUFBSSxrQkFBa0IsQ0FBQyxlQUFlLFVBQVU7QUFlL0Msa0JBQVEsUUFBUSxDQUFDLFVBQVM7QUFDekIsa0JBQUssU0FBUyxxQ0FBcUMsRUFDakQsUUFBUSxPQUFPLEVBQ2YsUUFBUSxNQUFNO0FBQ2QsbUJBQUssT0FBTyxTQUFTLGlCQUFpQixLQUFLLE9BQU8sU0FBUyxlQUFlLE9BQ3pFLENBQUMsWUFBWSxRQUFPLFNBQVMsS0FBSyxRQUFTLFFBQU8sUUFBUTtBQUMzRCxtQkFBSyxPQUFPLGFBQWEsSUFBSTtBQUM3QixrQkFBSSx5QkFBTyxtREFBbUQ7QUFBQSxZQUMvRCxDQUFDO0FBQUEsVUFDSCxDQUFDO0FBQ0Q7QUFBQSxRQUNEO0FBQ0EsWUFBSSx3QkFBd0I7QUFDM0Isa0JBQVEsUUFBUSxDQUFDLFVBQVM7QUFDekIsa0JBQUssU0FBUyxxQ0FBcUMsRUFDakQsUUFBUSxPQUFPLEVBQ2YsUUFBUSxNQUFNO0FBQ2QsbUNBQXFCLEtBQUssUUFBUSxzQkFBc0I7QUFBQSxZQUN6RCxDQUFDO0FBQUEsVUFDSCxDQUFDO0FBQUEsUUFFRjtBQUNBLGdCQUFRLFFBQVEsQ0FBQyxVQUFTO0FBQ3pCLGdCQUFLLFNBQVMsa0NBQWtDLEVBQzlDLFFBQVEsVUFBVSxFQUNsQixRQUFRLE1BQU07QUFDZCxrQkFBTSxrQkFBaUIsSUFBSSxlQUFlLEtBQUssTUFBTSxLQUFLLE9BQU8sU0FBUyxlQUFlLFFBQVEsUUFBVyxLQUFLLE1BQU07QUFDdkgsaUJBQUssT0FBTyxTQUFTLGVBQWUsS0FBSyxlQUFjO0FBQ3ZELGlCQUFLLE9BQU8sYUFBYSxJQUFJO0FBQzdCLGdCQUFJLHlCQUFPLGdEQUFnRDtBQUFBLFVBQzVELENBQUM7QUFBQSxRQUNILENBQUM7QUFDRCxZQUFJLENBQUUsaUJBQWdCO0FBQVU7QUFDaEMsY0FBTSxhQUFhLGNBQWMsS0FBSyxRQUFRLEtBQUssSUFBSTtBQUN2RCxZQUFJLHNCQUFzQiwyQkFBUyxDQUFDLHdCQUF3QjtBQUMzRCxrQkFBUSxRQUFRLENBQUMsVUFBUztBQUN6QixrQkFBSyxTQUFTLG9CQUFvQixFQUNoQyxRQUFRLE9BQU8sRUFDZixRQUFRLE1BQU07QUFDZCwrQkFBaUIsS0FBSyxRQUFRLFlBQVksSUFBSTtBQUFBLFlBQy9DLENBQUM7QUFBQSxVQUNILENBQUM7QUFFRCxrQkFBUSxRQUFRLENBQUMsVUFBUztBQUN6QixrQkFBSyxTQUFTLGtCQUFrQixFQUM5QixRQUFRLHNCQUFzQixFQUM5QixRQUFRLE1BQU07QUFDZCw2QkFBZSxLQUFLLFFBQVEsVUFBVTtBQUFBLFlBQ3ZDLENBQUM7QUFBQSxVQUNILENBQUM7QUFFRCxrQkFBUSxRQUFRLENBQUMsVUFBUztBQUN6QixrQkFBSyxTQUFTLG9CQUFvQixFQUNoQyxRQUFRLFFBQVEsRUFDaEIsUUFBUSxNQUFNO0FBQ2QsK0JBQWlCLEtBQUssUUFBUSxVQUFVO0FBQUEsWUFDekMsQ0FBQztBQUFBLFVBQ0gsQ0FBQztBQUVELGtCQUFRLFFBQVEsQ0FBQyxVQUFTO0FBQ3pCLGtCQUFLLFNBQVMsbUJBQW1CLEVBQy9CLFFBQVEsTUFBTSxFQUNkLFFBQVEsTUFBTTtBQUVkLG1CQUFLLElBQUksZ0JBQWdCLFVBQVU7QUFBQSxZQUNwQyxDQUFDO0FBQUEsVUFDSCxDQUFDO0FBRUQsY0FBSSxLQUFLLE9BQU8sU0FBUyxnQkFBZ0I7QUFDeEMsZ0JBQUksaURBQWdCLFVBQVU7QUFDN0Isc0JBQVEsUUFBUSxDQUFDLFVBQVM7QUFDekIsc0JBQUssU0FBUyw4QkFBOEIsRUFDMUMsUUFBUSxTQUFTLEVBQ2pCLFFBQVEsTUFBTTtBQUNkLHVCQUFLLE9BQU8sU0FBUyxpQkFBaUIsS0FBSyxPQUFPLFNBQVMsZUFBZSxPQUN6RSxDQUFDLFlBQVksUUFBTyxTQUFTLEtBQUssUUFBUyxRQUFPLFFBQVE7QUFDM0QsdUJBQUssT0FBTyxhQUFhLEtBQUs7QUFDOUIsMENBQXdCLEtBQUssTUFBTSxLQUFLLE1BQU07QUFBQSxnQkFDL0MsQ0FBQztBQUFBLGNBQ0gsQ0FBQztBQUFBLFlBQ0YsT0FBTztBQUNOLHNCQUFRLFFBQVEsQ0FBQyxVQUFTO0FBQ3pCLHNCQUFLLFNBQVMsOEJBQThCLEVBQzFDLFFBQVEsS0FBSyxFQUNiLFFBQVEsTUFBTTtBQUNkLHdCQUFNLGtCQUFpQixJQUFJLGVBQWUsS0FBSyxNQUFNLEtBQUssT0FBTyxTQUFTLGVBQWUsUUFBUSxRQUFXLEtBQUssTUFBTTtBQUN2SCxrQ0FBZSxXQUFXO0FBQzFCLGtDQUFlLGFBQWE7QUFDNUIsa0NBQWUsY0FBYztBQUM3QixrQ0FBZSxvQkFBb0I7QUFDbkMsa0NBQWUsb0JBQW9CO0FBQ25DLGtDQUFlLG1CQUFtQjtBQUNsQyxrQ0FBZSw0QkFBNEI7QUFDM0Msa0NBQWUsaUJBQWlCO0FBQ2hDLG9DQUFrQixLQUFLLFFBQVEsaUJBQWdCLEtBQUs7QUFDcEQsMENBQXdCLEtBQUssTUFBTSxLQUFLLE1BQU07QUFBQSxnQkFDL0MsQ0FBQztBQUFBLGNBQ0gsQ0FBQztBQUFBLFlBQ0Y7QUFBQSxVQUNEO0FBQUEsUUFFRCxPQUFPO0FBQ04sa0JBQVEsUUFBUSxDQUFDLFVBQVM7QUFDekIsa0JBQUssU0FBUyw2QkFBNkIsRUFDekMsUUFBUSxNQUFNLEVBQ2QsUUFBUSxNQUFNO0FBQ2QsK0JBQWlCLEtBQUssUUFBUSxLQUFLLE1BQU0sTUFBTSxLQUFLO0FBQUEsWUFDckQsQ0FBQztBQUFBLFVBQ0gsQ0FBQztBQUVELGVBQUssT0FBTyxTQUFTLG1CQUFtQixRQUFRLENBQUMsYUFBYTtBQUM3RCxnQkFBSSxhQUFhO0FBQU07QUFDdkIsb0JBQVEsUUFBUSxDQUFDLFVBQVM7QUFDekIsb0JBQUssU0FBUyxVQUFVLHNCQUFzQixFQUM1QyxRQUFRLE1BQU0sRUFDZCxRQUFRLE1BQU07QUFDZCxpQ0FBaUIsS0FBSyxRQUFRLEtBQUssTUFBTSxNQUFNLE1BQU0sUUFBUTtBQUFBLGNBQzlELENBQUM7QUFBQSxZQUNILENBQUM7QUFBQSxVQUNGLENBQUM7QUFBQSxRQUNGO0FBQUEsTUFDRCxDQUFDO0FBQUEsSUFDRixDQUFDLENBQUM7QUFBQSxFQUNIO0FBQUEsRUFFQSxpQkFBaUI7QUFDaEIsU0FBSyxPQUFPLGNBQWMsS0FBSyxPQUFPLElBQUksVUFBVSxHQUFHLGVBQWUsQ0FBQyxNQUFZLFFBQWdCLFNBQXVCO0FBQ3pILFlBQU0sT0FBTyxPQUFPLGFBQWEsRUFBRSxLQUFLO0FBQ3hDLFlBQU0sT0FBTyxPQUFPLFVBQVUsRUFBRTtBQUNoQyxZQUFNLFdBQVcsT0FBTyxRQUFRLElBQUk7QUFDcEMsVUFBSSxTQUFTLEtBQUssTUFBTSxNQUFNLFNBQVMsS0FBSyxNQUFNLEtBQUs7QUFDdEQsYUFBSyxRQUFRLENBQUMsU0FBUztBQUN0QixlQUFLLFNBQVMsd0JBQXdCLEVBQ3BDLFFBQVEsTUFBTSxFQUNkLFFBQVEsTUFBTTtBQUNkLGdCQUFJLE9BQU8sT0FBTyxPQUFPLENBQUMsR0FBRyxLQUFLLE9BQU8sU0FBUyxlQUFlO0FBQ2pFLGlCQUFLLEtBQUssT0FBTyxXQUFXO0FBQzVCLGtCQUFNLE9BQU8scUNBQWMsSUFBSTtBQUMvQixnQkFBSSxTQUFTLEtBQUssTUFBTSxJQUFJO0FBQzNCLHFCQUFPLGlCQUFpQjtBQUFBLEVBQTBCO0FBQUEsQ0FBYztBQUFBLFlBQ2pFLFdBQVcsU0FBUyxLQUFLLE1BQU0sS0FBSztBQUVuQyxvQkFBTSxRQUFRLEtBQUssTUFBTSxJQUFJO0FBQzdCLG9CQUFNLFdBQVcsTUFBTSxJQUFJLENBQUMsVUFBUztBQUNwQyx1QkFBTyxLQUFLO0FBQUEsY0FDYixDQUFDO0FBQ0QscUJBQU8saUJBQWlCO0FBQUEsRUFBMEIsU0FBUyxLQUFLLElBQUk7QUFBQSxDQUFXO0FBQUEsWUFDaEY7QUFBQSxVQUNELENBQUM7QUFBQSxRQUNILENBQUM7QUFBQSxNQUNGO0FBQ0EsVUFBSSxDQUFDLFFBQVEsS0FBSyxLQUFLLE1BQU07QUFBSTtBQUNqQyxXQUFLLFFBQVEsQ0FBQyxTQUFTO0FBQ3RCLGFBQUssU0FBUyxvQkFBb0IsRUFDaEMsUUFBUSxNQUFNLEVBQ2QsUUFBUSxNQUFNO0FBQ2QsZ0JBQU0sT0FBTyxLQUFLO0FBQ2xCLGNBQUksQ0FBRSxpQkFBZ0I7QUFBUTtBQUM5QixnQkFBTSxZQUFZLENBQUMsS0FBSyxNQUFNLEtBQUssS0FBSyxLQUFLLEtBQUssS0FBSyxLQUFLLEdBQUc7QUFDL0QscUJBQVcsUUFBUSxXQUFXO0FBQzdCLGdCQUFJLEtBQUssU0FBUyxJQUFJLEdBQUc7QUFDeEIsa0JBQUkseUJBQU8sOEVBQThFO0FBQ3pGO0FBQUEsWUFDRDtBQUFBLFVBQ0Q7QUFDQSxjQUFJLEtBQUssU0FBUyxHQUFHLEdBQUc7QUFDdkIsZ0JBQUkseUJBQU8saUNBQWlDO0FBQzVDO0FBQUEsVUFDRDtBQUNBLGNBQUk7QUFDSixnQkFBTSxhQUFhLHlCQUF3QixLQUFLLElBQUk7QUFDcEQsZ0JBQU0sV0FBVyxLQUFLLE9BQU8sU0FBUyxlQUFlLFFBQVEsbUJBQW1CLElBQUk7QUFDcEYsY0FBSSxlQUFlLElBQUk7QUFDdEIscUJBQVMsS0FBSyxPQUFPLElBQUksTUFBTSxzQkFBc0IsSUFBSTtBQUN6RCxnQkFBSSxrQkFBa0IsMkJBQVM7QUFDOUIscUJBQU8sSUFBSSx5QkFBTyw0QkFBNEI7QUFBQSxZQUMvQyxPQUFPO0FBQ04sbUJBQUssT0FBTyxJQUFJLE1BQU0sYUFBYSxJQUFJO0FBQ3ZDLCtCQUFpQixLQUFLLFFBQVEsTUFBTSxLQUFLO0FBQUEsWUFDMUM7QUFBQSxVQUNELE9BQU87QUFDTixxQkFBUyxLQUFLLE9BQU8sSUFBSSxNQUFNLHNCQUFzQixhQUFhLE1BQU0sSUFBSTtBQUM1RSxnQkFBSSxrQkFBa0IsMkJBQVM7QUFDOUIscUJBQU8sSUFBSSx5QkFBTyw0QkFBNEI7QUFBQSxZQUMvQztBQUNBLGdCQUFJLEtBQUssT0FBTyxTQUFTLG9CQUFvQixnQkFBZ0I7QUFDNUQsa0JBQUksS0FBSyxJQUFJLE1BQU0sc0JBQXNCLGFBQWEsTUFBTSxXQUFXLEtBQUssT0FBTyxTQUFTLGNBQWMsR0FBRztBQUM1Ryx1QkFBTyxJQUFJLHlCQUFPLHFCQUFxQjtBQUFBLGNBQ3hDO0FBQUEsWUFDRDtBQUNBLGlCQUFLLE9BQU8sSUFBSSxNQUFNLGFBQWEsYUFBYSxNQUFNLElBQUk7QUFDMUQsNkJBQWlCLEtBQUssUUFBUSxhQUFhLE1BQU0sTUFBTSxLQUFLO0FBQUEsVUFDN0Q7QUFDQSxjQUFJLGFBQWEsTUFBTTtBQUN0QixtQkFBTyxpQkFBaUIsS0FBSyxZQUFZO0FBQUEsVUFDMUMsT0FBTztBQUNOLG1CQUFPLGlCQUFpQixLQUFLLFlBQVksUUFBUTtBQUFBLFVBQ2xEO0FBQUEsUUFDRCxDQUFDO0FBQUEsTUFDSCxDQUFDO0FBQUEsSUFDRixDQUFDLENBQUM7QUFBQSxFQUNIO0FBQ0Q7OztBQ3ZnQkEsd0JBQWlDO0FBTWpDLHFDQUE0QyxPQUFtQixRQUEyQjtBQUN6RixRQUFNLHlCQUF5QjtBQUMvQixRQUFNLGVBQWU7QUFDckIsUUFBTSxnQkFBZ0I7QUFDdEIsTUFBSSxDQUFFLE9BQU0sa0JBQWtCO0FBQWM7QUFDNUMsTUFBSSxDQUFDLE9BQU8sU0FBUztBQUE2QjtBQUVsRCxRQUFNLGFBQWEsTUFBTSxPQUFPLGFBQWEsV0FBVztBQUN4RCxNQUFJLENBQUMsWUFBWTtBQUFFO0FBQUEsRUFBUTtBQUMzQixRQUFNLGlCQUFpQixNQUFNLGtCQUFrQixRQUFRLFlBQVksSUFBSTtBQUN2RSxNQUFJLGlEQUFnQixtQkFBbUI7QUFDdEMsVUFBTSxPQUFPLFVBQVU7QUFDdkIsVUFBTSxPQUFPLE1BQU07QUFDbkI7QUFBQSxFQUNELFdBQVcsa0RBQWdCLHFCQUFvQixPQUFPLFNBQVMsa0JBQWtCO0FBQ2hGLFVBQU0sT0FBTyxVQUFVO0FBQ3ZCLFVBQU0sT0FBTyxNQUFNO0FBQUEsRUFDcEI7QUFFQSxRQUFNLGFBQWEsY0FBYyxRQUFRLFVBQVU7QUFDbkQsTUFBSSxZQUFZO0FBQ2YsVUFBTSxlQUFlLFFBQVEsWUFBWSxLQUFLLEVBQUUsS0FBSyxZQUFZO0FBRWhFLFlBQU0scUJBQXFCLE9BQU8sSUFBSSxnQkFBZ0IscUJBQXFCLGVBQWU7QUFDMUYsVUFBSSxzQkFBc0IsMkJBQVMsWUFBWSxPQUFPLFNBQVMsWUFBWSxRQUFRO0FBQ2xGLG1CQUFXLE1BQU07QUFBRSw2QkFBbUIsZUFBZSxVQUFVO0FBQUEsUUFBRyxHQUFHLEdBQUc7QUFBQSxNQUN6RSxXQUFXLHNCQUFzQiwyQkFBUyxhQUFhLE9BQU8sU0FBUyxZQUFZLFNBQVM7QUFDM0YsMkJBQW1CLGVBQWUsVUFBVTtBQUFBLE1BQzdDO0FBQUEsSUFDRCxDQUFDO0FBQ0Q7QUFBQSxFQUNELFdBQVcsTUFBTSxVQUFVLHlCQUFPLFdBQVcsS0FBSyxNQUFNLE9BQU87QUFDOUQsUUFBSyxPQUFPLFNBQVMsVUFBVSxNQUFNLFVBQVksT0FBTyxTQUFTLFdBQVcseUJBQU8sV0FBVyxLQUFLLE1BQU0sT0FBUTtBQUNoSCxZQUFNLGlCQUFpQixRQUFRLFlBQVksTUFBTSxRQUFXLElBQUk7QUFDaEUsMkJBQXFCLFlBQVksbUJBQW1CLE1BQU07QUFDMUQsMkJBQXFCLFlBQVksdUJBQXVCLE1BQU07QUFDOUQ7QUFBQSxJQUNEO0FBQUEsRUFDRDtBQUNBLFFBQU0sT0FBTyxVQUFVO0FBQ3ZCLFFBQU0sT0FBTyxNQUFNO0FBQ3BCO0FBRUEsaUNBQXdDLE9BQW1CLFFBQTJCO0FBakR0RjtBQW1EQyxNQUFJLENBQUUsT0FBTSxrQkFBa0I7QUFBYztBQUM1QyxNQUFJLENBQUMsU0FBUyxDQUFDLE1BQU07QUFBUTtBQUM3QixRQUFNLHlCQUF5QjtBQUMvQixNQUFJLENBQUMsTUFBTSxVQUFVO0FBQ3BCLFVBQU0seUJBQXlCO0FBQUEsRUFDaEMsT0FBTztBQUNOO0FBQUEsRUFDRDtBQUVBLFFBQU0sYUFBYSxZQUFNLE9BQU8sa0JBQWIsbUJBQTRCLGFBQWE7QUFDNUQsTUFBSSxDQUFDLFlBQVk7QUFBRTtBQUFBLEVBQVE7QUFFM0IsUUFBTSxpQkFBaUIsTUFBTSxrQkFBa0IsUUFBUSxZQUFZLElBQUk7QUFDdkUsTUFBSSxpREFBZ0IsbUJBQW1CO0FBQ3RDLFVBQU0sT0FBTyxVQUFVO0FBQ3ZCLFVBQU0sT0FBTyxNQUFNO0FBQ25CO0FBQUEsRUFDRCxXQUFXLGtEQUFnQixxQkFBb0IsT0FBTyxTQUFTLGtCQUFrQjtBQUNoRixVQUFNLE9BQU8sVUFBVTtBQUN2QixVQUFNLE9BQU8sTUFBTTtBQUFBLEVBQ3BCO0FBRUEsUUFBTSxhQUFhLGNBQWMsUUFBUSxVQUFVO0FBRW5ELE1BQUksWUFBWTtBQUNmLFFBQUksT0FBTyxTQUFTLGFBQWE7QUFDaEMsYUFBTyxlQUFlLFFBQVEsWUFBWSxLQUFLO0FBQUEsSUFDaEQsV0FBVyxPQUFPLFNBQVMsZ0JBQWdCLHlCQUFPLFdBQVcsS0FBSyxNQUFNLE9BQU87QUFDOUUsYUFBTyxlQUFlLFFBQVEsWUFBWSxLQUFLO0FBQUEsSUFDaEQsV0FBVyxPQUFPLFNBQVMsZUFBZSxNQUFNLFFBQVE7QUFDdkQsYUFBTyxlQUFlLFFBQVEsWUFBWSxLQUFLO0FBQUEsSUFDaEQsT0FBTztBQUNOLFVBQUksT0FBTyxTQUFTO0FBQWtCO0FBQ3RDLGtCQUFNLE9BQU8sa0JBQWIsbUJBQTRCO0FBQzVCO0FBQUEsSUFDRDtBQUFBLEVBQ0QsV0FBVyxNQUFNLFVBQVUseUJBQU8sV0FBVyxLQUFLLE1BQU0sT0FBTztBQUM5RCxRQUFLLE9BQU8sU0FBUyxVQUFVLE1BQU0sVUFBWSxPQUFPLFNBQVMsV0FBVyx5QkFBTyxXQUFXLEtBQUssTUFBTSxPQUFRO0FBQ2hILFlBQU0saUJBQWlCLFFBQVEsWUFBWSxNQUFNLFFBQVcsSUFBSTtBQUNoRSwyQkFBcUIsWUFBWSxtQkFBbUIsTUFBTTtBQUMxRCwyQkFBcUIsWUFBWSx1QkFBdUIsTUFBTTtBQUM5RDtBQUFBLElBQ0Q7QUFBQSxFQUNELFdBQVcsQ0FBQyxZQUFZO0FBQ3ZCLFFBQUksT0FBTyxTQUFTO0FBQWtCO0FBQ3RDLFdBQU8sWUFBTSxPQUFPLGtCQUFiLG1CQUE0QjtBQUFBLEVBQ3BDO0FBRUEsUUFBTSxPQUFPLFVBQVU7QUFDdkIsUUFBTSxPQUFPLE1BQU07QUFDcEI7OztBQ3BHQSx3QkFBaUM7QUFPakMsMkJBQWtDLFFBQTJCO0FBQ3pELFNBQU8sV0FBVyxJQUFJLGlCQUFpQixDQUFDLGNBQWdDO0FBQ3BFLGNBQVUsUUFBUSxDQUFDLFFBQVE7QUFDdkIsVUFBSSxJQUFJLFNBQVMsYUFBYTtBQUMxQixRQUFVLElBQUksT0FBUSxpQkFBaUIsZ0JBQWdCLEVBQ2xELFFBQVEsT0FBTyxZQUF5QjtBQWI3RDtBQWN3QixjQUFJLGNBQWMsUUFBUSxjQUFjLDhCQUE4QjtBQUN0RSxnQkFBTSxXQUFXLG1CQUFZLGtCQUFaLG1CQUEyQixhQUFhLGlCQUFnQjtBQUV6RSxrQ0FBd0IsVUFBVSxNQUFNO0FBRXhDLGNBQUksYUFBYTtBQUNiLGtCQUFNLHNCQUFzQixhQUFhLE1BQU07QUFBQSxVQUNuRCxPQUFPO0FBRUgsa0JBQU0sV0FBVyxJQUFJLGlCQUFpQixPQUFPLFlBQVcsUUFBUTtBQUM1RCw0QkFBYyxRQUFRLGNBQWMsOEJBQThCO0FBQ2xFLGtCQUFJLGFBQWE7QUFDYixzQkFBTSxzQkFBc0IsYUFBYSxNQUFNO0FBQy9DLG9CQUFJLFdBQVc7QUFBQSxjQUNuQjtBQUFBLFlBQ0osQ0FBQztBQUVELHFCQUFTLFFBQVEsU0FBUyxFQUFFLFdBQVcsTUFBTSxTQUFTLEtBQUssQ0FBQztBQUFBLFVBQ2hFO0FBQUEsUUFDSixDQUFDO0FBQ0wsWUFBSSxDQUFDLE9BQU8sU0FBUyw2QkFBNkI7QUFBRTtBQUFBLFFBQVE7QUFNNUQsUUFBVSxJQUFJLE9BQVEsaUJBQWlCLDZCQUE2QixFQUMvRCxRQUFRLENBQUMsWUFBeUI7QUF6Q3ZEO0FBMEN3QixnQkFBTSxjQUFjLGNBQVEsa0JBQVIsbUJBQXVCLGlCQUFpQjtBQUM1RCxjQUFJLENBQUM7QUFBYTtBQUNsQixjQUFJLE9BQU87QUFDWCxzQkFBWSxRQUFRLE9BQU8sZUFBNEI7QUE3Qy9FO0FBOEM0QixnQkFBSSxXQUFXLGFBQWEsVUFBVSxHQUFHO0FBQ3JDLHNCQUFRLFdBQVcsYUFBYSxVQUFVLElBQUk7QUFBQSxZQUNsRCxPQUFPO0FBQ0gsc0JBQVEsV0FBVyxVQUFVLEtBQUssSUFBSTtBQUFBLFlBQzFDO0FBQ0Esa0JBQU0sYUFBYSxLQUFLLE1BQU0sR0FBRyxFQUFFO0FBQ25DLHVCQUFXLGFBQWEsYUFBYSxVQUFVO0FBQy9DLGtCQUFNLFNBQVMsY0FBTyxnQkFBUCxvQkFBb0IsZ0JBQWdCLElBQUk7QUFDdkQsZ0JBQUksVUFBVSxPQUFPLFNBQVMsaUJBQWlCLFFBQVEsT0FBTyxTQUFTLGlCQUFpQixTQUFTO0FBQzdGLHlCQUFXLGFBQWEsWUFBWSxPQUFPLFFBQVEsRUFBRTtBQUNyRCx5QkFBVyxZQUFZLE9BQU8sV0FBVztBQUFBLFlBQzdDO0FBQ0Esa0JBQU0saUJBQWlCLE1BQU0sa0JBQWtCLFFBQVEsWUFBWSxJQUFJO0FBQ3ZFLGdCQUFJLGlEQUFnQjtBQUFtQjtBQUN2QyxrQkFBTSxhQUFhLGNBQWMsUUFBUSxVQUFVO0FBQ25ELGdCQUFJLFlBQVk7QUFDWix5QkFBVyxVQUFVLElBQUksaUJBQWlCO0FBQUEsWUFDOUM7QUFBQSxVQUNKLENBQUM7QUFDRCx3QkFBUSxrQkFBUixtQkFBdUIsYUFBYSxhQUFhLEtBQUssTUFBTSxHQUFHLEVBQUU7QUFDakUsY0FBSSxZQUFZLFNBQVMsR0FBRztBQUN4Qix3QkFBWSxRQUFRLENBQUMsZUFBNEI7QUFDN0Msa0JBQUksV0FBVztBQUFTO0FBQ3hCLHlCQUFXLGlCQUFpQixTQUFTLENBQUMsTUFBTTtBQUN4QyxzQ0FBc0IsR0FBRyxNQUFNO0FBQUEsY0FDbkMsR0FBRyxFQUFFLFNBQVMsS0FBSyxDQUFDO0FBQUEsWUFDeEIsQ0FBQztBQUFBLFVBQ0w7QUFBQSxRQUNKLENBQUM7QUFBQSxNQUNUO0FBQUEsSUFDSixDQUFDO0FBQUEsRUFDTCxDQUFDO0FBQ0w7QUFFQSxxQ0FBcUMsYUFBMEIsUUFBYTtBQWhGNUU7QUFpRkksTUFBSSxZQUFZO0FBQVM7QUFDekIsTUFBSSwyQkFBUyxZQUFZLE9BQU8sU0FBUztBQUE4QjtBQUV2RSxNQUFJLGFBQWEsbUJBQVksa0JBQVosbUJBQTJCLGFBQWEsaUJBQWdCO0FBRXpFLFFBQU0sd0JBQXdCLFlBQVksTUFBTTtBQUdoRCxjQUFZLGlCQUFpQixZQUFZLENBQUMsVUFBc0I7QUFDNUQsUUFBSSxNQUFNLFVBQVUsR0FBRztBQUNuQix3QkFBa0IsT0FBTyxNQUFNO0FBQUEsSUFDbkM7QUFBQSxFQUNKLEdBQUcsRUFBRSxTQUFTLEtBQUssQ0FBQztBQUVwQixjQUFZLFVBQVUsQ0FBQyxVQUFzQixrQkFBa0IsT0FBTyxNQUFNO0FBRTVFLFNBQU8saUJBQWlCLGFBQWEsZUFBZSxDQUFDLFVBQXNCO0FBakcvRTtBQWtHUSxXQUFPLGlCQUFpQjtBQUN4QixXQUFPLGFBQWE7QUFFcEIsUUFBSSxDQUFDLHlCQUFPLFdBQVcsS0FBSztBQUFHO0FBQy9CLFFBQUksQ0FBRSxPQUFNLGtCQUFrQjtBQUFjO0FBRTVDLFVBQU0sY0FBYSx1Q0FBTyxPQUFPLGtCQUFkLG9CQUE2QixhQUFhLGlCQUFnQjtBQUM3RSxVQUFNLGFBQWEsY0FBYyxRQUFRLFdBQVU7QUFDbkQsUUFBSSxDQUFDO0FBQVk7QUFFakIsV0FBTyxJQUFJLFVBQVUsUUFBUSxjQUFjO0FBQUEsTUFDdkM7QUFBQSxNQUNBLFFBQVE7QUFBQSxNQUNSLGFBQWEsRUFBRSxNQUFNLFdBQVc7QUFBQSxNQUNoQyxVQUFVLE1BQU07QUFBQSxNQUNoQixVQUFVLHlDQUFZO0FBQUEsTUFDdEIsWUFBWSx5Q0FBWTtBQUFBLElBQzVCLENBQUM7QUFDRCxXQUFPLHFCQUFxQjtBQUFBLEVBQ2hDLENBQUM7QUFFRCxTQUFPLGlCQUFpQixhQUFhLGNBQWMsTUFBTTtBQUNyRCxXQUFPLGlCQUFpQjtBQUN4QixXQUFPLGFBQWE7QUFDcEIsV0FBTyxxQkFBcUI7QUFBQSxFQUNoQyxDQUFDO0FBQ0w7OztBQzVIQSx3QkFBc0Q7QUFRL0Msc0JBQXNCLE1BQXFCLFNBQWlCLFFBQTJCO0FBUjlGO0FBU0MsUUFBTSxTQUFTLEtBQUs7QUFDcEIsUUFBTSxZQUFZLE9BQU8sSUFBSSxNQUFNLHNCQUFzQix5QkFBd0IsT0FBTyxDQUFDO0FBQ3pGLFFBQU0sV0FBWSxZQUFLLFdBQUwsbUJBQWEsVUFBUyx5QkFBd0IsT0FBTztBQUN2RSxNQUFJLGtCQUFrQiwyQkFBUztBQUM5QixRQUFJLE9BQU8sd0JBQXdCLE1BQU0sR0FBRztBQUMzQywyQkFBcUIsT0FBTyxNQUFNLHdCQUF3QixNQUFNO0FBQUEsSUFDakUsT0FBTztBQUNOLDJCQUFxQixPQUFPLE1BQU0sd0JBQXdCLE1BQU07QUFBQSxJQUNqRTtBQUFBLEVBQ0Q7QUFFQSxNQUFJLHFCQUFxQiwyQkFBUztBQUNqQyxRQUFJLE9BQU8sd0JBQXdCLFNBQVMsR0FBRztBQUM5QywyQkFBcUIsVUFBVSxNQUFNLHdCQUF3QixNQUFNO0FBQUEsSUFDcEUsT0FBTztBQUNOLDJCQUFxQixVQUFVLE1BQU0sd0JBQXdCLE1BQU07QUFBQSxJQUNwRTtBQUFBLEVBQ0Q7QUFFQSxNQUFJLGdCQUFnQiwyQkFBUztBQUM1QixXQUFPLFdBQVcsVUFBVSxLQUFLLElBQUk7QUFDckMsNkJBQXlCLE1BQU0sU0FBUyxNQUFNO0FBQzlDLFFBQUksVUFBVTtBQUNiLGFBQU8sbUJBQW1CLE1BQU0sU0FBUyxNQUFNO0FBQUEsSUFDaEQsT0FBTztBQUNOLGFBQU8saUJBQWlCLE1BQU0sU0FBUyxNQUFNO0FBQUEsSUFDOUM7QUFBQSxFQUNELFdBQVcsZ0JBQWdCLHlCQUFPO0FBQ2pDLFFBQUksVUFBVTtBQUNiLGFBQU8saUJBQWlCLE1BQU0sU0FBUyxNQUFNO0FBQUEsSUFDOUMsT0FBTztBQUNOLGFBQU8sZUFBZSxNQUFNLFNBQVMsTUFBTTtBQUFBLElBQzVDO0FBQUEsRUFDRDtBQUNEO0FBR08sMEJBQTBCLE1BQWUsU0FBaUIsUUFBMkI7QUFJNUY7QUFFQSw4QkFBcUMsTUFBYSxTQUFpQixRQUEyQjtBQUM3RixRQUFNLGFBQWEsa0JBQWtCLE9BQU8sU0FBUyxnQkFBZ0IsS0FBSyxRQUFRLEtBQUssS0FBSztBQUM1RixRQUFNLGNBQWMsZ0JBQWdCLDBCQUEwQixPQUFPLENBQUM7QUFDdEUsUUFBTSxZQUFZLG9CQUFvQixRQUFRLE1BQU0sS0FBSyxRQUFRO0FBQ2pFLFFBQU0sYUFBYSxjQUFjLFFBQVEsU0FBUyxPQUFPLFNBQVMsaUJBQWlCLElBQUk7QUFDdkYsTUFBSSxpQkFBaUIsTUFBTSxrQkFBa0IsUUFBUSx3Q0FBVyxTQUFRLElBQUksSUFBSTtBQUNoRixRQUFNLFlBQVksb0JBQW9CLFFBQVEsU0FBUyxXQUFXO0FBR2xFLE1BQUksZUFBZSx3Q0FBVyxTQUFRLFlBQVk7QUFDakQsUUFBSSx3QkFBd0I7QUFDNUIsUUFBSSxlQUFlO0FBRW5CLFFBQUksQ0FBQyxnQkFBZ0I7QUFDcEIsOEJBQXdCO0FBQ3hCLHVCQUFpQixJQUFJLGVBQWUsd0NBQVcsU0FBUSxJQUFJLE9BQU8sU0FBUyxlQUFlLFFBQVEsUUFBVyxNQUFNO0FBQ25ILHdCQUFrQixRQUFRLGNBQWM7QUFBQSxJQUN6QyxXQUFXLENBQUMsZUFBZSxhQUFhO0FBQ3ZDLHFCQUFlO0FBQ2YscUJBQWUsY0FBYztBQUM3QiwyQkFBcUIsUUFBUSxnQkFBZ0IsY0FBYztBQUFBLElBQzVEO0FBQ0EsV0FBTyxPQUFPLElBQUksWUFBWSxXQUFXLE1BQU0sT0FBTyxFQUFFLEtBQUssTUFBTTtBQUNsRSxVQUFJLENBQUMsZ0JBQWdCO0FBQUU7QUFBQSxNQUFRO0FBQy9CLFVBQUksQ0FBQyx1QkFBdUI7QUFDM0IsNkJBQXFCLFFBQVEsY0FBYztBQUFBLE1BQzVDLFdBQVcsQ0FBQyxjQUFjO0FBQ3pCLHVCQUFlLGNBQWM7QUFDN0IsNkJBQXFCLFFBQVEsZ0JBQWdCLGNBQWM7QUFBQSxNQUM1RDtBQUFBLElBQ0QsQ0FBQztBQUFBLEVBQ0YsV0FBVyxhQUFhLFVBQVUsU0FBUyxlQUFlLHdDQUFXLFVBQVMsVUFBVSxNQUFNO0FBRzdGLHlCQUFxQixVQUFVLE1BQU0sbUJBQW1CLE1BQU07QUFDOUQseUJBQXFCLEtBQUssTUFBTSxrQkFBa0IsTUFBTTtBQUN4RCx5QkFBcUIsU0FBUyxrQkFBa0IsTUFBTTtBQUFBLEVBQ3ZEO0FBQ0Q7QUFFQSxrQ0FBeUMsTUFBZSxTQUFpQixRQUEyQjtBQUNuRyxRQUFNLFdBQVcsT0FBTyxTQUFTLGVBQWUsUUFBUSxtQkFBbUIsS0FBSyxJQUFJO0FBQ3BGLFFBQU0sY0FBYyxPQUFPLFNBQVMsZUFBZSxRQUFRLG1CQUFtQiwwQkFBMEIsT0FBTyxDQUFDO0FBRWhILE1BQUksYUFBYSxhQUFhO0FBQUU7QUFBQSxFQUFRO0FBR3hDLFFBQU0sYUFBYSxjQUFjLFFBQVEsT0FBTztBQUNoRCxNQUFJLENBQUUsdUJBQXNCO0FBQVE7QUFHcEMsUUFBTSxpQkFBaUIsTUFBTSxrQkFBa0IsUUFBUSxLQUFLLE1BQU0sSUFBSTtBQUN0RSxNQUFJLGtEQUFnQixnQkFBZSxDQUFDLFlBQVk7QUFDL0MsV0FBTyxxQkFBcUIsS0FBSyxNQUFNLG1CQUFtQixNQUFNO0FBQUEsRUFDakU7QUFFQSxNQUFJLENBQUMsT0FBTyxTQUFTLGdCQUFnQjtBQUFFO0FBQUEsRUFBUTtBQUUvQyxNQUFJLFVBQVU7QUFDZCxNQUFJLE9BQU8sU0FBUyxvQkFBb0IsZ0JBQWdCO0FBQ3ZELFVBQU0sbUJBQW1CLHlCQUF3QixLQUFLLElBQUk7QUFDMUQsVUFBTSxzQkFBc0IseUJBQXdCLE9BQU87QUFDM0QsUUFBSSxxQkFBcUIscUJBQXFCO0FBQzdDLFVBQUksQ0FBQyxPQUFPLFNBQVMsVUFBVTtBQUFFO0FBQUEsTUFBUTtBQUN6QyxnQkFBVSxHQUFHLG9CQUFvQixZQUFZLFdBQVc7QUFBQSxJQUN6RCxXQUFXLGlCQUFpQixLQUFLLE1BQU0sSUFBSTtBQUMxQyxpQkFBVyxPQUFPLEdBQUcsV0FBVztBQUNoQyxnQkFBVSxHQUFHLFlBQVksV0FBVztBQUFBLElBQ3JDLE9BQU87QUFDTixpQkFBVyxPQUFPLEdBQUcsb0JBQW9CLFdBQVc7QUFDcEQsZ0JBQVUsR0FBRyxvQkFBb0IsWUFBWSxXQUFXO0FBQUEsSUFDekQ7QUFBQSxFQUNELE9BQU87QUFDTixlQUFXLE9BQU8sR0FBRyxLQUFLLFFBQVEsV0FBVztBQUM3QyxjQUFVLEdBQUcsS0FBSyxRQUFRLFlBQVksV0FBVztBQUFBLEVBQ2xEO0FBQ0EsU0FBTyxJQUFJLFlBQVksV0FBVyxZQUFZLE9BQU87QUFDdEQ7QUFFQSxnQ0FBdUMsTUFBYSxTQUFpQixRQUEyQjtBQUMvRixRQUFNLGNBQWMsZ0JBQWdCLDBCQUEwQixPQUFPLENBQUM7QUFDdEUsUUFBTSxjQUFjLEtBQUs7QUFDekIsTUFBSSxnQkFBZ0IsYUFBYTtBQUFFO0FBQUEsRUFBUTtBQUUzQyxRQUFNLFlBQVksb0JBQW9CLFFBQVEsU0FBUyxXQUFXO0FBQ2xFLFFBQU0sYUFBYSxrQkFBa0IsT0FBTyxTQUFTLGdCQUFnQixLQUFLLFFBQVEsS0FBSyxLQUFLO0FBQzVGLFFBQU0sZ0JBQWdCLGtCQUFrQixPQUFPLFNBQVMsZ0JBQWdCLFdBQVcsS0FBSztBQUN4RixRQUFNLFlBQVksb0JBQW9CLFFBQVEsTUFBTSxLQUFLLFFBQVE7QUFDakUsTUFBSSxpQkFBaUIsTUFBTSxrQkFBa0IsUUFBUSx3Q0FBVyxTQUFRLElBQUksSUFBSTtBQUNoRixRQUFNLHlCQUF5QixrQkFBa0IsUUFBUSx3Q0FBVyxTQUFRLEVBQUU7QUFDOUUsUUFBTSxhQUFhLGNBQWMsUUFBUSxTQUFTLE9BQU8sU0FBUyxpQkFBaUIsSUFBSTtBQUV2RixNQUFJLENBQUMsa0RBQWdCLHNCQUFxQixlQUFlLHdDQUFXLFNBQVEsQ0FBQyx3QkFBd0I7QUFDcEcseUJBQXFCLEtBQUssTUFBTSxrQkFBa0IsTUFBTTtBQUN4RCx5QkFBcUIsVUFBVSxNQUFNLG1CQUFtQixNQUFNO0FBQzlEO0FBQUEsRUFDRCxXQUFXLGtEQUFnQixzQkFBc0IsZUFBZSx3Q0FBVyxPQUFPO0FBQ2pGLHlCQUFxQixLQUFLLE1BQU0sa0JBQWtCLE1BQU07QUFDeEQseUJBQXFCLHdDQUFXLFNBQVEsSUFBSSxtQkFBbUIsTUFBTTtBQUFBLEVBQ3RFO0FBRUEsTUFBSSxrREFBZ0IsZ0JBQWUsQ0FBQyxPQUFPLFNBQVMsZ0JBQWdCO0FBQUU7QUFBQSxFQUFRO0FBRzlFLE1BQUksZUFBZSx3Q0FBVyxPQUFNO0FBQ25DLHlCQUFxQixLQUFLLE1BQU0sa0JBQWtCLE1BQU07QUFDeEQseUJBQXFCLHVDQUFXLE1BQU0sbUJBQW1CLE1BQU07QUFDL0QseUJBQXFCLFVBQVUsTUFBTSxtQkFBbUIsTUFBTTtBQUM5RDtBQUFBLEVBQ0Q7QUFLQSxNQUFJLENBQUM7QUFBVztBQUNoQixNQUFJLGtCQUFrQixVQUFVLFFBQVEsd0NBQVcsVUFBUyxVQUFVLE1BQU07QUFDM0UsV0FBTyx5QkFBeUIsTUFBTSxTQUFTLFdBQVcsTUFBTTtBQUFBLEVBQ2pFLFdBQVcsY0FBYyxrQkFBa0IsVUFBVSxNQUFNO0FBQzFELFdBQU8seUJBQXlCLE1BQU0sU0FBUyxXQUFXLE1BQU07QUFBQSxFQUNqRTtBQUNEO0FBRUEsd0NBQXdDLE1BQWEsU0FBaUIsV0FBMEIsUUFBMkI7QUE5SzNIO0FBK0tDLFFBQU0sZ0JBQWdCLGtCQUFrQixPQUFPLFNBQVMsZ0JBQWdCLEtBQUssUUFBUTtBQUNyRixNQUFJLENBQUMsZUFBZTtBQUNuQix5QkFBcUIsVUFBVSxNQUFNLG1CQUFtQixNQUFNO0FBQzlELHlCQUFxQixLQUFLLE1BQU0sa0JBQWtCLE1BQU07QUFDeEQ7QUFBQSxFQUNELFdBQVcsa0JBQWtCLFVBQVUsTUFBTTtBQUM1Qyx5QkFBcUIsVUFBVSxNQUFNLG1CQUFtQixNQUFNO0FBQzlELHlCQUFxQixLQUFLLE1BQU0sa0JBQWtCLE1BQU07QUFDeEQ7QUFBQSxFQUNEO0FBRUEsTUFBSSxnQkFBZ0I7QUFDcEIsTUFBSSxPQUFPLFNBQVMsb0JBQW9CLGdCQUFnQjtBQUN2RCxRQUFJLGlCQUFVLFdBQVYsbUJBQWtCLFVBQVMsS0FBSztBQUNuQyxzQkFBZ0IsR0FBRztBQUFBLElBQ3BCLE9BQU87QUFDTixzQkFBZ0IsaUJBQVUsV0FBVixtQkFBa0IsUUFBTyxNQUFNO0FBQUEsSUFDaEQ7QUFBQSxFQUNELE9BQU87QUFDTixVQUFNLG1CQUFtQix5QkFBd0IsS0FBSyxJQUFJO0FBQzFELFFBQUksaUJBQWlCLEtBQUssTUFBTSxNQUFNLGlCQUFpQixLQUFLLE1BQU0sS0FBSztBQUN0RSxzQkFBZ0IsR0FBRztBQUFBLElBQ3BCLE9BQU87QUFDTixzQkFBZ0IsR0FBRyxvQkFBb0I7QUFBQSxJQUN4QztBQUFBLEVBQ0Q7QUFFQSxNQUFJLE9BQU8sSUFBSSxNQUFNLHNCQUFzQixhQUFhLEdBQUc7QUFDMUQsVUFBTSxPQUFPLElBQUksWUFBWSxXQUFXLE1BQU0sT0FBTztBQUNyRCxXQUFPLElBQUkseUJBQU8sNENBQTRDO0FBQUEsRUFDL0Q7QUFDQSxTQUFPLElBQUksWUFBWSxXQUFXLFdBQVcsYUFBYTtBQUMzRDtBQUVBLGtDQUFrQyxRQUFpQixTQUFpQixRQUEyQjtBQUM5RixRQUFNLGtCQUFrQixPQUFPLFNBQVMsZUFBZSxPQUN0RCxDQUFDLG1CQUFnQjtBQW5ObkI7QUFtTnNCLGdDQUFlLFNBQWYsbUJBQXFCLFNBQVM7QUFBQSxHQUNuRDtBQUVBLGtCQUFnQixRQUFRLENBQUMsbUJBQW1CO0FBQzNDLFFBQUksZUFBZSxTQUFTLFNBQVM7QUFDcEMscUJBQWUsT0FBTyxPQUFPO0FBQzdCO0FBQUEsSUFDRDtBQUNBLFFBQUksQ0FBQyxlQUFlO0FBQU07QUFDMUIsVUFBTSxVQUFVLGVBQWUsS0FBSyxNQUFNLEdBQUc7QUFDN0MsUUFBSSxRQUFRLFNBQVMsR0FBRztBQUN2QixjQUFRLEtBQUssZUFBZSxJQUFJO0FBQUEsSUFDakM7QUFFQSxZQUFRLFFBQVEsUUFBUSxPQUFPLElBQUksS0FBSyxPQUFPO0FBQy9DLG1CQUFlLE9BQU8sUUFBUSxLQUFLLEdBQUc7QUFBQSxFQUN2QyxDQUFDO0FBQ0QsU0FBTyxhQUFhO0FBQ3JCOzs7QUNyT0Esd0JBQThDO0FBTTlDLDRCQUFtQyxNQUFxQixRQUEyQjtBQUMvRSxNQUFJLENBQUMsT0FBTyxJQUFJLFVBQVU7QUFBYTtBQUV2QyxRQUFNLFNBQVMsS0FBSztBQUNwQixNQUFJLGtCQUFrQiwyQkFBUztBQUMzQixRQUFJLE9BQU8sd0JBQXdCLE1BQU0sR0FBRztBQUN4QywyQkFBcUIsT0FBTyxNQUFNLHdCQUF3QixNQUFNO0FBQUEsSUFDcEUsT0FBTztBQUNILDJCQUFxQixPQUFPLE1BQU0sd0JBQXdCLE1BQU07QUFBQSxJQUNwRTtBQUFBLEVBQ0o7QUFFQSxNQUFJLGdCQUFnQix5QkFBTztBQUN2Qix1QkFBbUIsTUFBTSxNQUFNO0FBQUEsRUFDbkMsV0FBVyxnQkFBZ0IsNkJBQVcsT0FBTyxTQUFTLFlBQVk7QUFDOUQseUJBQXFCLE1BQU0sTUFBTTtBQUFBLEVBQ3JDO0FBQ0o7QUFFQSxrQ0FBa0MsTUFBYSxRQUEyQjtBQUN0RSxRQUFNLFNBQVMsV0FBVSxRQUFRLElBQUk7QUFDckMsTUFBSSxDQUFFLG1CQUFrQiw0QkFBVTtBQUFFO0FBQUEsRUFBUTtBQUM1QyxRQUFNLGlCQUFpQixNQUFNLGtCQUFrQixRQUFRLE9BQU8sTUFBTSxJQUFJO0FBQ3hFLE1BQUksZ0JBQWdCO0FBQUU7QUFBQSxFQUFRO0FBQzlCLFFBQU0sYUFBYSxjQUFjLFFBQVEsT0FBTyxJQUFJO0FBRXBELE1BQUksY0FBYyxXQUFXLFNBQVMsS0FBSyxNQUFNO0FBQzdDLHlCQUFxQixPQUFPLE1BQU0sbUJBQW1CLE1BQU07QUFDM0QseUJBQXFCLEtBQUssTUFBTSxrQkFBa0IsTUFBTTtBQUN4RDtBQUFBLEVBQ0o7QUFDSjtBQUVBLG9DQUFvQyxRQUFpQixRQUEyQjtBQUM1RSxNQUFJLFdBQVcsT0FBTyxTQUFTO0FBRS9CLFFBQU0sdUJBQXVCLE9BQU8sSUFBSSxNQUFNLFVBQVUsc0JBQXNCO0FBQzlFLFFBQU0sNEJBQTRCLDhEQUFzQixRQUFRLE1BQU0sUUFBTztBQUM3RSxRQUFNLDZCQUE2Qix5QkFBeUIsUUFBUSx5QkFBeUI7QUFFN0YsTUFBSSxDQUFDLE9BQU8sU0FBUywrQkFBK0I7QUFDaEQsUUFBSSxDQUFDLDhCQUE4Qiw4QkFBOEIsT0FBTztBQUFNO0FBQUEsRUFDbEYsV0FBVyxDQUFDLDhCQUE4Qiw4QkFBOEIsT0FBTyxNQUFNO0FBQ2pGLGVBQVc7QUFBQSxFQUNmO0FBRUEsUUFBTSxpQkFBaUIsTUFBTSxrQkFBa0IsUUFBUSxPQUFPLE1BQU0sSUFBSTtBQUN4RSxNQUFJLGlEQUFnQjtBQUFtQjtBQUV2QyxRQUFNLGFBQWEsY0FBYyxRQUFRLE9BQU8sSUFBSTtBQUNwRCxNQUFJO0FBQVk7QUFFaEIsbUJBQWlCLFFBQVEsT0FBTyxNQUFNLFVBQVUsUUFBVyxJQUFJO0FBQy9ELHVCQUFxQixPQUFPLE1BQU0sbUJBQW1CLE1BQU07QUFDL0Q7OztBQzNEQSx3QkFBc0Q7QUFFL0MsSUFBTSxhQUFOLE1BQWlCO0FBQUEsRUFHcEIsWUFBWSxRQUEyQjtBQUNuQyxTQUFLLFNBQVM7QUFDZCxTQUFLLE1BQU0sT0FBTztBQUFBLEVBQ3RCO0FBQUEsRUFFQSxZQUFZO0FBQ1IsUUFBSSxDQUFDLEtBQUssVUFBVTtBQUFHO0FBRXZCLFNBQUssSUFBSSxVQUFVLGlCQUFpQixDQUFDLFNBQVM7QUFkdEQ7QUFlWSxVQUFJLENBQUUsTUFBSyxnQkFBZ0I7QUFBbUI7QUFDOUMsWUFBTSxPQUFPLFdBQUssU0FBTCxtQkFBVztBQUN4QixVQUFJLENBQUM7QUFBTTtBQUVYLFdBQUssc0JBQXNCLFFBQVEsS0FBSyxRQUFRO0FBQUEsSUFDcEQsQ0FBQztBQUFBLEVBQ0w7QUFBQSxFQUVBLGFBQWE7QUFDVCxRQUFJLENBQUMsS0FBSyxVQUFVO0FBQUc7QUFDdkIsU0FBSyxJQUFJLFVBQVUsaUJBQWlCLENBQUMsU0FBUztBQXpCdEQ7QUEwQlksVUFBSSxDQUFFLE1BQUssZ0JBQWdCO0FBQW1CO0FBQzlDLFlBQU0sT0FBTyxXQUFLLFNBQUwsbUJBQVc7QUFDeEIsVUFBSSxDQUFDO0FBQU07QUFDWCxZQUFNLFNBQVMsV0FBVSxLQUFLLFFBQVEsSUFBSTtBQUMxQyxVQUFJLENBQUM7QUFBUTtBQUViLFdBQUssc0JBQXNCLFFBQVEsT0FBTyxJQUFJO0FBQUEsSUFDbEQsQ0FBQztBQUFBLEVBQ0w7QUFBQSxFQUVBLFVBQVUsWUFBb0I7QUFDMUIsUUFBSSxDQUFDLEtBQUssVUFBVTtBQUFHO0FBRXZCLFVBQU0sU0FBUyxLQUFLLElBQUksTUFBTSxzQkFBc0IsVUFBVTtBQUM5RCxRQUFJLENBQUUsbUJBQWtCO0FBQVU7QUFFbEMsVUFBTSxhQUFhLGNBQWMsS0FBSyxRQUFRLE9BQU8sSUFBSTtBQUN6RCxRQUFJLENBQUM7QUFBWTtBQUVqQixTQUFLLElBQUksVUFBVSxpQkFBaUIsQ0FBQyxTQUFTO0FBN0N0RDtBQThDWSxVQUFJLENBQUUsTUFBSyxnQkFBZ0I7QUFBbUI7QUFDOUMsWUFBTSxPQUFPLFdBQUssU0FBTCxtQkFBVztBQUN4QixVQUFJLENBQUM7QUFBTTtBQUNYLFVBQUksS0FBSyxTQUFTLFdBQVcsTUFBTTtBQUUvQixhQUFLLHNCQUFzQixRQUFRLE9BQU8sSUFBSTtBQUFBLE1BQ2xEO0FBQUEsSUFDSixDQUFDO0FBQUEsRUFDTDtBQUFBLEVBRUEsWUFBWTtBQUNSLFFBQUksS0FBSyxPQUFPLFNBQVMsa0JBQWtCO0FBQW1CLGFBQU87QUFDckUsV0FBTyxLQUFLLE9BQU8sU0FBUztBQUFBLEVBQ2hDO0FBQ0o7OztBQzVEQSx3QkFBOEM7QUFNdkMsc0JBQXNCLE1BQXFCLFFBQTJCO0FBQ3pFLFFBQU0sU0FBUyxPQUFPLElBQUksTUFBTSxzQkFBc0IseUJBQXdCLEtBQUssSUFBSSxDQUFDO0FBQ3hGLE1BQUksa0JBQWtCLDJCQUFTO0FBQzNCLFFBQUksT0FBTyx3QkFBd0IsTUFBTSxHQUFHO0FBQ3hDLDJCQUFxQixPQUFPLE1BQU0sd0JBQXdCLE1BQU07QUFBQSxJQUNwRSxPQUFPO0FBQ0gsMkJBQXFCLE9BQU8sTUFBTSx3QkFBd0IsTUFBTTtBQUFBLElBQ3BFO0FBQUEsRUFDSjtBQUVBLE1BQUksZ0JBQWdCLHlCQUFPO0FBQ3ZCLFVBQU0sVUFBUyxXQUFVLFFBQVEsSUFBSTtBQUNyQyxRQUFJLENBQUMsU0FBUTtBQUFFO0FBQUEsSUFBUTtBQUN2QixVQUFNLGNBQWEsY0FBYyxRQUFRLFFBQU8sSUFBSTtBQUNwRCxRQUFJLGFBQVk7QUFBRTtBQUFBLElBQVE7QUFDMUIseUJBQXFCLFFBQU8sTUFBTSxtQkFBbUIsTUFBTTtBQUMzRCx5QkFBcUIsUUFBTyxNQUFNLHdCQUF3QixNQUFNO0FBQUEsRUFDcEU7QUFFQSxNQUFJLENBQUUsaUJBQWdCLDRCQUFVO0FBQUU7QUFBQSxFQUFRO0FBQzFDLFFBQU0sYUFBYSxjQUFjLFFBQVEsS0FBSyxJQUFJO0FBQ2xELE1BQUksQ0FBQyxZQUFZO0FBQUU7QUFBQSxFQUFRO0FBQzNCLHVCQUFxQixXQUFXLE1BQU0sa0JBQWtCLE1BQU07QUFDOUQsTUFBSSxDQUFDLE9BQU8sU0FBUyxZQUFZO0FBQUU7QUFBQSxFQUFRO0FBQzNDLG1CQUFpQixRQUFRLFlBQVksS0FBSztBQUM5Qzs7O0ExQ1RBLElBQXFCLG9CQUFyQixjQUErQyx5QkFBTztBQUFBLEVBQXREO0FBQUE7QUFNQyx1QkFBb0Q7QUFDcEQsMEJBQXFDO0FBQ3JDLHNCQUFnQztBQUNoQyw4QkFBcUI7QUFFckIsMEJBQWlCO0FBQUE7QUFBQSxFQUtqQixNQUFNLFNBQVM7QUFDZCxZQUFRLElBQUksNkJBQTZCO0FBQ3pDLFlBQVEsSUFBSSwrQkFBK0I7QUFDM0MsVUFBTSxLQUFLLGFBQWE7QUFDeEIsU0FBSyxjQUFjLElBQUksWUFBWSxLQUFLLEtBQUssSUFBSTtBQUNqRCxTQUFLLGNBQWMsS0FBSyxXQUFXO0FBQ25DLFNBQUssYUFBYTtBQUdsQixhQUFTLEtBQUssVUFBVSxJQUFJLHFCQUFxQjtBQUNqRCxRQUFJLEtBQUssU0FBUyxnQkFBZ0I7QUFBRSxlQUFTLEtBQUssVUFBVSxJQUFJLGtCQUFrQjtBQUFBLElBQUc7QUFDckYsUUFBSSxLQUFLLFNBQVMsbUNBQW1DO0FBQUUsZUFBUyxLQUFLLFVBQVUsSUFBSSw2QkFBNkI7QUFBQSxJQUFHO0FBQ25ILFFBQUksS0FBSyxTQUFTLGlCQUFpQjtBQUFFLGVBQVMsS0FBSyxVQUFVLElBQUksdUJBQXVCO0FBQUEsSUFBRztBQUMzRixRQUFJLEtBQUssU0FBUyxVQUFVO0FBQUUsZUFBUyxLQUFLLFVBQVUsSUFBSSxrQkFBa0I7QUFBQSxJQUFHO0FBQy9FLFFBQUksS0FBSyxTQUFTLGFBQWE7QUFBRSxlQUFTLEtBQUssVUFBVSxJQUFJLHFCQUFxQjtBQUFBLElBQUc7QUFDckYsUUFBSSxLQUFLLFNBQVMsZ0JBQWdCO0FBQUUsZUFBUyxLQUFLLFVBQVUsSUFBSSx1QkFBdUI7QUFBQSxJQUFHO0FBQzFGLFFBQUksS0FBSyxTQUFTLG1CQUFtQjtBQUFFLGVBQVMsS0FBSyxVQUFVLElBQUksMEJBQTBCO0FBQUEsSUFBRztBQUNoRyxRQUFJLEtBQUssU0FBUyx1QkFBdUI7QUFBRSxlQUFTLEtBQUssVUFBVSxJQUFJLDRCQUE0QjtBQUFBLElBQUc7QUFDdEcsUUFBSSxLQUFLLFNBQVMsMEJBQTBCO0FBQUUsZUFBUyxLQUFLLFVBQVUsSUFBSSwrQkFBK0I7QUFBQSxJQUFHO0FBQzVHLFFBQUksS0FBSyxTQUFTLG9CQUFvQjtBQUFFLGVBQVMsS0FBSyxVQUFVLElBQUksdUJBQXVCO0FBQUEsSUFBRztBQUM5RixRQUFJLENBQUMsS0FBSyxTQUFTLGlCQUFpQjtBQUFFLGVBQVMsS0FBSyxVQUFVLElBQUksMEJBQTBCO0FBQUEsSUFBRztBQUMvRixRQUFJLHlDQUFrQixPQUFPLEdBQUc7QUFDL0IsZUFBUyxLQUFLLFVBQVUsSUFBSSxlQUFlO0FBQUEsSUFDNUM7QUFFQSxRQUFJLFNBQVMsS0FBSyxLQUFLLElBQUksRUFBRSxpQkFBaUI7QUFFOUMsU0FBSyxJQUFJLFVBQVUsY0FBYyxLQUFLLGNBQWMsS0FBSyxJQUFJLENBQUM7QUFFOUQsVUFBTSxZQUFZLElBQUk7QUFFdEIsU0FBSyxTQUFTLFFBQVEsU0FBUyxNQUFNO0FBQUEsTUFDcEMsV0FBVztBQUFBLE1BQ1gsU0FBUztBQUFBLElBQ1YsQ0FBQztBQUVELFNBQUssaUJBQWlCLFFBQVEsV0FBVyxDQUFDLFVBQXlCO0FBMUVyRTtBQTJFRyxVQUFJLE1BQU0sT0FBTyxTQUFTO0FBQ3pCLGNBQU0sY0FBYSxjQUFjLE1BQU0sNEJBQWUsSUFBSSxNQUFuQixtQkFBc0IsU0FBdEIsbUJBQTRCLFNBQVEsRUFBRTtBQUM3RSxZQUFJLENBQUM7QUFBWTtBQUNqQix1QkFBZSxNQUFNLFdBQVU7QUFBQSxNQUNoQztBQUVBLFlBQU0saUJBQWlCLEtBQUs7QUFDNUIsVUFBSSxLQUFLO0FBQW9CO0FBQzdCLFVBQUksQ0FBQztBQUFnQjtBQUNyQixVQUFJLENBQUMseUJBQU8sV0FBVyxLQUFLO0FBQUc7QUFFL0IsWUFBTSxhQUFhLHdEQUFnQixrQkFBaEIsbUJBQStCLGFBQWEsaUJBQWdCO0FBQy9FLFlBQU0sYUFBYSxjQUFjLE1BQU0sVUFBVTtBQUNqRCxVQUFJLENBQUM7QUFBWTtBQUVqQixXQUFLLElBQUksVUFBVSxRQUFRLGNBQWM7QUFBQSxRQUN4QyxPQUFPLEtBQUs7QUFBQSxRQUNaLFFBQVE7QUFBQSxRQUNSLGFBQWE7QUFBQSxVQUNaLE1BQU07QUFBQSxRQUNQO0FBQUEsUUFDQSxVQUFVO0FBQUEsUUFDVixVQUFVLHlDQUFZO0FBQUEsUUFDdEIsWUFBWSx5Q0FBWTtBQUFBLE1BQ3pCLENBQUM7QUFDRCxXQUFLLHFCQUFxQjtBQUFBLElBQzNCLENBQUM7QUFFRCxTQUFLLGNBQWMsS0FBSyxJQUFJLE1BQU0sR0FBRyxVQUFVLENBQUMsU0FBd0I7QUFDdkUsbUJBQWEsTUFBTSxJQUFJO0FBQUEsSUFDeEIsQ0FBQyxDQUFDO0FBRUYsU0FBSyxjQUFjLEtBQUssSUFBSSxVQUFVLEdBQUcsYUFBYSxPQUFPLGFBQTJCO0FBQ3ZGLFVBQUksS0FBSyxpQkFBaUI7QUFDekIsYUFBSyxnQkFBZ0IsWUFBWSxjQUFjO0FBQy9DLGFBQUssa0JBQWtCO0FBQUEsTUFDeEI7QUFFQSxVQUFJLENBQUMsWUFBWSxDQUFDLFNBQVMsVUFBVTtBQUFFO0FBQUEsTUFBUTtBQUUvQyxZQUFNLFNBQVMsV0FBVSxNQUFNLFFBQVE7QUFDdkMsVUFBSSxDQUFDLFFBQVE7QUFBRTtBQUFBLE1BQVE7QUFDdkIsWUFBTSxpQkFBaUIsTUFBTSxrQkFBa0IsTUFBTSxPQUFPLE1BQU0sSUFBSTtBQUN0RSxVQUFJLGlEQUFnQjtBQUFtQjtBQUN2QyxZQUFNLGFBQWEsY0FBYyxNQUFNLE9BQU8sSUFBSTtBQUNsRCxVQUFJLENBQUMsWUFBWTtBQUFFO0FBQUEsTUFBUTtBQUMzQixVQUFJLFdBQVcsU0FBUyxTQUFTLE1BQU07QUFBRTtBQUFBLE1BQVE7QUFDakQsV0FBSyxrQkFBa0IsTUFBTSxPQUFPLE1BQU0sSUFBSTtBQUM5QyxVQUFJLEtBQUs7QUFBaUIsYUFBSyxnQkFBZ0IsU0FBUyxjQUFjO0FBQUEsSUFDdkUsQ0FBQyxDQUFDO0FBRUYsU0FBSyxjQUFjLEtBQUssSUFBSSxNQUFNLEdBQUcsVUFBVSxDQUFDLE1BQXFCLFlBQW9CO0FBQ3hGLG1CQUFhLE1BQU0sU0FBUyxJQUFJO0FBQUEsSUFDakMsQ0FBQyxDQUFDO0FBRUYsU0FBSyxjQUFjLEtBQUssSUFBSSxNQUFNLEdBQUcsVUFBVSxDQUFDLFNBQXdCO0FBQ3ZFLG1CQUFhLE1BQU0sSUFBSTtBQUFBLElBQ3hCLENBQUMsQ0FBQztBQUVGLFNBQUssbUNBQW1DLG1CQUFtQixDQUFDLFFBQWdCLElBQWlCLFFBQXNDO0FBQ2xJLFdBQUssb0JBQW9CLFFBQVEsSUFBSSxHQUFHO0FBQUEsSUFDekMsQ0FBQztBQUVELFFBQUksS0FBSyxJQUFJLFVBQVUsYUFBYTtBQUNuQyxXQUFLLGFBQWEsc0JBQXNCLENBQUMsU0FBd0I7QUFDaEUsZUFBTyxJQUFJLG1CQUFtQixNQUFNLElBQUk7QUFBQSxNQUN6QyxDQUFDO0FBQUEsSUFDRixPQUFPO0FBQ04sV0FBSyxJQUFJLFVBQVUsY0FBYyxZQUFZO0FBQzVDLGFBQUssYUFBYSxzQkFBc0IsQ0FBQyxTQUF3QjtBQUNoRSxpQkFBTyxJQUFJLG1CQUFtQixNQUFNLElBQUk7QUFBQSxRQUN6QyxDQUFDO0FBQUEsTUFDRixDQUFDO0FBQUEsSUFDRjtBQUFBLEVBQ0Q7QUFBQSxFQUVBLGdCQUFnQjtBQXZKakI7QUF3SkUsUUFBSSxLQUFLLFNBQVMsaUJBQWlCLFNBQVM7QUFDM0MsV0FBSyxjQUFjLElBQUksOEJBQThCLElBQUk7QUFBQSxJQUMxRDtBQUNBLFNBQUssYUFBYSxJQUFJLFdBQVcsSUFBSTtBQUNyQyxTQUFLLFdBQVcsV0FBVztBQUUzQixVQUFNLE9BQU8sS0FBSyxJQUFJLFVBQVUsZ0JBQWdCLFVBQVUsRUFBRSxNQUFNO0FBQ2xFLFVBQU0sT0FBTyw2QkFBTTtBQUVuQixRQUFJLENBQUMsTUFBTTtBQUFFO0FBQUEsSUFBUTtBQUdyQixVQUFNLFdBQVcsaUJBQUssYUFBTCxZQUFpQixLQUFLLGVBQXRCLFlBQW9DLFdBQUssSUFBSSxVQUFVLGlCQUFuQixtQkFBaUM7QUFDdEYsUUFBSSxDQUFDLFVBQVU7QUFBRTtBQUFBLElBQVE7QUFFekIsVUFBTSxTQUFTO0FBR2YsVUFBTSx5QkFBeUIsU0FBUyxpQkFBaUIsWUFBWSxVQUFVO0FBRy9FLGFBQVMsaUJBQWlCLFlBQVksVUFBVSxpQkFBaUIsU0FBVSxRQUFRLE1BQU07QUFDeEYsWUFBTSxFQUFFLGNBQWMsT0FBTyxJQUFJO0FBQ2pDLFVBQUksYUFBYSxVQUFVLGdCQUFnQiw2QkFBVyxjQUFjLFFBQVEsVUFBVSxLQUFLLElBQUksR0FBRztBQUNqRyxlQUFPLElBQUksWUFBWSxVQUFVLE9BQU8sUUFBUSxFQUFFLDBDQUEwQyxDQUFDO0FBQUEsTUFDOUYsT0FBTztBQUNOLCtCQUF1QixLQUFLLE1BQU0sS0FBSyxHQUFHLElBQUk7QUFBQSxNQUMvQztBQUFBLElBQ0Q7QUFHQSxVQUFNLHFCQUFxQixTQUFTLGlCQUFpQixZQUFZLFVBQVU7QUFFM0UsYUFBUyxpQkFBaUIsWUFBWSxVQUFVLGFBQWEsU0FBVSxRQUFRLE1BQU07QUFDcEYsWUFBTSxFQUFFLGNBQWMsT0FBTyxJQUFJO0FBQ2pDLFVBQUksYUFBYSxVQUFVLGdCQUFnQiw2QkFBVyxjQUFjLFFBQVEsVUFBVSxLQUFLLElBQUksR0FBRztBQUNqRyxjQUFNLGFBQWEsY0FBYyxRQUFRLFVBQVUsS0FBSyxJQUFJO0FBQzVELFlBQUksd0NBQVcsVUFBUyxZQUFZLFVBQVUsZ0JBQWdCLDZCQUFXLFlBQVk7QUFDcEYsb0JBQVUsT0FBTztBQUNqQixvQkFBVSxPQUFPO0FBQUEsUUFDbEI7QUFBQSxNQUNEO0FBQ0EsYUFBTyxtQkFBbUIsS0FBSyxNQUFNLEtBQUssR0FBRyxJQUFJO0FBQUEsSUFDbEQ7QUFBQSxFQUdEO0FBQUEsRUFHQSxvQkFBb0IsUUFBZ0IsSUFBaUIsS0FBbUM7QUFDdkYsVUFBTSxXQUFXLElBQUksaUJBQWlCLE1BQU07QUExTTlDO0FBMk1HLFlBQU0sYUFBYSxTQUFHLGtCQUFILG1CQUFrQixXQUFXLEtBQUs7QUFDckQsVUFBSSxZQUFZO0FBQ2YsbUJBQVcsaUJBQWlCLFNBQVMsQ0FBQyxNQUFNO0FBQzNDLFlBQUUseUJBQXlCO0FBQzNCLFlBQUUsZUFBZTtBQUNqQixZQUFFLGdCQUFnQjtBQUNsQixjQUFJLHVCQUF1QixLQUFLLEtBQUssTUFBTSxpQ0FBVSxNQUFNLEdBQUcsS0FBSyxJQUFJLEtBQUssU0FBUyxlQUFlLEVBQUUsS0FBSztBQUFBLFFBQzVHLEdBQUcsRUFBRSxTQUFTLEtBQUssQ0FBQztBQUFBLE1BQ3JCO0FBQUEsSUFDRCxDQUFDO0FBRUQsYUFBUyxRQUFRLElBQUk7QUFBQSxNQUNwQixXQUFXO0FBQUEsTUFDWCxTQUFTO0FBQUEsSUFDVixDQUFDO0FBRUQsUUFBSTtBQUNILFVBQUksS0FBSyxJQUFJLFVBQVUsYUFBYTtBQUNuQyxjQUFNLGlCQUFpQixJQUFJLGVBQWUsTUFBTSxLQUFLLFFBQVEsSUFBSSxLQUFLLFNBQVMsZUFBZTtBQUM5Rix1QkFBZSxPQUFPLE1BQU0saUNBQVUsTUFBTSxHQUFHLElBQUksR0FBRztBQUFBLE1BQ3ZELE9BQU87QUFDTixhQUFLLElBQUksVUFBVSxjQUFjLE1BQU07QUFDdEMsZ0JBQU0saUJBQWlCLElBQUksZUFBZSxNQUFNLEtBQUssUUFBUSxJQUFJLEtBQUssU0FBUyxlQUFlO0FBQzlGLHlCQUFlLE9BQU8sTUFBTSxpQ0FBVSxNQUFNLEdBQUcsSUFBSSxHQUFHO0FBQUEsUUFDdkQsQ0FBQztBQUFBLE1BQ0Y7QUFBQSxJQUNELFNBQVMsR0FBUDtBQUNELFVBQUkseUJBQU8sdUZBQXVGO0FBQ2xHLGNBQVEsTUFBTSxDQUFDO0FBQUEsSUFDaEI7QUFBQSxFQUNEO0FBQUEsRUFFQSxNQUFNLHVCQUF1QjtBQUM1QixVQUFNLEVBQUUsY0FBYyxLQUFLO0FBRTNCLFFBQUksT0FBNkI7QUFDakMsVUFBTSxTQUFTLFVBQVUsZ0JBQWdCLG9CQUFvQjtBQUU3RCxRQUFJLE9BQU8sU0FBUyxHQUFHO0FBQ3RCLGFBQU8sT0FBTztBQUFBLElBQ2YsT0FBTztBQUNOLGFBQU8sVUFBVSxhQUFhLEtBQUs7QUFDbkMsWUFBTSw4QkFBTSxhQUFhLEVBQUUsTUFBTSxzQkFBc0IsUUFBUSxLQUFLO0FBQUEsSUFDckU7QUFFQSxRQUFJLENBQUM7QUFBTTtBQUNYLGNBQVUsV0FBVyxJQUFJO0FBQUEsRUFDMUI7QUFBQSxFQUVBLE1BQU0scUJBQXFCO0FBQzFCLFVBQU0sRUFBRSxjQUFjLEtBQUs7QUFDM0IsVUFBTSxPQUFPLFVBQVUsZ0JBQWdCLG9CQUFvQixFQUFFO0FBQzdELFFBQUksQ0FBQztBQUFNO0FBQ1gsVUFBTSxPQUFPLEtBQUs7QUFDbEIsU0FBSyxRQUFRLEtBQUssV0FBVyxLQUFLLE1BQU0sTUFBTSxLQUFLLGlCQUFpQixLQUFLLFNBQVMsUUFBVyxRQUFXLEtBQUssVUFBVTtBQUFBLEVBQ3hIO0FBQUEsRUFFQSx3QkFBd0IsUUFBMEI7QUFwUW5EO0FBcVFFLFFBQUksdUJBQXVCLEtBQUssSUFBSSxNQUFNLFVBQVUsc0JBQXNCO0FBQzFFLFVBQU0sNEJBQTRCLDhEQUFzQixRQUFRLE1BQU0sUUFBTztBQUM3RSxVQUFNLDZCQUE2Qix5QkFBeUIsUUFBUSx5QkFBeUI7QUFDN0YsVUFBTSxZQUFZLEtBQUssU0FBUyxvQkFBb0IsaUJBQWlCLElBQUk7QUFDekUsUUFBSSxPQUFPLFNBQVMsVUFBVSxHQUFHO0FBQ2hDLDJCQUFxQixPQUFPLE1BQU0sbUJBQW1CLElBQUk7QUFBQSxJQUMxRDtBQUVBLFFBQUksT0FBTyxTQUFTLFVBQVUsV0FBVztBQUN4QyxhQUFPO0FBQUEsSUFDUixXQUFXLE9BQU8sU0FBUyxTQUFTLFdBQVc7QUFDOUMsVUFBSSw0QkFBNEI7QUFDL0IsZUFBTztBQUFBLE1BQ1IsV0FBVyxLQUFLLFNBQVMsMEJBQTBCLEtBQUssSUFBSSxNQUFNLHNCQUFzQixHQUFHLE9BQU8sUUFBUSwyQkFBMkIsR0FBRztBQUN2SSxjQUFNLGFBQWEsR0FBRyxPQUFPLFFBQVE7QUFDckMsY0FBTSxtQkFBbUIsS0FBSyxJQUFJLE1BQU0sc0JBQXNCLFVBQVU7QUFDeEUsWUFBSSw0QkFBNEIsNkJBQVcsT0FBTyxTQUFTLFVBQVUsWUFBWSxHQUFHO0FBQ25GLGNBQUksQ0FBQyxPQUFPLFdBQVc7QUFDdEIsd0JBQU0sT0FBTyxNQUFNLElBQUksTUFBdkIsbUJBQTBCO0FBQUEsVUFDM0I7QUFBQSxRQUNEO0FBQ0EsZUFBTyxPQUFPLFNBQVMsVUFBVSxZQUFZO0FBQUEsTUFDOUMsT0FBTztBQUNOLGVBQU87QUFBQSxNQUNSO0FBQUEsSUFDRDtBQUNBLFdBQU87QUFBQSxFQUNSO0FBQUEsRUFFQSxNQUFNLFdBQVcsUUFBaUIsTUFBaUMsYUFBc0IsZ0JBQWdCLE9BQU8sUUFBUSxHQUFHO0FBQzFILFFBQUksQ0FBQztBQUFNLGFBQU8sT0FBTztBQUN6QixRQUFJLG1CQUFtQixNQUFNLE9BQU8sTUFBTSxJQUFJO0FBQzlDLFFBQUksQ0FBQyxrQkFBa0I7QUFDdEIsVUFBSSxpQkFBaUIsUUFBUSxHQUFHO0FBQy9CLGNBQU0sSUFBSSxRQUFRLENBQUMsTUFBTSxXQUFXLEdBQUcsR0FBRyxDQUFDO0FBQzNDLGFBQUssV0FBVyxRQUFRLE1BQU0sYUFBYSxlQUFlLFFBQVEsQ0FBQztBQUNuRTtBQUFBLE1BQ0Q7QUFDQTtBQUFBLElBQ0Q7QUFFQSx1QkFBbUIscURBQWtCLGNBQWM7QUFDbkQsUUFBSSxDQUFDLGtCQUFrQjtBQUFFO0FBQUEsSUFBUTtBQUNqQyxRQUFJLEtBQUssU0FBUyxpQkFBaUIsWUFBWSxLQUFLLFNBQVMsaUJBQWlCLFNBQVM7QUFDdEYsdUJBQWlCLFlBQVk7QUFDN0IsdUJBQWlCLGFBQWEsWUFBWSxPQUFPLElBQUk7QUFBQSxJQUN0RCxPQUFPO0FBQ04sdUJBQWlCLFlBQVksT0FBTztBQUNwQyx1QkFBaUIsZ0JBQWdCLFVBQVU7QUFBQSxJQUM1QztBQUNBLFFBQUksYUFBYTtBQUNoQixXQUFLLGtCQUFrQjtBQUFBLElBQ3hCO0FBQUEsRUFDRDtBQUFBLEVBRUEsa0JBQWtCLFFBQWtCO0FBQ25DLFFBQUksQ0FBQyxLQUFLLFNBQVMsaUJBQWlCLFFBQVEsQ0FBQyxRQUFRO0FBQUU7QUFBQSxJQUFRO0FBQy9ELFVBQU0sa0JBQWtCLFNBQVMsaUJBQWlCLDZCQUE2QjtBQUMvRSxVQUFNLFFBQVEsS0FBSyxJQUFJLE1BQU0sa0JBQWtCLEVBQUUsT0FBTyxDQUFDLFNBQVMsZ0JBQWdCLHlCQUFPO0FBQ3pGLG9CQUFnQixRQUFRLENBQUMsU0FBUztBQUNqQyxVQUFJLENBQUMsS0FBSyxhQUFhLFdBQVcsR0FBRztBQUFFO0FBQUEsTUFBUTtBQUMvQyxZQUFNLE9BQU8sS0FBSyxhQUFhLFdBQVc7QUFDMUMsWUFBTSxTQUFTLE1BQU0sS0FBSyxDQUFDLFNBQVMsS0FBSyxTQUFTLElBQUk7QUFDdEQsVUFBSSxDQUFFLG1CQUFrQiw0QkFBVTtBQUFFO0FBQUEsTUFBUTtBQUM1QyxVQUFJLFFBQVE7QUFDWCxhQUFLLGNBQWMsT0FBTztBQUMxQixhQUFLLGdCQUFnQixVQUFVO0FBQUEsTUFDaEMsT0FBTztBQUNOLGFBQUssY0FBYyxPQUFPLFdBQVcsT0FBTztBQUM1QyxhQUFLLGFBQWEsWUFBWSxPQUFPLElBQUk7QUFDekMsYUFBSyxhQUFhLGFBQWEsT0FBTyxJQUFJO0FBQUEsTUFDM0M7QUFBQSxJQUNELENBQUM7QUFBQSxFQUNGO0FBQUEsRUFFQSxpQkFBaUI7QUFDaEIsYUFBUyxpQkFBaUIsOEJBQThCLEVBQ3RELFFBQVEsQ0FBQyxZQUF5QjtBQUNsQyxVQUFJLFFBQVE7QUFBUztBQUNyQixjQUFRLFVBQVUsQ0FBQyxVQUFzQixrQkFBa0IsT0FBTyxJQUFJO0FBQUEsSUFDdkUsQ0FBQztBQUFBLEVBQ0g7QUFBQSxFQUVBLFdBQVc7QUFDVixZQUFRLElBQUksK0JBQStCO0FBQzNDLFNBQUssU0FBUyxXQUFXO0FBQ3pCLGFBQVMsS0FBSyxVQUFVLE9BQU8scUJBQXFCO0FBQ3BELGFBQVMsS0FBSyxVQUFVLE9BQU8sdUJBQXVCO0FBQ3RELGFBQVMsS0FBSyxVQUFVLE9BQU8sa0JBQWtCO0FBQ2pELGFBQVMsS0FBSyxVQUFVLE9BQU8sK0JBQStCO0FBQzlELFFBQUksS0FBSyxpQkFBaUI7QUFBRSxXQUFLLGdCQUFnQixZQUFZLFdBQVc7QUFBQSxJQUFHO0FBQzNFLFFBQUksS0FBSyxhQUFhO0FBQ3JCLFdBQUssWUFBWSxZQUFZO0FBQUEsSUFDOUI7QUFBQSxFQUNEO0FBQUEsRUFFQSxNQUFNLGVBQWU7QUFDcEIsVUFBTSxPQUFPLE1BQU0sS0FBSyxTQUFTO0FBQ2pDLFFBQUksTUFBTTtBQUNULFVBQUksS0FBSyw4QkFBOEIsTUFBTTtBQUM1QyxhQUFLLDJCQUEyQjtBQUNoQyxlQUFPLEtBQUs7QUFBQSxNQUNiLFdBQVcsS0FBSyw4QkFBOEIsT0FBTztBQUNwRCxhQUFLLDJCQUEyQjtBQUNoQyxlQUFPLEtBQUs7QUFBQSxNQUNiO0FBQUEsSUFDRDtBQUVBLFNBQUssV0FBVyxPQUFPLE9BQU8sQ0FBQyxHQUFHLGtCQUFrQixJQUFJO0FBQ3hELFFBQUksQ0FBQyxNQUFNO0FBQUU7QUFBQSxJQUFRO0FBQ3JCLFVBQU0sV0FBWSxLQUFhO0FBQy9CLFFBQUksQ0FBQyxVQUFVO0FBQUU7QUFBQSxJQUFRO0FBQ3pCLFNBQUssU0FBUyxrQkFBa0IsT0FBTyxPQUFPLENBQUMsR0FBRyxpQkFBaUIsaUJBQWlCLFFBQVE7QUFBQSxFQUM3RjtBQUFBLEVBRUEsTUFBTSxhQUFhLGNBQXdCO0FBQzFDLFVBQU0sS0FBSyxTQUFTLEtBQUssUUFBUTtBQUVqQyxRQUFLLEVBQUMsS0FBSyxrQkFBa0IsaUJBQWlCLFNBQVMsaUJBQWlCLE9BQU87QUFDOUUsc0JBQWdCLE1BQU0sSUFBSTtBQUFBLElBQzNCO0FBQUEsRUFDRDtBQUVEOzs7QXhEclhPLElBQU0saUJBQU4sY0FBNEIsaUJBQTBCO0FBQUEsRUFDNUQsWUFDYyxTQUNQLFFBQ0Usb0JBQ0QsUUFDTjtBQUNELFVBQU0sU0FBUyxNQUFNO0FBTFI7QUFFTDtBQUNEO0FBQUEsRUFHUjtBQUFBLEVBR0EsY0FBYyxNQUErQjtBQUM1QyxZQUFRO0FBQUEsV0FDRjtBQUNKLGVBQU87QUFBQSxXQUNIO0FBQ0osZUFBTztBQUFBO0FBQUEsRUFFVjtBQUFBLEVBRUEsZUFBZSxXQUE4QjtBQUM1QyxVQUFNLFVBQXFCLENBQUM7QUFDNUIsVUFBTSxrQkFBa0IsVUFBVSxZQUFZO0FBQzlDLFFBQUksUUFBeUIsQ0FBQztBQUM5QixRQUFJLEtBQUssUUFBUTtBQUNoQixjQUFRLEtBQUssT0FBTztBQUFBLElBQ3JCLE9BQU87QUFDTixjQUFRLEtBQUssT0FBTyxJQUFJLE1BQU0sa0JBQWtCLEVBQUUsTUFBTSxHQUFFLEdBQUc7QUFBQSxJQUM5RDtBQUNBLFVBQU0sUUFBUSxDQUFDLFdBQTBCO0FBQ3hDLFVBQ0Msa0JBQWtCLDZCQUNOLE9BQU8sS0FBSyxZQUFZLEVBQUUsU0FBUyxlQUFlLEtBQ2pELE1BQUssa0JBQWtCLG9CQUFxQixDQUFDLEtBQUssT0FBTyxTQUFTLGVBQWUsS0FBSyxDQUFDLE1BQVcsRUFBRSxTQUFTLE9BQU8sSUFBSSxLQUFLLEtBQUsscUJBQXNCLE9BQ3BLO0FBQ0QsZ0JBQVEsS0FBSyxNQUFNO0FBQUEsTUFDcEI7QUFBQSxJQUNELENBQUM7QUFFRCxXQUFPO0FBQUEsRUFDUjtBQUFBLEVBRUEsaUJBQWlCLFFBQWlCLElBQXVCO0FBQ3hELE9BQUcsUUFBUSxPQUFPLElBQUk7QUFBQSxFQUN2QjtBQUFBLEVBRUEsaUJBQWlCLFFBQXVCO0FBQ3ZDLFNBQUssUUFBUSxRQUFRLE9BQU87QUFDNUIsU0FBSyxRQUFRLFFBQVEsT0FBTztBQUM1QixTQUFLLE1BQU07QUFBQSxFQUNaO0FBQ0Q7OztBbUc5RE8sSUFBTSxzQkFBTixNQUF5QjtBQUFBLEVBQXpCO0FBQ0gsU0FBUSxTQUF5RCxDQUFDO0FBQUE7QUFBQSxFQUVsRSxHQUFHLE9BQWUsVUFBZ0M7QUFDOUMsUUFBSSxDQUFDLEtBQUssT0FBTyxRQUFRO0FBQ3JCLFdBQUssT0FBTyxTQUFTLENBQUM7QUFBQSxJQUMxQjtBQUNBLFNBQUssT0FBTyxPQUFPLEtBQUssUUFBUTtBQUFBLEVBQ3BDO0FBQUEsRUFFQSxJQUFJLE9BQWUsVUFBZ0M7QUFDL0MsUUFBSSxDQUFDLEtBQUssT0FBTztBQUFRO0FBRXpCLFNBQUssT0FBTyxTQUFTLEtBQUssT0FBTyxPQUFPLE9BQU8sQ0FBQyxNQUFNLE1BQU0sUUFBUTtBQUFBLEVBQ3hFO0FBQUEsRUFFQSxLQUFLLE9BQWUsTUFBWTtBQUM1QixRQUFJLENBQUMsS0FBSyxPQUFPO0FBQVE7QUFFekIsU0FBSyxPQUFPLE9BQU8sUUFBUSxDQUFDLGFBQWEsU0FBUyxJQUFJLENBQUM7QUFBQSxFQUMzRDtBQUNKOzs7QUNuQk8sSUFBTSxpQkFBTixNQUFvQjtBQUFBLEVBUTFCLFlBQVksYUFBMEIsU0FBbUIsQ0FBQyxHQUFHLGdCQUEwQixDQUFDLEdBQUc7QUFDMUYsU0FBSyxVQUFVLElBQUksb0JBQW1CO0FBQ3RDLFNBQUssY0FBYztBQUNuQixTQUFLLFlBQVksWUFBWSxjQUFjLHVCQUF1QixLQUFLO0FBQ3ZFLFNBQUssU0FBUyxLQUFLLFVBQVUsVUFBVSx5QkFBeUI7QUFDaEUsU0FBSyxlQUFlO0FBQ3BCLFNBQUssVUFBVSxNQUFNO0FBQ3JCLFNBQUssZ0JBQWdCO0FBQUEsRUFDdEI7QUFBQSxFQUVBLEdBQUcsT0FBZSxVQUFnQztBQUNqRCxTQUFLLFFBQVEsR0FBRyxPQUFPLFFBQVE7QUFBQSxFQUNoQztBQUFBLEVBRUEsSUFBSSxPQUFlLFVBQWdDO0FBQ2xELFNBQUssUUFBUSxJQUFJLE9BQU8sUUFBUTtBQUFBLEVBQ2pDO0FBQUEsRUFFQSxBQUFRLEtBQUssT0FBZSxNQUFZO0FBQ3ZDLFNBQUssUUFBUSxLQUFLLE9BQU8sSUFBSTtBQUFBLEVBQzlCO0FBQUEsRUFFQSxVQUFVLFFBQWtCO0FBQzNCLFNBQUssZUFBZTtBQUNwQixTQUFLLFNBQVM7QUFDZCxRQUFJLE9BQU8sV0FBVyxHQUFHO0FBQ3hCLGFBQU8sUUFBUSxDQUFDLFVBQVU7QUFDekIsYUFBSyxXQUFXLEtBQUs7QUFBQSxNQUN0QixDQUFDO0FBQUEsSUFDRjtBQUNBLFNBQUssS0FBSyxVQUFVLEtBQUssTUFBTTtBQUFBLEVBQ2hDO0FBQUEsRUFFQSxpQkFBaUI7QUFDaEIsU0FBSyxPQUFPLE1BQU07QUFBQSxFQUNuQjtBQUFBLEVBRUEsV0FBVyxPQUFlO0FBQ3pCLFNBQUssT0FBTyxXQUFXLGtCQUFrQixDQUFDLFNBQVM7QUFDbEQsVUFBSSxNQUFNLGtCQUFrQixNQUFNLE1BQU07QUFDdkMsYUFBSyxZQUFZO0FBQUEsTUFDbEIsT0FBTztBQUNOLGFBQUssWUFBWTtBQUFBLE1BQ2xCO0FBQ0EsV0FBSyxhQUFhLGFBQWEsS0FBSztBQUNwQyxZQUFNLGFBQWEsS0FBSyxTQUFTLFFBQVEsRUFBRSxLQUFLLDJDQUEyQyxDQUFDO0FBQzVGLFlBQU0sTUFBTTtBQUNaLFlBQU0sYUFBYSxXQUFXLFNBQVMsUUFBUSxFQUFFLEtBQUssNEJBQTRCLENBQUM7QUFDbkYsaUJBQVcsWUFBWTtBQUN2QixpQkFBVyxhQUFhLENBQUMsTUFBTTtBQUM5QixhQUFLLFlBQVksS0FBSztBQUN0QixhQUFLLE9BQU87QUFBQSxNQUNiLENBQUM7QUFBQSxJQUNGLENBQUM7QUFBQSxFQUNGO0FBQUEsRUFFQSxNQUFNLFNBQVMsT0FBZTtBQUM3QixTQUFLLE9BQU8sS0FBSyxLQUFLO0FBQ3RCLFNBQUssV0FBVyxLQUFLO0FBQ3JCLFNBQUssS0FBSyxPQUFPLEtBQUs7QUFDdEIsU0FBSyxLQUFLLFVBQVUsS0FBSyxNQUFNO0FBQUEsRUFDaEM7QUFBQSxFQUVBLGlCQUFpQjtBQUNoQixVQUFNLGNBQWMsS0FBSyxVQUFVLFNBQVMsUUFBUSxFQUFFLEtBQUssK0NBQStDLENBQUM7QUFDM0csVUFBTSxNQUFNO0FBQ1osZ0JBQVksWUFBWTtBQUN4QixnQkFBWSxhQUFhLENBQUMsTUFBTTtBQUM5QixXQUFLLFVBQVUsS0FBSyxhQUFhO0FBQUEsSUFDbkMsQ0FBQztBQUNELFdBQU87QUFBQSxFQUNSO0FBQUEsRUFFQSxZQUFZLE9BQWU7QUFDMUIsU0FBSyxTQUFTLEtBQUssT0FBTyxPQUFPLENBQUMsTUFBTSxNQUFNLEtBQUs7QUFDbkQsU0FBSyxPQUFPLEtBQUssZUFBZSxTQUFTLEVBQUUsT0FBTztBQUNsRCxTQUFLLEtBQUssVUFBVSxLQUFLO0FBQ3pCLFNBQUssS0FBSyxVQUFVLEtBQUssTUFBTTtBQUFBLEVBQ2hDO0FBQ0Q7OztBckc3RU8sSUFBTSxvQkFBcUM7QUFBQSxFQUM5QyxJQUFJO0FBQUEsRUFDSixZQUFZO0FBQUEsRUFDWixPQUFPO0FBQUEsRUFDUCxXQUFXO0FBQUEsRUFDWCxPQUFPO0FBQUEsRUFDUCxjQUFjLENBQUMsVUFBVSxVQUFVO0FBQUEsRUFDbkMsT0FBTztBQUFBLEVBQ1AsZ0JBQWdCO0FBQUEsRUFDaEIsUUFBUTtBQUFBLEVBQ1IsV0FBVztBQUFBLEVBQ1gsa0JBQWtCO0FBQUEsRUFDbEIsdUJBQXVCO0FBQUEsRUFDdkIsc0JBQXNCO0FBQUEsRUFDdEIsaUJBQWlCO0FBQUEsRUFDakIscUJBQXFCO0FBQUEsRUFDckIsZ0JBQWdCO0FBQ3BCO0FBRU8sSUFBTSxlQUFOLGNBQTBCLG1DQUFpQjtBQUFBLEVBRzlDLFlBQVksUUFBOEI7QUFDdEMsVUFBTSxPQUFPLEtBQUssTUFBTTtBQUFBLEVBQzVCO0FBQUEsRUFFQSxVQUFVO0FBQ04sVUFBTSxFQUFFLGdCQUFnQjtBQUV4QixTQUFLLFVBQVUsS0FBSyxRQUFRLEtBQUssSUFBSTtBQUUzQyxnQkFBWSxNQUFNO0FBQ1osMkJBQXVCLGFBQWEsS0FBSyxPQUFPLFVBQVUsS0FBSyxRQUFRLEtBQUssT0FBTyxVQUFVLEtBQUssU0FBUyxRQUFXLFFBQVcsUUFBVyxJQUFJO0FBQUEsRUFFcEo7QUFDSjtBQUVBLHNDQUE2QyxXQUF3QixNQUF3QixRQUFrRCxpQkFBbUMsU0FBMkIsSUFBa0IsS0FBb0MsTUFBcUIsYUFBZ0MsT0FBZ0M7QUFqRHhWO0FBa0RJLE1BQUksMEJBQVEsU0FBUyxFQUNoQixRQUFRLGdCQUFnQixFQUN4QixRQUFRLHFDQUFxQyxFQUM3QyxVQUFVLENBQUMsV0FDUixPQUNLLFNBQVMsS0FBSyxTQUFTLEVBQ3ZCLFNBQVMsT0FBTyxVQUFVO0FBQ3ZCLFNBQUssWUFBWTtBQUNqQixtQkFBZSxXQUFXLE1BQU0sUUFBUSxpQkFBaUIsSUFBSSxLQUFLLElBQUk7QUFBRTtBQUN4RSxZQUFRLFdBQVcsTUFBTSxRQUFRLGlCQUFpQixTQUFTLElBQUksS0FBSyxNQUFNLGFBQWEsS0FBSztBQUFBLEVBQ2hHLENBQUMsQ0FDVDtBQUNKLE1BQUksS0FBSyxXQUFXO0FBQ2hCLFFBQUksMEJBQVEsU0FBUyxFQUNoQixRQUFRLE9BQU8sRUFDZixRQUFRLHlDQUF5QyxFQUNqRCxRQUFRLENBQUMsU0FDTixLQUNLLFNBQVMsOEJBQU0sVUFBUyx5QkFBeUIsRUFDakQsU0FBUyxPQUFPLFVBQVU7QUFDdkIsV0FBSyxRQUFRO0FBQ2IscUJBQWUsV0FBVyxNQUFNLFFBQVEsaUJBQWlCLElBQUksS0FBSyxJQUFJO0FBQUU7QUFBQSxJQUM1RSxDQUFDLENBQ1Q7QUFBQSxFQUNSO0FBRUEsUUFBTSxvQkFBb0IsSUFBSSwwQkFBUSxTQUFTLEVBQzFDLFFBQVEsOEJBQThCLEVBQ3RDLFFBQVEseUNBQXlDLEVBQ2pELFVBQVUsQ0FBQyxXQUFXO0FBQ25CLFFBQUksZUFBYyxPQUFPLFNBQVMsUUFBUSxLQUFLO0FBQy9DLFdBQ0ssZUFBZSxhQUFhLEVBQzVCLFNBQVMsOEJBQU0sZUFBYyxFQUFFLEVBQy9CLFNBQVMsT0FBTyxVQUFVO0FBQ3ZCLFVBQUksQ0FBRSxRQUFPLElBQUksTUFBTSxzQkFBc0IsS0FBSyxhQUFhLDhCQUFZLFVBQVU7QUFBSTtBQUN6RixXQUFLLGFBQWE7QUFDbEIscUJBQWUsV0FBVyxNQUFNLFFBQVEsaUJBQWlCLElBQUksS0FBSyxJQUFJO0FBQUU7QUFBQSxJQUM1RSxDQUFDO0FBQUEsRUFDVCxDQUFDO0FBRUwsb0JBQWtCLFVBQVUsVUFBVSxJQUFJLHlCQUF5QjtBQUVuRSxNQUFJLDBCQUFRLFNBQVMsRUFDaEIsUUFBUSxnQkFBZ0IsRUFDeEIsUUFBUSxvREFBb0QsRUFDNUQsWUFBWSxDQUFDLGFBQ1YsU0FDSyxVQUFVLFFBQVEsTUFBTSxFQUN4QixVQUFVLFlBQVksVUFBVSxFQUNoQyxTQUFTLDhCQUFNLFVBQVMsTUFBTSxFQUM5QixTQUFTLE9BQU8sVUFBa0I7QUFDL0IsU0FBSyxRQUFRO0FBQ2IsbUJBQWUsV0FBVyxNQUFNLFFBQVEsaUJBQWlCLElBQUksS0FBSyxJQUFJO0FBQ3RFLFlBQVEsV0FBVyxNQUFNLFFBQVEsaUJBQWlCLFNBQVMsSUFBSSxLQUFLLE1BQU0sYUFBYSxLQUFLO0FBQUEsRUFDaEcsQ0FBQyxDQUNUO0FBRUosTUFBSSxLQUFLLFVBQVUsWUFBWTtBQUMzQixRQUFJLDBCQUFRLFNBQVMsRUFDaEIsUUFBUSwyQkFBMkIsRUFDbkMsUUFBUSxzRkFBc0YsRUFDOUYsVUFBVSxDQUFDLFdBQ1IsT0FDSyxTQUFTLEtBQUssb0JBQW9CLEVBQ2xDLFNBQVMsT0FBTyxVQUFVO0FBQ3ZCLFdBQUssdUJBQXVCO0FBQzVCLHFCQUFlLFdBQVcsTUFBTSxRQUFRLGlCQUFpQixJQUFJLEtBQUssSUFBSTtBQUFFO0FBQUEsSUFDNUUsQ0FBQyxDQUNUO0FBQUEsRUFDUjtBQUVBLFFBQU0sVUFBVSxJQUFJLDBCQUFRLFNBQVM7QUFDckMsVUFBUSxRQUFRLGVBQWU7QUFDL0IsUUFBTSxPQUFPLElBQUksZUFBYyxRQUFRLFdBQVcsS0FBSyxnQkFBZ0IsQ0FBQyxHQUFHLENBQUMsWUFBWSxRQUFRLENBQUM7QUFDakcsT0FBSyxHQUFHLFVBQVUsQ0FBQyxXQUFXO0FBQzFCLFNBQUssZUFBZTtBQUNwQixtQkFBZSxXQUFXLE1BQU0sUUFBUSxpQkFBaUIsSUFBSSxLQUFLLElBQUk7QUFDdEUsWUFBUSxXQUFXLE1BQU0sUUFBUSxpQkFBaUIsU0FBUyxJQUFJLEtBQUssTUFBTSxhQUFhLEtBQUs7QUFBQSxFQUNoRyxDQUFDO0FBRUQsTUFBSyxxQ0FBTSxpQkFBTixtQkFBb0IsV0FBVSxLQUFLLEtBQUssQ0FBQyxZQUFLLGlCQUFMLG1CQUFtQixTQUFTLFNBQVE7QUFDOUUsWUFBUSxZQUFZLENBQUMsYUFBYTtBQUM5QixVQUFJLENBQUMsS0FBSztBQUFjLGFBQUssZUFBZ0Isa0JBQWtCLG9CQUFxQixPQUFPLFNBQVMsZ0JBQWdCLGVBQWUsT0FBTyxTQUFTLGdCQUFnQixDQUFDO0FBQ3BLLFdBQUssZUFBZSxLQUFLLGFBQWEsSUFBSSxDQUFDLFNBQWlCLEtBQUssWUFBWSxDQUFDO0FBQzlFLFlBQU0sVUFBVTtBQUFBLFFBQ1osRUFBRSxPQUFPLFlBQVksT0FBTyxXQUFXO0FBQUEsUUFDdkMsRUFBRSxPQUFPLFVBQVUsT0FBTyxTQUFTO0FBQUEsUUFDbkMsRUFBRSxPQUFPLFVBQVUsT0FBTyxTQUFTO0FBQUEsUUFDbkMsRUFBRSxPQUFPLE9BQU8sT0FBTyxNQUFNO0FBQUEsUUFDN0IsRUFBRSxPQUFPLFNBQVMsT0FBTyxRQUFRO0FBQUEsUUFDakMsRUFBRSxPQUFPLFNBQVMsT0FBTyxRQUFRO0FBQUEsUUFDakMsRUFBRSxPQUFPLFNBQVMsT0FBTyxRQUFRO0FBQUEsUUFDakMsRUFBRSxPQUFPLFNBQVMsT0FBTyx1QkFBdUI7QUFBQSxRQUNoRCxFQUFFLE9BQU8sT0FBTyxPQUFPLGlCQUFpQjtBQUFBLE1BQzVDO0FBRUEsY0FBUSxRQUFRLENBQUMsV0FBVztBQW5KeEM7QUFvSmdCLFlBQUksQ0FBQyxhQUFLLGlCQUFMLG9CQUFtQixTQUFTLE9BQU8sU0FBd0I7QUFDNUQsbUJBQVMsVUFBVSxPQUFPLE9BQU8sT0FBTyxLQUFLO0FBQUEsUUFDakQ7QUFBQSxNQUNKLENBQUM7QUFDRCxlQUFTLFVBQVUsS0FBSyxHQUFHO0FBQzNCLGVBQVMsU0FBUyxHQUFHO0FBQ3JCLGVBQVMsU0FBUyxPQUFPLFVBQVU7QUExSi9DO0FBMkpnQixZQUFJLFVBQVUsT0FBTztBQUNqQixlQUFLLGVBQWUsWUFBSyxpQkFBTCxvQkFBbUIsT0FBTyxDQUFDLFNBQWlCLFNBQVM7QUFDekUsZUFBSyxVQUFVLEtBQUssWUFBWTtBQUFBLFFBQ3BDO0FBQ0EsY0FBTSxLQUFLLFNBQVMsTUFBTSxZQUFZLENBQUM7QUFDdkMsdUJBQWUsV0FBVyxNQUFNLFFBQVEsaUJBQWlCLElBQUksS0FBSyxJQUFJO0FBQ3RFLGdCQUFRLFdBQVcsTUFBTSxRQUFRLGlCQUFpQixTQUFTLElBQUksS0FBSyxNQUFNLGFBQWEsS0FBSztBQUFBLE1BQ2hHLENBQUM7QUFBQSxJQUNMLENBQUM7QUFBQSxFQUNMO0FBRUEsTUFBSTtBQUNKLGFBQUssaUJBQUwsbUJBQW1CLFFBQVEsQ0FBQyxTQUFpQjtBQUN6QyxhQUFTLFlBQVksU0FBUyxhQUFjLGlCQUFpQixPQUFRO0FBQUEsRUFDekU7QUFFQSxNQUFJLGdCQUFnQjtBQUNoQixRQUFJLDBCQUFRLFNBQVMsRUFDaEIsUUFBUSxrQkFBa0IsRUFDMUIsUUFBUSw0REFBNEQsRUFDcEUsVUFBVSxDQUFDLFdBQVc7QUFDbkIsYUFDSyxTQUFTLEtBQUssY0FBYyxFQUM1QixTQUFTLE9BQU8sVUFBVTtBQUN2QixhQUFLLGlCQUFpQjtBQUN0Qix1QkFBZSxXQUFXLE1BQU0sUUFBUSxpQkFBaUIsSUFBSSxLQUFLLElBQUk7QUFBQSxNQUMxRSxDQUFDO0FBQUEsSUFDVCxDQUFDO0FBQUEsRUFDVDtBQUVBLE1BQUksMEJBQVEsU0FBUyxFQUNoQixRQUFRLG1CQUFtQixFQUMzQixRQUFRLGtHQUFrRyxFQUMxRyxVQUFVLENBQUMsV0FDUixPQUNLLFNBQVMsS0FBSyxlQUFlLEVBQzdCLFNBQVMsT0FBTyxVQUFVO0FBQ3ZCLFNBQUssa0JBQWtCO0FBQ3ZCLG1CQUFlLFdBQVcsTUFBTSxRQUFRLGlCQUFpQixJQUFJLEtBQUssSUFBSTtBQUFBLEVBQzFFLENBQUMsQ0FDVDtBQUVKLE1BQUksMEJBQVEsU0FBUyxFQUNoQixRQUFRLFlBQVksRUFDcEIsUUFBUSwwQkFBMEIsRUFDbEMsVUFBVSxDQUFDLFdBQ1IsT0FDSyxTQUFTLDhCQUFNLFVBQVMsQ0FBQyxFQUN6QixVQUFVLEdBQUcsSUFBSSxDQUFDLEVBQ2xCLGtCQUFrQixFQUNsQixTQUFTLE9BQU8sVUFBVTtBQUN2QixTQUFLLFFBQVE7QUFDYixtQkFBZSxXQUFXLE1BQU0sUUFBUSxpQkFBaUIsSUFBSSxLQUFLLElBQUk7QUFBQSxFQUMxRSxDQUFDLENBQ1Q7QUFFSixNQUFJLDBCQUFRLFNBQVMsRUFDaEIsUUFBUSxlQUFlLEVBQ3ZCLFFBQVEsdUNBQXVDLEVBQy9DLFlBQVksQ0FBQyxhQUNWLFNBQ0ssVUFBVSxRQUFRLE1BQU0sRUFDeEIsVUFBVSxXQUFXLFNBQVMsRUFDOUIsVUFBVSxZQUFZLFVBQVUsRUFDaEMsU0FBUyw4QkFBTSxXQUFVLE1BQU0sRUFDL0IsU0FBUyxPQUFPLFVBQTJDO0FBQ3hELFNBQUssU0FBUztBQUNkLG1CQUFlLFdBQVcsTUFBTSxRQUFRLGlCQUFpQixJQUFJLEtBQUssSUFBSTtBQUFBLEVBQzFFLENBQUMsQ0FDVCxFQUNDLFlBQVksQ0FBQyxhQUFhO0FBQ3ZCLGFBQ0ssVUFBVSxRQUFRLFlBQVksRUFDOUIsVUFBVSxPQUFPLFdBQVc7QUFDakMsUUFBSSxLQUFLLFdBQVc7QUFDaEIsZUFBUyxTQUFTLEtBQUs7QUFBQSxJQUMzQixPQUFPO0FBQ0gsZUFBUyxTQUFTLE1BQU07QUFBQSxJQUM1QjtBQUNBLGFBQVMsU0FBUyxPQUFPLFVBQVU7QUFDL0IsVUFBSSxVQUFVLFFBQVE7QUFDbEIsYUFBSyxZQUFZO0FBQUEsTUFDckIsT0FBTztBQUNILGFBQUssWUFBWTtBQUFBLE1BQ3JCO0FBQ0EscUJBQWUsV0FBVyxNQUFNLFFBQVEsaUJBQWlCLElBQUksS0FBSyxJQUFJO0FBQUEsSUFDMUUsQ0FBQztBQUFBLEVBQ0wsQ0FBQztBQUVMLE1BQUksS0FBSyxVQUFVLFFBQVE7QUFDdkIsUUFBSSwwQkFBUSxTQUFTLEVBQ2hCLFFBQVEsdUVBQXVFLEVBQy9FLFFBQVEsaUpBQWtKLEVBQzFKLFVBQVUsQ0FBQyxXQUFXO0FBQ25CLGFBQ0ssU0FBUyxLQUFLLGdCQUFnQixFQUM5QixTQUFTLE9BQU8sVUFBVTtBQUN2QixhQUFLLG1CQUFtQjtBQUN4QixhQUFLLHdCQUF3QjtBQUM3Qix1QkFBZSxXQUFXLE1BQU0sUUFBUSxpQkFBaUIsSUFBSSxLQUFLLElBQUk7QUFDdEUsZ0JBQVEsV0FBVyxNQUFNLFFBQVEsaUJBQWlCLFNBQVMsSUFBSSxLQUFLLE1BQU0sYUFBYSxLQUFLO0FBQUEsTUFDaEcsQ0FBQztBQUFBLElBQ1QsQ0FBQztBQUVMLFFBQUksS0FBSyxrQkFBa0I7QUFDdkIsVUFBSSwwQkFBUSxTQUFTLEVBQ2hCLFFBQVEsNkVBQTZFLEVBQ3JGLFVBQVUsQ0FBQyxXQUFXO0FBQ25CLGVBQ0ssU0FBUyxLQUFLLHFCQUFxQixFQUNuQyxTQUFTLE9BQU8sVUFBVTtBQUN2QixlQUFLLHdCQUF3QjtBQUM3Qix5QkFBZSxXQUFXLE1BQU0sUUFBUSxpQkFBaUIsSUFBSSxLQUFLLElBQUk7QUFBQSxRQUMxRSxDQUFDO0FBQUEsTUFDVCxDQUFDO0FBQUEsSUFDVDtBQUFBLEVBQ0o7QUFFQSxNQUFJLEtBQUssVUFBVSxZQUFZO0FBQzNCLFFBQUksMEJBQVEsU0FBUyxFQUNoQixRQUFRLHdDQUF3QyxFQUNoRCxRQUFRLGlIQUFpSCxFQUN6SCxVQUFVLENBQUMsV0FBVztBQUNuQixhQUNLLFNBQVMsS0FBSyxtQkFBbUIsRUFDakMsU0FBUyxPQUFPLFVBQVU7QUFDdkIsYUFBSyxzQkFBc0I7QUFDM0IsdUJBQWUsV0FBVyxNQUFNLFFBQVEsaUJBQWlCLElBQUksS0FBSyxJQUFJO0FBQUEsTUFDMUUsQ0FBQztBQUFBLElBQ1QsQ0FBQztBQUVMLFFBQUksMEJBQVEsU0FBUyxFQUNoQixRQUFRLHFDQUFxQyxFQUM3QyxRQUFRLHVFQUF1RSxFQUMvRSxVQUFVLENBQUMsV0FBVztBQUNuQixhQUNLLFNBQVMsS0FBSyxjQUFjLEVBQzVCLFNBQVMsT0FBTyxVQUFVO0FBQ3ZCLGFBQUssaUJBQWlCO0FBQ3RCLHVCQUFlLFdBQVcsTUFBTSxRQUFRLGlCQUFpQixJQUFJLEtBQUssSUFBSTtBQUFBLE1BQzFFLENBQUM7QUFBQSxJQUNULENBQUM7QUFBQSxFQUNUO0FBQ0o7QUFFQSw4QkFBOEIsV0FBd0IsTUFBd0IsUUFBa0QsaUJBQW1DLElBQWtCLEtBQW9DLE1BQXFCO0FBQzFPLE1BQUksQ0FBQyxLQUFLLElBQUk7QUFDVixXQUFPLE9BQU8sYUFBYTtBQUFBLEVBQy9CO0FBRUEsTUFBSSxNQUFNLEtBQUs7QUFDWCxVQUFNLFdBQVcsUUFBUSxLQUFLLElBQUksSUFBSTtBQUFBLEVBQzFDO0FBRUEsTUFBSSxNQUFNO0FBQ04sVUFBTSxlQUFlLFFBQVEsS0FBSyxJQUFJLE1BQU0sSUFBSTtBQUFBLEVBQ3BEO0FBQ0EsU0FBTyxtQkFBbUI7QUFDOUI7QUFFQSxpQkFBaUIsV0FBd0IsTUFBd0IsUUFBa0QsaUJBQW1DLFNBQTJCLElBQWtCLEtBQW9DLE1BQXFCLGFBQWdDLE9BQWdDO0FBQ3hULE1BQUksTUFBTTtBQUNOLGdCQUFZLFVBQVU7QUFBQSxFQUMxQjtBQUNBLFVBQVEsV0FBVyxNQUFNLFFBQVEsaUJBQWlCLFNBQVMsSUFBSSxLQUFLLE1BQU0sYUFBYSxLQUFLO0FBQ2hHOzs7QUZ2VE8sSUFBTSx5QkFBTixjQUFxQyx3QkFBTTtBQUFBLEVBT2pELFlBQVksTUFBVSxRQUFrRCxNQUF3QixLQUEwQyxJQUF3QixpQkFBbUM7QUFoQnRNO0FBaUJFLFVBQU0sSUFBRztBQUNULFNBQUssU0FBUztBQUNkLFNBQUssTUFBTTtBQUNYLFFBQUksQ0FBQyxNQUFNO0FBQ1YsV0FBSyxPQUFPLEtBQUs7QUFBQSxJQUNsQixXQUFXLEtBQUs7QUFDZixZQUFNLGdCQUFlLDhCQUFNLGlCQUFnQixnQkFBZ0IsZ0JBQWdCLENBQUMsVUFBVSxVQUFVO0FBQ2hHLFdBQUssT0FBTztBQUFBLFFBQ1gsSUFBSSxtQ0FBTSxPQUFOLFlBQVksT0FBTyxXQUFXO0FBQUEsUUFDbEMsWUFBWSxtQ0FBTSxlQUFOLFlBQW9CLHdCQUF3QixJQUFJLFVBQVU7QUFBQSxRQUN0RSxPQUFPLG1DQUFNLFVBQU4sWUFBZSxnQkFBZ0I7QUFBQSxRQUN0QyxXQUFXLG1DQUFNLGNBQU4sWUFBbUIsZ0JBQWdCO0FBQUEsUUFDOUMsT0FBTyxtQ0FBTSxVQUFOLFlBQWUsZ0JBQWdCO0FBQUEsUUFDdEMsT0FBTyxtQ0FBTSxVQUFOLFlBQWU7QUFBQSxRQUN0QixjQUFjLGNBQWEsSUFBSSxDQUFDLFNBQVMsS0FBSyxZQUFZLENBQUM7QUFBQSxRQUMzRCxnQkFBZ0IsbUNBQU0sbUJBQU4sWUFBd0IsZ0JBQWdCO0FBQUEsUUFDeEQsUUFBUSxtQ0FBTSxXQUFOLFlBQWdCLGdCQUFnQjtBQUFBLFFBQ3hDLFdBQVcsbUNBQU0sY0FBTixZQUFtQixnQkFBZ0I7QUFBQSxRQUM5QyxrQkFBa0IsbUNBQU0scUJBQU4sWUFBMEIsZ0JBQWdCO0FBQUEsUUFDNUQsdUJBQXVCLG1DQUFNLDBCQUFOLFlBQStCLGdCQUFnQjtBQUFBLFFBQ3RFLHNCQUFzQixtQ0FBTSx5QkFBTixZQUE4QixnQkFBZ0I7QUFBQSxRQUNwRSxpQkFBaUIsbUNBQU0sb0JBQU4sWUFBeUIsZ0JBQWdCO0FBQUEsUUFDMUQscUJBQXFCLG1DQUFNLHdCQUFOLFlBQTZCLGdCQUFnQjtBQUFBLFFBQ2xFLGdCQUFnQixtQ0FBTSxtQkFBTixZQUF3QixnQkFBZ0I7QUFBQSxNQUN6RDtBQUFBLElBQ0Q7QUFDQSxRQUFJLEtBQUs7QUFDUixXQUFLLE1BQU07QUFBQSxJQUNaO0FBQ0EsUUFBSSxJQUFJO0FBQ1AsV0FBSyxLQUFLO0FBQUEsSUFDWDtBQUVBLGVBQVcsS0FBSyxRQUFRLEtBQUssS0FBSyxLQUFLLElBQUksS0FBSyxJQUFJO0FBQUEsRUFDckQ7QUFBQSxFQUVBLFNBQVM7QUFDUixVQUFNLEVBQUUsY0FBYztBQUN0QixTQUFLLFFBQVEsV0FBVyxLQUFLLE1BQU0sS0FBSyxRQUFRLEtBQUssaUJBQWlCLEtBQUssU0FBUyxLQUFLLElBQUksS0FBSyxHQUFHO0FBQUEsRUFDdEc7QUFBQSxFQUVBLFFBQVEsV0FBd0IsTUFBd0IsUUFBa0QsaUJBQW1DLFNBQTJCLElBQWtCLEtBQW9DLE1BQXFCLGFBQTBCLE9BQWdDO0FBQzVTLFlBQVEsc0JBQVE7QUFDaEIsY0FBVSxNQUFNO0FBRWhCLGNBQVUsaUJBQWlCLFdBQVcsQ0FBQyxNQUFNO0FBQzVDLFVBQUksRUFBRSxRQUFRLFNBQVM7QUFDdEIsY0FBTSxNQUFNO0FBQUEsTUFDYjtBQUFBLElBQ0QsQ0FBQztBQUNELFFBQUksQ0FBQyxNQUFNLGlCQUFpQjtBQUMzQixnQkFBVSxTQUFTLE1BQU0sRUFBRSxNQUFNLDJCQUEyQixDQUFDO0FBQUEsSUFDOUQsT0FBTztBQUNOLGdCQUFVLFNBQVMsTUFBTSxFQUFFLE1BQU0sbUNBQW1DLENBQUM7QUFBQSxJQUN0RTtBQUVBLDJCQUF1QixXQUFXLE1BQU0sUUFBUSxpQkFBaUIsU0FBUyxJQUFJLEtBQUssUUFBVyxRQUFXLEtBQUs7QUFBQSxFQUMvRztBQUFBLEVBRUEsVUFBVTtBQUNULFVBQU0sRUFBRSxjQUFjO0FBQ3RCLGNBQVUsTUFBTTtBQUFBLEVBQ2pCO0FBQ0Q7OztBd0doRkEsd0JBQW9IO0FBYTdHLElBQU0sdUJBQU4sTUFBMkI7QUFBQSxFQVM5QixZQUFZLFFBQWtELEtBQW1DLE1BQW1CLE1BQXdCLGVBQXlCLGdCQUFnQztBQURyTSwwQkFBaUMsQ0FBQztBQUU5QixTQUFLLFNBQVM7QUFDZCxTQUFLLGlCQUFpQjtBQUN0QixTQUFLLGdCQUFnQjtBQUNyQixTQUFLLFNBQVMsSUFBSTtBQUNsQixTQUFLLE9BQU87QUFDWixTQUFLLE9BQU87QUFBQSxFQUNoQjtBQUFBLEVBRUEsc0JBQXNCO0FBQ2xCLFNBQUssZUFBZSxRQUFRLENBQUMsZUFBZTtBQUN4QyxpQkFBVztBQUFBLElBQ2YsQ0FBQztBQUNELFNBQUssaUJBQWlCLENBQUM7QUFBQSxFQUMzQjtBQUFBLEVBRUEsTUFBTSxxQkFBcUI7QUFDdkIsU0FBSyxvQkFBb0I7QUFDekIsVUFBTSxTQUFTLEtBQUs7QUFDcEIsVUFBTSxNQUFNLEtBQUssZUFBZTtBQUNoQyxVQUFNLE9BQU8sS0FBSyxlQUFlO0FBQ2pDLFVBQU0sT0FBTyxLQUFLLGVBQWU7QUFDakMsVUFBTSxpQkFBaUIsS0FBSztBQUM1QixRQUFJLFNBQTZCO0FBQ2pDLFFBQUksa0JBQWtCLHNCQUFzQjtBQUN4QyxlQUFTLE1BQU0sS0FBSyxZQUFZLE1BQU07QUFBQSxJQUMxQztBQUNBLFFBQUksZ0JBQWdCLGlDQUFRO0FBQzVCLFVBQU0sU0FBUyxJQUFJO0FBQ25CLFVBQU0sZUFBZSxlQUFlO0FBQ3BDLGlEQUFjO0FBQ2QsUUFBSSxDQUFDO0FBQWM7QUFFbkIsUUFBSSxVQUFVLE9BQU8sSUFBSSxNQUFNLHNCQUFzQixLQUFLLFVBQVU7QUFDcEUsUUFBSSxDQUFDLFdBQVcsS0FBSyxXQUFXLEtBQUssS0FBSyxJQUFJO0FBQzFDLFVBQUksSUFBSSxXQUFXLFNBQVMsR0FBRyxHQUFHO0FBQzlCLGtCQUFVLE9BQU8sSUFBSSxNQUFNLHNCQUFzQix5QkFBd0IsSUFBSSxVQUFVLENBQUM7QUFBQSxNQUM1RixPQUFPO0FBQ0gsYUFBSyxhQUFhO0FBQ2xCLGtCQUFVLE9BQU8sSUFBSSxNQUFNLHNCQUFzQixHQUFHO0FBQUEsTUFDeEQ7QUFBQSxJQUNKO0FBRUEsUUFBSSxDQUFDLGlCQUFpQixDQUFDO0FBQVM7QUFHaEMsVUFBTSxtQkFBbUIsb0NBQVMsU0FBUTtBQUUxQyxvQkFBZ0IsU0FBUyxpQkFBaUIsc0JBQXNCLEVBQUU7QUFDbEUsUUFBSSxDQUFDLGVBQWU7QUFDaEIsc0JBQWdCLEtBQUssVUFBVTtBQUFBLFFBQzNCLEtBQUs7QUFBQSxNQUNULENBQUM7QUFBQSxJQUNMO0FBRUEsVUFBTSxtQkFBbUIsY0FBYyxVQUFVLElBQUk7QUFFckQscUJBQWlCLGlCQUFpQixzQkFBc0IsRUFBRSxRQUFRLENBQUMsT0FBTztBQS9FbEY7QUFnRlksWUFBTSxVQUFTLE9BQU8sSUFBSSxNQUFNLHNCQUFzQixHQUFHLGFBQWEsV0FBVyxLQUFLLEVBQUU7QUFDeEYsVUFBSSxDQUFFLG9CQUFrQjtBQUFVO0FBRWxDLFVBQUksS0FBSyxnQkFBZ0I7QUFDckIsZ0JBQU8sWUFBWTtBQUNuQixXQUFHLFVBQVUsSUFBSSxjQUFjO0FBQUEsTUFDbkMsT0FBTztBQUNILFlBQUksS0FBSyxzQkFBc0I7QUFDM0IsY0FBSSxRQUFPLFdBQVc7QUFDbEIsZUFBRyxVQUFVLElBQUksY0FBYztBQUFBLFVBQ25DLE9BQU87QUFDSCxlQUFHLFVBQVUsT0FBTyxjQUFjO0FBQUEsVUFDdEM7QUFBQSxRQUNKLE9BQU87QUFDSCxjQUFJLFNBQUcsa0JBQUgsbUJBQWtCLFVBQVUsU0FBUyxpQkFBaUI7QUFDdEQsb0JBQU8sWUFBWTtBQUFBLFVBQ3ZCLE9BQU87QUFDSCxvQkFBTyxZQUFZO0FBQUEsVUFDdkI7QUFBQSxRQUNKO0FBQUEsTUFDSjtBQUVBLFVBQUksR0FBRyxVQUFVLFNBQVMsaUJBQWlCLEdBQUc7QUFDMUMsWUFBSSxrQkFBa0IsbUJBQW1CO0FBQ3JDLGdCQUFNLGFBQWEsY0FBYyxRQUFRLFFBQU8sSUFBSTtBQUNwRCxjQUFJLFlBQVk7QUFBRSwyQkFBZSxjQUFjLEtBQUssV0FBVyxJQUFJO0FBQUEsVUFBRztBQUFBLFFBQzFFO0FBQUEsTUFDSjtBQUFBLElBQ0osQ0FBQztBQUVELFVBQU0sOEJBQThCLEtBQUssU0FBUyxNQUFNLEtBQUssbUJBQW1CLEdBQUcsR0FBRztBQUV0RixVQUFNLG9CQUFvQixNQUFNO0FBQzVCLGtDQUE0QjtBQUFBLElBQ2hDO0FBRUEsU0FBSyxlQUFlLEtBQUssTUFBTTtBQUMzQixxQkFBZSxJQUFJLGdCQUFnQixpQkFBaUI7QUFBQSxJQUN4RCxDQUFDO0FBRUQsbUJBQWUsR0FBRyxnQkFBZ0IsaUJBQWlCO0FBRW5ELFFBQUksbUJBQW1CLDJCQUFTO0FBQzVCLFlBQU0sS0FBSyxTQUFTLFFBQVEsVUFBVSxjQUFjLGdCQUFnQixnQkFBZ0I7QUFBQSxJQUN4RjtBQUVBLHFCQUFpQixpQkFBaUIsb0JBQW9CLEVBQUUsUUFBUSxDQUFDLE9BQU87QUFDcEUsVUFBSSxjQUFjLGFBQWE7QUFDM0IsV0FBRyxVQUFVLE1BQU07QUFoSW5DO0FBaUlvQixnQkFBTSxPQUFPLFNBQUcsa0JBQUgsbUJBQWtCLGFBQWE7QUFDNUMsY0FBSSxDQUFDO0FBQU07QUFDWCxnQkFBTSxVQUFTLE9BQU8sSUFBSSxNQUFNLHNCQUFzQixJQUFJO0FBQzFELGVBQUssb0JBQW9CLElBQUksUUFBUSxNQUFNLEtBQUssZUFBZSxrQkFBa0IsZ0JBQWdCLE9BQU07QUFBQSxRQUMzRztBQUFBLE1BQ0o7QUFBQSxJQUNKLENBQUM7QUFBQSxFQUNMO0FBQUEsRUFFQSxTQUFTLE1BQWdCLE1BQWM7QUFDbkMsUUFBSTtBQUNKLFdBQU8sSUFBSSxTQUFnQjtBQUN2QixtQkFBYSxPQUFPO0FBQ3BCLGdCQUFVLE9BQU8sV0FBVyxNQUFNLEtBQUssTUFBTSxNQUFNLElBQUksR0FBRyxJQUFJO0FBQUEsSUFDbEU7QUFBQSxFQUNKO0FBQUEsRUFFQSxNQUFNLFNBQVMsT0FBd0IsaUJBQThCLGdCQUFnQyxrQkFBMEI7QUFDM0gsVUFBTSxTQUFTLGVBQWU7QUFDOUIsVUFBTSxXQUFXLE1BQU0sZUFBZSxZQUFZLE9BQU8sUUFBUSxrQkFBa0IsZUFBZSxLQUFLLE9BQU8sZUFBZSxhQUFhO0FBQzFJLFVBQU0sY0FBYyxlQUFlLFVBQVUsUUFBUTtBQUVyRCxVQUFNLFVBQVUsWUFBWSxPQUFPLFdBQVMsaUJBQWlCLHlCQUFPO0FBQ3BFLFVBQU0sYUFBYSxZQUFZLE9BQU8sV0FBUyxpQkFBaUIsdUJBQUs7QUFFckUsZUFBVyxTQUFTLFNBQVM7QUFDekIsWUFBTSxLQUFLLGVBQWUsUUFBUSxPQUFPLGdCQUFnQixpQkFBaUIsZ0JBQWdCO0FBQUEsSUFDOUY7QUFFQSxlQUFXLFNBQVMsWUFBWTtBQUM1QixZQUFNLEtBQUssYUFBYSxRQUFRLE9BQU8sZ0JBQWdCLGVBQWU7QUFBQSxJQUMxRTtBQUFBLEVBRUo7QUFBQSxFQUVBLE1BQU0sb0JBQW9CLElBQWlCLFFBQWtELE1BQXdCLGVBQXlCLGtCQUEwQixnQkFBZ0MsUUFBcUQ7QUFwS2pRO0FBcUtRLE9BQUcsVUFBVSxPQUFPLGNBQWM7QUFDbEMsUUFBSSxHQUFHLFVBQVUsU0FBUyxjQUFjLEdBQUc7QUFDdkMsVUFBSSxDQUFFLG1CQUFrQjtBQUFVO0FBQ2xDLGFBQU8sWUFBWTtBQUNuQiwyQkFBRyxrQkFBSCxtQkFBa0Isa0JBQWxCLG1CQUFpQyxXQUFXLE9BQTVDLG1CQUFnRDtBQUFBLElBQ3BELE9BQU87QUFDSCxVQUFJLENBQUUsbUJBQWtCO0FBQVU7QUFDbEMsYUFBTyxZQUFZO0FBQ25CLFlBQU0sZ0JBQWdCLFNBQUcsa0JBQUgsbUJBQWtCO0FBQ3hDLFVBQUksQ0FBQztBQUFlO0FBQ3BCLFlBQU0sa0JBQWtCLGNBQWMsVUFBVSxFQUFFLEtBQUsseUNBQXlDLENBQUM7QUFDakcsVUFBSSxRQUFRLGVBQWUsVUFBVSxPQUFPLFFBQVE7QUFDcEQsY0FBUSxNQUFNLGVBQWUsWUFBWSxPQUFPLFFBQVEsT0FBTyxNQUFNLEtBQUssU0FBUyxHQUFHLGFBQWE7QUFDbkcsWUFBTSxLQUFLLFNBQVMsT0FBTyxpQkFBaUIsZ0JBQWdCLGdCQUFnQjtBQUFBLElBQ2hGO0FBQUEsRUFDSjtBQUFBLEVBRUEsTUFBTSxlQUFlLFFBQWtELE9BQWdCLGdCQUFnQyxpQkFBOEIsa0JBQTBCO0FBQzNLLFVBQU0sZ0JBQWdCLGVBQWU7QUFDckMsVUFBTSxTQUFTLGVBQWU7QUFDOUIsUUFBSSxhQUF1QztBQUMzQyxRQUFJLGtCQUFrQixtQkFBbUI7QUFDckMsbUJBQWEsY0FBYyxRQUFRLE1BQU0sSUFBSTtBQUFBLElBQ2pEO0FBQ0EsVUFBTSxPQUFPLGVBQWU7QUFDNUIsUUFBSSxjQUFrQztBQUN0QyxRQUFJLGdCQUFvQztBQUV4QyxRQUFJLFlBQVk7QUFBRSxvQkFBYyxLQUFLLFdBQVcsSUFBSTtBQUFBLElBQUc7QUFDdkQsUUFBSSxpQkFBaUI7QUFDckIsUUFBSSxrQkFBa0IsbUJBQW1CO0FBQ3JDLHVCQUFpQixNQUFNLGtCQUFrQixRQUFRLE1BQU0sTUFBTSxJQUFJO0FBQUEsSUFDckU7QUFDQSxRQUFJLGlEQUFnQiwyQkFBMkI7QUFBRTtBQUFBLElBQVE7QUFFekQsVUFBTSxNQUFNO0FBQ1osUUFBSSxLQUFLLGFBQWEsU0FBUyxRQUFRLEdBQUc7QUFDdEMsc0JBQWdCLGdCQUFnQixVQUFVO0FBQUEsUUFDdEMsS0FBSztBQUFBLE1BQ1QsQ0FBQztBQUNELG9CQUFjLGNBQWMsVUFBVTtBQUFBLFFBQ2xDLEtBQUs7QUFBQSxRQUNMLE1BQU07QUFBQSxVQUNGLGFBQWEsTUFBTTtBQUFBLFVBQ25CLGFBQWE7QUFBQSxRQUNqQjtBQUFBLE1BQ0osQ0FBQztBQUVELFlBQU0sa0JBQWtCLDJDQUFhLFVBQVU7QUFBQSxRQUMzQyxLQUFLO0FBQUEsUUFDTCxNQUFNLE1BQU07QUFBQSxNQUNoQjtBQUVBLFVBQUksbUJBQW1CLENBQUMsWUFBWTtBQUNoQyx3QkFBZ0IsVUFBVSxNQUFNO0FBQzVCLGdCQUFNLGdCQUFlLDJDQUFhLGlCQUFpQixtQkFBbUI7QUFDdEUsY0FBSSxlQUFjO0FBQ2QsaUJBQUssb0JBQW9CLGVBQWMsUUFBUSxNQUFNLGVBQWUsa0JBQWtCLGdCQUFnQixLQUFLO0FBQUEsVUFDL0c7QUFBQSxRQUNKO0FBQUEsTUFDSjtBQUVBLGtCQUFZLFlBQVk7QUFDeEIsa0JBQVksaUJBQWlCLGFBQWEsT0FBSztBQUMzQyxjQUFNLGNBQWMsT0FBTyxJQUFJO0FBQy9CLGNBQU0sV0FBVyxZQUFZLFdBQVcsR0FBRyxLQUFLO0FBQ2hELG9CQUFZLFlBQVksR0FBRyxRQUFRO0FBQ25DLG1EQUFhLFVBQVUsSUFBSTtBQUFBLE1BQy9CLENBQUM7QUFFRCxrQkFBWSxpQkFBaUIsV0FBVyxPQUFLO0FBQ3pDLG1EQUFhLFVBQVUsT0FBTztBQUFBLE1BQ2xDLENBQUM7QUFFRCxrQkFBWSxpQkFBaUIsWUFBWSxPQUFLO0FBQzFDLFVBQUUsZUFBZTtBQUNqQixjQUFNLEVBQUUsY0FBYyxPQUFPLElBQUk7QUFDakMsWUFBSSxhQUFhLFVBQVUsZ0JBQWdCLDJCQUFTO0FBQ2hELHlEQUFlLFVBQVUsSUFBSTtBQUM3QixpQkFBTyxJQUFJLFlBQVksVUFBVSxPQUFPLFFBQVEsRUFBRSw0Q0FBNEMsRUFBRSxRQUFRLE1BQU0sS0FBSyxDQUFDLENBQUM7QUFBQSxRQUN6SDtBQUFBLE1BQ0osQ0FBQztBQUVELGtCQUFZLGlCQUFpQixhQUFhLE9BQUs7QUFDM0MsdURBQWUsVUFBVSxPQUFPO0FBQUEsTUFDcEMsQ0FBQztBQUdELGtCQUFZLGlCQUFpQixRQUFRLE9BQUs7QUFDdEMsY0FBTSxFQUFFLGNBQWMsT0FBTyxJQUFJO0FBQ2pDLFlBQUksYUFBYSxVQUFVLGdCQUFnQiwyQkFBUztBQUNoRCxpQkFBTyxJQUFJLFlBQVksV0FBVyxVQUFVLE1BQU0sTUFBTSxPQUFPLE1BQU0sVUFBVSxLQUFLLElBQUk7QUFBQSxRQUM1RjtBQUFBLE1BQ0osQ0FBQztBQUVELGtCQUFZLGdCQUFnQixDQUFDLE1BQU07QUFDL0IsdUJBQWUsV0FBVyxPQUFPLENBQUM7QUFBQSxNQUN0QztBQUFBLElBQ0o7QUFFQSxRQUFJLENBQUMsTUFBTSxXQUFXO0FBQ2xCLFVBQUksS0FBSyxnQkFBZ0I7QUFDckIsY0FBTSxZQUFZO0FBQUEsTUFDdEI7QUFDQSxVQUFJLEtBQUssYUFBYSxTQUFTLFFBQVEsR0FBRztBQUN0QyxtREFBYSxVQUFVLE9BQU87QUFDOUIsY0FBTSxtQkFBa0IsK0NBQWUsVUFBVSxFQUFFLEtBQUsseUNBQXlDO0FBQ2pHLFlBQUksa0JBQWlCO0FBQ2pCLGdCQUFNLEtBQUssU0FBUyxNQUFNLFVBQVUsa0JBQWlCLGdCQUFnQixnQkFBZ0I7QUFBQSxRQUN6RjtBQUFBLE1BQ0osT0FBTztBQUNILGNBQU0sS0FBSyxTQUFTLE1BQU0sVUFBVSxpQkFBaUIsZ0JBQWdCLGdCQUFnQjtBQUFBLE1BQ3pGO0FBQUEsSUFDSixPQUFPO0FBQ0gsaURBQWEsVUFBVSxJQUFJO0FBQUEsSUFDL0I7QUFFQSxRQUFJLFlBQVk7QUFBRSxpREFBYSxVQUFVLElBQUk7QUFBQSxJQUFtQjtBQUNoRSxRQUFJLGNBQWMsTUFBTSxTQUFTLFdBQVcsS0FBSyxLQUFLLHFCQUFxQjtBQUFFLGlEQUFhLFVBQVUsSUFBSTtBQUFBLElBQW1CO0FBRTNILFVBQU0sZUFBZSwyQ0FBYSxVQUFVO0FBQUEsTUFDeEMsS0FBSztBQUFBLElBQ1Q7QUFFQSxRQUFJLE1BQU0sV0FBVztBQUNqQixtREFBYyxVQUFVLElBQUk7QUFBQSxJQUNoQztBQUVBLFFBQUksY0FBYztBQUNkLG1CQUFhLFlBQVk7QUFDekIsbUJBQWEsVUFBVSxNQUFNO0FBQ3pCLGFBQUssb0JBQW9CLGNBQWMsUUFBUSxNQUFNLGVBQWUsa0JBQWtCLGdCQUFnQixLQUFLO0FBQUEsTUFDL0c7QUFBQSxJQUNKO0FBQUEsRUFDSjtBQUFBLEVBRUEsTUFBTSxhQUFhLFFBQWtELE9BQWMsZ0JBQWdDLGlCQUE4QjtBQUM3SSxVQUFNLE9BQU8sZUFBZTtBQUM1QixVQUFNLGdCQUFnQixlQUFlO0FBRXJDLFFBQUksY0FBYyxTQUFTLE1BQU0sSUFBSSxLQUFLLENBQUMsS0FBSyxpQkFBaUI7QUFBRTtBQUFBLElBQVE7QUFDM0UsVUFBTSxZQUFZLE1BQU0sVUFBVSxZQUFZLEtBQUssT0FBTyxhQUFhLE1BQU0sVUFBVSxZQUFZO0FBQ25HLFVBQU0sZ0JBQWUsS0FBSztBQUUxQixRQUFJLGNBQWEsU0FBUyxLQUFLLENBQUMsY0FBYSxTQUFTLEtBQUssR0FBRztBQUMxRCxVQUFLLGVBQWMsUUFBUSxjQUFjLGVBQWUsQ0FBQyxjQUFhLFNBQVMsVUFBVTtBQUFHO0FBQzVGLFVBQUksY0FBYyxZQUFZLENBQUMsY0FBYSxTQUFTLFFBQVE7QUFBRztBQUNoRSxVQUFJLGNBQWMsU0FBUyxDQUFDLGNBQWEsU0FBUyxLQUFLO0FBQUc7QUFDMUQsWUFBTSxhQUFhLENBQUMsT0FBTyxRQUFRLE9BQU8sT0FBTyxPQUFPLE1BQU07QUFDOUQsVUFBSSxXQUFXLFNBQVMsU0FBUyxLQUFLLENBQUMsY0FBYSxTQUFTLE9BQU87QUFBRztBQUN2RSxZQUFNLGFBQWEsQ0FBQyxPQUFPLFFBQVEsT0FBTyxPQUFPLEtBQUs7QUFDdEQsVUFBSSxXQUFXLFNBQVMsU0FBUyxLQUFLLENBQUMsY0FBYSxTQUFTLE9BQU87QUFBRztBQUN2RSxZQUFNLGFBQWEsQ0FBQyxPQUFPLE9BQU8sT0FBTyxPQUFPLFFBQVEsT0FBTyxPQUFPLE1BQU07QUFDNUUsVUFBSSxXQUFXLFNBQVMsU0FBUyxLQUFLLGNBQWEsU0FBUyxPQUFPO0FBQUc7QUFDdEUsWUFBTSxXQUFXLENBQUMsWUFBWSxNQUFNLFVBQVUsT0FBTyxHQUFHLFlBQVksR0FBRyxZQUFZLEdBQUcsVUFBVTtBQUNoRyxVQUFJLENBQUMsU0FBUyxTQUFTLFNBQVMsS0FBSyxDQUFDLGNBQWEsU0FBUyxPQUFPO0FBQUc7QUFBQSxJQUMxRTtBQUVBLFVBQU0sY0FBYyxnQkFBZ0IsVUFBVTtBQUFBLE1BQzFDLEtBQUs7QUFBQSxJQUNULENBQUM7QUFFRCxVQUFNLFlBQVksWUFBWSxVQUFVO0FBQUEsTUFDcEMsS0FBSztBQUFBLE1BQ0wsTUFBTTtBQUFBLFFBQ0YsYUFBYSxNQUFNO0FBQUEsUUFDbkIsYUFBYTtBQUFBLE1BQ2pCO0FBQUEsSUFDSixDQUFDO0FBRUQsY0FBVSxpQkFBaUIsWUFBWSxPQUFLO0FBL1VwRDtBQWdWWSxRQUFFLGVBQWU7QUFDakIsWUFBTSxFQUFFLGNBQWMsT0FBTyxJQUFJO0FBQ2pDLFVBQUksYUFBYSxVQUFVLGdCQUFnQiwyQkFBUztBQUNoRCxlQUFPLElBQUksWUFBWSxVQUFVLE9BQU8sUUFBUSxFQUFFLDRDQUE0QyxFQUFFLFFBQVEsYUFBTSxXQUFOLG1CQUFjLFNBQVEsR0FBRyxDQUFDLENBQUM7QUFDbkksY0FBTSxXQUFXLGVBQWUsa0JBQWtCLGFBQU0sV0FBTixtQkFBYyxTQUFRLEVBQUU7QUFDMUUsWUFBSSxVQUFVO0FBQ1YseUJBQVMsa0JBQVQsbUJBQXdCLFVBQVUsSUFBSTtBQUFBLFFBQzFDO0FBQUEsTUFDSjtBQUFBLElBQ0osQ0FBQztBQUVELGNBQVUsaUJBQWlCLGFBQWEsT0FBSztBQTNWckQ7QUE0VlksWUFBTSxXQUFXLGVBQWUsa0JBQWtCLGFBQU0sV0FBTixtQkFBYyxTQUFRLEVBQUU7QUFDMUUsVUFBSSxVQUFVO0FBQ1YsdUJBQVMsa0JBQVQsbUJBQXdCLFVBQVUsT0FBTztBQUFBLE1BQzdDO0FBQUEsSUFDSixDQUFDO0FBRUQsY0FBVSxpQkFBaUIsUUFBUSxPQUFLO0FBbFdoRDtBQW1XWSxZQUFNLEVBQUUsY0FBYyxPQUFPLElBQUk7QUFDakMsVUFBSSxhQUFhLFVBQVUsZ0JBQWdCLDJCQUFTO0FBQ2hELGVBQU8sSUFBSSxZQUFZLFdBQVcsVUFBVSxNQUFNLGFBQU0sV0FBTixtQkFBYyxRQUFPLE1BQU0sVUFBVSxLQUFLLElBQUk7QUFBQSxNQUNwRztBQUFBLElBQ0osQ0FBQztBQUVELGNBQVUsVUFBVSxNQUFNO0FBQ3RCLGFBQU8sSUFBSSxVQUFVLGFBQWEsTUFBTSxNQUFNLE1BQU0sTUFBTSxJQUFJO0FBQUEsSUFDbEU7QUFFQSxjQUFVLGdCQUFnQixDQUFDLE1BQU07QUFDN0IscUJBQWUsU0FBUyxPQUFPLENBQUM7QUFBQSxJQUNwQztBQUVBLGNBQVUsVUFBVTtBQUFBLE1BQ2hCLEtBQUs7QUFBQSxNQUNMLE1BQU0sTUFBTTtBQUFBLElBQ2hCLENBQUM7QUFFRCxRQUFJLE1BQU0sY0FBYyxRQUFRLENBQUMsS0FBSyxnQkFBZ0I7QUFDbEQsZ0JBQVUsVUFBVTtBQUFBLFFBQ2hCLEtBQUs7QUFBQSxRQUNMLE1BQU0sTUFBTTtBQUFBLE1BQ2hCLENBQUM7QUFBQSxJQUNMO0FBQUEsRUFDSjtBQUNKOzs7QUM3WEEsd0JBQXFFO0FBTzlELDRCQUE0QixRQUFrRCxLQUFtQyxNQUFtQixNQUF3QixlQUF5QixnQkFBZ0M7QUFDeE4sUUFBTSxlQUFlLGVBQWU7QUFDaEMsK0NBQWM7QUFDbEIsTUFBSSxVQUFVLE9BQU8sSUFBSSxNQUFNLHNCQUFzQixLQUFLLFVBQVU7QUFDcEUsTUFBSSxDQUFDLFdBQVcsS0FBSyxXQUFXLEtBQUssS0FBSyxJQUFJO0FBQzFDLFFBQUksSUFBSSxXQUFXLFNBQVMsR0FBRyxHQUFHO0FBQzlCLGdCQUFVLE9BQU8sSUFBSSxNQUFNLHNCQUFzQix5QkFBd0IsSUFBSSxVQUFVLENBQUM7QUFBQSxJQUM1RixPQUFPO0FBQ0gsV0FBSyxhQUFhO0FBQ2xCLGdCQUFVLE9BQU8sSUFBSSxNQUFNLHNCQUFzQixHQUFHO0FBQUEsSUFDeEQ7QUFBQSxFQUNKO0FBQ0EsTUFBSSxDQUFFLG9CQUFtQiw0QkFBVTtBQUFFO0FBQUEsRUFBUTtBQUU3QyxNQUFJLFFBQVEsUUFBUTtBQUNwQixNQUFJLENBQUMsT0FBTztBQUFFO0FBQUEsRUFBUTtBQUN0QixRQUFNLEtBQUssZUFBZTtBQUMxQixRQUFNLG1CQUFtQixRQUFRO0FBRWpDLFFBQU0sVUFBVSxlQUFlLFVBQVUsTUFBTSxPQUFPLE9BQUssYUFBYSx5QkFBTyxDQUFDO0FBQ2hGLFVBQVEsZUFBZSxVQUFVLE1BQU0sT0FBTyxPQUFLLGFBQWEsdUJBQUssQ0FBQztBQUN0RSxVQUFRLFFBQVEsQ0FBQyxTQUFTO0FBQ3RCLFFBQUksZ0JBQWdCLDJCQUFTO0FBQ3pCLFlBQU0sYUFBYSxjQUFjLFFBQVEsSUFBSSxlQUFlLGVBQWUsTUFBTSxjQUFjO0FBQy9GLFVBQUksQ0FBQyxZQUFZO0FBQUU7QUFBQSxNQUFRO0FBQzNCLHVCQUFpQixRQUFRLFlBQVksTUFBTSxlQUFlLEtBQUssT0FBTyxrQkFBa0IsS0FBSyxlQUFlLE1BQU0sZUFBZSxlQUFlLGVBQWUsS0FBSyxjQUFjLGVBQWUsS0FBSyxnQkFBZ0IsY0FBYztBQUFBLElBQ3hPO0FBQUEsRUFDSixDQUFDO0FBRUQsUUFBTSxRQUFRLENBQUMsU0FBUztBQUNwQixRQUFJLGdCQUFnQix5QkFBTztBQUN2QixrQkFBWSxRQUFRLElBQUksZUFBZSxlQUFlLE1BQU0sZUFBZSxLQUFLLGNBQWMsZUFBZSxLQUFLLGdCQUFnQixjQUFjO0FBQUEsSUFDcEo7QUFBQSxFQUNKLENBQUM7QUFHRCxRQUFNLDhCQUE4QixVQUFTLE1BQU0sbUJBQW1CLFFBQVEsS0FBSyxNQUFNLE1BQU0sZUFBZSxjQUFjLEdBQUcsR0FBRztBQUNsSSxRQUFNLG9CQUFvQixNQUFNO0FBQzVCLGdDQUE0QjtBQUFBLEVBQ2hDO0FBRUEsaUJBQWUsR0FBRyxnQkFBZ0IsaUJBQWlCO0FBQ3ZEO0FBRUEsbUJBQWtCLE1BQWdCLE1BQWM7QUFDNUMsTUFBSTtBQUNKLFNBQU8sSUFBSSxTQUFnQjtBQUN2QixpQkFBYSxPQUFPO0FBQ3BCLGNBQVUsT0FBTyxXQUFXLE1BQU0sS0FBSyxNQUFNLE1BQU0sSUFBSSxHQUFHLElBQUk7QUFBQSxFQUNsRTtBQUNKO0FBRU8sdUJBQXVCLFFBQXNFLE1BQXdDLGVBQXlCLFFBQWlCLGdCQUFnQztBQUNsTixRQUFNLGtCQUFrQixPQUFPLEtBQUssTUFBTSxHQUFHLEVBQUUsV0FBVyxlQUFlLEtBQUssV0FBVyxNQUFNLEdBQUcsRUFBRSxTQUFTO0FBQzdHLE1BQUksQ0FBQyxlQUFlLEtBQUssb0JBQW9CLE9BQU8sU0FBUyxXQUFXLEtBQUssQ0FBQyxlQUFlLEtBQUssdUJBQXVCO0FBQ3JIO0FBQUEsRUFDSixXQUFXLGVBQWUsS0FBSyx5QkFBeUIsQ0FBQyxtQkFBbUIsT0FBTyxTQUFTLFdBQVcsR0FBRztBQUN0RztBQUFBLEVBQ0o7QUFHQSxRQUFNLGFBQWEsS0FBSyxTQUFTLE1BQU0sRUFBRSxLQUFLLG1DQUFtQyxDQUFDO0FBQ2xGLE1BQUksa0JBQWtCLG1CQUFtQjtBQUNyQyxVQUFNLGFBQWEsY0FBYyxRQUFRLE9BQU8sSUFBSTtBQUNwRCxRQUFJLHNCQUFzQix5QkFBTztBQUM3QixZQUFNLGlCQUFpQixXQUFXLFNBQVMsS0FBSyxFQUFFLEtBQUssNERBQTRELE1BQU0sV0FBVyxLQUFLLENBQUM7QUFDMUkscUJBQWUsWUFBWSxPQUFPO0FBQ2xDLG9CQUFjLEtBQUssV0FBVyxJQUFJO0FBQ2xDLHFCQUFlLGdCQUFnQixDQUFDLE1BQU07QUFDbEMsVUFBRSx5QkFBeUI7QUFDM0IsdUJBQWUsU0FBUyxZQUFZLENBQUM7QUFBQSxNQUN6QztBQUFBLElBQ0osT0FBTztBQUNILFlBQU0sYUFBYSxXQUFXLFNBQVMsUUFBUSxFQUFFLEtBQUssNkNBQTZDLENBQUM7QUFDcEcsaUJBQVcsWUFBWSxPQUFPO0FBQzlCLGlCQUFXLGdCQUFnQixDQUFDLE1BQU07QUFDOUIsdUJBQWUsV0FBVyxRQUFRLENBQUM7QUFBQSxNQUN2QztBQUFBLElBQ0o7QUFBQSxFQUNKLE9BQU87QUFDSCxVQUFNLGFBQWEsV0FBVyxTQUFTLFFBQVEsRUFBRSxLQUFLLDZDQUE2QyxDQUFDO0FBQ3BHLGVBQVcsWUFBWSxPQUFPO0FBQzlCLGVBQVcsZ0JBQWdCLENBQUMsTUFBTTtBQUM5QixxQkFBZSxXQUFXLFFBQVEsQ0FBQztBQUFBLElBQ3ZDO0FBQUEsRUFDSjtBQUVBLFNBQU87QUFDWDtBQUVBLGdDQUFnQyxRQUFrRCxNQUF3QyxRQUN0SCxPQUFlLGtCQUEwQixLQUFtQyxNQUM1RSxlQUF5QixlQUF3QixnQkFBeUIsZ0JBQWdDO0FBQzFHLE1BQUkscUJBQXFCLElBQUk7QUFDekI7QUFBQSxFQUNKO0FBRUEsUUFBTSxXQUFXLE1BQU0sZUFBZSxZQUFZLE9BQU8sVUFBVSxRQUFRLGtCQUFrQixPQUFPLGFBQWE7QUFDakgsUUFBTSxRQUFRLGVBQWUsVUFBVSxTQUFTLE9BQU8sQ0FBQyxTQUFTLENBQUUsaUJBQWdCLDBCQUFRLENBQUM7QUFFNUYsUUFBTSxVQUFVLGVBQWUsVUFBVSxTQUFTLE9BQU8sQ0FBQyxTQUFTLGdCQUFnQix5QkFBTyxDQUFDO0FBQzNGLFFBQU0sS0FBSyxLQUFLLFNBQVMsTUFBTSxFQUFFLEtBQUssdUJBQXVCLENBQUM7QUFFOUQsVUFBUSxRQUFRLENBQUMsU0FBUztBQUN0QixRQUFJLGdCQUFnQiwyQkFBUztBQUN6QixZQUFNLGFBQWEsY0FBYyxRQUFRLElBQUksZUFBZSxNQUFNLGNBQWM7QUFDaEYsVUFBSSxDQUFDO0FBQVk7QUFDakIsdUJBQWlCLFFBQVEsWUFBWSxNQUFNLE9BQU8sa0JBQWtCLEtBQUssTUFBTSxlQUFlLGVBQWMsZ0JBQWdCLGNBQWM7QUFBQSxJQUM5STtBQUFBLEVBQ0osQ0FBQztBQUVELFFBQU0sUUFBUSxDQUFDLFNBQVM7QUFDcEIsUUFBSSxnQkFBZ0IseUJBQU87QUFDdkIsa0JBQVksUUFBUSxJQUFJLGVBQWUsTUFBTSxlQUFjLGdCQUFnQixjQUFjO0FBQUEsSUFDN0Y7QUFBQSxFQUNKLENBQUM7QUFDTDtBQUVBLHFCQUFxQixRQUFrRCxNQUF3QyxlQUF5QixNQUFhLGVBQXdCLGdCQUF5QixnQkFBZ0M7QUE3SHRPO0FBOEhJLE1BQUksY0FBYSxTQUFTLEtBQUssQ0FBQyxjQUFhLFNBQVMsS0FBSyxHQUFHO0FBQzFELFFBQUksS0FBSyxjQUFjLFFBQVEsQ0FBQyxjQUFhLFNBQVMsVUFBVTtBQUFHO0FBQ25FLFFBQUksS0FBSyxjQUFjLFlBQVksQ0FBQyxjQUFhLFNBQVMsUUFBUTtBQUFHO0FBQ3JFLFFBQUksS0FBSyxjQUFjLFNBQVMsQ0FBQyxjQUFhLFNBQVMsS0FBSztBQUFHO0FBQy9ELFVBQU0sYUFBYSxDQUFDLE9BQU8sUUFBUSxPQUFPLE9BQU8sT0FBTyxNQUFNO0FBQzlELFFBQUksV0FBVyxTQUFTLEtBQUssU0FBUyxLQUFLLENBQUMsY0FBYSxTQUFTLE9BQU87QUFBRztBQUM1RSxVQUFNLGFBQWEsQ0FBQyxPQUFPLFFBQVEsT0FBTyxPQUFPLEtBQUs7QUFDdEQsUUFBSSxXQUFXLFNBQVMsS0FBSyxTQUFTLEtBQUssQ0FBQyxjQUFhLFNBQVMsT0FBTztBQUFHO0FBQzVFLFVBQU0sYUFBYSxDQUFDLE9BQU8sT0FBTyxPQUFPLE9BQU8sUUFBUSxPQUFPLE9BQU8sTUFBTTtBQUM1RSxRQUFJLFdBQVcsU0FBUyxLQUFLLFNBQVMsS0FBSyxjQUFhLFNBQVMsT0FBTztBQUFHO0FBQzNFLFVBQU0sV0FBVyxDQUFDLE1BQU0sVUFBVSxPQUFPLEdBQUcsWUFBWSxHQUFHLFlBQVksR0FBRyxVQUFVO0FBQ3BGLFFBQUksQ0FBQyxTQUFTLFNBQVMsS0FBSyxTQUFTLEtBQUssQ0FBQyxjQUFhLFNBQVMsT0FBTztBQUFHO0FBQUEsRUFDL0U7QUFFQSxNQUFJLENBQUMsZUFBZSxLQUFLLGlCQUFpQjtBQUN0QyxRQUFJLGNBQWMsU0FBUyxLQUFLLElBQUk7QUFBRztBQUN2QyxRQUFJLGtCQUFrQixxQkFBcUIsa0JBQWtCLE9BQU8sU0FBUyxnQkFBZ0IsS0FBSyxRQUFRLE1BQU0sWUFBSyxXQUFMLG1CQUFhLE9BQU07QUFDL0g7QUFBQSxJQUNKO0FBQUEsRUFDSjtBQUVBLFFBQU0sV0FBVyxLQUFLLFNBQVMsTUFBTSxFQUFFLEtBQUssaUNBQWlDLENBQUM7QUFDOUUsV0FBUyxnQkFBZ0IsQ0FBQyxNQUFNO0FBQzVCLE1BQUUseUJBQXlCO0FBQzNCLG1CQUFlLFNBQVMsTUFBTSxDQUFDO0FBQUEsRUFDbkM7QUFFQSxRQUFNLFdBQVcsU0FBUyxTQUFTLE9BQU8sRUFBRSxLQUFLLDRCQUE0QixDQUFDO0FBQzlFLFFBQU0sT0FBTyxTQUFTLFNBQVMsS0FBSyxFQUFFLEtBQUssaUJBQWlCLE1BQU0sS0FBSyxLQUFLLENBQUM7QUFDN0UsT0FBSyxZQUFZLEtBQUs7QUFDdEIsTUFBSSxLQUFLLGNBQWMsUUFBUSxDQUFDLGdCQUFnQjtBQUM1QyxhQUFTLFVBQVUsRUFBRSxLQUFLLGVBQWUsQ0FBQyxFQUFFLFlBQVksS0FBSztBQUFBLEVBQ2pFO0FBQ0o7OztBQy9KQSx3QkFBNkM7QUFFN0MsSUFBcUIscUJBQXJCLGNBQWdELHdCQUFNO0FBQUEsRUFJbEQsWUFBWSxNQUFVLFFBQTJCLFFBQWlCO0FBQzlELFVBQU0sSUFBRztBQUNULFNBQUssU0FBUztBQUNkLFNBQUssTUFBTTtBQUNYLFNBQUssU0FBUztBQUFBLEVBQ2xCO0FBQUEsRUFDQSxTQUFTO0FBQ0wsVUFBTSxFQUFFLGNBQWM7QUFFdEIsY0FBVSxpQkFBaUIsV0FBVyxDQUFDLE1BQU07QUFDekMsVUFBSSxFQUFFLFFBQVEsU0FBUztBQUNuQixhQUFLLGVBQWU7QUFDcEIsYUFBSyxNQUFNO0FBQUEsTUFDZjtBQUFBLElBQ0osQ0FBQztBQUVELFNBQUssUUFBUSxVQUFVLElBQUksaUJBQWlCO0FBQzVDLFVBQU0sYUFBYSxLQUFLLFFBQVEsY0FBYyxpQkFBaUI7QUFDL0QsUUFBSSxZQUFZO0FBQ1osaUJBQVcsY0FBYztBQUFBLElBQzdCO0FBRUEsVUFBTSxXQUFXLFVBQVUsU0FBUyxZQUFZO0FBQUEsTUFDNUMsTUFBTSxLQUFLLE9BQU8sS0FBSyxRQUFRLEtBQUssT0FBTyxTQUFTLGdCQUFnQixFQUFFO0FBQUEsTUFDdEUsTUFBTTtBQUFBLFFBQ0YsYUFBYTtBQUFBLFFBQ2IsTUFBTTtBQUFBLFFBQ04sWUFBWTtBQUFBLFFBQ1osT0FBTztBQUFBLE1BQ1g7QUFBQSxJQUNKLENBQUM7QUFFRCxhQUFTLGlCQUFpQixTQUFTLFdBQVc7QUFDMUMsV0FBSyxPQUFPO0FBQUEsSUFDaEIsQ0FBQztBQUVELGFBQVMsTUFBTTtBQUVmLFVBQU0sa0JBQWtCLEtBQUssUUFBUSxVQUFVLEVBQUUsS0FBSyx5QkFBeUIsQ0FBQztBQUNoRixVQUFNLGFBQWEsZ0JBQWdCLFNBQVMsVUFBVSxFQUFFLE1BQU0sUUFBUSxLQUFLLFVBQVUsQ0FBQztBQUN0RixlQUFXLGlCQUFpQixTQUFTLFlBQVk7QUFDN0MsV0FBSyxlQUFlO0FBQ3BCLFdBQUssTUFBTTtBQUFBLElBQ2YsQ0FBQztBQUVELFVBQU0sZUFBZSxnQkFBZ0IsU0FBUyxVQUFVLEVBQUUsTUFBTSxVQUFVLEtBQUssYUFBYSxDQUFDO0FBQzdGLGlCQUFhLGlCQUFpQixTQUFTLE1BQU07QUFDekMsV0FBSyxNQUFNO0FBQUEsSUFDZixDQUFDO0FBQUEsRUFDTDtBQUFBLEVBQ0EsVUFBVTtBQUNOLFVBQU0sRUFBRSxjQUFjO0FBQ3RCLGNBQVUsTUFBTTtBQUFBLEVBQ3BCO0FBQUEsRUFFQSxpQkFBaUI7QUFDYixVQUFNLFdBQVcsS0FBSyxVQUFVLGNBQWMsVUFBVTtBQUN4RCxRQUFJLFVBQVU7QUFDVixZQUFNLFVBQVUsU0FBUyxNQUFNLEtBQUs7QUFDcEMsVUFBSSxRQUFRLEtBQUssTUFBTSxJQUFJO0FBQ3ZCLFlBQUksQ0FBQyxLQUFLLElBQUksTUFBTSxzQkFBc0IsS0FBSyxPQUFPLEtBQUssTUFBTSxHQUFHLEtBQUssT0FBTyxLQUFLLFlBQVksR0FBRyxJQUFJLENBQUMsSUFBSSxRQUFRLEtBQUssQ0FBQyxHQUFHO0FBQzFILGVBQUssT0FBTyxJQUFJLFlBQVksV0FBVyxLQUFLLFFBQVEsS0FBSyxPQUFPLEtBQUssTUFBTSxHQUFHLEtBQUssT0FBTyxLQUFLLFlBQVksR0FBRyxJQUFJLENBQUMsSUFBSSxRQUFRLEtBQUssQ0FBQztBQUFBLFFBQ3pJO0FBQUEsTUFDSjtBQUFBLElBQ0o7QUFBQSxFQUNKO0FBQ0o7OztBM0d4Q08sSUFBTSxpQkFBTixNQUFxQjtBQUFBLEVBaUIzQixZQUFZLFFBQWtELEtBQW1DLFFBQWdCLElBQWlCLGlCQUFtQztBQVRySyx5QkFBMEIsQ0FBQztBQUMzQixtQkFBcUIsQ0FBQztBQU90QiwwQkFBaUMsQ0FBQztBQWhEbkM7QUFrREUsU0FBSyxTQUFTO0FBQ2QsU0FBSyxVQUFVLElBQUksb0JBQW1CO0FBQ3RDLFFBQUksT0FBeUIsaUNBQVUsTUFBTTtBQUM3QyxRQUFJLENBQUMsTUFBTTtBQUFFLGFBQU8sQ0FBQztBQUFBLElBQXVCO0FBQzVDLFVBQU0sZ0JBQWUsOEJBQU0saUJBQWdCLGdCQUFnQixnQkFBZ0IsQ0FBQyxVQUFVLFVBQVU7QUFDaEcsU0FBSyxNQUFNO0FBQ1gsU0FBSyxTQUFTO0FBQ2QsU0FBSyxLQUFLO0FBQ1YsU0FBSyxpQkFBaUIsS0FBSyxJQUFJO0FBQy9CLFNBQUssZUFBZSxLQUFLLE9BQU8sSUFBSSxNQUFNLHNCQUFzQix5QkFBd0IsSUFBSSxVQUFVLENBQUM7QUFDdkcsU0FBSyxrQkFBa0I7QUFDdkIsU0FBSyxPQUFPO0FBQUEsTUFDWCxJQUFJLG1DQUFNLE9BQU4sWUFBWSxPQUFPLFdBQVc7QUFBQSxNQUNsQyxZQUFZLG1DQUFNLGVBQU4sWUFBb0IseUJBQXdCLElBQUksVUFBVTtBQUFBLE1BQ3RFLE9BQU8sbUNBQU0sVUFBTixZQUFlLGdCQUFnQjtBQUFBLE1BQ3RDLFdBQVcsbUNBQU0sY0FBTixZQUFtQixnQkFBZ0I7QUFBQSxNQUM5QyxPQUFPLG1DQUFNLFVBQU4sWUFBZSxnQkFBZ0I7QUFBQSxNQUN0QyxPQUFPLG1DQUFNLFVBQU4sWUFBZTtBQUFBLE1BQ3RCLGNBQWMsY0FBYSxJQUFJLENBQUMsU0FBUyxLQUFLLFlBQVksQ0FBQztBQUFBLE1BQzNELGdCQUFnQixtQ0FBTSxtQkFBTixZQUF3QixnQkFBZ0I7QUFBQSxNQUN4RCxRQUFRLG1DQUFNLFdBQU4sWUFBZ0IsZ0JBQWdCO0FBQUEsTUFDeEMsV0FBVyxtQ0FBTSxjQUFOLFlBQW1CLGdCQUFnQjtBQUFBLE1BQzlDLGtCQUFrQixtQ0FBTSxxQkFBTixZQUEwQixnQkFBZ0I7QUFBQSxNQUM1RCx1QkFBdUIsbUNBQU0sMEJBQU4sWUFBK0IsZ0JBQWdCO0FBQUEsTUFDdEUsc0JBQXNCLG1DQUFNLHlCQUFOLFlBQThCLGdCQUFnQjtBQUFBLE1BQ3BFLGlCQUFpQixtQ0FBTSxvQkFBTixZQUF5QixnQkFBZ0I7QUFBQSxNQUMxRCxxQkFBcUIsbUNBQU0sd0JBQU4sWUFBNkIsZ0JBQWdCO0FBQUEsTUFDbEUsZ0JBQWdCLG1DQUFNLG1CQUFOLFlBQXdCLGdCQUFnQjtBQUFBLElBQ3pEO0FBR0EsVUFBTSxjQUFjLElBQUksMEJBQTBCLElBQUksSUFBSTtBQUMxRCxRQUFJLFNBQVMsV0FBVztBQUFBLEVBQ3pCO0FBQUEsRUFFQSxHQUFHLE9BQWUsVUFBZ0M7QUFDakQsU0FBSyxRQUFRLEdBQUcsT0FBTyxRQUFRO0FBQUEsRUFDaEM7QUFBQSxFQUVBLElBQUksT0FBZSxVQUFnQztBQUNsRCxTQUFLLFFBQVEsSUFBSSxPQUFPLFFBQVE7QUFBQSxFQUNqQztBQUFBLEVBRUEsQUFBUSxLQUFLLE9BQWUsTUFBWTtBQUN2QyxTQUFLLFFBQVEsS0FBSyxPQUFPLElBQUk7QUFBQSxFQUM5QjtBQUFBLEVBRUEsa0JBQWtCLFdBQW1CO0FBQ3BDLFNBQUssS0FBSyxnQkFBZ0IsU0FBUztBQUFBLEVBQ3BDO0FBQUEsRUFFQSxzQkFBc0I7QUFDckIsU0FBSyxlQUFlLFFBQVEsQ0FBQyxlQUFlLFdBQVcsQ0FBQztBQUN4RCxTQUFLLGlCQUFpQixDQUFDO0FBQUEsRUFDeEI7QUFBQSxFQUVBLG9CQUFvQjtBQUNuQixVQUFNLFNBQVMsS0FBSztBQUNwQixVQUFNLGdCQUFlLE1BQU0sS0FBSyxrQkFBa0IsU0FBUztBQUMzRCxVQUFNLGdCQUFlLE1BQU0sS0FBSyxrQkFBa0IsU0FBUztBQUMzRCxVQUFNLGdCQUFlLE1BQU0sS0FBSyxrQkFBa0IsU0FBUztBQUUzRCxXQUFPLElBQUksTUFBTSxHQUFHLFVBQVUsYUFBWTtBQUMxQyxXQUFPLElBQUksTUFBTSxHQUFHLFVBQVUsYUFBWTtBQUMxQyxXQUFPLElBQUksTUFBTSxHQUFHLFVBQVUsYUFBWTtBQUUxQyxTQUFLLGVBQWUsS0FBSyxNQUFNLE9BQU8sSUFBSSxNQUFNLElBQUksVUFBVSxhQUFZLENBQUM7QUFDM0UsU0FBSyxlQUFlLEtBQUssTUFBTSxPQUFPLElBQUksTUFBTSxJQUFJLFVBQVUsYUFBWSxDQUFDO0FBQzNFLFNBQUssZUFBZSxLQUFLLE1BQU0sT0FBTyxJQUFJLE1BQU0sSUFBSSxVQUFVLGFBQVksQ0FBQztBQUFBLEVBQzVFO0FBQUEsRUFFQSxNQUFNLE9BQU8sUUFBa0QsUUFBZ0IsSUFBaUIsS0FBbUM7QUF6SHBJO0FBMEhFLE9BQUcsTUFBTTtBQUNULGFBQUcsa0JBQUgsbUJBQWtCLFVBQVUsSUFBSTtBQUVoQyxVQUFNLE9BQU8sR0FBRyxTQUFTLE9BQU8sRUFBRSxLQUFLLGtCQUFrQixDQUFDO0FBQzFELFNBQUssT0FBTztBQUVaLFVBQU0sVUFBVSxLQUFLLFNBQVMsTUFBTSxFQUFFLEtBQUssd0JBQXdCLENBQUM7QUFFcEUsVUFBTSxLQUFLLEtBQUssU0FBUyxNQUFNLEVBQUUsS0FBSyx1QkFBdUIsQ0FBQztBQUM5RCxTQUFLLFNBQVM7QUFFZCxRQUFJLEtBQUssS0FBSyxhQUFhLFdBQVcsR0FBRztBQUFFLGFBQU8sS0FBSyxjQUFjLElBQUk7QUFBQSxJQUFHO0FBQzVFLFFBQUksUUFBeUIsQ0FBQztBQUU5QixVQUFNLGFBQWEsT0FBTyxJQUFJLE1BQU0sc0JBQXNCLElBQUksVUFBVTtBQUN4RSxRQUFJLENBQUM7QUFBWTtBQUVqQixRQUFJLG1CQUFtQixLQUFLLEtBQUssY0FBYyx5QkFBd0IsSUFBSSxVQUFVO0FBQ3JGLFFBQUksQ0FBQyxJQUFJLFdBQVcsU0FBUyxHQUFHLEdBQUc7QUFDbEMseUJBQW1CO0FBQUEsSUFDcEI7QUFFQSxTQUFLLGtCQUFrQjtBQUV2QixRQUFJO0FBRUosUUFBSSxxQkFBcUIsS0FBSztBQUM3QixVQUFJLEtBQUssS0FBSyxlQUFlLElBQUk7QUFDaEMsdUJBQWUsT0FBTyxJQUFJLE1BQU0sc0JBQXNCLHlCQUF3QixJQUFJLFVBQVUsQ0FBQztBQUFBLE1BQzlGLE9BQU87QUFDTix1QkFBZSxPQUFPLElBQUksTUFBTSxzQkFBc0IsS0FBSyxLQUFLLFVBQVU7QUFBQSxNQUMzRTtBQUFBLElBQ0Q7QUFFQSxRQUFJLEtBQUssS0FBSyxXQUFXO0FBQ3hCLFVBQUksZ0JBQWdCLHFCQUFxQixLQUFLO0FBQzdDLGdCQUFRLFlBQVksS0FBSyxLQUFLLE1BQU0sUUFBUSxrQkFBa0IsYUFBYSxJQUFJO0FBQUEsTUFDaEYsV0FBVyxvQkFBb0IsS0FBSztBQUNuQyxnQkFBUSxZQUFZLEtBQUssS0FBSyxNQUFNLFFBQVEsa0JBQWtCLE9BQU87QUFBQSxNQUN0RSxPQUFPO0FBQ04sZ0JBQVEsWUFBWSxLQUFLLEtBQUssTUFBTSxRQUFRLGtCQUFrQixFQUFFO0FBQUEsTUFDakU7QUFBQSxJQUNEO0FBRUEsUUFBSSxDQUFDLGdCQUFpQixzQkFBcUIsT0FBTyxxQkFBcUIsS0FBSztBQUFFLGFBQU8sSUFBSSx5QkFBTywyQ0FBNEM7QUFBQSxJQUFHO0FBQy9JLFFBQUksQ0FBQyxnQkFBZ0Isb0JBQW9CLElBQUk7QUFDNUMseUJBQW1CO0FBQUEsSUFDcEI7QUFDQSxRQUFJLENBQUUseUJBQXdCLDhCQUFZLHFCQUFxQixLQUFLO0FBQUU7QUFBQSxJQUFRO0FBRTlFLFFBQUkscUJBQXFCLEtBQUs7QUFDN0IsWUFBTSxZQUE2QixDQUFDO0FBQ3BDLGFBQU8sSUFBSSxNQUFNLGtCQUFrQixFQUFFLE9BQU8sQ0FBQyxNQUFHO0FBOUtuRDtBQThLc0QseUJBQUUsV0FBRixvQkFBVSxVQUFTO0FBQUEsT0FBRyxFQUFFLFFBQVEsQ0FBQyxTQUFTO0FBQzVGLFlBQUksQ0FBQyxLQUFLLEtBQUssU0FBUyxHQUFHLEdBQUc7QUFDN0Isb0JBQVUsS0FBSyxJQUFJO0FBQUEsUUFDcEI7QUFBQSxNQUNELENBQUM7QUFDRCxjQUFRO0FBQUEsSUFDVCxXQUFXLHdCQUF3QiwyQkFBUztBQUMzQyxjQUFRLGFBQWE7QUFBQSxJQUN0QjtBQUVBLFlBQVEsTUFBTSxLQUFLLFlBQVksT0FBTyxRQUFRLGtCQUFrQixLQUFLLEtBQUssT0FBTyxLQUFLLGFBQWE7QUFFbkcsUUFBSSxDQUFDLEtBQUssS0FBSyxhQUFhLFNBQVMsUUFBUSxHQUFHO0FBQy9DLGNBQVEsS0FBSyxZQUFZLE9BQU8sa0JBQWtCLEtBQUssS0FBSyxLQUFLO0FBQUEsSUFDbEU7QUFFQSxRQUFJLE1BQU0sV0FBVyxHQUFHO0FBQ3ZCLGFBQU8sS0FBSyxjQUFjLElBQUk7QUFBQSxJQUMvQjtBQUVBLFlBQVEsS0FBSyxVQUFVLEtBQUs7QUFFNUIsUUFBSSxLQUFLLEtBQUssVUFBVSxRQUFRO0FBQy9CLFlBQU0sT0FBTyxLQUFLLFNBQVMsT0FBTyxFQUFFLEtBQUssdUJBQXVCLENBQUM7QUFDakUsWUFBTSxRQUFRLE9BQU8sU0FBUztBQUM3QixjQUFNLFdBQVcsS0FBSyxTQUFTLE9BQU8sRUFBRSxLQUFLLDRCQUE0QixDQUFDO0FBQzFFLGNBQU0sY0FBYyxTQUFTLFNBQVMsV0FBVyxFQUFFLEtBQUssb0NBQW9DLENBQUM7QUFDN0YsWUFBSSxnQkFBZ0IseUJBQU87QUFDMUIsZ0JBQU0sY0FBYyxNQUFNLE9BQU8sSUFBSSxNQUFNLEtBQUssSUFBSTtBQUNwRCxnQkFBTSxnQkFBZ0IsWUFBWSxTQUFTLEtBQUssRUFBRSxLQUFLLHdDQUF3QyxDQUFDO0FBQ2hHLGNBQUksY0FBYyxZQUFZLE1BQU0sSUFBSSxFQUFFO0FBQzFDLGNBQUksWUFBWSxTQUFTLElBQUk7QUFDNUIsMEJBQWMsWUFBWSxNQUFNLEdBQUcsRUFBRSxJQUFJO0FBQUEsVUFDMUM7QUFDQSx3QkFBYyxZQUFZO0FBQzFCLGdCQUFNLE9BQU8sWUFBWSxTQUFTLEtBQUssRUFBRSxLQUFLLCtDQUErQyxDQUFDO0FBQzlGLGdCQUFNLFFBQVEsS0FBSyxTQUFTLE1BQU0sRUFBRSxLQUFLLHVDQUF1QyxDQUFDO0FBQ2pGLGdCQUFNLFlBQVksS0FBSyxLQUFLLFFBQVEsT0FBTyxFQUFFLEVBQUUsUUFBUSxXQUFXLEVBQUU7QUFDcEUsZUFBSyxPQUFPLEtBQUs7QUFBQSxRQUNsQixXQUFXLGdCQUFnQiwyQkFBUztBQUNuQyxnQkFBTSxhQUFhLFlBQVksU0FBUyxPQUFPLEVBQUUsS0FBSyxtQ0FBbUMsQ0FBQztBQUMxRixnQkFBTSxhQUFhLFdBQVcsU0FBUyxNQUFNLEVBQUUsS0FBSyx3Q0FBd0MsQ0FBQztBQUM3RixxQkFBVyxZQUFZLEtBQUs7QUFBQSxRQUM3QjtBQUFBLE1BQ0QsQ0FBQztBQUFBLElBQ0YsV0FBVyxLQUFLLEtBQUssVUFBVSxRQUFRO0FBQ3RDLHlCQUFtQixRQUFRLEtBQUssTUFBTSxLQUFLLE1BQU0sS0FBSyxlQUFlLElBQUk7QUFBQSxJQUMxRSxXQUFXLEtBQUssS0FBSyxVQUFVLFlBQVk7QUFDMUMsWUFBTSx1QkFBdUIsSUFBSSxxQkFBcUIsUUFBUSxLQUFLLE1BQU0sS0FBSyxNQUFNLEtBQUssZUFBZSxJQUFJO0FBQzVHLFVBQUksS0FBSyxPQUFPLElBQUksVUFBVSxhQUFhO0FBQzFDLGNBQU0scUJBQXFCLG1CQUFtQjtBQUFBLE1BQy9DLE9BQU87QUFDTixhQUFLLE9BQU8sSUFBSSxVQUFVLGNBQWMsTUFBTTtBQUM3QywrQkFBcUIsbUJBQW1CO0FBQUEsUUFDekMsQ0FBQztBQUFBLE1BQ0Y7QUFBQSxJQUNEO0FBRUEsVUFBTSxpQkFBaUIsR0FBRyxXQUFXLEdBQUcsV0FBVztBQUNuRCxRQUFJLGtCQUFrQixlQUFlLFdBQVcsV0FBVyxHQUFHO0FBQzdELFVBQUksS0FBSyxLQUFLLFVBQVUsWUFBWTtBQUNuQyxjQUFNLFdBQVcsR0FBRyxXQUFXO0FBQy9CLFlBQUksQ0FBQyxTQUFTLFdBQVcsSUFBSTtBQUM1QixjQUFJLEtBQUssT0FBTyxJQUFJLFVBQVUsYUFBYTtBQUMxQyxtQkFBTyxLQUFLLGNBQWMsSUFBSTtBQUFBLFVBQy9CO0FBQUEsUUFDRDtBQUFBLE1BQ0QsT0FBTztBQUNOLFlBQUksS0FBSyxPQUFPLElBQUksVUFBVSxhQUFhO0FBQzFDLGlCQUFPLEtBQUssY0FBYyxJQUFJO0FBQUEsUUFDL0I7QUFBQSxNQUNEO0FBQUEsSUFDRDtBQUFBLEVBS0Q7QUFBQSxFQUVBLGNBQWMsTUFBbUI7QUFDaEMsVUFBTSxhQUFhLEtBQUssU0FBUyxVQUFVLEVBQUUsS0FBSyw4QkFBOEIsQ0FBQztBQUNqRixlQUFXLFlBQVk7QUFDdkIsZUFBVyxpQkFBaUIsU0FBUyxDQUFDLE1BQU07QUFDM0MsUUFBRSx5QkFBeUI7QUFDM0IsUUFBRSxlQUFlO0FBQ2pCLFFBQUUsZ0JBQWdCO0FBQ2xCLFVBQUksdUJBQXVCLEtBQUssT0FBTyxLQUFZLEtBQUssUUFBUSxLQUFLLE1BQU0sS0FBSyxLQUFLLEtBQUssSUFBSSxLQUFLLE9BQU8sUUFBbUMsRUFBRSxLQUFLO0FBQUEsSUFDckosR0FBRyxFQUFFLFNBQVMsS0FBSyxDQUFDO0FBQUEsRUFDckI7QUFBQSxFQUVBLE1BQU0sWUFBWSxPQUF3QixRQUFrRCxrQkFBMEIsT0FBZSxlQUF5QjtBQUM3SixVQUFNLGdCQUFnQixNQUFNLFFBQVEsSUFBSSxNQUFNLElBQUksT0FBTyxTQUFTO0FBelFwRTtBQTBRRyxZQUFNLGFBQWEseUJBQXdCLEtBQUssSUFBSTtBQUNwRCxZQUFNLGdCQUFnQixjQUFjLFNBQVMsS0FBSyxJQUFJO0FBQ3RELFlBQU0sY0FBYyxxQkFBcUIsT0FBTyxXQUFXLFdBQVcsZ0JBQWdCO0FBQ3RGLFlBQU0sZUFBZSxLQUFLLFNBQVMsS0FBSztBQUN4QyxVQUFJLHlCQUF5QjtBQUU3QixVQUFJLGtCQUFrQixtQkFBbUI7QUFDeEMsaUNBQTBCLGtCQUFNLGtCQUFrQixRQUFRLEtBQUssTUFBTSxJQUFJLE1BQS9DLG1CQUFtRCw4QkFBbkQsWUFBZ0Y7QUFBQSxNQUMzRztBQUVBLFVBQUssaUJBQWlCLENBQUMsS0FBSyxLQUFLLG1CQUFvQixDQUFDLGVBQWUsZ0JBQWdCLHdCQUF3QjtBQUM1RyxlQUFPO0FBQUEsTUFDUjtBQUVBLFlBQU0sWUFBWSxLQUFLLEtBQUssTUFBTSxHQUFHLEVBQUUsU0FBVSxzQkFBcUIsTUFBTSxJQUFJLGlCQUFpQixNQUFNLEdBQUcsRUFBRTtBQUM1RyxhQUFPLGFBQWEsUUFBUSxPQUFPO0FBQUEsSUFDcEMsQ0FBQyxDQUFDO0FBRUYsV0FBTyxjQUFjLE9BQU8sQ0FBQyxTQUFTLFNBQVMsSUFBSTtBQUFBLEVBQ3BEO0FBQUEsRUFJQSxVQUFVLE9BQXlDO0FBalNwRDtBQWtTRSxVQUFNLE9BQU8sS0FBSztBQUVsQixRQUFJLENBQUMsOEJBQU0sU0FBUTtBQUNsQixXQUFLLFNBQVMsV0FBSyxnQkFBZ0IsV0FBckIsWUFBK0I7QUFDN0MsV0FBSyxZQUFZLFdBQUssZ0JBQWdCLGNBQXJCLFlBQWtDO0FBQUEsSUFDcEQ7QUFFQSxVQUFNLEtBQUssQ0FBQyxHQUFHLE1BQU07QUFDcEIsVUFBSSxhQUFhLDZCQUFXLENBQUUsY0FBYSw0QkFBVTtBQUNwRCxlQUFPO0FBQUEsTUFDUjtBQUNBLFVBQUksQ0FBRSxjQUFhLDhCQUFZLGFBQWEsMkJBQVM7QUFDcEQsZUFBTztBQUFBLE1BQ1I7QUFFQSxVQUFJLGFBQWEsNkJBQVcsYUFBYSwyQkFBUztBQUNqRCxlQUFPLEtBQUssWUFDVCxFQUFFLEtBQUssY0FBYyxFQUFFLElBQUksSUFDM0IsRUFBRSxLQUFLLGNBQWMsRUFBRSxJQUFJO0FBQUEsTUFDL0I7QUFFQSxVQUFJLGFBQWEsMkJBQVMsYUFBYSx5QkFBTztBQUM3QyxZQUFJLEtBQUssV0FBVyxXQUFXO0FBQzlCLGlCQUFPLEtBQUssWUFBWSxFQUFFLEtBQUssUUFBUSxFQUFFLEtBQUssUUFBUSxFQUFFLEtBQUssUUFBUSxFQUFFLEtBQUs7QUFBQSxRQUM3RSxXQUFXLEtBQUssV0FBVyxZQUFZO0FBQ3RDLGlCQUFPLEtBQUssWUFBWSxFQUFFLEtBQUssUUFBUSxFQUFFLEtBQUssUUFBUSxFQUFFLEtBQUssUUFBUSxFQUFFLEtBQUs7QUFBQSxRQUM3RSxXQUFXLEtBQUssV0FBVyxRQUFRO0FBQ2xDLGlCQUFPLEtBQUssWUFDVCxFQUFFLFNBQVMsY0FBYyxFQUFFLFFBQVEsSUFDbkMsRUFBRSxTQUFTLGNBQWMsRUFBRSxRQUFRO0FBQUEsUUFDdkM7QUFBQSxNQUNEO0FBRUEsYUFBTztBQUFBLElBQ1IsQ0FBQztBQUVELFdBQU87QUFBQSxFQUNSO0FBQUEsRUFFQSxZQUFZLE9BQXdCLGtCQUEwQixPQUFlO0FBQzVFLFVBQU0sV0FBNEIsQ0FBQztBQUVuQyxVQUFNLFdBQVcsQ0FBQyxhQUFxQjtBQUN0QyxhQUFPLFNBQVMsTUFBTSxHQUFHLEVBQUUsU0FBUyxpQkFBaUIsTUFBTSxHQUFHLEVBQUU7QUFBQSxJQUNqRTtBQUVBLFVBQU0sUUFBUSxDQUFDLFNBQVM7QUFDdkIsWUFBTSxZQUFZLFNBQVMsS0FBSyxJQUFJO0FBRXBDLFVBQUksZ0JBQWdCLDJCQUFTO0FBQzVCLFlBQUksWUFBWSxPQUFPO0FBQ3RCLG1CQUFTLEtBQUssR0FBRyxLQUFLLFlBQVksS0FBSyxVQUFVLGtCQUFrQixLQUFLLENBQUM7QUFBQSxRQUMxRTtBQUFBLE1BQ0QsT0FBTztBQUNOLGlCQUFTLEtBQUssSUFBSTtBQUFBLE1BQ25CO0FBQUEsSUFDRCxDQUFDO0FBRUQsV0FBTztBQUFBLEVBQ1I7QUFBQSxFQUVBLFNBQVMsTUFBYSxHQUFlO0FBQ3BDLFVBQU0sU0FBUyxLQUFLO0FBQ3BCLFVBQU0sV0FBVyxJQUFJLHVCQUFLO0FBQzFCLGFBQVMsYUFBYTtBQUV0QixhQUFTLFFBQVEsQ0FBQyxTQUFTO0FBQzFCLFdBQUssU0FBUyxPQUFPLFFBQVEsRUFBRSx1Q0FBdUMsQ0FBQztBQUN2RSxXQUFLLFFBQVEsUUFBUTtBQUNyQixXQUFLLFFBQVEsWUFBWTtBQUN4QixlQUFPLElBQUksWUFBWSxvQkFBb0IsSUFBSTtBQUFBLE1BQ2hELENBQUM7QUFBQSxJQUNGLENBQUM7QUFFRCxhQUFTLFFBQVEsQ0FBQyxTQUFTO0FBQzFCLFdBQUssU0FBUyxPQUFPLFFBQVEsRUFBRSx1Q0FBdUMsQ0FBQztBQUN2RSxXQUFLLFFBQVEsT0FBTztBQUNwQixXQUFLLElBQUksU0FBUyxZQUFZO0FBQzlCLFdBQUssSUFBSSxhQUFhLGdCQUFnQixRQUFRO0FBQzlDLFdBQUssUUFBUSxNQUFNO0FBQ2xCLGVBQU8sSUFBSSxZQUFZLGtCQUFrQixJQUFJO0FBQUEsTUFDOUMsQ0FBQztBQUFBLElBQ0YsQ0FBQztBQUVELGFBQVMsYUFBYTtBQUV0QixXQUFPLElBQUksVUFBVSxRQUFRLGFBQWEsVUFBVSxNQUFNLHFDQUFxQyxJQUFJO0FBQ25HLGFBQVMsZUFBZSxFQUFFLEdBQUcsRUFBRSxPQUFPLEdBQUcsRUFBRSxNQUFNLENBQUM7QUFBQSxFQUNuRDtBQUFBLEVBRUEsV0FBVyxRQUFpQixHQUFlO0FBQzFDLFVBQU0sU0FBUyxLQUFLO0FBQ3BCLFVBQU0sYUFBYSxJQUFJLHVCQUFLO0FBQzVCLGVBQVcsYUFBYTtBQUV4QixlQUFXLFFBQVEsQ0FBQyxTQUFTO0FBQzVCLFdBQUssU0FBUyxRQUFRO0FBQ3RCLFdBQUssUUFBUSxRQUFRO0FBQ3JCLFdBQUssUUFBUSxZQUFZO0FBQ3hCLFlBQUksa0JBQWtCLG1CQUFtQjtBQUN4QyxjQUFJLG1CQUFtQixPQUFPLEtBQUssUUFBUSxNQUFNLEVBQUUsS0FBSztBQUFBLFFBQ3pEO0FBQUEsTUFDRCxDQUFDO0FBQUEsSUFDRixDQUFDO0FBRUQsZUFBVyxRQUFRLENBQUMsU0FBUztBQUM1QixXQUFLLFNBQVMsUUFBUTtBQUN0QixXQUFLLFFBQVEsT0FBTztBQUNwQixXQUFLLElBQUksU0FBUyxZQUFZO0FBQzlCLFdBQUssSUFBSSxhQUFhLGdCQUFnQixRQUFRO0FBQzlDLFdBQUssUUFBUSxNQUFNO0FBQ2xCLGVBQU8sSUFBSSxZQUFZLHdCQUF3QixNQUFNO0FBQUEsTUFDdEQsQ0FBQztBQUFBLElBQ0YsQ0FBQztBQUVELGVBQVcsYUFBYTtBQUV4QixXQUFPLElBQUksVUFBVSxRQUFRLGFBQWEsWUFBWSxRQUFRLHVDQUF1QyxJQUFJO0FBQ3pHLGVBQVcsZUFBZSxFQUFFLEdBQUcsRUFBRSxPQUFPLEdBQUcsRUFBRSxNQUFNLENBQUM7QUFBQSxFQUNyRDtBQUFBLEVBRUEsa0JBQWtCLE1BQWtDO0FBQ25ELFVBQU0sS0FBSyxLQUFLLE9BQU8sY0FBYyxlQUFlLElBQUksT0FBTyxJQUFJLEtBQUs7QUFDeEUsV0FBTztBQUFBLEVBQ1I7QUFHRDtBQUVBLDBCQUFpQyxRQUFrRCxLQUFtQyxJQUFpQixNQUF3QjtBQUM5SixRQUFNLE9BQU8sT0FBTyxJQUFJLE1BQU0sc0JBQXNCLElBQUksVUFBVTtBQUNsRSxNQUFJLENBQUUsaUJBQWdCO0FBQVE7QUFDOUIsTUFBSSxhQUFhLHFDQUFjLElBQUk7QUFDbkMsUUFBTSxPQUFPLElBQUksTUFBTSxRQUFRLE1BQU0sQ0FBQyxTQUFTO0FBQzlDLFVBQU0sT0FBTyxJQUFJLGVBQWUsRUFBRTtBQUVsQyxRQUFJLFdBQVcsV0FBVyxTQUFTLE9BQU8sTUFBTTtBQUMvQyxvQkFBYztBQUFBLElBQ2Y7QUFDQSxRQUFJLE1BQU07QUFDVCxZQUFNLEVBQUUsY0FBYztBQUN0QixZQUFNLFVBQVUsb0JBQW9CLE1BQU0sU0FBUztBQUNuRCxVQUFJLFlBQVksTUFBTSxDQUFDO0FBQVMsZUFBTztBQUN2QyxZQUFNLGFBQWEsVUFBVTtBQUM3QixZQUFNLFFBQVEsS0FBSyxNQUFNLElBQUk7QUFDN0IsWUFBTSxPQUFPLFdBQVcsYUFBYSxHQUFHO0FBQUEsRUFBMEIsa0JBQWtCO0FBQ3BGLGFBQU8sTUFBTSxLQUFLLElBQUk7QUFBQSxJQUN2QjtBQUNBLFdBQU87QUFBQSxFQUEwQjtBQUFBLEVBQ2xDLENBQUM7QUFDRjtBQUVPLDZCQUE2QixNQUFjLFdBQW1CLFFBQVEsR0FBRztBQUMvRSxNQUFJLE9BQU8sWUFBWTtBQUN2QixRQUFNLFFBQVEsS0FBSyxNQUFNLElBQUk7QUFDN0IsU0FBTyxPQUFPLE1BQU0sUUFBUTtBQUMzQixRQUFJLFFBQVEsSUFBSTtBQUFFLGFBQU87QUFBQSxJQUFJO0FBQzdCLFFBQUksTUFBTSxNQUFNLFdBQVcsS0FBSyxHQUFHO0FBQ2xDLGFBQU87QUFBQSxJQUNSO0FBQ0E7QUFDQTtBQUFBLEVBQ0Q7QUFDQSxTQUFPO0FBQ1I7QUFFQSw0QkFBbUMsUUFBa0QsTUFBb0I7QUFFeEcsTUFBSSxDQUFDO0FBQU0sV0FBTyxDQUFDO0FBQ25CLFFBQU0sWUFBeUMsQ0FBQztBQUNoRCxRQUFNLFVBQVUsTUFBTSxPQUFPLElBQUksTUFBTSxLQUFLLElBQUk7QUFDaEQsTUFBSSxDQUFDO0FBQVMsV0FBTztBQUVyQixRQUFNLGFBQWEsUUFBUSxNQUFNLG9DQUFvQztBQUNyRSxNQUFJLENBQUM7QUFBWSxXQUFPO0FBQ3hCLGFBQVcsU0FBUyxZQUFZO0FBQy9CLFVBQU0sT0FBTyxpQ0FBVSxNQUFNLFFBQVEsd0JBQXdCLEVBQUUsRUFBRSxRQUFRLE9BQU8sRUFBRSxDQUFDO0FBQ25GLFFBQUksQ0FBQztBQUFNO0FBQ1gsY0FBVSxLQUFLLElBQUk7QUFBQSxFQUNwQjtBQUVBLFNBQU87QUFDUjtBQUVBLDhCQUFxQyxRQUFrRCxZQUFvQixNQUFhLFNBQTJCO0FBQ2xKLFNBQU8sSUFBSSxNQUFNLFFBQVEsTUFBTSxDQUFDLFNBQVM7QUFDeEMsVUFBTSxhQUFhLEtBQUssTUFBTSxvQ0FBb0M7QUFDbEUsUUFBSSxDQUFDO0FBQVksYUFBTztBQUN4QixlQUFXLFNBQVMsWUFBWTtBQUMvQixZQUFNLE9BQU8saUNBQVUsTUFBTSxRQUFRLHdCQUF3QixFQUFFLEVBQUUsUUFBUSxPQUFPLEVBQUUsQ0FBQztBQUNuRixVQUFJLENBQUM7QUFBTTtBQUNYLFVBQUksS0FBSyxPQUFPLFlBQVk7QUFDM0IsY0FBTSxhQUFhLHFDQUFjLE9BQU87QUFDeEMsY0FBTSxXQUFXO0FBQUEsRUFBMEI7QUFDM0MsZUFBTyxLQUFLLFFBQVEsT0FBTyxRQUFRO0FBQUEsTUFDcEM7QUFBQSxJQUNEO0FBQ0EsV0FBTztBQUFBLEVBQ1IsQ0FBQztBQUVGO0FBRU8sNEJBQTRCLFVBQTRCLFFBQWtELFFBQXdCO0FBQ3hJLFFBQU0sbUJBQW1CLFNBQVM7QUFDbEMsTUFBSTtBQUNKLE1BQUksUUFBUSxTQUFTO0FBRXJCLE1BQUkscUJBQXFCLEtBQUs7QUFDN0IsUUFBSSxxQkFBcUIsSUFBSTtBQUM1QixxQkFBZTtBQUFBLElBQ2hCLE9BQU87QUFDTixxQkFBZSxPQUFPLElBQUksTUFBTSxzQkFBc0IsZ0JBQWdCO0FBQUEsSUFDdkU7QUFBQSxFQUNEO0FBRUEsTUFBSSxnQkFBZ0IscUJBQXFCLEtBQUs7QUFDN0MsWUFBUSxNQUFNLFFBQVEsa0JBQWtCLGFBQWEsSUFBSTtBQUFBLEVBQzFELFdBQVcsb0JBQW9CLEtBQUs7QUFDbkMsWUFBUSxNQUFNLFFBQVEsa0JBQWtCLE9BQU87QUFBQSxFQUNoRCxPQUFPO0FBQ04sWUFBUSxNQUFNLFFBQVEsa0JBQWtCLEVBQUU7QUFBQSxFQUMzQztBQUVBLFNBQU87QUFDUjtBQUdBLElBQU0sNEJBQU4sY0FBd0Msc0NBQW9CO0FBQUEsRUFFM0QsWUFBWSxJQUFpQixnQkFBZ0M7QUFDNUQsVUFBTSxFQUFFO0FBQ1IsU0FBSyxpQkFBaUI7QUFBQSxFQUN2QjtBQUFBLEVBRUEsV0FBVztBQUNWLFNBQUssZUFBZSxvQkFBb0I7QUFBQSxFQUN6QztBQUNEOzs7QUQxZ0JPLElBQU0sdUJBQXVCO0FBRzdCLElBQU0scUJBQU4sY0FBaUMsMkJBQVM7QUFBQSxFQU83QyxZQUFZLE1BQXFCLFFBQWtEO0FBQy9FLFVBQU0sSUFBSTtBQUZkLHFCQUF5QixLQUFLLFlBQVksU0FBUztBQUcvQyxTQUFLLFNBQVM7QUFFZCxTQUFLLFVBQVUsS0FBSyxRQUFRLEtBQUssSUFBSTtBQUNyQyxRQUFJLGtCQUFrQixzQkFBc0I7QUFDeEMsV0FBSyxrQkFBa0IsS0FBSyxPQUFPO0FBQUEsSUFDdkMsV0FBVyxrQkFBa0IsbUJBQW1CO0FBQzVDLFdBQUssa0JBQWtCLE9BQU8sU0FBUztBQUFBLElBQzNDO0FBRUEsU0FBSyxjQUNELEtBQUssT0FBTyxJQUFJLFVBQVUsR0FBRyxhQUFhLENBQUMsU0FBUztBQUNoRCxXQUFLLGFBQWE7QUFDbEIsV0FBSyxRQUFRLEtBQUssV0FBVyxLQUFLLE1BQU0sS0FBSyxRQUFRLEtBQUssaUJBQWlCLEtBQUssU0FBUyxRQUFXLFFBQVcsSUFBSTtBQUFBLElBQ3ZILENBQUMsQ0FDTDtBQUFBLEVBQ0o7QUFBQSxFQUVBLGNBQWM7QUFDVixXQUFPO0FBQUEsRUFDWDtBQUFBLEVBRUEsaUJBQWlCO0FBQ2IsV0FBTztBQUFBLEVBQ1g7QUFBQSxFQUVBLFVBQVU7QUFDTixXQUFPO0FBQUEsRUFDWDtBQUFBLEVBRUEsTUFBTSxTQUFTO0FBQ1gsU0FBSyxRQUFRLEtBQUssV0FBVyxLQUFLLE1BQU0sS0FBSyxRQUFRLEtBQUssaUJBQWlCLEtBQUssU0FBUyxRQUFXLFFBQVcsS0FBSyxVQUFVO0FBQUEsRUFDbEk7QUFBQSxFQUVBLE1BQU0sUUFDRixXQUNBLE1BQ0EsUUFDQSxpQkFDQSxTQUNBLElBQ0EsS0FDQSxNQUNGO0FBQ0UsU0FBSyxZQUFZO0FBQ2pCLFNBQUssT0FBTztBQUNaLFNBQUssa0JBQWtCO0FBQ3ZCLFFBQUksTUFBTTtBQUFFLFdBQUssYUFBYTtBQUFBLElBQU07QUFDcEMsUUFBSSxTQUFTLFVBQVUsY0FBYyw0QkFBNEI7QUFDakUsUUFBSSxDQUFDLFFBQVE7QUFDVCxlQUFTLFVBQVUsU0FBUyxNQUFNO0FBQUEsUUFDOUIsS0FBSztBQUFBLFFBQ0wsTUFBTTtBQUFBLE1BQ1YsQ0FBQztBQUFBLElBQ0w7QUFFQSxVQUFNLGFBQWEsT0FBTyxJQUFJLFVBQVUsY0FBYztBQUV0RCxVQUFNLFlBQVksTUFBTSxhQUFhLFFBQVEsVUFBVTtBQUV2RCxRQUFJLG9CQUFvQixVQUFVLGNBQWMsd0JBQXdCO0FBQ3hFLFFBQUksQ0FBQyxtQkFBbUI7QUFDcEIsMEJBQW9CLFVBQVUsVUFBVSxFQUFFLEtBQUssd0JBQXdCLENBQUM7QUFBQSxJQUM1RSxPQUFPO0FBQ0gsd0JBQWtCLE1BQU07QUFBQSxJQUM1QjtBQUVBLFVBQU0sa0JBQWtCLElBQUksMEJBQVEsaUJBQWlCO0FBQ3JELG9CQUNLLFFBQVEsaUJBQWlCLEVBQ3pCLFNBQVMsNEJBQTRCLEVBQ3JDLFlBQVksQ0FBQyxPQUFPO0FBdkZqQztBQXdGZ0IsVUFBSSxZQUFZO0FBQ1osY0FBTSxVQUFVLFVBQVUsT0FBTyxDQUFDLEtBQUssYUFBYTtBQUNoRCxjQUFJLFNBQVMsTUFBTSxtQkFDZixVQUNBLFFBQ0EsV0FBVyxNQUNmO0FBQ0EsaUJBQU87QUFBQSxRQUNYLEdBQUcsQ0FBQyxDQUEyQjtBQUMvQixXQUFHLFdBQVcsT0FBTztBQUFBLE1BQ3pCO0FBRUEsY0FBUSxJQUFJLFFBQVEsSUFBSTtBQUN4QixTQUFHLFVBQVUsV0FBVyxTQUFTO0FBQ2pDLFNBQUcsU0FBUyxtQ0FBTSxPQUFOLFlBQVksU0FBUztBQUVqQyxVQUFJLEdBQUcsU0FBUyxNQUFNLGFBQWEsQ0FBQyw4QkFBTSxHQUFHLFNBQVE7QUFDakQsZUFBTztBQUNQLFdBQUcsU0FBUyxTQUFTO0FBQUEsTUFDekIsT0FBTztBQUNILGVBQU8sVUFBVSxLQUFLLENBQUMsYUFBYSxTQUFTLE9BQU8sS0FBSyxFQUFFO0FBQUEsTUFDL0Q7QUFFQSxTQUFHLFNBQVMsT0FBTyxVQUFVO0FBQ3pCLFlBQUksVUFBVSxXQUFXO0FBQ3JCLGlCQUFPO0FBQUEsUUFDWCxPQUFPO0FBQ0gsaUJBQU8sVUFBVSxLQUFLLENBQUMsYUFBYSxTQUFTLE9BQU8sS0FBSztBQUFBLFFBQzdEO0FBQ0EsY0FBTSxRQUFRLFdBQVcsTUFBTSxRQUFRLGlCQUFpQixTQUFTLFFBQVcsUUFBVyxVQUFVO0FBQUEsTUFDckcsQ0FBQztBQUFBLElBQ0wsQ0FBQztBQUVMLFVBQU0sdUJBQXVCLG1CQUFtQixNQUFNLFFBQVEsaUJBQWlCLFNBQVMsUUFBVyxRQUFXLFVBQVU7QUFBQSxFQUM1SDtBQUNKOzs7QTZHMUhBLHdCQUEwRDtBQUVuRCwwQkFBMEIsUUFBOEI7QUFDM0QsU0FBTyxXQUFXO0FBQUEsSUFDZCxJQUFJO0FBQUEsSUFDSixNQUFNO0FBQUEsSUFDTixVQUFVLE1BQU07QUFDWixhQUFPLHFCQUFxQjtBQUFBLElBQ2hDO0FBQUEsRUFDSixDQUFDO0FBRUQsU0FBTyxjQUFjLE9BQU8sSUFBSSxVQUFVLEdBQUcsZUFBZSxDQUFDLE1BQVksUUFBZ0IsU0FBdUI7QUFDNUcsVUFBTSxPQUFPLE9BQU8sYUFBYSxFQUFFLEtBQUs7QUFDeEMsVUFBTSxPQUFPLE9BQU8sVUFBVSxFQUFFO0FBQ2hDLFVBQU0sV0FBVyxPQUFPLFFBQVEsSUFBSTtBQUNwQyxRQUFJLFNBQVMsS0FBSyxNQUFNLE1BQU0sU0FBUyxLQUFLLE1BQU0sS0FBSztBQUNuRCxXQUFLLFFBQVEsQ0FBQyxTQUFTO0FBQ25CLGFBQUssU0FBUyx3QkFBd0IsRUFDakMsUUFBUSxNQUFNLEVBQ2QsUUFBUSxNQUFNO0FBQ1gsY0FBSSxPQUFPLE9BQU8sT0FBTyxDQUFDLEdBQUcsT0FBTyxRQUFRO0FBQzVDLGVBQUssS0FBSyxPQUFPLFdBQVc7QUFDNUIsZ0JBQU0sT0FBTyxxQ0FBYyxJQUFJO0FBQy9CLGNBQUksU0FBUyxLQUFLLE1BQU0sSUFBSTtBQUN4QixtQkFBTyxpQkFBaUI7QUFBQSxFQUEwQjtBQUFBLENBQWM7QUFBQSxVQUNwRSxXQUFXLFNBQVMsS0FBSyxNQUFNLEtBQUs7QUFFaEMsa0JBQU0sUUFBUSxLQUFLLE1BQU0sSUFBSTtBQUM3QixrQkFBTSxXQUFXLE1BQU0sSUFBSSxDQUFDLFVBQVM7QUFDakMscUJBQU8sS0FBSztBQUFBLFlBQ2hCLENBQUM7QUFDRCxtQkFBTyxpQkFBaUI7QUFBQSxFQUEwQixTQUFTLEtBQUssSUFBSTtBQUFBLENBQVc7QUFBQSxVQUNuRjtBQUFBLFFBQ0osQ0FBQztBQUFBLE1BQ1QsQ0FBQztBQUFBLElBQ0w7QUFBQSxFQUNKLENBQUMsQ0FBQztBQUNOOzs7QTlHL0JBLElBQXFCLHVCQUFyQixjQUFrRCx5QkFBTztBQUFBLEVBR3hELE1BQU0sU0FBUztBQUNkLFVBQU0sS0FBSyxhQUFhO0FBQ3hCLFNBQUssY0FBYyxJQUFJLGFBQVksSUFBSTtBQUN2QyxTQUFLLGNBQWMsS0FBSyxXQUFXO0FBQ25DLFNBQUssWUFBWSxRQUFRO0FBQ3pCLHFCQUFpQixJQUFJO0FBRXJCLFFBQUksS0FBSyxJQUFJLFVBQVUsYUFBYTtBQUNuQyxXQUFLLGFBQWEsc0JBQXNCLENBQUMsU0FBd0I7QUFDaEUsZUFBTyxJQUFJLG1CQUFtQixNQUFNLElBQUk7QUFBQSxNQUN6QyxDQUFDO0FBQUEsSUFDRixPQUFPO0FBQ04sV0FBSyxJQUFJLFVBQVUsY0FBYyxZQUFZO0FBQzVDLGFBQUssYUFBYSxzQkFBc0IsQ0FBQyxTQUF3QjtBQUNoRSxpQkFBTyxJQUFJLG1CQUFtQixNQUFNLElBQUk7QUFBQSxRQUN6QyxDQUFDO0FBQUEsTUFDRixDQUFDO0FBQUEsSUFDRjtBQUVBLFNBQUssbUNBQW1DLG1CQUFtQixDQUFDLFFBQWdCLElBQWlCLFFBQXNDO0FBQ2xJLFdBQUssb0JBQW9CLFFBQVEsSUFBSSxHQUFHO0FBQUEsSUFDekMsQ0FBQztBQUNELFlBQVEsSUFBSSxnQ0FBZ0M7QUFBQSxFQUM3QztBQUFBLEVBRUEsb0JBQW9CLFFBQWdCLElBQWlCLEtBQW1DO0FBQ3ZGLFVBQU0sV0FBVyxJQUFJLGlCQUFpQixNQUFNO0FBcEM5QztBQXFDRyxZQUFNLGFBQWEsU0FBRyxrQkFBSCxtQkFBa0IsV0FBVyxLQUFLO0FBQ3JELFVBQUksWUFBWTtBQUNmLG1CQUFXLGlCQUFpQixTQUFTLENBQUMsTUFBTTtBQUMzQyxZQUFFLHlCQUF5QjtBQUMzQixZQUFFLGVBQWU7QUFDakIsWUFBRSxnQkFBZ0I7QUFDbEIsY0FBSSx1QkFBdUIsS0FBSyxLQUFLLE1BQU0saUNBQVUsTUFBTSxHQUFHLEtBQUssSUFBSSxLQUFLLFFBQVEsRUFBRSxLQUFLO0FBQUEsUUFDNUYsR0FBRyxFQUFFLFNBQVMsS0FBSyxDQUFDO0FBQUEsTUFDckI7QUFBQSxJQUNELENBQUM7QUFFRCxhQUFTLFFBQVEsSUFBSTtBQUFBLE1BQ3BCLFdBQVc7QUFBQSxNQUNYLFNBQVM7QUFBQSxJQUNWLENBQUM7QUFFRCxRQUFJO0FBQ0gsVUFBSSxLQUFLLElBQUksVUFBVSxhQUFhO0FBQ25DLGNBQU0saUJBQWlCLElBQUksZUFBZSxNQUFNLEtBQUssUUFBUSxJQUFJLEtBQUssUUFBUTtBQUM5RSx1QkFBZSxPQUFPLE1BQU0saUNBQVUsTUFBTSxHQUFHLElBQUksR0FBRztBQUFBLE1BQ3ZELE9BQU87QUFDTixhQUFLLElBQUksVUFBVSxjQUFjLE1BQU07QUFDdEMsZ0JBQU0saUJBQWlCLElBQUksZUFBZSxNQUFNLEtBQUssUUFBUSxJQUFJLEtBQUssUUFBUTtBQUM5RSx5QkFBZSxPQUFPLE1BQU0saUNBQVUsTUFBTSxHQUFHLElBQUksR0FBRztBQUFBLFFBQ3ZELENBQUM7QUFBQSxNQUNGO0FBQUEsSUFDRCxTQUFTLEdBQVA7QUFDRCxVQUFJLHlCQUFPLHVGQUF1RjtBQUNsRyxjQUFRLE1BQU0sQ0FBQztBQUFBLElBQ2hCO0FBQUEsRUFDRDtBQUFBLEVBRUEsTUFBTSxXQUFXO0FBQ2hCLFlBQVEsSUFBSSxrQ0FBa0M7QUFBQSxFQUMvQztBQUFBLEVBRUEsTUFBTSxlQUFlO0FBQ3BCLFVBQU0sT0FBTyxNQUFNLEtBQUssU0FBUztBQUNqQyxTQUFLLFdBQVcsT0FBTyxPQUFPLENBQUMsR0FBRyxtQkFBa0IsSUFBSTtBQUFBLEVBQ3pEO0FBQUEsRUFFQSxNQUFNLGVBQWU7QUFDcEIsVUFBTSxLQUFLLFNBQVMsS0FBSyxRQUFRO0FBQUEsRUFDbEM7QUFBQSxFQUVBLE1BQU0sdUJBQXVCO0FBQzVCLFVBQU0sRUFBRSxjQUFjLEtBQUs7QUFFM0IsUUFBSSxPQUE2QjtBQUNqQyxVQUFNLFNBQVMsVUFBVSxnQkFBZ0Isb0JBQW9CO0FBRTdELFFBQUksT0FBTyxTQUFTLEdBQUc7QUFDdEIsYUFBTyxPQUFPO0FBQUEsSUFDZixPQUFPO0FBQ04sYUFBTyxVQUFVLGFBQWEsS0FBSztBQUNuQyxZQUFNLDhCQUFNLGFBQWEsRUFBRSxNQUFNLHNCQUFzQixRQUFRLEtBQUs7QUFBQSxJQUNyRTtBQUVBLFFBQUksQ0FBQztBQUFNO0FBQ1gsY0FBVSxXQUFXLElBQUk7QUFBQSxFQUMxQjtBQUFBLEVBRUEsTUFBTSxxQkFBcUI7QUFDMUIsVUFBTSxFQUFFLGNBQWMsS0FBSztBQUMzQixVQUFNLE9BQU8sVUFBVSxnQkFBZ0Isb0JBQW9CLEVBQUU7QUFDN0QsUUFBSSxDQUFDO0FBQU07QUFDWCxVQUFNLE9BQU8sS0FBSztBQUNsQixTQUFLLFFBQVEsS0FBSyxXQUFXLEtBQUssTUFBTSxNQUFNLEtBQUssaUJBQWlCLEtBQUssU0FBUyxRQUFXLFFBQVcsS0FBSyxVQUFVO0FBQUEsRUFDeEg7QUFDRDsiLAogICJuYW1lcyI6IFtdCn0K
